/*! For license information please see main.409370db.js.LICENSE.txt */
(()=>{var e={228(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,r,a;for(n=1,r=arguments.length;n<r;n++)for(t in a=arguments[n])e[t]=a[t];return e}var r=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function a(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}}var i=0;function o(e){return"_leaflet_id"in e||(e._leaflet_id=++i),e._leaflet_id}function s(e,t,n){var r,a,i,o;return o=function(){r=!1,a&&(i.apply(n,a),a=!1)},i=function(){r?a=arguments:(e.apply(n,arguments),setTimeout(o,t),r=!0)},i}function l(e,t,n){var r=t[1],a=t[0],i=r-a;return e===r&&n?e:((e-a)%i+i)%i+a}function c(){return!1}function d(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function h(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function u(e){return h(e).split(/\s+/)}function p(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?r(e.options):{}),t)e.options[n]=t[n];return e.options}function m(e,t,n){var r=[];for(var a in e)r.push(encodeURIComponent(n?a.toUpperCase():a)+"="+encodeURIComponent(e[a]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")}var f=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(f,function(e,n){var r=t[n];if(void 0===r)throw new Error("No value provided for variable "+e);return"function"===typeof r&&(r=r(t)),r})}var y=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function w(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var v="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var x=0;function k(e){var t=+new Date,n=Math.max(0,16-(t-x));return x=t+n,window.setTimeout(e,n)}var _=window.requestAnimationFrame||b("RequestAnimationFrame")||k,T=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function S(e,t,n){if(!n||_!==k)return _.call(window,a(e,t));e.call(t)}function N(e){e&&T.call(window,e)}var C={__proto__:null,extend:n,create:r,bind:a,get lastId(){return i},stamp:o,throttle:s,wrapNum:l,falseFn:c,formatNum:d,trim:h,splitWords:u,setOptions:p,getParamString:m,template:g,isArray:y,indexOf:w,emptyImageUrl:v,requestFn:_,cancelFn:T,requestAnimFrame:S,cancelAnimFrame:N};function A(){}function j(e){if("undefined"!==typeof L&&L&&L.Mixin){e=y(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}A.extend=function(e){var t=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},a=t.__super__=this.prototype,i=r(a);for(var o in i.constructor=t,t.prototype=i,this)Object.prototype.hasOwnProperty.call(this,o)&&"prototype"!==o&&"__super__"!==o&&(t[o]=this[o]);return e.statics&&n(t,e.statics),e.includes&&(j(e.includes),n.apply(null,[i].concat(e.includes))),n(i,e),delete i.statics,delete i.includes,i.options&&(i.options=a.options?r(a.options):{},n(i.options,e.options)),i._initHooks=[],i.callInitHooks=function(){if(!this._initHooksCalled){a.callInitHooks&&a.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=i._initHooks.length;e<t;e++)i._initHooks[e].call(this)}},t},A.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},A.mergeOptions=function(e){return n(this.prototype.options,e),this},A.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var E={on:function(e,t,n){if("object"===typeof e)for(var r in e)this._on(r,e[r],t);else for(var a=0,i=(e=u(e)).length;a<i;a++)this._on(e[a],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var r in e)this._off(r,e[r],t);else{e=u(e);for(var a=1===arguments.length,i=0,o=e.length;i<o;i++)a?this._off(e[i]):this._off(e[i],t,n)}else delete this._events;return this},_on:function(e,t,n,r){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var a={fn:t,ctx:n};r&&(a.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(a)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var r,a,i;if(this._events&&(r=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var o=this._listens(e,t,n);if(!1!==o){var s=r[o];this._firingCount&&(s.fn=c,this._events[e]=r=r.slice()),r.splice(o,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(a=0,i=r.length;a<i;a++)r[a].fn=c;delete this._events[e]}},fire:function(e,t,r){if(!this.listens(e,r))return this;var a=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var i=this._events[e];if(i){this._firingCount=this._firingCount+1||1;for(var o=0,s=i.length;o<s;o++){var l=i[o],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,a)}this._firingCount--}}return r&&this._propagateEvent(a),this},listens:function(e,t,n,r){"string"!==typeof e&&console.warn('"string" type argument expected');var a=t;"function"!==typeof t&&(r=!!t,a=void 0,n=void 0);var i=this._events&&this._events[e];if(i&&i.length&&!1!==this._listens(e,a,n))return!0;if(r)for(var o in this._eventParents)if(this._eventParents[o].listens(e,t,n,r))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var r=this._events[e]||[];if(!t)return!!r.length;n===this&&(n=void 0);for(var a=0,i=r.length;a<i;a++)if(r[a].fn===t&&r[a].ctx===n)return a;return!1},once:function(e,t,n){if("object"===typeof e)for(var r in e)this._on(r,e[r],t,!0);else for(var a=0,i=(e=u(e)).length;a<i;a++)this._on(e[a],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[o(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[o(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};E.addEventListener=E.on,E.removeEventListener=E.clearAllEventListeners=E.off,E.addOneTimeEventListener=E.once,E.fireEvent=E.fire,E.hasEventListeners=E.listens;var B=A.extend(E);function P(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var I=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function O(e,t,n){return e instanceof P?e:y(e)?new P(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new P(e.x,e.y):new P(e,t,n)}function R(e,t){if(e)for(var n=t?[e,t]:e,r=0,a=n.length;r<a;r++)this.extend(n[r])}function M(e,t){return!e||e instanceof R?e:new R(e,t)}function D(e,t){if(e)for(var n=t?[e,t]:e,r=0,a=n.length;r<a;r++)this.extend(n[r])}function W(e,t){return e instanceof D?e:new D(e,t)}function H(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function z(e,t,n){return e instanceof H?e:y(e)&&"object"!==typeof e[0]?3===e.length?new H(e[0],e[1],e[2]):2===e.length?new H(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new H(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new H(e,t,n)}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(e){return this.clone()._add(O(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(O(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new P(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new P(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=I(this.x),this.y=I(this.y),this},distanceTo:function(e){var t=(e=O(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=O(e)).x===this.x&&e.y===this.y},contains:function(e){return e=O(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+d(this.x)+", "+d(this.y)+")"}},R.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof P||"number"===typeof e[0]||"x"in e)t=n=O(e);else if(t=(e=M(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return O(this.min.x,this.max.y)},getTopRight:function(){return O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof P?O(e):M(e))instanceof R?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=M(e);var t=this.min,n=this.max,r=e.min,a=e.max,i=a.x>=t.x&&r.x<=n.x,o=a.y>=t.y&&r.y<=n.y;return i&&o},overlaps:function(e){e=M(e);var t=this.min,n=this.max,r=e.min,a=e.max,i=a.x>t.x&&r.x<n.x,o=a.y>t.y&&r.y<n.y;return i&&o},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,r=Math.abs(t.x-n.x)*e,a=Math.abs(t.y-n.y)*e;return M(O(t.x-r,t.y-a),O(n.x+r,n.y+a))},equals:function(e){return!!e&&(e=M(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},D.prototype={extend:function(e){var t,n,r=this._southWest,a=this._northEast;if(e instanceof H)t=e,n=e;else{if(!(e instanceof D))return e?this.extend(z(e)||W(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return r||a?(r.lat=Math.min(t.lat,r.lat),r.lng=Math.min(t.lng,r.lng),a.lat=Math.max(n.lat,a.lat),a.lng=Math.max(n.lng,a.lng)):(this._southWest=new H(t.lat,t.lng),this._northEast=new H(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=Math.abs(t.lat-n.lat)*e,a=Math.abs(t.lng-n.lng)*e;return new D(new H(t.lat-r,t.lng-a),new H(n.lat+r,n.lng+a))},getCenter:function(){return new H((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new H(this.getNorth(),this.getWest())},getSouthEast:function(){return new H(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof H||"lat"in e?z(e):W(e);var t,n,r=this._southWest,a=this._northEast;return e instanceof D?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=r.lat&&n.lat<=a.lat&&t.lng>=r.lng&&n.lng<=a.lng},intersects:function(e){e=W(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),a=e.getNorthEast(),i=a.lat>=t.lat&&r.lat<=n.lat,o=a.lng>=t.lng&&r.lng<=n.lng;return i&&o},overlaps:function(e){e=W(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),a=e.getNorthEast(),i=a.lat>t.lat&&r.lat<n.lat,o=a.lng>t.lng&&r.lng<n.lng;return i&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=W(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},H.prototype={equals:function(e,t){return!!e&&(e=z(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+d(this.lat,e)+", "+d(this.lng,e)+")"},distanceTo:function(e){return q.distance(this,z(e))},wrap:function(){return q.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return W([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new H(this.lat,this.lng,this.alt)}};var F={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new R(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new H(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),r=t.lat-n.lat,a=t.lng-n.lng;if(0===r&&0===a)return e;var i=e.getSouthWest(),o=e.getNorthEast();return new D(new H(i.lat-r,i.lng-a),new H(o.lat-r,o.lng-a))}},q=n({},F,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,r=e.lat*n,a=t.lat*n,i=Math.sin((t.lat-e.lat)*n/2),o=Math.sin((t.lng-e.lng)*n/2),s=i*i+Math.cos(r)*Math.cos(a)*o*o,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),U=6378137,G={R:U,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),a=Math.sin(r*t);return new P(this.R*e.lng*t,this.R*Math.log((1+a)/(1-a))/2)},unproject:function(e){var t=180/Math.PI;return new H((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=U*Math.PI;return new R([-e,-e],[e,e])}()};function K(e,t,n,r){if(y(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=r}function Y(e,t,n,r){return new K(e,t,n,r)}K.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new P((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var V=n({},q,{code:"EPSG:3857",projection:G,transformation:function(){var e=.5/(Math.PI*G.R);return Y(e,.5,-e,.5)}()}),Z=n({},V,{code:"EPSG:900913"});function J(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Q(e,t){var n,r,a,i,o,s,l="";for(n=0,a=e.length;n<a;n++){for(r=0,i=(o=e[n]).length;r<i;r++)l+=(r?"L":"M")+(s=o[r]).x+" "+s.y;l+=t?Re.svg?"z":"x":""}return l||"M0 0"}var $=document.documentElement.style,X="ActiveXObject"in window,ee=X&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=Le("webkit"),re=Le("android"),ae=Le("android 2")||Le("android 3"),ie=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),oe=re&&Le("Google")&&ie<537&&!("AudioNode"in window),se=!!window.opera,le=!te&&Le("chrome"),ce=Le("gecko")&&!ne&&!se&&!X,de=!le&&Le("safari"),he=Le("phantom"),ue="OTransition"in $,pe=0===navigator.platform.indexOf("Win"),me=X&&"transition"in $,fe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ae,ge="MozPerspective"in $,ye=!window.L_DISABLE_3D&&(me||fe||ge)&&!ue&&!he,we="undefined"!==typeof orientation||Le("mobile"),ve=we&&ne,be=we&&fe,xe=!window.PointerEvent&&window.MSPointerEvent,ke=!(!window.PointerEvent&&!xe),_e="ontouchstart"in window||!!window.TouchEvent,Te=!window.L_NO_TOUCH&&(_e||ke),Se=we&&se,Ne=we&&ce,Ce=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ae=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(n){}return e}(),je=!!document.createElement("canvas").getContext,Ee=!(!document.createElementNS||!J("svg").createSVGRect),Be=!!Ee&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),Pe=!Ee&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),Ie=0===navigator.platform.indexOf("Mac"),Oe=0===navigator.platform.indexOf("Linux");function Le(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Re={ie:X,ielt9:ee,edge:te,webkit:ne,android:re,android23:ae,androidStock:oe,opera:se,chrome:le,gecko:ce,safari:de,phantom:he,opera12:ue,win:pe,ie3d:me,webkit3d:fe,gecko3d:ge,any3d:ye,mobile:we,mobileWebkit:ve,mobileWebkit3d:be,msPointer:xe,pointer:ke,touch:Te,touchNative:_e,mobileOpera:Se,mobileGecko:Ne,retina:Ce,passiveEvents:Ae,canvas:je,svg:Ee,vml:Pe,inlineSvg:Be,mac:Ie,linux:Oe},Me=Re.msPointer?"MSPointerDown":"pointerdown",De=Re.msPointer?"MSPointerMove":"pointermove",We=Re.msPointer?"MSPointerUp":"pointerup",He=Re.msPointer?"MSPointerCancel":"pointercancel",ze={touchstart:Me,touchmove:De,touchend:We,touchcancel:He},Fe={touchstart:$e,touchmove:Qe,touchend:Qe,touchcancel:Qe},qe={},Ue=!1;function Ge(e,t,n){return"touchstart"===t&&Je(),Fe[t]?(n=Fe[t].bind(this,n),e.addEventListener(ze[t],n,!1),n):(console.warn("wrong event specified:",t),c)}function Ke(e,t,n){ze[t]?e.removeEventListener(ze[t],n,!1):console.warn("wrong event specified:",t)}function Ye(e){qe[e.pointerId]=e}function Ve(e){qe[e.pointerId]&&(qe[e.pointerId]=e)}function Ze(e){delete qe[e.pointerId]}function Je(){Ue||(document.addEventListener(Me,Ye,!0),document.addEventListener(De,Ve,!0),document.addEventListener(We,Ze,!0),document.addEventListener(He,Ze,!0),Ue=!0)}function Qe(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],qe)t.touches.push(qe[n]);t.changedTouches=[t],e(t)}}function $e(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Yt(t),Qe(e,t)}function Xe(e){var t,n,r={};for(n in e)t=e[n],r[n]=t&&t.bind?t.bind(e):t;return e=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,r=0;function a(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var a=Zt(e);if(!a.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})||a.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})){var i=Date.now();i-r<=et?2===++n&&t(Xe(e)):n=1,r=i}}}else n=e.detail}return e.addEventListener("click",a),{dblclick:t,simDblclick:a}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var rt,at,it,ot,st,lt=St(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ct=St(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),dt="webkitTransition"===ct||"OTransition"===ct?ct+"End":"transitionend";function ht(e){return"string"===typeof e?document.getElementById(e):e}function ut(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return"auto"===n?null:n}function pt(e,t,n){var r=document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}function mt(e){var t=e.parentNode;t&&t.removeChild(e)}function ft(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function gt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function yt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function wt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=kt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function vt(e,t){if(void 0!==e.classList)for(var n=u(t),r=0,a=n.length;r<a;r++)e.classList.add(n[r]);else if(!wt(e,t)){var i=kt(e);xt(e,(i?i+" ":"")+t)}}function bt(e,t){void 0!==e.classList?e.classList.remove(t):xt(e,h((" "+kt(e)+" ").replace(" "+t+" "," ")))}function xt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function kt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function _t(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&Tt(e,t)}function Tt(e,t){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(a){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}function St(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Nt(e,t,n){var r=t||new P(0,0);e.style[lt]=(Re.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function Ct(e,t){e._leaflet_pos=t,Re.any3d?Nt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function At(e){return e._leaflet_pos||new P(0,0)}if("onselectstart"in document)rt=function(){Mt(window,"selectstart",Yt)},at=function(){Wt(window,"selectstart",Yt)};else{var jt=St(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rt=function(){if(jt){var e=document.documentElement.style;it=e[jt],e[jt]="none"}},at=function(){jt&&(document.documentElement.style[jt]=it,it=void 0)}}function Et(){Mt(window,"dragstart",Yt)}function Bt(){Wt(window,"dragstart",Yt)}function Pt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(It(),ot=e,st=e.style.outlineStyle,e.style.outlineStyle="none",Mt(window,"keydown",It))}function It(){ot&&(ot.style.outlineStyle=st,ot=void 0,st=void 0,Wt(window,"keydown",It))}function Ot(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Lt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Rt={__proto__:null,TRANSFORM:lt,TRANSITION:ct,TRANSITION_END:dt,get:ht,getStyle:ut,create:pt,remove:mt,empty:ft,toFront:gt,toBack:yt,hasClass:wt,addClass:vt,removeClass:bt,setClass:xt,getClass:kt,setOpacity:_t,testProp:St,setTransform:Nt,setPosition:Ct,getPosition:At,get disableTextSelection(){return rt},get enableTextSelection(){return at},disableImageDrag:Et,enableImageDrag:Bt,preventOutline:Pt,restoreOutline:It,getSizedParentNode:Ot,getScale:Lt};function Mt(e,t,n,r){if(t&&"object"===typeof t)for(var a in t)Ft(e,a,t[a],n);else for(var i=0,o=(t=u(t)).length;i<o;i++)Ft(e,t[i],n,r);return this}var Dt="_leaflet_events";function Wt(e,t,n,r){if(1===arguments.length)Ht(e),delete e[Dt];else if(t&&"object"===typeof t)for(var a in t)qt(e,a,t[a],n);else if(t=u(t),2===arguments.length)Ht(e,function(e){return-1!==w(t,e)});else for(var i=0,o=t.length;i<o;i++)qt(e,t[i],n,r);return this}function Ht(e,t){for(var n in e[Dt]){var r=n.split(/\d/)[0];t&&!t(r)||qt(e,r,null,null,n)}}var zt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ft(e,t,n,r){var a=t+o(n)+(r?"_"+o(r):"");if(e[Dt]&&e[Dt][a])return this;var i=function(t){return n.call(r||e,t||window.event)},s=i;!Re.touchNative&&Re.pointer&&0===t.indexOf("touch")?i=Ge(e,t,i):Re.touch&&"dblclick"===t?i=tt(e,i):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(zt[t]||t,i,!!Re.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(i=function(t){t=t||window.event,Xt(e,t)&&s(t)},e.addEventListener(zt[t],i,!1)):e.addEventListener(t,s,!1):e.attachEvent("on"+t,i),e[Dt]=e[Dt]||{},e[Dt][a]=i}function qt(e,t,n,r,a){a=a||t+o(n)+(r?"_"+o(r):"");var i=e[Dt]&&e[Dt][a];if(!i)return this;!Re.touchNative&&Re.pointer&&0===t.indexOf("touch")?Ke(e,t,i):Re.touch&&"dblclick"===t?nt(e,i):"removeEventListener"in e?e.removeEventListener(zt[t]||t,i,!1):e.detachEvent("on"+t,i),e[Dt][a]=null}function Ut(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Gt(e){return Ft(e,"wheel",Ut),this}function Kt(e){return Mt(e,"mousedown touchstart dblclick contextmenu",Ut),e._leaflet_disable_click=!0,this}function Yt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Vt(e){return Yt(e),Ut(e),this}function Zt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Jt(e,t){if(!t)return new P(e.clientX,e.clientY);var n=Lt(t),r=n.boundingClientRect;return new P((e.clientX-r.left)/n.x-t.clientLeft,(e.clientY-r.top)/n.y-t.clientTop)}var Qt=Re.linux&&Re.chrome?window.devicePixelRatio:Re.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function $t(e){return Re.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Qt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function Xt(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(r){return!1}return n!==e}var en={__proto__:null,on:Mt,off:Wt,stopPropagation:Ut,disableScrollPropagation:Gt,disableClickPropagation:Kt,preventDefault:Yt,stop:Vt,getPropagationPath:Zt,getMousePosition:Jt,getWheelDelta:$t,isExternalTarget:Xt,addListener:Mt,removeListener:Wt},tn=B.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=At(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),Ct(this._el,n),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=B.extend({options:{crs:V,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(z(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ct&&Re.any3d&&!Re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Mt(this._proxy,dt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,r){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(z(e),t,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,r.zoom):this._tryAnimatedPan(e,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,r.pan&&r.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),a=this.getSize().divideBy(2),i=(e instanceof P?e:this.latLngToContainerPoint(e)).subtract(a).multiplyBy(1-1/r),o=this.containerPointToLatLng(a.add(i));return this.setView(o,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():W(e);var n=O(t.paddingTopLeft||t.padding||[0,0]),r=O(t.paddingBottomRight||t.padding||[0,0]),a=this.getBoundsZoom(e,!1,n.add(r));if((a="number"===typeof t.maxZoom?Math.min(t.maxZoom,a):a)===1/0)return{center:e.getCenter(),zoom:a};var i=r.subtract(n).divideBy(2),o=this.project(e.getSouthWest(),a),s=this.project(e.getNorthEast(),a);return{center:this.unproject(o.add(s).divideBy(2).add(i),a),zoom:a}},fitBounds:function(e,t){if(!(e=W(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=O(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){vt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!Re.any3d)return this.setView(e,t,n);this._stop();var r=this.project(this.getCenter()),a=this.project(e),i=this.getSize(),o=this._zoom;e=z(e),t=void 0===t?o:t;var s=Math.max(i.x,i.y),l=s*this.getZoomScale(o,t),c=a.distanceTo(r)||1,d=1.42,h=d*d;function u(e){var t=(l*l-s*s+(e?-1:1)*h*h*c*c)/(2*(e?l:s)*h*c),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function m(e){return(Math.exp(e)+Math.exp(-e))/2}function f(e){return p(e)/m(e)}var g=u(0);function y(e){return s*(m(g)/m(g+d*e))}function w(e){return s*(m(g)*f(g+d*e)-p(g))/h}function v(e){return 1-Math.pow(1-e,1.5)}var b=Date.now(),x=(u(1)-g)/d,k=n.duration?1e3*n.duration:1e3*x*.8;function _(){var n=(Date.now()-b)/k,i=v(n)*x;n<=1?(this._flyToFrame=S(_,this),this._move(this.unproject(r.add(a.subtract(r).multiplyBy(w(i)/c)),o),this.getScaleZoom(s/y(i),o),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),_.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=W(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,W(e));return n.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=O((t=t||{}).paddingTopLeft||t.padding||[0,0]),r=O(t.paddingBottomRight||t.padding||[0,0]),a=this.project(this.getCenter()),i=this.project(e),o=this.getPixelBounds(),s=M([o.min.add(n),o.max.subtract(r)]),l=s.getSize();if(!s.contains(i)){this._enforcingBounds=!0;var c=i.subtract(s.getCenter()),d=s.extend(i).getSize().subtract(l);a.x+=c.x<0?-d.x:d.x,a.y+=c.y<0?-d.y:d.y,this.panTo(this.unproject(a),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),i=t.divideBy(2).round(),o=r.divideBy(2).round(),s=i.subtract(o);return s.x||s.y?(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=a(this._handleGeolocationResponse,this),r=a(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,r,e):navigator.geolocation.getCurrentPosition(t,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new H(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),r=this._locateOptions;if(r.setView){var a=this.getBoundsZoom(n);this.setView(t,r.maxZoom?Math.min(a,r.maxZoom):a)}var i={latlng:t,bounds:n,timestamp:e.timestamp};for(var o in e.coords)"number"===typeof e.coords[o]&&(i[o]=e.coords[o]);this.fire("locationfound",i)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),mt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)mt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=pt("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new D(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=W(e),n=O(n||[0,0]);var r=this.getZoom()||0,a=this.getMinZoom(),i=this.getMaxZoom(),o=e.getNorthWest(),s=e.getSouthEast(),l=this.getSize().subtract(n),c=M(this.project(s,r),this.project(o,r)).getSize(),d=Re.any3d?this.options.zoomSnap:1,h=l.x/c.x,u=l.y/c.y,p=t?Math.max(h,u):Math.min(h,u);return r=this.getScaleZoom(p,r),d&&(r=Math.round(r/(d/100))*(d/100),r=t?Math.ceil(r/d)*d:Math.floor(r/d)*d),Math.max(a,Math.min(i,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new R(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var r=n.zoom(e*n.scale(t));return isNaN(r)?1/0:r},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(z(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(O(e),t)},layerPointToLatLng:function(e){var t=O(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(z(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(z(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(W(e))},distance:function(e,t){return this.options.crs.distance(z(e),z(t))},containerPointToLayerPoint:function(e){return O(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return O(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(O(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(e)))},mouseEventToContainerPoint:function(e){return Jt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=ht(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Mt(t,"scroll",this._onScroll,this),this._containerId=o(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Re.any3d,vt(e,"leaflet-container"+(Re.touch?" leaflet-touch":"")+(Re.retina?" leaflet-retina":"")+(Re.ielt9?" leaflet-oldie":"")+(Re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=ut(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ct(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(vt(e.markerPane,"leaflet-zoom-hide"),vt(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){Ct(this._mapPane,new P(0,0));var r=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var a=this._zoom!==t;this._moveStart(a,n)._move(e,t)._moveEnd(a),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,r){void 0===t&&(t=this._zoom);var a=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),r?n&&n.pinch&&this.fire("zoom",n):((a||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Ct(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[o(this._container)]=this;var t=e?Wt:Mt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Re.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=S(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,r=[],a="mouseout"===t||"mouseover"===t,i=e.target||e.srcElement,s=!1;i;){if((n=this._targets[o(i)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(t,!0)){if(a&&!Xt(i,e))break;if(r.push(n),a)break}if(i===this._container)break;i=i.parentNode}return r.length||s||a||!this.listens(t,!0)||(r=[this]),r},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Pt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,r){if("click"===e.type){var a=n({},e);a.type="preclick",this._fireDOMEvent(a,a.type,r)}var i=this._findEventTargets(e,t);if(r){for(var o=[],s=0;s<r.length;s++)r[s].listens(t,!0)&&o.push(r[s]);i=o.concat(i)}if(i.length){"contextmenu"===t&&Yt(e);var l=i[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var d=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=d?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=d?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(s=0;s<i.length;s++)if(i[s].fire(t,c,!0),c.originalEvent._stopped||!1===i[s].options.bubblingMouseEvents&&-1!==w(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return At(this._mapPane)||new P(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return M([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),a=this.getSize().divideBy(2),i=new R(r.subtract(a),r.add(a)),o=this._getBoundsOffset(i,n,t);return Math.abs(o.x)<=1&&Math.abs(o.y)<=1?e:this.unproject(r.add(o),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new R(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=M(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),a=r.min.subtract(e.min),i=r.max.subtract(e.max);return new P(this._rebound(a.x,-i.x),this._rebound(a.y,-i.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),r=Re.any3d?this.options.zoomSnap:1;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){bt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=lt,n=this._proxy.style[t];Nt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){mt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Nt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),a=this._getCenterOffset(e)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(a))&&(S(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,vt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&bt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rn(e,t){return new nn(e,t)}var an=A.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return vt(t,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(t,r.firstChild):r.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(mt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),on=function(e){return new an(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=pt("div",t+"control-container",this._container);function r(r,a){var i=t+r+" "+t+a;e[r+a]=pt("div",i,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)mt(this._controlCorners[e]);mt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sn=an.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,r){return n<r?-1:r<n?1:0}},initialize:function(e,t,n){for(var r in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return an.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(o(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){vt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(vt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):bt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return bt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=pt("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Kt(t),Gt(t);var r=this._section=pt("section",e+"-list");n&&(this._map.on("click",this.collapse,this),Mt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var a=this._layersLink=pt("a",e+"-toggle",t);a.href="#",a.title="Layers",a.setAttribute("role","button"),Mt(a,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){Yt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=pt("div",e+"-base",r),this._separator=pt("div",e+"-separator",r),this._overlaysList=pt("div",e+"-overlays",r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&o(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(a(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ft(this._baseLayersList),ft(this._overlaysList),this._layerControlInputs=[];var e,t,n,r,a=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),t=t||r.overlay,e=e||!r.overlay,a+=r.overlay?0:1;return this.options.hideSingleBase&&(e=e&&a>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(o(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(e){var t,n=document.createElement("label"),r=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=r):t=this._createRadioElement("leaflet-base-layers_"+o(this),r),this._layerControlInputs.push(t),t.layerId=o(e.layer),Mt(t,"click",this._onInputClick,this);var a=document.createElement("span");a.innerHTML=" "+e.name;var i=document.createElement("span");return n.appendChild(i),i.appendChild(t),i.appendChild(a),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,r=[],a=[];this._handlingClick=!0;for(var i=n.length-1;i>=0;i--)e=n[i],t=this._getLayer(e.layerId).layer,e.checked?r.push(t):e.checked||a.push(t);for(i=0;i<a.length;i++)this._map.hasLayer(a[i])&&this._map.removeLayer(a[i]);for(i=0;i<r.length;i++)this._map.hasLayer(r[i])||this._map.addLayer(r[i]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,r=this._map.getZoom(),a=n.length-1;a>=0;a--)e=n[a],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&r<t.options.minZoom||void 0!==t.options.maxZoom&&r>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Mt(e,"click",Yt),this.expand();var t=this;setTimeout(function(){Wt(e,"click",Yt),t._preventClick=!1})}}),ln=function(e,t,n){return new sn(e,t,n)},cn=an.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=pt("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,r,a){var i=pt("a",n,r);return i.innerHTML=e,i.href="#",i.title=t,i.setAttribute("role","button"),i.setAttribute("aria-label",t),Kt(i),Mt(i,"click",Vt),Mt(i,"click",a,this),Mt(i,"click",this._refocusOnMap,this),i},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";bt(this._zoomInButton,t),bt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(vt(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(vt(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))});var dn=function(e){return new cn(e)},hn=an.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=pt("div",t),r=this.options;return this._addScales(r,t+"-line",n),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=pt("div",t,n)),e.imperial&&(this._iScale=pt("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,r,a=3.2808399*e;a>5280?(t=a/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(r=this._getRoundNum(a),this._updateScale(this._iScale,r+" ft",r/a))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),un=function(e){return new hn(e)},pn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',mn=an.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Re.inlineSvg?pn+" ":"")+"Leaflet</a>"},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),Kt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&(new mn).addTo(this)});var fn=function(e){return new mn(e)};an.Layers=sn,an.Zoom=cn,an.Scale=hn,an.Attribution=mn,on.layers=ln,on.zoom=dn,on.scale=un,on.attribution=fn;var gn=A.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,t){return e.addHandler(t,this),this};var yn={Events:E},wn=Re.touch?"touchstart mousedown":"mousedown",vn=B.extend({options:{clickTolerance:3},initialize:function(e,t,n,r){p(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Mt(this._dragStartTarget,wn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(vn._dragging===this&&this.finishDrag(!0),Wt(this._dragStartTarget,wn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!wt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)vn._dragging===this&&this.finishDrag();else if(!(vn._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(vn._dragging=this,this._preventOutline&&Pt(this._element),Et(),rt(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=Ot(this._element);this._startPoint=new P(t.clientX,t.clientY),this._startPos=At(this._element),this._parentScale=Lt(n);var r="mousedown"===e.type;Mt(document,r?"mousemove":"touchmove",this._onMove,this),Mt(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new P(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Yt(e),this._moved||(this.fire("dragstart"),this._moved=!0,vt(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),vt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Ct(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){bt(document.body,"leaflet-dragging"),this._lastTarget&&(bt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Wt(document,"mousemove touchmove",this._onMove,this),Wt(document,"mouseup touchend touchcancel",this._onUp,this),Bt(),at();var t=this._moved&&this._moving;this._moving=!1,vn._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function bn(e,t,n){var r,a,i,o,s,l,c,d,h,u=[1,4,2,8];for(a=0,c=e.length;a<c;a++)e[a]._code=In(e[a],t);for(o=0;o<4;o++){for(d=u[o],r=[],a=0,i=(c=e.length)-1;a<c;i=a++)s=e[a],l=e[i],s._code&d?l._code&d||((h=Pn(l,s,d,t,n))._code=In(h,t),r.push(h)):(l._code&d&&((h=Pn(l,s,d,t,n))._code=In(h,t),r.push(h)),r.push(s));e=r}return e}function xn(e,t){var n,r,a,i,o,s,l,c,d;if(!e||0===e.length)throw new Error("latlngs not passed");Rn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var h=z([0,0]),u=W(e);u.getNorthWest().distanceTo(u.getSouthWest())*u.getNorthEast().distanceTo(u.getNorthWest())<1700&&(h=kn(e));var p=e.length,m=[];for(n=0;n<p;n++){var f=z(e[n]);m.push(t.project(z([f.lat-h.lat,f.lng-h.lng])))}for(s=l=c=0,n=0,r=p-1;n<p;r=n++)a=m[n],i=m[r],o=a.y*i.x-i.y*a.x,l+=(a.x+i.x)*o,c+=(a.y+i.y)*o,s+=3*o;d=0===s?m[0]:[l/s,c/s];var g=t.unproject(O(d));return z([g.lat+h.lat,g.lng+h.lng])}function kn(e){for(var t=0,n=0,r=0,a=0;a<e.length;a++){var i=z(e[a]);t+=i.lat,n+=i.lng,r++}return z([t/r,n/r])}var _n,Tn={__proto__:null,clipPolygon:bn,polygonCenter:xn,centroid:kn};function Sn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=An(e=En(e,n),n)}function Nn(e,t,n){return Math.sqrt(Ln(e,t,n,!0))}function Cn(e,t,n){return Ln(e,t,n)}function An(e,t){var n=e.length,r=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,jn(e,r,t,0,n-1);var a,i=[];for(a=0;a<n;a++)r[a]&&i.push(e[a]);return i}function jn(e,t,n,r,a){var i,o,s,l=0;for(o=r+1;o<=a-1;o++)(s=Ln(e[o],e[r],e[a],!0))>l&&(i=o,l=s);l>n&&(t[i]=1,jn(e,t,n,r,i),jn(e,t,n,i,a))}function En(e,t){for(var n=[e[0]],r=1,a=0,i=e.length;r<i;r++)On(e[r],e[a])>t&&(n.push(e[r]),a=r);return a<i-1&&n.push(e[i-1]),n}function Bn(e,t,n,r,a){var i,o,s,l=r?_n:In(e,n),c=In(t,n);for(_n=c;;){if(!(l|c))return[e,t];if(l&c)return!1;s=In(o=Pn(e,t,i=l||c,n,a),n),i===l?(e=o,l=s):(t=o,c=s)}}function Pn(e,t,n,r,a){var i,o,s=t.x-e.x,l=t.y-e.y,c=r.min,d=r.max;return 8&n?(i=e.x+s*(d.y-e.y)/l,o=d.y):4&n?(i=e.x+s*(c.y-e.y)/l,o=c.y):2&n?(i=d.x,o=e.y+l*(d.x-e.x)/s):1&n&&(i=c.x,o=e.y+l*(c.x-e.x)/s),new P(i,o,a)}function In(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function On(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function Ln(e,t,n,r){var a,i=t.x,o=t.y,s=n.x-i,l=n.y-o,c=s*s+l*l;return c>0&&((a=((e.x-i)*s+(e.y-o)*l)/c)>1?(i=n.x,o=n.y):a>0&&(i+=s*a,o+=l*a)),s=e.x-i,l=e.y-o,r?s*s+l*l:new P(i,o)}function Rn(e){return!y(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function Mn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Rn(e)}function Dn(e,t){var n,r,a,i,o,s,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");Rn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var d=z([0,0]),h=W(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(d=kn(e));var u=e.length,p=[];for(n=0;n<u;n++){var m=z(e[n]);p.push(t.project(z([m.lat-d.lat,m.lng-d.lng])))}for(n=0,r=0;n<u-1;n++)r+=p[n].distanceTo(p[n+1])/2;if(0===r)c=p[0];else for(n=0,i=0;n<u-1;n++)if(o=p[n],s=p[n+1],(i+=a=o.distanceTo(s))>r){l=(i-r)/a,c=[s.x-l*(s.x-o.x),s.y-l*(s.y-o.y)];break}var f=t.unproject(O(c));return z([f.lat+d.lat,f.lng+d.lng])}var Wn={__proto__:null,simplify:Sn,pointToSegmentDistance:Nn,closestPointOnSegment:Cn,clipSegment:Bn,_getEdgeIntersection:Pn,_getBitCode:In,_sqClosestPointOnSegment:Ln,isFlat:Rn,_flat:Mn,polylineCenter:Dn},Hn={project:function(e){return new P(e.lng,e.lat)},unproject:function(e){return new H(e.y,e.x)},bounds:new R([-180,-90],[180,90])},zn={R:6378137,R_MINOR:6356752.314245179,bounds:new R([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,r=e.lat*t,a=this.R_MINOR/n,i=Math.sqrt(1-a*a),o=i*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-o)/(1+o),i/2);return r=-n*Math.log(Math.max(s,1e-10)),new P(e.lng*t*n,r)},unproject:function(e){for(var t,n=180/Math.PI,r=this.R,a=this.R_MINOR/r,i=Math.sqrt(1-a*a),o=Math.exp(-e.y/r),s=Math.PI/2-2*Math.atan(o),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=i*Math.sin(s),t=Math.pow((1-t)/(1+t),i/2),s+=c=Math.PI/2-2*Math.atan(o*t)-s;return new H(s*n,e.x*n/r)}},Fn={__proto__:null,LonLat:Hn,Mercator:zn,SphericalMercator:G},qn=n({},q,{code:"EPSG:3395",projection:zn,transformation:function(){var e=.5/(Math.PI*zn.R);return Y(e,.5,-e,.5)}()}),Un=n({},q,{code:"EPSG:4326",projection:Hn,transformation:Y(1/180,1,-1/180,.5)}),Gn=n({},F,{projection:Hn,transformation:Y(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!0});F.Earth=q,F.EPSG3395=qn,F.EPSG3857=V,F.EPSG900913=Z,F.EPSG4326=Un,F.Simple=Gn;var Kn=B.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[o(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[o(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=o(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=o(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return o(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?y(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[o(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=o(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var a=this._zoomBoundLayers[r].options;e=void 0===a.minZoom?e:Math.min(e,a.minZoom),t=void 0===a.maxZoom?t:Math.max(t,a.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Yn=Kn.extend({initialize:function(e,t){var n,r;if(p(this,t),this._layers={},e)for(n=0,r=e.length;n<r;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,r=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,r);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return o(e)}}),Vn=function(e,t){return new Yn(e,t)},Zn=Yn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Yn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Yn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new D;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Jn=function(e,t){return new Zn(e,t)},Qn=A.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(r,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(r.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),r},_setIconStyles:function(e,t){var n=this.options,r=n[t+"Size"];"number"===typeof r&&(r=[r,r]);var a=O(r),i=O("shadow"===t&&n.shadowAnchor||n.iconAnchor||a&&a.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),i&&(e.style.marginLeft=-i.x+"px",e.style.marginTop=-i.y+"px"),a&&(e.style.width=a.x+"px",e.style.height=a.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Re.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function $n(e){return new Qn(e)}var Xn=Qn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof Xn.imagePath&&(Xn.imagePath=this._detectIconPath()),(this.options.imagePath||Xn.imagePath)+Qn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var r=t.exec(e);return r&&r[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=pt("div","leaflet-default-icon-path",document.body),t=ut(e,"background-image")||ut(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),er=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new vn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),vt(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&bt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,r=this._marker.options.autoPanSpeed,a=this._marker.options.autoPanPadding,i=At(t._icon),o=n.getPixelBounds(),s=n.getPixelOrigin(),l=M(o.min._subtract(s).add(a),o.max._subtract(s).subtract(a));if(!l.contains(i)){var c=O((Math.max(l.max.x,i.x)-l.max.x)/(o.max.x-l.max.x)-(Math.min(l.min.x,i.x)-l.min.x)/(o.min.x-l.min.x),(Math.max(l.max.y,i.y)-l.max.y)/(o.max.y-l.max.y)-(Math.min(l.min.y,i.y)-l.min.y)/(o.min.y-l.min.y)).multiplyBy(r);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Ct(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=S(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=S(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,r=At(t._icon),a=t._map.layerPointToLatLng(r);n&&Ct(n,r),t._latlng=a,e.latlng=a,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),tr=Kn.extend({options:{icon:new Xn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=z(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=z(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),vt(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mt(n,"focus",this._panOnFocus,this);var a=e.icon.createShadow(this._shadow),i=!1;a!==this._shadow&&(this._removeShadow(),i=!0),a&&(vt(a,t),a.alt=""),this._shadow=a,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),a&&i&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Wt(this._icon,"focus",this._panOnFocus,this),mt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&mt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Ct(this._icon,e),this._shadow&&Ct(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(vt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),er)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new er(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&_t(this._icon,e),this._shadow&&_t(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?O(t.iconSize):O(0,0),r=t.iconAnchor?O(t.iconAnchor):O(0,0);e.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nr(e,t){return new tr(e,t)}var rr=Kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ar=rr.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=z(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=z(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return rr.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new R(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ir(e,t){return new ar(e,t)}var or=ar.extend({initialize:function(e,t,r){if("number"===typeof t&&(t=n({},r,{radius:t})),p(this,t),this._latlng=z(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new D(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:rr.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===q.distance){var a=Math.PI/180,i=this._mRadius/q.R/a,o=n.project([t+i,e]),s=n.project([t-i,e]),l=o.add(s).divideBy(2),c=n.unproject(l).lat,d=Math.acos((Math.cos(i*a)-Math.sin(t*a)*Math.sin(c*a))/(Math.cos(t*a)*Math.cos(c*a)))/a;(isNaN(d)||0===d)&&(d=i/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(d)?0:l.x-n.project([c,e-d]).x,this._radiusY=l.y-o.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});function sr(e,t,n){return new or(e,t,n)}var lr=rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,r=1/0,a=null,i=Ln,o=0,s=this._parts.length;o<s;o++)for(var l=this._parts[o],c=1,d=l.length;c<d;c++){var h=i(e,t=l[c-1],n=l[c],!0);h<r&&(r=h,a=i(e,t,n))}return a&&(a.distance=Math.sqrt(r)),a},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=z(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new D,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Rn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=Rn(e),r=0,a=e.length;r<a;r++)n?(t[r]=z(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new P(e,e);this._rawPxBounds&&(this._pxBounds=new R([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var r,a,i=e[0]instanceof H,o=e.length;if(i){for(a=[],r=0;r<o;r++)a[r]=this._map.latLngToLayerPoint(e[r]),n.extend(a[r]);t.push(a)}else for(r=0;r<o;r++)this._projectLatlngs(e[r],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,r,a,i,o,s,l=this._parts;for(t=0,r=0,a=this._rings.length;t<a;t++)for(n=0,i=(s=this._rings[t]).length;n<i-1;n++)(o=Bn(s[n],s[n+1],e,n,!0))&&(l[r]=l[r]||[],l[r].push(o[0]),o[1]===s[n+1]&&n!==i-2||(l[r].push(o[1]),r++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,r=e.length;n<r;n++)e[n]=Sn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,r,a,i,o,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,i=this._parts.length;n<i;n++)for(r=0,a=(o=(s=this._parts[n]).length)-1;r<o;a=r++)if((t||0!==r)&&Nn(e,s[a],s[r])<=l)return!0;return!1}});function cr(e,t){return new lr(e,t)}lr._flat=Mn;var dr=lr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=lr.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof H&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){lr.prototype._setLatLngs.call(this,e),Rn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Rn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new P(t,t);if(e=new R(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var r,a=0,i=this._rings.length;a<i;a++)(r=bn(this._rings[a],e,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,r,a,i,o,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(a=0,s=this._parts.length;a<s;a++)for(i=0,o=(l=(t=this._parts[a]).length)-1;i<l;o=i++)n=t[i],r=t[o],n.y>e.y!==r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(c=!c);return c||lr.prototype._containsPoint.call(this,e,!0)}});function hr(e,t){return new dr(e,t)}var ur=Zn.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,r,a=y(e)?e:e.features;if(a){for(t=0,n=a.length;t<n;t++)((r=a[t]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var i=this.options;if(i.filter&&!i.filter(e))return this;var o=pr(e,i);return o?(o.feature=br(e),o.defaultOptions=o.options,this.resetStyle(o),i.onEachFeature&&i.onEachFeature(e,o),this.addLayer(o)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function pr(e,t){var n,r,a,i,o="Feature"===e.type?e.geometry:e,s=o?o.coordinates:null,l=[],c=t&&t.pointToLayer,d=t&&t.coordsToLatLng||fr;if(!s&&!o)return null;switch(o.type){case"Point":return mr(c,e,n=d(s),t);case"MultiPoint":for(a=0,i=s.length;a<i;a++)n=d(s[a]),l.push(mr(c,e,n,t));return new Zn(l);case"LineString":case"MultiLineString":return r=gr(s,"LineString"===o.type?0:1,d),new lr(r,t);case"Polygon":case"MultiPolygon":return r=gr(s,"Polygon"===o.type?1:2,d),new dr(r,t);case"GeometryCollection":for(a=0,i=o.geometries.length;a<i;a++){var h=pr({geometry:o.geometries[a],type:"Feature",properties:e.properties},t);h&&l.push(h)}return new Zn(l);case"FeatureCollection":for(a=0,i=o.features.length;a<i;a++){var u=pr(o.features[a],t);u&&l.push(u)}return new Zn(l);default:throw new Error("Invalid GeoJSON object.")}}function mr(e,t,n,r){return e?e(t,n):new tr(n,r&&r.markersInheritOptions&&r)}function fr(e){return new H(e[1],e[0],e[2])}function gr(e,t,n){for(var r,a=[],i=0,o=e.length;i<o;i++)r=t?gr(e[i],t-1,n):(n||fr)(e[i]),a.push(r);return a}function yr(e,t){return void 0!==(e=z(e)).alt?[d(e.lng,t),d(e.lat,t),d(e.alt,t)]:[d(e.lng,t),d(e.lat,t)]}function wr(e,t,n,r){for(var a=[],i=0,o=e.length;i<o;i++)a.push(t?wr(e[i],Rn(e[i])?0:t-1,n,r):yr(e[i],r));return!t&&n&&a.length>0&&a.push(a[0].slice()),a}function vr(e,t){return e.feature?n({},e.feature,{geometry:t}):br(t)}function br(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var xr={toGeoJSON:function(e){return vr(this,{type:"Point",coordinates:yr(this.getLatLng(),e)})}};function kr(e,t){return new ur(e,t)}tr.include(xr),or.include(xr),ar.include(xr),lr.include({toGeoJSON:function(e){var t=!Rn(this._latlngs);return vr(this,{type:(t?"Multi":"")+"LineString",coordinates:wr(this._latlngs,t?1:0,!1,e)})}}),dr.include({toGeoJSON:function(e){var t=!Rn(this._latlngs),n=t&&!Rn(this._latlngs[0]),r=wr(this._latlngs,n?2:t?1:0,!0,e);return t||(r=[r]),vr(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Yn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),vr(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,r=[];return this.eachLayer(function(t){if(t.toGeoJSON){var a=t.toGeoJSON(e);if(n)r.push(a.geometry);else{var i=br(a);"FeatureCollection"===i.type?r.push.apply(r,i.features):r.push(i)}}}),n?vr(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var _r=kr,Tr=Kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=W(t),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(vt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){mt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&gt(this._image),this},bringToBack:function(){return this._map&&yt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=W(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:pt("img");vt(t,"leaflet-image-layer"),this._zoomAnimated&&vt(t,"leaflet-zoom-animated"),this.options.className&&vt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=a(this.fire,this,"load"),t.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Nt(this._image,n,t)},_reset:function(){var e=this._image,t=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Ct(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){_t(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Sr=function(e,t,n){return new Tr(e,t,n)},Nr=Tr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:pt("video");if(vt(t,"leaflet-image-layer"),this._zoomAnimated&&vt(t,"leaflet-zoom-animated"),this.options.className&&vt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=a(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),r=[],i=0;i<n.length;i++)r.push(n[i].src);this._url=n.length>0?r:[t.src]}else{y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var s=pt("source");s.src=this._url[o],t.appendChild(s)}}}});function Cr(e,t,n){return new Nr(e,t,n)}var Ar=Tr.extend({_initImage:function(){var e=this._image=this._url;vt(e,"leaflet-image-layer"),this._zoomAnimated&&vt(e,"leaflet-zoom-animated"),this.options.className&&vt(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function jr(e,t,n){return new Ar(e,t,n)}var Er=Kn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof H||y(e))?(this._latlng=z(e),p(this,t)):(p(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&_t(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&_t(this._container,1),this.bringToFront(),this.options.interactive&&(vt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(_t(this._container,0),this._removeTimeout=setTimeout(a(mt,void 0,this._container),200)):mt(this._container),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=z(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gt(this._container),this},bringToBack:function(){return this._map&&yt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Zn){t=null;var n=this._source._layers;for(var r in n)if(n[r]._map){t=n[r];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=O(this.options.offset),n=this._getAnchor();this._zoomAnimated?Ct(this._container,e.add(n)):t=t.add(e).add(n);var r=this._containerBottom=-t.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=r+"px",this._container.style.left=a+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,r){var a=t;return a instanceof e||(a=new e(r).setContent(t)),n&&a.setLatLng(n),a}}),Kn.include({_initOverlay:function(e,t,n,r){var a=n;return a instanceof e?(p(a,r),a._source=this):(a=t&&!r?t:new e(r,this)).setContent(n),a}});var Br=Er.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Er.prototype.openOn.call(this,e)},onAdd:function(e){Er.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rr||this._source.on("preclick",Ut))},onRemove:function(e){Er.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rr||this._source.off("preclick",Ut))},getEvents:function(){var e=Er.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=pt("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=pt("div",e+"-content-wrapper",t);if(this._contentNode=pt("div",e+"-content",n),Kt(t),Gt(this._contentNode),Mt(t,"contextmenu",Ut),this._tipContainer=pt("div",e+"-tip-container",t),this._tip=pt("div",e+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=pt("a",e+"-close-button",t);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',Mt(r,"click",function(e){Yt(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,a=this.options.maxHeight,i="leaflet-popup-scrolled";a&&r>a?(t.height=a+"px",vt(e,i)):bt(e,i),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();Ct(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(ut(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,r=this._containerWidth,a=new P(this._containerLeft,-n-this._containerBottom);a._add(At(this._container));var i=e.layerPointToContainerPoint(a),o=O(this.options.autoPanPadding),s=O(this.options.autoPanPaddingTopLeft||o),l=O(this.options.autoPanPaddingBottomRight||o),c=e.getSize(),d=0,h=0;i.x+r+l.x>c.x&&(d=i.x+r-c.x+l.x),i.x-d-s.x<0&&(d=i.x-s.x),i.y+n+l.y>c.y&&(h=i.y+n-c.y+l.y),i.y-h-s.y<0&&(h=i.y-s.y),(d||h)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([d,h]))}},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pr=function(e,t){return new Br(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Br,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Kn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Br,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Zn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Vt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof rr?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Ir=Er.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Er.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Er.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Er.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,r=this._map,a=this._container,i=r.latLngToContainerPoint(r.getCenter()),o=r.layerPointToContainerPoint(e),s=this.options.direction,l=a.offsetWidth,c=a.offsetHeight,d=O(this.options.offset),h=this._getAnchor();"top"===s?(t=l/2,n=c):"bottom"===s?(t=l/2,n=0):"center"===s?(t=l/2,n=c/2):"right"===s?(t=0,n=c/2):"left"===s?(t=l,n=c/2):o.x<i.x?(s="right",t=0,n=c/2):(s="left",t=l+2*(d.x+h.x),n=c/2),e=e.subtract(O(t,n,!0)).add(d).add(h),bt(a,"leaflet-tooltip-right"),bt(a,"leaflet-tooltip-left"),bt(a,"leaflet-tooltip-top"),bt(a,"leaflet-tooltip-bottom"),vt(a,"leaflet-tooltip-"+s),Ct(a,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&_t(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Or=function(e,t){return new Ir(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(Ir,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Kn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ir,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Zn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(Mt(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),Mt(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,r=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var Lr=Qn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ft(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=O(n.bgPos);t.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Rr(e){return new Lr(e)}Qn.Default=Xn;var Mr=Kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),mt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof P?e:new P(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,r=-e(-1/0,1/0),a=0,i=n.length;a<i;a++)t=n[a].style.zIndex,n[a]!==this._container&&t&&(r=e(r,+t));isFinite(r)&&(this.options.zIndex=r+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Re.ielt9){_t(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var r in this._tiles){var a=this._tiles[r];if(a.current&&a.loaded){var i=Math.min(1,(e-a.loaded)/200);_t(a.el,i),i<1?t=!0:(a.active?n=!0:this._onOpaqueTile(a),a.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(N(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(mt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[e],a=this._map;return r||((r=this._levels[e]={}).el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=a.project(a.unproject(a.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,a.getCenter(),a.getZoom()),c(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var r=t.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)mt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,r){var a=Math.floor(e/2),i=Math.floor(t/2),o=n-1,s=new P(+a,+i);s.z=+o;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),o>r&&this._retainParent(a,i,o,r))},_retainChildren:function(e,t,n,r){for(var a=2*e;a<2*e+2;a++)for(var i=2*t;i<2*t+2;i++){var o=new P(a,i);o.z=n+1;var s=this._tileCoordsToKey(o),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(a,i,n+1,r))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,r){var a=Math.round(t);a=void 0!==this.options.maxZoom&&a>this.options.maxZoom||void 0!==this.options.minZoom&&a<this.options.minZoom?void 0:this._clampZoom(a);var i=this.options.updateWhenZooming&&a!==this._tileZoom;r&&!i||(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==a&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var r=this._map.getZoomScale(n,e.zoom),a=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();Re.any3d?Nt(e.el,a,r):Ct(e.el,a)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,a=this._map.getPixelWorldBounds(this._tileZoom);a&&(this._globalTileRange=this._pxBoundsToTileRange(a)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(n,this._tileZoom),a=t.project(e,this._tileZoom).floor(),i=t.getSize().divideBy(2*r);return new R(a.subtract(i),a.add(i))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(e),a=this._pxBoundsToTileRange(r),i=a.getCenter(),o=[],s=this.options.keepBuffer,l=new R(a.getBottomLeft().subtract([s,-s]),a.getTopRight().add([s,-s]));if(!(isFinite(a.min.x)&&isFinite(a.min.y)&&isFinite(a.max.x)&&isFinite(a.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var d=this._tiles[c].coords;d.z===this._tileZoom&&l.contains(new P(d.x,d.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var h=a.min.y;h<=a.max.y;h++)for(var u=a.min.x;u<=a.max.x;u++){var p=new P(u,h);if(p.z=this._tileZoom,this._isValidTile(p)){var m=this._tiles[this._tileCoordsToKey(p)];m?m.current=!0:o.push(p)}}if(o.sort(function(e,t){return e.distanceTo(i)-t.distanceTo(i)}),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var f=document.createDocumentFragment();for(u=0;u<o.length;u++)this._addTile(o[u],f);this._level.el.appendChild(f)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return W(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),r=e.scaleBy(n),a=r.add(n);return[t.unproject(r,e.z),t.unproject(a,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new D(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new P(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(mt(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){vt(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,Re.ielt9&&this.options.opacity<1&&_t(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),r=this._tileCoordsToKey(e),i=this.createTile(this._wrapCoords(e),a(this._tileReady,this,e));this._initTile(i),this.createTile.length<2&&S(a(this._tileReady,this,e,null,i)),Ct(i,n),this._tiles[r]={el:i,coords:e,current:!0},t.appendChild(i),this.fire("tileloadstart",{tile:i,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var r=this._tileCoordsToKey(e);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(_t(n.el,0),N(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(vt(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Re.ielt9||!this._map._fadeAnimated?S(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new P(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new R(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Dr(e){return new Mr(e)}var Wr=Mr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=p(this,t)).detectRetina&&Re.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Mt(n,"load",a(this._tileOnLoad,this,t,n)),Mt(n,"error",a(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Re.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=r),t["-y"]=r}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){Re.ielt9?setTimeout(a(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var r=this.options.errorTileUrl;r&&t.getAttribute("src")!==r&&(t.src=r),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,!t.complete)){t.src=v;var n=this._tiles[e].coords;mt(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",v),Mr.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==v))return Mr.prototype._tileReady.call(this,e,t,n)}});function Hr(e,t){return new Wr(e,t)}var zr=Wr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var r=n({},this.defaultWmsParams);for(var a in t)a in this.options||(r[a]=t[a]);var i=(t=p(this,t)).detectRetina&&Re.retina?2:1,o=this.getTileSize();r.width=o.x*i,r.height=o.y*i,this.wmsParams=r},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,Wr.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,r=M(n.project(t[0]),n.project(t[1])),a=r.min,i=r.max,o=(this._wmsVersion>=1.3&&this._crs===Un?[a.y,a.x,i.y,i.x]:[a.x,a.y,i.x,i.y]).join(","),s=Wr.prototype.getTileUrl.call(this,e);return s+m(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Fr(e,t){return new zr(e,t)}Wr.WMS=zr,Hr.wms=Fr;var qr=Kn.extend({options:{padding:.1},initialize:function(e){p(this,e),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),vt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,t),i=r.multiplyBy(-n).add(a).subtract(this._map._getNewPixelOrigin(e,t));Re.any3d?Nt(this._container,i,n):Ct(this._container,i)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new R(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ur=qr.extend({options:{tolerance:0},getEvents:function(){var e=qr.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Mt(e,"mousemove",this._onMouseMove,this),Mt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Mt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,mt(this._container),Wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){qr.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),r=Re.retina?2:1;Ct(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Re.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){qr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[o(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,r=t.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete e._order,delete this._layers[o(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,r=e.options.dashArray.split(/[, ]+/),a=[];for(n=0;n<r.length;n++){if(t=Number(r[n]),isNaN(t))return;a.push(t)}e.options._dashArray=a}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||S(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)e=r.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,r,a,i,o=e._parts,s=o.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(r=0,a=o[n].length;r<a;r++)i=o[n][r],l[r?"lineTo":"moveTo"](i.x,i.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,r=Math.max(Math.round(e._radius),1),a=(Math.max(Math.round(e._radiusY),1)||r)/r;1!==a&&(n.save(),n.scale(1,a)),n.beginPath(),n.arc(t.x,t.y/a,r,0,2*Math.PI,!1),1!==a&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,r=this._map.mouseEventToLayerPoint(e),a=this._drawFirst;a;a=a.next)(t=a.layer).options.interactive&&t._containsPoint(r)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(bt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,r,i=this._drawFirst;i;i=i.next)(n=i.layer).options.interactive&&n._containsPoint(t)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(e),r&&(vt(this._container,"leaflet-interactive"),this._fireEvent([r],e,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Gr(e){return Re.canvas?new Ur(e):null}var Kr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Yr={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qr.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Kr("shape");vt(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Kr("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;mt(t),e.removeInteractiveTarget(t),delete this._layers[o(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,r=e.options,a=e._container;a.stroked=!!r.stroke,a.filled=!!r.fill,r.stroke?(t||(t=e._stroke=Kr("stroke")),a.appendChild(t),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,r.dashArray?t.dashStyle=y(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(a.removeChild(t),e._stroke=null),r.fill?(n||(n=e._fill=Kr("fill")),a.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(a.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),r=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+r+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){gt(e._container)},_bringToBack:function(e){yt(e._container)}},Vr=Re.vml?Kr:J,Zr=qr.extend({_initContainer:function(){this._container=Vr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){mt(this._container),Wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){qr.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),Ct(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Vr("path");e.options.className&&vt(t,e.options.className),e.options.interactive&&vt(t,"leaflet-interactive"),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){mt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[o(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,Q(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),r="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",a=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(e,a)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){gt(e._path)},_bringToBack:function(e){yt(e._path)}});function Jr(e){return Re.svg||Re.vml?new Zr(e):null}Re.vml&&Zr.include(Yr),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Gr(e)||Jr(e)}});var Qr=dr.extend({initialize:function(e,t){dr.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=W(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function $r(e,t){return new Qr(e,t)}Zr.create=Vr,Zr.pointsToPath=Q,ur.geometryToLayer=pr,ur.coordsToLatLng=fr,ur.coordsToLatLngs=gr,ur.latLngToCoords=yr,ur.latLngsToCoords=wr,ur.getFeature=vr,ur.asFeature=br,nn.mergeOptions({boxZoom:!0});var Xr=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){mt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),rt(),Et(),this._startPoint=this._map.mouseEventToContainerPoint(e),Mt(document,{contextmenu:Vt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),vt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new R(this._point,this._startPoint),n=t.getSize();Ct(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(mt(this._box),bt(this._container,"leaflet-crosshair")),at(),Bt(),Wt(document,{contextmenu:Vt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var t=new D(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",Xr),nn.mergeOptions({doubleClickZoom:!0});var ea=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),r=t.options.zoomDelta,a=e.originalEvent.shiftKey?n-r:n+r;"center"===t.options.doubleClickZoom?t.setZoom(a):t.setZoomAround(e.containerPoint,a)}});nn.addInitHook("addHandler","doubleClickZoom",ea),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ta=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new vn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}vt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){bt(this._map._container,"leaflet-grab"),bt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=W(this._map.options.maxBounds);this._offsetLimit=M(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,a=(r-t+n)%e+t-n,i=(r+t+n)%e-t-n,o=Math.abs(a+n)<Math.abs(i+n)?a:i;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(e){var t=this._map,n=t.options,r=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),r)t.fire("moveend");else{this._prunePositions(+new Date);var a=this._lastPos.subtract(this._positions[0]),i=(this._lastTime-this._times[0])/1e3,o=n.easeLinearity,s=a.multiplyBy(o/i),l=s.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),d=s.multiplyBy(c/l),h=c/(n.inertiaDeceleration*o),u=d.multiplyBy(-h/2).round();u.x||u.y?(u=t._limitOffset(u,t.options.maxBounds),S(function(){t.panBy(u,{duration:h,easeLinearity:o,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",ta),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var na=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Mt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,r=this._panKeys={},a=this.keyCodes;for(t=0,n=a.left.length;t<n;t++)r[a.left[t]]=[-1*e,0];for(t=0,n=a.right.length;t<n;t++)r[a.right[t]]=[e,0];for(t=0,n=a.down.length;t<n;t++)r[a.down[t]]=[0,e];for(t=0,n=a.up.length;t<n;t++)r[a.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,r=this._zoomKeys={},a=this.keyCodes;for(t=0,n=a.zoomIn.length;t<n;t++)r[a.zoomIn[t]]=e;for(t=0,n=a.zoomOut.length;t<n;t++)r[a.zoomOut[t]]=-e},_addHooks:function(){Mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,r=this._map;if(n in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=O(t).multiplyBy(3)),r.options.maxBounds&&(t=r._limitOffset(O(t),r.options.maxBounds)),r.options.worldCopyJump){var a=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(t)));r.panTo(a)}else r.panBy(t)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Vt(e)}}});nn.addInitHook("addHandler","keyboard",na),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ra=gn.extend({addHooks:function(){Mt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=$t(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),r),Vt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),a=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,i=n?Math.ceil(a/n)*n:a,o=e._limitZoom(t+(this._delta>0?i:-i))-t;this._delta=0,this._startTime=null,o&&("center"===e.options.scrollWheelZoom?e.setZoom(t+o):e.setZoomAround(this._lastMousePos,t+o))}});nn.addInitHook("addHandler","scrollWheelZoom",ra);var aa=600;nn.mergeOptions({tapHold:Re.touchNative&&Re.safari&&Re.mobile,tapTolerance:15});var ia=gn.extend({addHooks:function(){Mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new P(t.clientX,t.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Mt(document,"touchend",Yt),Mt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),aa),Mt(document,"touchend touchcancel contextmenu",this._cancel,this),Mt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Wt(document,"touchend",Yt),Wt(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Wt(document,"touchend touchcancel contextmenu",this._cancel,this),Wt(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new P(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",ia),nn.mergeOptions({touchZoom:Re.touch,bounceAtZoomLimits:!0});var oa=gn.extend({addHooks:function(){vt(this._map._container,"leaflet-touch-zoom"),Mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),Wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Mt(document,"touchmove",this._onTouchMove,this),Mt(document,"touchend touchcancel",this._onTouchEnd,this),Yt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),i=n.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(i,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&i<1||this._zoom>t.getMaxZoom()&&i>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===i)return}else{var o=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===i&&0===o.x&&0===o.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var s=a(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=S(s,this,!0),Yt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,N(this._animRequest),Wt(document,"touchmove",this._onTouchMove,this),Wt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",oa),nn.BoxZoom=Xr,nn.DoubleClickZoom=ea,nn.Drag=ta,nn.Keyboard=na,nn.ScrollWheelZoom=ra,nn.TapHold=ia,nn.TouchZoom=oa,e.Bounds=R,e.Browser=Re,e.CRS=F,e.Canvas=Ur,e.Circle=or,e.CircleMarker=ar,e.Class=A,e.Control=an,e.DivIcon=Lr,e.DivOverlay=Er,e.DomEvent=en,e.DomUtil=Rt,e.Draggable=vn,e.Evented=B,e.FeatureGroup=Zn,e.GeoJSON=ur,e.GridLayer=Mr,e.Handler=gn,e.Icon=Qn,e.ImageOverlay=Tr,e.LatLng=H,e.LatLngBounds=D,e.Layer=Kn,e.LayerGroup=Yn,e.LineUtil=Wn,e.Map=nn,e.Marker=tr,e.Mixin=yn,e.Path=rr,e.Point=P,e.PolyUtil=Tn,e.Polygon=dr,e.Polyline=lr,e.Popup=Br,e.PosAnimation=tn,e.Projection=Fn,e.Rectangle=Qr,e.Renderer=qr,e.SVG=Zr,e.SVGOverlay=Ar,e.TileLayer=Wr,e.Tooltip=Ir,e.Transformation=K,e.Util=C,e.VideoOverlay=Nr,e.bind=a,e.bounds=M,e.canvas=Gr,e.circle=sr,e.circleMarker=ir,e.control=on,e.divIcon=Rr,e.extend=n,e.featureGroup=Jn,e.geoJSON=kr,e.geoJson=_r,e.gridLayer=Dr,e.icon=$n,e.imageOverlay=Sr,e.latLng=z,e.latLngBounds=W,e.layerGroup=Vn,e.map=rn,e.marker=nr,e.point=O,e.polygon=hr,e.polyline=cr,e.popup=Pr,e.rectangle=$r,e.setOptions=p,e.stamp=o,e.svg=Jr,e.svgOverlay=jr,e.tileLayer=Hr,e.tooltip=Or,e.transformation=Y,e.version=t,e.videoOverlay=Cr;var sa=window.L;e.noConflict=function(){return window.L=sa,this},window.L=e}(t)},4(e,t,n){"use strict";var r=n(853),a=n(43),i=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(o(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),x=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var j=Symbol.iterator;function E(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var B=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===B?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case v:return"Profiler";case w:return"StrictMode";case _:return"Suspense";case T:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case S:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return P(e(t))}catch(n){}}return null}var I=Array.isArray,O=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},M=[],D=-1;function W(e){return{current:e}}function H(e){0>D||(e.current=M[D],M[D]=null,D--)}function z(e,t){D++,M[D]=e.current,e.current=t}var F,q,U=W(null),G=W(null),K=W(null),Y=W(null);function V(e,t){switch(z(K,t),z(G,e),z(U,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=wh(t=yh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(U),z(U,e)}function Z(){H(U),H(G),H(K)}function J(e){null!==e.memoizedState&&z(Y,e);var t=U.current,n=wh(t,e.type);t!==n&&(z(G,e),z(U,n))}function Q(e){G.current===e&&(H(U),H(G)),Y.current===e&&(H(Y),du._currentValue=R)}function $(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||"",q=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+F+e+q}var X=!1;function ee(e,t){if(!e||X)return"";X=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),o=i[0],s=i[1];if(o&&s){var l=o.split("\n"),c=s.split("\n");for(a=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===l.length||a===c.length)for(r=l.length-1,a=c.length-1;1<=r&&0<=a&&l[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(l[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||l[r]!==c[a]){var d="\n"+l[r].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=r&&0<=a);break}}}finally{X=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?$(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return $(e.type);case 16:return $("Lazy");case 13:return e.child!==t&&null!==t?$("Suspense Fallback"):$("Suspense");case 19:return $("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return $("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,ae=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,oe=r.unstable_shouldYield,se=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,de=r.unstable_ImmediatePriority,he=r.unstable_UserBlockingPriority,ue=r.unstable_NormalPriority,pe=r.unstable_LowPriority,me=r.unstable_IdlePriority,fe=r.log,ge=r.unstable_setDisableYieldValue,ye=null,we=null;function ve(e){if("function"===typeof fe&&ge(e),we&&"function"===typeof we.setStrictMode)try{we.setStrictMode(ye,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xe(e)/ke|0)|0},xe=Math.log,ke=Math.LN2;var _e=256,Te=262144,Se=4194304;function Ne(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ce(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~i)?a=Ne(r):0!==(o&=s)?a=Ne(o):n||0!==(n=s&~e)&&(a=Ne(n)):0!==(s=r&~i)?a=Ne(s):0!==o?a=Ne(o):n||0!==(n=r&~e)&&(a=Ne(n)),0===a?0:0!==t&&t!==a&&0===(t&i)&&((i=a&-a)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:a}function Ae(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function je(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ee(){var e=Se;return 0===(62914560&(Se<<=1))&&(Se=4194304),e}function Be(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-be(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-be(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Le(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Re(n))&(e.suspendedLanes|t))?0:n}function Re(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function De(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:Nu(e.type)}function We(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}var He=Math.random().toString(36).slice(2),ze="__reactFiber$"+He,Fe="__reactProps$"+He,qe="__reactContainer$"+He,Ue="__reactEvents$"+He,Ge="__reactListeners$"+He,Ke="__reactHandles$"+He,Ye="__reactResources$"+He,Ve="__reactMarker$"+He;function Ze(e){delete e[ze],delete e[Fe],delete e[Ue],delete e[Ge],delete e[Ke]}function Je(e){var t=e[ze];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qe]||n[ze]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Rh(e);null!==e;){if(n=e[ze])return n;e=Rh(e)}return t}n=(e=n).parentNode}return null}function Qe(e){if(e=e[ze]||e[qe]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Xe(e){var t=e[Ye];return t||(t=e[Ye]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ve]=!0}var tt=new Set,nt={};function rt(e,t){at(e,t),at(e+"Capture",t)}function at(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},st={};function lt(e,t,n){if(a=t,re.call(st,a)||!re.call(ot,a)&&(it.test(a)?st[a]=!0:(ot[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function dt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=ut(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function wt(e,t,n,r,a,i,o,s){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?bt(e,o,ht(t)):null!=n?bt(e,o,ht(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=i&&(e.defaultChecked=!!i),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+ht(s):e.removeAttribute("name")}function vt(e,t,n,r,a,i,o,s){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return void pt(e);n=null!=n?""+ht(n):"",t=null!=t?""+ht(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:a)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o),pt(e)}function bt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function kt(e,t,n){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ht(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(I(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ht(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),pt(e)}function Tt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Nt(e,a,r)}else for(var i in t)t.hasOwnProperty(i)&&Nt(e,i,t[i])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bt(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var It=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,Rt=null;function Mt(e){var t=Qe(e);if(t&&(e=t.stateNode)){var n=e[Fe]||null;e:switch(e=t.stateNode,t.type){case"input":if(wt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[Fe]||null;if(!a)throw Error(o(90));wt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&mt(r)}break e;case"textarea":kt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var Dt=!1;function Wt(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==Lt||null!==Rt)&&(Xc(),Lt&&(t=Lt,e=Rt,Rt=Lt=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function Ht(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Fe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var zt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ft=!1;if(zt)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch(Qu){Ft=!1}var Ut=null,Gt=null,Kt=null;function Yt(){if(Kt)return Kt;var e,t,n=Gt,r=n.length,a="value"in Ut?Ut.value:Ut.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Kt=a.slice(e,1<t?1-t:void 0)}function Vt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Zt(){return!0}function Jt(){return!1}function Qt(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Zt:Jt,this.isPropagationStopped=Jt,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Zt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Zt)},persist:function(){},isPersistent:Zt}),t}var $t,Xt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Qt(tn),rn=p({},tn,{view:0,detail:0}),an=Qt(rn),on=p({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?($t=e.screenX-en.screenX,Xt=e.screenY-en.screenY):Xt=$t=0,en=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),sn=Qt(on),ln=Qt(p({},on,{dataTransfer:0})),cn=Qt(p({},rn,{relatedTarget:0})),dn=Qt(p({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=Qt(p({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=Qt(p({},tn,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fn[e])&&!!t[e]}function yn(){return gn}var wn=Qt(p({},rn,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Vt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?mn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Vt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Vt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),vn=Qt(p({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Qt(p({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),xn=Qt(p({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=Qt(p({},on,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),_n=Qt(p({},tn,{newState:0,oldState:0})),Tn=[9,13,27,32],Sn=zt&&"CompositionEvent"in window,Nn=null;zt&&"documentMode"in document&&(Nn=document.documentMode);var Cn=zt&&"TextEvent"in window&&!Nn,An=zt&&(!Sn||Nn&&8<Nn&&11>=Nn),jn=String.fromCharCode(32),En=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Tn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Rn(e,t,n,r){Lt?Rt?Rt.push(r):Rt=[r]:Lt=r,0<(t=rh(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,Dn=null;function Wn(e){Zd(e,0)}function Hn(e){if(mt($e(e)))return e}function zn(e,t){if("change"===e)return t}var Fn=!1;if(zt){var qn;if(zt){var Un="oninput"in document;if(!Un){var Gn=document.createElement("div");Gn.setAttribute("oninput","return;"),Un="function"===typeof Gn.oninput}qn=Un}else qn=!1;Fn=qn&&(!document.documentMode||9<document.documentMode)}function Kn(){Mn&&(Mn.detachEvent("onpropertychange",Yn),Dn=Mn=null)}function Yn(e){if("value"===e.propertyName&&Hn(Dn)){var t=[];Rn(t,Dn,e,Ot(e)),Wt(Wn,t)}}function Vn(e,t,n){"focusin"===e?(Kn(),Dn=n,(Mn=t).attachEvent("onpropertychange",Yn)):"focusout"===e&&Kn()}function Zn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hn(Dn)}function Jn(e,t){if("click"===e)return Hn(t)}function Qn(e,t){if("input"===e||"change"===e)return Hn(t)}var $n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if($n(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!re.call(t,a)||!$n(e[a],t[a]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=zt&&"documentMode"in document&&11>=document.documentMode,or=null,sr=null,lr=null,cr=!1;function dr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==or||or!==ft(r)||("selectionStart"in(r=or)&&ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Xn(lr,r)||(lr=r,0<(r=rh(sr,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=or)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},pr={},mr={};function fr(e){if(pr[e])return pr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in mr)return pr[e]=n[t];return e}zt&&(mr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var gr=fr("animationend"),yr=fr("animationiteration"),wr=fr("animationstart"),vr=fr("transitionrun"),br=fr("transitionstart"),xr=fr("transitioncancel"),kr=fr("transitionend"),_r=new Map,Tr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){_r.set(e,t),rt(t,[e])}Tr.push("scrollEnd");var Nr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Cr=[],Ar=0,jr=0;function Er(){for(var e=Ar,t=jr=Ar=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var a=Cr[t];Cr[t++]=null;var i=Cr[t];if(Cr[t++]=null,null!==r&&null!==a){var o=r.pending;null===o?a.next=a:(a.next=o.next,o.next=a),r.pending=a}0!==i&&Or(n,a,i)}}function Br(e,t,n,r){Cr[Ar++]=e,Cr[Ar++]=t,Cr[Ar++]=n,Cr[Ar++]=r,jr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Pr(e,t,n,r){return Br(e,t,n,r),Lr(e)}function Ir(e,t){return Br(e,null,null,t),Lr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(a=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,a&&null!==t&&(a=31-be(n),null===(r=(e=i.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),i):null}function Lr(e){if(50<Uc)throw Uc=0,Gc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Rr={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(e,t,n,r){return new Mr(e,t,n,r)}function Wr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hr(e,t){var n=e.alternate;return null===n?((n=Dr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Fr(e,t,n,r,a,i){var s=0;if(r=e,"function"===typeof e)Wr(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,U.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Dr(31,n,t,a)).elementType=C,e.lanes=i,e;case y:return qr(n.children,a,i,t);case w:s=8,a|=24;break;case v:return(e=Dr(12,n,t,2|a)).elementType=v,e.lanes=i,e;case _:return(e=Dr(13,n,t,a)).elementType=_,e.lanes=i,e;case T:return(e=Dr(19,n,t,a)).elementType=T,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:s=10;break e;case b:s=9;break e;case k:s=11;break e;case S:s=14;break e;case N:s=16,r=null;break e}s=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Dr(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function qr(e,t,n,r){return(e=Dr(7,e,r,t)).lanes=n,e}function Ur(e,t,n){return(e=Dr(6,e,null,t)).lanes=n,e}function Gr(e){var t=Dr(18,null,null,0);return t.stateNode=e,t}function Kr(e,t,n){return(t=Dr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Yr=new WeakMap;function Vr(e,t){if("object"===typeof e&&null!==e){var n=Yr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Yr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Zr=[],Jr=0,Qr=null,$r=0,Xr=[],ea=0,ta=null,na=1,ra="";function aa(e,t){Zr[Jr++]=$r,Zr[Jr++]=Qr,Qr=e,$r=t}function ia(e,t,n){Xr[ea++]=na,Xr[ea++]=ra,Xr[ea++]=ta,ta=e;var r=na;e=ra;var a=32-be(r)-1;r&=~(1<<a),n+=1;var i=32-be(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,na=1<<32-be(t)+a|n<<a|r,ra=i+e}else na=1<<i|n<<a|r,ra=e}function oa(e){null!==e.return&&(aa(e,1),ia(e,1,0))}function sa(e){for(;e===Qr;)Qr=Zr[--Jr],Zr[Jr]=null,$r=Zr[--Jr],Zr[Jr]=null;for(;e===ta;)ta=Xr[--ea],Xr[ea]=null,ra=Xr[--ea],Xr[ea]=null,na=Xr[--ea],Xr[ea]=null}function la(e,t){Xr[ea++]=na,Xr[ea++]=ra,Xr[ea++]=ta,na=t.id,ra=t.overflow,ta=e}var ca=null,da=null,ha=!1,ua=null,pa=!1,ma=Error(o(519));function fa(e){throw xa(Vr(Error(o(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),ma}function ga(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ze]=e,t[Fe]=r,n){case"dialog":Jd("cancel",t),Jd("close",t);break;case"iframe":case"object":case"embed":Jd("load",t);break;case"video":case"audio":for(n=0;n<Yd.length;n++)Jd(Yd[n],t);break;case"source":Jd("error",t);break;case"img":case"image":case"link":Jd("error",t),Jd("load",t);break;case"details":Jd("toggle",t);break;case"input":Jd("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Jd("invalid",t);break;case"textarea":Jd("invalid",t),_t(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ch(t.textContent,n)?(null!=r.popover&&(Jd("beforetoggle",t),Jd("toggle",t)),null!=r.onScroll&&Jd("scroll",t),null!=r.onScrollEnd&&Jd("scrollend",t),null!=r.onClick&&(t.onclick=Pt),t=!0):t=!1,t||fa(e,!0)}function ya(e){for(ca=e.return;ca;)switch(ca.tag){case 5:case 31:case 13:return void(pa=!1);case 27:case 3:return void(pa=!0);default:ca=ca.return}}function wa(e){if(e!==ca)return!1;if(!ha)return ya(e),ha=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||vh(e.type,e.memoizedProps)),t=!t),t&&da&&fa(e),ya(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));da=Lh(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));da=Lh(e)}else 27===n?(n=da,Nh(e.type)?(e=Oh,Oh=null,da=e):da=n):da=ca?Ih(e.stateNode.nextSibling):null;return!0}function va(){da=ca=null,ha=!1}function ba(){var e=ua;return null!==e&&(null===Ec?Ec=e:Ec.push.apply(Ec,e),ua=null),e}function xa(e){null===ua?ua=[e]:ua.push(e)}var ka=W(null),_a=null,Ta=null;function Sa(e,t,n){z(ka,t._currentValue),t._currentValue=n}function Na(e){e._currentValue=ka.current,H(ka)}function Ca(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Aa(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var i=a.dependencies;if(null!==i){var s=a.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Ca(i.return,n,e),r||(s=null);break e}i=l.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(i=s.alternate)&&(i.lanes|=n),Ca(s,n,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function ja(e,t,n,r){e=null;for(var a=t,i=!1;null!==a;){if(!i)if(0!==(524288&a.flags))i=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var s=a.alternate;if(null===s)throw Error(o(387));if(null!==(s=s.memoizedProps)){var l=a.type;$n(a.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(a===Y.current){if(null===(s=a.alternate))throw Error(o(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(du):e=[du])}a=a.return}null!==e&&Aa(t,e,n,r),t.flags|=262144}function Ea(e){for(e=e.firstContext;null!==e;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ba(e){_a=e,Ta=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Pa(e){return Oa(_a,e)}function Ia(e,t){return null===_a&&Ba(e),Oa(e,t)}function Oa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Ta){if(null===e)throw Error(o(308));Ta=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ta=Ta.next=t;return n}var La="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ra=r.unstable_scheduleCallback,Ma=r.unstable_NormalPriority,Da={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wa(){return{controller:new La,data:new Map,refCount:0}}function Ha(e){e.refCount--,0===e.refCount&&Ra(Ma,function(){e.controller.abort()})}var za=null,Fa=0,qa=0,Ua=null;function Ga(){if(0===--Fa&&null!==za){null!==Ua&&(Ua.status="fulfilled");var e=za;za=null,qa=0,Ua=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ka=O.S;O.S=function(e,t){Ic=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===za){var n=za=[];Fa=0,qa=Fd(),Ua={status:"pending",value:void 0,then:function(e){n.push(e)}}}Fa++,t.then(Ga,Ga)}(0,t),null!==Ka&&Ka(e,t)};var Ya=W(null);function Va(){var e=Ya.current;return null!==e?e:mc.pooledCache}function Za(e,t){z(Ya,null===t?Ya.current:t.pool)}function Ja(){var e=Va();return null===e?null:{parent:Da._currentValue,pool:e}}var Qa=Error(o(460)),$a=Error(o(474)),Xa=Error(o(542)),ei={then:function(){}};function ti(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ni(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Pt,Pt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e;default:if("string"===typeof t.status)t.then(Pt,Pt);else{if(null!==(e=mc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e}throw ai=t,Qa}}function ri(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ai=t,Qa;throw t}}var ai=null;function ii(){if(null===ai)throw Error(o(459));var e=ai;return ai=null,e}function oi(e){if(e===Qa||e===Xa)throw Error(o(483))}var si=null,li=0;function ci(e){var t=li;return li+=1,null===si&&(si=[]),ni(si,e,t)}function di(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hi(e,t){if(t.$$typeof===m)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ui(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Hr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ur(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===y?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&ri(i)===t.type)?(di(t=a(t,n.props),n),t.return=e,t):(di(t=Fr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kr(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=qr(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ur(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return di(n=Fr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Kr(t,e.mode,n)).return=e,t;case N:return u(e,t=ri(t),n)}if(I(t)||E(t))return(t=qr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return u(e,ci(t),n);if(t.$$typeof===x)return u(e,Ia(e,t),n);hi(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===a?c(e,t,n,r):null;case g:return n.key===a?d(e,t,n,r):null;case N:return p(e,t,n=ri(n),r)}if(I(n)||E(n))return null!==a?null:h(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,ci(n),r);if(n.$$typeof===x)return p(e,t,Ia(e,n),r);hi(e,n)}return null}function m(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case f:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case g:return d(t,e=e.get(null===r.key?n:r.key)||null,r,a);case N:return m(e,t,n,r=ri(r),a)}if(I(r)||E(r))return h(t,e=e.get(n)||null,r,a,null);if("function"===typeof r.then)return m(e,t,n,ci(r),a);if(r.$$typeof===x)return m(e,t,n,Ia(t,r),a);hi(t,r)}return null}function w(l,c,d,h){if("object"===typeof d&&null!==d&&d.type===y&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case f:e:{for(var v=d.key;null!==c;){if(c.key===v){if((v=d.type)===y){if(7===c.tag){n(l,c.sibling),(h=a(c,d.props.children)).return=l,l=h;break e}}else if(c.elementType===v||"object"===typeof v&&null!==v&&v.$$typeof===N&&ri(v)===c.type){n(l,c.sibling),di(h=a(c,d.props),d),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}d.type===y?((h=qr(d.props.children,l.mode,h,d.key)).return=l,l=h):(di(h=Fr(d.type,d.key,d.props,null,l.mode,h),d),h.return=l,l=h)}return s(l);case g:e:{for(v=d.key;null!==c;){if(c.key===v){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(l,c.sibling),(h=a(c,d.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Kr(d,l.mode,h)).return=l,l=h}return s(l);case N:return w(l,c,d=ri(d),h)}if(I(d))return function(a,o,s,l){for(var c=null,d=null,h=o,f=o=0,g=null;null!==h&&f<s.length;f++){h.index>f?(g=h,h=null):g=h.sibling;var y=p(a,h,s[f],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(a,h),o=i(y,o,f),null===d?c=y:d.sibling=y,d=y,h=g}if(f===s.length)return n(a,h),ha&&aa(a,f),c;if(null===h){for(;f<s.length;f++)null!==(h=u(a,s[f],l))&&(o=i(h,o,f),null===d?c=h:d.sibling=h,d=h);return ha&&aa(a,f),c}for(h=r(h);f<s.length;f++)null!==(g=m(h,a,f,s[f],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?f:g.key),o=i(g,o,f),null===d?c=g:d.sibling=g,d=g);return e&&h.forEach(function(e){return t(a,e)}),ha&&aa(a,f),c}(l,c,d,h);if(E(d)){if("function"!==typeof(v=E(d)))throw Error(o(150));return function(a,s,l,c){if(null==l)throw Error(o(151));for(var d=null,h=null,f=s,g=s=0,y=null,w=l.next();null!==f&&!w.done;g++,w=l.next()){f.index>g?(y=f,f=null):y=f.sibling;var v=p(a,f,w.value,c);if(null===v){null===f&&(f=y);break}e&&f&&null===v.alternate&&t(a,f),s=i(v,s,g),null===h?d=v:h.sibling=v,h=v,f=y}if(w.done)return n(a,f),ha&&aa(a,g),d;if(null===f){for(;!w.done;g++,w=l.next())null!==(w=u(a,w.value,c))&&(s=i(w,s,g),null===h?d=w:h.sibling=w,h=w);return ha&&aa(a,g),d}for(f=r(f);!w.done;g++,w=l.next())null!==(w=m(f,a,g,w.value,c))&&(e&&null!==w.alternate&&f.delete(null===w.key?g:w.key),s=i(w,s,g),null===h?d=w:h.sibling=w,h=w);return e&&f.forEach(function(e){return t(a,e)}),ha&&aa(a,g),d}(l,c,d=v.call(d),h)}if("function"===typeof d.then)return w(l,c,ci(d),h);if(d.$$typeof===x)return w(l,c,Ia(l,d),h);hi(l,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(n(l,c.sibling),(h=a(c,d)).return=l,l=h):(n(l,c),(h=Ur(d,l.mode,h)).return=l,l=h),s(l)):n(l,c)}return function(e,t,n,r){try{li=0;var a=w(e,t,n,r);return si=null,a}catch(o){if(o===Qa||o===Xa)throw o;var i=Dr(29,o,null,e.mode);return i.lanes=r,i.return=e,i}}}var pi=ui(!0),mi=ui(!1),fi=!1;function gi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function vi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pc)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Lr(e),Or(e,null,n),t}return Br(e,r,t,n),Lr(e)}function bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function xi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ki=!1;function _i(){if(ki){if(null!==Ua)throw Ua}}function Ti(e,t,n,r){ki=!1;var a=e.updateQueue;fi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var d=e.alternate;null!==d&&((s=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===s?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(null!==i){var h=a.baseState;for(o=0,d=c=l=null,s=i;;){var u=-536870913&s.lane,m=u!==s.lane;if(m?(gc&u)===u:(r&u)===u){0!==u&&u===qa&&(ki=!0),null!==d&&(d=d.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var f=e,g=s;u=t;var y=n;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){h=f.call(y,h,u);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(u="function"===typeof(f=g.payload)?f.call(y,h,u):f)||void 0===u)break e;h=p({},h,u);break e;case 2:fi=!0}}null!==(u=s.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=a.callbacks)?a.callbacks=[u]:m.push(u))}else m={lane:u,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=m,l=h):d=d.next=m,o|=u;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(m=s).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}null===d&&(l=h),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null===i&&(a.shared.lanes=0),Tc|=o,e.lanes=o,e.memoizedState=h}}function Si(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Ni(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Si(n[e],t)}var Ci=W(null),Ai=W(0);function ji(e,t){z(Ai,e=kc),z(Ci,t),kc=e|t.baseLanes}function Ei(){z(Ai,kc),z(Ci,Ci.current)}function Bi(){kc=Ai.current,H(Ci),H(Ai)}var Pi=W(null),Ii=null;function Oi(e){var t=e.alternate;z(Wi,1&Wi.current),z(Pi,e),null===Ii&&(null===t||null!==Ci.current||null!==t.memoizedState)&&(Ii=e)}function Li(e){z(Wi,Wi.current),z(Pi,e),null===Ii&&(Ii=e)}function Ri(e){22===e.tag?(z(Wi,Wi.current),z(Pi,e),null===Ii&&(Ii=e)):Mi()}function Mi(){z(Wi,Wi.current),z(Pi,Pi.current)}function Di(e){H(Pi),Ii===e&&(Ii=null),H(Wi)}var Wi=W(0);function Hi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Bh(n)||Ph(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zi=0,Fi=null,qi=null,Ui=null,Gi=!1,Ki=!1,Yi=!1,Vi=0,Zi=0,Ji=null,Qi=0;function $i(){throw Error(o(321))}function Xi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function eo(e,t,n,r,a,i){return zi=i,Fi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?gs:ys,Yi=!1,i=n(r,a),Yi=!1,Ki&&(i=no(t,n,r,a)),to(e),i}function to(e){O.H=fs;var t=null!==qi&&null!==qi.next;if(zi=0,Ui=qi=Fi=null,Gi=!1,Zi=0,Ji=null,t)throw Error(o(300));null===e||Is||null!==(e=e.dependencies)&&Ea(e)&&(Is=!0)}function no(e,t,n,r){Fi=e;var a=0;do{if(Ki&&(Ji=null),Zi=0,Ki=!1,25<=a)throw Error(o(301));if(a+=1,Ui=qi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}O.H=ws,i=t(n,r)}while(Ki);return i}function ro(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?co(t):t,e=e.useState()[0],(null!==qi?qi.memoizedState:null)!==e&&(Fi.flags|=1024),t}function ao(){var e=0!==Vi;return Vi=0,e}function io(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oo(e){if(Gi){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Gi=!1}zi=0,Ui=qi=Fi=null,Ki=!1,Zi=Vi=0,Ji=null}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ui?Fi.memoizedState=Ui=e:Ui=Ui.next=e,Ui}function lo(){if(null===qi){var e=Fi.alternate;e=null!==e?e.memoizedState:null}else e=qi.next;var t=null===Ui?Fi.memoizedState:Ui.next;if(null!==t)Ui=t,qi=e;else{if(null===e){if(null===Fi.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(qi=e).memoizedState,baseState:qi.baseState,baseQueue:qi.baseQueue,queue:qi.queue,next:null},null===Ui?Fi.memoizedState=Ui=e:Ui=Ui.next=e}return Ui}function co(e){var t=Zi;return Zi+=1,null===Ji&&(Ji=[]),e=ni(Ji,e,t),t=Fi,null===(null===Ui?t.memoizedState:Ui.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?gs:ys),e}function ho(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return co(e);if(e.$$typeof===x)return Pa(e)}throw Error(o(438,String(e)))}function uo(e){var t=null,n=Fi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Fi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Fi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=A;return t.index++,n}function po(e,t){return"function"===typeof t?t(e):t}function mo(e){return fo(lo(),qi,e)}function fo(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var a=e.baseQueue,i=r.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}t.baseQueue=a=i,r.pending=null}if(i=e.baseState,null===a)e.memoizedState=i;else{var l=s=null,c=null,d=t=a.next,h=!1;do{var u=-536870913&d.lane;if(u!==d.lane?(gc&u)===u:(zi&u)===u){var p=d.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),u===qa&&(h=!0);else{if((zi&p)===p){d=d.next,p===qa&&(h=!0);continue}u={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=u,s=i):c=c.next=u,Fi.lanes|=p,Tc|=p}u=d.action,Yi&&n(i,u),i=d.hasEagerState?d.eagerState:n(i,u)}else p={lane:u,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=p,s=i):c=c.next=p,Fi.lanes|=u,Tc|=u;d=d.next}while(null!==d&&d!==t);if(null===c?s=i:c.next=l,!$n(i,e.memoizedState)&&(Is=!0,h&&null!==(n=Ua)))throw n;e.memoizedState=i,e.baseState=s,e.baseQueue=c,r.lastRenderedState=i}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function go(e){var t=lo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);$n(i,t.memoizedState)||(Is=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function yo(e,t,n){var r=Fi,a=lo(),i=ha;if(i){if(void 0===n)throw Error(o(407));n=n()}else n=t();var s=!$n((qi||a).memoizedState,n);if(s&&(a.memoizedState=n,Is=!0),a=a.queue,Fo(bo.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||null!==Ui&&1&Ui.memoizedState.tag){if(r.flags|=2048,Mo(9,{destroy:void 0},vo.bind(null,r,a,n,t),null),null===mc)throw Error(o(349));i||0!==(127&zi)||wo(r,t,n)}return n}function wo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Fi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Fi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function vo(e,t,n,r){t.value=n,t.getSnapshot=r,xo(t)&&ko(e)}function bo(e,t,n){return n(function(){xo(t)&&ko(e)})}function xo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch(r){return!0}}function ko(e){var t=Ir(e,2);null!==t&&Vc(t,e,2)}function _o(e){var t=so();if("function"===typeof e){var n=e;if(e=n(),Yi){ve(!0);try{n()}finally{ve(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:e},t}function To(e,t,n,r){return e.baseState=n,fo(e,qi,"function"===typeof r?r:po)}function So(e,t,n,r,a){if(us(e))throw Error(o(485));if(null!==(e=t.action)){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==O.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,No(t,i)):(i.next=n.next,t.pending=n.next=i)}}function No(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var i=O.T,o={};O.T=o;try{var s=n(a,r),l=O.S;null!==l&&l(o,s),Co(e,t,s)}catch(c){jo(e,t,c)}finally{null!==i&&null!==o.types&&(i.types=o.types),O.T=i}}else try{Co(e,t,i=n(a,r))}catch(d){jo(e,t,d)}}function Co(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Ao(e,t,n)},function(n){return jo(e,t,n)}):Ao(e,t,n)}function Ao(e,t,n){t.status="fulfilled",t.value=n,Eo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,No(e,n)))}function jo(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Eo(t),t=t.next}while(t!==r)}e.action=null}function Eo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Bo(e,t){return t}function Po(e,t){if(ha){var n=mc.formState;if(null!==n){e:{var r=Fi;if(ha){if(da){t:{for(var a=da,i=pa;8!==a.nodeType;){if(!i){a=null;break t}if(null===(a=Ih(a.nextSibling))){a=null;break t}}a="F!"===(i=a.data)||"F"===i?a:null}if(a){da=Ih(a.nextSibling),r="F!"===a.data;break e}}fa(r)}r=!1}r&&(t=n[0])}}return(n=so()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:t},n.queue=r,n=cs.bind(null,Fi,r),r.dispatch=n,r=_o(!1),i=hs.bind(null,Fi,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=so()).queue=a,n=So.bind(null,Fi,a,i,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function Io(e){return Oo(lo(),qi,e)}function Oo(e,t,n){if(t=fo(e,t,Bo)[0],e=mo(po)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=co(t)}catch(o){if(o===Qa)throw Xa;throw o}else r=t;var a=(t=lo()).queue,i=a.dispatch;return n!==t.memoizedState&&(Fi.flags|=2048,Mo(9,{destroy:void 0},Lo.bind(null,a,n),null)),[r,i,e]}function Lo(e,t){e.action=t}function Ro(e){var t=lo(),n=qi;if(null!==n)return Oo(t,n,e);lo(),t=t.memoizedState;var r=(n=lo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Mo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Fi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Fi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Do(){return lo().memoizedState}function Wo(e,t,n,r){var a=so();Fi.flags|=e,a.memoizedState=Mo(1|t,{destroy:void 0},n,void 0===r?null:r)}function Ho(e,t,n,r){var a=lo();r=void 0===r?null:r;var i=a.memoizedState.inst;null!==qi&&null!==r&&Xi(r,qi.memoizedState.deps)?a.memoizedState=Mo(t,i,n,r):(Fi.flags|=e,a.memoizedState=Mo(1|t,i,n,r))}function zo(e,t){Wo(8390656,8,e,t)}function Fo(e,t){Ho(2048,8,e,t)}function qo(e){var t=lo().memoizedState;return function(e){Fi.flags|=4;var t=Fi.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Fi.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Uo(e,t){return Ho(4,2,e,t)}function Go(e,t){return Ho(4,4,e,t)}function Ko(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Yo(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ho(4,4,Ko.bind(null,t,e),n)}function Vo(){}function Zo(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Xi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Xi(t,r[1]))return r[0];if(r=e(),Yi){ve(!0);try{e()}finally{ve(!1)}}return n.memoizedState=[r,t],r}function Qo(e,t,n){return void 0===n||0!==(1073741824&zi)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=Yc(),Fi.lanes|=e,Tc|=e,n)}function $o(e,t,n,r){return $n(n,t)?n:null!==Ci.current?(e=Qo(e,n,r),$n(e,t)||(Is=!0),e):0===(42&zi)||0!==(1073741824&zi)&&0===(261930&gc)?(Is=!0,e.memoizedState=n):(e=Yc(),Fi.lanes|=e,Tc|=e,t)}function Xo(e,t,n,r,a){var i=L.p;L.p=0!==i&&8>i?i:8;var o=O.T,s={};O.T=s,hs(e,!1,t,n);try{var l=a(),c=O.S;if(null!==c&&c(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)ds(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Kc());else ds(e,t,r,Kc())}catch(d){ds(e,t,{then:function(){},status:"rejected",reason:d},Kc())}finally{L.p=i,null!==o&&null!==s.types&&(o.types=s.types),O.T=o}}function es(){}function ts(e,t,n,r){if(5!==e.tag)throw Error(o(476));var a=ns(e).queue;Xo(e,a,t,R,null===n?es:function(){return rs(e),n(r)})}function ns(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:R},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function rs(e){var t=ns(e);null===t.next&&(t=e.alternate.memoizedState),ds(e,t.next.queue,{},Kc())}function as(){return Pa(du)}function is(){return lo().memoizedState}function os(){return lo().memoizedState}function ss(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Kc(),r=vi(t,e=wi(n),n);return null!==r&&(Vc(r,t,n),bi(r,t,n)),t={cache:Wa()},void(e.payload=t)}t=t.return}}function ls(e,t,n){var r=Kc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},us(e)?ps(t,n):null!==(n=Pr(e,t,n,r))&&(Vc(n,e,r),ms(n,t,r))}function cs(e,t,n){ds(e,t,n,Kc())}function ds(e,t,n,r){var a={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(us(e))ps(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,$n(s,o))return Br(e,t,a,0),null===mc&&Er(),!1}catch(l){}if(null!==(n=Pr(e,t,a,r)))return Vc(n,e,r),ms(n,t,r),!0}return!1}function hs(e,t,n,r){if(r={lane:2,revertLane:Fd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},us(e)){if(t)throw Error(o(479))}else null!==(t=Pr(e,n,r,2))&&Vc(t,e,2)}function us(e){var t=e.alternate;return e===Fi||null!==t&&t===Fi}function ps(e,t){Ki=Gi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ms(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var fs={readContext:Pa,use:ho,useCallback:$i,useContext:$i,useEffect:$i,useImperativeHandle:$i,useLayoutEffect:$i,useInsertionEffect:$i,useMemo:$i,useReducer:$i,useRef:$i,useState:$i,useDebugValue:$i,useDeferredValue:$i,useTransition:$i,useSyncExternalStore:$i,useId:$i,useHostTransitionStatus:$i,useFormState:$i,useActionState:$i,useOptimistic:$i,useMemoCache:$i,useCacheRefresh:$i};fs.useEffectEvent=$i;var gs={readContext:Pa,use:ho,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:Pa,useEffect:zo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Wo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wo(4194308,4,e,t)},useInsertionEffect:function(e,t){Wo(4,2,e,t)},useMemo:function(e,t){var n=so();t=void 0===t?null:t;var r=e();if(Yi){ve(!0);try{e()}finally{ve(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=so();if(void 0!==n){var a=n(t);if(Yi){ve(!0);try{n(t)}finally{ve(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=ls.bind(null,Fi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},so().memoizedState=e},useState:function(e){var t=(e=_o(e)).queue,n=cs.bind(null,Fi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Vo,useDeferredValue:function(e,t){return Qo(so(),e,t)},useTransition:function(){var e=_o(!1);return e=Xo.bind(null,Fi,e.queue,!0,!1),so().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Fi,a=so();if(ha){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===mc)throw Error(o(349));0!==(127&gc)||wo(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,zo(bo.bind(null,r,i,e),[e]),r.flags|=2048,Mo(9,{destroy:void 0},vo.bind(null,r,i,n,t),null),n},useId:function(){var e=so(),t=mc.identifierPrefix;if(ha){var n=ra;t="_"+t+"R_"+(n=(na&~(1<<32-be(na)-1)).toString(32)+n),0<(n=Vi++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Qi++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:as,useFormState:Po,useActionState:Po,useOptimistic:function(e){var t=so();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=hs.bind(null,Fi,!0,n),n.dispatch=t,[e,t]},useMemoCache:uo,useCacheRefresh:function(){return so().memoizedState=ss.bind(null,Fi)},useEffectEvent:function(e){var t=so(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(o(440));return n.impl.apply(void 0,arguments)}}},ys={readContext:Pa,use:ho,useCallback:Zo,useContext:Pa,useEffect:Fo,useImperativeHandle:Yo,useInsertionEffect:Uo,useLayoutEffect:Go,useMemo:Jo,useReducer:mo,useRef:Do,useState:function(){return mo(po)},useDebugValue:Vo,useDeferredValue:function(e,t){return $o(lo(),qi.memoizedState,e,t)},useTransition:function(){var e=mo(po)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:yo,useId:is,useHostTransitionStatus:as,useFormState:Io,useActionState:Io,useOptimistic:function(e,t){return To(lo(),0,e,t)},useMemoCache:uo,useCacheRefresh:os};ys.useEffectEvent=qo;var ws={readContext:Pa,use:ho,useCallback:Zo,useContext:Pa,useEffect:Fo,useImperativeHandle:Yo,useInsertionEffect:Uo,useLayoutEffect:Go,useMemo:Jo,useReducer:go,useRef:Do,useState:function(){return go(po)},useDebugValue:Vo,useDeferredValue:function(e,t){var n=lo();return null===qi?Qo(n,e,t):$o(n,qi.memoizedState,e,t)},useTransition:function(){var e=go(po)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:yo,useId:is,useHostTransitionStatus:as,useFormState:Ro,useActionState:Ro,useOptimistic:function(e,t){var n=lo();return null!==qi?To(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:uo,useCacheRefresh:os};function vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:p({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}ws.useEffectEvent=qo;var bs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Kc(),a=wi(r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=vi(e,a,r))&&(Vc(t,e,r),bi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Kc(),a=wi(r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=vi(e,a,r))&&(Vc(t,e,r),bi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kc(),r=wi(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=vi(e,r,n))&&(Vc(t,e,n),bi(t,e,n))}};function xs(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(a,i))}function ks(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bs.enqueueReplaceState(t,t.state,null)}function _s(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=p({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}function Ts(e){Nr(e)}function Ss(e){console.error(e)}function Ns(e){Nr(e)}function Cs(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function As(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function js(e,t,n){return(n=wi(n)).tag=3,n.payload={element:null},n.callback=function(){Cs(e,t)},n}function Es(e){return(e=wi(e)).tag=3,e}function Bs(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"===typeof a){var i=r.value;e.payload=function(){return a(i)},e.callback=function(){As(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){As(t,n,r),"function"!==typeof a&&(null===Rc?Rc=new Set([this]):Rc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ps=Error(o(461)),Is=!1;function Os(e,t,n,r){t.child=null===e?mi(t,null,n,r):pi(t,e.child,n,r)}function Ls(e,t,n,r,a){n=n.render;var i=t.ref;if("ref"in r){var o={};for(var s in r)"ref"!==s&&(o[s]=r[s])}else o=r;return Ba(t),r=eo(e,t,n,o,i,a),s=ao(),null===e||Is?(ha&&s&&oa(t),t.flags|=1,Os(e,t,r,a),t.child):(io(e,t,a),al(e,t,a))}function Rs(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Wr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Fr(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ms(e,t,i,r,a))}if(i=e.child,!il(e,a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(o,r)&&e.ref===t.ref)return al(e,t,a)}return t.flags|=1,(e=Hr(i,r)).ref=t.ref,e.return=t,t.child=e}function Ms(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(Xn(i,r)&&e.ref===t.ref){if(Is=!1,t.pendingProps=r=i,!il(e,a))return t.lanes=e.lanes,al(e,t,a);0!==(131072&e.flags)&&(Is=!0)}}return Us(e,t,n,r,a)}function Ds(e,t,n,r){var a=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,a=0;null!==r;)a=a|r.lanes|r.childLanes,r=r.sibling;r=a&~i}else r=0,t.child=null;return Hs(e,t,i,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Hs(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Za(0,null!==i?i.cachePool:null),null!==i?ji(t,i):Ei(),Ri(t)}else null!==i?(Za(0,i.cachePool),ji(t,i),Mi(),t.memoizedState=null):(null!==e&&Za(0,null),Ei(),Mi());return Os(e,t,a,n),t.child}function Ws(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Hs(e,t,n,r,a){var i=Va();return i=null===i?null:{parent:Da._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Za(0,null),Ei(),Ri(t),null!==e&&ja(e,t,r,!0),t.childLanes=a,null}function zs(e,t){return(t=Xs({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Fs(e,t,n){return pi(t,e.child,null,n),(e=zs(t,t.pendingProps)).flags|=2,Di(t),t.memoizedState=null,e}function qs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Us(e,t,n,r,a){return Ba(t),n=eo(e,t,n,r,void 0,a),r=ao(),null===e||Is?(ha&&r&&oa(t),t.flags|=1,Os(e,t,n,a),t.child):(io(e,t,a),al(e,t,a))}function Gs(e,t,n,r,a,i){return Ba(t),t.updateQueue=null,n=no(t,r,n,a),to(e),r=ao(),null===e||Is?(ha&&r&&oa(t),t.flags|=1,Os(e,t,n,i),t.child):(io(e,t,i),al(e,t,i))}function Ks(e,t,n,r,a){if(Ba(t),null===t.stateNode){var i=Rr,o=n.contextType;"object"===typeof o&&null!==o&&(i=Pa(o)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=bs,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},gi(t),o=n.contextType,i.context="object"===typeof o&&null!==o?Pa(o):Rr,i.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(vs(t,n,o,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(o=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),o!==i.state&&bs.enqueueReplaceState(i,i.state,null),Ti(t,r,i,a),_i(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var s=t.memoizedProps,l=_s(n,s);i.props=l;var c=i.context,d=n.contextType;o=Rr,"object"===typeof d&&null!==d&&(o=Pa(d));var h=n.getDerivedStateFromProps;d="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate,s=t.pendingProps!==s,d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s||c!==o)&&ks(t,i,r,o),fi=!1;var u=t.memoizedState;i.state=u,Ti(t,r,i,a),_i(),c=t.memoizedState,s||u!==c||fi?("function"===typeof h&&(vs(t,n,h,r),c=t.memoizedState),(l=fi||xs(t,n,l,r,u,c,o))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=o,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,yi(e,t),d=_s(n,o=t.memoizedProps),i.props=d,h=t.pendingProps,u=i.context,c=n.contextType,l=Rr,"object"===typeof c&&null!==c&&(l=Pa(c)),(c="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==h||u!==l)&&ks(t,i,r,l),fi=!1,u=t.memoizedState,i.state=u,Ti(t,r,i,a),_i();var p=t.memoizedState;o!==h||u!==p||fi||null!==e&&null!==e.dependencies&&Ea(e.dependencies)?("function"===typeof s&&(vs(t,n,s,r),p=t.memoizedState),(d=fi||xs(t,n,d,r,u,p,l)||null!==e&&null!==e.dependencies&&Ea(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=d):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,qs(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=pi(t,e.child,null,a),t.child=pi(t,null,n,a)):Os(e,t,n,a),t.memoizedState=i.state,e=t.child):e=al(e,t,a),e}function Ys(e,t,n,r){return va(),t.flags|=256,Os(e,t,n,r),t.child}var Vs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zs(e){return{baseLanes:e,cachePool:Ja()}}function Js(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Cc),e}function Qs(e,t,n){var r,a=t.pendingProps,i=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Wi.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(ha){if(i?Oi(t):Mi(),(e=da)?null!==(e=null!==(e=Eh(e,pa))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Gr(e)).return=t,t.child=n,ca=t,da=null):e=null,null===e)throw fa(t);return Ph(e)?t.lanes=32:t.lanes=536870912,null}var l=a.children;return a=a.fallback,i?(Mi(),l=Xs({mode:"hidden",children:l},i=t.mode),a=qr(a,i,n,null),l.return=t,a.return=t,l.sibling=a,t.child=l,(a=t.child).memoizedState=Zs(n),a.childLanes=Js(e,r,n),t.memoizedState=Vs,Ws(null,a)):(Oi(t),$s(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(s)256&t.flags?(Oi(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Mi(),t.child=e.child,t.flags|=128,t=null):(Mi(),l=a.fallback,i=t.mode,a=Xs({mode:"visible",children:a.children},i),(l=qr(l,i,n,null)).flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,pi(t,e.child,null,n),(a=t.child).memoizedState=Zs(n),a.childLanes=Js(e,r,n),t.memoizedState=Vs,t=Ws(null,a));else if(Oi(t),Ph(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var d=r.dgst;r=d,(a=Error(o(419))).stack="",a.digest=r,xa({value:a,source:null,stack:null}),t=el(e,t,n)}else if(Is||ja(e,t,n,!1),r=0!==(n&e.childLanes),Is||r){if(null!==(r=mc)&&(0!==(a=Le(r,n))&&a!==c.retryLane))throw c.retryLane=a,Ir(e,a),Vc(r,e,a),Ps;Bh(l)||od(),t=el(e,t,n)}else Bh(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,da=Ih(l.nextSibling),ca=t,ha=!0,ua=null,pa=!1,null!==e&&la(t,e),(t=$s(t,a.children)).flags|=4096);return t}return i?(Mi(),l=a.fallback,i=t.mode,d=(c=e.child).sibling,(a=Hr(c,{mode:"hidden",children:a.children})).subtreeFlags=65011712&c.subtreeFlags,null!==d?l=Hr(d,l):(l=qr(l,i,n,null)).flags|=2,l.return=t,a.return=t,a.sibling=l,t.child=a,Ws(null,a),a=t.child,null===(l=e.child.memoizedState)?l=Zs(n):(null!==(i=l.cachePool)?(c=Da._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=Ja(),l={baseLanes:l.baseLanes|n,cachePool:i}),a.memoizedState=l,a.childLanes=Js(e,r,n),t.memoizedState=Vs,Ws(e.child,a)):(Oi(t),e=(n=e.child).sibling,(n=Hr(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function $s(e,t){return(t=Xs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Xs(e,t){return(e=Dr(22,e,null,t)).lanes=0,e}function el(e,t,n){return pi(t,e.child,null,n),(e=$s(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ca(e.return,t,n)}function nl(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,treeForkCount:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.treeForkCount=i)}function rl(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;r=r.children;var o=Wi.current,s=0!==(2&o);if(s?(o=1&o|2,t.flags|=128):o&=1,z(Wi,o),Os(e,t,r,n),r=ha?$r:0,!s&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Hi(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),nl(t,!1,a,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Hi(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}nl(t,!0,n,null,i,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function al(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Tc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ja(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Hr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function il(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ea(e))}function ol(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Is=!0;else{if(!il(e,n)&&0===(128&t.flags))return Is=!1,function(e,t,n){switch(t.tag){case 3:V(t,t.stateNode.containerInfo),Sa(0,Da,e.memoizedState.cache),va();break;case 27:case 5:J(t);break;case 4:V(t,t.stateNode.containerInfo);break;case 10:Sa(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Li(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Oi(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Qs(e,t,n):(Oi(t),null!==(e=al(e,t,n))?e.sibling:null);Oi(t);break;case 19:var a=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(ja(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return rl(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),z(Wi,Wi.current),r)break;return null;case 22:return t.lanes=0,Ds(e,t,n,t.pendingProps);case 24:Sa(0,Da,e.memoizedState.cache)}return al(e,t,n)}(e,t,n);Is=0!==(131072&e.flags)}else Is=!1,ha&&0!==(1048576&t.flags)&&ia(t,$r,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ri(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var a=e.$$typeof;if(a===k){t.tag=11,t=Ls(null,t,e,r,n);break e}if(a===S){t.tag=14,t=Rs(null,t,e,r,n);break e}}throw t=P(e)||e,Error(o(306,t,""))}Wr(e)?(r=_s(e,r),t.tag=1,t=Ks(null,t,e,r,n)):(t.tag=0,t=Us(null,t,e,r,n))}return t;case 0:return Us(e,t,t.type,t.pendingProps,n);case 1:return Ks(e,t,r=t.type,a=_s(r,t.pendingProps),n);case 3:e:{if(V(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var i=t.memoizedState;a=i.element,yi(e,t),Ti(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Sa(0,Da,r),r!==i.cache&&Aa(t,[Da],n,!0),_i(),r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ys(e,t,r,n);break e}if(r!==a){xa(a=Vr(Error(o(424)),t)),t=Ys(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(da=Ih(e.firstChild),ca=t,ha=!0,ua=null,pa=!0,n=mi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(va(),r===a){t=al(e,t,n);break e}Os(e,t,r,n)}t=t.child}return t;case 26:return qs(e,t),null===e?(n=Gh(t.type,null,t.pendingProps,null))?t.memoizedState=n:ha||(n=t.type,e=t.pendingProps,(r=gh(K.current).createElement(n))[ze]=t,r[Fe]=e,uh(r,n,e),et(r),t.stateNode=r):t.memoizedState=Gh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return J(t),null===e&&ha&&(r=t.stateNode=Mh(t.type,t.pendingProps,K.current),ca=t,pa=!0,a=da,Nh(t.type)?(Oh=a,da=Ih(r.firstChild)):da=a),Os(e,t,t.pendingProps.children,n),qs(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ha&&((a=r=da)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ve])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===i)return e}if(null===(e=Ih(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,pa))?(t.stateNode=r,ca=t,da=Ih(r.firstChild),pa=!1,a=!0):a=!1),a||fa(t)),J(t),a=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,r=i.children,vh(a,i)?r=null:null!==s&&vh(a,s)&&(t.flags|=32),null!==t.memoizedState&&(a=eo(e,t,ro,null,null,n),du._currentValue=a),qs(e,t),Os(e,t,r,n),t.child;case 6:return null===e&&ha&&((e=n=da)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Ih(e.nextSibling)))return null}return e}(n,t.pendingProps,pa))?(t.stateNode=n,ca=t,da=null,e=!0):e=!1),e||fa(t)),null;case 13:return Qs(e,t,n);case 4:return V(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=pi(t,null,r,n):Os(e,t,r,n),t.child;case 11:return Ls(e,t,t.type,t.pendingProps,n);case 7:return Os(e,t,t.pendingProps,n),t.child;case 8:case 12:return Os(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Sa(0,t.type,r.value),Os(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Ba(t),r=r(a=Pa(a)),t.flags|=1,Os(e,t,r,n),t.child;case 14:return Rs(e,t,t.type,t.pendingProps,n);case 15:return Ms(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,a=0!==(128&t.flags);if(t.flags&=-129,null===e){if(ha){if("hidden"===r.mode)return e=zs(t,r),t.lanes=536870912,Ws(null,e);if(Li(t),(e=da)?null!==(e=null!==(e=Eh(e,pa))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Gr(e)).return=t,t.child=n,ca=t,da=null):e=null,null===e)throw fa(t);return t.lanes=536870912,null}return zs(t,r)}var i=e.memoizedState;if(null!==i){var s=i.dehydrated;if(Li(t),a)if(256&t.flags)t.flags&=-257,t=Fs(e,t,n);else{if(null===t.memoizedState)throw Error(o(558));t.child=e.child,t.flags|=128,t=null}else if(Is||ja(e,t,n,!1),a=0!==(n&e.childLanes),Is||a){if(null!==(r=mc)&&0!==(s=Le(r,n))&&s!==i.retryLane)throw i.retryLane=s,Ir(e,s),Vc(r,e,s),Ps;od(),t=Fs(e,t,n)}else e=i.treeContext,da=Ih(s.nextSibling),ca=t,ha=!0,ua=null,pa=!1,null!==e&&la(t,e),(t=zs(t,r)).flags|=4096;return t}return(e=Hr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Ds(e,t,n,t.pendingProps);case 24:return Ba(t),r=Pa(Da),null===e?(null===(a=Va())&&(a=mc,i=Wa(),a.pooledCache=i,i.refCount++,null!==i&&(a.pooledCacheLanes|=n),a=i),t.memoizedState={parent:r,cache:a},gi(t),Sa(0,Da,a)):(0!==(e.lanes&n)&&(yi(e,t),Ti(t,null,null,n),_i()),a=e.memoizedState,i=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),Sa(0,Da,r)):(r=i.cache,Sa(0,Da,r),r!==a.cache&&Aa(t,[Da],n,!0))),Os(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function sl(e){e.flags|=4}function ll(e,t,n,r,a){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&a)===a)if(e.stateNode.complete)e.flags|=8192;else{if(!rd())throw ai=ei,$a;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!au(t)){if(!rd())throw ai=ei,$a;e.flags|=8192}}function dl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ee():536870912,e.lanes|=t,Ac|=t)}function hl(e,t){if(!ha)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ul(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pl(e,t,n){var r=t.pendingProps;switch(sa(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return ul(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Na(Da),Z(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(wa(t)?sl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ba())),ul(t),null;case 26:var a=t.type,i=t.memoizedState;return null===e?(sl(t),null!==i?(ul(t),cl(t,i)):(ul(t),ll(t,a,0,0,n))):i?i!==e.memoizedState?(sl(t),ul(t),cl(t,i)):(ul(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&sl(t),ul(t),ll(t,a,0,0,n)),null;case 27:if(Q(t),n=K.current,a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sl(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return ul(t),null}e=U.current,wa(t)?ga(t):(e=Mh(a,r,n),t.stateNode=e,sl(t))}return ul(t),null;case 5:if(Q(t),a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sl(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return ul(t),null}if(i=U.current,wa(t))ga(t);else{var s=gh(K.current);switch(i){case 1:i=s.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=s.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":(i=s.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i="string"===typeof r.is?s.createElement(a,{is:r.is}):s.createElement(a)}}i[ze]=t,i[Fe]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)i.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=i;e:switch(uh(i,a,r),a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&sl(t)}}return ul(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&sl(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=K.current,wa(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=ca))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[ze]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ch(e.nodeValue,n)))||fa(t,!0)}else(e=gh(e).createTextNode(r))[ze]=t,t.stateNode=e}return ul(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=wa(t),null!==n){if(null===e){if(!r)throw Error(o(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(557));e[ze]=t}else va(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ul(t),e=!1}else n=ba(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Di(t),t):(Di(t),null);if(0!==(128&t.flags))throw Error(o(558))}return ul(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=wa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[ze]=t}else va(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ul(t),a=!1}else a=ba(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(Di(t),t):(Di(t),null)}return Di(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool),i=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),dl(t,t.updateQueue),ul(t),null);case 4:return Z(),null===e&&Xd(t.stateNode.containerInfo),ul(t),null;case 10:return Na(t.type),ul(t),null;case 19:if(H(Wi),null===(r=t.memoizedState))return ul(t),null;if(a=0!==(128&t.flags),null===(i=r.rendering))if(a)hl(r,!1);else{if(0!==_c||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=Hi(e))){for(t.flags|=128,hl(r,!1),e=i.updateQueue,t.updateQueue=e,dl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return z(Wi,1&Wi.current|2),ha&&aa(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Oc&&(t.flags|=128,a=!0,hl(r,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=Hi(i))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,dl(t,e),hl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!ha)return ul(t),null}else 2*le()-r.renderingStartTime>Oc&&536870912!==n&&(t.flags|=128,a=!0,hl(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Wi.current,z(Wi,a?1&n|2:1&n),ha&&aa(t,r.treeForkCount),e):(ul(t),null);case 22:case 23:return Di(t),Bi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(ul(t),6&t.subtreeFlags&&(t.flags|=8192)):ul(t),null!==(n=t.updateQueue)&&dl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&H(Ya),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Na(Da),ul(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function ml(e,t){switch(sa(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Na(Da),Z(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 31:if(null!==t.memoizedState){if(Di(t),null===t.alternate)throw Error(o(340));va()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Di(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));va()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return H(Wi),null;case 4:return Z(),null;case 10:return Na(t.type),null;case 22:case 23:return Di(t),Bi(),null!==e&&H(Ya),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Na(Da),null;default:return null}}function fl(e,t){switch(sa(t),t.tag){case 3:Na(Da),Z();break;case 26:case 27:case 5:Q(t);break;case 4:Z();break;case 31:null!==t.memoizedState&&Di(t);break;case 13:Di(t);break;case 19:H(Wi);break;case 10:Na(t.type);break;case 22:case 23:Di(t),Bi(),null!==e&&H(Ya);break;case 24:Na(Da)}}function gl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var i=n.create,o=n.inst;r=i(),o.destroy=r}n=n.next}while(n!==a)}}catch(s){_d(t,t.return,s)}}function yl(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var i=a.next;r=i;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,a=t;var l=n,c=s;try{c()}catch(d){_d(a,l,d)}}}r=r.next}while(r!==i)}}catch(d){_d(t,t.return,d)}}function wl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ni(t,n)}catch(r){_d(e,e.return,r)}}}function vl(e,t,n){n.props=_s(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){_d(e,t,r)}}function bl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(a){_d(e,t,a)}}function xl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(a){_d(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){_d(e,t,i)}else n.current=null}function kl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){_d(e,e.return,a)}}function _l(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,s=null,l=null,c=null,d=null,h=null;for(m in n){var u=n[m];if(n.hasOwnProperty(m)&&null!=u)switch(m){case"checked":case"value":break;case"defaultValue":c=u;default:r.hasOwnProperty(m)||dh(e,t,m,null,r,u)}}for(var p in r){var m=r[p];if(u=n[p],r.hasOwnProperty(p)&&(null!=m||null!=u))switch(p){case"type":i=m;break;case"name":a=m;break;case"checked":d=m;break;case"defaultChecked":h=m;break;case"value":s=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(o(137,t));break;default:m!==u&&dh(e,t,p,m,r,u)}}return void wt(e,s,l,c,d,h,i,a);case"select":for(i in m=s=l=p=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(i)||dh(e,t,i,null,r,c)}for(a in r)if(i=r[a],c=n[a],r.hasOwnProperty(a)&&(null!=i||null!=c))switch(a){case"value":p=i;break;case"defaultValue":l=i;break;case"multiple":s=i;default:i!==c&&dh(e,t,a,i,r,c)}return t=l,n=s,r=m,void(null!=p?xt(e,!!n,p,!1):!!r!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=p=null,n)if(a=n[l],n.hasOwnProperty(l)&&null!=a&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:dh(e,t,l,null,r,a)}for(s in r)if(a=r[s],i=n[s],r.hasOwnProperty(s)&&(null!=a||null!=i))switch(s){case"value":p=a;break;case"defaultValue":m=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(o(91));break;default:a!==i&&dh(e,t,s,a,r,i)}return void kt(e,p,m);case"option":for(var f in n)if(p=n[f],n.hasOwnProperty(f)&&null!=p&&!r.hasOwnProperty(f))if("selected"===f)e.selected=!1;else dh(e,t,f,null,r,p);for(c in r)if(p=r[c],m=n[c],r.hasOwnProperty(c)&&p!==m&&(null!=p||null!=m))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else dh(e,t,c,p,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&dh(e,t,g,null,r,p);for(d in r)if(p=r[d],m=n[d],r.hasOwnProperty(d)&&p!==m&&(null!=p||null!=m))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:dh(e,t,d,p,r,m)}return;default:if(At(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!r.hasOwnProperty(y)&&hh(e,t,y,void 0,r,p);for(h in r)p=r[h],m=n[h],!r.hasOwnProperty(h)||p===m||void 0===p&&void 0===m||hh(e,t,h,p,r,m);return}}for(var w in n)p=n[w],n.hasOwnProperty(w)&&null!=p&&!r.hasOwnProperty(w)&&dh(e,t,w,null,r,p);for(u in r)p=r[u],m=n[u],!r.hasOwnProperty(u)||p===m||null==p&&null==m||dh(e,t,u,p,r,m)}(r,e.type,n,t),r[Fe]=t}catch(a){_d(e,e.return,a)}}function Tl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Nh(e.type)||4===e.tag}function Sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Tl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Nh(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Nl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Pt));else if(4!==r&&(27===r&&Nh(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Nl(e,t,n),e=e.sibling;null!==e;)Nl(e,t,n),e=e.sibling}function Cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Nh(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function Al(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);uh(t,r,n),t[ze]=e,t[Fe]=n}catch(i){_d(e,e.return,i)}}var jl=!1,El=!1,Bl=!1,Pl="function"===typeof WeakSet?WeakSet:Set,Il=null;function Ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Vl(e,n),4&r&&gl(5,n);break;case 1:if(Vl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){_d(n,n.return,o)}else{var a=_s(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){_d(n,n.return,s)}}64&r&&wl(n),512&r&&bl(n,n.return);break;case 3:if(Vl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ni(e,t)}catch(o){_d(n,n.return,o)}}break;case 27:null===t&&4&r&&Al(n);case 26:case 5:Vl(e,n),null===t&&4&r&&kl(n),512&r&&bl(n,n.return);break;case 12:Vl(e,n);break;case 31:Vl(e,n),4&r&&Hl(e,n);break;case 13:Vl(e,n),4&r&&zl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Cd.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||jl)){t=null!==t&&null!==t.memoizedState||El,a=jl;var i=El;jl=r,(El=t)&&!i?Jl(e,n,0!==(8772&n.subtreeFlags)):Vl(e,n),jl=a,El=i}break;case 30:break;default:Vl(e,n)}}function Ll(e){var t=e.alternate;null!==t&&(e.alternate=null,Ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Rl=null,Ml=!1;function Dl(e,t,n){for(n=n.child;null!==n;)Wl(e,t,n),n=n.sibling}function Wl(e,t,n){if(we&&"function"===typeof we.onCommitFiberUnmount)try{we.onCommitFiberUnmount(ye,n)}catch(i){}switch(n.tag){case 26:El||xl(n,t),Dl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:El||xl(n,t);var r=Rl,a=Ml;Nh(n.type)&&(Rl=n.stateNode,Ml=!1),Dl(e,t,n),Dh(n.stateNode),Rl=r,Ml=a;break;case 5:El||xl(n,t);case 6:if(r=Rl,a=Ml,Rl=null,Dl(e,t,n),Ml=a,null!==(Rl=r))if(Ml)try{(9===Rl.nodeType?Rl.body:"HTML"===Rl.nodeName?Rl.ownerDocument.body:Rl).removeChild(n.stateNode)}catch(o){_d(n,t,o)}else try{Rl.removeChild(n.stateNode)}catch(o){_d(n,t,o)}break;case 18:null!==Rl&&(Ml?(Ch(9===(e=Rl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Uu(e)):Ch(Rl,n.stateNode));break;case 4:r=Rl,a=Ml,Rl=n.stateNode.containerInfo,Ml=!0,Dl(e,t,n),Rl=r,Ml=a;break;case 0:case 11:case 14:case 15:yl(2,n,t),El||yl(4,n,t),Dl(e,t,n);break;case 1:El||(xl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&vl(n,t,r)),Dl(e,t,n);break;case 21:Dl(e,t,n);break;case 22:El=(r=El)||null!==n.memoizedState,Dl(e,t,n),El=r;break;default:Dl(e,t,n)}}function Hl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Uu(e)}catch(n){_d(t,t.return,n)}}}function zl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Uu(e)}catch(n){_d(t,t.return,n)}}function Fl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Pl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Pl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Ad.bind(null,e,t);t.then(r,r)}})}function ql(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(Nh(l.type)){Rl=l.stateNode,Ml=!1;break e}break;case 5:Rl=l.stateNode,Ml=!1;break e;case 3:case 4:Rl=l.stateNode.containerInfo,Ml=!0;break e}l=l.return}if(null===Rl)throw Error(o(160));Wl(i,s,a),Rl=null,Ml=!1,null!==(i=a.alternate)&&(i.return=null),a.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Gl(t,e),t=t.sibling}var Ul=null;function Gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ql(t,e),Kl(e),4&r&&(yl(3,e,e.return),gl(3,e),yl(5,e,e.return));break;case 1:ql(t,e),Kl(e),512&r&&(El||null===n||xl(n,n.return)),64&r&&jl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var a=Ul;if(ql(t,e),Kl(e),512&r&&(El||null===n||xl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(i=a.getElementsByTagName("title")[0])||i[Ve]||i[ze]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=a.createElement(r),a.head.insertBefore(i,a.querySelector("head > title"))),uh(i,r,n),i[ze]=e,et(i),r=i;break e;case"link":var s=nu("link","href",a).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((i=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}uh(i=a.createElement(r),r,n),a.head.appendChild(i);break;case"meta":if(s=nu("meta","content",a).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((i=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}uh(i=a.createElement(r),r,n),a.head.appendChild(i);break;default:throw Error(o(468,r))}i[ze]=e,et(i),r=i}e.stateNode=r}else ru(a,e.type,e.stateNode);else e.stateNode=Qh(a,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?ru(a,e.type,e.stateNode):Qh(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&_l(e,e.memoizedProps,n.memoizedProps)}break;case 27:ql(t,e),Kl(e),512&r&&(El||null===n||xl(n,n.return)),null!==n&&4&r&&_l(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ql(t,e),Kl(e),512&r&&(El||null===n||xl(n,n.return)),32&e.flags){a=e.stateNode;try{Tt(a,"")}catch(f){_d(e,e.return,f)}}4&r&&null!=e.stateNode&&_l(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(Bl=!0);break;case 6:if(ql(t,e),Kl(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(f){_d(e,e.return,f)}}break;case 3:if(tu=null,a=Ul,Ul=zh(t.containerInfo),ql(t,e),Ul=a,Kl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Uu(t.containerInfo)}catch(f){_d(e,e.return,f)}Bl&&(Bl=!1,Yl(e));break;case 4:r=Ul,Ul=zh(e.stateNode.containerInfo),ql(t,e),Kl(e),Ul=r;break;case 12:default:ql(t,e),Kl(e);break;case 31:case 19:ql(t,e),Kl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Fl(e,r)));break;case 13:ql(t,e),Kl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Pc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Fl(e,r)));break;case 22:a=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,d=jl,h=El;if(jl=d||a,El=h||c,ql(t,e),El=h,jl=d,Kl(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||c||jl||El||Zl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,a)"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=c.stateNode;var u=c.memoizedProps.style,p=void 0!==u&&null!==u&&u.hasOwnProperty("display")?u.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(f){_d(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(f){_d(c,c.return,f)}}}else if(18===t.tag){if(null===n){c=t;try{var m=c.stateNode;a?Ah(m,!0):Ah(c.stateNode,!1)}catch(f){_d(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Fl(e,n))));case 30:case 21:}}function Kl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(Tl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var a=n.stateNode;Cl(e,Sl(e),a);break;case 5:var i=n.stateNode;32&n.flags&&(Tt(i,""),n.flags&=-33),Cl(e,Sl(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;Nl(e,Sl(e),s);break;default:throw Error(o(161))}}catch(l){_d(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Yl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Yl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Vl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function Zl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Zl(t);break;case 1:xl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&vl(t,t.return,n),Zl(t);break;case 27:Dh(t.stateNode);case 26:case 5:xl(t,t.return),Zl(t);break;case 22:null===t.memoizedState&&Zl(t);break;default:Zl(t)}e=e.sibling}}function Jl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:Jl(a,i,n),gl(4,i);break;case 1:if(Jl(a,i,n),"function"===typeof(a=(r=i).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){_d(r,r.return,c)}if(null!==(a=(r=i).updateQueue)){var s=r.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)Si(l[a],s)}catch(c){_d(r,r.return,c)}}n&&64&o&&wl(i),bl(i,i.return);break;case 27:Al(i);case 26:case 5:Jl(a,i,n),n&&null===r&&4&o&&kl(i),bl(i,i.return);break;case 12:Jl(a,i,n);break;case 31:Jl(a,i,n),n&&4&o&&Hl(a,i);break;case 13:Jl(a,i,n),n&&4&o&&zl(a,i);break;case 22:null===i.memoizedState&&Jl(a,i,n),bl(i,i.return);break;case 30:break;default:Jl(a,i,n)}t=t.sibling}}function Ql(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ha(n))}function $l(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ha(e))}function Xl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Xl(e,t,n,r),2048&a&&gl(9,t);break;case 1:case 31:case 13:default:Xl(e,t,n,r);break;case 3:Xl(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ha(e)));break;case 12:if(2048&a){Xl(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,s=i.onPostCommit;"function"===typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){_d(t,t.return,l)}}else Xl(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,null!==t.memoizedState?2&i._visibility?Xl(e,t,n,r):nc(e,t):2&i._visibility?Xl(e,t,n,r):(i._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&a&&Ql(o,t);break;case 24:Xl(e,t,n,r),2048&a&&$l(t.alternate,t)}}function tc(e,t,n,r,a){for(a=a&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,o=t,s=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:tc(i,o,s,l,a),gl(8,o);break;case 23:break;case 22:var d=o.stateNode;null!==o.memoizedState?2&d._visibility?tc(i,o,s,l,a):nc(i,o):(d._visibility|=2,tc(i,o,s,l,a)),a&&2048&c&&Ql(o.alternate,o);break;case 24:tc(i,o,s,l,a),a&&2048&c&&$l(o.alternate,o);break;default:tc(i,o,s,l,a)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:nc(n,r),2048&a&&Ql(r.alternate,r);break;case 24:nc(n,r),2048&a&&$l(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function ac(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)ic(e,t,n),e=e.sibling}function ic(e,t,n){switch(e.tag){case 26:ac(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var a=Kh(r.href),i=t.querySelector(Yh(a));if(i)return null!==(t=i._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ou.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void et(i);i=t.ownerDocument||t,r=Vh(r),(a=Wh.get(a))&&Xh(r,a),et(i=i.createElement("link"));var o=i;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),uh(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ou.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Ul,e.memoizedState,e.memoizedProps);break;case 5:default:ac(e,t,n);break;case 3:case 4:var r=Ul;Ul=zh(e.stateNode.containerInfo),ac(e,t,n),Ul=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,ac(e,t,n),rc=r):ac(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function sc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Il=r,dc(r,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:sc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:sc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):sc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Il=r,dc(r,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function dc(e,t){for(;null!==Il;){var n=Il;switch(n.tag){case 0:case 11:case 15:yl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ha(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Il=r;else e:for(n=e;null!==Il;){var a=(r=Il).sibling,i=r.return;if(Ll(r),r===n){Il=null;break e}if(null!==a){a.return=i,Il=a;break e}Il=i}}}var hc={getCacheForType:function(e){var t=Pa(Da),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Pa(Da).controller.signal}},uc="function"===typeof WeakMap?WeakMap:Map,pc=0,mc=null,fc=null,gc=0,yc=0,wc=null,vc=!1,bc=!1,xc=!1,kc=0,_c=0,Tc=0,Sc=0,Nc=0,Cc=0,Ac=0,jc=null,Ec=null,Bc=!1,Pc=0,Ic=0,Oc=1/0,Lc=null,Rc=null,Mc=0,Dc=null,Wc=null,Hc=0,zc=0,Fc=null,qc=null,Uc=0,Gc=null;function Kc(){return 0!==(2&pc)&&0!==gc?gc&-gc:null!==O.T?Fd():De()}function Yc(){if(0===Cc)if(0===(536870912&gc)||ha){var e=Te;0===(3932160&(Te<<=1))&&(Te=262144),Cc=e}else Cc=536870912;return null!==(e=Pi.current)&&(e.flags|=32),Cc}function Vc(e,t,n){(e!==mc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(td(e,0),$c(e,gc,Cc,!1)),Pe(e,n),0!==(2&pc)&&e===mc||(e===mc&&(0===(2&pc)&&(Sc|=n),4===_c&&$c(e,gc,Cc,!1)),Ld(e))}function Zc(e,t,n){if(0!==(6&pc))throw Error(o(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ae(e,t),a=r?function(e,t){var n=pc;pc|=2;var r=ad(),a=id();mc!==e||gc!==t?(Lc=null,Oc=le()+500,td(e,t)):bc=Ae(e,t);e:for(;;)try{if(0!==yc&&null!==fc){t=fc;var i=wc;t:switch(yc){case 1:yc=0,wc=null,ud(e,t,i,1);break;case 2:case 9:if(ti(i)){yc=0,wc=null,hd(t);break}t=function(){2!==yc&&9!==yc||mc!==e||(yc=7),Ld(e)},i.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:ti(i)?(yc=0,wc=null,hd(t)):(yc=0,wc=null,ud(e,t,i,7));break;case 5:var s=null;switch(fc.tag){case 26:s=fc.memoizedState;case 5:case 27:var l=fc;if(s?au(s):l.stateNode.complete){yc=0,wc=null;var c=l.sibling;if(null!==c)fc=c;else{var d=l.return;null!==d?(fc=d,pd(d)):fc=null}break t}}yc=0,wc=null,ud(e,t,i,5);break;case 6:yc=0,wc=null,ud(e,t,i,6);break;case 8:ed(),_c=6;break e;default:throw Error(o(462))}}cd();break}catch(h){nd(e,h)}return Ta=_a=null,O.H=r,O.A=a,pc=n,null!==fc?0:(mc=null,gc=0,Er(),_c)}(e,t):sd(e,t,!0),i=r;;){if(0===a){bc&&!r&&$c(e,t,0,!1);break}if(n=e.current.alternate,!i||Qc(n)){if(2===a){if(i=t,e.errorRecoveryDisabledLanes&i)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;a=jc;var c=l.current.memoizedState.isDehydrated;if(c&&(td(l,s).flags|=256),2!==(s=sd(l,s,!1))){if(xc&&!c){l.errorRecoveryDisabledLanes|=i,Sc|=i,a=4;break e}i=Ec,Ec=a,null!==i&&(null===Ec?Ec=i:Ec.push.apply(Ec,i))}a=s}if(i=!1,2!==a)continue}}if(1===a){td(e,0),$c(e,t,0,!0);break}e:{switch(r=e,i=a){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:$c(r,t,Cc,!vc);break e;case 2:Ec=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(a=Pc+300-le())){if($c(r,t,Cc,!vc),0!==Ce(r,0,!0))break e;Hc=t,r.timeoutHandle=xh(Jc.bind(null,r,n,Ec,Lc,Bc,t,Cc,Sc,Ac,vc,i,"Throttled",-0,0),a)}else Jc(r,n,Ec,Lc,Bc,t,Cc,Sc,Ac,vc,i,null,-0,0)}break}a=sd(e,t,!1),i=!1}Ld(e)}function Jc(e,t,n,r,a,i,o,s,l,c,d,h,u,p){if(e.timeoutHandle=-1,8192&(h=t.subtreeFlags)||16785408===(16785408&h)){ic(t,i,h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt});var m=(62914560&i)===i?Pc-le():(4194048&i)===i?Ic-le():0;if(null!==(m=function(e,t){return e.stylesheets&&0===e.count&&lu(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&lu(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===iu&&(iu=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var a=n[r],i=a.transferSize,o=a.initiatorType,s=a.duration;if(i&&s&&ph(o)){for(o=0,s=a.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>s)break;var d=l.transferSize,h=l.initiatorType;d&&ph(h)&&(o+=d*((l=l.responseEnd)<s?1:(s-c)/(l-c)))}if(--r,t+=8*(i+o)/(a.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var a=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lu(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>iu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(a)}}:null}(h,m)))return Hc=i,e.cancelPendingCommit=m(fd.bind(null,e,t,i,n,r,a,o,s,l,d,h,null,u,p)),void $c(e,i,o,!c)}fd(e,t,i,n,r,a,o,s,l)}function Qc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!$n(i(),a))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $c(e,t,n,r){t&=~Nc,t&=~Sc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var i=31-be(a),o=1<<i;r[i]=-1,a&=~o}0!==n&&Ie(e,n,t)}function Xc(){return 0!==(6&pc)||(Rd(0,!1),!1)}function ed(){if(null!==fc){if(0===yc)var e=fc.return;else Ta=_a=null,oo(e=fc),si=null,li=0,e=fc;for(;null!==e;)fl(e.alternate,e),e=e.return;fc=null}}function td(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,kh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Hc=0,ed(),mc=e,fc=n=Hr(e.current,null),gc=t,yc=0,wc=null,vc=!1,bc=Ae(e,t),xc=!1,Ac=Cc=Nc=Sc=Tc=_c=0,Ec=jc=null,Bc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-be(r),i=1<<a;t|=e[a],r&=~i}return kc=t,Er(),n}function nd(e,t){Fi=null,O.H=fs,t===Qa||t===Xa?(t=ii(),yc=3):t===$a?(t=ii(),yc=4):yc=t===Ps?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,wc=t,null===fc&&(_c=1,Cs(e,Vr(t,e.current)))}function rd(){var e=Pi.current;return null===e||((4194048&gc)===gc?null===Ii:((62914560&gc)===gc||0!==(536870912&gc))&&e===Ii)}function ad(){var e=O.H;return O.H=fs,null===e?fs:e}function id(){var e=O.A;return O.A=hc,e}function od(){_c=4,vc||(4194048&gc)!==gc&&null!==Pi.current||(bc=!0),0===(134217727&Tc)&&0===(134217727&Sc)||null===mc||$c(mc,gc,Cc,!1)}function sd(e,t,n){var r=pc;pc|=2;var a=ad(),i=id();mc===e&&gc===t||(Lc=null,td(e,t)),t=!1;var o=_c;e:for(;;)try{if(0!==yc&&null!==fc){var s=fc,l=wc;switch(yc){case 8:ed(),o=6;break e;case 3:case 2:case 9:case 6:null===Pi.current&&(t=!0);var c=yc;if(yc=0,wc=null,ud(e,s,l,c),n&&bc){o=0;break e}break;default:c=yc,yc=0,wc=null,ud(e,s,l,c)}}ld(),o=_c;break}catch(d){nd(e,d)}return t&&e.shellSuspendCounter++,Ta=_a=null,pc=r,O.H=a,O.A=i,null===fc&&(mc=null,gc=0,Er()),o}function ld(){for(;null!==fc;)dd(fc)}function cd(){for(;null!==fc&&!oe();)dd(fc)}function dd(e){var t=ol(e.alternate,e,kc);e.memoizedProps=e.pendingProps,null===t?pd(e):fc=t}function hd(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Gs(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Gs(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:oo(t);default:fl(n,t),t=ol(n,t=fc=zr(t,kc),kc)}e.memoizedProps=e.pendingProps,null===t?pd(e):fc=t}function ud(e,t,n,r){Ta=_a=null,oo(t),si=null,li=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&ja(t,n,a,!0),null!==(n=Pi.current)){switch(n.tag){case 31:case 13:return null===Ii?od():null===n.alternate&&0===_c&&(_c=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Td(e,r,a)),!1;case 22:return n.flags|=65536,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Td(e,r,a)),!1}throw Error(o(435,n.tag))}return Td(e,r,a),od(),!1}if(ha)return null!==(t=Pi.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==ma&&xa(Vr(e=Error(o(422),{cause:r}),n))):(r!==ma&&xa(Vr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=Vr(r,n),xi(e,a=js(e.stateNode,r,a)),4!==_c&&(_c=2)),!1;var i=Error(o(520),{cause:r});if(i=Vr(i,n),null===jc?jc=[i]:jc.push(i),4!==_c&&(_c=2),null===t)return!0;r=Vr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,xi(n,e=js(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Rc||!Rc.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,Bs(a=Es(a),e,n,r),xi(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,gc))return _c=1,Cs(e,Vr(n,e.current)),void(fc=null)}catch(i){if(null!==a)throw fc=a,i;return _c=1,Cs(e,Vr(n,e.current)),void(fc=null)}32768&t.flags?(ha||1===r?e=!0:bc||0!==(536870912&gc)?e=!1:(vc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Pi.current)&&13===r.tag&&(r.flags|=16384))),md(t,e)):pd(t)}function pd(e){var t=e;do{if(0!==(32768&t.flags))return void md(t,vc);e=t.return;var n=pl(t.alternate,t,kc);if(null!==n)return void(fc=n);if(null!==(t=t.sibling))return void(fc=t);fc=t=e}while(null!==t);0===_c&&(_c=5)}function md(e,t){do{var n=ml(e.alternate,e);if(null!==n)return n.flags&=32767,void(fc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(fc=e);fc=e=n}while(null!==e);_c=6,fc=null}function fd(e,t,n,r,a,i,s,l,c){e.cancelPendingCommit=null;do{bd()}while(0!==Mc);if(0!==(6&pc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,a,i){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var d=31-be(n),h=1<<d;s[d]=0,l[d]=-1;var u=c[d];if(null!==u)for(c[d]=null,d=0;d<u.length;d++){var p=u[d];null!==p&&(p.lane&=-536870913)}n&=~h}0!==r&&Ie(e,r,0),0!==i&&0===a&&0!==e.tag&&(e.suspendedLanes|=i&~(o&~t))}(e,n,i|=jr,s,l,c),e===mc&&(fc=mc=null,gc=0),Wc=t,Dc=e,Hc=n,zc=i,Fc=a,qc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ae(ue,function(){return xd(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,a=L.p,L.p=2,s=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,mh=vu,ar(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var s=0,l=-1,c=-1,d=0,h=0,u=e,p=null;t:for(;;){for(var m;u!==n||0!==a&&3!==u.nodeType||(l=s+a),u!==i||0!==r&&3!==u.nodeType||(c=s+r),3===u.nodeType&&(s+=u.nodeValue.length),null!==(m=u.firstChild);)p=u,u=m;for(;;){if(u===e)break t;if(p===n&&++d===a&&(l=s),p===i&&++h===r&&(c=s),null!==(m=u.nextSibling))break;p=(u=p).parentNode}u=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(fh={focusedElem:e,selectionRange:n},vu=!1,Il=t;null!==Il;)if(e=(t=Il).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Il=e;else for(;null!==Il;){switch(i=(t=Il).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(a=e[n]).ref.impl=a.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,a=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var f=_s(n.type,a);e=r.getSnapshotBeforeUpdate(f,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){_d(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))jh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Il=e;break}Il=t.return}}(e,t)}finally{pc=s,L.p=a,O.T=r}}Mc=1,gd(),yd(),wd()}}function gd(){if(1===Mc){Mc=0;var e=Dc,t=Wc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var a=pc;pc|=4;try{Gl(t,e);var i=fh,o=rr(e.containerInfo),s=i.focusedElem,l=i.selectionRange;if(o!==s&&s&&s.ownerDocument&&nr(s.ownerDocument.documentElement,s)){if(null!==l&&ar(s)){var c=l.start,d=l.end;if(void 0===d&&(d=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(d,s.value.length);else{var h=s.ownerDocument||document,u=h&&h.defaultView||window;if(u.getSelection){var p=u.getSelection(),m=s.textContent.length,f=Math.min(l.start,m),g=void 0===l.end?f:Math.min(l.end,m);!p.extend&&f>g&&(o=g,g=f,f=o);var y=tr(s,f),w=tr(s,g);if(y&&w&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==w.node||p.focusOffset!==w.offset)){var v=h.createRange();v.setStart(y.node,y.offset),p.removeAllRanges(),f>g?(p.addRange(v),p.extend(w.node,w.offset)):(v.setEnd(w.node,w.offset),p.addRange(v))}}}}for(h=[],p=s;p=p.parentNode;)1===p.nodeType&&h.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<h.length;s++){var b=h[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}vu=!!mh,fh=mh=null}finally{pc=a,L.p=r,O.T=n}}e.current=t,Mc=2}}function yd(){if(2===Mc){Mc=0;var e=Dc,t=Wc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var a=pc;pc|=4;try{Ol(e,t.alternate,t)}finally{pc=a,L.p=r,O.T=n}}Mc=3}}function wd(){if(4===Mc||3===Mc){Mc=0,se();var e=Dc,t=Wc,n=Hc,r=qc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Mc=5:(Mc=0,Wc=Dc=null,vd(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Rc=null),Me(n),t=t.stateNode,we&&"function"===typeof we.onCommitFiberRoot)try{we.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,a=L.p,L.p=2,O.T=null;try{for(var i=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];i(s.value,{componentStack:s.stack})}}finally{O.T=t,L.p=a}}0!==(3&Hc)&&bd(),Ld(e),a=e.pendingLanes,0!==(261930&n)&&0!==(42&a)?e===Gc?Uc++:(Uc=0,Gc=e):Uc=0,Rd(0,!1)}}function vd(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ha(t)))}function bd(){return gd(),yd(),wd(),xd()}function xd(){if(5!==Mc)return!1;var e=Dc,t=zc;zc=0;var n=Me(Hc),r=O.T,a=L.p;try{L.p=32>n?32:n,O.T=null,n=Fc,Fc=null;var i=Dc,s=Hc;if(Mc=0,Wc=Dc=null,Hc=0,0!==(6&pc))throw Error(o(331));var l=pc;if(pc|=4,lc(i.current),ec(i,i.current,s,n),pc=l,Rd(0,!1),we&&"function"===typeof we.onPostCommitFiberRoot)try{we.onPostCommitFiberRoot(ye,i)}catch(c){}return!0}finally{L.p=a,O.T=r,vd(e,t)}}function kd(e,t,n){t=Vr(n,t),null!==(e=vi(e,t=js(e.stateNode,t,2),2))&&(Pe(e,2),Ld(e))}function _d(e,t,n){if(3===e.tag)kd(e,e,n);else for(;null!==t;){if(3===t.tag){kd(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Rc||!Rc.has(r))){e=Vr(n,e),null!==(r=vi(t,n=Es(2),2))&&(Bs(n,r,t,e),Pe(r,2),Ld(r));break}}t=t.return}}function Td(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new uc;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(xc=!0,a.add(n),e=Sd.bind(null,e,t,n),t.then(e,e))}function Sd(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,mc===e&&(gc&n)===n&&(4===_c||3===_c&&(62914560&gc)===gc&&300>le()-Pc?0===(2&pc)&&td(e,0):Nc|=n,Ac===gc&&(Ac=0)),Ld(e)}function Nd(e,t){0===t&&(t=Ee()),null!==(e=Ir(e,t))&&(Pe(e,t),Ld(e))}function Cd(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nd(e,n)}function Ad(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),Nd(e,n)}var jd=null,Ed=null,Bd=!1,Pd=!1,Id=!1,Od=0;function Ld(e){e!==Ed&&null===e.next&&(null===Ed?jd=Ed=e:Ed=Ed.next=e),Pd=!0,Bd||(Bd=!0,Th(function(){0!==(6&pc)?ae(de,Md):Dd()}))}function Rd(e,t){if(!Id&&Pd){Id=!0;do{for(var n=!1,r=jd;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var i=0;else{var o=r.suspendedLanes,s=r.pingedLanes;i=(1<<31-be(42|e)+1)-1,i=201326741&(i&=a&~(o&~s))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,zd(r,i))}else i=gc,0===(3&(i=Ce(r,r===mc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ae(r,i)||(n=!0,zd(r,i));r=r.next}}while(n);Id=!1}}function Md(){Dd()}function Dd(){Pd=Bd=!1;var e=0;0!==Od&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==bh&&(bh=e,!0);return bh=null,!1}()&&(e=Od);for(var t=le(),n=null,r=jd;null!==r;){var a=r.next,i=Wd(r,t);0===i?(r.next=null,null===n?jd=a:n.next=a,null===a&&(Ed=n)):(n=r,(0!==e||0!==(3&i))&&(Pd=!0)),r=a}0!==Mc&&5!==Mc||Rd(e,!1),0!==Od&&(Od=0)}function Wd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var o=31-be(i),s=1<<o,l=a[o];-1===l?0!==(s&n)&&0===(s&r)||(a[o]=je(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}if(n=gc,n=Ce(e,e===(t=mc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ae(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Me(n)){case 2:case 8:n=he;break;case 32:default:n=ue;break;case 268435456:n=me}return r=Hd.bind(null,e),n=ae(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function Hd(e,t){if(0!==Mc&&5!==Mc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bd()&&e.callbackNode!==n)return null;var r=gc;return 0===(r=Ce(e,e===mc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Zc(e,r,t),Wd(e,le()),null!=e.callbackNode&&e.callbackNode===n?Hd.bind(null,e):null)}function zd(e,t){if(bd())return null;Zc(e,t,!0)}function Fd(){if(0===Od){var e=qa;0===e&&(e=_e,0===(261888&(_e<<=1))&&(_e=256)),Od=e}return Od}function qd(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Bt(""+e)}function Ud(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Gd=0;Gd<Tr.length;Gd++){var Kd=Tr[Gd];Sr(Kd.toLowerCase(),"on"+(Kd[0].toUpperCase()+Kd.slice(1)))}Sr(gr,"onAnimationEnd"),Sr(yr,"onAnimationIteration"),Sr(wr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(vr,"onTransitionRun"),Sr(br,"onTransitionStart"),Sr(xr,"onTransitionCancel"),Sr(kr,"onTransitionEnd"),at("onMouseEnter",["mouseout","mouseover"]),at("onMouseLeave",["mouseout","mouseover"]),at("onPointerEnter",["pointerout","pointerover"]),at("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yd));function Zd(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;i=s,a.currentTarget=c;try{i(a)}catch(d){Nr(d)}a.currentTarget=null,i=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,c=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;i=s,a.currentTarget=c;try{i(a)}catch(d){Nr(d)}a.currentTarget=null,i=l}}}}function Jd(e,t){var n=t[Ue];void 0===n&&(n=t[Ue]=new Set);var r=e+"__bubble";n.has(r)||(eh(t,e,2,!1),n.add(r))}function Qd(e,t,n){var r=0;t&&(r|=4),eh(n,e,r,t)}var $d="_reactListening"+Math.random().toString(36).slice(2);function Xd(e){if(!e[$d]){e[$d]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Vd.has(t)||Qd(t,!1,e),Qd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$d]||(t[$d]=!0,Qd("selectionchange",!1,t))}}function eh(e,t,n,r){switch(Nu(t)){case 2:var a=bu;break;case 8:a=xu;break;default:a=ku}n=a.bind(null,t,n,e),a=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function th(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===a)return;o=o.return}for(;null!==s;){if(null===(o=Je(s)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=i=o;continue e}s=s.parentNode}}r=r.return}Wt(function(){var r=i,a=Ot(n),o=[];e:{var s=_r.get(e);if(void 0!==s){var c=nn,d=e;switch(e){case"keypress":if(0===Vt(n))break e;case"keydown":case"keyup":c=wn;break;case"focusin":d="focus",c=cn;break;case"focusout":d="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case gr:case yr:case wr:c=dn;break;case kr:c=xn;break;case"scroll":case"scrollend":c=an;break;case"wheel":c=kn;break;case"copy":case"cut":case"paste":c=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=vn;break;case"toggle":case"beforetoggle":c=_n}var h=0!==(4&t),u=!h&&("scroll"===e||"scrollend"===e),p=h?null!==s?s+"Capture":null:s;h=[];for(var m,f=r;null!==f;){var g=f;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===p||null!=(g=Ht(f,p))&&h.push(nh(f,g,m)),u)break;f=f.return}0<h.length&&(s=new c(s,d,null,n,a),o.push({event:s,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===It||!(d=n.relatedTarget||n.fromElement)||!Je(d)&&!d[qe])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(d=(d=n.relatedTarget||n.toElement)?Je(d):null)&&(u=l(d),h=d.tag,d!==u||5!==h&&27!==h&&6!==h)&&(d=null)):(c=null,d=r),c!==d)){if(h=sn,g="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(h=vn,g="onPointerLeave",p="onPointerEnter",f="pointer"),u=null==c?s:$e(c),m=null==d?s:$e(d),(s=new h(g,f+"leave",c,n,a)).target=u,s.relatedTarget=m,g=null,Je(a)===r&&((h=new h(p,f+"enter",d,n,a)).target=m,h.relatedTarget=u,g=h),u=g,c&&d)e:{for(h=ah,f=d,m=0,g=p=c;g;g=h(g))m++;g=0;for(var y=f;y;y=h(y))g++;for(;0<m-g;)p=h(p),m--;for(;0<g-m;)f=h(f),g--;for(;m--;){if(p===f||null!==f&&p===f.alternate){h=p;break e}p=h(p),f=h(f)}h=null}else h=null;null!==c&&ih(o,s,c,h,!1),null!==d&&null!==u&&ih(o,u,d,h,!0)}if("select"===(c=(s=r?$e(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var w=zn;else if(Ln(s))if(Fn)w=Qn;else{w=Zn;var v=Vn}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&At(r.elementType)&&(w=zn):w=Jn;switch(w&&(w=w(e,r))?Rn(o,w,n,a):(v&&v(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&bt(s,"number",s.value)),v=r?$e(r):window,e){case"focusin":(Ln(v)||"true"===v.contentEditable)&&(or=v,sr=r,lr=null);break;case"focusout":lr=sr=or=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,dr(o,n,a);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":dr(o,n,a)}var b;if(Sn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else In?Bn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(An&&"ko"!==n.locale&&(In||"onCompositionStart"!==x?"onCompositionEnd"===x&&In&&(b=Yt()):(Gt="value"in(Ut=a)?Ut.value:Ut.textContent,In=!0)),0<(v=rh(r,x)).length&&(x=new un(x,e,null,n,a),o.push({event:x,listeners:v}),b?x.data=b:null!==(b=Pn(n))&&(x.data=b))),(b=Cn?function(e,t){switch(e){case"compositionend":return Pn(t);case"keypress":return 32!==t.which?null:(En=!0,jn);case"textInput":return(e=t.data)===jn&&En?null:e;default:return null}}(e,n):function(e,t){if(In)return"compositionend"===e||!Sn&&Bn(e,t)?(e=Yt(),Kt=Gt=Ut=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return An&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=rh(r,"onBeforeInput")).length&&(v=new un("onBeforeInput","beforeinput",null,n,a),o.push({event:v,listeners:x}),v.data=b)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var i=qd((a[Fe]||null).action),o=r.submitter;o&&null!==(t=(t=o[Fe]||null)?qd(t.formAction):o.getAttribute("formAction"))&&(i=t,o=null);var s=new nn("action","action",null,r,a);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Od){var e=o?Ud(a,o):new FormData(a);ts(n,{pending:!0,data:e,method:a.method,action:i},null,e)}}else"function"===typeof i&&(s.preventDefault(),e=o?Ud(a,o):new FormData(a),ts(n,{pending:!0,data:e,method:a.method,action:i},i,e))},currentTarget:a}]})}}(o,e,r,n,a)}Zd(o,t)})}function nh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rh(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===i||(null!=(a=Ht(e,n))&&r.unshift(nh(e,a,i)),null!=(a=Ht(e,t))&&r.push(nh(e,a,i))),3===e.tag)return r;e=e.return}return[]}function ah(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ih(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===c||(l=c,a?null!=(c=Ht(n,i))&&o.unshift(nh(n,c,l)):a||null!=(c=Ht(n,i))&&o.push(nh(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var oh=/\r\n?/g,sh=/\u0000|\uFFFD/g;function lh(e){return("string"===typeof e?e:""+e).replace(oh,"\n").replace(sh,"")}function ch(e,t){return t=lh(t),lh(e)===t}function dh(e,t,n,r,a,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Tt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Tt(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Ct(e,r,i);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Bt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&dh(e,t,"name",a.name,a,null),dh(e,t,"formEncType",a.formEncType,a,null),dh(e,t,"formMethod",a.formMethod,a,null),dh(e,t,"formTarget",a.formTarget,a,null)):(dh(e,t,"encType",a.encType,a,null),dh(e,t,"method",a.method,a,null),dh(e,t,"target",a.target,a,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Bt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Pt);break;case"onScroll":null!=r&&Jd("scroll",e);break;case"onScrollEnd":null!=r&&Jd("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Bt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Jd("beforetoggle",e),Jd("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":dt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":dt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":dt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":dt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":dt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":dt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":dt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":dt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":dt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=jt.get(n)||n,r)}}function hh(e,t,n,r,a,i){switch(n){case"style":Ct(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Tt(e,r):("number"===typeof r||"bigint"===typeof r)&&Tt(e,""+r);break;case"onScroll":null!=r&&Jd("scroll",e);break;case"onScrollEnd":null!=r&&Jd("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Fe]||null)?i[n]:null)&&e.removeEventListener(t,i,a),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function uh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jd("error",e),Jd("load",e);var r,a=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:dh(e,t,r,s,n,null)}}return i&&dh(e,t,"srcSet",n.srcSet,n,null),void(a&&dh(e,t,"src",n.src,n,null));case"input":Jd("invalid",e);var l=r=s=i=null,c=null,d=null;for(a in n)if(n.hasOwnProperty(a)){var h=n[a];if(null!=h)switch(a){case"name":i=h;break;case"type":s=h;break;case"checked":c=h;break;case"defaultChecked":d=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:dh(e,t,a,h,n,null)}}return void vt(e,r,l,c,d,s,i,!1);case"select":for(i in Jd("invalid",e),a=s=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":a=l;default:dh(e,t,i,l,n,null)}return t=r,n=s,e.multiple=!!a,void(null!=t?xt(e,!!a,t,!1):null!=n&&xt(e,!!a,n,!0));case"textarea":for(s in Jd("invalid",e),r=i=a=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":a=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:dh(e,t,s,l,n,null)}return void _t(e,a,i,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else dh(e,t,c,a,n,null);return;case"dialog":Jd("beforetoggle",e),Jd("toggle",e),Jd("cancel",e),Jd("close",e);break;case"iframe":case"object":Jd("load",e);break;case"video":case"audio":for(a=0;a<Yd.length;a++)Jd(Yd[a],e);break;case"image":Jd("error",e),Jd("load",e);break;case"details":Jd("toggle",e);break;case"embed":case"source":case"link":Jd("error",e),Jd("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&null!=(a=n[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:dh(e,t,d,a,n,null)}return;default:if(At(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(a=n[h])&&hh(e,t,h,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(a=n[l])&&dh(e,t,l,a,n,null))}function ph(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var mh=null,fh=null;function gh(e){return 9===e.nodeType?e:e.ownerDocument}function yh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function vh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bh=null;var xh="function"===typeof setTimeout?setTimeout:void 0,kh="function"===typeof clearTimeout?clearTimeout:void 0,_h="function"===typeof Promise?Promise:void 0,Th="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof _h?function(e){return _h.resolve(null).then(e).catch(Sh)}:xh;function Sh(e){setTimeout(function(){throw e})}function Nh(e){return"head"===e}function Ch(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)||"/&"===n){if(0===r)return e.removeChild(a),void Uu(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Dh(e.ownerDocument.documentElement);else if("head"===n){Dh(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var o=i.nextSibling,s=i.nodeName;i[Ve]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=o}}else"body"===n&&Dh(e.ownerDocument.body);n=a}while(n);Uu(t)}function Ah(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function jh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":jh(n),Ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Eh(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Ih(e.nextSibling)))return null}return e}function Bh(e){return"$?"===e.data||"$~"===e.data}function Ph(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Ih(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Oh=null;function Lh(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Ih(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Rh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Mh(e,t,n){switch(t=gh(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Dh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ze(e)}var Wh=new Map,Hh=new Set;function zh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Fh=L.d;L.d={f:function(){var e=Fh.f(),t=Xc();return e||t},r:function(e){var t=Qe(e);null!==t&&5===t.tag&&"form"===t.type?rs(t):Fh.r(e)},D:function(e){Fh.D(e),Uh("dns-prefetch",e,null)},C:function(e,t){Fh.C(e,t),Uh("preconnect",e,t)},L:function(e,t,n){Fh.L(e,t,n);var r=qh;if(r&&e&&t){var a='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(a+='[imagesizes="'+yt(n.imageSizes)+'"]')):a+='[href="'+yt(e)+'"]';var i=a;switch(t){case"style":i=Kh(e);break;case"script":i=Zh(e)}Wh.has(i)||(e=p({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Wh.set(i,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Yh(i))||"script"===t&&r.querySelector(Jh(i))||(uh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Fh.m(e,t);var n=qh;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',i=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Zh(e)}if(!Wh.has(i)&&(e=p({rel:"modulepreload",href:e},t),Wh.set(i,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Jh(i)))return}uh(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Fh.X(e,t);var n=qh;if(n&&e){var r=Xe(n).hoistableScripts,a=Zh(e),i=r.get(a);i||((i=n.querySelector(Jh(a)))||(e=p({src:e,async:!0},t),(t=Wh.get(a))&&eu(e,t),et(i=n.createElement("script")),uh(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}},S:function(e,t,n){Fh.S(e,t,n);var r=qh;if(r&&e){var a=Xe(r).hoistableStyles,i=Kh(e);t=t||"default";var o=a.get(i);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Yh(i)))s.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Wh.get(i))&&Xh(e,n);var l=o=r.createElement("link");et(l),uh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,$h(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:s},a.set(i,o)}}},M:function(e,t){Fh.M(e,t);var n=qh;if(n&&e){var r=Xe(n).hoistableScripts,a=Zh(e),i=r.get(a);i||((i=n.querySelector(Jh(a)))||(e=p({src:e,async:!0,type:"module"},t),(t=Wh.get(a))&&eu(e,t),et(i=n.createElement("script")),uh(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}}};var qh="undefined"===typeof document?null:document;function Uh(e,t,n){var r=qh;if(r&&"string"===typeof t&&t){var a=yt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof n&&(a+='[crossorigin="'+n+'"]'),Hh.has(a)||(Hh.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(uh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Gh(e,t,n,r){var a,i,s,l,c=(c=K.current)?zh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Kh(n.href),(r=(n=Xe(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Kh(n.href);var d=Xe(c).hoistableStyles,h=d.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,h),(d=c.querySelector(Yh(e)))&&!d._p&&(h.instance=d,h.state.loading=5),Wh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Wh.set(e,n),d||(a=c,i=e,s=n,l=h.state,a.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=a.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),uh(i,"link",s),et(i),a.head.appendChild(i))))),t&&null===r)throw Error(o(528,""));return h}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Zh(n),(r=(n=Xe(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Kh(e){return'href="'+yt(e)+'"'}function Yh(e){return'link[rel="stylesheet"]['+e+"]"}function Vh(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Zh(e){return'[src="'+yt(e)+'"]'}function Jh(e){return"script[async]"+e}function Qh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var a=p({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),uh(r,"style",a),$h(r,n.precedence,e),t.instance=r;case"stylesheet":a=Kh(n.href);var i=e.querySelector(Yh(a));if(i)return t.state.loading|=4,t.instance=i,et(i),i;r=Vh(n),(a=Wh.get(a))&&Xh(r,a),et(i=(e.ownerDocument||e).createElement("link"));var s=i;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),uh(i,"link",r),t.state.loading|=4,$h(i,n.precedence,e),t.instance=i;case"script":return i=Zh(n.src),(a=e.querySelector(Jh(i)))?(t.instance=a,et(a),a):(r=n,(a=Wh.get(i))&&eu(r=p({},n),a),et(a=(e=e.ownerDocument||e).createElement("script")),uh(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,$h(r,n.precedence,e));return t.instance}function $h(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,i=a,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)i=s;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Xh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var tu=null;function nu(e,t,n){if(null===tu){var r=new Map,a=tu=new Map;a.set(n,r)}else(r=(a=tu).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var i=n[a];if(!(i[Ve]||i[ze]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var o=i.getAttribute(t)||"";o=e+o;var s=r.get(o);s?s.push(i):r.set(o,[i])}}return r}function ru(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function au(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var iu=0;function ou(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var su=null;function lu(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,su=new Map,t.forEach(cu,e),su=null,ou.call(e))}function cu(e,t){if(!(4&t.state.loading)){var n=su.get(e);if(n)var r=n.get(null);else{n=new Map,su.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var o=a[i];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(a=t.instance).getAttribute("data-precedence"),(i=n.get(o)||r)===r&&n.set(null,a),n.set(o,a),this.count++,r=ou.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),i?i.parentNode.insertBefore(a,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var du={$$typeof:x,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function hu(e,t,n,r,a,i,o,s,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function uu(e,t,n,r,a,i,o,s,l,c,d,h){return e=new hu(e,t,n,o,l,c,d,h,s),t=1,!0===i&&(t|=24),i=Dr(3,null,null,t),e.current=i,i.stateNode=e,(t=Wa()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},gi(i),e}function pu(e){return e?e=Rr:Rr}function mu(e,t,n,r,a,i){a=pu(a),null===r.context?r.context=a:r.pendingContext=a,(r=wi(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=vi(e,r,t))&&(Vc(n,0,t),bi(n,e,t))}function fu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gu(e,t){fu(e,t),(e=e.alternate)&&fu(e,t)}function yu(e){if(13===e.tag||31===e.tag){var t=Ir(e,67108864);null!==t&&Vc(t,0,67108864),gu(e,67108864)}}function wu(e){if(13===e.tag||31===e.tag){var t=Kc(),n=Ir(e,t=Re(t));null!==n&&Vc(n,0,t),gu(e,t)}}var vu=!0;function bu(e,t,n,r){var a=O.T;O.T=null;var i=L.p;try{L.p=2,ku(e,t,n,r)}finally{L.p=i,O.T=a}}function xu(e,t,n,r){var a=O.T;O.T=null;var i=L.p;try{L.p=8,ku(e,t,n,r)}finally{L.p=i,O.T=a}}function ku(e,t,n,r){if(vu){var a=_u(r);if(null===a)th(e,t,r,Tu,n),Lu(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Au=Ru(Au,e,t,n,r,a),!0;case"dragenter":return ju=Ru(ju,e,t,n,r,a),!0;case"mouseover":return Eu=Ru(Eu,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Bu.set(i,Ru(Bu.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Pu.set(i,Ru(Pu.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Lu(e,r),4&t&&-1<Ou.indexOf(e)){for(;null!==a;){var i=Qe(a);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var o=Ne(i.pendingLanes);if(0!==o){var s=i;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var l=1<<31-be(o);s.entanglements[1]|=l,o&=~l}Ld(i),0===(6&pc)&&(Oc=le()+500,Rd(0,!1))}}break;case 31:case 13:null!==(s=Ir(i,2))&&Vc(s,0,2),Xc(),gu(i,2)}if(null===(i=_u(r))&&th(e,t,r,Tu,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else th(e,t,r,null,n)}}function _u(e){return Su(e=Ot(e))}var Tu=null;function Su(e){if(Tu=null,null!==(e=Je(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=d(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Tu=e,null}function Nu(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case de:return 2;case he:return 8;case ue:case pe:return 32;case me:return 268435456;default:return 32}default:return 32}}var Cu=!1,Au=null,ju=null,Eu=null,Bu=new Map,Pu=new Map,Iu=[],Ou="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lu(e,t){switch(e){case"focusin":case"focusout":Au=null;break;case"dragenter":case"dragleave":ju=null;break;case"mouseover":case"mouseout":Eu=null;break;case"pointerover":case"pointerout":Bu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pu.delete(t.pointerId)}}function Ru(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=Qe(t))&&yu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Mu(e){var t=Je(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void We(e.priority,function(){wu(n)})}else if(31===t){if(null!==(t=d(n)))return e.blockedOn=t,void We(e.priority,function(){wu(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Du(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=_u(e.nativeEvent);if(null!==n)return null!==(t=Qe(n))&&yu(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);It=r,n.target.dispatchEvent(r),It=null,t.shift()}return!0}function Wu(e,t,n){Du(e)&&n.delete(t)}function Hu(){Cu=!1,null!==Au&&Du(Au)&&(Au=null),null!==ju&&Du(ju)&&(ju=null),null!==Eu&&Du(Eu)&&(Eu=null),Bu.forEach(Wu),Pu.forEach(Wu)}function zu(e,t){e.blockedOn===t&&(e.blockedOn=null,Cu||(Cu=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Hu)))}var Fu=null;function qu(e){Fu!==e&&(Fu=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Fu===e&&(Fu=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!==typeof r){if(null===Su(r||n))continue;break}var i=Qe(n);null!==i&&(e.splice(t,3),t-=3,ts(i,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Uu(e){function t(t){return zu(t,e)}null!==Au&&zu(Au,e),null!==ju&&zu(ju,e),null!==Eu&&zu(Eu,e),Bu.forEach(t),Pu.forEach(t);for(var n=0;n<Iu.length;n++){var r=Iu[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Iu.length&&null===(n=Iu[0]).blockedOn;)Mu(n),null===n.blockedOn&&Iu.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],i=n[r+1],o=a[Fe]||null;if("function"===typeof i)o||qu(n);else if(o){var s=null;if(i&&i.hasAttribute("formAction")){if(a=i,o=i[Fe]||null)s=o.formAction;else if(null!==Su(a))continue}else s=o.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),qu(n)}}}function Gu(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return a=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==a&&(a(),a=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==a&&(a(),a=null)}}}function Ku(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}Yu.prototype.render=Ku.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));mu(t.current,Kc(),e,t,null,null)},Yu.prototype.unmount=Ku.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;mu(e.current,2,null,e,null,null),Xc(),t[qe]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=De();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Iu.length&&0!==t&&t<Iu[n].priority;n++);Iu.splice(n,0,e),0===n&&Mu(e)}};var Vu=a.version;if("19.2.4"!==Vu)throw Error(o(527,Vu,"19.2.4"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return h(a),e;if(i===r)return h(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,c=a.child;c;){if(c===n){s=!0,n=a,r=i;break}if(c===r){s=!0,r=a,n=i;break}c=c.sibling}if(!s){for(c=i.child;c;){if(c===n){s=!0,n=i,r=a;break}if(c===r){s=!0,r=i,n=a;break}c=c.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var Zu={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.4"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{ye=Ju.inject(Zu),we=Ju}catch($u){}}t.createRoot=function(e,t){if(!s(e))throw Error(o(299));var n=!1,r="",a=Ts,i=Ss,l=Ns;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=uu(e,1,!1,null,0,n,r,null,a,i,l,Gu),e[qe]=t.current,Xd(e),new Ku(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(o(299));var r=!1,a="",i=Ts,l=Ss,c=Ns,d=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(d=n.formState)),(t=uu(e,1,!0,t,0,r,a,d,i,l,c,Gu)).context=pu(null),n=t.current,(a=wi(r=Re(r=Kc()))).callback=null,vi(n,a,r),n=r,t.current.lanes=n,Pe(t,n),Ld(t),e[qe]=t.current,Xd(e),new Yu(t)},t.version="19.2.4"},672(e,t,n){"use strict";var r=n(43);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:i}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.4"},391(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},799(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:a,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=a,t.jsxs=a},288(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),m=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function w(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||f}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=w.prototype;var x=b.prototype=new v;x.constructor=b,g(x,w.prototype),x.isPureReactComponent=!0;var k=Array.isArray;function _(){}var T={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function N(e,t,r){var a=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==a?a:null,props:r}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function j(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,c,d=!1;if(null===e)d=!0;else switch(s){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case n:case r:d=!0;break;case u:return E((d=e._init)(e._payload),t,a,i,o)}}if(d)return o=o(e),d=""===i?"."+j(e,0):i,k(o)?(a="",null!=d&&(a=d.replace(A,"$&/")+"/"),E(o,t,a,"",function(e){return e})):null!=o&&(C(o)&&(l=o,c=a+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+d,o=N(l.type,c,l.props)),t.push(o)),1;d=0;var h,p=""===i?".":i+":";if(k(e))for(var f=0;f<e.length;f++)d+=E(i=e[f],t,a,s=p+j(i,f),o);else if("function"===typeof(f=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=m&&h[m]||h["@@iterator"])?h:null))for(e=f.call(e),f=0;!(i=e.next()).done;)d+=E(i=i.value,t,a,s=p+j(i,f++),o);else if("object"===s){if("function"===typeof e.then)return E(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(_,_):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function B(e,t,n){if(null==e)return e;var r=[],a=0;return E(e,r,"","",function(e){return t.call(n,e,a++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},O={map:B,forEach:function(e,t,n){B(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return B(e,function(){t++}),t},toArray:function(e){return B(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=p,t.Children=O,t.Component=w,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return T.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),a=e.key;if(null!=t)for(i in void 0!==t.key&&(a=""+t.key),t)!S.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var o=Array(i),s=0;s<i;s++)o[s]=arguments[s+2];r.children=o}return N(e.type,a,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,a={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var o=arguments.length-2;if(1===o)a.children=n;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];a.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===a[r]&&(a[r]=o[r]);return N(e,i,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.T,n={};T.T=n;try{var r=e(),a=T.S;null!==a&&a(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(_,I)}catch(i){I(i)}finally{null!==t&&null!==n.types&&(t.types=n.types),T.T=t}},t.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},t.use=function(e){return T.H.use(e)},t.useActionState=function(e,t,n){return T.H.useActionState(e,t,n)},t.useCallback=function(e,t){return T.H.useCallback(e,t)},t.useContext=function(e){return T.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return T.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return T.H.useEffect(e,t)},t.useEffectEvent=function(e){return T.H.useEffectEvent(e)},t.useId=function(){return T.H.useId()},t.useImperativeHandle=function(e,t,n){return T.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.H.useMemo(e,t)},t.useOptimistic=function(e,t){return T.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return T.H.useReducer(e,t,n)},t.useRef=function(e){return T.H.useRef(e)},t.useState=function(e){return T.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.H.useTransition()},t.version="19.2.4"},43(e,t,n){"use strict";e.exports=n(288)},579(e,t,n){"use strict";e.exports=n(799)},896(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,d=e[c];if(0>i(l,n))c<a&&0>i(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<a&&0>i(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],d=[],h=1,u=null,p=3,m=!1,f=!1,g=!1,y=!1,w="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function k(e){if(g=!1,x(e),!f)if(null!==r(c))f=!0,T||(T=!0,_());else{var t=r(d);null!==t&&P(k,t.startTime-e)}}var _,T=!1,S=-1,N=5,C=-1;function A(){return!!y||!(t.unstable_now()-C<N)}function j(){if(y=!1,T){var e=t.unstable_now();C=e;var n=!0;try{e:{f=!1,g&&(g=!1,v(S),S=-1),m=!0;var i=p;try{t:{for(x(e),u=r(c);null!==u&&!(u.expirationTime>e&&A());){var o=u.callback;if("function"===typeof o){u.callback=null,p=u.priorityLevel;var s=o(u.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){u.callback=s,x(e),n=!0;break t}u===r(c)&&a(c),x(e)}else a(c);u=r(c)}if(null!==u)n=!0;else{var l=r(d);null!==l&&P(k,l.startTime-e),n=!1}}break e}finally{u=null,p=i,m=!1}n=void 0}}finally{n?_():T=!1}}}if("function"===typeof b)_=function(){b(j)};else if("undefined"!==typeof MessageChannel){var E=new MessageChannel,B=E.port2;E.port1.onmessage=j,_=function(){B.postMessage(null)}}else _=function(){w(j,0)};function P(e,n){S=w(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(d,e),null===r(c)&&e===r(d)&&(g?(v(S),S=-1):g=!0,P(k,i-o))):(e.sortIndex=s,n(c,e),f||m||(f=!0,T||(T=!0,_()))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},853(e,t,n){"use strict";e.exports=n(896)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(43),t=n(391);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const l=[{version:"2.0.0",date:"2026-02-25",title:"Class Code System",changes:["Teacher accounts with Supabase Auth (magic link + password sign-in)","Teachers create classes with shareable 6-character codes","Students enter class code during onboarding or via direct link","Teacher Dashboard shows only their students' data (fully isolated)","Late join \u2014 students can enter class code at score submission","Quiz gate data and game scores linked to classes for teacher analytics","Global leaderboard unchanged \u2014 all students still appear"]},{version:"1.7.0",date:"2026-02-25",title:"Quiz Gate Analytics",changes:["Pre-game quiz retry tracking \u2014 teachers can see which questions students struggle with","New Quiz Gate Analytics section on Teacher Dashboard with per-question breakdown","Expandable student detail view showing individual retry counts","Quiz Gate CSV export for offline analysis","Session ID linking quiz gate data to game scores (future-proofing for v2.0)"]},{version:"1.6.0",date:"2026-02-25",title:"Content Expansion",changes:["25 new knowledge check questions covering Canadian defense, frontier warfare, economic impacts, and diverse perspectives","12 new event cards including Chateauguay, River Raisin, Beaver Dams, Colonial Marines, and more","2 new leaders: Charles de Salaberry (British) and Black Hawk (Native) \u2014 now 4 US / 5 British / 4 Native","New biographical profile for Charles de Salaberry with primary sources","Expanded round coverage for mid-war (rounds 4-8) and late-war (rounds 8-12) content gaps"]},{version:"1.5.0",date:"2026-02-25",title:"Onboarding Redesign & AI Difficulty",changes:["New guided onboarding flow: Name \u2192 Difficulty \u2192 Learning \u2192 Quiz \u2192 Faction","AI difficulty levels: Learning (Easy), Balanced (Medium), Commander (Hard)","Pre-game quiz gate with 8 comprehension questions (retry until correct)","Explorer/Historian mode moved to difficulty selection screen","Teacher-controlled learning skip via ?skip=learning URL parameter","Difficulty tracked in Supabase and shown on Teacher Dashboard"]},{version:"1.4.1",date:"2026-02-24",title:"Reading Improvements",changes:["Bold text (**markdown**) now renders properly instead of showing asterisks","Explorer Mode: larger text, more spacing, and max-width for readability on Chromebooks","Inline vocabulary terms with tap-to-reveal definitions in Explorer Mode","Key Idea callout box at top of each Learning Mode section (Explorer only)","Did You Know moved above Key Terms in Explorer Mode for better flow","Section 9 (Diverse Experiences) split into sub-sections with headers","IntroScreen shows simplified text in Explorer Mode","Tutorial shows simplified descriptions in Explorer Mode"]},{version:"1.4.0",date:"2026-02-24",title:"Accessibility & Inclusion",changes:["Added Explorer Mode \u2014 simplified 3rd-grade reading level for IEP and multilingual learner students","Explorer Mode toggle on faction select screen (gameplay stays identical, only text changes)","Simplified text for all 43 knowledge check questions, 29 event cards, and 10 learning mode sections","Added OpenDyslexic font toggle for dyslexic-friendly reading (persists across sessions)","Font toggle available on both faction select and in-game header"]},{version:"1.3.0",date:"2026-02-24",title:"Pedagogical Improvements",changes:['Added "People of 1812" profiles with biographies, primary sources, and diverse perspectives','Added "What Came Next" post-game section connecting the war to later American history',"Enhanced Learning Mode with cause/effect analysis, primary source excerpts, and geographic context","Expanded required knowledge checks to ensure diverse perspectives (women, African Americans, Native peoples)","Added Teacher Guide page with standards alignment, facilitation tips, and assessment ideas","Expanded Teacher Dashboard with game guide summary","Added 3 new knowledge check questions on enslaved people, broken treaty promises, and Dolley Madison's political role","Added 2 new Learning Mode sections: Diverse Experiences and Geography of the War"]},{version:"1.2.0",date:"2025-01-15",title:"War Room Cartography",changes:["Complete visual redesign with War Room Cartography theme","AI Turn Replay panel with map highlighting","Leaderboard with Supabase backend and victory badges","Tutorial system with step-by-step guidance","Glossary panel with key vocabulary terms","Victory progress tracker","Sound effects and background music"]},{version:"1.1.0",date:"2024-11-01",title:"Knowledge & Assessment",changes:["Knowledge check questions with historical explanations","Quiz review panel showing past answers","Score submission and leaderboard preview","Teacher Dashboard with class analytics","Save/load game system with export/import"]},{version:"1.0.0",date:"2024-09-01",title:"Initial Release",changes:["Three playable factions: United States, British/Canada, Native Coalition","Interactive Leaflet map with 30 territories","Turn-based gameplay with 5 phases per round","AI opponent with strategic decision-making","Historical event cards tied to real war timeline","Leader abilities and combat system","Victory conditions: domination, elimination, treaty"]}];var c=n(579);const d=[{id:"us",name:"United States",icon:"\ud83e\udd85",gradient:"from-[#0a1628] to-[#1a3a6e]",accent:"#4a7ec7",border:"border-[#4a7ec7]",ring:"ring-[#4a7ec7]",description:"Expand territory, repel the British, and ignite American nationalism.",simpleDescription:"Fight for America! Push the British out and make your country stronger.",leaders:"Andrew Jackson, Oliver H. Perry, William H. Harrison",bonus:"Nationalism meter boosts your score multiplier"},{id:"british",name:"British / Canada",icon:"\ud83c\udf41",gradient:"from-[#1a0a0a] to-[#6b1a2a]",accent:"#e63946",border:"border-[#e63946]",ring:"ring-[#e63946]",description:"Hold Canada, maintain naval superiority, and blockade American ports.",simpleDescription:"Defend Canada! Use your strong navy to block American ships.",leaders:"Isaac Brock, Gordon Drummond, Robert Ross",bonus:"Naval superiority: +1 die on coastal attacks"},{id:"native",name:"Native Coalition",icon:"\ud83c\udff9",gradient:"from-[#1a1208] to-[#5a3a1e]",accent:"#d4a24e",border:"border-[#d4a24e]",ring:"ring-[#d4a24e]",description:"Forge alliances, defend homelands, and control the frontier.",simpleDescription:"Unite the tribes! Protect your homeland from American settlers.",leaders:"Tecumseh, Tenskwatawa, Black Hawk",bonus:"Guerrilla tactics: first strike in forest territories"}];function h(t){let{onSelect:n,onOpenPeopleGallery:r,gameMode:a,fontMode:i,toggleFont:o}=t;const[s,h]=(0,e.useState)(null),[u,p]=(0,e.useState)(null),[m,f]=(0,e.useState)(!1),g="explorer"===a;return(0,c.jsxs)("div",{className:"min-h-screen bg-war-ink flex flex-col items-center justify-center p-4 md:p-8 relative overflow-hidden",children:[(0,c.jsx)("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"radial-gradient(circle at 25% 25%, rgba(201,162,39,0.15) 0%, transparent 50%), radial-gradient(circle at 75% 75%, rgba(184,115,51,0.1) 0%, transparent 50%)"}}),(0,c.jsx)("div",{className:"absolute inset-0 bg-noise opacity-30"}),(0,c.jsxs)("div",{className:"relative z-10 w-full max-w-5xl",children:[(0,c.jsx)("div",{className:"text-center mb-8 md:mb-12 animate-fadein",children:(0,c.jsxs)("div",{className:"inline-block",children:[(0,c.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-2",children:[(0,c.jsx)("div",{className:"w-12 md:w-20 h-px bg-gradient-to-r from-transparent to-war-gold opacity-60"}),(0,c.jsx)("span",{className:"text-war-copper text-xs md:text-sm tracking-[0.3em] uppercase font-body",children:"Choose Your Faction"}),(0,c.jsx)("div",{className:"w-12 md:w-20 h-px bg-gradient-to-l from-transparent to-war-gold opacity-60"})]}),(0,c.jsx)("h1",{className:"text-5xl md:text-7xl font-display text-parchment tracking-wide leading-none mb-2",style:{textShadow:"0 2px 20px rgba(201,162,39,0.2)"},children:"War of 1812"}),(0,c.jsx)("p",{className:"text-xl md:text-2xl font-display italic text-war-gold tracking-wider",children:"Rise of the Nation"}),(0,c.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-2",children:[(0,c.jsx)("div",{className:"w-8 h-px bg-war-gold opacity-40"}),(0,c.jsx)("div",{className:"w-1.5 h-1.5 rotate-45 border border-war-gold opacity-40"}),(0,c.jsx)("div",{className:"w-24 h-px bg-war-gold opacity-40"}),(0,c.jsx)("div",{className:"w-1.5 h-1.5 rotate-45 border border-war-gold opacity-40"}),(0,c.jsx)("div",{className:"w-8 h-px bg-war-gold opacity-40"})]})]})}),(0,c.jsx)("div",{className:"flex flex-col md:flex-row gap-4 md:gap-5 mb-8 w-full animate-slideup",style:{animationDelay:"0.2s"},children:d.map(e=>{const t=u===e.id,n=s===e.id;return(0,c.jsxs)("button",{onClick:()=>p(e.id),onMouseEnter:()=>h(e.id),onMouseLeave:()=>h(null),className:"\n                  flex-1 p-6 md:p-7 rounded-lg transition-all duration-300 text-left cursor-pointer\n                  bg-gradient-to-b ".concat(e.gradient,"\n                  border-2 relative overflow-hidden group\n                  focus:outline-none focus:ring-2 ").concat(e.ring," focus:ring-offset-2 focus:ring-offset-war-ink\n                  ").concat(t?"".concat(e.border," shadow-modal"):"border-white/5 hover:border-white/15","\n                  ").concat(n&&!t?"scale-[1.02]":"","\n                  ").concat(t?"scale-[1.03]":"","\n                "),children:[t&&(0,c.jsx)("div",{className:"absolute inset-0 opacity-10",style:{background:"radial-gradient(circle at 50% 0%, ".concat(e.accent,", transparent 70%)")}}),(0,c.jsxs)("div",{className:"relative z-10",children:[(0,c.jsx)("div",{className:"text-4xl mb-3 opacity-80 group-hover:opacity-100 transition-opacity",children:e.icon}),(0,c.jsx)("h2",{className:"text-xl md:text-2xl font-display text-parchment font-bold mb-2 tracking-wide",children:e.name}),(0,c.jsx)("p",{className:"text-sm md:text-base text-parchment/80 mb-4 leading-relaxed font-body ".concat(g?"text-base md:text-lg":""),children:g?e.simpleDescription:e.description}),(0,c.jsxs)("div",{className:"text-sm text-parchment/60 space-y-1 font-body",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"text-war-gold font-semibold",children:"Leaders:"})," ",e.leaders]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"text-war-gold font-semibold",children:"Bonus:"})," ",e.bonus]})]})]}),t&&(0,c.jsx)("div",{className:"absolute top-3 right-3 w-6 h-6 rounded-full flex items-center justify-center",style:{background:e.accent},children:(0,c.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,c.jsx)("path",{d:"M3 7l3 3 5-6",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},e.id)})}),(0,c.jsxs)("div",{className:"flex flex-col gap-4 items-center animate-slideup",style:{animationDelay:"0.3s"},children:[(0,c.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:r&&(0,c.jsx)("button",{onClick:r,className:"px-8 py-3 rounded font-body text-base border border-war-copper/30 text-war-copper/80 hover:bg-war-copper/10 hover:border-war-copper/50 transition-all cursor-pointer tracking-wide focus:outline-none focus:ring-2 focus:ring-war-copper/40 focus:ring-offset-2 focus:ring-offset-war-ink",children:"Meet the People of 1812"})}),(0,c.jsx)("button",{onClick:()=>{u&&n(u)},disabled:!u,className:"\n              px-12 md:px-16 py-3.5 rounded font-display text-lg md:text-xl tracking-widest font-bold\n              transition-all duration-300 uppercase\n              focus:outline-none focus:ring-2 focus:ring-war-gold/50 focus:ring-offset-2 focus:ring-offset-war-ink\n              ".concat(u?"bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer shadow-copper":"bg-white/10 text-parchment-dark/40 border border-parchment-dark/20 cursor-not-allowed","\n            "),children:"March to War"})]}),(0,c.jsx)("p",{className:"text-center text-sm text-parchment/50 mt-10 max-w-lg mx-auto italic font-body leading-relaxed",children:"June 18, 1812 \u2014 President Madison signs the declaration of war against Great Britain. The young republic faces the world's greatest naval power."}),(0,c.jsxs)("div",{className:"text-center mt-4 space-y-2",children:[(0,c.jsxs)("div",{className:"flex items-center justify-center gap-3 text-xs font-body",children:[(0,c.jsx)("a",{href:"#guide",className:"text-war-gold/50 hover:text-war-gold/80 transition-colors",children:"Teacher Guide"}),(0,c.jsx)("span",{className:"text-parchment-dark/20",children:"|"}),(0,c.jsx)("button",{onClick:()=>f(!m),className:"text-war-gold/50 hover:text-war-gold/80 transition-colors cursor-pointer",children:"What's New"}),(0,c.jsx)("span",{className:"text-parchment-dark/20",children:"|"}),(0,c.jsxs)("button",{onClick:o,className:"transition-colors cursor-pointer ".concat("dyslexic"===i?"text-war-gold/80":"text-war-gold/50 hover:text-war-gold/80"),children:["Aa ","dyslexic"===i?"Standard Font":"OpenDyslexic"]})]}),(0,c.jsxs)("p",{className:"text-xs text-parchment-dark/40 font-body",children:["v","2.0.0"]})]}),m&&(0,c.jsxs)("div",{className:"w-full max-w-md mx-auto mt-4 bg-war-navy/60 backdrop-blur rounded-lg p-5 border border-war-gold/20 shadow-card animate-fadein",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,c.jsx)("h3",{className:"text-war-gold/90 font-display text-sm tracking-wide",children:"What's New"}),(0,c.jsx)("button",{onClick:()=>f(!1),className:"text-parchment-dark/40 hover:text-parchment text-xs cursor-pointer",children:"\xd7"})]}),l.slice(0,2).map(e=>(0,c.jsxs)("div",{className:"mb-4 last:mb-0",children:[(0,c.jsxs)("p",{className:"text-parchment/80 text-sm font-body font-bold",children:["v",e.version," \u2014 ",e.title]}),(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs font-body mb-1",children:e.date}),(0,c.jsx)("ul",{className:"space-y-0.5",children:e.changes.map((e,t)=>(0,c.jsx)("li",{className:"text-parchment-dark/60 text-xs font-body pl-3 relative before:content-['\u2022'] before:absolute before:left-0 before:text-war-gold/40",children:e},t))})]},e.version))]})]})]})}const u=(0,e.createContext)(null);function p(){const t=(0,e.use)(u);if(null==t)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function m(){return p().map}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var g=n(228),y=n.n(g);const w=["bounds","boundsOptions","center","children","className","id","placeholder","style","whenReady","zoom"];function v(t,n){let{bounds:r,boundsOptions:a,center:i,children:o,className:l,id:c,placeholder:d,style:h,whenReady:p,zoom:m}=t,y=f(t,w);const[v]=(0,e.useState)({className:l,id:c,style:h}),[b,x]=(0,e.useState)(null),k=(0,e.useRef)(void 0);(0,e.useImperativeHandle)(n,()=>{var e;return null!==(e=null===b||void 0===b?void 0:b.map)&&void 0!==e?e:null},[b]);const _=(0,e.useCallback)(e=>{if(null!==e&&!k.current){const t=new g.Map(e,y);k.current=t,null!=i&&null!=m?t.setView(i,m):null!=r&&t.fitBounds(r,a),null!=p&&t.whenReady(p),x(function(e){return Object.freeze({__version:1,map:e})}(t))}},[]);(0,e.useEffect)(()=>()=>{null===b||void 0===b||b.map.remove()},[b]);const T=b?e.createElement(u,{value:b},o):null!==d&&void 0!==d?d:null;return e.createElement("div",s(s({},v),{},{ref:_}),T)}const b=(0,e.forwardRef)(v);n(950);function x(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function k(t,n){return null==n?function(n,r){const a=(0,e.useRef)(void 0);return a.current||(a.current=t(n,r)),a}:function(r,a){const i=(0,e.useRef)(void 0);i.current||(i.current=t(r,a));const o=(0,e.useRef)(r),{instance:s}=i.current;return(0,e.useEffect)(function(){o.current!==r&&(n(s,r,o.current),o.current=r)},[s,r,n]),i}}function _(t,n){const r=(0,e.useRef)(void 0);(0,e.useEffect)(function(){return null!=n&&t.instance.on(n),r.current=n,function(){null!=r.current&&t.instance.off(r.current),r.current=null}},[t,n])}function T(e,t){var n;const r=null!==(n=e.pane)&&void 0!==n?n:t.pane;return r?s(s({},e),{},{pane:r}):e}function S(t,n){(0,e.useEffect)(function(){var e;return(null!==(e=n.layerContainer)&&void 0!==e?e:n.map).addLayer(t.instance),function(){var e;null===(e=n.layerContainer)||void 0===e||e.removeLayer(t.instance),n.map.removeLayer(t.instance)}},[n,t])}function N(t){return function(n){const r=p(),a=t(T(n,r),r);return function(t,n){const r=(0,e.useRef)(n);(0,e.useEffect)(function(){n!==r.current&&null!=t.attributionControl&&(null!=r.current&&t.attributionControl.removeAttribution(r.current),null!=n&&t.attributionControl.addAttribution(n)),r.current=n},[t,n])}(r.map,n.attribution),_(a.current,n.eventHandlers),S(a.current,r),a}}function C(t){return function(n){const r=p(),a=t(T(n,r),r);return _(a.current,n.eventHandlers),S(a.current,r),function(t,n){const r=(0,e.useRef)(void 0);(0,e.useEffect)(function(){if(n.pathOptions!==r.current){var e;const a=null!==(e=n.pathOptions)&&void 0!==e?e:{};t.instance.setStyle(a),r.current=a}},[t,n])}(a.current,n),a}}const A=["url"],j=function(t){function n(n,r){const{instance:a}=t(n).current;return(0,e.useImperativeHandle)(r,()=>a),null}return(0,e.forwardRef)(n)}(N(k(function(e,t){let{url:n}=e,r=f(e,A);return x(new g.TileLayer(n,T(r,t)),t)},function(e,t,n){!function(e,t,n){const{opacity:r,zIndex:a}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=a&&a!==n.zIndex&&e.setZIndex(a)}(e,t,n);const{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)})));const E=["data"],B=function(t,n){return function(t){function n(n,r){const{instance:a,context:i}=t(n).current;(0,e.useImperativeHandle)(r,()=>a);const{children:o}=n;return null==o?null:e.createElement(u,{value:i},o)}return(0,e.forwardRef)(n)}(C(k(t,n)))}(function(e,t){let{data:n}=e,r=f(e,E);const a=new g.GeoJSON(n,r);return x(a,(i=t,o={overlayContainer:a},Object.freeze(s(s({},i),o))));var i,o},function(e,t,n){t.style!==n.style&&(null==t.style?e.resetStyle():e.setStyle(t.style))});Math.round(40*Math.sqrt(3));const P={detroit:{id:"detroit",name:"Detroit",theater:"Great Lakes",startingOwner:"us",points:2,hasFort:!0,adjacency:["fort_dearborn","lake_erie","upper_canada","ohio_valley"],hexCells:[{col:2,row:1},{col:3,row:1}],primaryCell:0,polygon:{d:"M 80,200 L 230,200 L 250,310 L 180,340 L 80,330 Z"},centroid:{x:168,y:270},labelPosition:{x:168,y:250},troopPosition:{x:135,y:310},pointsPosition:{x:215,y:220}},fort_dearborn:{id:"fort_dearborn",name:"Fort Dearborn",theater:"Great Lakes",startingOwner:"us",points:1,hasFort:!0,adjacency:["detroit","ohio_valley","indiana_territory"],hexCells:[{col:1,row:1}],primaryCell:0,polygon:{d:"M 80,360 L 230,360 L 250,470 L 180,500 L 80,490 Z"},centroid:{x:164,y:430},labelPosition:{x:164,y:410},troopPosition:{x:130,y:470},pointsPosition:{x:215,y:380}},niagara:{id:"niagara",name:"Niagara",theater:"Great Lakes",startingOwner:"british",points:2,hasFort:!0,adjacency:["lake_erie","upper_canada","new_york","lake_ontario"],hexCells:[{col:5,row:1}],primaryCell:0,polygon:{d:"M 280,200 L 430,200 L 450,310 L 380,340 L 280,330 Z"},centroid:{x:368,y:270},labelPosition:{x:368,y:250},troopPosition:{x:335,y:310},pointsPosition:{x:415,y:220}},lake_erie:{id:"lake_erie",name:"Lake Erie",theater:"Great Lakes",startingOwner:"neutral",points:2,hasFort:!1,adjacency:["detroit","niagara","ohio_valley","upper_canada"],hexCells:[{col:4,row:1}],primaryCell:0,isNaval:!0,polygon:{d:"M 280,360 L 430,360 L 450,470 L 380,500 L 280,490 Z"},centroid:{x:368,y:430},labelPosition:{x:368,y:410},troopPosition:{x:335,y:470},pointsPosition:{x:415,y:380}},lake_ontario:{id:"lake_ontario",name:"Lake Ontario",theater:"Great Lakes",startingOwner:"neutral",points:1,hasFort:!1,adjacency:["niagara","upper_canada","new_york","montreal"],hexCells:[{col:6,row:1}],primaryCell:0,isNaval:!0,polygon:{d:"M 480,200 L 630,200 L 650,310 L 580,340 L 480,330 Z"},centroid:{x:568,y:270},labelPosition:{x:568,y:250},troopPosition:{x:535,y:310},pointsPosition:{x:615,y:220}},upper_canada:{id:"upper_canada",name:"Upper Canada",theater:"Great Lakes",startingOwner:"british",points:2,hasFort:!0,adjacency:["detroit","niagara","lake_erie","lake_ontario","montreal"],hexCells:[{col:3,row:0},{col:4,row:0},{col:5,row:0}],primaryCell:1,polygon:{d:"M 50,30 L 450,30 L 470,150 L 300,170 L 80,160 L 50,90 Z"},centroid:{x:260,y:100},labelPosition:{x:260,y:85},troopPosition:{x:220,y:135},pointsPosition:{x:400,y:55}},washington_dc:{id:"washington_dc",name:"Washington D.C.",theater:"Chesapeake",startingOwner:"us",points:3,hasFort:!1,adjacency:["baltimore","virginia","bladensburg"],hexCells:[{col:9,row:2}],primaryCell:0,polygon:{d:"M 680,360 L 830,360 L 850,470 L 780,500 L 680,490 Z"},centroid:{x:768,y:430},labelPosition:{x:768,y:410},troopPosition:{x:735,y:470},pointsPosition:{x:815,y:380}},baltimore:{id:"baltimore",name:"Baltimore",theater:"Chesapeake",startingOwner:"us",points:2,hasFort:!0,adjacency:["washington_dc","bladensburg","new_york","chesapeake_bay"],hexCells:[{col:10,row:2}],primaryCell:0,polygon:{d:"M 880,200 L 1030,200 L 1050,310 L 980,340 L 880,330 Z"},centroid:{x:968,y:270},labelPosition:{x:968,y:250},troopPosition:{x:935,y:310},pointsPosition:{x:1015,y:220}},bladensburg:{id:"bladensburg",name:"Bladensburg",theater:"Chesapeake",startingOwner:"us",points:1,hasFort:!1,adjacency:["washington_dc","baltimore","virginia","chesapeake_bay"],hexCells:[{col:11,row:2}],primaryCell:0,polygon:{d:"M 880,360 L 1030,360 L 1050,470 L 980,500 L 880,490 Z"},centroid:{x:968,y:430},labelPosition:{x:968,y:410},troopPosition:{x:935,y:470},pointsPosition:{x:1015,y:380}},chesapeake_bay:{id:"chesapeake_bay",name:"Chesapeake Bay",theater:"Chesapeake",startingOwner:"neutral",points:1,hasFort:!1,adjacency:["baltimore","bladensburg","virginia","atlantic_sea_lanes"],hexCells:[{col:12,row:2}],primaryCell:0,isNaval:!0,polygon:{d:"M 1080,200 L 1230,200 L 1250,470 L 1180,500 L 1080,490 Z"},centroid:{x:1168,y:350},labelPosition:{x:1168,y:330},troopPosition:{x:1135,y:465},pointsPosition:{x:1215,y:220}},virginia:{id:"virginia",name:"Virginia",theater:"Chesapeake",startingOwner:"us",points:1,hasFort:!1,adjacency:["washington_dc","bladensburg","chesapeake_bay","carolina","ohio_valley"],hexCells:[{col:8,row:2},{col:8,row:3},{col:9,row:3}],primaryCell:0,polygon:{d:"M 680,520 L 830,520 L 850,630 L 780,660 L 680,650 Z"},centroid:{x:768,y:590},labelPosition:{x:768,y:570},troopPosition:{x:735,y:630},pointsPosition:{x:815,y:540}},new_orleans:{id:"new_orleans",name:"New Orleans",theater:"Southern",startingOwner:"us",points:3,hasFort:!0,adjacency:["mobile","mississippi_territory","gulf_of_mexico"],hexCells:[{col:1,row:4},{col:2,row:4}],primaryCell:0,polygon:{d:"M 80,680 L 230,680 L 250,790 L 180,820 L 80,810 Z"},centroid:{x:168,y:750},labelPosition:{x:168,y:730},troopPosition:{x:135,y:790},pointsPosition:{x:215,y:700}},mobile:{id:"mobile",name:"Mobile",theater:"Southern",startingOwner:"us",points:1,hasFort:!1,adjacency:["new_orleans","creek_nation","gulf_of_mexico","carolina"],hexCells:[{col:3,row:4}],primaryCell:0,polygon:{d:"M 280,680 L 430,680 L 450,790 L 380,820 L 280,810 Z"},centroid:{x:368,y:750},labelPosition:{x:368,y:730},troopPosition:{x:335,y:790},pointsPosition:{x:415,y:700}},creek_nation:{id:"creek_nation",name:"Creek Nation",theater:"Southern",startingOwner:"native",points:2,hasFort:!1,startingTroops:4,adjacency:["mobile","mississippi_territory","carolina"],hexCells:[{col:4,row:3},{col:5,row:3},{col:4,row:4}],primaryCell:0,polygon:{d:"M 480,680 L 630,680 L 650,790 L 580,820 L 480,810 Z"},centroid:{x:568,y:750},labelPosition:{x:568,y:730},troopPosition:{x:535,y:790},pointsPosition:{x:615,y:700}},mississippi_territory:{id:"mississippi_territory",name:"Mississippi Terr.",theater:"Southern",startingOwner:"us",points:1,hasFort:!1,adjacency:["new_orleans","creek_nation","indiana_territory"],hexCells:[{col:2,row:3},{col:3,row:3}],primaryCell:0,polygon:{d:"M 80,520 L 230,520 L 250,630 L 180,660 L 80,650 Z"},centroid:{x:168,y:590},labelPosition:{x:168,y:570},troopPosition:{x:135,y:630},pointsPosition:{x:215,y:540}},gulf_of_mexico:{id:"gulf_of_mexico",name:"Gulf of Mexico",theater:"Southern",startingOwner:"neutral",points:1,hasFort:!1,adjacency:["new_orleans","mobile","atlantic_sea_lanes"],hexCells:[{col:1,row:5},{col:2,row:5},{col:3,row:5}],primaryCell:1,isNaval:!0,polygon:{d:"M 80,840 L 430,840 L 450,870 L 180,870 L 80,865 Z"},centroid:{x:244,y:857},labelPosition:{x:244,y:850},troopPosition:{x:210,y:868},pointsPosition:{x:400,y:848}},atlantic_sea_lanes:{id:"atlantic_sea_lanes",name:"Atlantic Sea Lanes",theater:"Maritime",startingOwner:"british",points:2,hasFort:!1,adjacency:["chesapeake_bay","gulf_of_mexico","halifax","new_york"],hexCells:[{col:14,row:2},{col:14,row:3}],primaryCell:0,isNaval:!0,polygon:{d:"M 1280,200 L 1360,200 L 1380,870 L 1320,870 L 1280,520 Z"},centroid:{x:1324,y:535},labelPosition:{x:1324,y:515},troopPosition:{x:1295,y:580},pointsPosition:{x:1350,y:230}},halifax:{id:"halifax",name:"Halifax",theater:"Maritime",startingOwner:"british",points:2,hasFort:!0,adjacency:["atlantic_sea_lanes","montreal","new_york"],hexCells:[{col:13,row:0},{col:13,row:1}],primaryCell:0,polygon:{d:"M 800,30 L 1050,30 L 1070,180 L 950,200 L 800,190 L 780,90 Z"},centroid:{x:925,y:115},labelPosition:{x:925,y:95},troopPosition:{x:880,y:155},pointsPosition:{x:1010,y:60}},new_york:{id:"new_york",name:"New York",theater:"Chesapeake",startingOwner:"us",points:2,hasFort:!1,adjacency:["niagara","lake_ontario","baltimore","atlantic_sea_lanes","halifax","montreal"],hexCells:[{col:9,row:1},{col:10,row:1}],primaryCell:0,polygon:{d:"M 680,200 L 830,200 L 850,310 L 780,340 L 680,330 Z"},centroid:{x:768,y:270},labelPosition:{x:768,y:250},troopPosition:{x:735,y:310},pointsPosition:{x:815,y:220}},montreal:{id:"montreal",name:"Montreal",theater:"Great Lakes",startingOwner:"british",points:2,hasFort:!0,adjacency:["upper_canada","lake_ontario","new_york","halifax"],hexCells:[{col:7,row:0},{col:8,row:0}],primaryCell:0,polygon:{d:"M 500,30 L 750,30 L 770,150 L 650,170 L 500,160 L 480,90 Z"},centroid:{x:625,y:100},labelPosition:{x:625,y:85},troopPosition:{x:585,y:135},pointsPosition:{x:720,y:55}},ohio_valley:{id:"ohio_valley",name:"Ohio Valley",theater:"Great Lakes",startingOwner:"us",points:1,hasFort:!1,adjacency:["detroit","fort_dearborn","lake_erie","indiana_territory","virginia"],hexCells:[{col:4,row:2},{col:5,row:2},{col:6,row:2}],primaryCell:1,polygon:{d:"M 480,360 L 630,360 L 650,470 L 580,500 L 480,490 Z"},centroid:{x:568,y:430},labelPosition:{x:568,y:410},troopPosition:{x:535,y:470},pointsPosition:{x:615,y:380}},indiana_territory:{id:"indiana_territory",name:"Indiana Terr.",theater:"Great Lakes",startingOwner:"native",points:1,hasFort:!1,startingTroops:4,adjacency:["fort_dearborn","ohio_valley","mississippi_territory"],hexCells:[{col:2,row:2},{col:3,row:2}],primaryCell:0,polygon:{d:"M 280,520 L 430,520 L 450,630 L 380,660 L 280,650 Z"},centroid:{x:368,y:590},labelPosition:{x:368,y:570},troopPosition:{x:335,y:630},pointsPosition:{x:415,y:540}},carolina:{id:"carolina",name:"Carolina",theater:"Southern",startingOwner:"us",points:1,hasFort:!1,adjacency:["virginia","mobile","creek_nation"],hexCells:[{col:6,row:3},{col:7,row:3},{col:10,row:3}],primaryCell:0,polygon:{d:"M 880,520 L 1030,520 L 1050,790 L 980,820 L 880,810 Z"},centroid:{x:968,y:670},labelPosition:{x:968,y:650},troopPosition:{x:935,y:790},pointsPosition:{x:1015,y:540}}},I=(e,t)=>{var n,r;return null!==(n=null===(r=P[e])||void 0===r?void 0:r.adjacency.includes(t))&&void 0!==n&&n},O=P,L=[{name:"GREAT LAKES THEATER",pos:[47,-82]},{name:"CHESAPEAKE THEATER",pos:[41.5,-74.5]},{name:"SOUTHERN THEATER",pos:[32,-90.5]},{name:"MARITIME THEATER",pos:[41,-62]}],R={upper_canada:{coords:[[48,-80],[48,-76],[46.5,-74.5],[45.5,-75.5],[44.5,-76.5],[44,-77.5],[43.8,-79],[43.5,-79.5],[43.2,-80],[44,-81.5],[45.5,-82],[48,-84],[48,-80]],labelPos:[46,-78.5]},montreal:{coords:[[48,-76],[48,-72],[47,-70],[46,-71.5],[45.5,-73],[45,-73.5],[45,-74],[45.5,-75.5],[46.5,-74.5],[48,-76]],labelPos:[46.8,-73.5]},lake_ontario:{coords:[[44.5,-76.5],[45,-74],[44.5,-74],[43.8,-75.5],[43.5,-76.5],[43.3,-77.5],[44,-77.5],[44.5,-76.5]],labelPos:[44,-76]},niagara:{coords:[[44,-77.5],[43.3,-77.5],[43,-78],[42.8,-79],[43.2,-79.5],[43.5,-79.5],[43.8,-79],[44,-77.5]],labelPos:[43.3,-78.5]},lake_erie:{coords:[[43.2,-80],[43.5,-79.5],[43.2,-79.5],[42.8,-79],[42.5,-79.5],[42.2,-80.5],[41.8,-81],[41.5,-82.5],[41.8,-83],[42.3,-82.5],[42.8,-81],[43.2,-80]],labelPos:[42.3,-80.8]},detroit:{coords:[[44,-81.5],[43.2,-80],[42.8,-81],[42.3,-82.5],[41.8,-83],[42,-84],[42.8,-84.5],[44,-84.5],[45,-84],[45.5,-82],[44,-81.5]],labelPos:[43,-83]},fort_dearborn:{coords:[[45,-84],[44,-84.5],[42.8,-84.5],[42,-84],[41.8,-85],[41.5,-87.5],[42.5,-87.5],[44,-87.5],[45.5,-87],[45.5,-85],[45,-84]],labelPos:[43.5,-86]},new_york:{coords:[[44.5,-74],[45,-74],[45,-73.5],[44.5,-72],[43,-72],[41.5,-72],[40.5,-74],[41,-75],[42,-76],[43,-76.5],[43.5,-76.5],[43.8,-75.5],[44.5,-74]],labelPos:[42.8,-74]},baltimore:{coords:[[41,-75],[40.5,-74],[39.8,-74.5],[39.5,-75.5],[39.5,-76],[39.8,-76.5],[40.5,-76.5],[41,-76],[41,-75]],labelPos:[40.2,-75.5]},washington_dc:{coords:[[39.8,-76.5],[39.5,-76],[39,-76.5],[38.5,-77],[38.5,-77.8],[39,-78],[39.5,-77.5],[40.5,-76.5],[39.8,-76.5]],labelPos:[39.2,-77]},bladensburg:{coords:[[39.5,-76],[39.5,-75.5],[39,-75],[38.5,-75.5],[38,-76],[38.5,-76.5],[39,-76.5],[39.5,-76]],labelPos:[38.8,-75.8]},chesapeake_bay:{coords:[[38.5,-75.5],[39,-75],[39.5,-75.5],[39.8,-74.5],[40.5,-74],[40,-73],[39,-73],[37.5,-74],[37,-75],[37.5,-75.5],[38,-76],[38.5,-75.5]],labelPos:[38.5,-74.2]},virginia:{coords:[[39,-78],[38.5,-77.8],[38.5,-77],[38,-76],[37.5,-75.5],[37,-75],[36.5,-76],[36.5,-78],[37,-80],[38,-80],[39,-78]],labelPos:[37.5,-78]},carolina:{coords:[[36.5,-78],[36.5,-76],[35,-75.5],[33.5,-77.5],[33,-79.5],[33,-81],[34,-81],[35.5,-81],[36.5,-78]],labelPos:[35,-78.5]},creek_nation:{coords:[[35.5,-81],[34,-81],[33,-81],[33,-79.5],[32,-81],[31,-82.5],[31,-85],[32.5,-86],[34,-86],[35,-85],[35.5,-84],[35.5,-81]],labelPos:[33,-83.5]},mississippi_territory:{coords:[[35,-85],[34,-86],[32.5,-86],[31,-85],[31,-88],[31.5,-90],[33,-91],[35,-91],[35,-88],[35,-85]],labelPos:[33,-88.5]},mobile:{coords:[[31,-85],[31,-82.5],[30,-83.5],[29.5,-85],[29.5,-87.5],[30,-88.5],[31,-88],[31,-85]],labelPos:[30.3,-85.5]},new_orleans:{coords:[[31.5,-90],[31,-88],[30,-88.5],[29.5,-87.5],[29,-89],[28.5,-90.5],[29,-91.5],[30,-92],[31.5,-91.5],[31.5,-90]],labelPos:[30,-90]},gulf_of_mexico:{coords:[[29.5,-87.5],[29.5,-85],[29,-83.5],[28,-83],[27,-84],[26.5,-87],[27,-89.5],[28.5,-90.5],[29,-89],[29.5,-87.5]],labelPos:[27.8,-86.5]},ohio_valley:{coords:[[42.5,-79.5],[42.8,-79],[43,-78],[43,-76.5],[42,-76],[41,-76],[41,-75],[40.5,-76.5],[39.5,-77.5],[39,-78],[38,-80],[37,-80],[37,-81.5],[38.5,-82],[39.5,-82.5],[40.5,-82],[41.5,-81],[42.2,-80.5],[42.5,-79.5]],labelPos:[40,-79]},indiana_territory:{coords:[[41.8,-85],[42,-84],[41.8,-83],[41.5,-82.5],[40.5,-82],[39.5,-82.5],[38.5,-82],[37,-81.5],[37,-83],[36.5,-84],[35.5,-84],[35,-85],[35,-88],[35,-91],[38.5,-91],[39,-88],[40,-87.5],[41.5,-87.5],[41.8,-85]],labelPos:[38,-86.5]},halifax:{coords:[[48,-72],[49,-67],[47.5,-63],[46,-60],[44.5,-63.5],[43.5,-65.5],[44,-67],[44.5,-68],[44.5,-72],[46,-71.5],[47,-70],[48,-72]],labelPos:[46.5,-65]},atlantic_sea_lanes:{coords:[[43.5,-65.5],[44.5,-63.5],[44,-60],[42,-58],[38,-60],[34,-64],[32,-68],[33.5,-72],[35,-75.5],[36.5,-76],[37,-75],[37.5,-74],[39,-73],[40,-73],[41.5,-72],[43,-72],[44,-67],[43.5,-65.5]],labelPos:[37,-68]}},M={us:{fill:"#2d6fd6",stroke:"#1a4fa0"},british:{fill:"#e63946",stroke:"#b82030"},native:{fill:"#b8864e",stroke:"#7a5230"},neutral:{fill:"#607080",stroke:"#455565"}};function D(e){const{owner:t,isNaval:n}=e.properties,r=M[t]||M.neutral;return{fillColor:r.fill,color:r.stroke,weight:2,opacity:1,fillOpacity:n?.45:.7,dashArray:n?"6 4":void 0}}function W(){const t=m();return(0,e.useEffect)(()=>{const e=L.map(e=>{let{name:n,pos:r}=e;const a=y().divIcon({className:"theater-label",html:"<span>".concat(n,"</span>"),iconSize:[200,24],iconAnchor:[100,12]});return y().marker(r,{icon:a,interactive:!1,zIndexOffset:-1e3}).addTo(t)});return()=>e.forEach(e=>e.remove())},[t]),null}function H(t){let{selectedTerritory:n}=t;const r=m();return(0,e.useEffect)(()=>{if(!n||!R[n])return;const e=R[n].coords.map(e=>{let[t,n]=e;return[t,n]}),t=y().polygon(e,{color:"#ffd700",weight:4,fillColor:"#ffd700",fillOpacity:.2,dashArray:void 0,interactive:!1}).addTo(r);return()=>t.remove()},[r,n]),null}function z(t){let{selectedTerritory:n}=t;const r=m();return(0,e.useEffect)(()=>{if(!n||!O[n])return;const e=(O[n].adjacency||[]).map(e=>{if(!R[e])return null;const t=R[e].coords.map(e=>{let[t,n]=e;return[t,n]});return y().polygon(t,{color:"#4ade80",weight:3,fillColor:"#4ade80",fillOpacity:.15,dashArray:"5 5",interactive:!1}).addTo(r)}).filter(Boolean);return()=>e.forEach(e=>e.remove())},[r,n]),null}function F(t){let{highlightedTerritories:n}=t;const r=m();return(0,e.useEffect)(()=>{if(!n||0===n.length)return;const e=n.map(e=>{if(!R[e])return null;const t=R[e].coords.map(e=>{let[t,n]=e;return[t,n]});return y().polygon(t,{color:"#f97316",weight:3,fillColor:"#f97316",fillOpacity:.3,className:"ai-highlight-pulse",interactive:!1}).addTo(r)}).filter(Boolean);return()=>e.forEach(e=>e.remove())},[r,n]),null}function q(t){let{territoryOwners:n,troops:r}=t;const a=m(),[i,o]=e.useState(a.getZoom());return(0,e.useEffect)(()=>{const e=()=>o(a.getZoom());return a.on("zoomend",e),()=>a.off("zoomend",e)},[a]),(0,e.useEffect)(()=>{const e=[],t=i>5,o=i<=4?10:5===i?11:6===i?13:15,s=o+1,l=o+4,c=o-1;return Object.entries(R).forEach(i=>{let[o,d]=i;const h=O[o],u=(null===r||void 0===r?void 0:r[o])||0,p=(null===n||void 0===n?void 0:n[o])||(null===h||void 0===h?void 0:h.startingOwner)||"neutral",m=M[p]||M.neutral,f=(null===h||void 0===h?void 0:h.points)||0,g=null!==h&&void 0!==h&&h.hasFort?'<span style="font-size:1.3em; margin-left:3px;">&#9971;</span>':"",w='\n        <div class="troop-marker" style="\n          border-color:'.concat(m.stroke,";\n          background:rgba(0,0,0,0.85);\n          padding:6px 8px;\n          border-radius:4px;\n          border:2px solid ").concat(m.stroke,';\n          box-shadow:0 2px 8px rgba(0,0,0,0.5);\n          min-width:60px;\n          text-align:center;\n        ">\n          ').concat(t?'<div class="troop-name" style="font-size:'.concat(s,'px; margin-bottom:3px; color:#f4e4c1; font-weight:600; line-height:1.2;">').concat((null===h||void 0===h?void 0:h.name)||o).concat(g,"</div>"):"","\n          ").concat(u>0?'<div class="troop-count" style="background:'.concat(m.fill,"; font-size:").concat(l,'px; font-weight:bold; padding:4px 8px; margin:3px 0; border-radius:3px; color:#fff;">').concat(u,"</div>"):"","\n          ").concat(f>0?'<div class="troop-pts" style="font-size:'.concat(c,'px; margin-top:3px; color:#d4af37; opacity:0.9;">').concat(f,"pt").concat(f>1?"s":"","</div>"):"","\n        </div>\n      "),v=y().divIcon({className:"troop-icon-wrapper",html:w,iconSize:[90,60],iconAnchor:[45,30]});e.push(y().marker(d.labelPos,{icon:v,interactive:!1,zIndexOffset:1e3}).addTo(a))}),()=>e.forEach(e=>e.remove())},[a,n,r,i]),null}function U(t){let{territoryOwners:n,selectedTerritory:r,onTerritoryClick:a,troops:i,highlightedTerritories:o}=t;const s=(0,e.useRef)(null),l=(0,e.useRef)(a);l.current=a;const d=(0,e.useMemo)(()=>function(e,t){return{type:"FeatureCollection",features:Object.entries(R).map(n=>{let[r,a]=n;const i=O[r],o=(null===e||void 0===e?void 0:e[r])||(null===i||void 0===i?void 0:i.startingOwner)||"neutral",s=(null===t||void 0===t?void 0:t[r])||0;return{type:"Feature",properties:{id:r,name:(null===i||void 0===i?void 0:i.name)||r,owner:o,troopCount:s,points:(null===i||void 0===i?void 0:i.points)||0,hasFort:(null===i||void 0===i?void 0:i.hasFort)||!1,isNaval:(null===i||void 0===i?void 0:i.isNaval)||!1,theater:(null===i||void 0===i?void 0:i.theater)||"",labelPos:a.labelPos},geometry:{type:"Polygon",coordinates:[a.coords.map(e=>{let[t,n]=e;return[n,t]})]}}})}}(n,i),[n,i]),h=(0,e.useMemo)(()=>JSON.stringify(n)+JSON.stringify(i),[n,i]);return(0,c.jsxs)(b,{center:[39,-78],zoom:5,minZoom:4,maxZoom:7,maxBounds:[[26,-94],[50,-56]],maxBoundsViscosity:1,style:{width:"100%",height:"100%",minHeight:"500px",background:"#1a2744"},zoomControl:!0,attributionControl:!1,children:[(0,c.jsx)(j,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",opacity:.4}),(0,c.jsx)(j,{url:"https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png",opacity:.5}),(0,c.jsx)(B,{ref:s,data:d,style:D,onEachFeature:(e,t)=>{const{id:n}=e.properties;t.on({click:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.call(l,n)},mouseover:e=>{const t=e.target;t.setStyle({weight:3,fillOpacity:.9}),t.bringToFront()},mouseout:t=>{const n=t.target,r=D(e);n.setStyle(r)}})}},h),(0,c.jsx)(H,{selectedTerritory:r}),(0,c.jsx)(z,{selectedTerritory:r}),(0,c.jsx)(F,{highlightedTerritories:o}),(0,c.jsx)(W,{}),(0,c.jsx)(q,{territoryOwners:n,troops:i})]})}const G={us:"United States",british:"British / Canada",native:"Native Coalition"},K={us:"#4a7ec7",british:"#e63946",native:"#d4a24e"};function Y(e){let{scores:t,playerFaction:n,nationalismMeter:r,playerTerritoryCount:a,nativeResistance:i,navalDominance:o,factionMultiplier:s}=e;return(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-3 space-y-3 border border-parchment-dark/8","aria-live":"polite","aria-atomic":"true",children:[(0,c.jsx)("h3",{className:"text-war-gold/90 font-display text-base tracking-wide border-b border-war-gold/15 pb-2",children:"Scores"}),Object.entries(t).map(e=>{let[t,r]=e;return(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("div",{className:"w-3 h-3 rounded-sm",style:{background:K[t]}}),(0,c.jsxs)("span",{className:"text-sm font-body ".concat(t===n?"text-war-gold font-bold":"text-parchment/70"),children:[G[t],t===n&&" (You)"]})]}),(0,c.jsx)("span",{className:"text-parchment font-bold text-base font-display",children:r})]},t)}),(0,c.jsx)("div",{className:"pt-2 border-t border-parchment-dark/10",children:(0,c.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,c.jsx)("span",{className:"text-parchment-dark/50 font-body",children:"Your territories"}),(0,c.jsx)("span",{className:"text-parchment/80 font-bold font-body",children:a})]})}),"us"===n&&(0,c.jsxs)("div",{className:"pt-2 border-t border-parchment-dark/10",children:[(0,c.jsxs)("div",{className:"flex justify-between text-sm mb-1.5",children:[(0,c.jsx)("span",{className:"text-parchment-dark/50 font-body",children:"Nationalism"}),(0,c.jsxs)("span",{className:"text-war-gold/80 font-bold font-body",children:[r,"%"]})]}),(0,c.jsx)("div",{className:"w-full bg-war-ink rounded-full h-2 overflow-hidden",children:(0,c.jsx)("div",{className:"h-full rounded-full transition-all duration-500",style:{width:"".concat(r,"%"),background:"linear-gradient(to right, #1a3a6e, #c9a227)"}})}),(0,c.jsxs)("p",{className:"text-sm text-parchment-dark/40 mt-1 font-body",children:["Multiplier: x",s.toFixed(2)]})]}),"native"===n&&(0,c.jsxs)("div",{className:"pt-2 border-t border-parchment-dark/10",children:[(0,c.jsxs)("div",{className:"flex justify-between text-sm mb-1.5",children:[(0,c.jsx)("span",{className:"text-parchment-dark/50 font-body",children:"Resistance"}),(0,c.jsxs)("span",{className:"text-war-gold/80 font-bold font-body",children:[i,"/6"]})]}),(0,c.jsx)("div",{className:"w-full bg-war-ink rounded-full h-2 overflow-hidden",children:(0,c.jsx)("div",{className:"h-full rounded-full transition-all duration-500",style:{width:"".concat(Math.round(Math.min(i,6)/6*100),"%"),background:"linear-gradient(to right, #5a3a1e, #c9a227)"}})}),(0,c.jsxs)("p",{className:"text-sm text-parchment-dark/40 mt-1 font-body",children:["Multiplier: x",s.toFixed(2)]})]}),"british"===n&&(0,c.jsxs)("div",{className:"pt-2 border-t border-parchment-dark/10",children:[(0,c.jsxs)("div",{className:"flex justify-between text-sm mb-1.5",children:[(0,c.jsx)("span",{className:"text-parchment-dark/50 font-body",children:"Naval Dominance"}),(0,c.jsxs)("span",{className:"text-war-gold/80 font-bold font-body",children:[o,"/4"]})]}),(0,c.jsx)("div",{className:"w-full bg-war-ink rounded-full h-2 overflow-hidden",children:(0,c.jsx)("div",{className:"h-full rounded-full transition-all duration-500",style:{width:"".concat(Math.round(Math.min(o,4)/4*100),"%"),background:"linear-gradient(to right, #6b1a2a, #c9a227)"}})}),(0,c.jsxs)("p",{className:"text-sm text-parchment-dark/40 mt-1 font-body",children:["Multiplier: x",s.toFixed(2)]})]})]})}const V={us:"United States",british:"British/Canada",native:"Native Coalition",neutral:"Neutral"};function Z(e){let{territoryId:t,territoryOwners:n,troops:r}=e;if(!t||!O[t])return(0,c.jsx)("div",{className:"bg-war-navy/50 rounded-lg p-4 border border-parchment-dark/8",children:(0,c.jsx)("p",{className:"text-parchment-dark/40 text-sm italic font-body",children:"Click a territory on the map to view details."})});const a=O[t],i=n[t]||a.startingOwner,o=r[t]||0;return(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-4 space-y-2 border border-parchment-dark/8",children:[(0,c.jsx)("h3",{className:"text-war-gold/90 font-display text-base tracking-wide",children:a.name}),(0,c.jsxs)("div",{className:"text-sm space-y-1.5 text-parchment/70 font-body",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"text-parchment-dark/50",children:"Theater:"})," ",a.theater]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"text-parchment-dark/50",children:"Controlled by:"})," ",V[i]]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"text-parchment-dark/50",children:"Troops:"})," ",o]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"text-parchment-dark/50",children:"Point value:"})," ",a.points," per round"]}),a.hasFort&&(0,c.jsx)("p",{className:"text-war-gold/70 text-sm",children:"\u26f3 Fortified \u2014 defenders get +1 die bonus"}),a.isNaval&&(0,c.jsx)("p",{className:"text-[#4a7ec7] text-sm",children:"~ Naval zone \u2014 requires naval superiority"})]}),a.adjacency&&(0,c.jsx)("div",{className:"pt-2 border-t border-parchment-dark/10",children:(0,c.jsxs)("p",{className:"text-sm text-parchment-dark/40 font-body",children:["Adjacent: ",a.adjacency.map(e=>{var t;return null===(t=O[e])||void 0===t?void 0:t.name}).filter(Boolean).join(", ")]})})]})}function J(e){let{playerFaction:t,onContinue:n,gameMode:r}=e;const a="explorer"===r,i={us:{title:"Welcome to the War of 1812",subtitle:"You are commanding the United States forces",context:"The year is 1812. The United States, still a young nation, is tired of British interference with American shipping and the impressment of American sailors into the Royal Navy. Britain is also supporting Native American resistance to U.S. expansion in the Northwest Territory.",simpleContext:"It is the year 1812. America is a young country. Britain keeps stopping American ships and taking American sailors. Britain is also helping Native Americans fight against American settlers moving west.",yourRole:"As the American commander, your goal is to defend U.S. territory and expand into British-held Canada. You'll need to build public support (nationalism) while managing your military forces across multiple theaters of war.",simpleYourRole:"You are the American leader. Your job is to protect American land and try to take over parts of Canada. You need to keep your people happy and lead your soldiers to victory.",objectives:["Control key strategic territories worth victory points","Build nationalism through military victories and smart decisions","Reach 50 victory points to win the war","Answer historical questions correctly for bonuses"],simpleObjectives:["Take control of important territories to earn points","Win battles to make your people proud","Get to 50 points to win the game","Answer history questions to get extra help"],historicalNote:'This conflict would later be called "The Second War of Independence" and would help establish the United States as a truly independent nation.',simpleHistoricalNote:"This war helped America show the world it was a real, strong country that could stand on its own.",howToPlay:null,simpleHowToPlay:["Each turn you will see a historical event, then place troops, fight battles, and move your army.","Read the events carefully \u2014 they have quiz questions that give you bonuses!","Click on territories to place troops, attack enemies, or move your army.",'Use the "?" button if you need help.']},british:{title:"Welcome to the War of 1812",subtitle:"You are commanding the British/Canadian forces",context:"The year is 1812. Britain is locked in a life-or-death struggle with Napoleon in Europe, but the upstart Americans have declared war! They seek to conquer Canada while Britain's attention is divided across the Atlantic.",simpleContext:"It is the year 1812. Britain is busy fighting a big war in Europe against Napoleon. Now America has also declared war on Britain! Americans want to take over Canada.",yourRole:"As the British commander, your goal is to defend Canada and protect your naval superiority. The Royal Navy rules the waves, and you must use this advantage while coordinating with Native allies to hold the line against American expansion.",simpleYourRole:"You are the British leader. Your job is to protect Canada from American invaders. You have the strongest navy in the world. Work with Native allies to stop America from growing.",objectives:["Defend Canadian territories from American invasion","Use naval superiority to control coastal and Great Lakes territories","Reach 50 victory points to win the war","Answer historical questions correctly for bonuses"],simpleObjectives:["Protect Canada from American attacks","Use your strong navy to control the waters","Get to 50 points to win the game","Answer history questions to get extra help"],historicalNote:"Britain successfully defended Canada despite fighting a two-front war, proving that even a young nation's ambitions could be checked by experienced military might.",simpleHistoricalNote:"Britain kept Canada safe even while fighting another war in Europe. This showed how powerful Britain's army and navy really were.",howToPlay:null,simpleHowToPlay:["Each turn you will see a historical event, then place troops, fight battles, and move your army.","Read the events carefully \u2014 they have quiz questions that give you bonuses!","Click on territories to place troops, attack enemies, or move your army.",'Use the "?" button if you need help.']},native:{title:"Welcome to the War of 1812",subtitle:"You are commanding the Native Coalition",context:"The year is 1812. For decades, American settlers have pushed westward into Native lands. Tecumseh has forged a powerful confederacy of tribes to resist this expansion, and the British-American conflict offers a chance to halt American aggression permanently.",simpleContext:"It is the year 1812. For many years, American settlers have been moving onto Native lands. A leader named Tecumseh has brought many tribes together to fight back. Now that Britain and America are at war, the tribes have a chance to protect their homeland.",yourRole:"As the Native commander, your goal is to protect tribal lands and stop American expansion. You'll use guerrilla tactics and knowledge of the frontier to fight for your people's survival and sovereignty.",simpleYourRole:"You are the Native leader. Your job is to protect your people's land from American settlers. You know the forests and rivers better than anyone. Use that knowledge to win.",objectives:["Hold and expand control of frontier territories","Maintain tribal resistance across multiple regions","Reach 50 victory points to preserve Native sovereignty","Answer historical questions correctly for bonuses"],simpleObjectives:["Hold onto your land and take back what you can","Keep your tribes strong across the frontier","Get to 50 points to protect your homeland","Answer history questions to get extra help"],historicalNote:"The Native coalition fought valiantly, but ultimately the war would mark the beginning of the end for organized Native resistance east of the Mississippi River.",simpleHistoricalNote:"The Native tribes fought bravely, but sadly the war made it harder for them to keep their lands east of the Mississippi River.",howToPlay:null,simpleHowToPlay:["Each turn you will see a historical event, then place troops, fight battles, and move your army.","Read the events carefully \u2014 they have quiz questions that give you bonuses!","Click on territories to place troops, attack enemies, or move your army.",'Use the "?" button if you need help.']}},o=i[t]||i.us,s=a&&o.simpleContext?o.simpleContext:o.context,l=a&&o.simpleYourRole?o.simpleYourRole:o.yourRole,d=a&&o.simpleObjectives?o.simpleObjectives:o.objectives,h=a&&o.simpleHistoricalNote?o.simpleHistoricalNote:o.historicalNote,u=a&&o.simpleHowToPlay?o.simpleHowToPlay:null;return(0,c.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:1e3,background:"radial-gradient(ellipse at center, rgba(20,30,48,0.95) 0%, rgba(10,10,8,0.98) 100%)"},role:"presentation",children:(0,c.jsxs)("div",{className:"w-full max-w-4xl max-h-full overflow-y-auto bg-war-navy border border-war-gold/30 shadow-modal rounded-lg animate-fadein",role:"dialog","aria-modal":"true","aria-label":"Campaign briefing",children:[(0,c.jsxs)("div",{className:"px-8 py-6 border-b border-war-gold/20",style:{background:"linear-gradient(135deg, rgba(139,26,26,0.3) 0%, rgba(20,30,48,0.95) 100%)"},children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"}),(0,c.jsx)("p",{className:"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold",children:"Campaign Briefing"})]}),(0,c.jsx)("h1",{className:"text-3xl md:text-4xl font-display text-war-gold tracking-wide mb-1",children:o.title}),(0,c.jsx)("p",{className:"text-parchment/80 font-body italic ".concat(a?"text-xl leading-relaxed":"text-lg"),children:o.subtitle})]}),(0,c.jsxs)("div",{className:"px-8 space-y-6 ".concat(a?"py-10":"py-8"),children:[(0,c.jsxs)("section",{children:[(0,c.jsx)("h2",{className:"text-war-gold/80 font-display text-xl mb-3 border-b border-war-gold/15 pb-2 tracking-wide",children:"Historical Context"}),(0,c.jsx)("p",{className:"text-parchment/80 font-body ".concat(a?"text-lg leading-loose":"text-base leading-relaxed"),children:s})]}),(0,c.jsxs)("section",{className:"bg-black/20 rounded-lg p-6 border-l-2 border-war-copper/50",children:[(0,c.jsx)("p",{className:"text-xs text-war-copper/80 uppercase tracking-wider mb-2 font-body font-bold",children:"Your Role"}),(0,c.jsx)("p",{className:"text-parchment/80 font-body ".concat(a?"text-lg leading-loose":"text-base leading-relaxed"),children:l})]}),(0,c.jsxs)("section",{children:[(0,c.jsx)("h2",{className:"text-war-gold/80 font-display text-xl mb-3 border-b border-war-gold/15 pb-2 tracking-wide",children:"Your Objectives"}),(0,c.jsx)("ul",{className:"".concat(a?"space-y-4":"space-y-3"),children:d.map((e,t)=>(0,c.jsxs)("li",{className:"flex items-start text-parchment/80 font-body ".concat(a?"text-lg":"text-base"),children:[(0,c.jsxs)("span",{className:"text-war-gold font-bold mr-3 text-lg font-display",children:[t+1,"."]}),(0,c.jsx)("span",{className:a?"leading-loose":"leading-relaxed",children:e})]},t))})]}),(0,c.jsxs)("section",{className:"bg-war-red/10 rounded-lg p-5 border-l-2 border-war-red/40",children:[(0,c.jsx)("p",{className:"text-xs text-war-copper/80 uppercase tracking-wider mb-2 font-body font-bold",children:"Historical Note"}),(0,c.jsx)("p",{className:"text-parchment/70 font-body italic ".concat(a?"text-lg leading-loose":"text-base leading-relaxed"),children:h})]}),(0,c.jsxs)("section",{className:"bg-war-gold/5 rounded-lg p-5 border border-war-gold/15",children:[(0,c.jsx)("p",{className:"text-xs text-war-gold/80 uppercase tracking-wider mb-3 font-body font-bold",children:"How to Play"}),u?(0,c.jsx)("ul",{className:"space-y-3 text-parchment-dark/70 font-body ".concat(a?"text-lg leading-loose":"text-sm"),children:u.map((e,t)=>(0,c.jsxs)("li",{className:"flex items-start gap-2",children:[(0,c.jsx)("span",{className:"text-war-gold/60 font-bold flex-shrink-0",children:"\u2022"}),(0,c.jsx)("span",{children:e})]},t))}):(0,c.jsxs)("div",{className:"space-y-2 text-parchment-dark/70 text-sm font-body",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"text-parchment/80",children:"Each turn"})," has phases: Event \u2192 Allocate troops \u2192 Battle \u2192 Maneuver \u2192 Score"]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"text-parchment/80",children:"Read historical events"})," carefully \u2014 they include knowledge questions with bonuses"]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"text-parchment/80",children:"Click territories"})," during your turn to place troops, attack, or move forces"]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"text-parchment/80",children:"Use the tutorial"})," button if you need help understanding the game mechanics"]})]})]})]}),(0,c.jsx)("div",{className:"px-8 pb-8 sticky bottom-0 bg-war-navy pt-4",children:(0,c.jsx)("button",{onClick:n,className:"w-full font-display rounded-lg font-bold tracking-wider\n                       bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer transition-colors\n                       shadow-copper ".concat(a?"py-5 text-xl":"py-4 text-lg"),children:"Begin Your Campaign"})})]})})}function Q(t){let{event:n,onDismiss:r,gameMode:a}=t;const[i,o]=(0,e.useState)(4),[s,l]=(0,e.useState)("reading"),[d,h]=(0,e.useState)(null),u=(0,e.useMemo)(()=>null!==n&&void 0!==n&&n.quiz?function(e,t){const n=e.map((e,t)=>t);for(let r=n.length-1;r>0;r--){const e=Math.floor(Math.random()*(r+1));[n[r],n[e]]=[n[e],n[r]]}return{choices:n.map(t=>e[t]),correctIndex:n.indexOf(t),indices:n}}(n.quiz.choices,n.quiz.correctIndex):null,[n]);if((0,e.useEffect)(()=>{if(o(4),l("reading"),h(null),!n)return;const e=setInterval(()=>{o(t=>t<=1?(clearInterval(e),0):t-1)},1e3);return()=>clearInterval(e)},[n]),(0,e.useEffect)(()=>{0===i&&"reading"===s&&l(null!==n&&void 0!==n&&n.quiz&&u?"quiz":"result")},[i,s,n,u]),!n)return null;const p="explorer"===a,m=null!==d&&u&&d===u.correctIndex;return(0,c.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:1e3,background:"radial-gradient(ellipse at center, rgba(20,30,48,0.95) 0%, rgba(10,10,8,0.98) 100%)"},role:"presentation",children:(0,c.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-war-navy border border-war-gold/30 shadow-modal rounded-lg animate-fadein",role:"dialog","aria-modal":"true","aria-label":"Historical event: ".concat(n.title),children:[(0,c.jsx)("div",{className:"sticky top-0 z-10 px-6 py-4 border-b border-war-gold/20",style:{background:"linear-gradient(135deg, rgba(139,26,26,0.4) 0%, rgba(20,30,48,0.95) 100%)"},children:(0,c.jsx)("div",{className:"flex items-center justify-between",children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"}),(0,c.jsx)("p",{className:"text-war-copper text-sm tracking-[0.2em] uppercase font-body font-bold",children:"Historical Event"})]}),(0,c.jsx)("p",{className:"text-parchment-dark/50 text-sm font-body",children:n.year})]})})}),(0,c.jsxs)("div",{className:"px-6 py-5",children:[(0,c.jsx)("h2",{className:"text-2xl font-display text-parchment mb-4 tracking-wide",children:n.title}),(0,c.jsxs)("p",{className:"text-parchment/80 text-base leading-relaxed mb-5 font-body italic border-l-2 border-war-gold/20 pl-4",children:["\u201c",p&&n.simpleDescription?n.simpleDescription:n.description,"\u201d"]}),n.primarySource&&!p&&(0,c.jsxs)("div",{className:"bg-war-ink/40 rounded px-5 py-4 mb-5 border border-parchment-dark/10 relative",children:[(0,c.jsx)("span",{className:"absolute -top-2 left-4 text-war-gold/30 text-3xl font-serif leading-none","aria-hidden":"true",children:"\u201c"}),(0,c.jsx)("p",{className:"text-parchment/90 text-base leading-relaxed font-serif italic pl-3",children:n.primarySource.quote}),(0,c.jsxs)("p",{className:"text-war-copper/70 text-sm font-body mt-2 pl-3",children:["\u2014 ",n.primarySource.attribution]})]}),n.didYouKnow&&(0,c.jsxs)("div",{className:"bg-war-gold/5 rounded px-5 py-4 mb-5 border border-war-gold/15",children:[(0,c.jsx)("p",{className:"text-sm text-war-gold/80 uppercase tracking-wider mb-1 font-body font-bold",children:"Did You Know?"}),(0,c.jsx)("p",{className:"text-parchment/80 text-base leading-relaxed font-body",children:p&&n.simpleDidYouKnow?n.simpleDidYouKnow:n.didYouKnow})]}),(0,c.jsxs)("div",{className:"bg-black/20 rounded px-5 py-4 border-l-2 border-war-copper/50",children:[(0,c.jsx)("p",{className:"text-sm text-war-copper/80 uppercase tracking-wider mb-1 font-body font-bold",children:"Effect"}),(0,c.jsx)("p",{className:"text-parchment/90 text-base font-body",children:p&&n.simpleEffect?n.simpleEffect:n.effect})]})]}),"quiz"===s&&u&&(0,c.jsx)("div",{className:"px-6 pb-5",children:(0,c.jsxs)("div",{className:"border-t border-war-gold/15 pt-5",children:[(0,c.jsx)("p",{className:"text-war-gold/80 text-sm tracking-[0.15em] uppercase font-body font-bold mb-3",children:"Knowledge Check"}),(0,c.jsx)("p",{className:"text-parchment/90 text-base leading-relaxed mb-5 font-body",children:p&&n.quiz.simpleQuestion?n.quiz.simpleQuestion:n.quiz.question}),(0,c.jsx)("div",{className:"space-y-2.5",children:u.choices.map((e,t)=>{const r=u.indices[t],a=p&&n.quiz.simpleChoices&&n.quiz.simpleChoices[r]||e;return(0,c.jsxs)("button",{onClick:()=>(h(t),void l("result")),className:"w-full text-left px-4 py-3 rounded border border-parchment-dark/15 hover:border-war-gold/40 hover:bg-war-gold/5 transition-all text-parchment/85 text-base font-body cursor-pointer group",children:[(0,c.jsxs)("span",{className:"text-war-gold/70 font-bold mr-2 group-hover:text-war-gold",children:[String.fromCharCode(65+t),"."]}),a]},t)})})]})}),"result"===s&&null!==d&&u&&(0,c.jsx)("div",{className:"px-6 pb-2",children:(0,c.jsx)("div",{className:"border-t border-war-gold/15 pt-5",children:(0,c.jsxs)("div",{className:"p-4 rounded border-l-2 mb-4 ".concat(m?"bg-green-900/20 border-green-500/60":"bg-red-900/15 border-red-500/50"),children:[(0,c.jsx)("p",{className:"text-lg font-bold mb-2 font-display ".concat(m?"text-green-400":"text-red-400"),children:m?"Correct!":"Not quite."}),(0,c.jsxs)("p",{className:"text-parchment/80 text-sm leading-relaxed font-body mb-1",children:[(0,c.jsx)("span",{className:"text-war-gold/80 font-bold",children:"Answer: "}),p&&n.quiz.simpleChoices&&n.quiz.simpleChoices[n.quiz.correctIndex]||n.quiz.choices[n.quiz.correctIndex]]}),(0,c.jsx)("p",{className:"text-parchment/70 text-sm leading-relaxed font-body",children:p&&n.quiz.simpleExplanation?n.quiz.simpleExplanation:n.quiz.explanation}),m&&n.quiz.reward&&(0,c.jsxs)("p",{className:"text-war-gold text-sm font-bold mt-3 font-body",children:["Bonus: ",n.quiz.reward.troops?"+".concat(n.quiz.reward.troops," troops"):"",n.quiz.reward.nationalism?" +".concat(n.quiz.reward.nationalism," nationalism"):""]}),!m&&n.quiz.penalty&&(0,c.jsxs)("p",{className:"text-red-400/80 text-sm font-bold mt-3 font-body",children:["Penalty: ",n.quiz.penalty.nationalism?"".concat(n.quiz.penalty.nationalism," nationalism"):"",n.quiz.penalty.troops?" ".concat(n.quiz.penalty.troops," troops"):""]})]})})}),(0,c.jsxs)("div",{className:"px-6 pb-5 sticky bottom-0 bg-war-navy pt-3",children:["reading"===s&&(0,c.jsxs)("div",{className:"w-full py-3 text-center",children:[(0,c.jsxs)("span",{className:"text-parchment-dark/40 text-sm font-body",children:["Reading... (",i,"s)"]}),(0,c.jsx)("div",{className:"mt-2 w-full h-0.5 bg-parchment-dark/10 rounded overflow-hidden",children:(0,c.jsx)("div",{className:"h-full bg-war-gold/40 transition-all duration-1000",style:{width:"".concat((4-i)/4*100,"%")}})})]}),"quiz"===s&&(0,c.jsx)("p",{className:"text-center text-parchment-dark/40 text-sm italic py-3 font-body",children:"Select your answer above"}),"result"===s&&(0,c.jsx)("button",{onClick:()=>{const e=null!==d&&u?{answered:!0,correct:d===u.correctIndex}:{answered:!1};r(e)},className:"w-full py-3 font-display rounded text-base font-bold tracking-wider bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer transition-colors shadow-copper",children:"Continue"})]})]})})}function $(e){let{value:t,color:n="#ffffff",size:r=52}=e;const a={1:[[24,24]],2:[[14,14],[34,34]],3:[[14,14],[24,24],[34,34]],4:[[14,14],[34,14],[14,34],[34,34]],5:[[14,14],[34,14],[24,24],[14,34],[34,34]],6:[[14,14],[34,14],[14,24],[34,24],[14,34],[34,34]],7:[[14,10],[34,10],[14,24],[24,24],[34,24],[14,38],[34,38]]},i=a[Math.min(t,7)]||a[1];return(0,c.jsxs)("svg",{width:r,height:r,viewBox:"0 0 48 48","aria-label":"Die showing ".concat(t),role:"img",children:[(0,c.jsx)("rect",{x:"2",y:"2",width:"44",height:"44",rx:"6",fill:n,opacity:"0.12",stroke:n,strokeWidth:"1.5"}),i.map((e,t)=>{let[r,a]=e;return(0,c.jsx)("circle",{cx:r,cy:a,r:"4",fill:n},t)})]})}function X(t){let{battle:n,onClose:r}=t;const[a,i]=(0,e.useState)(!0),[o,s]=(0,e.useState)(!1);if((0,e.useEffect)(()=>{if(!o)return;const e=e=>{"Escape"===e.key&&(e.preventDefault(),r())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o,r]),(0,e.useEffect)(()=>{if(n){if(n.undefended)return i(!1),void s(!0);i(!0),s(!1);const e=setTimeout(()=>{i(!1),s(!0)},1200);return()=>clearTimeout(e)}},[n]),!n)return null;const l=O[n.fromId],d=O[n.toId];return(0,c.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",style:{zIndex:1e3},role:"presentation",children:(0,c.jsxs)("div",{className:"bg-war-navy border border-war-red/40 rounded-lg max-w-lg w-full overflow-hidden shadow-modal animate-fadein",role:"dialog","aria-modal":"true","aria-label":"Battle results",children:[(0,c.jsxs)("div",{className:"px-6 py-4 border-b border-war-red/20",style:{background:"linear-gradient(135deg, rgba(139,26,26,0.5) 0%, rgba(20,30,48,0.95) 100%)"},children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500/80"}),(0,c.jsx)("p",{className:"text-red-400/80 text-sm tracking-[0.2em] uppercase font-body font-bold",children:"Battle"})]}),(0,c.jsxs)("h2",{className:"text-parchment font-display text-lg tracking-wide",children:[null===l||void 0===l?void 0:l.name," ",(0,c.jsx)("span",{className:"text-war-gold/60 font-body text-base mx-1",children:"vs"})," ",null===d||void 0===d?void 0:d.name]})]}),(0,c.jsxs)("div",{className:"px-6 py-5",children:[n.undefended?(0,c.jsxs)("div",{className:"text-center py-4 mb-4",children:[(0,c.jsx)("p",{className:"text-parchment font-display text-lg mb-2",children:"Undefended Territory"}),(0,c.jsx)("p",{className:"text-parchment-dark/60 text-sm font-body",children:"Your forces march in unopposed."})]}):(0,c.jsxs)("div",{className:"flex justify-between mb-5",children:[(0,c.jsxs)("div",{className:"text-center flex-1",children:[(0,c.jsx)("p",{className:"text-[#4a90d9] text-sm uppercase tracking-wider mb-3 font-body font-bold",children:"Attacker"}),(0,c.jsx)("div",{className:"flex gap-1.5 justify-center",children:n.attackRolls.map((e,t)=>(0,c.jsx)("div",{className:a?"animate-bounce":"",children:(0,c.jsx)($,{value:a?Math.floor(6*Math.random())+1:e,color:"#4a90d9"})},t))})]}),(0,c.jsx)("div",{className:"flex items-center px-3",children:(0,c.jsx)("span",{className:"text-war-gold/40 font-display text-2xl",children:"vs"})}),(0,c.jsxs)("div",{className:"text-center flex-1",children:[(0,c.jsx)("p",{className:"text-red-400 text-sm uppercase tracking-wider mb-3 font-body font-bold",children:"Defender"}),(0,c.jsx)("div",{className:"flex gap-1.5 justify-center",children:n.defendRolls.map((e,t)=>(0,c.jsx)("div",{className:a?"animate-bounce":"",children:(0,c.jsx)($,{value:a?Math.floor(6*Math.random())+1:e,color:"#e63946"})},t))})]})]}),o&&(0,c.jsxs)("div",{className:"space-y-3 animate-slideup",children:[(0,c.jsxs)("div",{className:"flex justify-between text-sm font-body",children:[(0,c.jsxs)("div",{className:"text-parchment/80",children:[(0,c.jsx)("span",{className:"text-parchment-dark/50",children:"Attacker lost:"})," ",(0,c.jsx)("span",{className:"text-red-400 font-bold text-base",children:n.attackerLosses})]}),(0,c.jsxs)("div",{className:"text-parchment/80",children:[(0,c.jsx)("span",{className:"text-parchment-dark/50",children:"Defender lost:"})," ",(0,c.jsx)("span",{className:"text-red-400 font-bold text-base",children:n.defenderLosses})]})]}),(n.attackLeaderBonus>0||n.defendLeaderBonus>0||n.fortBonus||n.firstStrike)&&(0,c.jsxs)("div",{className:"text-sm text-war-gold/80 bg-war-gold/5 border border-war-gold/10 rounded px-4 py-2.5 font-body",children:[n.firstStrike&&(0,c.jsx)("p",{className:"font-bold",children:"Ambush! First strike before dice!"}),n.attackLeaderBonus>0&&(0,c.jsxs)("p",{children:["Attacker leader: +",n.attackLeaderBonus]}),n.defendLeaderBonus>0&&(0,c.jsxs)("p",{children:["Defender leader: +",n.defendLeaderBonus]}),n.fortBonus&&(0,c.jsx)("p",{children:"Fort defense: +1"})]}),(0,c.jsx)("div",{className:"text-center py-3.5 rounded text-lg font-display font-bold tracking-wide ".concat(n.conquered?"bg-green-900/25 border border-green-500/30 text-green-400":"bg-red-900/15 border border-red-500/20 text-parchment/80"),children:n.conquered?"".concat(null===d||void 0===d?void 0:d.name," Captured!"):"Defenders Hold!"})]})]}),o&&(0,c.jsx)("div",{className:"px-6 pb-5",children:(0,c.jsx)("button",{onClick:r,className:"w-full py-3 bg-war-gold text-war-ink font-display rounded hover:bg-war-brass transition-colors cursor-pointer text-base font-bold tracking-wide shadow-copper",children:"Continue"})})]})})}function ee(t){let{question:n,onAnswer:r,questionNumber:a,gameMode:i}=t;const[o,s]=(0,e.useState)(null),[l,d]=(0,e.useState)(!1);if(!n)return null;const h="explorer"===i,u=o===n.correctIndex;return(0,c.jsxs)("div",{className:"fixed inset-0 flex justify-end pointer-events-none",style:{zIndex:1e3},role:"presentation",children:[(0,c.jsx)("div",{className:"absolute inset-0 pointer-events-auto",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,0.9) 0%, rgba(10,10,8,0.95) 100%)"}}),(0,c.jsxs)("div",{className:"relative w-full max-w-md h-full overflow-y-auto pointer-events-auto bg-war-navy border-l border-war-gold/20 shadow-modal kc-modal-animate",role:"dialog","aria-modal":"true","aria-label":"Knowledge check question",children:[(0,c.jsxs)("div",{className:"px-6 py-4 border-b border-war-gold/20 sticky top-0 z-10",style:{background:"linear-gradient(135deg, rgba(45,90,39,0.4) 0%, rgba(20,30,48,0.95) 100%)"},children:[(0,c.jsx)("div",{className:"flex items-center justify-between",children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500/60"}),(0,c.jsx)("p",{className:"text-war-gold/80 text-sm tracking-[0.2em] uppercase font-body font-bold",children:"Knowledge Check"})]}),a>0&&(0,c.jsxs)("span",{className:"text-parchment-dark/40 text-sm font-body",children:["Question #",a]})]})}),(0,c.jsx)("p",{className:"text-parchment-dark/50 text-sm font-body mt-1",children:"Answer correctly for a bonus!"})]}),(0,c.jsxs)("div",{className:"px-6 py-6",children:[(0,c.jsx)("h2",{className:"text-xl font-display text-parchment/90 mb-5 leading-relaxed tracking-wide",children:h&&n.simpleQuestion?n.simpleQuestion:n.question}),(0,c.jsx)("div",{className:"space-y-2.5",children:n.choices.map((e,t)=>{let r="border-parchment-dark/15 hover:border-war-gold/40 hover:bg-war-gold/5";l?r=t===n.correctIndex?"border-green-500/40 bg-green-900/20":t!==o||u?"border-parchment-dark/10 opacity-60":"border-red-500/40 bg-red-900/15":t===o&&(r="border-war-gold/40 bg-war-gold/5");const a=n.shuffleIndices?n.shuffleIndices[t]:t,i=h&&n.simpleChoices&&n.simpleChoices[a]||e;return(0,c.jsxs)("button",{onClick:()=>{return e=t,void(l||(s(e),d(!0)));var e},disabled:l,className:"w-full text-left px-5 py-3 rounded border transition-all\n                    text-parchment/80 text-base font-body ".concat(r,"\n                    ").concat(l?"cursor-default":"cursor-pointer"),children:[(0,c.jsxs)("span",{className:"text-war-gold/70 font-bold mr-2",children:[String.fromCharCode(65+t),"."]}),i]},t)})}),l&&(0,c.jsxs)("div",{className:"mt-5 p-4 rounded border-l-2 ".concat(u?"bg-green-900/15 border-green-500/50":"bg-red-900/10 border-red-500/40"),children:[(0,c.jsx)("p",{className:"text-lg font-bold mb-2 font-display ".concat(u?"text-green-400":"text-red-400"),children:u?"Correct!":"Not quite."}),(0,c.jsx)("p",{className:"text-parchment/70 text-sm leading-relaxed font-body",children:h&&n.simpleExplanation?n.simpleExplanation:n.explanation}),u&&n.reward&&(0,c.jsxs)("p",{className:"text-war-gold text-sm font-bold mt-3 font-body",children:["Bonus: ",n.reward.description]})]})]}),l&&(0,c.jsx)("div",{className:"px-6 pb-5 sticky bottom-0 bg-war-navy pt-3",children:(0,c.jsx)("button",{onClick:()=>{r(u,o),s(null),d(!1)},className:"w-full py-3 bg-war-gold text-war-ink font-display rounded hover:bg-war-brass transition-colors cursor-pointer text-sm font-bold tracking-wider shadow-copper",children:"Continue"})})]})]})}function te(e){let{totalAnswered:t,totalCorrect:n,onTakeCheck:r}=e;const a=t>0?Math.round(n/t*100):0;return(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8","data-tutorial":"knowledge-check",children:[(0,c.jsx)("h3",{className:"text-war-gold/90 font-display text-base tracking-wide border-b border-war-gold/15 pb-2 mb-3",children:"History Quiz"}),t>0?(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsxs)("div",{className:"flex justify-between text-sm text-parchment/70 mb-1.5 font-body",children:[(0,c.jsxs)("span",{children:[n,"/",t," correct"]}),(0,c.jsxs)("span",{className:"text-war-gold font-bold",children:[a,"%"]})]}),(0,c.jsx)("div",{className:"w-full bg-war-ink rounded-full h-2 border border-parchment-dark/10 overflow-hidden",children:(0,c.jsx)("div",{className:"h-full rounded-full transition-all duration-300",style:{width:"".concat(a,"%"),background:"linear-gradient(to right, #854d0e, #c9a227)"}})})]}):(0,c.jsx)("p",{className:"text-parchment-dark/40 text-sm italic mb-3 font-body",children:"Test your knowledge of the War of 1812!"}),(0,c.jsx)("button",{onClick:r,className:"w-full py-2 bg-war-green text-parchment font-display text-sm rounded tracking-wide hover:brightness-125 transition-all cursor-pointer border border-green-800/50",children:"Take a Quiz"})]})}function ne(t){let{objectives:n}=t;const[r,a]=(0,e.useState)(null);if(!n||0===n.length)return null;const i=n.filter(e=>e.completed).length;return(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8",children:[(0,c.jsxs)("h3",{className:"text-war-gold/90 font-display text-base tracking-wide border-b border-war-gold/15 pb-2 mb-3",children:["Objectives (",i,"/",n.length,")"]}),(0,c.jsx)("div",{className:"space-y-2",children:n.map(e=>{const t=r===e.id,n=e.progressInfo,i=n?Math.round(n.current/n.total*100):e.completed?100:0;return(0,c.jsx)("div",{className:"p-2 rounded cursor-pointer transition-colors ".concat(e.completed?"bg-green-900/15":"hover:bg-black/15"),onClick:()=>a(t?null:e.id),children:(0,c.jsxs)("div",{className:"flex items-start gap-2",children:[(0,c.jsx)("span",{className:"text-sm mt-0.5 flex-shrink-0",children:e.completed?"\u2705":"\u2b1c"}),(0,c.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,c.jsxs)("p",{className:"text-sm font-bold font-body ".concat(e.completed?"text-green-300/90":"text-parchment/80"),children:[e.title,(0,c.jsxs)("span",{className:"text-war-gold/60 font-normal ml-1",children:["(",e.points," pts)"]})]}),(0,c.jsx)("p",{className:"text-parchment-dark/50 text-sm font-body",children:e.description}),!e.completed&&n&&(0,c.jsx)("div",{className:"mt-1.5",children:(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("div",{className:"flex-1 bg-war-ink rounded-full h-1.5 overflow-hidden",children:(0,c.jsx)("div",{className:"h-1.5 rounded-full transition-all duration-300",style:{width:"".concat(i,"%"),background:"linear-gradient(to right, #854d0e, #c9a227)"}})}),(0,c.jsxs)("span",{className:"text-parchment-dark/40 text-sm font-body",children:[n.current,"/",n.total]})]})}),t&&e.historicalContext&&(0,c.jsxs)("div",{className:"mt-2 bg-black/20 rounded px-3 py-2 border-l-2 border-war-copper/30",children:[(0,c.jsx)("p",{className:"text-war-copper/70 text-sm uppercase tracking-wide font-bold mb-0.5 font-body",children:"Why It Matters"}),(0,c.jsx)("p",{className:"text-parchment-dark/60 text-sm leading-relaxed font-body",children:e.historicalContext})]})]})]})},e.id)})})]})}function re(t){let{entries:n,round:r}=t;const[a,i]=(0,e.useState)(!1);if(!n||0===n.length)return null;const o=a?n:n.filter(e=>e.round>=r-1);return(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,c.jsx)("h3",{className:"text-war-gold/90 font-display text-base tracking-wide border-b border-war-gold/15 pb-2 flex-1",children:"War Journal"}),n.length>2&&(0,c.jsx)("button",{onClick:()=>i(!a),className:"text-parchment-dark/40 text-sm hover:text-war-gold/70 transition-colors cursor-pointer ml-2 font-body",children:a?"Recent":"All (".concat(n.length,")")})]}),(0,c.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto pr-1",children:o.map((e,t)=>(0,c.jsxs)("div",{className:"border-l-2 border-war-copper/20 pl-3",children:[(0,c.jsxs)("p",{className:"text-war-gold/70 text-sm font-bold font-body",children:["Round ",e.round," \u2014 ",e.season]}),e.items.map((e,t)=>(0,c.jsx)("p",{className:"text-parchment/70 text-sm leading-relaxed font-body",children:e},t))]},t))})]})}function ae(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function ie(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;class oe extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class se extends oe{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class le extends oe{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ce extends oe{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var de;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(de||(de={}));class he{constructor(e){let{headers:t={},customFetch:n,region:r=de.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=r,this.fetch=(e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)})(n)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){return ie(this,arguments,void 0,function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var r;let a,i;try{const{headers:o,method:s,body:l,signal:c,timeout:d}=n;let h={},{region:u}=n;u||(u=t.region);const p=new URL("".concat(t.url,"/").concat(e));let m;u&&"any"!==u&&(h["x-region"]=u,p.searchParams.set("forceFunctionRegion",u)),l&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?"undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",m=l):"string"===typeof l?(h["Content-Type"]="text/plain",m=l):"undefined"!==typeof FormData&&l instanceof FormData?m=l:(h["Content-Type"]="application/json",m=JSON.stringify(l)):m=!l||"string"===typeof l||"undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer||"undefined"!==typeof FormData&&l instanceof FormData?l:JSON.stringify(l);let f=c;d&&(i=new AbortController,a=setTimeout(()=>i.abort(),d),c?(f=i.signal,c.addEventListener("abort",()=>i.abort())):f=i.signal);const g=yield t.fetch(p.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},h),t.headers),o),body:m,signal:f}).catch(e=>{throw new se(e)}),y=g.headers.get("x-relay-error");if(y&&"true"===y)throw new le(g);if(!g.ok)throw new ce(g);let w,v=(null!==(r=g.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return w="application/json"===v?yield g.json():"application/octet-stream"===v||"application/pdf"===v?yield g.blob():"text/event-stream"===v?g:"multipart/form-data"===v?yield g.formData():yield g.text(),{data:w,error:null,response:g}}catch(o){return{data:null,error:o,response:o instanceof ce||o instanceof le?o.context:void 0}}finally{a&&clearTimeout(a)}}()})}}var ue=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},pe=class{constructor(e){var t,n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,this.urlLengthLimit=null!==(r=e.urlLengthLimit)&&void 0!==r?r:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{let t=null,r=null,a=null,i=e.status,o=e.statusText;if(e.ok){var s,l;if("HEAD"!==n.method){var c;const t=await e.text();""===t||(r="text/csv"===n.headers.get("Accept")||n.headers.get("Accept")&&(null===(c=n.headers.get("Accept"))||void 0===c?void 0:c.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}const d=null===(s=n.headers.get("Prefer"))||void 0===s?void 0:s.match(/count=(exact|planned|estimated)/),h=null===(l=e.headers.get("content-range"))||void 0===l?void 0:l.split("/");d&&h&&h.length>1&&(a=parseInt(h[1])),n.isMaybeSingle&&"GET"===n.method&&Array.isArray(r)&&(r.length>1?(t={code:"PGRST116",details:"Results contain ".concat(r.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},r=null,a=null,i=406,o="Not Acceptable"):r=1===r.length?r[0]:null)}else{var d;const a=await e.text();try{t=JSON.parse(a),Array.isArray(t)&&404===e.status&&(r=[],t=null,i=200,o="OK")}catch(h){404===e.status&&""===a?(i=204,o="No Content"):t={message:a}}if(t&&n.isMaybeSingle&&(null===t||void 0===t||null===(d=t.details)||void 0===d?void 0:d.includes("0 rows"))&&(t=null,i=200,o="OK"),t&&n.shouldThrowOnError)throw new ue(t)}return{error:t,data:r,count:a,status:i,statusText:o}});return this.shouldThrowOnError||(r=r.catch(e=>{var t;let n="",r="",a="";const i=null===e||void 0===e?void 0:e.cause;if(i){var o,s,l,c;const t=null!==(o=null===i||void 0===i?void 0:i.message)&&void 0!==o?o:"",r=null!==(s=null===i||void 0===i?void 0:i.code)&&void 0!==s?s:"";n="".concat(null!==(l=null===e||void 0===e?void 0:e.name)&&void 0!==l?l:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),n+="\n\nCaused by: ".concat(null!==(c=null===i||void 0===i?void 0:i.name)&&void 0!==c?c:"Error",": ").concat(t),r&&(n+=" (".concat(r,")")),(null===i||void 0===i?void 0:i.stack)&&(n+="\n".concat(i.stack))}else{var d;n=null!==(d=null===e||void 0===e?void 0:e.stack)&&void 0!==d?d:""}const h=this.url.toString().length;return"AbortError"===(null===e||void 0===e?void 0:e.name)||"ABORT_ERR"===(null===e||void 0===e?void 0:e.code)?(a="",r="Request was aborted (timeout or manual cancellation)",h>this.urlLengthLimit&&(r+=". Note: Your request URL is ".concat(h," characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side."))):"HeadersOverflowError"!==(null===i||void 0===i?void 0:i.name)&&"UND_ERR_HEADERS_OVERFLOW"!==(null===i||void 0===i?void 0:i.code)||(a="",r="HTTP headers exceeded server limits (typically 16KB)",h>this.urlLengthLimit&&(r+=". Your request URL is ".concat(h," characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead."))),{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:n,hint:r,code:a},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},me=class extends pe{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=a?"".concat(a,".order"):"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,"".concat(o?"".concat(o,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a="undefined"===typeof r?"offset":"".concat(r,".offset"),i="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(a,"".concat(e)),this.url.searchParams.set(i,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:i="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o;const s=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(o=this.headers.get("Accept"))&&void 0!==o?o:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(i,'; for="').concat(l,'"; options=').concat(s,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}};const fe=new RegExp("[,()]");var ge=class extends me{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}regexMatch(e,t){return this.url.searchParams.append(e,"match.".concat(t)),this}regexIMatch(e,t){return this.url.searchParams.append(e,"imatch.".concat(t)),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}isDistinct(e,t){return this.url.searchParams.append(e,"isdistinct.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&fe.test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}notIn(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&fe.test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"not.in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const i=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(a,"fts").concat(i,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?"".concat(n,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}},ye=class{constructor(e,t){let{headers:n={},schema:r,fetch:a,urlLengthLimit:i=8e3}=t;this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=a,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=null!==t&&void 0!==t?t:{},a=n?"HEAD":"GET";let i=!1;const o=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join(""),{url:s,headers:l}=this.cloneRequestState();return s.searchParams.set("select",o),r&&l.append("Prefer","count=".concat(r)),new ge({method:a,url:s,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;const{url:a,headers:i}=this.cloneRequestState();if(t&&i.append("Prefer","count=".concat(t)),n||i.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));a.searchParams.set("columns",e.join(","))}}return new ge({method:"POST",url:a,headers:i,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;const{url:o,headers:s}=this.cloneRequestState();if(s.append("Prefer","resolution=".concat(n?"ignore":"merge","-duplicates")),void 0!==t&&o.searchParams.set("on_conflict",t),r&&s.append("Prefer","count=".concat(r)),a||s.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));o.searchParams.set("columns",e.join(","))}}return new ge({method:"POST",url:o,headers:s,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const{url:r,headers:a}=this.cloneRequestState();return t&&a.append("Prefer","count=".concat(t)),new ge({method:"PATCH",url:r,headers:a,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;const{url:n,headers:r}=this.cloneRequestState();return e&&r.append("Prefer","count=".concat(e)),new ge({method:"DELETE",url:n,headers:r,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e){var t=function(e,t){if("object"!=we(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==we(t)?t:t+""}function be(e,t,n){return(t=ve(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach(function(t){be(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _e=class e{constructor(e){let{headers:t={},schema:n,fetch:r,timeout:a,urlLengthLimit:i=8e3}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.urlLengthLimit=i;const o=null!==r&&void 0!==r?r:globalThis.fetch;this.fetch=void 0!==a&&a>0?(e,t)=>{const n=new AbortController,r=setTimeout(()=>n.abort(),a),i=null===t||void 0===t?void 0:t.signal;if(i){if(i.aborted)return clearTimeout(r),o(e,t);const a=()=>{clearTimeout(r),n.abort()};return i.addEventListener("abort",a,{once:!0}),o(e,ke(ke({},t),{},{signal:n.signal})).finally(()=>{clearTimeout(r),i.removeEventListener("abort",a)})}return o(e,ke(ke({},t),{},{signal:n.signal})).finally(()=>clearTimeout(r))}:o}from(e){if(!e||"string"!==typeof e||""===e.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");return new ye(new URL("".concat(this.url,"/").concat(e)),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:r=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const s=new URL("".concat(this.url,"/rpc/").concat(e));let l;const c=e=>null!==e&&"object"===typeof e&&(!Array.isArray(e)||e.some(c)),d=n&&Object.values(t).some(c);d?(o="POST",l=t):n||r?(o=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;s.searchParams.append(t,n)})):(o="POST",l=t);const h=new Headers(this.headers);return d?h.set("Prefer",a?"count=".concat(a,",return=minimal"):"return=minimal"):a&&h.set("Prefer","count=".concat(a)),new ge({method:o,url:s,headers:h,schema:this.schemaName,body:l,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch,urlLengthLimit:this.urlLengthLimit})}};const Te=class{constructor(){}static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(n," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(n," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}};const Se="realtime-js/".concat("2.97.0"),Ne="2.0.0",Ce=Ne,Ae=1e4;var je,Ee,Be,Pe,Ie,Oe;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(je||(je={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Ee||(Ee={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Be||(Be={})),function(e){e.websocket="websocket"}(Pe||(Pe={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Ie||(Ie={}));class Le{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!==e&&void 0!==e?e:[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&"string"===typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:{},a=(new TextEncoder).encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,t,n){var r,a;const i=e.topic,o=null!==(r=e.ref)&&void 0!==r?r:"",s=null!==(a=e.join_ref)&&void 0!==a?a:"",l=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=0===Object.keys(c).length?"":JSON.stringify(c);if(s.length>255)throw new Error("joinRef length ".concat(s.length," exceeds maximum of 255"));if(o.length>255)throw new Error("ref length ".concat(o.length," exceeds maximum of 255"));if(i.length>255)throw new Error("topic length ".concat(i.length," exceeds maximum of 255"));if(l.length>255)throw new Error("userEvent length ".concat(l.length," exceeds maximum of 255"));if(d.length>255)throw new Error("metadata length ".concat(d.length," exceeds maximum of 255"));const h=this.USER_BROADCAST_PUSH_META_LENGTH+s.length+o.length+i.length+l.length+d.length,u=new ArrayBuffer(this.HEADER_LENGTH+h);let p=new DataView(u),m=0;p.setUint8(m++,this.KINDS.userBroadcastPush),p.setUint8(m++,s.length),p.setUint8(m++,o.length),p.setUint8(m++,i.length),p.setUint8(m++,l.length),p.setUint8(m++,d.length),p.setUint8(m++,t),Array.from(s,e=>p.setUint8(m++,e.charCodeAt(0))),Array.from(o,e=>p.setUint8(m++,e.charCodeAt(0))),Array.from(i,e=>p.setUint8(m++,e.charCodeAt(0))),Array.from(l,e=>p.setUint8(m++,e.charCodeAt(0))),Array.from(d,e=>p.setUint8(m++,e.charCodeAt(0)));var f=new Uint8Array(u.byteLength+n.byteLength);return f.set(new Uint8Array(u),0),f.set(new Uint8Array(n),u.byteLength),f.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"===typeof e){const n=JSON.parse(e),[r,a,i,o,s]=n;return t({join_ref:r,ref:a,topic:i,event:o,payload:s})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),r=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,r)}_decodeUserBroadcast(e,t,n){const r=t.getUint8(1),a=t.getUint8(2),i=t.getUint8(3),o=t.getUint8(4);let s=this.HEADER_LENGTH+4;const l=n.decode(e.slice(s,s+r));s+=r;const c=n.decode(e.slice(s,s+a));s+=a;const d=n.decode(e.slice(s,s+i));s+=i;const h=e.slice(s,e.byteLength),u=o===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,p={type:this.BROADCAST_EVENT,event:c,payload:u};return i>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null===e||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.name)}_pick(e,t){return e&&"object"===typeof e?Object.fromEntries(Object.entries(e).filter(e=>{let[n]=e;return t.includes(n)})):{}}}class Re{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Oe||(Oe={}));const Me=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return t?Object.keys(t).reduce((n,a)=>(n[a]=De(a,e,t,r),n),{}):{}},De=(e,t,n,r)=>{const a=t.find(t=>t.name===e),i=null===a||void 0===a?void 0:a.type,o=n[e];return i&&!r.includes(i)?We(i,o):He(o)},We=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Ue(t,n)}switch(e){case Oe.bool:return ze(t);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return Fe(t);case Oe.json:case Oe.jsonb:return qe(t);case Oe.timestamp:return Ge(t);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:default:return He(t)}},He=e=>e,ze=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Fe=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},qe=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return e}return e},Ue=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(a){r=i?i.split(","):[]}return r.map(e=>We(t,e))}return e},Ge=e=>"string"===typeof e?e.replace(" ","T"):e,Ke=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Ye{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ae;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ve,Ze,Je,Qe;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(Ve||(Ve={}));class $e{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$e.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=$e.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=$e.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const a=this.cloneDeep(e),i=this.transformState(t),o={},s={};return this.map(a,(e,t)=>{i[e]||(s[e]=t)}),this.map(i,(e,t)=>{const n=a[e];if(n){const r=t.map(e=>e.presence_ref),a=n.map(e=>e.presence_ref),i=t.filter(e=>a.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);i.length>0&&(o[e]=i),l.length>0&&(s[e]=l)}else o[e]=t}),this.syncDiff(a,{joins:o,leaves:s},n,r)}static syncDiff(e,t,n,r){const{joins:a,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const i=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),i.length>0){const n=e[t].map(e=>e.presence_ref),r=i.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,i,r)}),this.map(i,(t,n)=>{let a=e[t];if(!a)return;const i=n.map(e=>e.presence_ref);a=a.filter(e=>i.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,n),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(Ze||(Ze={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(Je||(Je={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Qe||(Qe={}));class Xe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;var r,a;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Ee.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ye(this,Be.join,this.params,this.timeout),this.rejoinTimer=new Re(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ee.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=Ee.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=Ee.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=Ee.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=Ee.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Be.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new $e(this),this.broadcastEndpointURL=Ke(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(a=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===a?void 0:a.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ee.closed){const{config:{broadcast:i,presence:o,private:s}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[Je.PRESENCE]&&this.bindings[Je.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),d={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:s};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(Qe.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(Qe.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket._isManualToken()||this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,a=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,i=[];for(let r=0;r<a;r++){const a=t[r],{filter:{event:o,schema:s,table:l,filter:c}}=a,d=n&&n[r];if(!(d&&d.event===o&&Xe.isFilterValueEqual(d.schema,s)&&Xe.isFilterValueEqual(d.table,l)&&Xe.isFilterValueEqual(d.filter,c)))return this.unsubscribe(),this.state=Ee.errored,void(null===e||void 0===e||e(Qe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},a),{id:d.id}))}return this.bindings.postgres_changes=i,void(e&&e(Qe.SUBSCRIBED))}null===e||void 0===e||e(Qe.SUBSCRIBED)}).receive("error",t=>{this.state=Ee.errored,null===e||void 0===e||e(Qe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(Qe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===Ee.joined&&e===Je.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;if(void 0===t||null===t)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization="Bearer ".concat(this.socket.accessTokenValue));const i={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,i,null!==(r=n.timeout)&&void 0!==r?r:this.timeout);if(202===o.status)return{success:!0};let s=o.statusText;try{const e=await o.json();s=e.error||e.message||s}catch(l){}return Promise.reject(new Error(s))}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,a,i;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===i?void 0:i.ack)||n("ok"),o.receive("ok",()=>n("ok")),o.receive("error",()=>n("error")),o.receive("timeout",()=>n("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization="Bearer ".concat(this.socket.accessTokenValue));const l={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,l,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=Ee.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(Be.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Ye(this,Be.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ee.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,a=setTimeout(()=>r.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),i}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new Ye(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,a;const i=e.toLocaleLowerCase(),{close:o,error:s,leave:l,join:c}=Be;if(n&&[o,s,l,c].indexOf(i)>=0&&n!==this._joinRef())return;let d=this._onMessage(i,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===i}).map(e=>e.callback(d,n)):null===(a=this.bindings[i])||void 0===a||a.filter(e=>{var n,r,a,o,s,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,o=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(r=t.ids)||void 0===r?void 0:r.includes(i))&&("*"===o||(null===o||void 0===o?void 0:o.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const n=null===(s=null===(o=null===e||void 0===e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===s?void 0:s.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:r,type:a,errors:i}=e,o={schema:t,table:n,commit_timestamp:r,eventType:a,new:{},old:{},errors:i};d=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(d,n)})}_isClosed(){return this.state===Ee.closed}_isJoined(){return this.state===Ee.joined}_isJoining(){return this.state===Ee.joining}_isLeaving(){return this.state===Ee.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&Xe.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(null!==e&&void 0!==e?e:void 0)===(null!==t&&void 0!==t?t:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Be.close,{},e)}_onError(e){this._on(Be.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ee.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Me(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Me(e.columns,e.old_record)),t}}const et=()=>{},tt=25e3,nt=10,rt=100,at=[1e3,2e3,5e3,1e4];class it{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ae,this.transport=null,this.heartbeatIntervalMs=tt,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=et,this.ref=0,this.reconnectTimer=null,this.vsn=Ce,this.logger=et,this.conn=null,this.sendBuffer=[],this.serializer=new Le,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},!(null===(n=null===t||void 0===t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(Pe.websocket),this.httpEndpoint=Ke(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Te.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},"function"===typeof this.conn.close&&(e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case je.connecting:return Ie.Connecting;case je.open:return Ie.Open;case je.closing:return Ie.Closing;default:return Ie.Closed}}isConnected(){return this.connectionState()===Ie.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new Xe("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:a}=e,i=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(a,")"),r),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},rt)}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event&&e.ref&&e.ref===this.pendingHeartbeatRef){const t=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error",t)}catch(s){this.log("error","error in heartbeat callback",s)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:t,event:n,payload:r,ref:a}=e,i=a?"(".concat(a,")"):"",o=r.status||"";this.log("receive","".concat(o," ").concat(t," ").concat(n," ").concat(i).trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===je.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===je.open||this.conn.readyState===je.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL()));(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(t){this.log("error","error in heartbeat callback",t)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Be.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!1;if(t)e=t,n=!0;else if(this.accessToken)try{e=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),e=this.accessTokenValue}else e=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:Se};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(Be.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this._isManualToken()||this.setAuth().catch(t=>{this.log("error","Error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error","error in ".concat(e," callback"),r)}})}catch(n){this.log("error","error triggering ".concat(e," callbacks"),n)}}_setupReconnectionTimer(){this.reconnectTimer=new Re(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},nt)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,a,i,o,s,l,c,d,h,u;switch(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:Ae,this.heartbeatIntervalMs=null!==(r=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:tt,this.worker=null!==(a=null===e||void 0===e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(i=null===e||void 0===e?void 0:e.accessToken)&&void 0!==i?i:null,this.heartbeatCallback=null!==(o=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==o?o:et,this.vsn=null!==(s=null===e||void 0===e?void 0:e.vsn)&&void 0!==s?s:Ce,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==l?l:e=>at[e-1]||1e4,this.vsn){case"1.0.0":this.encode=null!==(c=null===e||void 0===e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(d=null===e||void 0===e?void 0:e.decode)&&void 0!==d?d:(e,t)=>t(JSON.parse(e));break;case Ne:this.encode=null!==(h=null===e||void 0===e?void 0:e.encode)&&void 0!==h?h:this.serializer.encode.bind(this.serializer),this.decode=null!==(u=null===e||void 0===e?void 0:e.decode)&&void 0!==u?u:this.serializer.decode.bind(this.serializer);break;default:throw new Error("Unsupported serializer version: ".concat(this.vsn))}if(this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}var ot=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&!0===(null===(n=t.icebergType)||void 0===n?void 0:n.includes("CommitState"))}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function st(e){var t;const n=null!==(t=e.fetchImpl)&&void 0!==t?t:globalThis.fetch;return{async request(t){let{method:r,path:a,query:i,body:o,headers:l}=t;const c=function(e,t,n){const r=new URL(t,e);if(n)for(const[a,i]of Object.entries(n))void 0!==i&&r.searchParams.set(a,i);return r.toString()}(e.baseUrl,a,i),d=await async function(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:"Bearer ".concat(e.token)}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}(e.auth),h=await n(c,{method:r,headers:s(s(s({},o?{"Content-Type":"application/json"}:{}),d),l),body:o?JSON.stringify(o):void 0}),u=await h.text(),p=(h.headers.get("content-type")||"").includes("application/json"),m=p&&u?JSON.parse(u):u;if(!h.ok){var f;const e=p?m:void 0,t=null===e||void 0===e?void 0:e.error;throw new ot(null!==(f=null===t||void 0===t?void 0:t.message)&&void 0!==f?f:"Request failed with status ".concat(h.status),{status:h.status,icebergType:null===t||void 0===t?void 0:t.type,icebergCode:null===t||void 0===t?void 0:t.code,details:e})}return{status:h.status,headers:h.headers,data:m}}}}function lt(e){return e.join("\x1f")}var ct=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:lt(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces"),query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:null===t||void 0===t?void 0:t.properties};return(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces"),body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(lt(e.namespace))})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(lt(e.namespace))})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(lt(e.namespace))}),!0}catch(t){if(t instanceof ot&&404===t.status)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof ot&&409===n.status)return;throw n}}};function dt(e){return e.join("\x1f")}var ht=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(dt(e.namespace),"/tables")})).data.identifiers}async createTable(e,t){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(dt(e.namespace),"/tables"),body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(dt(e.namespace),"/tables/").concat(e.name),body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){var n;await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(dt(e.namespace),"/tables/").concat(e.name),query:{purgeRequested:String(null!==(n=null===t||void 0===t?void 0:t.purge)&&void 0!==n&&n)}})}async loadTable(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(dt(e.namespace),"/tables/").concat(e.name),headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(dt(e.namespace),"/tables/").concat(e.name),headers:t}),!0}catch(n){if(n instanceof ot&&404===n.status)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof ot&&409===n.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},ut=class{constructor(e){var t;let n="v1";e.catalogName&&(n+="/".concat(e.catalogName));const r=e.baseUrl.endsWith("/")?e.baseUrl:"".concat(e.baseUrl,"/");this.client=st({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=null===(t=e.accessDelegation)||void 0===t?void 0:t.join(","),this.namespaceOps=new ct(this.client,n),this.tableOps=new ht(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};var pt=class extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"storage",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;super(e),this.__isStorageError=!0,this.namespace=t,this.name="vectors"===t?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function mt(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}var ft=class extends pt{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"storage";super(e,r,t,n),this.name="vectors"===r?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},gt=class extends pt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"storage";super(e,n),this.name="vectors"===n?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const yt=e=>{if(Array.isArray(e))return e.map(e=>yt(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const a=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=yt(r)}),t};function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e){var t=function(e,t){if("object"!=wt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wt(t)?t:t+""}function bt(e,t,n){return(t=vt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach(function(t){bt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const _t=e=>{var t;return e.msg||e.message||e.error_description||("string"===typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},Tt=(e,t,n,r)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&"HEAD"!==e&&r?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(r)?(a.headers=kt({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,(null===t||void 0===t?void 0:t.duplex)&&(a.duplex=t.duplex),kt(kt({},a),n)):kt(kt({},a),n)};async function St(e,t,n,r,a,i,o){return new Promise((s,l)=>{e(n,Tt(t,r,a,i)).then(e=>{if(!e.ok)throw e;if(null===r||void 0===r?void 0:r.noResolveJson)return e;if("vectors"===o){const t=e.headers.get("content-type");if("0"===e.headers.get("content-length")||204===e.status)return{};if(!t||!t.includes("application/json"))return{}}return e.json()}).then(e=>s(e)).catch(e=>(async(e,t,n,r)=>{if(e&&"object"===typeof e&&"status"in e&&"ok"in e&&"number"===typeof e.status&&!(null===n||void 0===n?void 0:n.noResolveJson)){const n=e,a=n.status||500;if("function"===typeof n.json)n.json().then(e=>{const n=(null===e||void 0===e?void 0:e.statusCode)||(null===e||void 0===e?void 0:e.code)||a+"";t(new ft(_t(e),a,n,r))}).catch(()=>{if("vectors"===r){const e=a+"";t(new ft(n.statusText||"HTTP ".concat(a," error"),a,e,r))}else{const e=a+"";t(new ft(n.statusText||"HTTP ".concat(a," error"),a,e,r))}});else{const e=a+"";t(new ft(n.statusText||"HTTP ".concat(a," error"),a,e,r))}}else t(new gt(_t(e),e,r))})(e,l,r,o))})}function Nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"storage";return{get:async(t,n,r,a)=>St(t,"GET",n,r,a,void 0,e),post:async(t,n,r,a,i)=>St(t,"POST",n,a,i,r,e),put:async(t,n,r,a,i)=>St(t,"PUT",n,a,i,r,e),head:async(t,n,r,a)=>St(t,"HEAD",n,kt(kt({},r),{},{noResolveJson:!0}),a,void 0,e),remove:async(t,n,r,a,i)=>St(t,"DELETE",n,a,i,r,e)}}const Ct=Nt("storage"),{get:At,post:jt,put:Et,head:Bt,remove:Pt}=Ct,It=Nt("vectors");var Ot=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"storage";var a;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=(a=n)?function(){return a(...arguments)}:function(){return fetch(...arguments)},this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=kt(kt({},this.headers),{},{[e]:t}),this}async handleOperation(e){try{return{data:await e(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(mt(t))return{data:null,error:t};throw t}}},Lt=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}}};let Rt;Rt=Symbol.toStringTag;var Mt=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Rt]="BlobDownloadBuilder",this.promise=null}asStream(){return new Lt(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await(await this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}}};const Dt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Ht=class extends Ot{constructor(e){let t=arguments.length>2?arguments[2]:void 0;super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>3?arguments[3]:void 0,"storage"),this.bucketId=t}async uploadOrUpdate(e,t,n,r){var a=this;return a.handleOperation(async()=>{let i;const o=kt(kt({},Wt),r);let s=kt(kt({},a.headers),"POST"===e&&{"x-upsert":String(o.upsert)});const l=o.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",a.encodeMetadata(l)),i.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(l))):(i=n,s["cache-control"]="max-age=".concat(o.cacheControl),s["content-type"]=o.contentType,l&&(s["x-metadata"]=a.toBase64(a.encodeMetadata(l))),("undefined"!==typeof ReadableStream&&i instanceof ReadableStream||i&&"object"===typeof i&&"pipe"in i&&"function"===typeof i.pipe)&&!o.duplex&&(o.duplex="half")),(null===r||void 0===r?void 0:r.headers)&&(s=kt(kt({},s),r.headers));const c=a._removeEmptyFolders(t),d=a._getFinalPath(c),h=await("PUT"==e?Et:jt)(a.fetch,"".concat(a.url,"/object/").concat(d),i,kt({headers:s},(null===o||void 0===o?void 0:o.duplex)?{duplex:o.duplex}:{}));return{path:c,id:h.Id,fullPath:h.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),s=new URL(a.url+"/object/upload/sign/".concat(o));return s.searchParams.set("token",t),a.handleOperation(async()=>{let e;const t=kt({upsert:Wt.upsert},r),o=kt(kt({},a.headers),{"x-upsert":String(t.upsert)});return"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,o["cache-control"]="max-age=".concat(t.cacheControl),o["content-type"]=t.contentType),{path:i,fullPath:(await Et(a.fetch,s.toString(),e,{headers:o})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e);const a=kt({},n.headers);(null===t||void 0===t?void 0:t.upsert)&&(a["x-upsert"]="true");const i=await jt(n.fetch,"".concat(n.url,"/object/upload/sign/").concat(r),{},{headers:a}),o=new URL(n.url+i.url),s=o.searchParams.get("token");if(!s)throw new pt("No token returned by API");return{signedUrl:o.toString(),path:e,token:s}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await jt(r.fetch,"".concat(r.url,"/object/move"),{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await jt(r.fetch,"".concat(r.url,"/object/copy"),{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let a=r._getFinalPath(e),i=await jt(r.fetch,"".concat(r.url,"/object/sign/").concat(a),kt({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:r.headers});const o=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{signedUrl:encodeURI("".concat(r.url).concat(i.signedURL).concat(o))}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{const a=await jt(r.fetch,"".concat(r.url,"/object/sign/").concat(r.bucketId),{expiresIn:t,paths:e},{headers:r.headers}),i=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return a.map(e=>kt(kt({},e),{},{signedUrl:e.signedURL?encodeURI("".concat(r.url).concat(e.signedURL).concat(i)):null}))})}download(e,t,n){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",a=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),i=a?"?".concat(a):"",o=this._getFinalPath(e);return new Mt(()=>At(this.fetch,"".concat(this.url,"/").concat(r,"/").concat(o).concat(i),{headers:this.headers,noResolveJson:!0},n),this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>yt(await At(t.fetch,"".concat(t.url,"/object/info/").concat(n),{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await Bt(t.fetch,"".concat(t.url,"/object/").concat(n),{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(mt(r)&&r instanceof gt){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],a=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==a&&r.push(a);const i="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==o&&r.push(o);let s=r.join("&");return""!==s&&(s="?".concat(s)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(i,"/public/").concat(n).concat(s))}}}async remove(e){var t=this;return t.handleOperation(async()=>await Pt(t.fetch,"".concat(t.url,"/object/").concat(t.bucketId),{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{const a=kt(kt(kt({},Dt),t),{},{prefix:e||""});return await jt(r.fetch,"".concat(r.url,"/object/list/").concat(r.bucketId),a,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const r=kt({},e);return await jt(n.fetch,"".concat(n.url,"/object/list-v2/").concat(n.bucketId),r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}};const zt={"X-Client-Info":"storage-js/".concat("2.97.0")};var Ft=class extends Ot{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const a=new URL(e);(null===r||void 0===r?void 0:r.useNewHostname)&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));super(a.href.replace(/\/$/,""),kt(kt({},zt),t),n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await At(t.fetch,"".concat(t.url,"/bucket").concat(n),{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await At(t.fetch,"".concat(t.url,"/bucket/").concat(e),{headers:t.headers}))}async createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};var n=this;return n.handleOperation(async()=>await jt(n.fetch,"".concat(n.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await Et(n.fetch,"".concat(n.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await jt(t.fetch,"".concat(t.url,"/bucket/").concat(e,"/empty"),{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Pt(t.fetch,"".concat(t.url,"/bucket/").concat(e),{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},qt=class extends Ot{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;super(e.replace(/\/$/,""),kt(kt({},zt),t),n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await jt(t.fetch,"".concat(t.url,"/bucket"),{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;void 0!==(null===e||void 0===e?void 0:e.limit)&&n.set("limit",e.limit.toString()),void 0!==(null===e||void 0===e?void 0:e.offset)&&n.set("offset",e.offset.toString()),(null===e||void 0===e?void 0:e.sortColumn)&&n.set("sortColumn",e.sortColumn),(null===e||void 0===e?void 0:e.sortOrder)&&n.set("sortOrder",e.sortOrder),(null===e||void 0===e?void 0:e.search)&&n.set("search",e.search);const r=n.toString(),a=r?"".concat(t.url,"/bucket?").concat(r):"".concat(t.url,"/bucket");return await At(t.fetch,a,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Pt(t.fetch,"".concat(t.url,"/bucket/").concat(e),{},{headers:t.headers}))}from(e){var t=this;if(!(e=>!(!e||"string"!==typeof e)&&!(0===e.length||e.length>100)&&e.trim()===e&&!e.includes("/")&&!e.includes("\\")&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e))(e))throw new pt("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new ut({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(e,t){const n=e[t];return"function"!==typeof n?n:async function(){try{for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return{data:await n.apply(e,a),error:null}}catch(o){if(r)throw o;return{data:null,error:o}}}}})}},Ut=class extends Ot{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;super(e.replace(/\/$/,""),kt(kt({},zt),{},{"Content-Type":"application/json"},t),n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await It.post(t.fetch,"".concat(t.url,"/CreateIndex"),e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await It.post(n.fetch,"".concat(n.url,"/GetIndex"),{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await It.post(t.fetch,"".concat(t.url,"/ListIndexes"),e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await It.post(n.fetch,"".concat(n.url,"/DeleteIndex"),{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},Gt=class extends Ot{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;super(e.replace(/\/$/,""),kt(kt({},zt),{},{"Content-Type":"application/json"},t),n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await It.post(t.fetch,"".concat(t.url,"/PutVectors"),e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await It.post(t.fetch,"".concat(t.url,"/GetVectors"),e,{headers:t.headers}))}async listVectors(e){var t=this;if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and ".concat(e.segmentCount-1))}return t.handleOperation(async()=>await It.post(t.fetch,"".concat(t.url,"/ListVectors"),e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await It.post(t.fetch,"".concat(t.url,"/QueryVectors"),e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await It.post(t.fetch,"".concat(t.url,"/DeleteVectors"),e,{headers:t.headers})||{})}},Kt=class extends Ot{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;super(e.replace(/\/$/,""),kt(kt({},zt),{},{"Content-Type":"application/json"},t),n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await It.post(t.fetch,"".concat(t.url,"/CreateVectorBucket"),{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await It.post(t.fetch,"".concat(t.url,"/GetVectorBucket"),{vectorBucketName:e},{headers:t.headers}))}async listBuckets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=this;return t.handleOperation(async()=>await It.post(t.fetch,"".concat(t.url,"/ListVectorBuckets"),e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await It.post(t.fetch,"".concat(t.url,"/DeleteVectorBucket"),{vectorBucketName:e},{headers:t.headers})||{})}},Yt=class extends Kt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t.headers||{},t.fetch)}from(e){return new Vt(this.url,this.headers,e,this.fetch)}async createBucket(e){return(()=>super.createBucket)().call(this,e)}async getBucket(e){return(()=>super.getBucket)().call(this,e)}async listBuckets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(()=>super.listBuckets)().call(this,e)}async deleteBucket(e){return(()=>super.deleteBucket)().call(this,e)}},Vt=class extends Ut{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){return(()=>super.createIndex)().call(this,kt(kt({},e),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(()=>super.listIndexes)().call(this,kt(kt({},e),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(e){return(()=>super.getIndex)().call(this,this.vectorBucketName,e)}async deleteIndex(e){return(()=>super.deleteIndex)().call(this,this.vectorBucketName,e)}index(e){return new Zt(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Zt=class extends Gt{constructor(e,t,n,r,a){super(e,t,a),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=this;return(()=>super.putVectors)().call(t,kt(kt({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(e){var t=this;return(()=>super.getVectors)().call(t,kt(kt({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=this;return(()=>super.listVectors)().call(t,kt(kt({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(e){var t=this;return(()=>super.queryVectors)().call(t,kt(kt({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(e){var t=this;return(()=>super.deleteVectors)().call(t,kt(kt({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},Jt=class extends Ft{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new Ht(this.url,this.headers,e,this.fetch)}get vectors(){return new Yt(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new qt(this.url+"/iceberg",this.headers,this.fetch)}};const Qt="2.97.0",$t=3e4,Xt=9e4,en={"X-Client-Info":"gotrue-js/".concat(Qt)},tn="X-Supabase-Api-Version",nn={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},rn=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class an extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function on(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class sn extends an{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class ln extends an{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class cn extends an{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class dn extends cn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hn(e){return on(e)&&"AuthSessionMissingError"===e.name}class un extends cn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pn extends cn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class mn extends cn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fn extends cn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gn extends cn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class yn extends cn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function wn(e){return on(e)&&"AuthRetryableFetchError"===e.name}class vn extends cn{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class bn extends cn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const xn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kn=" \t\n\r=".split(""),_n=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<kn.length;t+=1)e[kn[t].charCodeAt(0)]=-2;for(let t=0;t<xn.length;t+=1)e[xn[t].charCodeAt(0)]=t;return e})();function Tn(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(xn[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(xn[e]),t.queuedBits-=6}}function Sn(e,t,n){const r=_n[e];if(!(r>-1)){if(-2===r)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Nn(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let o=0;o<e.length;o+=1)Sn(e.charCodeAt(o),a,i);return t.join("")}function Cn(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function An(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}Cn(r,t)}}function jn(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)Sn(e.charCodeAt(a),n,r);return new Uint8Array(t)}function En(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Tn(e,n,r)),Tn(null,n,r),t.join("")}const Bn=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Pn={tested:!1,writable:!1},In=()=>{if(!Bn())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(Pn.tested)return Pn.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Pn.tested=!0,Pn.writable=!0}catch(t){Pn.tested=!0,Pn.writable=!1}return Pn.writable};const On=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},Ln=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Rn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},Mn=async(e,t)=>{await e.removeItem(t)};class Dn{constructor(){this.promise=new Dn.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Wn(e){const t=e.split(".");if(3!==t.length)throw new bn("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!rn.test(t[n]))throw new bn("JWT not in base64url format");return{header:JSON.parse(Nn(t[0])),payload:JSON.parse(Nn(t[1])),signature:jn(t[2]),raw:{header:t[0],payload:t[1]}}}function Hn(e){return("0"+e.toString(16)).substr(-2)}async function zn(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Hn).join("")}();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Ln(e,"".concat(t,"-code-verifier"),a);const i=await zn(r);return[i,r===i?"plain":"s256"]}Dn.promiseConstructor=Promise;const qn=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Un=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gn(e){if(!Un.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kn(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function Yn(e){return JSON.parse(JSON.stringify(e))}const Vn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Zn=[502,503,504];async function Jn(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new yn(Vn(e),0);if(Zn.includes(e.status))throw new yn(Vn(e),e.status);let r,a;try{r=await e.json()}catch(o){throw new ln(Vn(o),o)}const i=function(e){const t=e.headers.get(tn);if(!t)return null;if(!t.match(qn))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(o){return null}}(e);if(i&&i.getTime()>=nn.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?a=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new vn(Vn(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new dn}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new vn(Vn(r),e.status,r.weak_password.reasons);throw new sn(Vn(r),e.status||500,a)}async function Qn(e,t,n,r){var a;const i=Object.assign({},null===r||void 0===r?void 0:r.headers);i[tn]||(i[tn]=nn.name),(null===r||void 0===r?void 0:r.jwt)&&(i.Authorization="Bearer ".concat(r.jwt));const o=null!==(a=null===r||void 0===r?void 0:r.query)&&void 0!==a?a:{};(null===r||void 0===r?void 0:r.redirectTo)&&(o.redirect_to=r.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await async function(e,t,n,r,a,i){const o=((e,t,n,r)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))})(t,r,a,i);let s;try{s=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new yn(Vn(l),0)}s.ok||await Jn(s);if(null===r||void 0===r?void 0:r.noResolveJson)return s;try{return await s.json()}catch(l){await Jn(l)}}(e,t,n+s,{headers:i,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function $n(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Xn(e){const t=$n(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function er(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function tr(e){return{data:e,error:null}}function nr(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=e,o=ae(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},user:Object.assign({},o)},error:null}}function rr(e){return e}const ar=["global","local","others"];class ir{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=On(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ar[0];if(ar.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(ar.join(", ")));try{return await Qn(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(on(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Qn(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:er})}catch(n){if(on(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=ae(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await Qn(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:nr,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(on(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Qn(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:er})}catch(t){if(on(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,a,i,o,s;try{const l={nextPage:null,lastPage:0,total:0},c=await Qn(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:rr});if(c.error)throw c.error;const d=await c.json(),h=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,u=null!==(s=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==s?s:[];return u.length>0&&(u.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(on(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Gn(e);try{return await Qn(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:er})}catch(t){if(on(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Gn(e);try{return await Qn(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:er})}catch(n){if(on(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Gn(e);try{return await Qn(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:er})}catch(n){if(on(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Gn(e.userId);try{const{data:t,error:n}=await Qn(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(on(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Gn(e.userId),Gn(e.id);try{return{data:await Qn(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(on(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,r,a,i,o,s;try{const l={nextPage:null,lastPage:0,total:0},c=await Qn(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:rr});if(c.error)throw c.error;const d=await c.json(),h=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,u=null!==(s=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==s?s:[];return u.length>0&&(u.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(on(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await Qn(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(on(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Qn(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(on(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Qn(this.fetch,"PUT","".concat(this.url,"/admin/oauth/clients/").concat(e),{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(n){if(on(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Qn(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(on(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Qn(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(e,"/regenerate_secret"),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(on(t))return{data:null,error:t};throw t}}}function or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const sr=!!(globalThis&&In()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class lr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class cr extends lr{}async function dr(e,t,n){sr&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;t>0&&setTimeout(()=>{r.abort(),sr&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve();try{return await globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw sr&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new cr('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(sr)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}sr&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{sr&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}})}catch(a){if("AbortError"===(null===a||void 0===a?void 0:a.name))throw new cr('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" timed out waiting ').concat(t,"ms"));throw a}}function hr(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error('@supabase/auth-js: Address "'.concat(e,'" is invalid.'));return e.toLowerCase()}function ur(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class pr extends Error{constructor(e){let{message:t,code:n,cause:r,name:a}=e;var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=null!==a&&void 0!==a?a:r instanceof Error?r.name:void 0)&&void 0!==i?i:"Unknown Error",this.code=n}}class mr extends pr{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function fr(e){let{error:t,options:n}=e;var r,a,i;const{publicKey:o}=n;if(!o)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new pr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(r=o.authenticatorSelection)||void 0===r?void 0:r.requireResidentKey))return new pr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===n.mediation&&"required"===(null===(a=o.authenticatorSelection)||void 0===a?void 0:a.userVerification))return new pr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(i=o.authenticatorSelection)||void 0===i?void 0:i.userVerification))return new pr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new pr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new pr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name){return 0===o.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new pr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new pr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t})}if("SecurityError"===t.name){const e=window.location.hostname;if(!kr(e))return new pr({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(o.rp.id!==e)return new pr({message:'The RP ID "'.concat(o.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new pr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new pr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function gr(e){let{error:t,options:n}=e;const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new pr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new pr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const e=window.location.hostname;if(!kr(e))return new pr({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(r.rpId!==e)return new pr({message:'The RP ID "'.concat(r.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new pr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}const yr=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function wr(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!==typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,a=ae(e,["challenge","user","excludeCredentials"]),i=jn(t).buffer,o=Object.assign(Object.assign({},n),{id:jn(n.id).buffer}),s=Object.assign(Object.assign({},a),{challenge:i,user:o});if(r&&r.length>0){s.excludeCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];s.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:jn(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return s}function vr(e){if(!e)throw new Error("Credential request options are required");if("undefined"!==typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=ae(e,["challenge","allowCredentials"]),a=jn(t).buffer,i=Object.assign(Object.assign({},r),{challenge:a});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];i.allowCredentials[e]=Object.assign(Object.assign({},t),{id:jn(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return i}function br(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:En(new Uint8Array(e.response.attestationObject)),clientDataJSON:En(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function xr(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const n=e,r=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:En(new Uint8Array(a.authenticatorData)),clientDataJSON:En(new Uint8Array(a.clientDataJSON)),signature:En(new Uint8Array(a.signature)),userHandle:a.userHandle?En(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function kr(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function _r(){var e,t;return!!(Bn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"===typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"===typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const Tr={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Sr={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Nr(){const e=e=>null!==e&&"object"===typeof e&&!Array.isArray(e),t=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),n={};for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];for(const o of a)if(o)for(const r in o){const a=o[r];if(void 0!==a)if(Array.isArray(a))n[r]=a;else if(t(a))n[r]=a;else if(e(a)){const t=n[r];e(t)?n[r]=Nr(t,a):n[r]=Nr(a)}else n[r]=a}return n}class Cr{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge(e,t){let{factorId:n,webauthn:r,friendlyName:a,signal:i}=e;var o;try{const{data:e,error:s}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!e)return{data:null,error:s};const l=null!==i&&void 0!==i?i:yr.createNewAbortSignal();if("create"===e.webauthn.type){const{user:t}=e.webauthn.credential_options.publicKey;if(!t.name){const e=a;if(e)t.name="".concat(t.id,":").concat(e);else{const e=(await this.client.getUser()).data.user,n=(null===(o=null===e||void 0===e?void 0:e.user_metadata)||void 0===o?void 0:o.name)||(null===e||void 0===e?void 0:e.email)||(null===e||void 0===e?void 0:e.id)||"User";t.name="".concat(t.id,":").concat(n)}}t.displayName||(t.displayName=t.name)}switch(e.webauthn.type){case"create":{const r=function(e,t){return Nr(Tr,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.create),{data:a,error:i}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new mr("Browser returned unexpected credential type",t)}:{data:null,error:new mr("Empty credential response",t)}}catch(t){return{data:null,error:fr({error:t,options:e})}}}({publicKey:r,signal:l});return a?{data:{factorId:n,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:a}},error:null}:{data:null,error:i}}case"request":{const r=function(e,t){return Nr(Sr,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.request),{data:a,error:i}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new mr("Browser returned unexpected credential type",t)}:{data:null,error:new mr("Empty credential response",t)}}catch(t){return{data:null,error:gr({error:t,options:e})}}}(Object.assign(Object.assign({},e.webauthn.credential_options),{publicKey:r,signal:l}));return a?{data:{factorId:n,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:a}},error:null}:{data:null,error:i}}}}catch(s){return on(s)?{data:null,error:s}:{data:null,error:new ln("Unexpected error in challenge",s)}}}async _verify(e){let{challengeId:t,factorId:n,webauthn:r}=e;return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate(e,t){let{factorId:n,webauthn:{rpId:r=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:a=("undefined"!==typeof window?[window.location.origin]:void 0),signal:i}={}}=e;if(!r)return{data:null,error:new an("rpId is required for WebAuthn authentication")};try{if(!_r())return{data:null,error:new ln("Browser does not support WebAuthn",null)};const{data:e,error:o}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:a},signal:i},{request:t});if(!e)return{data:null,error:o};const{webauthn:s}=e;return this._verify({factorId:n,challengeId:e.challengeId,webauthn:{type:s.type,rpId:r,rpOrigins:a,credential_response:s.credential_response}})}catch(o){return on(o)?{data:null,error:o}:{data:null,error:new ln("Unexpected error in authenticate",o)}}}async _register(e,t){let{friendlyName:n,webauthn:{rpId:r=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:a=("undefined"!==typeof window?[window.location.origin]:void 0),signal:i}={}}=e;if(!r)return{data:null,error:new an("rpId is required for WebAuthn registration")};try{if(!_r())return{data:null,error:new ln("Browser does not support WebAuthn",null)};const{data:e,error:o}=await this._enroll({friendlyName:n});if(!e)return await this.client.mfa.listFactors().then(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.all.find(e=>"webauthn"===e.factor_type&&e.friendly_name===n&&"unverified"!==e.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null===e||void 0===e?void 0:e.id}):void 0),{data:null,error:o};const{data:s,error:l}=await this._challenge({factorId:e.id,friendlyName:e.friendly_name,webauthn:{rpId:r,rpOrigins:a},signal:i},{create:t});return s?this._verify({factorId:e.id,challengeId:s.challengeId,webauthn:{rpId:r,rpOrigins:a,type:s.webauthn.type,credential_response:s.webauthn.credential_response}}):{data:null,error:l}}catch(o){return on(o)?{data:null,error:o}:{data:null,error:new ln("Unexpected error in register",o)}}}}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Ar={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:en,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function jr(e,t,n){return await n()}const Er={};class Br{get jwks(){var e,t;return null!==(t=null===(e=Er[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Er[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Ar),e);if(this.storageKey=a.storageKey,this.instanceID=null!==(t=Br.nextInstanceID[this.storageKey])&&void 0!==t?t:0,Br.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,"function"===typeof a.debug&&(this.logger=a.debug),this.instanceID>0&&Bn()){const e="".concat(this._logPrefix()," Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new ir({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=On(a.fetch),this.lock=a.lock||jr,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Bn()&&(null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===n?void 0:n.locks)?this.lock=dr:this.lock=jr,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Cr(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:In()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=or(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=or(this.memoryStorage)),Bn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e);try{await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}catch(t){this._debug("#broadcastChannel","error",t)}})}a.skipAutoInitialize||this.initialize().catch(e=>{this._debug("#initialize()","error",e)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return"GoTrueClient@"+"".concat(this.storageKey,":").concat(this.instanceID," (").concat(Qt,") ").concat((new Date).toISOString())}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger(this._logPrefix(),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},n="none";if(Bn()&&(t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),Bn()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return on(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return{error:a}}const{session:i,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout(async()=>{"recovery"===o?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return on(t)?this._returnResult({error:t}):this._returnResult({error:new ln("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const a=await Qn(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:$n}),{data:i,error:o}=a;if(o||!i)return this._returnResult({data:{user:null,session:null},error:o});const s=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",s)),this._returnResult({data:{user:l,session:s},error:null})}catch(a){if(on(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,n,r;try{let a;if("email"in e){const{email:n,password:r,options:i}=e;let o=null,s=null;"pkce"===this.flowType&&([o,s]=await Fn(this.storage,this.storageKey)),a=await Qn(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:s},xform:$n})}else{if(!("phone"in e))throw new pn("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:o}=e;a=await Qn(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null===o||void 0===o?void 0:o.data)&&void 0!==n?n:{},channel:null!==(r=null===o||void 0===o?void 0:o.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:$n})}}const{data:i,error:o}=a;if(o||!i)return await Mn(this.storage,"".concat(this.storageKey,"-code-verifier")),this._returnResult({data:{user:null,session:null},error:o});const s=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",s)),this._returnResult({data:{user:l,session:s},error:null})}catch(a){if(await Mn(this.storage,"".concat(this.storageKey,"-code-verifier")),on(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:a}=e;t=await Qn(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Xn})}else{if(!("phone"in e))throw new pn("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:a}=e;t=await Qn(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Xn})}}const{data:n,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!n||!n.session||!n.user){const e=new un;return this._returnResult({data:{user:null,session:null},error:e})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(on(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}}async signInWithEthereum(e){var t,n,r,a,i,o,s,l,c,d,h;let u,p;if("message"in e)u=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:m,options:f}=e;let g;if(Bn())if("object"===typeof h)g=h;else{const e=window;if(!("ethereum"in e)||"object"!==typeof e.ethereum||!("request"in e.ethereum)||"function"!==typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!==typeof h||!(null===f||void 0===f?void 0:f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=h}const y=new URL(null!==(t=null===f||void 0===f?void 0:f.url)&&void 0!==t?t:window.location.href),w=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!w||0===w.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const v=hr(w[0]);let b=null===(n=null===f||void 0===f?void 0:f.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!b){const e=await g.request({method:"eth_chainId"});b=parseInt(e,16)}u=function(e){var t;const{chainId:n,domain:r,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:s,requestId:l,resources:c,scheme:d,uri:h,version:u}=e;if(!Number.isInteger(n))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(n));if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(o));if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==u)throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(u));if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(e.statement));const p=hr(e.address),m=d?"".concat(d,"://").concat(r):r,f=e.statement?"".concat(e.statement,"\n"):"",g="".concat(m," wants you to sign in with your Ethereum account:\n").concat(p,"\n\n").concat(f);let y="URI: ".concat(h,"\nVersion: ").concat(u,"\nChain ID: ").concat(n).concat(o?"\nNonce: ".concat(o):"","\nIssued At: ").concat(i.toISOString());if(a&&(y+="\nExpiration Time: ".concat(a.toISOString())),s&&(y+="\nNot Before: ".concat(s.toISOString())),l&&(y+="\nRequest ID: ".concat(l)),c){let e="\nResources:";for(const t of c){if(!t||"string"!==typeof t)throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(t));e+="\n- ".concat(t)}y+=e}return"".concat(g,"\n").concat(y)}({domain:y.host,address:v,statement:m,uri:y.href,version:"1",chainId:b,nonce:null===(r=null===f||void 0===f?void 0:f.signInWithEthereum)||void 0===r?void 0:r.nonce,issuedAt:null!==(i=null===(a=null===f||void 0===f?void 0:f.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==i?i:new Date,expirationTime:null===(o=null===f||void 0===f?void 0:f.signInWithEthereum)||void 0===o?void 0:o.expirationTime,notBefore:null===(s=null===f||void 0===f?void 0:f.signInWithEthereum)||void 0===s?void 0:s.notBefore,requestId:null===(l=null===f||void 0===f?void 0:f.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null===f||void 0===f?void 0:f.signInWithEthereum)||void 0===c?void 0:c.resources}),p=await g.request({method:"personal_sign",params:[ur(u),v]})}try{const{data:t,error:n}=await Qn(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:u,signature:p},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:$n});if(n)throw n;if(!t||!t.session||!t.user){const e=new un;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(m){if(on(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(e){var t,n,r,a,i,o,s,l,c,d,h,u;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:h,wallet:u,statement:f,options:g}=e;let y;if(Bn())if("object"===typeof u)y=u;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!==typeof u||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=u}const w=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),m=t.signature}else{if(!("signMessage"in y)||"function"!==typeof y.signMessage||!("publicKey"in y)||"object"!==typeof y||!y.publicKey||!("toBase58"in y.publicKey)||"function"!==typeof y.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=["".concat(w.host," wants you to sign in with your Solana account:"),y.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1","URI: ".concat(w.href),"Issued At: ".concat(null!==(r=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()),...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(d=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:t,error:n}=await Qn(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:En(m)},(null===(h=e.options)||void 0===h?void 0:h.captchaToken)?{gotrue_meta_security:{captcha_token:null===(u=e.options)||void 0===u?void 0:u.captchaToken}}:null),xform:$n});if(n)throw n;if(!t||!t.session||!t.user){const e=new un;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(f){if(on(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async _exchangeCodeForSession(e){const t=await Rn(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{if(!n&&"pkce"===this.flowType)throw new gn;const{data:t,error:a}=await Qn(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:$n});if(await Mn(this.storage,"".concat(this.storageKey,"-code-verifier")),a)throw a;if(!t||!t.session||!t.user){const e=new un;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:a})}catch(a){if(await Mn(this.storage,"".concat(this.storageKey,"-code-verifier")),on(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:a,nonce:i}=e,o=await Qn(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:$n}),{data:s,error:l}=o;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s||!s.session||!s.user){const e=new un;return this._returnResult({data:{user:null,session:null},error:e})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:s,error:l})}catch(t){if(on(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,r,a,i;try{if("email"in e){const{email:r,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Fn(this.storage,this.storageKey));const{error:s}=await Qn(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(n=null===a||void 0===a?void 0:a.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}if("phone"in e){const{phone:t,options:n}=e,{data:o,error:s}=await Qn(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(a=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(i=null===n||void 0===n?void 0:n.channel)&&void 0!==i?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null===o||void 0===o?void 0:o.message_id},error:s})}throw new pn("You must provide either an email or phone number.")}catch(o){if(await Mn(this.storage,"".concat(this.storageKey,"-code-verifier")),on(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var t,n;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:o}=await Qn(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:$n});if(o)throw o;if(!i){throw new Error("An error occurred on token verification.")}const s=i.session,l=i.user;return(null===s||void 0===s?void 0:s.access_token)&&(await this._saveSession(s),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",s)),this._returnResult({data:{user:l,session:s},error:null})}catch(r){if(on(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var t,n,r,a,i;try{let o=null,s=null;"pkce"===this.flowType&&([o,s]=await Fn(this.storage,this.storageKey));const l=await Qn(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:s}),headers:this.headers,xform:tr});return(null===(a=l.data)||void 0===a?void 0:a.url)&&Bn()&&!(null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(o){if(await Mn(this.storage,"".concat(this.storageKey,"-code-verifier")),on(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new dn;const{error:r}=await Qn(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(on(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:r,options:a}=e,{error:i}=await Qn(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}if("phone"in e){const{phone:n,type:r,options:a}=e,{data:i,error:o}=await Qn(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o})}throw new pn("You must provide either an email or phone number and a type")}catch(t){if(on(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Rn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Xt;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.userStorage){const t=await Rn(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=Kn()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,n,r)=>{if("__isInsecureUserWarningProxy"===n)return!0;if("symbol"===typeof n){const t=n.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,n,r)}return t.value||"string"!==typeof n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,n,r)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Qn(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:er}):await this._useSession(async e=>{var t,n,r;const{data:a,error:i}=e;if(i)throw i;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Qn(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:er}):{data:{user:null},error:new dn}})}catch(t){if(on(t))return hn(t)&&(await this._removeSession(),await Mn(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:a}=n;if(a)throw a;if(!r.session)throw new dn;const i=r.session;let o=null,s=null;"pkce"===this.flowType&&null!=e.email&&([o,s]=await Fn(this.storage,this.storageKey));const{data:l,error:c}=await Qn(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:s}),jwt:i.access_token,xform:er});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(n){if(await Mn(this.storage,"".concat(this.storageKey,"-code-verifier")),on(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new dn;const t=Date.now()/1e3;let n=t,r=!0,a=null;const{payload:i}=Wn(e.access_token);if(i.exp&&(n=i.exp,r=n<=t),r){const{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:i}=await this._getUser(e.access_token);if(i)return this._returnResult({data:{user:null,session:null},error:i});a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(on(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new dn;const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(on(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Bn())throw new mn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new mn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new fn("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new mn("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new fn("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:a,refresh_token:i,expires_in:o,expires_at:s,token_type:l}=e;if(!a||!o||!i||!l)throw new mn("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(o);let h=c+d;s&&(h=parseInt(s));const u=h-c;1e3*u<=$t&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(u,"s, should have been closer to ").concat(d,"s"));const p=h-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,c);const{data:m,error:f}=await this._getUser(a);if(f)throw f;const g={provider_token:n,provider_refresh_token:r,access_token:a,expires_in:d,expires_at:h,refresh_token:i,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(n){if(on(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return"function"===typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),e):Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Rn(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a&&!hn(a))return this._returnResult({error:a});const i=null===(n=r.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return on(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status)&&!hn(t))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await Mn(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:a}=t;if(a)throw a;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(a){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await Fn(this.storage,this.storageKey,!0));try{return await Qn(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(await Mn(this.storage,"".concat(this.storageKey,"-code-verifier")),on(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(on(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,a,i,o;const{data:s,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await Qn(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(o=null===(i=s.session)||void 0===i?void 0:i.access_token)&&void 0!==o?o:void 0})});if(r)throw r;return Bn()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),this._returnResult({data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null})}catch(n){if(on(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:r,data:{session:a}}=t;if(r)throw r;const{options:i,provider:o,token:s,access_token:l,nonce:c}=e,d=await Qn(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,jwt:null!==(n=null===a||void 0===a?void 0:a.access_token)&&void 0!==n?n:void 0,body:{provider:o,id_token:s,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:$n}),{data:h,error:u}=d;return u?this._returnResult({data:{user:null,session:null},error:u}):h&&h.session&&h.user?(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:u})):this._returnResult({data:{user:null,session:null},error:new un})}catch(r){if(await Mn(this.storage,"".concat(this.storageKey,"-code-verifier")),on(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:i}=t;if(i)throw i;return await Qn(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(on(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const a=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Qn(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:$n})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&wn(t)&&Date.now()+n-a<$t},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!r(i,null,t))return void e(t)}catch(a){if(!r(i,a))return void t(a)}})()}))}catch(a){if(this._debug(t,"error",a),on(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Bn()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Rn(this.storage,this.storageKey);if(a&&this.userStorage){let t=await Rn(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await Ln(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:Kn()}else if(a&&!a.user&&!a.user){const e=await Rn(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await Mn(this.storage,this.storageKey+"-user"),await Ln(this.storage,this.storageKey,a)):a.user=Kn()}if(this._debug(n,"session from storage",a),!this._isValidSession(a))return this._debug(n,"session is not valid"),void(null!==a&&await this._removeSession());const i=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<Xt;if(this._debug(n,"session has".concat(i?"":" not"," expired with margin of ").concat(Xt,"s")),i){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),wn(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(n,"error",a),void console.error(a)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new dn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new Dn;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new dn;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),on(a)){const e={data:null,error:a};return wn(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(a){r.push(a)}});if(await Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Mn(this.storage,"".concat(this.storageKey,"-code-verifier"));const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await Ln(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=Yn(e);await Ln(this.storage,this.storageKey,r)}else{const e=Yn(t);await Ln(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Mn(this.storage,this.storageKey),await Mn(this.storage,this.storageKey+"-code-verifier"),await Mn(this.storage,this.storageKey+"-user"),this.userStorage&&await Mn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Bn()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$t);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&"object"===typeof t&&"function"===typeof t.unref?t.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/$t);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat($t,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof lr))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bn()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await Fn(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?this._returnResult({data:null,error:a}):await Qn(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(on(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:s,error:l}=await Qn(this.fetch,"POST","".concat(this.url,"/factors"),{body:o,headers:this.headers,jwt:null===(n=null===a||void 0===a?void 0:a.session)||void 0===n?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===s.type&&(null===(r=null===s||void 0===s?void 0:s.totp)||void 0===r?void 0:r.qr_code)&&(s.totp.qr_code="data:image/svg+xml;utf-8,".concat(s.totp.qr_code)),this._returnResult({data:s,error:null}))})}catch(t){if(on(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?br(e.webauthn.credential_response):xr(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:s}=await Qn(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:i,headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return s?this._returnResult({data:null,error:s}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:s}))})}catch(t){if(on(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const i=await Qn(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:e,headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});if(i.error)return i;const{data:o}=i;if("webauthn"!==o.type)return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:wr(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:vr(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(on(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(e=null===t||void 0===t?void 0:t.factors)&&void 0!==e?e:[])r.all.push(a),"verified"===a.status&&r[a.factor_type].push(a);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,n,r,a;if(e)try{const{payload:r}=Wn(e);let a=null;r.aal&&(a=r.aal);let i=a;const{data:{user:o},error:s}=await this.getUser(e);if(s)return this._returnResult({data:null,error:s});(null!==(n=null===(t=null===o||void 0===o?void 0:o.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(i="aal2");return{data:{currentLevel:a,nextLevel:i,currentAuthenticationMethods:r.amr||[]},error:null}}catch(d){if(on(d))return this._returnResult({data:null,error:d});throw d}const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Wn(i.access_token);let l=null;s.aal&&(l=s.aal);let c=l;(null!==(a=null===(r=i.user.factors)||void 0===r?void 0:r.filter(e=>"verified"===e.status))&&void 0!==a?a:[]).length>0&&(c="aal2");return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:s.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await Qn(this.fetch,"GET","".concat(this.url,"/oauth/authorizations/").concat(e),{headers:this.headers,jwt:n.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new dn})})}catch(t){if(on(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new dn});const i=await Qn(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return i.data&&i.data.redirect_url&&Bn()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(on(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new dn});const i=await Qn(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return i.data&&i.data.redirect_url&&Bn()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(on(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await Qn(this.fetch,"GET","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new dn})})}catch(e){if(on(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?(await Qn(this.fetch,"DELETE","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new dn})})}catch(t){if(on(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:r,error:a}=await Qn(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(a)throw a;return r.keys&&0!==r.keys.length?(this.jwks=r,this.jwks_cached_at=n,t=r.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});n=e.session.access_token}const{header:r,payload:a,signature:i,raw:{header:o,payload:s}}=Wn(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:a,header:r,signature:i},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,i,function(e){const t=[];return An(e,e=>t.push(e)),new Uint8Array(t)}("".concat(o,".").concat(s))))throw new bn("Invalid JWT signature");return{data:{claims:a,header:r,signature:i},error:null}}catch(n){if(on(n))return this._returnResult({data:null,error:n});throw n}}}Br.nextInstanceID={};const Pr=Br;let Ir="";Ir="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Or={headers:{"X-Client-Info":"supabase-js-".concat(Ir,"/").concat("2.97.0")}},Lr={schema:"public"},Rr={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mr={};function Dr(e){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wr(e){var t=function(e,t){if("object"!=Dr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Dr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dr(t)?t:t+""}function Hr(e,t,n){return(t=Wr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(n),!0).forEach(function(t){Hr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const qr=(e,t,n)=>{const r=(e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)})(n),a=Headers;return async(n,i)=>{var o;const s=null!==(o=await t())&&void 0!==o?o:e;let l=new a(null===i||void 0===i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(s)),r(n,Fr(Fr({},i),{},{headers:l}))}};var Ur=class extends Pr{constructor(e){super(e)}},Gr=class{constructor(e,t,n){var r,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o="sb-".concat(i.hostname.split(".")[0],"-auth-token"),s=function(e,t){var n,r;const{db:a,auth:i,realtime:o,global:s}=e,{db:l,auth:c,realtime:d,global:h}=t,u={db:Fr(Fr({},l),a),auth:Fr(Fr({},c),i),realtime:Fr(Fr({},d),o),storage:{},global:Fr(Fr(Fr({},h),s),{},{headers:Fr(Fr({},null!==(n=null===h||void 0===h?void 0:h.headers)&&void 0!==n?n:{}),null!==(r=null===s||void 0===s?void 0:s.headers)&&void 0!==r?r:{})}),accessToken:async()=>""};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}(null!==n&&void 0!==n?n:{},{db:Lr,realtime:Mr,auth:Fr(Fr({},Rr),{},{storageKey:o}),global:Or});var l;(this.storageKey=null!==(r=s.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=s.global.headers)&&void 0!==a?a:{},s.accessToken)?(this.accessToken=s.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(l=s.auth)&&void 0!==l?l:{},this.headers,s.global.fetch);this.fetch=qr(t,this._getAccessToken.bind(this),s.global.fetch),this.realtime=this._initRealtimeClient(Fr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},s.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new _e(new URL("rest/v1",i).href,{headers:this.headers,schema:s.db.schema,fetch:this.fetch,timeout:s.db.timeout,urlLengthLimit:s.db.urlLengthLimit}),this.storage=new Jt(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),s.accessToken||this._listenForAuthEvents()}get functions(){return new he(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{head:!1,get:!1,count:void 0};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t,n=this;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return null!==(e=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==e?e:n.supabaseKey}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:a,detectSessionInUrl:i,storage:o,userStorage:s,storageKey:l,flowType:c,lock:d,debug:h,throwOnError:u}=e;const p={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Ur({url:this.authUrl.href,headers:Fr(Fr({},p),t),storageKey:l,autoRefreshToken:r,persistSession:a,detectSessionInUrl:i,storage:o,userStorage:s,flowType:c,lock:d,debug:h,throwOnError:u,fetch:n,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new it(this.realtimeUrl.href,Fr(Fr({},e),{},{params:Fr(Fr({},{apikey:this.supabaseKey}),null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}};(function(){if("undefined"!==typeof window)return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(void 0===t||null===t)return!1;const n=t.match(/^v(\d+)\./);return!!n&&parseInt(n[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Kr="https://vfsdxoyqabbefzkgsvvk.supabase.co",Yr="PASTE_YOUR_ANON_KEY_HERE",Vr=Kr&&Yr?((e,t,n)=>new Gr(e,t,n))(Kr,Yr):null;async function Zr(e){if(!Vr)return{data:null,error:"Supabase not configured"};let t=Vr.from("quiz_gate_results").select("*").order("created_at",{ascending:!1});e&&e.length>0&&(t=t.in("class_id",e));const{data:n,error:r}=await t;return r?{data:null,error:r}:{data:n||[],error:null}}async function Jr(){let{classPeriod:e,faction:t,limit:n=25}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Vr)return{data:[],error:"Supabase not configured"};let r=Vr.from("scores").select("*").order("final_score",{ascending:!1}).limit(n);e&&(r=r.eq("class_period",e)),t&&(r=r.eq("faction",t));const{data:a,error:i}=await r;return{data:a||[],error:i}}async function Qr(e){if(!Vr)return{data:null,error:"Supabase not configured"};const{data:t,error:n}=await Vr.from("teachers").select("*").eq("id",e).single();return{data:t,error:n}}function $r(){const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let n=0;n<6;n++)t+=e.charAt(Math.floor(32*Math.random()));return t}async function Xr(e){if(!Vr)return{data:null,error:"Supabase not configured"};const{data:t,error:n}=await Vr.from("classes").select("id, name, code").eq("code",e.toUpperCase().trim()).single();return"PGRST116"===(null===n||void 0===n?void 0:n.code)?{data:null,error:null}:{data:t,error:n}}async function ea(e){if(!Vr)return{data:null,error:"Supabase not configured"};let t=Vr.from("scores").select("*").order("created_at",{ascending:!1});e&&e.length>0&&(t=t.in("class_id",e));const{data:n,error:r}=await t;if(r)return{data:null,error:r};const a=n||[],i={},o={us:[],british:[],native:[]};for(const c of a){const e=c.class_id||"unassigned";i[e]||(i[e]=[]),i[e].push(c),o[c.faction]&&o[c.faction].push(c)}const s=Object.entries(i).map(e=>{let[t,n]=e;return{classId:t,count:n.length,avgScore:Math.round(n.reduce((e,t)=>e+t.final_score,0)/n.length),avgQuizPercent:n.filter(e=>e.knowledge_total>0).length>0?Math.round(n.filter(e=>e.knowledge_total>0).reduce((e,t)=>e+t.knowledge_correct/t.knowledge_total*100,0)/n.filter(e=>e.knowledge_total>0).length):0,topScore:Math.max(...n.map(e=>e.final_score))}}),l=Object.entries(o).map(e=>{let[t,n]=e;return{faction:t,count:n.length,avgScore:n.length>0?Math.round(n.reduce((e,t)=>e+t.final_score,0)/n.length):0}});return{data:{totalGames:a.length,allScores:a,classStats:s,factionStats:l},error:null}}const ta={us:"United States",british:"British/Canada",native:"Native Coalition"};function na(t){let{playerName:n,classPeriod:r,playerFaction:a,finalScore:i,scores:o,objectiveBonus:s,factionMultiplier:l,nationalismMeter:d,nativeResistance:h,navalDominance:u,knowledgeCheckResults:p,battleStats:m,playerTerritoryCount:f,roundsPlayed:g,gameOverReason:y,difficulty:w,sessionId:v,classId:b,onSubmitted:x}=t;const k=function(e,t,n,r,a){return"".concat(e,"|").concat(t,"|").concat(n,"|").concat(r,"|").concat(a.won,"|").concat(a.fought)}(n,a,i,g,m),_=function(e){try{return JSON.parse(localStorage.getItem("war1812_submitted_scores")||"[]").includes(e)}catch(t){return!1}}(k),[T,S]=(0,e.useState)(_?"success":"idle"),[N,C]=(0,e.useState)(""),[A,j]=(0,e.useState)(""),[E,B]=(0,e.useState)(null),[P,I]=(0,e.useState)(""),[O,L]=(0,e.useState)(!1);if(!Vr)return null;return"success"===T?(0,c.jsxs)("div",{className:"bg-green-900/15 border border-green-500/25 rounded-lg p-4 text-center",children:[(0,c.jsx)("p",{className:"text-green-400 font-display text-sm font-bold tracking-wide",children:_?"Score already on the leaderboard":"Score submitted to the leaderboard!"}),(0,c.jsxs)("p",{className:"text-parchment-dark/50 text-xs mt-1 font-body",children:[n," \u2014 ",ta[a]," \u2014 ",i," pts"]})]}):(0,c.jsxs)("div",{className:"bg-black/20 rounded-lg p-4 text-center border border-parchment-dark/8",children:["error"===T&&(0,c.jsx)("p",{className:"text-red-400 text-sm mb-2 font-body",children:N}),!b&&(0,c.jsxs)("div",{className:"mb-3 text-left",children:[(0,c.jsx)("p",{className:"text-parchment-dark/50 text-xs font-body mb-1.5",children:"Have a class code from your teacher?"}),(0,c.jsx)("div",{className:"flex gap-2",children:(0,c.jsx)("input",{type:"text",value:A,onChange:e=>{const t=e.target.value.toUpperCase().slice(0,6);j(t),6===t.length?(async e=>{if(!e.trim())return B(null),void I("");L(!0),I("");const{data:t,error:n}=await Xr(e);L(!1),n?I("Could not validate code."):t?(B(t),I("")):(I("Code not found"),B(null))})(t):(B(null),I(""))},placeholder:"ABC123",maxLength:6,className:"flex-1 bg-war-ink/50 border border-parchment-dark/15 rounded px-3 py-2 text-parchment/90 placeholder-parchment-dark/30 font-body font-mono tracking-widest text-center uppercase text-sm focus:border-war-gold/40 focus:outline-none transition-colors"})}),O&&(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs mt-1 font-body italic",children:"Checking..."}),P&&(0,c.jsx)("p",{className:"text-red-400 text-xs mt-1 font-body",children:P}),E&&(0,c.jsxs)("p",{className:"text-green-400 text-xs mt-1 font-body",children:["Will submit to: ",E.name]})]}),(0,c.jsx)("button",{onClick:async()=>{S("submitting"),C("");const e=b||(E?E.id:null),{error:t}=await async function(e){let{playerName:t,classPeriod:n,faction:r,finalScore:a,baseScore:i,objectiveBonus:o,factionMultiplier:s,nationalismMeter:l,nativeResistance:c,navalDominance:d,knowledgeCorrect:h,knowledgeTotal:u,battlesWon:p,battlesFought:m,territoriesHeld:f,roundsPlayed:g,gameOverReason:y,difficulty:w,sessionId:v,classId:b}=e;if(!Vr)return{error:"Supabase not configured"};const{data:x,error:k}=await Vr.from("scores").insert([{player_name:t,class_period:n,faction:r,final_score:a,base_score:i,objective_bonus:o,faction_multiplier:s,nationalism_meter:l,native_resistance:c,naval_dominance:d,knowledge_correct:h,knowledge_total:u,battles_won:p,battles_fought:m,territories_held:f,rounds_played:g,game_over_reason:y||"treaty",difficulty:w||"medium",session_id:v||null,class_id:b||null}]).select();return{data:x,error:k}}({playerName:n,classPeriod:r,faction:a,finalScore:i,baseScore:o[a]||0,objectiveBonus:s,factionMultiplier:l,nationalismMeter:d||0,nativeResistance:h||0,navalDominance:u||0,knowledgeCorrect:p.correct,knowledgeTotal:p.total,battlesWon:m.won,battlesFought:m.fought,territoriesHeld:f,roundsPlayed:g,gameOverReason:y,difficulty:w,sessionId:v,classId:e});t?(S("error"),C("string"===typeof t?t:t.message||"Submission failed")):(S("success"),function(e){try{const t=JSON.parse(localStorage.getItem("war1812_submitted_scores")||"[]");t.push(e),t.length>20&&t.shift(),localStorage.setItem("war1812_submitted_scores",JSON.stringify(t))}catch(t){}}(k),!b&&e&&v&&async function(e){let{sessionId:t,classId:n}=e;return Vr&&t&&n?(await Vr.from("quiz_gate_results").update({class_id:n}).eq("session_id",t),await Vr.from("scores").update({class_id:n}).eq("session_id",t),{error:null}):{error:"Missing params"}}({sessionId:v,classId:e}).catch(()=>{}),x&&x())},disabled:"submitting"===T,className:"w-full py-3 font-display text-sm rounded font-bold tracking-wide transition-colors ".concat("submitting"===T?"bg-war-ink/50 text-parchment-dark/40 cursor-not-allowed":"bg-war-green text-parchment hover:brightness-125 cursor-pointer border border-green-800/50 shadow-copper"),children:"submitting"===T?"Submitting...":"Submit Score to Leaderboard"})]})}const ra={us:"\ud83e\udd85",british:"\ud83c\udf41",native:"\ud83c\udff9"},aa={us:"text-[#4a7ec7]",british:"text-red-400",native:"text-war-gold"},ia=["\ud83e\udd47","\ud83e\udd48","\ud83e\udd49"];function oa(e){let{victoryType:t}=e;if(!t)return null;const n={domination:{label:"DOM",className:"text-war-copper border-war-copper/40 bg-war-copper/10"},treaty:{label:"TRT",className:"text-parchment-dark/50 border-parchment-dark/30 bg-parchment-dark/5"},elimination:{label:"ELM",className:"text-red-400/70 border-red-400/30 bg-red-400/5"}}[t];return n?(0,c.jsx)("span",{className:"inline-block ml-1.5 px-1 py-px text-[9px] leading-tight font-body font-bold tracking-wider uppercase border rounded ".concat(n.className),children:n.label}):null}function sa(t){let{onViewFull:n}=t;const[r,a]=(0,e.useState)([]),[i,o]=(0,e.useState)(!0),[s,l]=(0,e.useState)(null);return(0,e.useEffect)(()=>{if(!Vr)return;let e=!1;return async function(){o(!0),l(null);try{const{data:t,error:n}=await Jr({limit:5});if(e)return;n?l("string"===typeof n?n:"Failed to load scores"):a(t)}catch(t){e||l("Failed to load scores")}finally{e||o(!1)}}(),()=>{e=!0}},[]),Vr?(0,c.jsx)("div",{className:"w-full max-w-md mx-auto mt-8 animate-slideup",style:{animationDelay:"0.4s"},children:(0,c.jsxs)("div",{className:"bg-war-navy/60 backdrop-blur rounded-lg border border-war-gold/20 shadow-card overflow-hidden",children:[(0,c.jsx)("div",{className:"px-5 py-3 border-b border-war-gold/15",style:{background:"linear-gradient(135deg, rgba(184,115,51,0.1) 0%, rgba(20,30,48,0.8) 100%)"},children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("div",{className:"w-1 h-1 rounded-full bg-war-gold/60"}),(0,c.jsx)("p",{className:"text-war-copper text-xs tracking-[0.15em] uppercase font-body font-bold",children:"Hall of Commanders"})]}),(0,c.jsx)("div",{className:"w-6 h-px bg-war-gold/20"})]})}),(0,c.jsxs)("div",{className:"px-5 py-3",children:[i&&(0,c.jsxs)("div",{className:"py-6 text-center",children:[(0,c.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,c.jsx)("div",{className:"w-1 h-1 rounded-full bg-war-gold/40 animate-candleflicker"}),(0,c.jsx)("div",{className:"w-1 h-1 rounded-full bg-war-gold/40 animate-candleflicker",style:{animationDelay:"0.5s"}}),(0,c.jsx)("div",{className:"w-1 h-1 rounded-full bg-war-gold/40 animate-candleflicker",style:{animationDelay:"1s"}})]}),(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs font-body italic mt-2",children:"Loading rankings..."})]}),!i&&s&&(0,c.jsx)("div",{className:"py-5 text-center",children:(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs font-body italic",children:s})}),!i&&!s&&0===r.length&&(0,c.jsxs)("div",{className:"py-5 text-center",children:[(0,c.jsx)("p",{className:"text-parchment-dark/50 text-sm font-body italic",children:"No commanders have entered the record yet."}),(0,c.jsx)("p",{className:"text-parchment-dark/30 text-xs font-body mt-1",children:"Complete a campaign to claim your place in history."})]}),!i&&!s&&r.length>0&&(0,c.jsx)("div",{className:"space-y-0",children:r.map((e,t)=>(0,c.jsxs)("div",{className:"flex items-center gap-3 py-2 ".concat(t<r.length-1?"border-b border-parchment-dark/8":""),children:[(0,c.jsx)("div",{className:"w-6 text-center flex-shrink-0",children:t<3?(0,c.jsx)("span",{className:"text-sm leading-none",children:ia[t]}):(0,c.jsx)("span",{className:"text-xs text-parchment-dark/40 font-body font-bold",children:t+1})}),(0,c.jsx)("span",{className:"text-sm flex-shrink-0 ".concat(aa[e.faction]||""),children:ra[e.faction]||"?"}),(0,c.jsx)("span",{className:"flex-1 text-sm font-body truncate min-w-0 ".concat(t<3?"text-parchment/80 font-bold":"text-parchment-dark/60"),children:e.player_name}),(0,c.jsxs)("div",{className:"flex items-center flex-shrink-0",children:[(0,c.jsx)("span",{className:"text-sm font-display font-bold tabular-nums ".concat(0===t?"text-war-gold":t<3?"text-war-brass/80":"text-parchment-dark/50"),children:e.final_score}),(0,c.jsx)(oa,{victoryType:e.game_over_reason})]})]},e.id))})]}),n&&(0,c.jsx)("div",{className:"px-5 pb-4 pt-1",children:(0,c.jsx)("button",{onClick:n,className:"w-full py-2 text-xs font-body text-parchment-dark/50 tracking-wider uppercase border border-parchment-dark/15 rounded hover:border-war-gold/30 hover:text-war-gold/70 transition-colors cursor-pointer focus:outline-none focus:ring-1 focus:ring-war-gold/30 focus:ring-offset-1 focus:ring-offset-war-navy",children:"See All Rankings"})})]})}):null}const la={us:"United States",british:"British/Canada",native:"Native Coalition"},ca={us:"text-[#4a7ec7]",british:"text-red-400",native:"text-war-gold"};function da(t){let{onClose:n,currentClassPeriod:r}=t;const[a,i]=(0,e.useState)([]),[o,s]=(0,e.useState)(!0),[l,d]=(0,e.useState)(r||""),[h,u]=(0,e.useState)(""),[p,m]=(0,e.useState)([]),f=(0,e.useCallback)(async()=>{s(!0);const{data:e}=await Jr({classPeriod:l||void 0,faction:h||void 0,limit:50});i(e),s(!1)},[l,h]);return(0,e.useEffect)(()=>{Vr&&Vr.from("scores").select("class_period").then(e=>{let{data:t}=e;if(t){const e=[...new Set(t.map(e=>e.class_period))].sort();m(e)}})},[]),(0,e.useEffect)(()=>{f()},[f]),(0,e.useEffect)(()=>{const e=e=>{"Escape"===e.key&&(e.preventDefault(),n())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n]),Vr?(0,c.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",style:{zIndex:1e3},role:"presentation",children:(0,c.jsxs)("div",{className:"bg-war-navy border border-war-gold/30 rounded-lg max-w-2xl w-full max-h-[90vh] flex flex-col shadow-modal animate-fadein",role:"dialog","aria-modal":"true","aria-label":"Leaderboard",children:[(0,c.jsxs)("div",{className:"px-6 py-4 border-b border-war-gold/20 flex items-center justify-between flex-shrink-0",style:{background:"linear-gradient(135deg, rgba(184,115,51,0.15) 0%, rgba(20,30,48,0.95) 100%)"},children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"}),(0,c.jsx)("p",{className:"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold",children:"Rankings"})]}),(0,c.jsx)("h2",{className:"text-parchment font-display text-lg tracking-wide",children:"Leaderboard"})]}),(0,c.jsx)("button",{onClick:n,className:"text-parchment-dark/40 hover:text-parchment transition-colors cursor-pointer text-xl","aria-label":"Close",children:"\xd7"})]}),(0,c.jsxs)("div",{className:"px-6 py-3 border-b border-parchment-dark/10 flex gap-3 flex-shrink-0 flex-wrap",children:[(0,c.jsx)("label",{htmlFor:"filter-period",className:"sr-only",children:"Filter by class period"}),(0,c.jsxs)("select",{id:"filter-period",value:l,onChange:e=>d(e.target.value),className:"bg-war-ink/50 text-parchment/80 border border-parchment-dark/15 rounded px-3 py-1.5 text-sm font-body cursor-pointer focus:border-war-gold/40 focus:outline-none",children:[(0,c.jsx)("option",{value:"",children:"All Periods"}),p.map(e=>(0,c.jsx)("option",{value:e,children:e},e))]}),(0,c.jsx)("label",{htmlFor:"filter-faction",className:"sr-only",children:"Filter by faction"}),(0,c.jsxs)("select",{id:"filter-faction",value:h,onChange:e=>u(e.target.value),className:"bg-war-ink/50 text-parchment/80 border border-parchment-dark/15 rounded px-3 py-1.5 text-sm font-body cursor-pointer focus:border-war-gold/40 focus:outline-none",children:[(0,c.jsx)("option",{value:"",children:"All Factions"}),(0,c.jsx)("option",{value:"us",children:"United States"}),(0,c.jsx)("option",{value:"british",children:"British/Canada"}),(0,c.jsx)("option",{value:"native",children:"Native Coalition"})]})]}),(0,c.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-3",children:o?(0,c.jsx)("p",{className:"text-parchment-dark/50 text-center py-8 font-body italic",children:"Loading..."}):0===a.length?(0,c.jsx)("p",{className:"text-parchment-dark/50 text-center py-8 font-body italic",children:"No scores yet. Be the first!"}):(0,c.jsxs)("table",{className:"w-full text-sm font-body",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"text-parchment-dark/50 text-left border-b border-parchment-dark/15",children:[(0,c.jsx)("th",{className:"py-2 w-8 font-normal",children:"#"}),(0,c.jsx)("th",{className:"py-2 font-normal",children:"Commander"}),(0,c.jsx)("th",{className:"py-2 font-normal",children:"Period"}),(0,c.jsx)("th",{className:"py-2 font-normal",children:"Faction"}),(0,c.jsx)("th",{className:"py-2 text-right font-normal",children:"Score"}),(0,c.jsx)("th",{className:"py-2 text-right font-normal",children:"Quiz"})]})}),(0,c.jsx)("tbody",{children:a.map((e,t)=>(0,c.jsxs)("tr",{className:"border-b border-parchment-dark/8 ".concat(t<3?"text-parchment/80":"text-parchment-dark/60"),children:[(0,c.jsx)("td",{className:"py-2",children:0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":2===t?"\ud83e\udd49":"".concat(t+1)}),(0,c.jsx)("td",{className:"py-2 font-bold",children:e.player_name}),(0,c.jsx)("td",{className:"py-2",children:e.class_period}),(0,c.jsx)("td",{className:"py-2 ".concat(ca[e.faction]||""),children:la[e.faction]||e.faction}),(0,c.jsxs)("td",{className:"py-2 text-right font-bold text-war-gold font-display",children:[e.final_score,(0,c.jsx)(oa,{victoryType:e.game_over_reason})]}),(0,c.jsx)("td",{className:"py-2 text-right",children:e.knowledge_total>0?"".concat(Math.round(e.knowledge_correct/e.knowledge_total*100),"%"):"-"})]},e.id))})]})})]})}):(0,c.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",style:{zIndex:1e3},role:"presentation",children:(0,c.jsxs)("div",{className:"bg-war-navy border border-war-gold/30 rounded-lg max-w-md w-full p-6 text-center shadow-modal animate-fadein",role:"dialog","aria-modal":"true","aria-label":"Leaderboard unavailable",children:[(0,c.jsx)("p",{className:"text-parchment/80 font-body text-base mb-4",children:"Leaderboard is not available. Supabase has not been configured."}),(0,c.jsx)("button",{onClick:n,className:"px-6 py-2.5 bg-war-gold text-war-ink font-display text-sm rounded hover:bg-war-brass transition-colors cursor-pointer font-bold tracking-wide shadow-copper",children:"Close"})]})})}const ha={us:"In reality, the War of 1812 ended in a strategic draw for the United States. American invasions of Canada failed repeatedly \u2014 Detroit was surrendered without a fight, and three attempts to take Montreal were repulsed. However, Oliver Hazard Perry\u2019s victory on Lake Erie and Andrew Jackson\u2019s triumph at New Orleans boosted American nationalism. The Treaty of Ghent restored all borders to their pre-war positions, but the war forged a stronger national identity.",british:"The British Empire successfully defended Canada throughout the war, which was their primary objective. They burned Washington D.C. in August 1814 but failed to take Baltimore when Fort McHenry withstood bombardment \u2014 inspiring \u2018The Star-Spangled Banner.\u2019 British forces were stretched thin fighting Napoleon in Europe simultaneously. The Treaty of Ghent was essentially a return to status quo ante bellum \u2014 no territory changed hands.",native:"The War of 1812 was catastrophic for Native peoples. Tecumseh\u2019s confederacy, the most powerful pan-Indian alliance in North American history, collapsed when he was killed at the Battle of the Thames in October 1813. Without British support after the treaty, Native nations lost all leverage. The Creek War ended with the Treaty of Fort Jackson, stripping 23 million acres from the Creek Nation. The war accelerated westward expansion and Native displacement."},ua={detroit:"Detroit was surrendered by General Hull to British and Native forces in August 1812 without a fight \u2014 one of America\u2019s most humiliating defeats. It was recaptured by General Harrison after the Battle of the Thames in October 1813.",washington_dc:"British forces burned Washington D.C. in August 1814, including the White House and Capitol building. It was the only time a foreign power has captured and burned the American capital.",baltimore:"The British bombardment of Fort McHenry in September 1814 failed to capture Baltimore. Francis Scott Key, watching from a British ship, wrote \u2018The Star-Spangled Banner\u2019 during the 25-hour bombardment.",new_orleans:"Andrew Jackson\u2019s decisive victory at New Orleans in January 1815 was actually fought after the Treaty of Ghent was signed, but before news reached the city. It made Jackson a national hero.",lake_erie:"Oliver Hazard Perry\u2019s victory at the Battle of Lake Erie in September 1813 gave the U.S. control of the lake and forced the British to retreat from Detroit. His message: \u2018We have met the enemy and they are ours.\u2019",montreal:"American forces attempted to capture Montreal three times during the war and failed each time. The city was the key to British Canada, and its defense was crucial to the British war effort.",upper_canada:"Upper Canada (modern Ontario) saw some of the war\u2019s fiercest fighting. The battles of Queenston Heights, Lundy\u2019s Lane, and the burning of York (Toronto) made this the war\u2019s most contested theater.",niagara:"The Niagara frontier was the site of brutal back-and-forth fighting. The Battle of Lundy\u2019s Lane in July 1814 was one of the bloodiest battles ever fought on Canadian soil.",creek_nation:"The Creek War (1813\u20141814) saw Andrew Jackson\u2019s forces defeat the Red Stick Creek at the Battle of Horseshoe Bend. The Treaty of Fort Jackson stripped the Creek Nation of 23 million acres.",indiana_territory:"Indiana Territory was the heart of Tecumseh\u2019s confederacy. The Battle of Tippecanoe in 1811 weakened the confederacy before the war, and Tecumseh\u2019s death at the Thames in 1813 ended it.",halifax:"Halifax served as the primary British naval base in North America. It was never seriously threatened and served as the staging point for the British blockade of the American coast.",fort_dearborn:"Fort Dearborn (modern Chicago) was evacuated and its garrison massacred by Potawatomi warriors allied with the British in August 1812, one of the war\u2019s early Native victories."},pa={us:"United States",british:"British Empire",native:"Native Confederacy"},ma={us:"The real American military was plagued by poor leadership and militia reluctance in the early war, improving significantly by 1814.",british:"British regulars were among the world\u2019s finest soldiers, but they were stretched thin across a global war against Napoleon.",native:"Native warriors excelled in guerrilla warfare and frontier combat, but were ultimately overwhelmed by numbers and the loss of key leaders."},fa={us:"The War of 1812 taught the young republic that military preparedness matters \u2014 the regular army that emerged was far more professional than the militia-dependent force that started the war. It also sparked the \u2018Era of Good Feelings\u2019 and a surge of American nationalism that shaped the nation\u2019s identity.",british:"For Britain, the War of 1812 was always a sideshow to the Napoleonic Wars. The lesson was that defending Canada required both military strength and Native alliances \u2014 alliances that were abandoned at the Treaty of Ghent, with devastating consequences for Indigenous peoples.",native:"The War of 1812 was the last realistic chance for Native peoples to resist American westward expansion through military alliance. Tecumseh\u2019s vision of a pan-Indian confederacy was the most ambitious attempt at unity, and its failure after his death opened the floodgates to removal policies that would culminate in the Trail of Tears."},ga={us:[{territory:"montreal",owns:!0,text:"You succeeded in capturing Montreal \u2014 something American forces attempted three times but never achieved historically."},{territory:"washington_dc",owns:!1,text:"Like the real war, your capital fell to enemy forces."},{territory:"washington_dc",owns:!0,text:"You managed to hold Washington D.C. \u2014 unlike the real war, where the British burned it in 1814."},{territory:"detroit",owns:!1,text:"You lost Detroit, echoing General Hull\u2019s humiliating surrender of the city in August 1812."},{territory:"detroit",owns:!0,text:"You held Detroit throughout \u2014 unlike history, where it was surrendered without a fight and had to be recaptured."},{territory:"upper_canada",owns:!0,text:"You conquered Upper Canada, achieving what the real American military never could despite multiple invasions."},{territory:"new_orleans",owns:!0,text:"Like Andrew Jackson\u2019s forces in reality, you held New Orleans against enemy attack."},{territory:"new_orleans",owns:!1,text:"You lost New Orleans \u2014 unlike history, where Jackson\u2019s decisive victory made it America\u2019s greatest triumph of the war."},{territory:"lake_erie",owns:!0,text:"You secured Lake Erie, mirroring Oliver Hazard Perry\u2019s famous naval victory in September 1813."},{territory:"niagara",owns:!0,text:"You captured the Niagara frontier \u2014 historically one of the bloodiest and most contested regions of the war."}],british:[{territory:"washington_dc",owns:!0,text:"You captured Washington D.C., just as British forces did in August 1814 when they burned the White House and Capitol."},{territory:"baltimore",owns:!0,text:"Unlike history, where Fort McHenry\u2019s defense inspired \u2018The Star-Spangled Banner,\u2019 you managed to take Baltimore."},{territory:"baltimore",owns:!1,text:"Like the real war, Baltimore\u2019s defenses held firm against your forces."},{territory:"new_orleans",owns:!0,text:"Unlike history, where Jackson\u2019s forces crushed the British at New Orleans, you managed to take the city."},{territory:"montreal",owns:!0,text:"You held Montreal, just as the British did historically \u2014 repelling every American attempt to capture it."},{territory:"montreal",owns:!1,text:"You lost Montreal \u2014 something the real British forces never allowed, successfully defending it against three American invasions."},{territory:"detroit",owns:!0,text:"You captured Detroit, mirroring the real war\u2019s early British triumph when General Hull surrendered the city without a fight."},{territory:"upper_canada",owns:!0,text:"You defended Upper Canada successfully, just as British and Canadian forces did throughout the real war."},{territory:"upper_canada",owns:!1,text:"You lost Upper Canada \u2014 a devastating departure from history, where its defense was Britain\u2019s primary war objective."},{territory:"lake_erie",owns:!0,text:"You held Lake Erie \u2014 unlike history, where Perry\u2019s victory gave the Americans control of the lake."}],native:[{territory:"detroit",owns:!0,text:"You captured Detroit, echoing the real war\u2019s early alliance victory when Tecumseh and British forces took the city."},{territory:"indiana_territory",owns:!0,text:"You held Indiana Territory \u2014 the heart of Tecumseh\u2019s confederacy \u2014 which was lost historically after his death."},{territory:"indiana_territory",owns:!1,text:"You lost Indiana Territory, the heartland of Tecumseh\u2019s confederacy, mirroring the historical collapse after his death at the Thames."},{territory:"creek_nation",owns:!0,text:"You defended the Creek Nation \u2014 unlike history, where the Treaty of Fort Jackson stripped 23 million acres from the Creek people."},{territory:"creek_nation",owns:!1,text:"Like history, the Creek Nation fell \u2014 echoing the devastating Treaty of Fort Jackson that followed the Battle of Horseshoe Bend."},{territory:"fort_dearborn",owns:!0,text:"You took Fort Dearborn, mirroring the real Potawatomi victory there in August 1812."},{territory:"ohio_valley",owns:!0,text:"You seized the Ohio Valley \u2014 a region Tecumseh\u2019s confederacy fought to reclaim from American settlers."},{territory:"upper_canada",owns:!0,text:"You conquered Upper Canada \u2014 a remarkable achievement beyond anything Native forces accomplished independently in the real war."},{territory:"washington_dc",owns:!0,text:"You captured the American capital \u2014 something no Native force achieved historically, though the British did burn it in 1814."},{territory:"new_orleans",owns:!0,text:"You took New Orleans, gaining control of the Mississippi \u2014 a strategic objective that would have transformed the war\u2019s outcome for Native peoples."}]},ya={us:[{title:"The Era of Good Feelings (1815\u20131825)",content:"The war's end brought a surge of national pride and political unity. The Federalist Party collapsed after opposing the war, leaving the Democratic-Republicans as the sole major party. President James Monroe presided over a period of relative political harmony, declining sectionalism, and territorial expansion. Americans invested in infrastructure \u2014 canals, roads, and early railroads \u2014 that knit the growing nation together."},{title:"The Monroe Doctrine (1823)",content:"Emboldened by surviving the war with Britain, the U.S. declared that the Western Hemisphere was closed to further European colonization. The Monroe Doctrine became a cornerstone of American foreign policy for two centuries. Though the young nation lacked the military power to enforce it, Britain's Royal Navy \u2014 now at peace with America \u2014 effectively backed the policy to protect its own trade interests."},{title:"Manifest Destiny & Westward Expansion",content:'The war removed the last major obstacle to westward expansion: British-backed Native resistance. American settlers flooded into the Old Northwest, the Deep South, and eventually Texas and Oregon. The phrase "Manifest Destiny" captured the belief that American expansion across the continent was both justified and inevitable \u2014 a belief that the War of 1812 helped make possible.'},{title:"The Road to Indian Removal (1830)",content:"Andrew Jackson \u2014 the war's greatest hero \u2014 became president in 1828 and signed the Indian Removal Act in 1830. The policy of forced relocation that followed, including the Trail of Tears, was a direct consequence of the collapse of Native military power during the War of 1812. Without British allies, Eastern tribes had no leverage to resist removal."}],british:[{title:"Britain Turns to Empire",content:"With Napoleon defeated and the American war settled, Britain entered its imperial century. The Royal Navy ruled the seas unchallenged, and the British Empire expanded across Africa, Asia, and the Pacific. The War of 1812 taught Britain that North America was a costly distraction \u2014 better to trade with the Americans than fight them."},{title:"Rush-Bagot Agreement (1817)",content:"Just two years after the war, Britain and the U.S. agreed to demilitarize the Great Lakes \u2014 one of the first disarmament treaties in modern history. The Rush-Bagot Agreement began the transformation of the U.S.-Canadian border into the longest undefended border in the world, a remarkable outcome for two nations that had just fought a bitter war."},{title:"Canadian National Identity",content:"The successful defense of Canada became a founding myth for English-speaking Canadians. Heroes like Isaac Brock, Laura Secord, and the Canadian militia became symbols of a distinct Canadian identity \u2014 not British, not American, but uniquely Canadian. The war helped plant the seeds that would eventually lead to Canadian Confederation in 1867."},{title:"Abandoning Native Allies",content:"Britain's abandonment of its Native allies at the Treaty of Ghent remains one of the war's most consequential outcomes. Despite fighting and dying alongside the British, Native nations were left without protection against American expansion. Britain's broken promises contributed to the destruction of Native sovereignty east of the Mississippi within a generation."}],native:[{title:"The Collapse of Resistance",content:"Tecumseh's death at the Battle of the Thames in 1813 ended the most ambitious pan-Native alliance in North American history. Without his leadership and without British support, the confederacy fractured. Individual nations were forced to negotiate separately with the U.S. government, which used divide-and-conquer tactics to extract land cessions."},{title:"The Indian Removal Act (1830)",content:'Fifteen years after the war, President Andrew Jackson signed the Indian Removal Act, authorizing the forced relocation of all Eastern tribes to "Indian Territory" west of the Mississippi. The Choctaw, Creek, Chickasaw, Cherokee, and Seminole \u2014 the "Five Civilized Tribes" \u2014 were forcibly marched westward. The Cherokee removal in 1838, known as the Trail of Tears, killed an estimated 4,000 people.'},{title:"The Trail of Tears (1831\u20131850)",content:"The Trail of Tears was not a single event but a series of forced relocations spanning two decades. Families were rounded up at gunpoint, forced to march hundreds of miles through harsh conditions, and settled on unfamiliar land. Disease, starvation, and exposure killed thousands. The removals were a direct consequence of the power vacuum created by the War of 1812."},{title:"Legacy of Broken Promises",content:"The War of 1812 established a pattern that would define U.S.-Native relations for the next century: promises made in treaties were broken whenever they became inconvenient. Article IX of the Treaty of Ghent promised to restore Native lands \u2014 the U.S. never complied. This pattern of broken treaties continued through the reservation era and beyond, its roots traceable to the diplomatic betrayals of 1814."}]};const wa={us:"United States",british:"British/Canada",native:"Native Coalition"},va={us:{high:"A triumph for the young republic! Like Jackson at New Orleans, your leadership proved that American democracy could stand against the world's greatest empire.",mid:"A hard-fought campaign worthy of the Era of Good Feelings. The nation endures \u2014 battered but unified.",low:"The war ends in bitter disappointment. Like Hull's surrender at Detroit, the republic's promise remains unfulfilled."},british:{high:"Britannia rules! You have defended Canada and projected power across North America, just as Wellington conquered on the continent.",mid:"The Empire holds. Canada is secure and the American threat contained \u2014 a respectable outcome worthy of the Crown.",low:"A sobering campaign. Like Prevost's retreat from Plattsburgh, the Empire's grip on North America weakens."},native:{high:"Tecumseh's dream lives! Against impossible odds, you have forged a confederacy that rewrites the tragic history of Native displacement.",mid:"The confederacy endures. Though the future remains uncertain, your people have fought with honor and skill.",low:"History repeats its cruelest chapter. Without allies and outnumbered, the confederacy fractures \u2014 but the courage of your warriors will be remembered."}};function ba(e,t){const n=va[e]||va.us;return t>=80?n.high:t>=40?n.mid:n.low}function xa(t){let{playerFaction:n,territoryOwners:r,battleStats:a,round:i,gameOverReason:o}=t;const[s,l]=(0,e.useState)(!0),d=function(e,t,n,r,a){const i=pa[e]||e,o=ha[e]||"";let s;if("domination"===a)s="Your ".concat(i," achieved total domination of the theater \u2014 something no faction came close to in the real war. ").concat(o);else if("elimination"===a){const t="native"===e?"a fate that tragically mirrors what happened to Native peoples, whose military power was effectively destroyed":"a fate that didn't historically happen to this faction";s="Your ".concat(i," was completely eliminated \u2014 ").concat(t,". ").concat(o)}else s="The war ended with the Treaty of Ghent, just as it did historically. ".concat(o);const l=ga[e]||[],c=[];for(const g of l){if(c.length>=3)break;t[g.territory]===e===g.owns&&c.push(g.text)}let d;d=c.length>0?c.join(" "):"The territorial outcome of your game diverged significantly from the historical war. ".concat(ua[Object.keys(ua)[0]]);const h=(null===n||void 0===n?void 0:n.fought)||0,u=(null===n||void 0===n?void 0:n.won)||0,p=h>0?u/h:0,m=Math.round(100*p);let f;return f=0===h?"Your forces avoided direct combat entirely across ".concat(r," rounds \u2014 an unusual but historically defensible strategy."):p>.7?"Your aggressive strategy paid off with a ".concat(m,"% victory rate across ").concat(h," battles."):p<.4?"Your forces struggled in combat, winning only ".concat(m,"% of ").concat(h," battles."):"Your balanced approach yielded a ".concat(m,"% victory rate across ").concat(h," engagements."),[s,d,"".concat(f," ").concat(ma[e]||""),fa[e]||""]}(n,r,a,i,o);return(0,c.jsxs)("div",{className:"border border-war-copper/20 rounded-lg overflow-hidden",children:[(0,c.jsxs)("button",{onClick:()=>l(!s),className:"w-full px-5 py-3 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-colors",style:{background:"linear-gradient(135deg, rgba(184,115,51,0.1) 0%, rgba(20,30,48,0.5) 100%)"},children:[(0,c.jsx)("div",{className:"flex items-center gap-2",children:(0,c.jsx)("span",{className:"text-war-copper text-xs tracking-[0.15em] uppercase font-body font-bold",children:"Historian's Analysis"})}),(0,c.jsx)("span",{className:"text-parchment-dark/40 text-sm",children:s?"\u25b2":"\u25bc"})]}),s&&(0,c.jsx)("div",{className:"px-5 py-4 space-y-3 bg-black/10",children:d.map((e,t)=>(0,c.jsx)("p",{className:"text-parchment/70 text-sm font-body leading-relaxed",children:e},t))})]})}function ka(t){let{playerFaction:n}=t;const[r,a]=(0,e.useState)(!1),i=function(e){return ya[e]||ya.us}(n);return(0,c.jsxs)("div",{className:"border border-war-copper/20 rounded-lg overflow-hidden",children:[(0,c.jsxs)("button",{onClick:()=>a(!r),className:"w-full px-5 py-3 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-colors",style:{background:"linear-gradient(135deg, rgba(184,115,51,0.1) 0%, rgba(20,30,48,0.5) 100%)"},children:[(0,c.jsx)("div",{className:"flex items-center gap-2",children:(0,c.jsx)("span",{className:"text-war-copper text-xs tracking-[0.15em] uppercase font-body font-bold",children:"What Came Next"})}),(0,c.jsx)("span",{className:"text-parchment-dark/40 text-sm",children:r?"\u25b2":"\u25bc"})]}),r&&(0,c.jsxs)("div",{className:"px-5 py-4 space-y-4 bg-black/10",children:[(0,c.jsx)("p",{className:"text-parchment/50 text-xs font-body italic",children:"The war ended, but its consequences shaped decades of American history..."}),i.map((e,t)=>(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"text-war-gold/80 font-display text-sm mb-1 tracking-wide",children:e.title}),(0,c.jsx)("p",{className:"text-parchment/70 text-sm font-body leading-relaxed",children:e.content})]},t))]})]})}function _a(t){let{playerName:n,classPeriod:r,playerFaction:a,finalScore:i,scores:o,nationalismMeter:s,objectiveBonus:l,factionMultiplier:d,nativeResistance:h,navalDominance:u,playerObjectives:p,journalEntries:m,knowledgeCheckResults:f,battleStats:g,playerTerritoryCount:y,round:w,gameOverReason:v,gameOverWinner:b,territoryOwners:x,difficulty:k,sessionId:_,classId:T,onPlayAgain:S}=t;const[N,C]=(0,e.useState)(!1),A=["Spring","Summer","Autumn","Winter"],j=e=>"".concat(A[(e-1)%4]," ").concat(1812+Math.floor((e-1)/4)),E="domination"===v?b===a?"Total Victory!":"Defeated":"elimination"===v?"Defeated":"The War Is Over",B="domination"===v?"Complete domination achieved \u2014 ".concat(j(w)):"elimination"===v?"".concat(wa[a]," eliminated \u2014 ").concat(j(w)):"Treaty of Ghent \u2014 December 24, 1814",P=f.total,I=f.correct,O=P>0?Math.round(I/P*100):0;return(0,c.jsxs)("div",{className:"fixed inset-0 p-2 md:p-4 overflow-y-auto",style:{zIndex:1e3,background:"radial-gradient(ellipse at center, rgba(20,30,48,0.95) 0%, rgba(10,10,8,0.98) 100%)"},role:"presentation",children:[(0,c.jsxs)("div",{className:"bg-war-navy border border-war-gold/30 rounded-lg max-w-2xl w-full my-4 md:my-8 mx-auto shadow-modal animate-fadein",role:"dialog","aria-modal":"true","aria-label":"Game report",children:[(0,c.jsxs)("div",{className:"px-8 py-6 border-b border-war-gold/20 text-center",style:{background:"linear-gradient(135deg, rgba(139,26,26,0.25) 0%, rgba(20,30,48,0.95) 50%, rgba(139,26,26,0.15) 100%)"},children:[(0,c.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"}),(0,c.jsx)("p",{className:"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold",children:"After-Action Report"}),(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"})]}),(0,c.jsx)("h2",{className:"text-2xl md:text-3xl font-display text-parchment tracking-wide",children:E}),(0,c.jsx)("p",{className:"text-parchment-dark/50 text-sm font-body mt-1",children:B})]}),(0,c.jsxs)("div",{className:"px-4 md:px-8 py-4 md:py-6 space-y-5 md:space-y-6",children:[(0,c.jsxs)("div",{className:"flex flex-wrap justify-between gap-1 text-sm text-parchment/80 font-body",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-parchment-dark/50",children:"Commander:"})," ",n]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-parchment-dark/50",children:"Period:"})," ",r]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-parchment-dark/50",children:"Faction:"})," ",wa[a]]})]}),(0,c.jsxs)("div",{className:"bg-black/20 rounded-lg p-5 text-center border border-war-gold/10",children:[(0,c.jsx)("p",{className:"text-parchment-dark/50 text-xs uppercase tracking-wider mb-1 font-body font-bold",children:"Final Score"}),(0,c.jsx)("p",{className:"text-war-gold text-5xl font-bold font-display",children:i}),(0,c.jsxs)("div",{className:"flex justify-center gap-6 mt-3 text-sm text-parchment-dark/50 font-body",children:[(0,c.jsxs)("span",{children:["Territory: ",o[a]||0]}),"us"===a&&(0,c.jsxs)("span",{children:["Nationalism: x",(1+s/100).toFixed(2)]}),(0,c.jsxs)("span",{children:["Objectives: +",l]})]}),(0,c.jsx)("p",{className:"text-parchment/70 text-base mt-3 font-body italic leading-relaxed border-t border-parchment-dark/10 pt-3",children:ba(a,i)})]}),(0,c.jsx)(xa,{playerFaction:a,territoryOwners:x,battleStats:g,round:w,gameOverReason:v}),(0,c.jsx)(ka,{playerFaction:a}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-war-gold/80 font-display text-base mb-3 tracking-wide",children:"Objectives"}),(0,c.jsx)("div",{className:"grid grid-cols-1 gap-2",children:p.map(e=>(0,c.jsxs)("div",{className:"px-4 py-2.5 rounded ".concat(e.completed?"bg-green-900/15 border border-green-500/20":"bg-black/15 border border-parchment-dark/8"),children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("span",{className:"text-sm",children:e.completed?"\u2705":"\u274c"}),(0,c.jsx)("span",{className:"text-sm font-body ".concat(e.completed?"text-green-300/90":"text-parchment-dark/60"),children:e.title})]}),(0,c.jsxs)("span",{className:"text-sm font-bold font-display ".concat(e.completed?"text-war-gold":"text-parchment-dark/40"),children:[e.completed?"+".concat(e.points):"0"," pts"]})]}),e.historicalContext&&(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs mt-1 pl-7 italic font-body",children:e.historicalContext})]},e.id))})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-war-gold/80 font-display text-base mb-3 tracking-wide",children:"Battle Statistics"}),(0,c.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-center",children:[(0,c.jsxs)("div",{className:"bg-black/20 rounded-lg p-3 border border-parchment-dark/8",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-parchment font-display",children:g.fought}),(0,c.jsx)("p",{className:"text-xs text-parchment-dark/50 font-body",children:"Battles Fought"})]}),(0,c.jsxs)("div",{className:"bg-black/20 rounded-lg p-3 border border-green-500/15",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-green-400 font-display",children:g.won}),(0,c.jsx)("p",{className:"text-xs text-parchment-dark/50 font-body",children:"Victories"})]}),(0,c.jsxs)("div",{className:"bg-black/20 rounded-lg p-3 border border-red-500/15",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-red-400 font-display",children:g.lost}),(0,c.jsx)("p",{className:"text-xs text-parchment-dark/50 font-body",children:"Defeats"})]})]})]}),P>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-war-gold/80 font-display text-base mb-3 tracking-wide",children:"Knowledge Checks"}),(0,c.jsxs)("div",{className:"bg-black/20 rounded-lg p-4 border border-parchment-dark/8",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-2 font-body",children:[(0,c.jsxs)("span",{className:"text-parchment/80 text-sm",children:[I," of ",P," correct (",O,"%)"]}),(0,c.jsx)("span",{className:"text-war-gold font-bold text-sm",children:O>=80?"Excellent!":O>=60?"Good work":"Keep studying"})]}),(0,c.jsx)("div",{className:"w-full bg-war-ink rounded-full h-2.5 border border-parchment-dark/10 overflow-hidden",children:(0,c.jsx)("div",{className:"h-full rounded-full transition-all duration-500",style:{width:"".concat(O,"%"),background:O>=80?"linear-gradient(to right, #166534, #22c55e)":O>=60?"linear-gradient(to right, #854d0e, #c9a227)":"linear-gradient(to right, #7f1d1d, #ef4444)"}})})]})]}),m.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-war-gold/80 font-display text-base mb-3 tracking-wide",children:"War Timeline"}),(0,c.jsx)("div",{className:"max-h-48 overflow-y-auto space-y-2 pr-1",children:m.map((e,t)=>(0,c.jsxs)("div",{className:"border-l-2 border-war-copper/20 pl-3",children:[(0,c.jsx)("p",{className:"text-war-gold/70 text-xs font-bold font-body",children:e.season}),e.items.map((e,t)=>(0,c.jsx)("p",{className:"text-parchment-dark/60 text-sm font-body",children:e},t))]},t))})]}),(0,c.jsx)(na,{playerName:n,classPeriod:r,playerFaction:a,finalScore:i,scores:o,objectiveBonus:l,factionMultiplier:d||1,nationalismMeter:s,nativeResistance:h,navalDominance:u,knowledgeCheckResults:f,battleStats:g,playerTerritoryCount:y,roundsPlayed:w,gameOverReason:v,difficulty:k,sessionId:_,classId:T})]}),(0,c.jsxs)("div",{className:"px-4 md:px-8 pb-4 md:pb-6 flex gap-3",children:[(0,c.jsx)("button",{onClick:()=>C(!0),className:"flex-1 py-3.5 font-display text-sm rounded border border-parchment-dark/20 text-parchment/70 hover:border-war-gold/40 hover:text-parchment transition-colors cursor-pointer tracking-wide",children:"Leaderboard"}),(0,c.jsx)("button",{onClick:S,className:"flex-1 py-3.5 bg-war-gold text-war-ink font-display text-sm rounded hover:bg-war-brass transition-colors cursor-pointer font-bold tracking-wide shadow-copper",children:"Play Again"})]})]}),N&&(0,c.jsx)(da,{onClose:()=>C(!1),currentClassPeriod:r})]})}function Ta(t){let{history:n}=t;const[r,a]=(0,e.useState)(null);return n&&0!==n.length?(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8",children:[(0,c.jsxs)("h3",{className:"text-war-gold/90 font-display text-base tracking-wide border-b border-war-gold/15 pb-2 mb-3",children:["Quiz Review (",n.filter(e=>e.wasCorrect).length,"/",n.length," correct)"]}),(0,c.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto pr-1",children:n.map((e,t)=>{const n=r===t;return(0,c.jsx)("div",{className:"p-2 rounded cursor-pointer transition-colors ".concat(e.wasCorrect?"bg-green-900/15":"bg-red-900/10"," hover:bg-black/15"),onClick:()=>a(n?null:t),children:(0,c.jsxs)("div",{className:"flex items-start gap-2",children:[(0,c.jsx)("span",{className:"text-sm mt-0.5 flex-shrink-0",children:e.wasCorrect?"\u2705":"\u274c"}),(0,c.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,c.jsxs)("p",{className:"text-parchment/80 text-sm font-bold leading-snug font-body",children:[e.question,(0,c.jsxs)("span",{className:"text-parchment-dark/40 font-normal ml-1",children:["(Rd ",e.round,")"]})]}),n&&(0,c.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,c.jsxs)("p",{className:"text-green-400/80 text-sm font-body",children:["Correct: ",(0,c.jsxs)("span",{className:"font-bold",children:[String.fromCharCode(65+e.correctIndex),"."]})," ",e.choices[e.correctIndex]]}),!e.wasCorrect&&(0,c.jsxs)("p",{className:"text-red-400/80 text-sm font-body",children:["Your answer: ",(0,c.jsxs)("span",{className:"font-bold",children:[String.fromCharCode(65+e.selectedIndex),"."]})," ",e.choices[e.selectedIndex]]}),e.explanation&&(0,c.jsx)("div",{className:"mt-1.5 bg-black/20 rounded px-3 py-2 border-l-2 border-war-gold/20",children:(0,c.jsx)("p",{className:"text-parchment-dark/60 text-sm leading-relaxed font-body",children:e.explanation})})]})]})]})},t)})})]}):null}function Sa(t){let{stepData:n,currentStep:r,totalSteps:a,onNext:i,onPrev:o,onSkip:s,gameMode:l}=t;const[d,h]=(0,e.useState)(null),u="explorer"===l;if((0,e.useEffect)(()=>{if(null===n||void 0===n||!n.target)return void h(null);const e=setTimeout(()=>{const e=document.querySelector(n.target);if(e){const t=e.getBoundingClientRect();if(t.right<0||t.left>window.innerWidth||t.bottom<0||t.top>window.innerHeight)return void h(null);h({top:t.top-8,left:t.left-8,width:t.width+16,height:t.height+16})}else h(null)},100);return()=>clearTimeout(e)},[n]),!n)return null;const p=function(e){if(!e)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const t=16;let n=e.top+e.height+t,r=e.left+e.width/2-180;return n+220>window.innerHeight-t&&(n=e.top-220-t),n<t&&(n=t),r<t&&(r=t),r+360>window.innerWidth-t&&(r=window.innerWidth-360-t),{top:n,left:r}}(d),m=u&&n.simpleDescription?n.simpleDescription:n.description;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"tutorial-backdrop",onClick:e=>e.stopPropagation()}),d&&(0,c.jsx)("div",{className:"tutorial-spotlight",style:{top:d.top,left:d.left,width:d.width,height:d.height}}),(0,c.jsxs)("div",{className:"tutorial-tooltip",style:p,children:[(0,c.jsx)("h3",{children:n.title}),(0,c.jsx)("p",{style:u?{fontSize:"1rem",lineHeight:"1.75"}:void 0,children:m}),(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,c.jsxs)("span",{className:"text-parchment-dark/50 text-xs font-body",children:["Step ",r+1," of ",a]}),(0,c.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[r>0&&(0,c.jsx)("button",{onClick:o,className:"px-3 py-1.5 text-xs border border-parchment-dark/20 text-parchment-dark/60 rounded hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer font-body",children:"Back"}),(0,c.jsx)("button",{onClick:i,className:"px-4 py-1.5 text-xs bg-war-gold text-war-ink rounded font-bold hover:bg-war-brass transition-colors cursor-pointer font-display tracking-wide",children:r===a-1?"Finish":"Next"})]})]}),(0,c.jsx)("button",{onClick:s,className:"mt-3 text-parchment-dark/40 text-xs cursor-pointer hover:text-parchment-dark/60 transition-colors font-body underline",style:{background:"none",border:"none",padding:0},children:"Skip Tutorial"})]})]})}function Na(t){let{aiActions:n,onClose:r,onHighlightTerritory:a}=t;const[i,o]=(0,e.useState)(0),[s,l]=(0,e.useState)(!1),d=n.length,h=n[i];(0,e.useEffect)(()=>{if(!s||i>=d-1)return;const e=setTimeout(()=>{o(e=>e+1)},1500);return()=>clearTimeout(e)},[s,i,d]),(0,e.useEffect)(()=>{if(!h)return;const e=[];return h.from&&e.push(h.from),h.to&&e.push(h.to),h.territory&&e.push(h.territory),a(e),()=>a([])},[h,a]);if(0===d)return null;const u=(i+1)/d*100;return(0,c.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 animate-fadein",style:{zIndex:50},children:[(0,c.jsx)("div",{className:"h-1 bg-war-ink/80",children:(0,c.jsx)("div",{className:"h-full transition-all duration-300",style:{width:"".concat(u,"%"),background:"linear-gradient(to right, #854d0e, #c9a227)"}})}),(0,c.jsxs)("div",{className:"bg-war-navy/95 backdrop-blur border-t border-war-gold/20 px-4 py-3",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500/80 flex-shrink-0"}),(0,c.jsx)("span",{className:"text-red-400/80 text-sm tracking-[0.15em] uppercase font-body font-bold hidden sm:inline",children:"Intel"}),(0,c.jsxs)("span",{className:"text-parchment-dark/50 text-sm font-body",children:[i+1,"/",d]})]}),(0,c.jsx)("div",{className:"w-px h-6 bg-parchment-dark/15 flex-shrink-0"}),(0,c.jsxs)("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[(0,c.jsx)("span",{className:"text-sm flex-shrink-0",children:(e=>{if(!e)return"\u2022";switch(e.type){case"reinforce":return"\u2694";case"attack":return"captured"===e.result||"won"===e.result?"\ud83c\udff4":"\ud83d\udee1\ufe0f";case"maneuver":return"\u2192";default:return"\u2022"}})(h)}),(0,c.jsx)("p",{className:"text-sm font-body truncate ".concat((e=>{if(!e)return"text-parchment/80";if("attack"===e.type){return"captured"===e.result||"won"===e.result?"text-red-400":"text-green-400"}return"reinforce"===e.type?"text-red-300/80":"text-parchment/80"})(h)),children:(e=>{if(!e)return"";switch(e.type){case"reinforce":return"Reinforced ".concat(e.territory," (+").concat(e.troops,")");case"attack":{const t="captured"===e.result||"won"===e.result?"Captured!":"Repelled",n=e.casualties?" (lost ".concat(e.casualties.attacker||0,", killed ").concat(e.casualties.defender||0,")"):"";return"".concat(e.from," \u2192 ").concat(e.to,": ").concat(t).concat(n)}case"maneuver":return"".concat(e.from," \u2192 ").concat(e.to,": moved ").concat(e.troops);default:return e.message||"Unknown action"}})(h)})]}),(0,c.jsx)("div",{className:"w-px h-6 bg-parchment-dark/15 flex-shrink-0"}),(0,c.jsxs)("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[(0,c.jsx)("button",{onClick:()=>{i>0&&o(e=>e-1)},disabled:0===i,className:"w-8 h-8 flex items-center justify-center rounded text-sm transition-colors ".concat(0===i?"text-parchment-dark/20 cursor-not-allowed":"text-parchment/60 hover:text-parchment hover:bg-white/5 cursor-pointer"),"aria-label":"Previous action",children:"\u25c0"}),(0,c.jsx)("button",{onClick:()=>l(!s),className:"w-8 h-8 flex items-center justify-center rounded text-sm transition-colors cursor-pointer ".concat(s?"text-war-gold bg-war-gold/15 border border-war-gold/30":"text-parchment/60 hover:text-war-gold hover:bg-war-gold/10"),"aria-label":s?"Pause auto-play":"Auto-play",title:s?"Pause":"Auto",children:s?"\u23f8":"\u25b6"}),(0,c.jsx)("button",{onClick:()=>{i<d-1&&o(e=>e+1)},disabled:i>=d-1,className:"w-8 h-8 flex items-center justify-center rounded text-sm transition-colors ".concat(i>=d-1?"text-parchment-dark/20 cursor-not-allowed":"text-parchment/60 hover:text-parchment hover:bg-white/5 cursor-pointer"),"aria-label":"Next action",children:"\u25b6"}),(0,c.jsx)("div",{className:"w-px h-6 bg-parchment-dark/15 mx-0.5"}),(0,c.jsx)("button",{onClick:r,className:"px-3 py-1.5 font-display text-sm rounded tracking-wide transition-colors cursor-pointer ".concat(i>=d-1?"bg-war-gold text-war-ink hover:bg-war-brass font-bold shadow-copper":"text-parchment-dark/50 hover:text-parchment border border-parchment-dark/20 hover:border-parchment-dark/40"),children:i>=d-1?"Done":"Skip"})]})]}),(0,c.jsx)("div",{className:"mt-1.5 flex items-center gap-3",children:(0,c.jsxs)("p",{className:"text-sm text-parchment-dark/30 font-body",children:[n.filter(e=>"attack"===e.type).length," attacks, ",n.filter(e=>"reinforce"===e.type).length," reinforcements",n.filter(e=>"maneuver"===e.type).length>0&&(0,c.jsxs)(c.Fragment,{children:[", ",n.filter(e=>"maneuver"===e.type).length," maneuvers"]})]})})]})]})}function Ca(t){let{currentScore:n,playerFaction:r,nationalismMeter:a,nativeResistance:i,navalDominance:o,objectiveBonus:s,round:l}=t,d=1;"us"===r?d=1+a/100:"native"===r?d=1+Math.min(i,6)/6*.5:"british"===r&&(d=1+Math.min(o,4)/4*.3);const h=n||0,u=Math.round(h*d)+s,p=(0,e.useRef)(0),m=(0,e.useRef)(l),f=l>m.current?u-p.current:0,g=0!==f&&l>1;(0,e.useEffect)(()=>{l>m.current&&(p.current=u,m.current=l)},[l,u]);const y=Math.min(u/50*100,100),w=u>=40,v=u>=25;return(0,c.jsx)("div",{className:"victory-progress-container",style:{position:"relative",zIndex:1e3},children:(0,c.jsxs)("div",{className:"bg-war-navy/80 border rounded-lg px-3 py-2.5 shadow-card ".concat(w?"border-green-500/30":"border-war-gold/15"),children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,c.jsx)("h3",{className:"text-war-gold/80 font-display text-base tracking-wide",children:"Victory"}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[g&&(0,c.jsxs)("span",{className:"text-sm font-bold font-body ".concat(f>0?"text-green-400":"text-red-400"),children:[f>0?"+":"",f]}),(0,c.jsx)("span",{className:"text-xl font-bold font-display ".concat(w?"text-green-400":v?"text-war-gold":"text-parchment/80"),children:u}),(0,c.jsxs)("span",{className:"text-parchment-dark/40 text-sm font-body",children:["/ ",50]})]})]}),(0,c.jsx)("div",{className:"w-full bg-war-ink rounded-full h-4 border border-parchment-dark/10 overflow-hidden mb-1.5",children:(0,c.jsx)("div",{className:"h-full transition-all duration-700 ease-out relative rounded-full",style:{width:"".concat(y,"%"),background:w?"linear-gradient(to right, #166534, #22c55e)":v?"linear-gradient(to right, #854d0e, #c9a227)":"linear-gradient(to right, #44403c, #a8a29e)"},children:(0,c.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/15 to-transparent animate-shimmer"})})}),(0,c.jsx)("p",{className:"text-center text-sm font-body ".concat(w?"text-green-400/80 font-bold":v?"text-war-gold/60":"text-parchment-dark/40 italic"),children:w?"Near victory!":v?"Keep fighting!":"".concat(50-u," pts remaining")}),(d>1||s>0)&&(0,c.jsx)("div",{className:"mt-2 pt-2 border-t border-parchment-dark/10",children:(0,c.jsxs)("div",{className:"text-sm text-parchment-dark/40 space-y-0.5 font-body",children:[(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{children:"Base"}),(0,c.jsx)("span",{children:h})]}),d>1&&(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{children:"Multiplier"}),(0,c.jsxs)("span",{children:["x",d.toFixed(2)]})]}),s>0&&(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{children:"Objectives"}),(0,c.jsxs)("span",{className:"text-war-gold/70",children:["+",s]})]})]})})]})})}function Aa(t){let{actionType:n,actionData:r,onConfirm:a,onCancel:i}=t;if((0,e.useEffect)(()=>{const e=e=>{"Enter"===e.key?(e.preventDefault(),a()):"Escape"===e.key&&(e.preventDefault(),i())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,i]),!r)return null;const o="placement"===n,s="maneuver"===n;return(0,c.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",style:{zIndex:1e3},role:"presentation",children:(0,c.jsxs)("div",{className:"bg-war-navy border border-war-gold/30 rounded-lg max-w-md w-full shadow-modal animate-fadein",role:"dialog","aria-modal":"true","aria-label":o?"Confirm deployment":"Confirm maneuver",children:[(0,c.jsxs)("div",{className:"px-6 py-4 border-b border-war-gold/20",style:{background:"linear-gradient(135deg, rgba(184,115,51,0.2) 0%, rgba(20,30,48,0.95) 100%)"},children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-copper/80"}),(0,c.jsx)("p",{className:"text-war-copper text-sm tracking-[0.2em] uppercase font-body font-bold",children:o?"Deployment Order":"Maneuver Order"})]}),(0,c.jsxs)("h3",{className:"text-parchment font-display text-lg tracking-wide",children:[o&&"Confirm Deployment",s&&"Confirm Maneuver"]})]}),(0,c.jsxs)("div",{className:"px-6 py-5",children:[(0,c.jsxs)("p",{className:"text-parchment/90 font-body text-base mb-5 leading-relaxed",children:[o&&"Deploy ".concat(r.troopCount," ").concat(1===r.troopCount?"troop":"troops"," to ").concat(r.territoryName,"?"),s&&"Move ".concat(r.troopCount," ").concat(1===r.troopCount?"troop":"troops"," from ").concat(r.fromTerritoryName," to ").concat(r.territoryName,"?")]}),(0,c.jsxs)("div",{className:"bg-black/20 rounded px-5 py-4 border-l-2 border-war-copper/50",children:[(0,c.jsx)("p",{className:"text-sm text-war-copper/80 uppercase tracking-wider mb-3 font-body font-bold",children:"Preview"}),o&&(0,c.jsxs)("div",{className:"space-y-2 font-body",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("span",{className:"text-parchment-dark/60 text-sm",children:"Current garrison:"}),(0,c.jsx)("span",{className:"text-parchment/80 font-bold",children:r.currentTroops})]}),(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("span",{className:"text-parchment-dark/60 text-sm",children:"After deployment:"}),(0,c.jsx)("span",{className:"text-war-gold font-bold text-lg font-display",children:r.newTroops})]})]}),s&&(0,c.jsxs)("div",{className:"space-y-3 font-body",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-parchment-dark/50 text-sm uppercase mb-1 font-bold",children:r.fromTerritoryName}),(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("span",{className:"text-parchment-dark/60 text-sm",children:"Current:"}),(0,c.jsx)("span",{className:"text-parchment/80",children:r.fromCurrentTroops})]}),(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("span",{className:"text-parchment-dark/60 text-sm",children:"After:"}),(0,c.jsx)("span",{className:"text-war-gold font-bold",children:r.fromNewTroops})]})]}),(0,c.jsxs)("div",{className:"border-t border-parchment-dark/10 pt-2",children:[(0,c.jsx)("p",{className:"text-parchment-dark/50 text-sm uppercase mb-1 font-bold",children:r.territoryName}),(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("span",{className:"text-parchment-dark/60 text-sm",children:"Current:"}),(0,c.jsx)("span",{className:"text-parchment/80",children:r.currentTroops})]}),(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("span",{className:"text-parchment-dark/60 text-sm",children:"After:"}),(0,c.jsx)("span",{className:"text-war-gold font-bold",children:r.newTroops})]})]})]})]}),(0,c.jsx)("p",{className:"text-parchment-dark/40 text-sm text-center mt-4 font-body italic",children:"Press Enter to confirm, Esc to cancel"})]}),(0,c.jsxs)("div",{className:"px-6 pb-5 flex gap-3",children:[(0,c.jsx)("button",{onClick:i,className:"flex-1 px-6 py-3 font-display text-base rounded border border-parchment-dark/20 text-parchment/70 hover:border-war-gold/40 hover:text-parchment transition-colors cursor-pointer tracking-wide",style:{minHeight:"44px"},children:"Cancel"}),(0,c.jsx)("button",{onClick:a,className:"flex-1 px-6 py-3 font-display text-base rounded bg-war-gold text-war-ink hover:bg-war-brass transition-colors cursor-pointer font-bold tracking-wide shadow-copper",style:{minHeight:"44px"},children:"Confirm"})]})]})})}const ja={impressment:{term:"Impressment",definition:"The British practice of forcing American sailors to serve in the Royal Navy against their will.",grade:"8th",useInSentence:"British impressment of American sailors was one of the main causes of the War of 1812."},militia:{term:"Militia",definition:"Citizen soldiers who are not part of the regular army but can be called to defend their communities in times of war.",grade:"8th",useInSentence:"American militia helped defend Baltimore during the Battle of Fort McHenry."},garrison:{term:"Garrison",definition:"Troops stationed in a fort or territory to defend it.",grade:"8th",useInSentence:"The garrison at Fort Detroit surrendered without a fight in 1812."},reinforcements:{term:"Reinforcements",definition:"Additional troops sent to strengthen an army or garrison.",grade:"8th",useInSentence:"British reinforcements arrived from Europe after Napoleon's defeat."},blockade:{term:"Blockade",definition:"Using ships to prevent supplies, troops, or trade goods from entering or leaving enemy ports.",grade:"8th",useInSentence:"The British naval blockade severely damaged American trade during the war."},privateers:{term:"Privateers",definition:"Privately owned ships authorized by the government to attack and capture enemy merchant vessels.",grade:"8th",useInSentence:"American privateers captured hundreds of British merchant ships during the war."},theater:{term:"Theater of War",definition:"A major geographic area where military operations take place during a war.",grade:"8th",useInSentence:"The War of 1812 had four main theaters: Great Lakes, Chesapeake, Southern, and Maritime."},fortification:{term:"Fortification",definition:"A military structure built to defend a location, such as a fort with walls, cannons, and defensive positions.",grade:"8th",useInSentence:"Fort McHenry's fortifications withstood 25 hours of British bombardment."},nationalism:{term:"Nationalism",definition:"Strong pride in and loyalty to one's nation; a sense of national identity and unity.",grade:"8th",useInSentence:"American nationalism grew stronger after victories at Lake Erie and New Orleans."},sovereignty:{term:"Sovereignty",definition:"The authority of a nation to govern itself without interference from other nations.",grade:"8th",useInSentence:"Native tribes fought to maintain their sovereignty over traditional lands."},treaty:{term:"Treaty",definition:"A formal agreement between nations to end a war or establish peaceful relations.",grade:"8th",useInSentence:"The Treaty of Ghent ended the War of 1812 in December 1814."},neutral:{term:"Neutral Rights",definition:"The right of nations not involved in a war to trade freely with both sides without interference.",grade:"8th",useInSentence:"The United States claimed neutral rights to trade with both Britain and France during the Napoleonic Wars."},embargo:{term:"Embargo",definition:"A government order that stops trade with another country as a form of economic pressure.",grade:"8th",useInSentence:"The 1807 Embargo Act backfired by hurting American merchants more than British ones."},confederacy:{term:"Confederacy",definition:"An alliance or union of groups (such as tribes) working together for a common purpose.",grade:"8th",useInSentence:"Tecumseh created a Native confederacy to resist American expansion into the Northwest Territory."},resistance:{term:"Resistance",definition:"The act of fighting back against an occupying or threatening force.",grade:"8th",useInSentence:"Native American resistance to westward expansion increased in the early 1800s."},frontier:{term:"Frontier",definition:"The border region between settled areas and wilderness; the edge of American settlement moving westward.",grade:"8th",useInSentence:"Fighting on the frontier was brutal as settlers and Native tribes clashed over land."},territory:{term:"Territory",definition:"A region of land under the control of a government but not yet a full state; also refers to areas controlled during war.",grade:"8th",useInSentence:"The Northwest Territory was disputed between the United States, Britain, and Native tribes."},frigate:{term:"Frigate",definition:"A fast, medium-sized warship with powerful cannons, used for patrols and battles.",grade:"8th",useInSentence:"The USS Constitution was a famous American frigate nicknamed 'Old Ironsides.'"},flagship:{term:"Flagship",definition:"The ship carrying the commanding officer of a fleet or naval squadron.",grade:"8th",useInSentence:"Oliver Hazard Perry's flagship, the USS Lawrence, was badly damaged at the Battle of Lake Erie."},victoryPoints:{term:"Victory Points",definition:"Points earned by controlling strategic territories and achieving objectives; the first side to reach 50 points wins.",grade:"8th",useInSentence:"Washington D.C. is worth 2 victory points because it's the American capital."},maneuver:{term:"Maneuver",definition:"A strategic movement of troops from one territory to an adjacent friendly territory.",grade:"8th",useInSentence:"You can maneuver troops between your territories to reinforce weak positions."},adjacency:{term:"Adjacent",definition:"Neighboring or next to each other; territories that share a border.",grade:"8th",useInSentence:"You can only attack territories that are adjacent to ones you control."},napoleonic:{term:"Napoleonic Wars",definition:"Series of wars (1803-1815) between France under Napoleon Bonaparte and various European powers, especially Britain.",grade:"8th",useInSentence:"Britain was focused on fighting Napoleon in Europe, which distracted them from the American war."},republicanism:{term:"Republicanism",definition:"A political ideology emphasizing representative government, citizen participation, and resistance to monarchy.",grade:"8th",useInSentence:"American republicanism clashed with British monarchical traditions during this era."}};const Ea={military:"Military",political:"Political",nativeAmerican:"Native American",geographic:"Geographic",naval:"Naval",gameplay:"Gameplay",historicalContext:"Historical Context"};function Ba(){const[t,n]=(0,e.useState)(!1),[r,a]=(0,e.useState)(null),i={military:[ja.impressment,ja.militia,ja.garrison,ja.reinforcements,ja.blockade,ja.privateers,ja.theater,ja.fortification],political:[ja.nationalism,ja.sovereignty,ja.treaty,ja.neutral,ja.embargo],nativeAmerican:[ja.confederacy,ja.resistance],geographic:[ja.frontier,ja.territory],naval:[ja.frigate,ja.flagship],gameplay:[ja.victoryPoints,ja.maneuver,ja.adjacency],historicalContext:[ja.napoleonic,ja.republicanism]};return(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg border border-parchment-dark/8",children:[(0,c.jsxs)("button",{onClick:()=>n(!t),className:"w-full px-3 py-2.5 flex items-center justify-between cursor-pointer hover:bg-white/3 transition-colors rounded-lg",children:[(0,c.jsx)("h3",{className:"text-war-gold/90 font-display text-base tracking-wide",children:"Glossary"}),(0,c.jsx)("span",{className:"text-parchment-dark/40 text-sm font-body",children:t?"\u25b2":"\u25bc"})]}),t&&(0,c.jsx)("div",{className:"px-3 pb-3 space-y-2 max-h-64 overflow-y-auto",children:Object.entries(i).map(e=>{let[t,n]=e;return(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-war-copper/70 text-xs uppercase tracking-widest font-body font-bold mb-1 mt-1",children:Ea[t]}),n.map(e=>{const t=r===e.term;return(0,c.jsxs)("div",{className:"border-l-2 border-parchment-dark/10 ml-0.5",children:[(0,c.jsxs)("button",{onClick:()=>a(t?null:e.term),className:"w-full text-left pl-2.5 py-1 cursor-pointer hover:bg-white/3 transition-colors flex items-center justify-between","aria-expanded":t,children:[(0,c.jsx)("span",{className:"text-parchment/80 text-sm font-body font-bold",children:e.term}),(0,c.jsx)("span",{className:"text-parchment-dark/30 text-xs",children:t?"\u2212":"+"})]}),t&&(0,c.jsxs)("div",{className:"pl-2.5 pb-1.5",children:[(0,c.jsx)("p",{className:"text-parchment/60 text-sm font-body leading-relaxed",children:e.definition}),(0,c.jsxs)("p",{className:"text-parchment-dark/40 text-xs font-body italic mt-1 leading-relaxed",children:["\u201c",e.useInSentence,"\u201d"]})]})]},e.term)})]},t)})})]})}const Pa=[{id:"jackson",name:"Andrew Jackson",years:"1767\u20131845",faction:"us",category:"military",isGameLeader:!0,title:"Major General",biography:['Andrew Jackson was a self-made Tennessee frontiersman who became the War of 1812\'s greatest American hero. Born into poverty along the Carolina frontier, he rose through sheer force of will to become a lawyer, congressman, and militia commander. He had no formal military training, but his iron determination and fierce temper earned him the nickname "Old Hickory" from soldiers who said he was as tough as the hardest wood.',"His victory at the Battle of New Orleans in January 1815 made him a national icon. Commanding one of the most diverse armies in American history \u2014 regulars, frontier militia, free Black troops, Choctaw warriors, and Jean Lafitte's pirates \u2014 Jackson inflicted over 2,000 British casualties while losing only 71 of his own men. It was the most lopsided American victory of the war.","Jackson's wartime fame launched him to the presidency in 1828. As president, however, he signed the Indian Removal Act of 1830, which forced tens of thousands of Native people from their homelands \u2014 a dark irony given his wartime alliances with Choctaw and Cherokee warriors who had fought beside him."],primarySources:[{quote:"I have always been ready to lay down my life for my country.",attribution:"Andrew Jackson",context:"A sentiment Jackson expressed throughout his military and political career."}],didYouKnow:"Jackson fought his first battle at age 13 during the American Revolution and carried a British officer's saber scar on his face for life."},{id:"perry",name:"Oliver Hazard Perry",years:"1785\u20131819",faction:"us",category:"military",isGameLeader:!0,title:"Commodore",biography:["Oliver Hazard Perry built a fleet from scratch on the shores of Lake Erie and won the decisive naval battle of the war. Only 27 years old during the engagement, Perry supervised the construction of an entire squadron using green timber cut from the surrounding forests. His determination to control the Great Lakes was critical to the American war effort in the west.",'When his flagship Lawrence was shattered by British cannon fire and most of its crew killed or wounded, Perry refused to surrender. He climbed into a small rowboat and, under a hail of enemy fire, rowed to the undamaged brig Niagara. From there he broke through the British line and forced the entire enemy squadron to surrender. His message to General William Henry Harrison \u2014 "We have met the enemy and they are ours" \u2014 became one of the most famous dispatches in American military history.'],primarySources:[{quote:"We have met the enemy and they are ours: two ships, two brigs, one schooner and one sloop.",attribution:"Oliver Hazard Perry, September 10, 1813",context:"Perry's dispatch to General Harrison after the Battle of Lake Erie."}],didYouKnow:'Perry praised his African American sailors, who made up about 25% of his crew, saying they "seemed absolutely insensible to danger."'},{id:"harrison",name:"William Henry Harrison",years:"1773\u20131841",faction:"us",category:"military",isGameLeader:!0,title:"Major General",biography:["William Henry Harrison was Governor of Indiana Territory before the war and was already famous for leading American forces at the Battle of Tippecanoe in 1811, where he destroyed Prophetstown, the spiritual center of Tecumseh's confederacy. When the War of 1812 began, he was appointed commander of the Army of the Northwest.",'After Perry\'s victory on Lake Erie opened the water route into Canada, Harrison pursued the retreating British army and defeated them at the Battle of the Thames in October 1813. During that battle, Tecumseh was killed \u2014 shattering the pan-Native alliance. Harrison became a national hero and later rode his fame to the White House, winning the 1840 presidential election with the famous slogan "Tippecanoe and Tyler Too."'],primarySources:[{quote:"The American backwoodsmen are the best soldiers in the world for a campaign in the wilderness.",attribution:"William Henry Harrison",context:"Harrison's assessment of frontier fighters during the Northwest campaign."}],didYouKnow:"Harrison served the shortest presidency in history \u2014 just 31 days. He caught pneumonia at his inauguration and died a month later."},{id:"winfield_scott",name:"Winfield Scott",years:"1786\u20131866",faction:"us",category:"military",isGameLeader:!0,title:"Brigadier General",biography:["Winfield Scott was a young officer who transformed the professionalism of the American army during the War of 1812. Captured by the British at the disastrous Battle of Queenston Heights early in the war, he was exchanged and returned to service with a fierce determination to train American soldiers to match British regulars.","Scott drilled his troops rigorously using French military manuals, insisting on discipline, proper formations, and bayonet practice. His efforts paid off spectacularly at the battles of Chippawa and Lundy's Lane in 1814, where his brigade stood toe-to-toe with British veterans and proved that American regulars could fight as well as any army in the world. Scott went on to serve as commanding general during the Mexican-American War and was still in command at the start of the Civil War."],primarySources:[{quote:"Take care of your men, and they will take care of you.",attribution:"Attributed to Winfield Scott",context:"A principle Scott followed throughout his long military career."}],didYouKnow:"Scott served in the military for over 50 years \u2014 from the War of 1812 through the start of the Civil War. He was the longest-serving general in American history."},{id:"brock",name:"Isaac Brock",years:"1769\u20131812",faction:"british",category:"military",isGameLeader:!0,title:"Major General",biography:["Isaac Brock was the bold and charismatic commander who saved Upper Canada in the opening months of the War of 1812. When American General William Hull invaded Canada with a larger force, Brock responded with audacity \u2014 marching rapidly to Detroit and using a brilliant combination of bluff, psychological warfare, and his alliance with Tecumseh to convince Hull that he faced overwhelming numbers. Hull surrendered Detroit without a fight, a humiliation that shocked the American public.","Brock was killed leading a charge at the Battle of Queenston Heights on October 13, 1812. His death was a devastating blow to British morale, but his early victories inspired the defense of Canada for the rest of the war. He remains one of Canada's greatest national heroes, celebrated for saving the colony when it seemed most vulnerable."],primarySources:[{quote:"Push on, brave York Volunteers!",attribution:"Isaac Brock, October 13, 1812",context:"Brock's last words as he led a charge up the heights at Queenston."}],didYouKnow:"Brock's monument at Queenston Heights is 56 meters tall \u2014 one of the tallest monuments in Canada. He was mourned by both British and Native allies."},{id:"drummond",name:"Gordon Drummond",years:"1772\u20131854",faction:"british",category:"military",isGameLeader:!0,title:"Lieutenant General",biography:["Gordon Drummond was the first Canadian-born officer to command all British forces in Canada. He took over leadership after Brock's death and directed the defense of the Niagara frontier during some of the war's most intense fighting.","Drummond commanded British forces at the brutal Battle of Lundy's Lane on July 25, 1814 \u2014 one of the bloodiest engagements of the entire war. Fighting raged into the night at close range, with both sides suffering heavy casualties. Drummond was wounded during the battle but refused to leave the field, rallying his men to hold their ground. His leadership helped keep Upper Canada in British hands through the final year of the war."],primarySources:[{quote:"The troops have behaved with a gallantry and discipline which cannot be surpassed.",attribution:"Gordon Drummond",context:"Drummond's official report on the Battle of Lundy's Lane."}],didYouKnow:"Drummond was born in Quebec City, making him the first person born in Canada to command all British forces in the province."},{id:"ross",name:"Robert Ross",years:"1766\u20131814",faction:"british",category:"military",isGameLeader:!0,title:"Major General",biography:["Robert Ross was a veteran of the Napoleonic Wars who led the most dramatic British operation of the war \u2014 the burning of Washington, D.C. in August 1814. After routing American defenders at the Battle of Bladensburg, his troops marched straight into the American capital, making Ross the only foreign commander to capture Washington in American history.",'Just weeks after his triumph in Washington, Ross was killed by an American sniper at the Battle of North Point near Baltimore on September 12, 1814. His death disrupted the British attack on Baltimore and may have saved the city from the same fate as Washington. The British assault on Fort McHenry that followed \u2014 and failed \u2014 inspired Francis Scott Key to write "The Star-Spangled Banner."'],primarySources:[{quote:"I will sup in Baltimore tonight, or in hell.",attribution:"Attributed to Robert Ross",context:"Said before the Battle of North Point, September 12, 1814."}],didYouKnow:"When Ross's troops entered the White House, they found dinner still set on the table \u2014 Dolley Madison had fled just hours before. The officers ate the meal before burning the building."},{id:"prevost",name:"George Prevost",years:"1767\u20131816",faction:"british",category:"political",isGameLeader:!0,title:"Governor General",biography:["George Prevost served as Governor General of Canada and the overall British commander in North America during the War of 1812. A cautious administrator by nature, he prioritized the defense of Canada over offensive operations, a strategy that frustrated more aggressive officers like Brock but ultimately kept the colony intact.","Prevost's reputation was badly damaged when he led a large British invasion force into New York in 1814, only to retreat at the Battle of Plattsburgh despite outnumbering the Americans on land. The defeat was caused in part by the loss of the British naval squadron on Lake Champlain. Prevost was recalled to England to face a court-martial, but he died before the trial could take place. History has judged him harshly, though his overall defensive strategy did succeed in its primary goal \u2014 preserving Canada."],primarySources:[{quote:"The preservation of Canada is the first object.",attribution:"George Prevost",context:"Prevost's guiding principle throughout the war."}],didYouKnow:"Prevost was fluent in French and popular with French-Canadian civilians, which helped maintain loyalty in Lower Canada during the war."},{id:"de_salaberry",name:"Charles de Salaberry",years:"1778\u20131829",faction:"british",category:"military",isGameLeader:!0,title:"Lieutenant Colonel",biography:["Charles-Michel d'Irumberry de Salaberry was a French-Canadian officer who became one of the most celebrated defenders of Canada during the War of 1812. Born into a military family in Beauport, Quebec, he served in the British army from age 14, fighting in campaigns across Europe and the Caribbean before returning to Canada to command the Canadian Voltigeurs \u2014 an elite unit of French-Canadian light infantry he personally recruited and trained.","De Salaberry's finest hour came at the Battle of Chateauguay on October 26, 1813. With roughly 300 Canadian Voltigeurs and Native warriors, he repelled an American force of over 3,000 troops marching toward Montreal. Using the terrain, fallen trees, and buglers positioned throughout the forest to create the illusion of a much larger force, de Salaberry turned the Americans back in a masterpiece of defensive warfare. The victory saved Montreal and proved that Canadian-born soldiers could defend their homeland against overwhelming odds.","De Salaberry is remembered as one of the first great French-Canadian military heroes. His victory at Chateauguay is celebrated in Quebec as a defining moment of Canadian identity \u2014 proof that a small, determined force fighting for their own land could defeat a much larger invader."],primarySources:[{quote:"I have won a victory mounted on a wooden horse.",attribution:"Charles de Salaberry, after the Battle of Chateauguay, 1813",context:"De Salaberry's wry comment on winning the battle from behind a barricade of felled trees rather than on horseback."}],didYouKnow:"De Salaberry had buglers spread throughout the forest blow their horns from different positions to make the Americans think they were surrounded by a massive army. The trick worked \u2014 the American commander withdrew his 3,000+ troops."},{id:"tecumseh",name:"Tecumseh",years:"1768\u20131813",faction:"native",category:"native_leader",isGameLeader:!0,title:"War Chief",biography:["Tecumseh was a Shawnee leader who built the most ambitious pan-Native alliance in North American history. He traveled thousands of miles \u2014 from the Great Lakes to the Gulf of Mexico \u2014 recruiting warriors from dozens of nations. His central argument was powerful and radical: no single nation had the right to sell land that belonged to all Native peoples collectively.","When the War of 1812 began, Tecumseh allied with the British, and his tactical genius played a crucial role in the capture of Detroit. He led Native warriors with a combination of strategic brilliance and personal courage that earned the respect of both allies and enemies. He was killed at the Battle of the Thames in October 1813, and his death shattered the confederacy, ending the last realistic chance for an independent Native state east of the Mississippi River.",'Even his enemies recognized his greatness. William Henry Harrison called him "one of those uncommon geniuses which spring up occasionally to produce revolutions." Tecumseh\'s vision of Native unity and sovereignty inspired resistance movements for generations and continues to resonate today.'],primarySources:[{quote:"Sell a country! Why not sell the air, the clouds and the great sea, as well as the earth?",attribution:"Tecumseh",context:"Tecumseh's argument against individual land sales by any single Native nation."}],didYouKnow:"After Tecumseh's death, the exact location of his burial was kept secret by his followers to prevent his body from being desecrated. His grave has never been found."},{id:"tenskwatawa",name:"Tenskwatawa",years:"1775\u20131836",faction:"native",category:"native_leader",isGameLeader:!0,title:"The Prophet",biography:["Tenskwatawa was Tecumseh's younger brother and a powerful spiritual leader who inspired a revitalization movement among Native peoples across the Great Lakes and Ohio Valley. He preached the rejection of American trade goods, alcohol, and cultural assimilation, calling on Native people to return to traditional ways of life. He established Prophetstown at the junction of the Tippecanoe and Wabash rivers as the spiritual and political center of the resistance movement.","After the defeat at Tippecanoe in 1811 and Tecumseh's death in 1813, Tenskwatawa's influence declined sharply. He eventually settled in Kansas, where he lived until 1836. Though his spiritual movement was ultimately unsuccessful, it represented one of the most significant Native cultural resistance efforts in American history \u2014 an attempt to preserve identity and sovereignty through spiritual renewal rather than military force alone."],primarySources:[{quote:"The Great Spirit told me to tell the Indians that they must not drink whiskey, nor steal, nor fight one another.",attribution:"Tenskwatawa",context:"A central teaching of Tenskwatawa's spiritual movement."}],didYouKnow:"Tenskwatawa lost an eye in a childhood accident and was considered a failure by his community before his spiritual transformation. His dramatic reinvention gave hope to thousands of Native people."},{id:"red_eagle",name:"Red Eagle (William Weatherford)",years:"1780\u20131824",faction:"native",category:"native_leader",isGameLeader:!0,title:"Red Stick War Chief",biography:["William Weatherford, also known as Red Eagle, led the Red Stick faction of the Creek Nation during the Creek War of 1813-1814. Of mixed Creek, Scottish, and French heritage, he chose to fight against American expansion into the South. He led the devastating attack on Fort Mims in August 1813, which killed over 250 people \u2014 soldiers, settlers, and mixed-heritage Creek who had sided with the Americans. The attack shocked the nation and triggered Andrew Jackson's punishing military campaign against the Creek.",'After the devastating Creek defeat at Horseshoe Bend in March 1814, Red Eagle surrendered personally to Andrew Jackson, reportedly saying "I am in your power \u2014 do with me as you please." Remarkably, Jackson was so impressed by his courage that he released him on the condition that he seek peace. Red Eagle settled as a planter in southern Alabama and lived quietly until his death in 1824.'],primarySources:[{quote:"I am in your power. Do with me as you please. I am a soldier. I have done the white people all the harm I could.",attribution:"Red Eagle (William Weatherford)",context:"Red Eagle's surrender speech to Andrew Jackson after the Creek War."}],didYouKnow:"Despite being enemies during the war, Jackson and Red Eagle developed a mutual respect. Jackson reportedly said Red Eagle was the bravest man he had ever met."},{id:"black_hawk",name:"Black Hawk",years:"1767\u20131838",faction:"native",category:"native_leader",isGameLeader:!0,title:"War Chief",biography:["Black Hawk was a Sauk war chief who fought alongside the British during the War of 1812, leading warriors at the battles of Fort Meigs and the Thames. A fierce opponent of American expansion, he never accepted the treaties that surrendered his people's ancestral lands along the Mississippi River, arguing that the chiefs who signed them had no authority to do so.","After the War of 1812, Black Hawk continued to resist American settlement, eventually leading the Black Hawk War of 1832 \u2014 one of the last major Native military conflicts east of the Mississippi. After his capture, he dictated an autobiography that remains one of the most important Native American memoirs ever recorded, offering a powerful firsthand account of what it meant to lose a homeland."],primarySources:[{quote:"I fought hard. But your guns were well aimed. The bullets flew like birds in the air, and whizzed by our ears like the wind through the trees in the winter.",attribution:"Black Hawk",context:"From Black Hawk's autobiography, reflecting on his military experiences."}],didYouKnow:"After his capture, Black Hawk was taken on a tour of Eastern cities so he could see American power firsthand. Instead, he became a celebrity \u2014 crowds gathered to see him and he was more popular than President Jackson."},{id:"dolley_madison",name:"Dolley Madison",years:"1768\u20131849",faction:"us",category:"political",isGameLeader:!1,title:"First Lady",biography:['Dolley Madison was one of the most influential First Ladies in American history. Far more than a social hostess, she was James Madison\'s political partner, using her famous "Wednesday drawing rooms" to build alliances across party lines. Her charm, warmth, and social skills helped her shy, bookish husband navigate the treacherous world of Washington politics at a time when the young nation was deeply divided.',"When the British invaded Washington in August 1814, Dolley Madison refused to leave the White House until she had secured Gilbert Stuart's famous portrait of George Washington and important state documents. While government officials and soldiers fled in panic, she calmly organized the rescue of irreplaceable national treasures. Her courage under fire made her a national hero and an enduring symbol of American resilience.","After James Madison's death in 1836, Congress awarded Dolley an honorary seat on the floor of the House of Representatives \u2014 the first woman to receive this honor. She remained one of Washington's most prominent and beloved citizens until her death in 1849."],primarySources:[{quote:"I am determined not to go myself until I see Mr. Madison safe, so that he can accompany me.",attribution:"Dolley Madison",context:"From a letter written during the British invasion of Washington, August 1814."}],didYouKnow:'Dolley Madison was so popular that when she died in 1849, President Zachary Taylor called her "the first lady of the land" \u2014 one of the earliest uses of the title "First Lady."'},{id:"mary_pickersgill",name:"Mary Pickersgill",years:"1776\u20131857",faction:"us",category:"civilian",isGameLeader:!1,title:"Flagmaker",biography:["Mary Pickersgill was a professional flagmaker who ran a successful business in Baltimore. In 1813, Major George Armistead, the commander of Fort McHenry, commissioned her to create an enormous garrison flag \u2014 30 by 42 feet, with 15 stars and 15 stripes. Pickersgill, along with her daughter Caroline, her nieces, and an indentured servant named Grace Wisher, spent six weeks sewing the massive banner, spreading it out on the floor of a nearby brewery because it was too large for her workshop.",'The flag Mary Pickersgill made became one of the most important symbols in American history. When Francis Scott Key watched the British bombardment of Fort McHenry on the night of September 13-14, 1814, it was Pickersgill\'s flag he saw "by the dawn\'s early light," still flying over the fort. That moment inspired "The Star-Spangled Banner." Today, the original flag hangs in the Smithsonian\'s National Museum of American History. Pickersgill continued her flagmaking business and became active in charitable work for the rest of her life.'],primarySources:[{quote:"The flag being so large, I was obliged to obtain permission to spread it out in the malt house of Claggett's brewery.",attribution:"Mary Pickersgill",context:"Pickersgill describing the practical challenges of creating the enormous garrison flag."}],didYouKnow:"The Star-Spangled Banner flag required 400 yards of wool bunting. Each star was two feet across. Mary Pickersgill was paid $405.90 for the garrison flag \u2014 equivalent to about $10,000 today."},{id:"charles_ball",name:"Charles Ball",years:"1781\u2013unknown",faction:"us",category:"military",isGameLeader:!1,title:"Sailor & Soldier",biography:["Charles Ball was born enslaved in Maryland but escaped and served in the United States Navy during the War of 1812. He fought at the Battle of Bladensburg in August 1814, defending Washington, D.C. against the British invasion. His memoir, published in 1836, is one of the few firsthand accounts of an African American's experience during the war, providing a perspective that most histories of the conflict have ignored.",'Ball\'s story highlights the painful contradictions of fighting for a nation that enslaved his people. After the war, he was recaptured and re-enslaved before managing to escape a second time. His narrative, "Fifty Years in Chains," describes both the camaraderie of military service \u2014 where Black and white sailors fought side by side \u2014 and the brutal reality of American slavery that awaited African Americans after the guns fell silent.'],primarySources:[{quote:"I had been a slave, and felt the value of freedom. I was willing to risk my life in its defense.",attribution:"Charles Ball (paraphrased from his memoir)",context:"Ball reflecting on his decision to serve in the military despite the injustices he faced."}],didYouKnow:'Ball\'s autobiography, "Fifty Years in Chains," was one of the earliest slave narratives published in the United States and provides unique insights into both military service and the institution of slavery.'},{id:"laura_secord",name:"Laura Secord",years:"1775\u20131868",faction:"british",category:"civilian",isGameLeader:!1,title:"Heroine",biography:["Laura Secord was a Canadian heroine who walked 20 miles through swamps and enemy territory to warn British forces of an impending American attack on Beaver Dams in June 1813. A mother of five whose husband had been seriously wounded at the Battle of Queenston Heights, she overheard American officers discussing their plans while they were billeted in her home. Despite the enormous danger, she set out alone at dawn to carry the warning.","Her information helped British and Mohawk forces prepare an ambush that captured over 500 American troops \u2014 one of the most complete victories of the war. Despite her heroism, Secord received little recognition during her lifetime. It was not until 1860, when the Prince of Wales visited Canada and heard her story, that she received a modest reward of 100 pounds. Today she is celebrated as one of Canada's most famous historical figures."],primarySources:[{quote:"I was determined to put the Americans off the guard, and I was determined to go to warn the British.",attribution:"Laura Secord",context:"Secord describing her motivation for the dangerous journey to Beaver Dams."}],didYouKnow:"Laura Secord is now one of Canada's most famous historical figures. A popular Canadian chocolate company is named after her, and her image has appeared on Canadian stamps and currency."},{id:"jean_lafitte",name:"Jean Lafitte",years:"1780\u2013unknown",faction:"us",category:"military",isGameLeader:!1,title:"Pirate & Privateer",biography:["Jean Lafitte was a French pirate and smuggler who operated out of Barataria Bay near New Orleans. When the British offered him a captain's commission and $30,000 to fight against the Americans, Lafitte made a surprising choice \u2014 he warned the Americans instead and offered his men, ships, and supplies to Andrew Jackson for the defense of New Orleans.","Lafitte's pirates provided crucial artillery expertise, gunflints, and ammunition at the Battle of New Orleans, contributing significantly to the American victory. Jackson had initially dismissed Lafitte's men as \"hellish banditti\" but later publicly praised their bravery and skill. Lafitte received a presidential pardon from James Madison for his service, but true to form, he returned to piracy after the war and eventually disappeared from the historical record."],primarySources:[{quote:"I am the stray sheep wishing to return to the flock.",attribution:"Jean Lafitte",context:"From Lafitte's letter offering his services to the American cause before the Battle of New Orleans."}],didYouKnow:"Nobody knows how Lafitte died or where he went. Legends place his death everywhere from the Yucatan Peninsula to Illinois. He remains one of the most mysterious figures in American history."},{id:"john_norton",name:"John Norton (Teyoninhokarawen)",years:"1770\u20131831",faction:"native",category:"native_leader",isGameLeader:!1,title:"War Chief",biography:["Born in Scotland to a Cherokee father and Scottish mother, John Norton \u2014 known by his Mohawk name Teyoninhokarawen \u2014 became a Mohawk war chief and one of the most important Native leaders during the War of 1812. He led Haudenosaunee (Iroquois) warriors at the critical Battle of Queenston Heights, where his forces played a decisive role in the British victory that killed General Brock but saved Upper Canada.","Norton was a unique bridge between European and Native worlds. Educated in both traditions and fluent in multiple languages, he was respected by British officers and Native communities alike. He translated the Gospel of John into Mohawk and fought tirelessly for Native land rights and sovereignty. After the war, he traveled to England to advocate for his people before disappearing from the historical record around 1831."],primarySources:[{quote:"We are the faithful allies of the King, and we will fight for our lands.",attribution:"John Norton (Teyoninhokarawen)",context:"Norton expressing the Haudenosaunee position on their British alliance and land rights."}],didYouKnow:"Norton's journal of the War of 1812 is one of the most detailed Native accounts of the conflict. It was lost for over a century before being rediscovered and published in the 1970s."},{id:"creek_woman_composite",name:"A Creek Woman's Experience",years:"Unknown",faction:"native",category:"civilian",isGameLeader:!1,title:"Composite Profile",biography:["This profile represents a composite of Creek women's experiences during the War of 1812 and Creek War, drawn from historical records. She is not a single historical individual. Creek women held significant social and political roles in their matrilineal society. They controlled agricultural production, owned family homes, and participated in clan council decisions. When the Creek War erupted in 1813, women's lives were upended \u2014 they faced the destruction of their towns, separation from family members, and the loss of the agricultural lands that had sustained their communities for generations.","After the devastating Treaty of Fort Jackson in 1814, which stripped 23 million acres from the Creek Nation, women bore the heaviest burden of displacement. They had to rebuild communities, feed families without their traditional farmland, and maintain cultural practices under impossible conditions. Many Creek women walked the Trail of Tears in the 1830s, carrying children and preserving seeds and cultural knowledge that would sustain their people in Indian Territory. Their resilience ensured the survival of Creek culture through one of the darkest chapters in American history."],primarySources:[{quote:"The women wept as they looked back at the homes they had built, the fields they had planted, the graves of their ancestors they would never visit again.",attribution:"Composite account drawn from removal-era records",context:"A representative description of Creek women's experiences during forced removal, based on multiple historical sources."}],didYouKnow:"In Creek (Muscogee) society, clan membership and property passed through the mother's line. Women owned the family home and controlled the harvest. The destruction of this matrilineal system was one of the most devastating \u2014 and least discussed \u2014 consequences of the Creek War and removal."}];const Ia=Pa;function Oa(t){let{playerFaction:n}=t;const[r,a]=(0,e.useState)(!1),[i,o]=(0,e.useState)(null),s=(l=n,Pa.filter(e=>e.faction===l));var l;const d=s.filter(e=>e.isGameLeader),h=s.filter(e=>!e.isGameLeader);return(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg border border-parchment-dark/8",children:[(0,c.jsxs)("button",{onClick:()=>a(!r),className:"w-full px-3 py-2.5 flex items-center justify-between cursor-pointer hover:bg-white/3 transition-colors rounded-lg",children:[(0,c.jsx)("h3",{className:"text-war-gold/90 font-display text-base tracking-wide",children:"People of 1812"}),(0,c.jsx)("span",{className:"text-parchment-dark/40 text-sm font-body",children:r?"\u25b2":"\u25bc"})]}),r&&(0,c.jsxs)("div",{className:"px-3 pb-3 space-y-2 max-h-80 overflow-y-auto",children:[d.length>0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"text-war-copper/70 text-xs uppercase tracking-widest font-body font-bold mb-1 mt-1",children:"Your Leaders"}),d.map(e=>(0,c.jsx)(La,{profile:e,isOpen:i===e.id,onToggle:()=>o(i===e.id?null:e.id)},e.id))]}),h.length>0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"text-war-copper/70 text-xs uppercase tracking-widest font-body font-bold mb-1 mt-2",children:"Other Voices"}),h.map(e=>(0,c.jsx)(La,{profile:e,isOpen:i===e.id,onToggle:()=>o(i===e.id?null:e.id)},e.id))]})]})]})}function La(e){let{profile:t,isOpen:n,onToggle:r}=e;return(0,c.jsxs)("div",{className:"border-l-2 border-parchment-dark/10 ml-0.5",children:[(0,c.jsxs)("button",{onClick:r,className:"w-full text-left pl-2.5 py-1 cursor-pointer hover:bg-white/3 transition-colors flex items-center justify-between","aria-expanded":n,children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-parchment/80 text-sm font-body font-bold",children:t.name}),(0,c.jsx)("span",{className:"text-parchment-dark/40 text-xs font-body ml-1.5",children:t.title})]}),(0,c.jsx)("span",{className:"text-parchment-dark/30 text-xs",children:n?"\u2212":"+"})]}),n&&(0,c.jsxs)("div",{className:"pl-2.5 pb-2 space-y-1.5",children:[t.years&&(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs font-body",children:t.years}),(0,c.jsx)("p",{className:"text-parchment/60 text-sm font-body leading-relaxed",children:t.biography[0]}),t.primarySources&&t.primarySources.length>0&&(0,c.jsxs)("div",{className:"bg-war-red/5 border-l-2 border-war-red/20 rounded-r pl-2 py-1",children:[(0,c.jsxs)("p",{className:"text-parchment/60 text-sm font-body italic leading-relaxed",children:["\u201c",t.primarySources[0].quote,"\u201d"]}),(0,c.jsxs)("p",{className:"text-parchment-dark/40 text-xs font-body mt-0.5",children:["\u2014 ",t.primarySources[0].attribution]})]}),t.didYouKnow&&(0,c.jsxs)("p",{className:"text-war-copper/60 text-xs font-body italic",children:["Did you know? ",t.didYouKnow]})]})]})}const Ra={jackson:{id:"jackson",name:"Andrew Jackson",faction:"us",title:"Major General",ability:"Old Hickory: +2 to highest attack die in Southern Theater.",abilityType:"attack_bonus",modifier:2,theater:"Southern",alive:!0},perry:{id:"perry",name:"Oliver Hazard Perry",faction:"us",title:"Commodore",ability:"Master of the Lakes: +2 to attack/defense in naval territories.",abilityType:"naval",modifier:2,theater:null,alive:!0},harrison:{id:"harrison",name:"William Henry Harrison",faction:"us",title:"Major General",ability:"Tippecanoe: +1 to all attack dice in Great Lakes Theater.",abilityType:"attack_bonus",modifier:1,theater:"Great Lakes",alive:!0},winfield_scott:{id:"winfield_scott",name:"Winfield Scott",faction:"us",title:"Brigadier General",ability:"Disciplined Troops: +1 defense die when defending any territory.",abilityType:"defense_bonus",modifier:1,theater:null,alive:!0},brock:{id:"brock",name:"Isaac Brock",faction:"british",title:"Major General",ability:"Hero of Upper Canada: +2 to defense in Great Lakes territories.",abilityType:"defense_bonus",modifier:2,theater:"Great Lakes",alive:!0},drummond:{id:"drummond",name:"Gordon Drummond",faction:"british",title:"Lieutenant General",ability:"Relentless Assault: +1 to all attack dice.",abilityType:"attack_bonus",modifier:1,theater:null,alive:!0},ross:{id:"ross",name:"Robert Ross",faction:"british",title:"Major General",ability:"Shock and Awe: +2 attack bonus in Chesapeake Theater.",abilityType:"attack_bonus",modifier:2,theater:"Chesapeake",alive:!0},prevost:{id:"prevost",name:"George Prevost",faction:"british",title:"Governor General",ability:"Defensive Coordination: +1 troop reinforcement per turn.",abilityType:"rally",modifier:1,theater:null,alive:!0},de_salaberry:{id:"de_salaberry",name:"Charles de Salaberry",faction:"british",title:"Lieutenant Colonel",ability:"Chateauguay Ambush: +1 defense bonus in Great Lakes Theater.",abilityType:"defense_bonus",modifier:1,theater:"Great Lakes",alive:!0},tecumseh:{id:"tecumseh",name:"Tecumseh",faction:"native",title:"War Chief",ability:"Confederacy Leader: +2 to attack, can rally +1 troop in any Native territory per turn.",abilityType:"attack_bonus",modifier:2,theater:null,alive:!0},tenskwatawa:{id:"tenskwatawa",name:"Tenskwatawa",faction:"native",title:"The Prophet",ability:"Spiritual Rally: +2 reinforcement troops per turn for Native Coalition.",abilityType:"rally",modifier:2,theater:null,alive:!0},red_eagle:{id:"red_eagle",name:"Red Eagle (William Weatherford)",faction:"native",title:"Red Stick War Chief",ability:"Red Stick Fury: +2 to attack in Southern Theater, homeland of the Creek War.",abilityType:"attack_bonus",modifier:2,theater:"Southern",alive:!0},black_hawk:{id:"black_hawk",name:"Black Hawk",faction:"native",title:"War Chief",ability:"Relentless Raider: +1 attack bonus in Great Lakes Theater.",abilityType:"attack_bonus",modifier:1,theater:"Great Lakes",alive:!0}};function Ma(e,t){return Object.values(Ra).filter(n=>{var r,a;return n.faction===e&&(null!==(r=null===t||void 0===t||null===(a=t[n.id])||void 0===a?void 0:a.alive)&&void 0!==r?r:n.alive)})}function Da(e){let{faction:t,territory:n,isAttacking:r,leaderStates:a}=e;const i=Ma(t,a);let o=0;for(const s of i){const e=!s.theater||s.theater===(null===n||void 0===n?void 0:n.theater),t="naval"===s.abilityType&&(null===n||void 0===n?void 0:n.isNaval);("attack_bonus"===s.abilityType&&r&&e||"defense_bonus"===s.abilityType&&!r&&e||t)&&(o+=s.modifier)}return o}function Wa(e,t,n){const r=Ma(e,n);for(const a of r)if("first_strike"===a.abilityType){if(!a.theater||a.theater===(null===t||void 0===t?void 0:t.theater))return a.modifier}return 0}function Ha(e,t){return Ma(e,t).filter(e=>"rally"===e.abilityType).reduce((e,t)=>e+t.modifier,0)}const za=Ra,Fa={};Object.values(O).forEach(e=>{Fa[e.name]=e.id});const qa=["event","allocate","battle","maneuver","score"],Ua={event:"\u2709",allocate:"\u2694",battle:"\ud83d\udca5",maneuver:"\u2192",score:"\u2605"},Ga={event:"Review the historical event and its effects on the war.",allocate:"Click your territories to place reinforcement troops.",battle:"Select your territory, then click an adjacent enemy to attack.",maneuver:"Move troops between your adjacent territories.",score:"Review the board. Advance to let opponents take their turn."};function Ka(t){let{gameMode:n,round:r,totalRounds:a,currentPhase:i,currentPhaseLabel:o,seasonYear:s,territoryOwners:l,troops:d,selectedTerritory:h,scores:u,nationalismMeter:p,nativeResistance:m,navalDominance:f,factionMultiplier:g,reinforcementsRemaining:y,playerFaction:w,playerTerritoryCount:v,message:b,battleResult:x,showBattleModal:k,showIntro:_,currentEvent:T,showEventCard:S,gameOver:N,gameOverReason:C,gameOverWinner:A,finalScore:j,difficulty:E,leaderStates:B,aiLog:P,aiActions:I,showAIReplay:L,playerObjectives:R,currentKnowledgeCheck:M,showKnowledgeCheck:D,knowledgeCheckResults:W,knowledgeCheckHistory:H,journalEntries:z,battleStats:F,maneuversRemaining:q,objectiveBonus:G,playerName:K,classPeriod:V,onTerritoryClick:$,onAdvancePhase:ae,onDismissIntro:ie,onDismissEvent:oe,onDismissBattle:se,onAnswerKnowledgeCheck:le,onRequestKnowledgeCheck:ce,onSaveGame:de,onDeleteSave:he,pendingAdvance:ue,pendingAdvanceMessage:pe,onConfirmAdvance:me,onCancelAdvance:fe,onGoBack:ge,canGoBack:ye,pendingAction:we,actionHistory:ve,onConfirmPlaceTroop:be,onConfirmManeuver:xe,onCancelAction:ke,onUndoLastAction:_e,tutorialActive:Te,tutorialStepData:Se,tutorialCurrentStep:Ne,tutorialTotalSteps:Ce,onTutorialNext:Ae,onTutorialPrev:je,onTutorialSkip:Ee,onStartTutorial:Be,onCloseAIReplay:Pe,onPlayAgain:Ie,sounds:Oe,fontMode:Le,toggleFont:Re,sessionId:Me,classId:De}=t;const We=Ma(w,B),[He,ze]=(0,e.useState)(!1),[Fe,qe]=(0,e.useState)([]),Ue=(0,e.useCallback)(e=>{if(!e||0===e.length)return void qe([]);const t=e.map(e=>Fa[e]).filter(Boolean);qe(t)},[]),Ge=(0,e.useCallback)(()=>{qe([]),Pe()},[Pe]),Ke=(0,e.useRef)(i),Ye=(0,e.useRef)(S),Ve=(0,e.useRef)(k);(0,e.useEffect)(()=>{Oe&&i!==Ke.current&&(Oe.sfx.phaseAdvance(),Ke.current=i)},[i,Oe]),(0,e.useEffect)(()=>{Oe&&(S&&!Ye.current&&Oe.sfx.eventCard(),Ye.current=S)},[S,Oe]),(0,e.useEffect)(()=>{Oe&&(k&&!Ve.current&&(null!==x&&void 0!==x&&x.conquered?Oe.sfx.victory():Oe.sfx.cannon()),Ve.current=k)},[k,x,Oe]),(0,e.useEffect)(()=>{Oe&&N&&Oe.sfx.defeat()},[N,Oe]);const Ze=qa.indexOf(i);return(0,c.jsxs)("div",{className:"h-screen bg-war-ink flex flex-col overflow-hidden",children:[(0,c.jsxs)("header",{className:"bg-gradient-to-r from-war-navy via-war-navy to-war-navy-light px-3 md:px-5 py-2 flex items-center justify-between border-b border-war-gold/15 flex-shrink-0",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3 md:gap-6 flex-shrink-0",children:[(0,c.jsxs)("h1",{className:"text-war-gold font-display text-base md:text-xl tracking-wider",children:["1812",(0,c.jsx)("span",{className:"sr-only",children:": War of 1812 \u2014 Rise of the Nation"})]}),(0,c.jsxs)("div",{className:"hidden sm:flex items-center gap-1.5 text-parchment/70 font-body text-sm",children:[(0,c.jsx)("span",{className:"text-parchment-dark/60",children:"Round"}),(0,c.jsx)("span",{className:"text-parchment font-bold",children:r}),(0,c.jsxs)("span",{className:"text-parchment-dark/40",children:["/ ",a]}),(0,c.jsx)("span",{className:"text-parchment-dark/30 mx-1",children:"|"}),(0,c.jsx)("span",{className:"text-war-copper/80 italic",children:s})]}),(0,c.jsxs)("div",{className:"sm:hidden text-parchment font-body text-sm",children:["R",r," ",(0,c.jsxs)("span",{className:"text-parchment-dark/50",children:["/ ",a]})]})]}),(0,c.jsx)("div",{className:"flex items-center gap-0.5 md:gap-1","data-tutorial":"phase-indicator",children:qa.map((t,n)=>{const r=n<Ze,a=t===i;return(0,c.jsxs)(e.Fragment,{children:[(0,c.jsxs)("div",{className:"flex items-center gap-1 px-1.5 md:px-2.5 py-1 rounded transition-all duration-300 ".concat(a?"bg-war-gold/15 border border-war-gold/30":"border border-transparent"),children:[(0,c.jsx)("span",{className:"text-sm md:text-base ".concat(a?"text-war-gold":r?"text-green-500/60":"text-parchment-dark/30"),children:Ua[t]}),(0,c.jsx)("span",{className:"text-sm font-body capitalize hidden lg:inline ".concat(a?"text-war-gold font-bold":r?"text-green-500/50":"text-parchment-dark/30"),children:t})]}),n<qa.length-1&&(0,c.jsx)("div",{className:"w-3 md:w-5 h-px ".concat(r?"bg-green-500/30":"bg-parchment-dark/15")})]},t)})}),(0,c.jsxs)("div",{className:"flex items-center gap-2 md:gap-3 flex-shrink-0",children:["allocate"===i&&(0,c.jsxs)("div",{className:"flex items-center gap-1 bg-war-gold/10 border border-war-gold/25 rounded px-2.5 py-1",children:[(0,c.jsx)("span",{className:"text-war-gold font-display text-base md:text-lg font-bold",children:y}),(0,c.jsx)("span",{className:"text-parchment-dark/60 text-sm font-body hidden sm:inline",children:"troops"})]}),"maneuver"===i&&(0,c.jsxs)("div",{className:"flex items-center gap-1 bg-war-gold/10 border border-war-gold/25 rounded px-2.5 py-1",children:[(0,c.jsx)("span",{className:"text-war-gold font-display text-base md:text-lg font-bold",children:q}),(0,c.jsx)("span",{className:"text-parchment-dark/60 text-sm font-body hidden sm:inline",children:"moves"})]}),(0,c.jsx)("button",{onClick:Be,className:"w-7 h-7 text-xs border border-parchment-dark/25 text-parchment-dark/60 rounded hover:border-war-gold/50 hover:text-war-gold transition-colors cursor-pointer flex items-center justify-center font-body flex-shrink-0",title:"Tutorial","aria-label":"Show tutorial",children:"?"}),Oe&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:Oe.toggleMusic,className:"w-7 h-7 text-xs border rounded flex items-center justify-center cursor-pointer transition-colors flex-shrink-0 ".concat(Oe.musicOn?"border-war-gold/40 text-war-gold/80":"border-parchment-dark/25 text-parchment-dark/40 hover:border-war-gold/40 hover:text-war-gold/60"),title:Oe.musicOn?"Stop music":"Play music","aria-label":Oe.musicOn?"Stop music":"Play music",children:Oe.musicOn?"\u266b":"\u266a"}),(0,c.jsx)("button",{onClick:Oe.toggleMute,className:"w-7 h-7 text-xs border rounded flex items-center justify-center cursor-pointer transition-colors flex-shrink-0 ".concat(Oe.muted?"border-red-500/40 text-red-400/80":"border-parchment-dark/25 text-parchment-dark/40 hover:border-war-gold/40 hover:text-war-gold/60"),title:Oe.muted?"Unmute":"Mute","aria-label":Oe.muted?"Unmute sounds":"Mute sounds",children:Oe.muted?"\ud83d\udd07":"\ud83d\udd0a"})]}),(0,c.jsx)("button",{onClick:Re,className:"px-2.5 py-1 text-xs border rounded transition-colors cursor-pointer flex-shrink-0 font-body ".concat("dyslexic"===Le?"border-war-gold/40 text-war-gold/80":"border-parchment-dark/25 text-parchment-dark/60 hover:border-war-gold/40 hover:text-war-gold"),title:"dyslexic"===Le?"Switch to standard font":"Switch to OpenDyslexic font","aria-label":"Toggle dyslexic-friendly font",children:"Aa"}),(0,c.jsx)("button",{onClick:de,className:"px-2.5 py-1 text-xs border border-parchment-dark/25 text-parchment-dark/60 rounded hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer flex-shrink-0 font-body",title:"Save game","aria-label":"Save game",children:"Save"}),(0,c.jsx)("button",{onClick:()=>ze(!He),className:"md:hidden w-7 h-7 text-xs border border-parchment-dark/25 text-parchment-dark/60 rounded hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer flex items-center justify-center flex-shrink-0",title:"Toggle sidebar","aria-label":"Toggle sidebar",children:He?"\u2715":"\u2630"})]})]}),(0,c.jsxs)("div",{className:"flex-1 flex min-h-0 relative",children:[(0,c.jsxs)("div",{className:"flex-1 p-2 md:p-3 flex flex-col min-h-0",children:[b&&(0,c.jsx)("div",{className:"bg-war-navy/80 backdrop-blur border border-war-gold/15 rounded px-4 py-2 mb-2 flex-shrink-0 shadow-card",role:"status","aria-live":"polite",children:(0,c.jsx)("p",{className:"text-parchment/90 font-body text-sm md:text-base",children:b})}),(0,c.jsx)("div",{className:"flex-1 bg-war-navy/40 rounded border border-parchment-dark/8 overflow-hidden min-h-0 relative",children:_?(0,c.jsx)(J,{playerFaction:w,onContinue:ie,gameMode:n}):S?(0,c.jsx)(Q,{event:T,onDismiss:oe,gameMode:n}):(0,c.jsxs)(c.Fragment,{children:[P.length>0&&!L&&(0,c.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-40 bg-war-navy/95 backdrop-blur border-b border-british-red/40 px-4 py-2 max-h-16 overflow-y-auto",children:[(0,c.jsx)("span",{className:"text-british-red/80 text-sm uppercase tracking-widest font-body font-bold mr-2",children:"Opponent:"}),(0,c.jsx)("span",{className:"text-parchment/80 text-sm font-body",children:P[P.length-1]})]}),(0,c.jsx)(U,{territoryOwners:l,selectedTerritory:h,onTerritoryClick:$,troops:d,highlightedTerritories:Fe}),L&&I&&(0,c.jsx)(Na,{aiActions:I,onClose:Ge,onHighlightTerritory:Ue})]})}),(0,c.jsxs)("div",{className:"mt-2 flex flex-col sm:flex-row sm:items-center sm:justify-between flex-shrink-0 gap-2","data-tutorial":"advance-btn",children:[(0,c.jsx)("p",{className:"text-xs md:text-sm text-parchment-dark/50 font-body hidden sm:block italic",children:Ga[i]}),!N&&(0,c.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0 sm:ml-4 justify-end",children:[ye&&(0,c.jsx)("button",{onClick:ge,className:"px-3 py-2 font-body text-sm rounded border border-parchment-dark/25 text-parchment-dark/60 hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer",children:"Back"}),ve&&ve.length>0&&("allocate"===i||"maneuver"===i)&&(0,c.jsx)("button",{onClick:_e,className:"px-3 py-2 font-body text-sm rounded border border-war-gold/30 text-war-gold/70 hover:bg-war-gold/10 transition-colors cursor-pointer",title:"Undo last action",children:"Undo"}),(0,c.jsx)("button",{onClick:ae,disabled:S||k||D,className:"px-5 md:px-8 py-2 font-display text-sm md:text-base rounded tracking-wide transition-all ".concat(S||k||D?"bg-white/5 text-white/20 cursor-not-allowed":"bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer font-bold shadow-copper"),children:"event"===i?"Begin Planning":"allocate"===i?y>0?"Proceed (".concat(y," left)"):"Proceed to Battle":"battle"===i?"Proceed to Maneuver":"maneuver"===i?q>0?"End Turn (".concat(q," moves)"):"End Turn":"score"===i&&r>=a?"End War":"End Turn"})]})]}),ue&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",style:{zIndex:1e3},children:(0,c.jsxs)("div",{className:"bg-war-navy border-2 border-war-gold/50 rounded-lg max-w-sm w-full p-6 text-center shadow-modal animate-fadein",children:[(0,c.jsx)("p",{className:"text-parchment font-body text-lg mb-5",children:pe}),(0,c.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,c.jsx)("button",{onClick:fe,className:"px-6 py-2.5 font-body text-base rounded border border-parchment-dark/30 text-parchment hover:border-war-gold/50 hover:text-war-gold transition-colors cursor-pointer",style:{minHeight:"44px"},children:"Go Back"}),(0,c.jsx)("button",{onClick:me,className:"px-6 py-2.5 font-display text-base rounded bg-war-gold text-war-ink hover:bg-war-brass transition-colors cursor-pointer font-bold",style:{minHeight:"44px"},children:"Advance"})]})]})})]}),He&&(0,c.jsx)("div",{className:"md:hidden fixed inset-0 bg-black/50 z-30",onClick:()=>ze(!1)}),(0,c.jsxs)("aside",{className:"\n          w-72 md:w-[300px] p-3 space-y-3 border-l border-parchment-dark/8 overflow-y-auto flex-shrink-0\n          bg-war-ink/95 backdrop-blur\n          fixed md:static top-0 right-0 h-full z-40\n          transform transition-transform duration-300 ease-in-out\n          ".concat(He?"translate-x-0":"translate-x-full","\n          md:transform-none\n        "),children:[!N&&(0,c.jsx)(Ca,{currentScore:u[w],playerFaction:w,nationalismMeter:p,nativeResistance:Object.values(l).filter(e=>"native"===e).length,navalDominance:Object.entries(l).filter(e=>{var t;let[n,r]=e;return"british"===r&&(null===(t=O[n])||void 0===t?void 0:t.isNaval)}).length,objectiveBonus:G,round:r}),(0,c.jsx)("div",{"data-tutorial":"scoreboard",children:(0,c.jsx)(Y,{scores:u,playerFaction:w,nationalismMeter:p,nativeResistance:m,navalDominance:f,factionMultiplier:g,playerTerritoryCount:v})}),(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8","data-tutorial":"leaders",children:[(0,c.jsx)("h3",{className:"text-war-gold/90 font-display text-base tracking-wide border-b border-war-gold/15 pb-2 mb-2",children:"Your Leaders"}),We.length>0?We.map(e=>(0,c.jsxs)("div",{className:"mb-2 last:mb-0",children:[(0,c.jsx)("p",{className:"text-parchment/90 text-sm font-body font-bold",children:e.name}),(0,c.jsx)("p",{className:"text-parchment-dark/60 text-sm font-body italic",children:e.ability})]},e.id)):(0,c.jsx)("p",{className:"text-parchment-dark/40 text-sm font-body italic",children:"No leaders in play."})]}),(0,c.jsx)("div",{"data-tutorial":"objectives",children:(0,c.jsx)(ne,{objectives:R})}),(0,c.jsx)(te,{totalAnswered:W.total,totalCorrect:W.correct,onTakeCheck:ce}),(0,c.jsx)(Ta,{history:H}),(0,c.jsx)(Ba,{}),(0,c.jsx)(Oa,{playerFaction:w}),(0,c.jsx)(re,{entries:z,round:r}),(0,c.jsx)(Z,{territoryId:h,territoryOwners:l,troops:d})]})]}),k&&(0,c.jsx)(X,{battle:x,onClose:se}),D&&(0,c.jsx)(ee,{question:M,onAnswer:le,questionNumber:W.total+1,gameMode:n}),we&&(0,c.jsx)(Aa,{actionType:we.type,actionData:we,onConfirm:"placement"===we.type?be:xe,onCancel:ke}),Te&&(0,c.jsx)(Sa,{stepData:Se,currentStep:Ne,totalSteps:Ce,onNext:Ae,onPrev:je,onSkip:Ee,gameMode:n}),N&&(0,c.jsx)(_a,{playerName:K,classPeriod:V,playerFaction:w,finalScore:j,scores:u,nationalismMeter:p,objectiveBonus:G,factionMultiplier:g,nativeResistance:m,navalDominance:f,playerObjectives:R,journalEntries:z,knowledgeCheckResults:W,battleStats:F,playerTerritoryCount:v,round:r,gameOverReason:C,gameOverWinner:A,territoryOwners:l,difficulty:E,sessionId:Me,classId:De,onPlayAgain:Ie})]})}const Ya=[{id:"qg1",section:1,question:"What was impressment?",simpleQuestion:'What did "impressment" mean?',answers:["Forcing American sailors to serve in the British Navy","A tax Britain placed on American goods","A treaty between Britain and France","A type of naval battle formation"],correctIndex:0,explanation:"Impressment was the British practice of stopping American ships and forcing sailors to serve in the Royal Navy. Britain claimed the right to take anyone they considered a British subject, and thousands of American sailors were taken this way.",simpleExplanation:"Impressment means the British grabbed American sailors from their ships and made them work on British ships. This happened to thousands of Americans and made people very angry."},{id:"qg2",section:2,question:"Why was the congressional vote to declare war so close?",simpleQuestion:"Why did so many people in Congress vote against the war?",answers:["Most Americans did not know who Britain was","The country was divided \u2014 New England merchants depended on trade with Britain","Congress had not yet been formed in 1812","The President vetoed the declaration of war"],correctIndex:1,explanation:"The war vote (79-49 in the House, 19-13 in the Senate) was the closest in American history. New England merchants opposed the war because they profited from trade with Britain, while the South and West supported it.",simpleExplanation:"Many people in New England did not want war because they made money trading with Britain. People in the South and West wanted war because they were angry about impressment and wanted more land."},{id:"qg3",section:3,question:'Why was the USS Constitution nicknamed "Old Ironsides"?',simpleQuestion:'Why did people call the USS Constitution "Old Ironsides"?',answers:["It was built entirely from iron","Its captain was named Ironsides","British cannonballs bounced off its thick oak hull","It was the oldest ship in the American fleet"],correctIndex:2,explanation:'During its battle with HMS Guerriere, British cannonballs appeared to bounce off the Constitution\'s thick live-oak hull. Sailors shouted "Huzza! Her sides are made of iron!" and the nickname stuck.',simpleExplanation:'When British cannonballs bounced right off the ship\'s thick wooden walls, people started calling it "Old Ironsides" because it seemed like the ship was made of iron.'},{id:"qg4",section:4,question:"What was Tecumseh trying to build?",simpleQuestion:"What was Tecumseh's big plan?",answers:["A confederacy of Native tribes to resist American expansion","A new capital city for the United States","A fleet of warships on the Great Lakes","A trade agreement with France"],correctIndex:0,explanation:"Tecumseh, a Shawnee leader, traveled thousands of miles to unite Native tribes into a single confederacy strong enough to stop American settlers from taking their lands. He allied with Britain because they promised to help create an independent Native state.",simpleExplanation:"Tecumseh wanted to bring all the Native tribes together into one big group. Together they would be strong enough to stop Americans from taking their land."},{id:"qg5",section:5,question:"Why was the Battle of Lake Erie a turning point in the war?",simpleQuestion:"Why was winning the battle on Lake Erie so important?",answers:["It was the first time the British surrendered to Americans","The battle destroyed all British ships in North America","It led directly to the signing of the peace treaty","American control of the lake cut off British supply lines to Detroit"],correctIndex:3,explanation:"Perry's victory gave America control of Lake Erie, which cut off British supply routes to Detroit and the entire western frontier. This forced the British to retreat into Canada, where Tecumseh was killed at the Battle of the Thames.",simpleExplanation:"When Perry won on Lake Erie, the British could no longer send food and supplies to their soldiers at Detroit. They had to run away into Canada."},{id:"qg6",section:6,question:'What event inspired Francis Scott Key to write "The Star-Spangled Banner"?',simpleQuestion:'What made Francis Scott Key write "The Star-Spangled Banner"?',answers:["Watching Fort McHenry survive a night-long British bombardment","Seeing the White House burn down","Watching the Battle of New Orleans","Hearing about the Treaty of Ghent"],correctIndex:0,explanation:"British ships bombarded Fort McHenry in Baltimore Harbor all night. At dawn, Key saw the American flag still flying over the fort \u2014 proving the defenders had held. He wrote the poem that became the national anthem.",simpleExplanation:"The British fired bombs at Fort McHenry all night long. In the morning, the American flag was still flying. Francis Scott Key saw this and wrote a poem about it that became our national anthem."},{id:"qg7",section:8,question:"What did the Treaty of Ghent actually change?",simpleQuestion:"What changed because of the peace treaty?",answers:["Britain gave Canada to the United States","The United States paid Britain for war damages","Native Americans received a protected homeland","Nothing \u2014 borders returned to pre-war lines (status quo ante bellum)"],correctIndex:3,explanation:'The Treaty of Ghent restored everything to pre-war conditions \u2014 no territory changed hands. "Status quo ante bellum" means "the way things were before the war." Native Americans were the biggest losers \u2014 the treaty said nothing about protecting their lands.',simpleExplanation:'The treaty changed nothing on the map. Everything went back to how it was before the war. No one gained any land. The Latin words "status quo ante bellum" mean "back to how things were."'},{id:"qg8",section:9,question:"How did approximately 4,000 enslaved people seek freedom during the war?",simpleQuestion:"How did about 4,000 enslaved people try to become free during the war?",answers:["They signed petitions and sent them to Congress","They escaped to British lines, where they were offered freedom","President Madison freed them by executive order","They moved to Canada before the war started"],correctIndex:1,explanation:"About 4,000 enslaved people escaped to British ships and camps, where they were offered freedom. Some joined the Colonial Marines and fought against their former enslavers. After the war, Britain resettled most in Nova Scotia and Trinidad.",simpleExplanation:"About 4,000 enslaved people ran away to the British side. The British promised them freedom. Some even joined the British army and fought. After the war, Britain helped them start new lives in Canada and the Caribbean."}],Va={us:"United States",british:"British/Canada",native:"Native Coalition"},Za={};function Ja(t){let{onAuthenticated:n,initialError:r}=t;const[a,i]=(0,e.useState)(""),[o,s]=(0,e.useState)(""),[l,d]=(0,e.useState)("magic"),[h,u]=(0,e.useState)("signin"),[p,m]=(0,e.useState)(!1),[f,g]=(0,e.useState)(r||""),[y,w]=(0,e.useState)(!1);return y?(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:(0,c.jsxs)("div",{className:"bg-war-navy border border-war-gold/20 rounded-lg p-8 max-w-sm w-full shadow-modal animate-fadein text-center",children:[(0,c.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-1",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"}),(0,c.jsx)("p",{className:"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold",children:"Administration"}),(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"})]}),(0,c.jsx)("h1",{className:"text-war-gold font-display text-2xl mb-4 tracking-wide",children:"Check Your Email"}),(0,c.jsx)("p",{className:"text-parchment/60 font-body text-sm mb-2",children:"signup"===h?"A confirmation email has been sent to:":"A sign-in link has been sent to:"}),(0,c.jsx)("p",{className:"text-war-gold/80 font-body text-sm font-bold mb-4",children:a}),(0,c.jsx)("p",{className:"text-parchment-dark/40 font-body text-xs mb-6",children:"Click the link in the email to sign in. You can close this tab."}),(0,c.jsx)("button",{onClick:()=>{w(!1),g("")},className:"text-parchment-dark/40 text-xs font-body hover:text-parchment/60 transition-colors cursor-pointer",children:"Try again"})]})}):(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:(0,c.jsxs)("div",{className:"bg-war-navy border border-war-gold/20 rounded-lg p-8 max-w-sm w-full shadow-modal animate-fadein",children:[(0,c.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-1",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"}),(0,c.jsx)("p",{className:"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold",children:"Administration"}),(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"})]}),(0,c.jsx)("h1",{className:"text-war-gold font-display text-2xl mb-1 text-center tracking-wide",children:"Teacher Dashboard"}),(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs text-center mb-6 font-body",children:"War of 1812 \u2014 Class Analytics"}),f&&(0,c.jsx)("p",{className:"text-red-400 text-sm text-center mb-3 font-body",children:f}),"magic"===l?(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!a.trim())return;m(!0),g("");const{error:t}=await async function(e){if(!Vr)return{data:null,error:"Supabase not configured"};const{data:t,error:n}=await Vr.auth.signInWithOtp({email:e,options:{emailRedirectTo:"".concat(window.location.origin,"/")}});return{data:t,error:n}}(a.trim());m(!1),t?g("string"===typeof t?t:t.message||"Failed to send link"):w(!0)},children:[(0,c.jsx)("label",{htmlFor:"teacher-email",className:"sr-only",children:"Email"}),(0,c.jsx)("input",{id:"teacher-email",type:"email",value:a,onChange:e=>i(e.target.value),placeholder:"Your school email",className:"w-full px-4 py-3 bg-war-ink/50 border border-parchment-dark/15 rounded text-parchment/80 font-body text-sm placeholder-parchment-dark/30 focus:border-war-gold/40 focus:outline-none mb-4",autoFocus:!0}),(0,c.jsx)("button",{type:"submit",disabled:p||!a.trim(),className:"w-full py-3 font-display text-sm rounded font-bold tracking-wide shadow-copper transition-colors ".concat(p||!a.trim()?"bg-parchment-dark/20 text-parchment-dark/40 cursor-not-allowed":"bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer"),children:p?"Sending...":"Send Magic Link"}),(0,c.jsx)("button",{type:"button",onClick:()=>{d("password"),g("")},className:"block w-full text-center text-parchment-dark/40 text-xs mt-4 hover:text-war-gold/70 transition-colors font-body cursor-pointer",children:"Use password instead"})]}):(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a.trim()&&o)if(m(!0),g(""),"signup"===h){const{error:e}=await async function(e,t){if(!Vr)return{data:null,error:"Supabase not configured"};const{data:n,error:r}=await Vr.auth.signUp({email:e,password:t});return{data:n,error:r}}(a.trim(),o);m(!1),e?g("string"===typeof e?e:e.message||"Sign up failed"):(w(!0),g(""))}else{const{data:e,error:t}=await async function(e,t){if(!Vr)return{data:null,error:"Supabase not configured"};const{data:n,error:r}=await Vr.auth.signInWithPassword({email:e,password:t});return{data:n,error:r}}(a.trim(),o);m(!1),t?g("string"===typeof t?t:t.message||"Sign in failed"):null!==e&&void 0!==e&&e.session&&n(e.session)}},children:[(0,c.jsxs)("div",{className:"flex mb-4 border border-parchment-dark/15 rounded overflow-hidden",children:[(0,c.jsx)("button",{type:"button",onClick:()=>u("signin"),className:"flex-1 py-2 text-xs font-display tracking-wide transition-colors cursor-pointer ".concat("signin"===h?"bg-war-gold/20 text-war-gold border-r border-parchment-dark/15":"text-parchment-dark/40 hover:text-parchment/60 border-r border-parchment-dark/15"),children:"Sign In"}),(0,c.jsx)("button",{type:"button",onClick:()=>u("signup"),className:"flex-1 py-2 text-xs font-display tracking-wide transition-colors cursor-pointer ".concat("signup"===h?"bg-war-gold/20 text-war-gold":"text-parchment-dark/40 hover:text-parchment/60"),children:"Sign Up"})]}),(0,c.jsx)("label",{htmlFor:"teacher-email-pw",className:"sr-only",children:"Email"}),(0,c.jsx)("input",{id:"teacher-email-pw",type:"email",value:a,onChange:e=>i(e.target.value),placeholder:"Your school email",className:"w-full px-4 py-3 bg-war-ink/50 border border-parchment-dark/15 rounded text-parchment/80 font-body text-sm placeholder-parchment-dark/30 focus:border-war-gold/40 focus:outline-none mb-3",autoFocus:!0}),(0,c.jsx)("label",{htmlFor:"teacher-pw",className:"sr-only",children:"Password"}),(0,c.jsx)("input",{id:"teacher-pw",type:"password",value:o,onChange:e=>s(e.target.value),placeholder:"Password",className:"w-full px-4 py-3 bg-war-ink/50 border border-parchment-dark/15 rounded text-parchment/80 font-body text-sm placeholder-parchment-dark/30 focus:border-war-gold/40 focus:outline-none mb-4"}),(0,c.jsx)("button",{type:"submit",disabled:p||!a.trim()||!o,className:"w-full py-3 font-display text-sm rounded font-bold tracking-wide shadow-copper transition-colors ".concat(!p&&a.trim()&&o?"bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer":"bg-parchment-dark/20 text-parchment-dark/40 cursor-not-allowed"),children:p?"Working...":"signup"===h?"Create Account":"Sign In"}),(0,c.jsx)("button",{type:"button",onClick:()=>{d("magic"),g("")},className:"block w-full text-center text-parchment-dark/40 text-xs mt-4 hover:text-war-gold/70 transition-colors font-body cursor-pointer",children:"Use magic link instead"})]}),(0,c.jsx)("a",{href:window.location.pathname,className:"block text-center text-parchment-dark/40 text-xs mt-4 hover:text-war-gold/70 transition-colors font-body",children:"Back to Game"})]})})}function Qa(t){let{userId:n,email:r,onComplete:a}=t;const[i,o]=(0,e.useState)(""),[s,l]=(0,e.useState)(!1),[d,h]=(0,e.useState)("");return(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!i.trim())return;l(!0),h("");const{data:t,error:o}=await async function(e){let{userId:t,displayName:n,email:r}=e;if(!Vr)return{data:null,error:"Supabase not configured"};const{data:a,error:i}=await Vr.from("teachers").insert([{id:t,display_name:n,email:r}]).select().single();return{data:a,error:i}}({userId:n,displayName:i.trim(),email:r});l(!1),o?h("string"===typeof o?o:o.message||"Failed to create profile"):a(t)},className:"bg-war-navy border border-war-gold/20 rounded-lg p-8 max-w-sm w-full shadow-modal animate-fadein",children:[(0,c.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-1",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"}),(0,c.jsx)("p",{className:"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold",children:"Welcome"}),(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"})]}),(0,c.jsx)("h1",{className:"text-war-gold font-display text-2xl mb-1 text-center tracking-wide",children:"Set Up Your Profile"}),(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs text-center mb-6 font-body",children:"This name will be visible to you on the dashboard."}),d&&(0,c.jsx)("p",{className:"text-red-400 text-sm text-center mb-3 font-body",children:d}),(0,c.jsx)("label",{htmlFor:"display-name",className:"sr-only",children:"Display Name"}),(0,c.jsx)("input",{id:"display-name",type:"text",value:i,onChange:e=>o(e.target.value.slice(0,50)),placeholder:"e.g., Mr. B",className:"w-full px-4 py-3 bg-war-ink/50 border border-parchment-dark/15 rounded text-parchment/80 font-body text-sm placeholder-parchment-dark/30 focus:border-war-gold/40 focus:outline-none mb-4",autoFocus:!0}),(0,c.jsx)("button",{type:"submit",disabled:s||!i.trim(),className:"w-full py-3 font-display text-sm rounded font-bold tracking-wide shadow-copper transition-colors ".concat(s||!i.trim()?"bg-parchment-dark/20 text-parchment-dark/40 cursor-not-allowed":"bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer"),children:s?"Saving...":"Continue"})]})})}function $a(t){let{classes:n,teacherId:r,onClassCreated:a}=t;const[i,o]=(0,e.useState)(!1),[s,l]=(0,e.useState)(""),[d,h]=(0,e.useState)(!1),[u,p]=(0,e.useState)(""),[m,f]=(0,e.useState)(null);return(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"text-war-gold/80 font-display text-base tracking-wide",children:"Your Classes"}),(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs font-body mt-0.5",children:"Share codes with students so their data appears here"})]}),!i&&(0,c.jsx)("button",{onClick:()=>o(!0),className:"px-4 py-1.5 bg-war-gold text-war-ink font-display text-xs rounded font-bold hover:bg-war-brass transition-colors cursor-pointer tracking-wide",children:"Create Class"})]}),i&&(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!s.trim())return;h(!0),p("");const{data:t,error:n}=await async function(e){let{teacherId:t,name:n}=e;if(!Vr)return{data:null,error:"Supabase not configured"};for(let a=0;a<3;a++){var r;const e=$r(),{data:a,error:i}=await Vr.from("classes").insert([{teacher_id:t,name:n,code:e}]).select().single();if(!i)return{data:a,error:null};if(null===(r=i.message)||void 0===r||!r.includes("duplicate"))return{data:null,error:i}}return{data:null,error:{message:"Failed to generate unique code"}}}({teacherId:r,name:s.trim()});h(!1),n?p("string"===typeof n?n:n.message||"Failed to create class"):(a(t),l(""),o(!1))},className:"mb-4 flex gap-2 items-end",children:[(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("label",{className:"block text-parchment/60 text-xs uppercase tracking-wider mb-1 font-body font-bold",children:"Class Name"}),(0,c.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value.slice(0,40)),placeholder:"e.g., Period 3",className:"w-full bg-war-ink/50 border border-parchment-dark/15 rounded px-3 py-2 text-parchment/90 placeholder-parchment-dark/30 font-body text-sm focus:border-war-gold/40 focus:outline-none transition-colors",autoFocus:!0})]}),(0,c.jsx)("button",{type:"submit",disabled:d||!s.trim(),className:"px-4 py-2 font-display text-xs rounded font-bold tracking-wide transition-colors ".concat(d||!s.trim()?"bg-parchment-dark/20 text-parchment-dark/40 cursor-not-allowed":"bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer"),children:d?"...":"Create"}),(0,c.jsx)("button",{type:"button",onClick:()=>{o(!1),p("")},className:"px-3 py-2 text-parchment-dark/40 text-xs font-body hover:text-parchment/60 transition-colors cursor-pointer",children:"Cancel"})]}),u&&(0,c.jsx)("p",{className:"text-red-400 text-xs mb-3 font-body",children:u}),0===n.length?(0,c.jsx)("p",{className:"text-parchment-dark/40 italic font-body text-sm",children:"No classes yet. Create one and share the code with your students."}):(0,c.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,c.jsxs)("div",{className:"flex items-center justify-between bg-black/20 rounded px-4 py-3 border border-parchment-dark/8",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-parchment/80 font-body text-sm font-bold",children:e.name}),(0,c.jsxs)("p",{className:"text-parchment-dark/50 font-mono text-xs tracking-widest mt-0.5",children:["Code: ",(0,c.jsx)("span",{className:"text-war-gold/80 font-bold",children:e.code})]})]}),(0,c.jsx)("button",{onClick:()=>(e=>{const t="https://1812.mrbsocialstudies.org?class=".concat(e);navigator.clipboard.writeText(t).then(()=>{f(e),setTimeout(()=>f(null),2e3)}).catch(()=>{})})(e.code),className:"px-3 py-1.5 text-xs border border-parchment-dark/15 text-parchment-dark/50 rounded hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer font-body flex-shrink-0",children:m===e.code?"Copied!":"Copy Link"})]},e.id))})]})}function Xa(t){let{session:n,profile:r,onSignOut:a}=t;const[i,o]=(0,e.useState)(null),[s,l]=(0,e.useState)(!0),[d,h]=(0,e.useState)([]),[u,p]=(0,e.useState)(""),[m,f]=(0,e.useState)([]),[g,y]=(0,e.useState)(null),w=(0,e.useCallback)(async e=>{l(!0);try{const[t,n]=await Promise.all([ea(e),Zr(e)]);o(t.data),f(n.data||[])}catch(t){o(null)}finally{l(!1)}},[]);(0,e.useEffect)(()=>{(async()=>{const{data:e}=await async function(e){if(!Vr)return{data:[],error:"Supabase not configured"};const{data:t,error:n}=await Vr.from("classes").select("*").eq("teacher_id",e).order("created_at",{ascending:!0});return{data:t||[],error:n}}(n.user.id);h(e||[]);const t=(e||[]).map(e=>e.id);await w(t.length>0?t:void 0)})()},[n.user.id,w]);const v={};d.forEach(e=>{v[e.id]=e.name});const b=u?((null===i||void 0===i?void 0:i.allScores)||[]).filter(e=>e.class_id===u):(null===i||void 0===i?void 0:i.allScores)||[],x=u?m.filter(e=>e.class_id===u):m,k=new Set(x.map(e=>e.session_id)),_=Ya.map(e=>{const t=x.filter(t=>t.question_id===e.id),n=t.length,r=t.reduce((e,t)=>e+t.retries,0),a=t.filter(e=>0===e.retries).length;return{id:e.id,question:e.question,totalStudents:n,avgRetries:n>0?r/n:0,firstTryPercent:n>0?Math.round(a/n*100):0,rows:t}}).sort((e,t)=>t.avgRetries-e.avgRetries);return s?(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:(0,c.jsx)("p",{className:"text-parchment/60 font-body text-base italic",children:"Loading dashboard..."})}):i?(0,c.jsxs)("div",{className:"min-h-screen text-parchment",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:[(0,c.jsxs)("header",{className:"bg-war-navy/80 backdrop-blur-sm px-4 md:px-6 py-3 md:py-4 border-b border-war-gold/15 flex items-center justify-between gap-3 sticky top-0 z-10",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("h1",{className:"text-war-gold font-display text-lg md:text-xl tracking-wide",children:["Welcome, ",r.display_name]}),(0,c.jsxs)("p",{className:"text-parchment-dark/40 text-xs font-body",children:["War of 1812 \u2014 ",i.totalGames," games played"]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,c.jsx)("a",{href:window.location.pathname,className:"px-3 md:px-4 py-2 border border-parchment-dark/15 text-parchment-dark/50 rounded hover:border-war-gold/40 hover:text-war-gold transition-colors text-xs font-body cursor-pointer",children:"Back to Game"}),(0,c.jsx)("button",{onClick:async()=>{await async function(){if(!Vr)return{error:"Supabase not configured"};const{error:e}=await Vr.auth.signOut();return{error:e}}(),a()},className:"px-3 md:px-4 py-2 border border-parchment-dark/15 text-parchment-dark/50 rounded hover:border-war-red/40 hover:text-war-red/80 transition-colors text-xs font-body cursor-pointer",children:"Sign Out"})]})]}),(0,c.jsxs)("div",{className:"p-3 md:p-6 max-w-6xl mx-auto space-y-4 md:space-y-6",children:[(0,c.jsx)($a,{classes:d,teacherId:n.user.id,onClassCreated:e=>{h(t=>[...t,e])}}),(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)("h2",{className:"text-war-gold/80 font-display text-base tracking-wide",children:"Game Guide"}),(0,c.jsx)("a",{href:"#guide",className:"text-war-gold/60 hover:text-war-gold text-xs font-body transition-colors",children:"Full Teacher Guide \u2192"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,c.jsxs)("div",{className:"border-l-2 border-war-gold/20 pl-3",children:[(0,c.jsx)("p",{className:"text-parchment/80 text-sm font-body font-bold mb-1",children:"How It Works"}),(0,c.jsx)("p",{className:"text-parchment/50 text-xs font-body leading-relaxed",children:"Students choose a faction, manage territories on an interactive map, and answer knowledge checks while learning about the War of 1812. Games take 30-45 minutes with save/resume support."})]}),(0,c.jsxs)("div",{className:"border-l-2 border-war-copper/20 pl-3",children:[(0,c.jsx)("p",{className:"text-parchment/80 text-sm font-body font-bold mb-1",children:"What Students Learn"}),(0,c.jsx)("p",{className:"text-parchment/50 text-xs font-body leading-relaxed",children:"Causes and events of the war, multiple perspectives (U.S., British, Native), diverse experiences (women, African Americans), geographic reasoning, and connections to later American history."})]}),(0,c.jsxs)("div",{className:"border-l-2 border-parchment-dark/15 pl-3",children:[(0,c.jsx)("p",{className:"text-parchment/80 text-sm font-body font-bold mb-1",children:"Using This Dashboard"}),(0,c.jsx)("p",{className:"text-parchment/50 text-xs font-body leading-relaxed",children:"Create classes and share codes. Monitor quiz scores, compare classes, track faction choices, and export CSV data. Use quiz performance to identify topics needing additional instruction."})]})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-4 text-center border border-parchment-dark/8",children:[(0,c.jsx)("p",{className:"text-3xl font-bold text-war-gold font-display",children:i.totalGames}),(0,c.jsx)("p",{className:"text-xs text-parchment-dark/40 font-body",children:"Total Games"})]}),(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-4 text-center border border-parchment-dark/8",children:[(0,c.jsx)("p",{className:"text-3xl font-bold text-parchment/80 font-display",children:i.totalGames>0?Math.round(i.allScores.reduce((e,t)=>e+t.final_score,0)/i.totalGames):0}),(0,c.jsx)("p",{className:"text-xs text-parchment-dark/40 font-body",children:"Avg Score"})]}),(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-4 text-center border border-parchment-dark/8",children:[(0,c.jsxs)("p",{className:"text-3xl font-bold text-green-400 font-display",children:[i.allScores.filter(e=>e.knowledge_total>0).length>0?Math.round(i.allScores.filter(e=>e.knowledge_total>0).reduce((e,t)=>e+t.knowledge_correct/t.knowledge_total*100,0)/i.allScores.filter(e=>e.knowledge_total>0).length):0,"%"]}),(0,c.jsx)("p",{className:"text-xs text-parchment-dark/40 font-body",children:"Avg Quiz Score"})]}),(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-4 text-center border border-parchment-dark/8",children:[(0,c.jsx)("p",{className:"text-3xl font-bold text-parchment/80 font-display",children:d.length}),(0,c.jsx)("p",{className:"text-xs text-parchment-dark/40 font-body",children:"Classes"})]})]}),d.length>0&&(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8",children:[(0,c.jsx)("h2",{className:"text-war-gold/80 font-display text-base mb-4 tracking-wide",children:"By Class"}),(0,c.jsxs)("table",{className:"w-full text-sm font-body",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"text-parchment-dark/40 border-b border-parchment-dark/15 text-left",children:[(0,c.jsx)("th",{className:"py-2 font-normal",children:"Class"}),(0,c.jsx)("th",{className:"py-2 text-right font-normal",children:"Games"}),(0,c.jsx)("th",{className:"py-2 text-right font-normal",children:"Avg Score"}),(0,c.jsx)("th",{className:"py-2 text-right font-normal",children:"Top Score"}),(0,c.jsx)("th",{className:"py-2 text-right font-normal",children:"Avg Quiz %"})]})}),(0,c.jsx)("tbody",{children:(i.classStats||[]).filter(e=>"unassigned"!==e.classId&&v[e.classId]).map(e=>(0,c.jsxs)("tr",{className:"border-b border-parchment-dark/8",children:[(0,c.jsx)("td",{className:"py-2 font-bold text-parchment/80",children:v[e.classId]}),(0,c.jsx)("td",{className:"py-2 text-right text-parchment-dark/60",children:e.count}),(0,c.jsx)("td",{className:"py-2 text-right text-war-gold font-bold font-display",children:e.avgScore}),(0,c.jsx)("td",{className:"py-2 text-right text-parchment-dark/60",children:e.topScore}),(0,c.jsxs)("td",{className:"py-2 text-right text-parchment-dark/60",children:[e.avgQuizPercent,"%"]})]},e.classId))})]})]}),(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8",children:[(0,c.jsx)("h2",{className:"text-war-gold/80 font-display text-base mb-4 tracking-wide",children:"Faction Distribution"}),(0,c.jsx)("div",{className:"grid grid-cols-3 gap-4",children:i.factionStats.map(e=>(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-parchment/80 font-display",children:e.count}),(0,c.jsx)("p",{className:"text-xs text-parchment-dark/50 font-body",children:Va[e.faction]}),(0,c.jsxs)("p",{className:"text-xs text-war-gold/60 font-body",children:["Avg: ",e.avgScore]})]},e.faction))})]}),(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"text-war-gold/80 font-display text-base tracking-wide",children:"Quiz Gate Analytics"}),(0,c.jsxs)("p",{className:"text-parchment-dark/40 text-xs font-body mt-0.5",children:[k.size," students attempted the pre-game quiz"]})]}),x.length>0&&(0,c.jsx)("button",{onClick:()=>{const e=[["Student","Class","Mode","Question","Retries","Date"],...x.map(e=>[e.player_name,v[e.class_id]||e.class_period||"Unassigned",e.game_mode,Za[e.question_id]||e.question_id,e.retries,new Date(e.created_at).toLocaleDateString()])].map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(",")).join("\n"),t=new Blob([e],{type:"text/csv"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="war1812_quiz_gate".concat(u?"_".concat(v[u]||u):"",".csv"),r.click(),URL.revokeObjectURL(n)},className:"px-4 py-1.5 text-xs border border-parchment-dark/15 text-parchment-dark/50 rounded hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer font-body",children:"Export Quiz CSV"})]}),0===x.length?(0,c.jsx)("p",{className:"text-parchment-dark/40 italic font-body text-sm",children:"No quiz gate data yet"}):(0,c.jsx)("div",{className:"space-y-1",children:(0,c.jsxs)("table",{className:"w-full text-sm font-body",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"text-parchment-dark/40 border-b border-parchment-dark/15 text-left",children:[(0,c.jsx)("th",{className:"py-2 font-normal",children:"#"}),(0,c.jsx)("th",{className:"py-2 font-normal",children:"Question"}),(0,c.jsx)("th",{className:"py-2 text-right font-normal",children:"Avg Retries"}),(0,c.jsx)("th",{className:"py-2 text-right font-normal",children:"First-Try %"}),(0,c.jsx)("th",{className:"py-2 text-right font-normal",children:"Students"})]})}),(0,c.jsx)("tbody",{children:_.map((t,n)=>(0,c.jsxs)(e.Fragment,{children:[(0,c.jsxs)("tr",{className:"border-b border-parchment-dark/8 cursor-pointer hover:bg-war-gold/5 transition-colors",onClick:()=>y(g===t.id?null:t.id),children:[(0,c.jsx)("td",{className:"py-2 text-parchment-dark/50",children:n+1}),(0,c.jsx)("td",{className:"py-2 text-parchment/80 max-w-xs",children:(0,c.jsx)("span",{className:"line-clamp-1",children:t.question})}),(0,c.jsx)("td",{className:"py-2 text-right font-bold font-display text-parchment/80",children:t.avgRetries.toFixed(1)}),(0,c.jsx)("td",{className:"py-2 text-right",children:(0,c.jsxs)("span",{className:"font-bold font-display ".concat(t.firstTryPercent>=70?"text-green-400":t.firstTryPercent>=40?"text-yellow-400":"text-red-400"),children:[t.firstTryPercent,"%"]})}),(0,c.jsx)("td",{className:"py-2 text-right text-parchment-dark/60",children:t.totalStudents})]}),g===t.id&&t.rows.length>0&&(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:5,className:"p-0",children:(0,c.jsx)("div",{className:"bg-black/20 border-l-2 border-war-gold/20 ml-4 mb-2 rounded-r",children:(0,c.jsxs)("table",{className:"w-full text-xs font-body",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"text-parchment-dark/40 border-b border-parchment-dark/10",children:[(0,c.jsx)("th",{className:"py-1.5 px-3 font-normal text-left",children:"Student"}),(0,c.jsx)("th",{className:"py-1.5 px-3 font-normal text-left",children:"Class"}),(0,c.jsx)("th",{className:"py-1.5 px-3 font-normal text-left",children:"Mode"}),(0,c.jsx)("th",{className:"py-1.5 px-3 font-normal text-right",children:"Retries"})]})}),(0,c.jsx)("tbody",{children:[...t.rows].sort((e,t)=>t.retries-e.retries).map(e=>(0,c.jsxs)("tr",{className:"border-b border-parchment-dark/5",children:[(0,c.jsx)("td",{className:"py-1.5 px-3 text-parchment/70",children:e.player_name}),(0,c.jsx)("td",{className:"py-1.5 px-3 text-parchment-dark/50",children:v[e.class_id]||e.class_period||"-"}),(0,c.jsx)("td",{className:"py-1.5 px-3 text-parchment-dark/50 capitalize",children:e.game_mode}),(0,c.jsx)("td",{className:"py-1.5 px-3 text-right",children:(0,c.jsx)("span",{className:"font-bold ".concat(0===e.retries?"text-green-400":e.retries<=2?"text-yellow-400":"text-red-400"),children:e.retries})})]},e.session_id))})]})})})})]},t.id))})]})})]}),(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-3",children:[(0,c.jsx)("h2",{className:"text-war-gold/80 font-display text-base tracking-wide",children:"All Scores"}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[d.length>0&&(0,c.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"bg-war-ink/50 text-parchment/80 border border-parchment-dark/15 rounded px-3 py-1.5 text-sm font-body cursor-pointer focus:border-war-gold/40 focus:outline-none",children:[(0,c.jsx)("option",{value:"",children:"All Classes"}),d.map(e=>(0,c.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,c.jsx)("button",{onClick:()=>{const e=[["Name","Class","Faction","Difficulty","Score","Quiz Correct","Quiz Total","Quiz %","Battles Won","Battles Fought","Territories","Date"],...b.map(e=>[e.player_name,v[e.class_id]||e.class_period||"Unassigned",Va[e.faction]||e.faction,e.difficulty||"medium",e.final_score,e.knowledge_correct,e.knowledge_total,e.knowledge_total>0?Math.round(e.knowledge_correct/e.knowledge_total*100):0,e.battles_won,e.battles_fought,e.territories_held,new Date(e.created_at).toLocaleDateString()])].map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(",")).join("\n"),t=new Blob([e],{type:"text/csv"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="war1812_scores".concat(u?"_".concat(v[u]||u):"",".csv"),r.click(),URL.revokeObjectURL(n)},className:"px-4 py-1.5 text-xs border border-parchment-dark/15 text-parchment-dark/50 rounded hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer font-body",children:"Export CSV"})]})]}),0===b.length?(0,c.jsx)("p",{className:"text-parchment-dark/40 italic font-body text-sm",children:"No scores found"}):(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"w-full text-sm font-body",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"text-parchment-dark/40 border-b border-parchment-dark/15 text-left",children:[(0,c.jsx)("th",{className:"py-2 font-normal",children:"Name"}),(0,c.jsx)("th",{className:"py-2 font-normal",children:"Class"}),(0,c.jsx)("th",{className:"py-2 font-normal",children:"Faction"}),(0,c.jsx)("th",{className:"py-2 font-normal",children:"Difficulty"}),(0,c.jsx)("th",{className:"py-2 text-right font-normal",children:"Score"}),(0,c.jsx)("th",{className:"py-2 text-right font-normal",children:"Quiz"}),(0,c.jsx)("th",{className:"py-2 text-right font-normal",children:"Battles"}),(0,c.jsx)("th",{className:"py-2 text-right font-normal",children:"Date"})]})}),(0,c.jsx)("tbody",{children:b.map(e=>(0,c.jsxs)("tr",{className:"border-b border-parchment-dark/8",children:[(0,c.jsx)("td",{className:"py-2 font-bold text-parchment/80",children:e.player_name}),(0,c.jsx)("td",{className:"py-2 text-parchment-dark/60",children:v[e.class_id]||e.class_period||"-"}),(0,c.jsx)("td",{className:"py-2 text-parchment-dark/60",children:Va[e.faction]}),(0,c.jsx)("td",{className:"py-2 text-parchment-dark/60 capitalize",children:e.difficulty||"medium"}),(0,c.jsx)("td",{className:"py-2 text-right text-war-gold font-bold font-display",children:e.final_score}),(0,c.jsx)("td",{className:"py-2 text-right text-parchment-dark/60",children:e.knowledge_total>0?"".concat(e.knowledge_correct,"/").concat(e.knowledge_total," (").concat(Math.round(e.knowledge_correct/e.knowledge_total*100),"%)"):"-"}),(0,c.jsxs)("td",{className:"py-2 text-right text-parchment-dark/60",children:[e.battles_won,"/",e.battles_fought]}),(0,c.jsx)("td",{className:"py-2 text-right text-parchment-dark/40",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})})]})]})]}):(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:(0,c.jsx)("p",{className:"text-red-400/80 font-body text-base",children:"Failed to load data"})})}function ei(){const[t,n]=(0,e.useState)(null),[r,a]=(0,e.useState)(null),[i,o]=(0,e.useState)(!0),[s]=(0,e.useState)(()=>{const e=window.location.hash;if(e.includes("error_description=")){const t=new URLSearchParams(e.replace("#",""));return decodeURIComponent(t.get("error_description")||"").replace(/\+/g," ")}return""});return(0,e.useEffect)(()=>{(async function(){if(!Vr)return{data:null,error:"Supabase not configured"};const{data:e,error:t}=await Vr.auth.getSession();return{data:e,error:t}})().then(e=>{let{data:t}=e;null!==t&&void 0!==t&&t.session?(n(t.session),Qr(t.session.user.id).then(e=>{let{data:t}=e;a(t),o(!1)})):o(!1)});const{data:{subscription:e}}=(t=(e,t)=>{n(t),t?Qr(t.user.id).then(e=>{let{data:t}=e;a(t),o(!1)}):(a(null),o(!1))},Vr?Vr.auth.onAuthStateChange(t):{data:{subscription:{unsubscribe:()=>{}}}});var t;return()=>e.unsubscribe()},[]),Vr?i?(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:(0,c.jsx)("p",{className:"text-parchment/60 font-body text-base italic",children:"Loading..."})}):t?r?(0,c.jsx)(Xa,{session:t,profile:r,onSignOut:()=>{n(null),a(null)}}):(0,c.jsx)(Qa,{userId:t.user.id,email:t.user.email,onComplete:e=>a(e)}):(0,c.jsx)(Ja,{onAuthenticated:e=>n(e),initialError:s}):(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("h1",{className:"text-war-gold font-display text-2xl mb-4 tracking-wide",children:"Teacher Dashboard"}),(0,c.jsx)("p",{className:"text-parchment-dark/50 mb-4 font-body text-sm",children:"Supabase is not configured. Add your credentials to .env to enable the leaderboard."}),(0,c.jsx)("a",{href:window.location.pathname,className:"text-war-gold/70 hover:text-war-gold transition-colors font-body text-sm",children:"Back to Game"})]})})}Ya.forEach(e=>{Za[e.id]=e.question});const ti={overview:{title:"About This Game",content:"War of 1812: Rise of the Nation is a turn-based strategy game designed for 8th-grade U.S. History classrooms. Students choose a faction (United States, British/Canada, or Native Coalition), manage territories on an interactive map, and make strategic decisions while learning about the causes, events, and consequences of the War of 1812. The game integrates knowledge check questions, historical event cards, and primary source materials into gameplay.",targetAudience:"8th-grade U.S. History students",duration:"2-3 class periods (45-90 minutes each)",players:"Individual play against AI opponent"},learningObjectives:{title:"Learning Objectives",objectives:[{id:"lo1",text:"Analyze the political, economic, and social causes of the War of 1812",assessedBy:"Knowledge checks (Rounds 1-4), Learning Mode pre-game content"},{id:"lo2",text:"Evaluate the roles of key military and political leaders from multiple perspectives",assessedBy:"People Profiles, Leader abilities in gameplay, Knowledge checks"},{id:"lo3",text:"Examine the war's impact on diverse groups including women, African Americans, and Native Americans",assessedBy:'Required knowledge checks on diverse perspectives, People Profiles "Other Voices"'},{id:"lo4",text:"Analyze the geographic factors that influenced military strategy and outcomes",assessedBy:"Interactive map gameplay, territory control decisions, Learning Mode geography section"},{id:"lo5",text:"Connect the War of 1812 to broader themes in American history including nationalism, expansion, and Native displacement",assessedBy:'"What Came Next" post-game section, Historian\'s Analysis, Treaty of Ghent knowledge checks'},{id:"lo6",text:"Interpret primary source documents and excerpts in historical context",assessedBy:"People Profiles primary sources, Learning Mode source excerpts, Event cards"}]},standards:{title:"Standards Alignment",framework:"C3 Framework for Social Studies",alignments:[{code:"D2.His.1.6-8",description:"Analyze connections among events and developments in broader historical contexts.",gameConnection:'Event cards show cause-and-effect chains; "What Came Next" connects to later history'},{code:"D2.His.3.6-8",description:"Use questions generated about individuals and groups to analyze why they, and the developments they shaped, are seen as historically significant.",gameConnection:"People Profiles explore significance of leaders and ordinary people alike"},{code:"D2.His.4.6-8",description:"Analyze multiple factors that influenced the perspectives of people during different historical eras.",gameConnection:"Three playable factions offer different perspectives; diverse knowledge checks"},{code:"D2.His.5.6-8",description:"Explain how and why perspectives of people have changed over time.",gameConnection:"Historian's Analysis compares student outcomes to historical reality"},{code:"D2.His.14.6-8",description:"Explain multiple causes and effects of events and developments in the past.",gameConnection:"Learning Mode cause/effect sections; event card consequences"},{code:"D2.Geo.4.6-8",description:"Explain how cultural patterns and economic decisions influence environments and the daily lives of people.",gameConnection:"Territory control, resource management, geographic strategy on the map"}]},classroomSetup:{title:"Classroom Setup",sections:[{heading:"Technology Requirements",items:["Any device with a modern web browser (Chrome, Firefox, Safari, Edge)","Internet connection for initial page load (game runs client-side after loading)","Internet connection for leaderboard features (optional \u2014 game works offline)","Works on Chromebooks, iPads, laptops, and desktop computers","No installation or account creation required"]},{heading:"Before Class",items:["Test the game URL on your school's network to ensure it loads","Decide whether to assign factions or let students choose","Consider having students complete the Learning Mode as homework before gameplay","Create your teacher account at #teacher (sign in with email)","Prepare discussion questions for post-game reflection"]},{heading:"Suggested Grouping Options",items:["Individual play: Each student plays against the AI on their own device","Partner play: Pairs collaborate on strategy decisions together","Faction groups: Assign the same faction to a group, compare strategies afterward","Jigsaw: Each group plays a different faction, then presents their faction's perspective"]}]},howToPlay:{title:"How to Play",phases:[{name:"Event Phase",description:"A historical event card appears, describing a real event from the War of 1812. The event may affect troop counts, territory control, or available resources. Students read the event and consider its historical significance."},{name:"Allocate Phase",description:"Students place reinforcement troops on their territories. Strategic decisions include whether to reinforce frontline territories or build reserves. The number of reinforcements depends on territories controlled and leader bonuses."},{name:"Battle Phase",description:"Students can attack adjacent enemy territories. Combat uses a dice-based system modified by leader abilities, troop numbers, and terrain. Students must weigh risk vs. reward \u2014 attacking with too few troops is risky."},{name:"Maneuver Phase",description:"Students can move troops between their own adjacent territories to reposition for defense or prepare future attacks."},{name:"Score Phase",description:"Points are tallied based on territories controlled. The AI opponent then takes its turn. Knowledge check questions may appear, testing understanding of historical content."}],victoryConditions:[{type:"Domination",description:"Control 75% or more of all territories"},{type:"Elimination",description:"Eliminate all enemy factions from the map"},{type:"Treaty",description:"After 12 rounds, the Treaty of Ghent ends the war. Highest score wins."}]},facilitation:{title:"Facilitation Tips",tips:[{heading:"Introduce the Learning Mode First",content:"Have students complete the Learning Mode before playing. This 5-10 minute overview covers the war's causes, key events, and outcomes. Students who complete it perform significantly better on in-game knowledge checks."},{heading:"Encourage the People Profiles",content:"The People of 1812 gallery (accessible from the main menu) introduces students to historical figures beyond the military leaders. Assign specific profiles as reading before or after gameplay."},{heading:"Debrief Faction Perspectives",content:"After gameplay, ask students to compare experiences across factions. What was different about playing as the Native Coalition vs. the United States? This naturally leads to discussions about perspective and bias."},{heading:"Use Knowledge Checks as Formative Assessment",content:"The Teacher Dashboard shows each student's quiz performance. Use this data to identify content areas that need additional instruction. Required questions ensure all students encounter diverse perspectives."},{heading:'Connect to the "What Came Next" Section',content:'The post-game "What Came Next" section links the war to the Era of Good Feelings, Indian Removal, Manifest Destiny, and other topics in your curriculum. Use this as a bridge to your next unit.'},{heading:"Address Historical Sensitivity",content:"The game deals with topics including slavery, Native displacement, and military violence. Preview the content and prepare students for sensitive material. The game treats these topics with historical accuracy and respect."}]},assessment:{title:"Assessment Ideas",formative:["Monitor Knowledge Check scores on the Teacher Dashboard during gameplay","Circulate during gameplay to ask students about their strategic decisions and historical reasoning","Use exit tickets asking students to name one thing they learned about a group they hadn't considered before","Have students identify one decision they made in the game that paralleled a real historical decision"],summative:['Written reflection: "Choose one faction and explain how the war looked different from their perspective"',"Primary source analysis using quotes from the People Profiles",'Compare/contrast essay: "How did the War of 1812 affect two different groups in American society?"','Create a timeline connecting the war to three events that happened afterward (using "What Came Next" as a starting point)','Debate: "Who really won the War of 1812?" \u2014 students argue from their faction\'s perspective using evidence from gameplay']},discussionQuestions:{title:"Discussion Questions",questions:[{question:'The War of 1812 is sometimes called "the war nobody won." Do you agree? What evidence supports or challenges this claim?',category:"Analysis"},{question:"How did the War of 1812 affect Native American nations differently than the United States or Britain?",category:"Perspective"},{question:"Why do you think the Treaty of Ghent's promise to restore Native lands was never honored? What does this tell us about treaty-making?",category:"Critical Thinking"},{question:"How did women like Dolley Madison, Mary Pickersgill, and Laura Secord contribute to the war effort? Why are their stories often overlooked?",category:"Perspective"},{question:"About 4,000 enslaved people escaped to British lines during the war. What does this tell us about how enslaved people viewed the conflict?",category:"Critical Thinking"},{question:"Andrew Jackson became president because of his war fame, then signed the Indian Removal Act. How do you think his wartime experiences shaped his policies?",category:"Connection"},{question:"The burning of York (Toronto) led to the burning of Washington D.C. How does retaliation escalate conflicts? Can you think of modern examples?",category:"Connection"},{question:"How did geography influence the war's outcome? Why were the Great Lakes, the Chesapeake Bay, and New Orleans so important?",category:"Analysis"}]},faq:{title:"Frequently Asked Questions",items:[{question:"How long does a full game take?",answer:"A complete game (12 rounds) takes 30-45 minutes. Students can save their progress and continue later."},{question:"Can students play against each other?",answer:"Currently, the game is single-player against an AI opponent. Students can compare strategies and scores on the leaderboard."},{question:"Is the game historically accurate?",answer:"Yes. All events, leaders, and knowledge check questions are based on historical research. The game simplifies some aspects for gameplay purposes but maintains historical integrity."},{question:"How do I access the Teacher Dashboard?",answer:"Add #teacher to the game URL and sign in with your email. Create classes and share codes with students. The dashboard shows class-wide analytics, quiz scores, and exportable CSV data."},{question:"Does the game work offline?",answer:"The game itself works after initial load, but the leaderboard and Teacher Dashboard require an internet connection."},{question:"Can I assign specific factions to students?",answer:"Yes. Consider assigning different factions to create diverse perspectives for class discussion. The Native Coalition faction is particularly valuable for teaching perspective-taking."}]}};function ni(t){let{title:n,defaultOpen:r=!1,children:a}=t;const[i,o]=(0,e.useState)(r);return(0,c.jsxs)("div",{className:"border border-parchment-dark/8 rounded-lg overflow-hidden",children:[(0,c.jsxs)("button",{onClick:()=>o(!i),className:"w-full px-5 py-3.5 flex items-center justify-between cursor-pointer hover:bg-white/3 transition-colors",style:{background:"linear-gradient(135deg, rgba(184,115,51,0.08) 0%, rgba(20,30,48,0.4) 100%)"},children:[(0,c.jsx)("h2",{className:"text-war-gold/90 font-display text-base tracking-wide",children:n}),(0,c.jsx)("span",{className:"text-parchment-dark/40 text-sm",children:i?"\u25b2":"\u25bc"})]}),i&&(0,c.jsx)("div",{className:"px-5 py-4 bg-black/5",children:a})]})}function ri(){const e=ti;return(0,c.jsxs)("div",{className:"min-h-screen text-parchment",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:[(0,c.jsxs)("header",{className:"bg-war-navy/80 backdrop-blur-sm px-4 md:px-6 py-3 md:py-4 border-b border-war-gold/15 flex items-center justify-between gap-3 sticky top-0 z-10",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"}),(0,c.jsx)("p",{className:"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold",children:"Educator Resource"}),(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"})]}),(0,c.jsx)("h1",{className:"text-war-gold font-display text-lg md:text-xl tracking-wide",children:"Teacher Guide"}),(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs font-body",children:"War of 1812: Rise of the Nation"})]}),(0,c.jsx)("a",{href:window.location.pathname,className:"px-3 md:px-4 py-2 border border-parchment-dark/15 text-parchment-dark/50 rounded hover:border-war-gold/40 hover:text-war-gold transition-colors text-xs font-body flex-shrink-0 cursor-pointer",children:"Back to Game"})]}),(0,c.jsxs)("div",{className:"p-3 md:p-6 max-w-4xl mx-auto space-y-4",children:[(0,c.jsxs)(ni,{title:e.overview.title,defaultOpen:!0,children:[(0,c.jsx)("p",{className:"text-parchment/70 text-sm font-body leading-relaxed mb-4",children:e.overview.content}),(0,c.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8 text-center",children:[(0,c.jsx)("p",{className:"text-war-gold font-display text-sm font-bold",children:e.overview.targetAudience}),(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs font-body",children:"Audience"})]}),(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8 text-center",children:[(0,c.jsx)("p",{className:"text-war-gold font-display text-sm font-bold",children:e.overview.duration}),(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs font-body",children:"Duration"})]}),(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8 text-center",children:[(0,c.jsx)("p",{className:"text-war-gold font-display text-sm font-bold",children:e.overview.players}),(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs font-body",children:"Mode"})]})]})]}),(0,c.jsx)(ni,{title:e.learningObjectives.title,children:(0,c.jsx)("div",{className:"space-y-3",children:e.learningObjectives.objectives.map(e=>(0,c.jsxs)("div",{className:"border-l-2 border-war-gold/20 pl-3",children:[(0,c.jsx)("p",{className:"text-parchment/80 text-sm font-body",children:e.text}),(0,c.jsxs)("p",{className:"text-parchment-dark/40 text-xs font-body italic mt-0.5",children:["Assessed by: ",e.assessedBy]})]},e.id))})}),(0,c.jsxs)(ni,{title:e.standards.title,children:[(0,c.jsx)("p",{className:"text-war-copper/70 text-xs uppercase tracking-widest font-body font-bold mb-3",children:e.standards.framework}),(0,c.jsx)("div",{className:"space-y-3",children:e.standards.alignments.map(e=>(0,c.jsxs)("div",{className:"bg-war-navy/40 rounded-lg p-3 border border-parchment-dark/8",children:[(0,c.jsx)("p",{className:"text-war-gold/80 text-xs font-bold font-body mb-1",children:e.code}),(0,c.jsx)("p",{className:"text-parchment/70 text-sm font-body",children:e.description}),(0,c.jsxs)("p",{className:"text-parchment-dark/50 text-xs font-body italic mt-1",children:["In-game: ",e.gameConnection]})]},e.code))})]}),(0,c.jsx)(ni,{title:e.classroomSetup.title,children:(0,c.jsx)("div",{className:"space-y-4",children:e.classroomSetup.sections.map(e=>(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-war-copper/80 text-xs uppercase tracking-widest font-body font-bold mb-2",children:e.heading}),(0,c.jsx)("ul",{className:"space-y-1.5",children:e.items.map((e,t)=>(0,c.jsx)("li",{className:"text-parchment/70 text-sm font-body pl-4 relative before:content-['\u2022'] before:absolute before:left-0 before:text-war-gold/40",children:e},t))})]},e.heading))})}),(0,c.jsxs)(ni,{title:e.howToPlay.title,children:[(0,c.jsx)("div",{className:"space-y-3 mb-4",children:e.howToPlay.phases.map((e,t)=>(0,c.jsxs)("div",{className:"flex gap-3",children:[(0,c.jsx)("div",{className:"w-7 h-7 rounded-full bg-war-gold/15 border border-war-gold/25 flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,c.jsx)("span",{className:"text-war-gold text-xs font-display font-bold",children:t+1})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-parchment/90 text-sm font-body font-bold",children:e.name}),(0,c.jsx)("p",{className:"text-parchment/60 text-sm font-body",children:e.description})]})]},e.name))}),(0,c.jsx)("h3",{className:"text-war-copper/80 text-xs uppercase tracking-widest font-body font-bold mb-2",children:"Victory Conditions"}),(0,c.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:e.howToPlay.victoryConditions.map(e=>(0,c.jsxs)("div",{className:"bg-war-navy/40 rounded-lg p-3 border border-parchment-dark/8",children:[(0,c.jsx)("p",{className:"text-war-gold/80 text-sm font-body font-bold",children:e.type}),(0,c.jsx)("p",{className:"text-parchment/60 text-xs font-body",children:e.description})]},e.type))})]}),(0,c.jsx)(ni,{title:e.facilitation.title,children:(0,c.jsx)("div",{className:"space-y-4",children:e.facilitation.tips.map(e=>(0,c.jsxs)("div",{className:"border-l-2 border-war-copper/20 pl-3",children:[(0,c.jsx)("p",{className:"text-parchment/90 text-sm font-body font-bold",children:e.heading}),(0,c.jsx)("p",{className:"text-parchment/60 text-sm font-body mt-0.5",children:e.content})]},e.heading))})}),(0,c.jsxs)(ni,{title:e.assessment.title,children:[(0,c.jsx)("h3",{className:"text-war-copper/80 text-xs uppercase tracking-widest font-body font-bold mb-2",children:"Formative Assessment"}),(0,c.jsx)("ul",{className:"space-y-1.5 mb-4",children:e.assessment.formative.map((e,t)=>(0,c.jsx)("li",{className:"text-parchment/70 text-sm font-body pl-4 relative before:content-['\u2022'] before:absolute before:left-0 before:text-war-gold/40",children:e},t))}),(0,c.jsx)("h3",{className:"text-war-copper/80 text-xs uppercase tracking-widest font-body font-bold mb-2",children:"Summative Assessment"}),(0,c.jsx)("ul",{className:"space-y-1.5",children:e.assessment.summative.map((e,t)=>(0,c.jsx)("li",{className:"text-parchment/70 text-sm font-body pl-4 relative before:content-['\u2022'] before:absolute before:left-0 before:text-war-gold/40",children:e},t))})]}),(0,c.jsx)(ni,{title:e.discussionQuestions.title,children:(0,c.jsx)("div",{className:"space-y-3",children:e.discussionQuestions.questions.map((e,t)=>(0,c.jsx)("div",{className:"bg-war-navy/40 rounded-lg p-3 border border-parchment-dark/8",children:(0,c.jsxs)("div",{className:"flex items-start gap-2",children:[(0,c.jsxs)("span",{className:"text-war-gold/60 text-xs font-body font-bold flex-shrink-0 mt-0.5",children:[t+1,"."]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-parchment/80 text-sm font-body",children:e.question}),(0,c.jsx)("span",{className:"inline-block mt-1 text-war-copper/60 text-[10px] uppercase tracking-widest font-body font-bold",children:e.category})]})]})},t))})}),(0,c.jsx)(ni,{title:e.faq.title,children:(0,c.jsx)("div",{className:"space-y-3",children:e.faq.items.map((e,t)=>(0,c.jsxs)("div",{className:"border-l-2 border-parchment-dark/10 pl-3",children:[(0,c.jsx)("p",{className:"text-parchment/90 text-sm font-body font-bold",children:e.question}),(0,c.jsx)("p",{className:"text-parchment/60 text-sm font-body mt-0.5",children:e.answer})]},t))})})]})]})}const ai=[{id:1,year:"1807-1812",title:"Causes of the War",keyIdea:"The war started because Britain was taking American sailors, blocking trade, and helping Native resistance.",imageUrl:"/images/learning/impressment.jpg",content:"The War of 1812 had three main causes that pushed the United States toward conflict with Britain.\n\n**British Impressment:** British naval ships stopped American vessels at sea and forced American sailors to serve in the Royal Navy. Britain was fighting Napoleon in Europe and desperately needed sailors, so they claimed the right to search American ships and take anyone they considered a British subject. Thousands of American sailors were kidnapped this way.\n\n**Trade Restrictions:** Britain and France were at war, and both sides tried to stop neutral countries like the United States from trading with the enemy. Britain's Orders in Council restricted American trade with Europe, devastating the American economy. President Jefferson tried an Embargo Act in 1807 to avoid war, but it backfired\u2014American merchants suffered more than the British.\n\n**Western Expansion & Native Resistance:** Americans wanted to expand westward into Native territories and blamed the British for supporting Native resistance. Tecumseh, a Shawnee leader, was building a confederacy to defend Native lands. Many Americans believed (correctly) that the British in Canada were supplying weapons to Native warriors.",simpleContent:'The War of 1812 started for three big reasons.\n\nFirst, the British kept taking American sailors. British ships would stop American ships at sea. They grabbed American sailors and forced them to work on British ships. This happened to thousands of Americans.\n\nSecond, Britain blocked American trade. Britain and France were fighting each other. Britain made rules called the "Orders in Council" that stopped America from trading with France. This hurt American businesses badly. President Jefferson tried to stop all trade with other countries. But that plan made things worse for Americans.\n\nThird, Americans wanted to move west. Native Americans already lived on that land. A Shawnee leader named Tecumseh was uniting Native tribes. He wanted to stop Americans from taking their land. The British in Canada gave weapons to Native warriors. Americans were angry about this.',keyTerms:[{term:"Impressment",definition:"Forcing sailors to serve in the navy against their will",simpleDefinition:"Taking American sailors and making them work on British ships against their will"},{term:"War Hawks",definition:"Young congressmen from the West and South who pushed for war with Britain",simpleDefinition:"Young leaders in Congress who really wanted to go to war with Britain"},{term:"Embargo Act",definition:"Jefferson's failed attempt to avoid war by banning all foreign trade",simpleDefinition:"A law that stopped America from trading with other countries. It did not work."}],didYouKnow:"The War Hawks included future leaders like Henry Clay and John C. Calhoun. They were young, aggressive, and eager to defend American honor\u2014even if it meant war with the world's most powerful empire.",causeEffect:{cause:"Britain needed sailors for its war against Napoleon and restricted American trade",effect:"Americans felt their sovereignty was being violated, leading to demands for war",thinkAbout:"Why might a young nation be especially sensitive about its rights being ignored by a former colonial power?"},geographicContext:{description:"The Atlantic Ocean was the highway of global trade. British naval dominance meant they could stop American ships anywhere at sea. Meanwhile, the frontier between American settlements and Native territories stretched from the Great Lakes to the Gulf of Mexico.",keyLocations:["Atlantic Ocean","Great Lakes frontier","Gulf of Mexico"]},primarySourceExcerpt:{quote:"We shall drive the British from our Continent \u2014 they will no longer have an opportunity of intriguing with our Indian neighbors.",attribution:"Andrew Jackson, letter to William Henry Harrison, 1812",analysisPrompt:"What does this quote reveal about American motivations for the war? Who besides the British is Jackson concerned about?"},activity:{type:"sequencing",instruction:"Put these events in the correct order:",items:["British begin impressing American sailors (1803)","Chesapeake-Leopard Affair shocks Americans (1807)","Jefferson signs the Embargo Act (1807)","Embargo Act repealed \u2014 replaced by weaker measures (1809)","War Hawks elected to Congress (1810)","U.S. declares war on Britain (1812)"]}},{id:2,year:"June 18, 1812",title:"Declaration of War",keyIdea:"President Madison asked Congress to declare war, but the country was deeply divided about it.",content:"On June 18, 1812, President James Madison asked Congress to declare war on Great Britain. The vote was close\u201479-49 in the House and 19-13 in the Senate. This was the closest war vote in American history.\n\n**A Divided Nation:** The country was split. New England merchants opposed the war because they profited from trade with Britain. The South and West supported it, angry about impressment and eager to conquer Canada and Native lands.\n\n**Madison's Reluctant Decision:** Madison didn't want war. He was a scholarly, peaceful man\u2014totally unlike a war president. But the War Hawks in Congress, British impressment, and pressure to defend American honor left him little choice. In his war message, he listed British violations of American rights: impressment, trade restrictions, and support for Native attacks on the frontier.\n\n**Poor Timing:** Ironically, Britain had actually repealed the Orders in Council (trade restrictions) two days before the U.S. declared war. But news traveled slowly across the Atlantic\u2014by the time Madison learned this, the war had already begun.",simpleContent:"On June 18, 1812, President James Madison asked Congress to go to war with Britain. The vote was very close. Many people said yes. Many people said no.\n\nThe country was split in two. Merchants in New England did not want war. They made money trading with Britain. People in the South and West wanted war. They were angry about the British taking sailors and helping Native warriors.\n\nMadison did not really want war either. He was a quiet, peaceful man. But he felt he had no choice. Britain kept taking American sailors. Britain kept blocking American trade. Britain kept helping Native attacks on the frontier.\n\nHere is something surprising. Britain actually ended its trade rules two days before America declared war. But news traveled slowly across the ocean. By the time Madison found out, the war had already started.",keyTerms:[{term:"James Madison",definition:"4th U.S. President, led the country during the War of 1812",simpleDefinition:"The 4th President of the United States. He led America during the War of 1812."},{term:"War Hawks",definition:"Pro-war congressmen like Henry Clay who pushed for conflict with Britain",simpleDefinition:"Members of Congress who pushed hard for war with Britain"}],didYouKnow:"Madison was the smallest president in U.S. history\u2014only 5'4\" and about 100 pounds. His wife Dolley was far more popular and charismatic, often serving as the face of his administration.",causeEffect:{cause:"War Hawks pressured Madison, and British violations of American rights continued",effect:"The closest war vote in U.S. history split the nation along regional lines",thinkAbout:"What does a close vote tell us about how divided the country was? How might this division affect the war effort?"},geographicContext:{description:"The war vote revealed America's regional divide: the South and West supported war (they wanted frontier expansion and freedom from British interference), while New England opposed it (they depended on trade with Britain).",keyLocations:["New England (opposed)","South and West (supported)","Washington D.C."]},primarySourceExcerpt:{quote:"Our flag has been insulted, our commerce plundered, our citizens impressed... We must now oppose force to force.",attribution:"Paraphrased from Madison's War Message to Congress, June 1, 1812",analysisPrompt:"Madison lists several grievances. Which one do you think was most important to ordinary Americans? Why?"},activity:null},{id:3,year:"1812",title:"Early Battles",keyIdea:"America lost on land in Canada but won a famous sea battle with the USS Constitution.",content:"The first year of the war was a disaster for the United States.\n\n**Hull's Surrender at Detroit (August 1812):** General William Hull invaded Canada but quickly retreated. British General Isaac Brock and Tecumseh surrounded Detroit and convinced Hull that thousands of Native warriors would massacre the American garrison. Hull surrendered without firing a shot\u2014the most humiliating American defeat of the war.\n\n**USS Constitution vs. HMS Guerriere (August 1812):** Not all news was bad. The American frigate USS Constitution defeated the British warship HMS Guerriere in a stunning naval victory. British cannonballs bounced off the Constitution's thick oak hull, earning it the nickname \"Old Ironsides.\" This victory shocked the world and proved American ships could fight.\n\n**Battle of Queenston Heights (October 1812):** Americans tried to invade Canada again, crossing the Niagara River. British General Isaac Brock was killed leading a charge to push them back. Brock became a Canadian hero, and the invasion failed miserably when New York militia refused to cross into Canada.",simpleContent:'The first year of the war went very badly for America.\n\nGeneral William Hull led American troops into Canada. But he got scared and turned back. British General Isaac Brock and the Shawnee leader Tecumseh surrounded Detroit. They tricked Hull into thinking a huge army was coming. Hull gave up Detroit without even fighting. It was a huge embarrassment.\n\nBut there was some good news at sea. The American ship USS Constitution fought the British ship HMS Guerriere. British cannonballs bounced right off the Constitution\'s thick wooden walls. The Americans won the battle. People started calling the ship "Old Ironsides." This showed that American ships could beat British ships.\n\nAmericans tried to invade Canada again at the Niagara River. British General Brock was killed fighting back. He became a hero in Canada. The American invasion failed badly.',keyTerms:[{term:"Isaac Brock",definition:"British general who defended Canada, killed at Queenston Heights",simpleDefinition:"A British general who protected Canada. He died fighting at Queenston Heights."},{term:"USS Constitution",definition:'American warship nicknamed "Old Ironsides" for its thick hull',simpleDefinition:'A famous American warship. Cannonballs bounced off it, so people called it "Old Ironsides."'},{term:"William Hull",definition:"American general who surrendered Detroit without a fight",simpleDefinition:"An American general who gave up Detroit without fighting"}],didYouKnow:"The USS Constitution is still a commissioned U.S. Navy warship today\u2014the oldest floating naval vessel in the world. You can visit it in Boston Harbor!",causeEffect:{cause:"The U.S. invaded Canada with poorly trained militia and incompetent leadership",effect:"Humiliating defeats at Detroit and Queenston Heights shattered American confidence",thinkAbout:"Why might overconfidence lead to military failure? How did the Americans underestimate both the British and their Native allies?"},geographicContext:{description:"The Great Lakes and St. Lawrence River formed the border between the U.S. and British Canada. Control of these waterways determined who could move troops and supplies. Detroit sat at the strategic junction of Lake Erie and the Michigan frontier.",keyLocations:["Detroit","Niagara River","Lake Erie","Upper Canada (Ontario)"]},primarySourceExcerpt:{quote:"The British force is composed of a body of regulars, militia, and Indians... I have deemed it a duty to avoid the risk of a general engagement.",attribution:"General William Hull, explaining his surrender of Detroit, August 1812",analysisPrompt:"Hull says he avoided battle to protect lives. Do you think this was wise leadership or cowardice? What information might have changed his decision?"},activity:null},{id:4,year:"1813",title:"Native American Involvement",keyIdea:"Tecumseh united Native tribes and allied with Britain to protect Native lands from American settlers.",content:"Native Americans played a crucial role in the War of 1812, fighting to defend their lands from American expansion.\n\n**Tecumseh's Vision:** Tecumseh, a Shawnee chief, dreamed of uniting all Native tribes into a confederacy strong enough to stop American settlers from taking their lands. He traveled thousands of miles recruiting warriors from the Great Lakes to the Gulf of Mexico. His brother Tenskwatawa, the \"Prophet,\" provided spiritual leadership. Together they built Prophetstown in Indiana as the capital of their movement.\n\n**Alliance with Britain:** Tecumseh allied with the British because he knew they were Native Americans' only hope of stopping U.S. expansion. The British promised to create an independent Native state in the Northwest if they won. Tecumseh's warriors were crucial to early British victories, especially at Detroit.\n\n**Creek War in the South (1813-1814):** In Alabama, a civil war broke out among the Creek Nation. The Red Sticks (led by William Weatherford/Red Eagle) allied with the British and fought to resist American influence. The Creek War became part of the larger War of 1812, with Andrew Jackson leading American forces against the Red Sticks.",simpleContent:'Native Americans played a big part in the War of 1812. They fought to keep their lands safe from American settlers.\n\nTecumseh was a Shawnee leader with a big dream. He wanted to unite all the Native tribes into one group. Together they could stop Americans from taking their land. He traveled thousands of miles to ask other tribes to join him. His brother Tenskwatawa was a spiritual leader called "the Prophet." They built a town called Prophetstown in Indiana.\n\nTecumseh joined forces with the British. He knew the British were the only ones who could help stop American settlers. The British promised to create a Native homeland if they won the war. Tecumseh\'s warriors helped the British win early battles, like the one at Detroit.\n\nIn Alabama, a group of Creek warriors called the Red Sticks also joined the British. They fought to keep Americans out of their lands. Andrew Jackson led American soldiers against them.',keyTerms:[{term:"Tecumseh",definition:"Shawnee leader who built a confederacy to resist American expansion",simpleDefinition:"A Shawnee leader who tried to unite Native tribes to protect their lands"},{term:"Red Sticks",definition:"Creek warriors who fought alongside the British in the South",simpleDefinition:"Creek warriors in Alabama who fought with the British against Americans"},{term:"Prophetstown",definition:"Tecumseh's capital for the Native confederacy in Indiana",simpleDefinition:"The town Tecumseh built in Indiana as the center of his Native alliance"}],didYouKnow:"Tecumseh was one of the greatest Native American leaders in history. Even his enemies admired him. When he died in 1813, the Native confederacy collapsed\u2014his leadership was irreplaceable.",causeEffect:{cause:"American settlers pushed into Native lands while the British offered military alliance",effect:"Tecumseh built a confederacy and allied with Britain, creating a three-sided war",thinkAbout:"Why would Native nations choose to ally with Britain rather than remain neutral? What were they risking?"},geographicContext:{description:"Native territories covered the vast interior of the continent from the Great Lakes to the Gulf of Mexico. The frontier was not a line but a contested zone where American settlements pushed into Native homelands.",keyLocations:["Prophetstown (Indiana)","Creek Nation (Alabama)","Great Lakes region","Mississippi frontier"]},primarySourceExcerpt:{quote:"Sell a country! Why not sell the air, the clouds and the great sea, as well as the earth?",attribution:"Tecumseh, speaking to Governor Harrison at Vincennes, 1810",analysisPrompt:"Tecumseh compares selling land to selling air and clouds. What does this reveal about how Native peoples viewed their relationship to the land compared to Americans?"},activity:{type:"matching",instruction:"Match each leader to their role:",items:["Tecumseh \u2192 Built a pan-Native confederacy to resist American expansion",'Tenskwatawa \u2192 Spiritual leader known as "The Prophet" who inspired cultural renewal',"William Weatherford \u2192 Led the Red Stick Creek faction in the Southern frontier","William Henry Harrison \u2192 American governor who fought Native resistance at Tippecanoe"]}},{id:5,year:"1813",title:"Turning Points",keyIdea:"America won control of Lake Erie and Tecumseh was killed, ending the Native alliance.",content:"1813 brought major turning points that shifted the war's momentum.\n\n**Battle of Lake Erie (September 1813):** Commodore Oliver Hazard Perry built a fleet on Lake Erie and challenged the British for control of the Great Lakes. After a brutal battle, Perry sent his famous message: \"We have met the enemy and they are ours.\" American control of Lake Erie forced the British to abandon Detroit.\n\n**Battle of the Thames (October 1813):** General William Henry Harrison pursued the retreating British into Canada. At the Battle of the Thames, American forces defeated the British and killed Tecumseh. Tecumseh's death shattered the Native confederacy\u2014without him, the alliance collapsed. This was the beginning of the end for Native resistance in the Northwest.\n\n**Burning of York (April 1813):** Americans captured and burned York (now Toronto), the capital of Upper Canada. They torched the parliament building and looted the town. The British were furious\u2014and later retaliated by burning Washington, D.C.",simpleContent:'Big things happened in 1813 that changed the war.\n\nCommodore Oliver Hazard Perry built a fleet of ships on Lake Erie. He fought the British for control of the lake. After a tough battle, Perry won. He sent a famous message: "We have met the enemy and they are ours." Now America controlled Lake Erie. The British had to leave Detroit.\n\nGeneral William Henry Harrison chased the British into Canada. At the Battle of the Thames, Americans beat the British army. Tecumseh was killed in this battle. Without Tecumseh, the Native alliance fell apart. No one else could hold the tribes together.\n\nEarlier that year, Americans attacked York. York is now called Toronto. Americans burned the government buildings there. The British were very angry about this. Later they got revenge by burning Washington, D.C.',keyTerms:[{term:"Oliver Hazard Perry",definition:"U.S. naval commander who won the Battle of Lake Erie",simpleDefinition:"The American ship commander who won the big battle on Lake Erie"},{term:"William Henry Harrison",definition:"American general who defeated Tecumseh at the Thames",simpleDefinition:"The American general who beat the British and Tecumseh at the Battle of the Thames"},{term:"Battle of the Thames",definition:"Victory where Tecumseh was killed, ending Native confederacy",simpleDefinition:"A battle in Canada where Americans won and Tecumseh was killed"}],didYouKnow:'Perry\'s famous message "We have met the enemy and they are ours" became one of the most quoted lines in American military history. He sent it on the back of an old envelope during the battle!',causeEffect:{cause:"Perry's victory on Lake Erie cut British supply lines and forced them to abandon Detroit",effect:"Harrison pursued the retreating British, and Tecumseh was killed at the Thames \u2014 ending the Native confederacy",thinkAbout:"How did control of the Great Lakes determine who controlled the frontier? Why was naval power so important on inland waters?"},geographicContext:{description:"Lake Erie was the key to the entire Great Lakes theater. Whoever controlled the lake controlled supply routes to Detroit and the Western frontier. Perry built his fleet at Presque Isle (Erie, Pennsylvania) using timber from local forests.",keyLocations:["Lake Erie","Presque Isle (Erie, PA)","Detroit","Thames River (Ontario)"]},primarySourceExcerpt:{quote:"We have met the enemy and they are ours: two ships, two brigs, one schooner and one sloop.",attribution:"Oliver Hazard Perry, message to William Henry Harrison, September 10, 1813",analysisPrompt:"Perry's message is famously short and direct. Why do you think this brief message became one of the most famous quotes in American military history?"},activity:null},{id:6,year:"1814",title:"British Offensive",keyIdea:"Britain burned Washington D.C. but failed to take Baltimore, inspiring the national anthem.",content:'In 1814, Britain defeated Napoleon in Europe and sent veteran troops to crush the United States.\n\n**Burning of Washington, D.C. (August 1814):** British forces invaded the Chesapeake Bay and marched on Washington. American militia fled in panic at the Battle of Bladensburg. The British entered the capital and burned the White House, the Capitol, and other government buildings. First Lady Dolley Madison barely escaped, saving a portrait of George Washington before the British torched her home. It was the only time in U.S. history that the capital has been captured.\n\n**Battle of Baltimore (September 1814):** After burning Washington, the British attacked Baltimore. Fort McHenry guarded the harbor. British ships bombarded the fort all night, but the Americans held. At dawn, the American flag still flew. Watching the battle, Francis Scott Key wrote "The Star-Spangled Banner," which later became the national anthem.\n\n**Battle of Plattsburgh (September 1814):** British forces invaded New York from Canada with 11,000 troops. At Plattsburgh on Lake Champlain, American naval and land forces defeated them. This victory convinced Britain that conquering the United States would be too costly.',simpleContent:"In 1814, Britain beat Napoleon in Europe. Now Britain could send its best soldiers to fight America.\n\nBritish troops invaded the area around Washington, D.C. American soldiers ran away in panic. The British marched into the capital. They burned the White House, the Capitol building, and other buildings. First Lady Dolley Madison escaped just in time. She saved a famous painting of George Washington before the British set the White House on fire. This was the only time an enemy captured America's capital.\n\nNext, the British attacked Baltimore. Fort McHenry guarded the harbor. British ships fired bombs at the fort all night long. But the Americans held on. In the morning, the American flag was still flying. A man named Francis Scott Key watched the whole battle. He wrote a poem about it called \"The Star-Spangled Banner.\" It later became America's national anthem.\n\nThe British also tried to invade from Canada with 11,000 soldiers. Americans stopped them at Plattsburgh. Britain started to think the war was too hard to win.",keyTerms:[{term:"Dolley Madison",definition:"First Lady who saved George Washington's portrait from the burning White House",simpleDefinition:"The President's wife who saved a painting of George Washington when the British burned the White House"},{term:"Fort McHenry",definition:'Fort that defended Baltimore, inspiring "The Star-Spangled Banner"',simpleDefinition:'The fort that protected Baltimore. Its brave defense inspired "The Star-Spangled Banner."'},{term:"Francis Scott Key",definition:'Lawyer who wrote "The Star-Spangled Banner" after watching Fort McHenry\'s defense',simpleDefinition:'The man who wrote "The Star-Spangled Banner" after watching the battle at Fort McHenry'}],didYouKnow:'"The Star-Spangled Banner" didn\'t become the official national anthem until 1931\u2014more than 100 years after it was written!',causeEffect:{cause:"Napoleon's defeat freed thousands of experienced British troops for service in America",effect:"Britain launched major offensives \u2014 burning Washington but failing to take Baltimore or invade from Canada",thinkAbout:"How were the Napoleonic Wars and the War of 1812 connected? How did events in Europe change the war in America?"},geographicContext:{description:"The Chesapeake Bay gave the British navy direct access to Washington D.C. and Baltimore. The bay's many rivers and inlets made it impossible for the small American navy to defend everywhere. Fort McHenry sat at the narrow entrance to Baltimore Harbor.",keyLocations:["Chesapeake Bay","Washington D.C.","Baltimore Harbor","Fort McHenry","Plattsburgh (Lake Champlain)"]},primarySourceExcerpt:{quote:"Our country is the better for its trials. It has been taught a lesson which no experience could have anticipated.",attribution:"Niles' Weekly Register editorial after the burning of Washington, 1814",analysisPrompt:'The editorial says the country is "better for its trials." How might defeat and destruction actually strengthen national unity? Can you think of other examples in history?'},activity:null},{id:7,year:"January 8, 1815",title:"Battle of New Orleans",keyIdea:"Andrew Jackson won the Battle of New Orleans, not knowing the war was already over.",content:"The Battle of New Orleans was the greatest American victory of the war\u2014fought after the peace treaty was signed.\n\n**Andrew Jackson's Preparation:** General Andrew Jackson gathered a diverse army in New Orleans: regular soldiers, Kentucky and Tennessee militia, free Black troops, Choctaw warriors, and even pirates led by Jean Lafitte. He built defensive earthworks and positioned his forces brilliantly.\n\n**The British Attack:** On January 8, 1815, British General Edward Pakenham led 8,000 veteran troops in a frontal assault. It was a slaughter. American riflemen and artillery mowed down the British in rows. Pakenham was killed, and the British suffered over 2,000 casualties. American losses: 13 killed, 39 wounded.\n\n**The Irony:** The Treaty of Ghent had been signed on December 24, 1814\u2014two weeks before the battle. But news traveled slowly. Neither side knew the war was over. The victory made Andrew Jackson a national hero and launched his political career. He later became the 7th president.",simpleContent:"The Battle of New Orleans was the biggest American win of the whole war.\n\nAndrew Jackson was a militia leader and politician from Tennessee. He had no formal military training but was tough and determined. He gathered all kinds of fighters in New Orleans. He had regular soldiers, militia from Kentucky and Tennessee, free Black troops, Choctaw warriors, and even pirates led by Jean Lafitte. Jackson built dirt walls and got his army ready.\n\nOn January 8, 1815, the British general sent 8,000 soldiers to attack head-on. It was a terrible mistake. American riflemen and cannons cut down the British soldiers. The British general was killed. Over 2,000 British soldiers were hurt or killed. Only 13 Americans died.\n\nHere is the surprising part. A peace treaty had been signed two weeks earlier on December 24, 1814. But nobody in New Orleans knew about it yet. News traveled very slowly back then. The battle made Andrew Jackson a hero. He later became the 7th President.",keyTerms:[{term:"Andrew Jackson",definition:"General who won the Battle of New Orleans, later became president",simpleDefinition:"The general who won the Battle of New Orleans. He later became the 7th President."},{term:"Jean Lafitte",definition:"Pirate who fought alongside Americans at New Orleans",simpleDefinition:"A pirate who helped the Americans fight at the Battle of New Orleans"}],didYouKnow:'The Battle of New Orleans made Jackson so popular that he won the presidency in 1828. His nickname "Old Hickory" came from his toughness\u2014soldiers said he was as hard as hickory wood.',causeEffect:{cause:"Jackson assembled a diverse army and built strong defensive positions at New Orleans",effect:"The British frontal assault was a catastrophe \u2014 2,000+ casualties vs. 71 American \u2014 making Jackson a national hero",thinkAbout:"The battle was fought after the peace treaty was signed. Does that make the sacrifice meaningless, or did the battle still matter? How did it change American politics?"},geographicContext:{description:"New Orleans controlled the mouth of the Mississippi River \u2014 America's economic lifeline. Whoever held New Orleans controlled trade for the entire interior of the continent. Jackson used the swampy terrain to funnel the British into a killing zone.",keyLocations:["New Orleans","Mississippi River","Gulf of Mexico","Chalmette Plantation"]},primarySourceExcerpt:{quote:"I heard the bullets whistling all around me, and saw my brave men falling on every side. The field was covered with dead and wounded.",attribution:"British officer's account of the Battle of New Orleans, January 8, 1815",analysisPrompt:"This is written from the British perspective. How would this same battle be described by someone on the American side? How does perspective change how we tell the story?"},activity:{type:"sequencing",instruction:"Put these events in the correct order:",items:["Jackson recruits free Black soldiers, Choctaw warriors, and pirates","Treaty of Ghent signed in Belgium (December 24, 1814)","British launch frontal assault on American defenses (January 8, 1815)","News of the peace treaty reaches New Orleans (February 1815)","Jackson is celebrated as a national hero"]}},{id:8,year:"1814-1815",title:"Treaty of Ghent & Legacy",keyIdea:"The treaty changed no borders, but the war changed how Americans felt about their country.",content:"The War of 1812 ended with the Treaty of Ghent, signed on December 24, 1814, in Belgium.\n\n**Status Quo Ante Bellum:** The treaty restored everything to how it was before the war. No territory changed hands. Britain didn't mention impressment or trade restrictions (because Napoleon was defeated, these issues no longer mattered). Native Americans, who had fought alongside Britain, were abandoned\u2014the treaty said nothing about protecting their lands.\n\n**Who Won?** Both sides claimed victory. Americans celebrated surviving against the British Empire. Canadians were proud they'd defended their country from invasion. The British were just glad to end a costly, unnecessary war. Native Americans were the real losers\u2014they lost their British allies and faced unstoppable American expansion westward.\n\n**Long-term Effects:**\n- **American Nationalism:** The war created a surge of American pride and unity called the \"Era of Good Feelings.\" The Federalist Party (which opposed the war) collapsed.\n- **Manufacturing Boom:** The war forced America to build its own factories since British goods were cut off. This started American industrialization.\n- **Native Displacement:** Without British support, Native tribes couldn't resist American expansion. Westward settlement accelerated.\n- **Canadian Identity:** Canadians saw the war as their defining moment\u2014the successful defense against American conquest helped create Canadian national identity.",simpleContent:'The War of 1812 ended with a peace deal called the Treaty of Ghent. Both sides signed it on December 24, 1814, in Belgium.\n\nThings went back to how they were before the war. No one gained any new land. Britain stopped talking about taking American sailors because it no longer needed them. Native Americans got nothing. The treaty did not protect their lands at all. Britain left them behind.\n\nSo who won? Both sides said they won. Americans were proud they stood up to the British Empire. Canadians were proud they stopped American invaders. The British were just glad the war was over. Native Americans lost the most. Without British help, they could not stop American settlers from taking their land.\n\nThe war changed America in big ways. Americans felt proud and united. This time was called the "Era of Good Feelings." American factories grew because British goods were blocked during the war. Native tribes lost British support and lost more and more land. Canadians came together as a nation for the first time.',keyTerms:[{term:"Treaty of Ghent",definition:"Peace treaty that ended the War of 1812, restoring pre-war borders",simpleDefinition:"The peace deal that ended the War of 1812. Everything went back to how it was before."},{term:"Status Quo Ante Bellum",definition:'Latin phrase meaning "the way things were before the war"',simpleDefinition:'A fancy Latin phrase that means "things went back to how they were before the war"'},{term:"Era of Good Feelings",definition:"Period of American nationalism and unity after the war",simpleDefinition:"A time after the war when Americans felt proud and united"}],didYouKnow:'The War of 1812 is sometimes called "the war nobody won." Britain got nothing it wanted, America got nothing it wanted, and 20,000 people died for a treaty that changed nothing on paper\u2014but changed everything about how Americans saw themselves.',causeEffect:{cause:"Both sides were exhausted \u2014 Britain from the Napoleonic Wars, America from economic devastation",effect:"The treaty changed nothing on paper but transformed American identity, destroyed the Federalist Party, and abandoned Native allies",thinkAbout:"Can a war with no territorial changes still have enormous consequences? What changed even though the borders didn't?"},geographicContext:{description:"The Treaty of Ghent was negotiated in Ghent, Belgium \u2014 thousands of miles from the battlefields. The distance meant that fighting continued for weeks after the treaty was signed. The treaty's failure to address Native lands opened the entire frontier to American expansion.",keyLocations:["Ghent, Belgium","Northwest Territory","Creek Nation lands","New England (Hartford Convention)"]},primarySourceExcerpt:{quote:"The war has renewed and reinstated the national feelings which the Revolution had given and which were daily lessened.",attribution:"Albert Gallatin, former Treasury Secretary, 1816",analysisPrompt:"Gallatin says the war restored national feelings from the Revolution. Why might Americans have lost some national pride between 1783 and 1812? How did the war restore it?"},activity:null},{id:9,year:"1812-1815",title:"Diverse Experiences of the War",keyIdea:"African Americans, women, and Native Americans all experienced the war in very different ways.",content:"The War of 1812 affected different groups in dramatically different ways. Understanding these diverse experiences gives us a fuller picture of the conflict.\n\n**African Americans in the War:** About 15-20% of American sailors were free Black men who served alongside white sailors with equal pay. On land, Andrew Jackson recruited free men of color into two battalions at New Orleans. Meanwhile, approximately 4,000 enslaved people escaped to British lines, where they were offered freedom. Some formed the Colonial Marines and fought against their former enslavers. Britain resettled most in Nova Scotia and Trinidad after the war.\n\n**Women's Roles:** Women managed farms, businesses, and plantations while men fought. Frontier women defended homesteads and survived as refugees. Dolley Madison saved national treasures from the burning White House. Mary Pickersgill sewed the enormous Fort McHenry flag. Laura Secord walked 20 miles through enemy territory to warn British forces. The British blockade created new factory jobs for women, accelerating American industrialization.\n\n**Native American Experiences:** Native nations were not monolithic \u2014 they made complex choices about alliances. Some fought with the British, some with the Americans, some tried to stay neutral. Women in matrilineal societies like the Creek held political influence and bore the heaviest burden of displacement. After the war, all Native nations suffered regardless of which side they chose.",simpleContent:'The War of 1812 affected different groups of people in very different ways.\n\nAfrican Americans played a big role in the war. About one out of every five American sailors was a free Black man. They got the same pay as white sailors. Andrew Jackson asked free Black men to fight at New Orleans. About 4,000 enslaved people escaped to the British side. The British promised them freedom. Some of these men joined a fighting group called the Colonial Marines. They fought against the people who had enslaved them. After the war, Britain helped most of them start new lives in Canada and the Caribbean.\n\nWomen kept things running at home while men went to war. They ran farms, shops, and plantations. Dolley Madison saved treasures from the burning White House. She was also important in politics \u2014 she hosted parties where leaders met, talked, and made deals to help her husband. Mary Pickersgill sewed the giant flag that flew over Fort McHenry. Laura Secord walked 20 miles to warn the British about an American attack. New factory jobs opened up for women during the war.\n\nNative American tribes made hard choices. Some fought with the British. Some fought with the Americans. Some tried to stay out of the war. In many tribes, women helped make decisions in councils. They spoke for peace or war and kept their communities going while men fought. After the war ended, all Native groups suffered. It did not matter which side they chose.\n\nThe government also let private ships called "privateers" attack British trading ships. Over 500 American privateers captured more than 1,500 British ships. This hurt British trade badly and helped push Britain toward making peace.',simpleContentSections:[{heading:"African Americans",content:"African Americans played a big role in the war. About one out of every five American sailors was a free Black man. They got the same pay as white sailors. Andrew Jackson asked free Black men to fight at New Orleans. About 4,000 enslaved people escaped to the British side. The British promised them freedom. Some of these men joined a fighting group called the Colonial Marines. They fought against the people who had enslaved them. After the war, Britain helped most of them start new lives in Canada and the Caribbean."},{heading:"Women",content:"Women kept things running at home while men went to war. They ran farms, shops, and plantations. Dolley Madison saved treasures from the burning White House. She was also important in politics \u2014 she hosted parties where leaders met, talked, and made deals to help her husband. Mary Pickersgill sewed the giant flag that flew over Fort McHenry. Laura Secord walked 20 miles to warn the British about an American attack. New factory jobs opened up for women during the war."},{heading:"Native Americans",content:"Native American tribes made hard choices. Some fought with the British. Some fought with the Americans. Some tried to stay out of the war. In many tribes, women helped make decisions in councils. They spoke for peace or war and kept their communities going while men fought. After the war ended, all Native groups suffered. It did not matter which side they chose."},{heading:"Privateers",content:'The government also let private ships called "privateers" attack British trading ships. Over 500 American privateers captured more than 1,500 British ships. This hurt British trade badly and helped push Britain toward making peace.'}],keyTerms:[{term:"Colonial Marines",definition:"British military unit made up of formerly enslaved people who escaped from American plantations",simpleDefinition:"A group of soldiers made up of people who escaped slavery and joined the British army"},{term:"Matrilineal",definition:"A social system where family descent and inheritance pass through the mother's line",simpleDefinition:"A family system where your family name and belongings pass down through your mother"},{term:"Self-emancipation",definition:"The act of enslaved people freeing themselves by escaping to freedom",simpleDefinition:"When enslaved people freed themselves by running away to safety"}],didYouKnow:'After the war, American slaveholders demanded Britain return the people who had escaped to freedom. Britain refused, and the issue was sent to international arbitration. In 1826, Tsar Alexander I of Russia ruled that Britain owed compensation \u2014 but for the "property," not for freeing human beings. The case reveals how slavery was intertwined with international diplomacy.',causeEffect:{cause:"The war disrupted social structures and created opportunities for marginalized groups to seek freedom and new roles",effect:"African Americans proved their valor in combat, women demonstrated economic capability, and Native nations faced catastrophic consequences regardless of their choices",thinkAbout:"Why do we often hear about generals and politicians but rarely about ordinary people's wartime experiences? Whose stories are missing from most textbooks?"},geographicContext:{description:"Diverse experiences varied by region: the Chesapeake Bay was where most enslaved people escaped to British ships; New England was where women entered factories; the Great Lakes frontier was where Native communities were displaced.",keyLocations:["Chesapeake Bay","New England mills","Great Lakes frontier","Creek Nation"]},primarySourceExcerpt:{quote:"I had been a slave, and knew what slavery was. I determined to get my liberty or lose my life.",attribution:"Paraphrased from Charles Ball's memoir, an African American veteran of the war",analysisPrompt:"What does Ball's statement tell us about how enslaved people viewed the war differently from free Americans? How might their motivations for fighting differ?"},activity:null},{id:10,year:"1812-1815",title:"Geography of the War",keyIdea:"Geography shaped every major battle \u2014 controlling waterways was the key to winning.",content:"Geography shaped every major decision and outcome of the War of 1812. Understanding WHERE things happened helps explain WHY they happened.\n\n**The Great Lakes Theater:** The chain of Great Lakes (Erie, Ontario, Huron, Superior) formed the border between the U.S. and Canada. Whoever controlled the lakes controlled supply routes, troop movements, and communication. This is why the naval battle on Lake Erie was so decisive \u2014 Perry's victory cut off British supplies to Detroit and the entire western frontier.\n\n**The Chesapeake Bay:** This enormous bay gave the British navy access deep into the American heartland. Rivers flowing into the bay led directly to Washington D.C. and Baltimore. The British used this geographic advantage to burn the capital, but Fort McHenry's position at the narrow entrance to Baltimore Harbor denied them their next target.\n\n**The Mississippi & New Orleans:** New Orleans sat at the mouth of the Mississippi River \u2014 the economic lifeline of the American interior. All trade from the Ohio Valley, Kentucky, Tennessee, and the frontier flowed down the Mississippi to New Orleans. Losing the city would have been catastrophic for the American economy, which is why its defense was so critical.\n\n**The Canadian Frontier:** Americans believed conquering Canada would be easy, but geography proved them wrong. Long supply lines, dense forests, and the defensive advantage of the British along the St. Lawrence River made invasion extremely difficult.",simpleContent:"Where battles happened mattered a lot in this war. The land and water shaped how the war was fought.\n\nThe Great Lakes sat between the United States and Canada. Whoever controlled the lakes could move soldiers and supplies. That is why the battle on Lake Erie was so important. When Perry won that battle, the British could not get supplies to Detroit anymore.\n\nThe Chesapeake Bay was a big body of water near Washington, D.C. British ships sailed right up the bay to attack the capital. They used rivers flowing into the bay to reach Washington. But Fort McHenry blocked the entrance to Baltimore Harbor. The British could not get past it.\n\nNew Orleans sat at the bottom of the Mississippi River. Farmers and traders in the middle of America shipped their goods down the river to New Orleans. Losing that city would have been terrible for the American economy.\n\nAmericans thought taking over Canada would be easy. They were wrong. Canada was far away and hard to reach. Thick forests and long distances made it very difficult to invade.",keyTerms:[{term:"Theater of war",definition:"A geographic area where military operations take place",simpleDefinition:"A large area where fighting happens during a war"},{term:"Supply lines",definition:"Routes used to transport food, ammunition, and equipment to armies",simpleDefinition:"The roads and paths used to bring food, weapons, and supplies to soldiers"},{term:"Strategic chokepoint",definition:"A narrow passage that controls access to a larger area",simpleDefinition:"A narrow spot that controls who can get in or out of a bigger area"}],didYouKnow:"The War of 1812 was fought across an area larger than all of Western Europe. Messages between Washington and frontier commanders could take weeks to arrive. This is why the Battle of New Orleans was fought after the peace treaty was signed \u2014 news simply couldn't travel fast enough.",causeEffect:{cause:"The vast distances and geographic barriers of North America made coordinating military operations extremely difficult",effect:"Battles were often fought without commanders knowing the full strategic picture, and control of waterways became more important than winning any single land battle",thinkAbout:"How would the war have been different if the telephone or telegraph had existed? How does communication speed affect military strategy?"},geographicContext:{description:"The war was fought across four main theaters: the Great Lakes/Canadian border, the Atlantic coast, the Chesapeake Bay, and the Gulf Coast. Each theater had unique geographic challenges that shaped the fighting.",keyLocations:["Great Lakes","St. Lawrence River","Chesapeake Bay","Gulf of Mexico","New Orleans","Niagara frontier"]},primarySourceExcerpt:{quote:"The conquest of Canada is in your power. I trust I shall not be deemed presumptuous when I state that I verily believe that the militia of Kentucky are alone competent to place Montreal and Upper Canada at your feet.",attribution:"Henry Clay, War Hawk congressman, 1812",analysisPrompt:"Clay was completely wrong \u2014 Canada was not easily conquered. What geographic factors did he fail to consider? Why might politicians underestimate military challenges?"},activity:null}];function ii(e){if(!e)return e;return e.split(/(\*\*[^*]+\*\*)/g).map((e,t)=>e.startsWith("**")&&e.endsWith("**")?(0,c.jsx)("strong",{className:"text-parchment/90 font-bold",children:e.slice(2,-2)},t):e)}function oi(t){let{term:n,definition:r,children:a}=t;const[i,o]=(0,e.useState)(!1),s=(0,e.useRef)(null),l=(0,e.useRef)(null),d=(0,e.useCallback)(()=>o(e=>!e),[]);return(0,e.useEffect)(()=>{if(i)return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)};function e(e){s.current&&!s.current.contains(e.target)&&o(!1)}},[i]),(0,e.useEffect)(()=>{if(!i||!l.current)return;const e=l.current,t=e.getBoundingClientRect();t.left<8?(e.style.left="0",e.style.transform="none"):t.right>window.innerWidth-8&&(e.style.left="auto",e.style.right="0",e.style.transform="none")},[i]),(0,c.jsxs)("span",{ref:s,className:"relative inline",children:[(0,c.jsx)("button",{type:"button",onClick:d,className:"inline underline decoration-dotted decoration-war-gold/60 underline-offset-2 font-bold text-parchment/90 hover:decoration-war-gold cursor-pointer min-h-[44px] min-w-0 p-0 m-0 bg-transparent border-none font-inherit text-inherit leading-inherit","aria-expanded":i,"aria-label":"Definition of ".concat(n),children:a}),i&&(0,c.jsxs)("span",{ref:l,role:"tooltip",className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 max-w-[90vw] bg-war-navy border border-war-gold/30 shadow-modal rounded-lg p-3 animate-fadein z-50",children:[(0,c.jsx)("span",{className:"block text-war-gold font-display text-sm font-bold mb-1",children:n}),(0,c.jsx)("span",{className:"block text-parchment/70 text-sm font-body leading-relaxed",children:r})]})]})}function si(t,n,r){if(!n||0===n.length)return ii(t);const a=[...n].sort((e,t)=>t.term.length-e.term.length),i=a.map(e=>e.term.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),o=new RegExp("(".concat(i,")"),"i"),s=new Set;return t.split(o).map((t,n)=>{const i=a.find(e=>e.term.toLowerCase()===t.toLowerCase());if(i&&!s.has(i.term.toLowerCase())){s.add(i.term.toLowerCase());const e=r&&i.simpleDefinition?i.simpleDefinition:i.definition;return(0,c.jsx)(oi,{term:i.term,definition:e,children:t},"vocab-".concat(n))}return(0,c.jsx)(e.Fragment,{children:ii(t)},n)})}const li={};function ci(e,t,n){return e.split("\n\n").map((e,r)=>{const a=e.trim();if(!a)return null;const i=t?si(a,n,!0):ii(a);return(0,c.jsx)("p",{className:t?"mb-5":"mb-4",children:i},r)})}function di(t){let{activity:n}=t;const[r,a]=(0,e.useState)(n.items.map((e,t)=>t)),[i,o]=(0,e.useState)(null),s=(0,e.useCallback)(e=>{"sequencing"===n.type&&(null===i?o(e):(a(t=>{const n=[...t];return[n[i],n[e]]=[n[e],n[i]],n}),o(null)))},[i,n.type]);return"matching"===n.type?(0,c.jsxs)("div",{className:"bg-black/20 rounded-lg p-4 mb-4 border border-parchment-dark/8",children:[(0,c.jsx)("h3",{className:"text-war-gold/80 font-display text-sm mb-2 border-b border-war-gold/15 pb-2 tracking-wide",children:"Activity: Matching"}),(0,c.jsx)("p",{className:"text-parchment/60 text-sm font-body mb-3",children:n.instruction}),(0,c.jsx)("div",{className:"space-y-2",children:n.items.map((e,t)=>(0,c.jsx)("div",{className:"bg-war-navy/50 border border-parchment-dark/8 rounded px-3 py-2",children:(0,c.jsx)("p",{className:"text-parchment/70 text-sm font-body",children:e})},t))})]}):(0,c.jsxs)("div",{className:"bg-black/20 rounded-lg p-4 mb-4 border border-parchment-dark/8",children:[(0,c.jsx)("h3",{className:"text-war-gold/80 font-display text-sm mb-2 border-b border-war-gold/15 pb-2 tracking-wide",children:"Activity: Put in Order"}),(0,c.jsx)("p",{className:"text-parchment/60 text-sm font-body mb-1",children:n.instruction}),(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs font-body mb-3 italic",children:"Click two items to swap their positions."}),(0,c.jsx)("div",{className:"space-y-1.5",children:r.map((e,t)=>(0,c.jsxs)("button",{onClick:()=>s(t),className:"w-full text-left px-3 py-2 rounded border transition-all cursor-pointer flex items-center gap-2 ".concat(i===t?"border-war-gold/50 bg-war-gold/10 text-parchment/90":"border-parchment-dark/10 bg-war-navy/50 text-parchment/70 hover:border-parchment-dark/25"),children:[(0,c.jsxs)("span",{className:"text-war-gold/50 text-xs font-display font-bold w-5 flex-shrink-0",children:[t+1,"."]}),(0,c.jsx)("span",{className:"text-sm font-body",children:n.items[e]})]},t))})]})}function hi(t){let{onComplete:n,gameMode:r,fontMode:a,toggleFont:i}=t;const[o,l]=(0,e.useState)(0),[d,h]=(0,e.useState)(new Set),[u,p]=(0,e.useState)(null),[m,f]=(0,e.useState)(!1),[g,y]=(0,e.useState)(!1),[w,v]=(0,e.useState)({}),b="explorer"===r,x=ai.length,k=ai[o],_=li[k.id],T=_&&!d.has(k.id),S=(0,e.useCallback)(()=>{p(null),f(!1),y(!1)},[]),N=(0,e.useCallback)(e=>{if(m)return;p(e);const t=e===_.correctIndex;y(t),f(!0),t?setTimeout(()=>{h(e=>new Set(e).add(k.id)),S(),l(e=>e<ai.length-1?e+1:e)},1500):v(e=>s(s({},e),{},{[_.id]:(e[_.id]||0)+1}))},[m,_,k.id,S]),C=(0,e.useCallback)(()=>{S()},[S]),A=(o+1)/x*100,j=b&&k.simpleContent?k.simpleContent:k.content;return(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:(0,c.jsxs)("div",{className:b?"max-w-3xl w-full":"max-w-4xl w-full",children:[(0,c.jsxs)("div",{className:"text-center mb-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"}),(0,c.jsx)("p",{className:"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold",children:"Historical Timeline"}),(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"})]}),(0,c.jsx)("h1",{className:"text-3xl md:text-4xl font-display text-war-gold tracking-wide mb-2",children:"War of 1812"}),(0,c.jsx)("p",{className:"text-parchment-dark/50 font-body ".concat(b?"text-base":"text-sm"),children:"Learn the history before you play. This will help you answer quiz questions during the game!"})]}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsxs)("div",{className:"flex justify-between text-xs text-parchment-dark/40 mb-1.5 font-body",children:[(0,c.jsxs)("span",{children:["Section ",o+1," of ",x]}),(0,c.jsxs)("span",{children:[Math.round(A),"% Complete"]})]}),(0,c.jsx)("div",{className:"w-full bg-war-ink rounded-full h-2 border border-parchment-dark/10 overflow-hidden",children:(0,c.jsx)("div",{className:"h-full rounded-full transition-all duration-300",style:{width:"".concat(A,"%"),background:"linear-gradient(to right, #854d0e, #c9a227)"}})})]}),(0,c.jsxs)("div",{className:"bg-war-navy border border-war-gold/20 rounded-lg shadow-modal animate-fadein ".concat(b?"p-8 md:p-10":"p-6 md:p-8"),children:[(0,c.jsx)("div",{className:"inline-block bg-war-gold/15 text-war-gold px-4 py-1 rounded-full font-bold font-body border border-war-gold/20 ".concat(b?"text-sm mb-5":"text-xs mb-4"),children:k.year}),(0,c.jsx)("h2",{className:"font-display text-parchment/90 tracking-wide ".concat(b?"text-3xl md:text-4xl mb-8":"text-2xl md:text-3xl mb-6"),children:k.title}),b&&k.keyIdea&&(0,c.jsxs)("div",{className:"bg-war-gold/10 border border-war-gold/25 rounded-lg p-4 mb-6",children:[(0,c.jsx)("p",{className:"text-xs text-war-gold/80 uppercase tracking-wider mb-1 font-body font-bold",children:"Key Idea"}),(0,c.jsx)("p",{className:"text-parchment/90 font-body font-bold leading-relaxed ".concat(b?"text-lg":"text-base"),children:k.keyIdea})]}),(0,c.jsx)("div",{className:"mb-6",children:b&&k.simpleContentSections?(0,c.jsxs)("div",{className:"text-parchment/70 font-body ".concat(b?"text-lg md:text-xl leading-loose max-w-2xl":"text-base leading-relaxed"),children:[(0,c.jsx)("p",{className:"mb-5",children:j.split("\n\n")[0]}),k.simpleContentSections.map((e,t)=>(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("p",{className:"text-war-copper/80 uppercase tracking-wider text-xs font-body font-bold mb-2",children:e.heading}),(0,c.jsx)("p",{className:"mb-5",children:si(e.content,k.keyTerms,!0)})]},t))]}):(0,c.jsx)("div",{className:"text-parchment/70 font-body ".concat(b?"text-lg md:text-xl leading-loose max-w-2xl":"text-base leading-relaxed"),children:ci(j,b,k.keyTerms)})}),b&&k.didYouKnow&&(0,c.jsxs)("div",{className:"bg-war-red/10 border-l-2 border-war-red/30 rounded-r-lg p-4 mb-4",children:[(0,c.jsx)("p",{className:"text-war-copper/80 text-xs uppercase tracking-wider mb-1 font-body font-bold",children:"Did You Know?"}),(0,c.jsx)("p",{className:"text-parchment/70 italic font-body ".concat(b?"text-base":"text-sm"),children:k.didYouKnow})]}),k.keyTerms&&k.keyTerms.length>0&&(0,c.jsxs)("div",{className:"bg-black/20 rounded-lg p-4 mb-4 border border-parchment-dark/8",children:[(0,c.jsx)("h3",{className:"text-war-gold/80 font-display text-sm mb-3 border-b border-war-gold/15 pb-2 tracking-wide",children:"Key Terms"}),(0,c.jsx)("div",{className:"space-y-2 font-body",children:k.keyTerms.map((e,t)=>(0,c.jsxs)("div",{children:[(0,c.jsxs)("span",{className:"text-parchment/80 font-bold ".concat(b?"text-base":"text-sm"),children:[e.term,":"]})," ",(0,c.jsx)("span",{className:"text-parchment-dark/60 ".concat(b?"text-base":"text-sm"),children:b&&e.simpleDefinition?e.simpleDefinition:e.definition})]},t))})]}),k.causeEffect&&!b&&(0,c.jsxs)("div",{className:"bg-black/20 rounded-lg p-4 mb-4 border border-parchment-dark/8",children:[(0,c.jsx)("h3",{className:"text-war-gold/80 font-display text-sm mb-3 border-b border-war-gold/15 pb-2 tracking-wide",children:"Cause & Effect"}),(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch gap-2 mb-3",children:[(0,c.jsxs)("div",{className:"flex-1 bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8",children:[(0,c.jsx)("p",{className:"text-war-copper/70 text-[10px] uppercase tracking-widest font-body font-bold mb-1",children:"Cause"}),(0,c.jsx)("p",{className:"text-parchment/70 text-sm font-body",children:k.causeEffect.cause})]}),(0,c.jsx)("div",{className:"flex items-center justify-center text-war-gold/40 text-xl px-2 hidden sm:flex",children:"\u2192"}),(0,c.jsx)("div",{className:"flex items-center justify-center text-war-gold/40 text-xl sm:hidden",children:"\u2193"}),(0,c.jsxs)("div",{className:"flex-1 bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8",children:[(0,c.jsx)("p",{className:"text-war-copper/70 text-[10px] uppercase tracking-widest font-body font-bold mb-1",children:"Effect"}),(0,c.jsx)("p",{className:"text-parchment/70 text-sm font-body",children:k.causeEffect.effect})]})]}),(0,c.jsxs)("div",{className:"bg-war-gold/5 border border-war-gold/10 rounded-lg p-3",children:[(0,c.jsx)("p",{className:"text-war-gold/70 text-xs font-body font-bold mb-0.5",children:"Think About It"}),(0,c.jsx)("p",{className:"text-parchment/60 text-sm font-body italic",children:k.causeEffect.thinkAbout})]})]}),k.primarySourceExcerpt&&!b&&(0,c.jsxs)("div",{className:"bg-war-red/5 border-l-2 border-war-red/20 rounded-r-lg p-4 mb-4",children:[(0,c.jsx)("p",{className:"text-war-copper/80 text-xs uppercase tracking-wider mb-2 font-body font-bold",children:"Primary Source"}),(0,c.jsxs)("blockquote",{className:"text-parchment/80 text-sm font-body italic leading-relaxed mb-2 pl-2 border-l border-parchment-dark/15",children:["\u201c",k.primarySourceExcerpt.quote,"\u201d"]}),(0,c.jsxs)("p",{className:"text-parchment-dark/50 text-xs font-body mb-2",children:["\u2014 ",k.primarySourceExcerpt.attribution]}),(0,c.jsxs)("div",{className:"bg-war-gold/5 border border-war-gold/10 rounded p-2.5",children:[(0,c.jsx)("p",{className:"text-war-gold/70 text-xs font-body font-bold mb-0.5",children:"Analysis Question"}),(0,c.jsx)("p",{className:"text-parchment/60 text-sm font-body italic",children:k.primarySourceExcerpt.analysisPrompt})]})]}),k.geographicContext&&!b&&(0,c.jsxs)("div",{className:"bg-black/20 rounded-lg p-4 mb-4 border border-parchment-dark/8",children:[(0,c.jsx)("h3",{className:"text-war-gold/80 font-display text-sm mb-2 border-b border-war-gold/15 pb-2 tracking-wide",children:"Geographic Context"}),(0,c.jsx)("p",{className:"text-parchment/70 text-sm font-body leading-relaxed mb-2",children:k.geographicContext.description}),(0,c.jsx)("div",{className:"flex flex-wrap gap-1.5",children:k.geographicContext.keyLocations.map((e,t)=>(0,c.jsx)("span",{className:"bg-war-navy/60 border border-parchment-dark/10 rounded px-2 py-0.5 text-parchment/60 text-xs font-body",children:e},t))})]}),k.activity&&!b&&(0,c.jsx)(di,{activity:k.activity}),!b&&k.didYouKnow&&(0,c.jsxs)("div",{className:"bg-war-red/10 border-l-2 border-war-red/30 rounded-r-lg p-4",children:[(0,c.jsx)("p",{className:"text-war-copper/80 text-xs uppercase tracking-wider mb-1 font-body font-bold",children:"Did You Know?"}),(0,c.jsx)("p",{className:"text-parchment/70 text-sm italic font-body",children:k.didYouKnow})]}),T&&(0,c.jsxs)("div",{className:"mt-6 bg-war-gold/5 border border-war-gold/25 rounded-lg p-5 md:p-6 animate-fadein",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"}),(0,c.jsx)("p",{className:"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold",children:"Check Your Understanding"}),(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"})]}),(0,c.jsx)("h3",{className:"font-display text-parchment/90 tracking-wide mb-4 ".concat(b?"text-xl md:text-2xl":"text-lg md:text-xl"),children:b&&_.simpleQuestion?_.simpleQuestion:_.question}),(0,c.jsx)("div",{className:"space-y-2.5 mb-4",children:_.answers.map((e,t)=>{let n="w-full text-left px-4 py-3 rounded-lg border transition-all cursor-pointer font-body";return m&&t===_.correctIndex?n+=" border-green-500/50 bg-green-900/20 text-parchment/90":n+=m&&t===u&&!g?" border-red-500/50 bg-red-900/20 text-parchment/70":m?" border-parchment-dark/10 bg-war-navy/30 text-parchment/50":" border-parchment-dark/15 bg-war-navy/50 text-parchment/70 hover:border-war-gold/40 hover:text-parchment/90",(0,c.jsxs)("button",{onClick:()=>N(t),disabled:m,className:n,style:m?{cursor:"default"}:void 0,children:[(0,c.jsxs)("span",{className:"font-display font-bold mr-2 ".concat(b?"text-base":"text-sm"),children:[String.fromCharCode(65+t),"."]}),(0,c.jsx)("span",{className:b?"text-base leading-relaxed":"text-sm leading-relaxed",children:e})]},t)})}),m&&(0,c.jsxs)("div",{className:"rounded-lg p-4 animate-fadein ".concat(g?"bg-green-900/20 border border-green-500/30":"bg-red-900/20 border border-red-500/30"),children:[(0,c.jsx)("p",{className:"font-display font-bold mb-2 ".concat(g?"text-green-400":"text-red-400"," ").concat(b?"text-base":"text-sm"),children:g?"Correct!":"Not quite \u2014 try again!"}),!g&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"text-parchment/70 font-body mb-3 ".concat(b?"text-base leading-loose":"text-sm leading-relaxed"),children:b&&_.simpleExplanation?_.simpleExplanation:_.explanation}),(0,c.jsx)("button",{onClick:C,className:"px-5 py-2.5 bg-war-gold text-war-ink font-display text-sm rounded hover:bg-war-brass transition-colors cursor-pointer font-bold tracking-wide shadow-copper",children:"Try Again"})]}),g&&(0,c.jsx)("p",{className:"text-parchment/60 font-body ".concat(b?"text-base":"text-sm"),children:"Moving on..."})]})]})]}),(0,c.jsx)("div",{className:"mt-6 flex justify-between items-center gap-4",children:(0,c.jsxs)("div",{className:"flex gap-3 w-full justify-between",children:[o>0&&(0,c.jsx)("button",{onClick:()=>{o>0&&(l(o-1),S())},className:"px-6 py-3 font-display text-sm rounded border border-parchment-dark/20 text-parchment/70 hover:border-war-gold/40 hover:text-parchment transition-colors cursor-pointer tracking-wide",children:"Previous"}),(0,c.jsxs)("div",{className:"ml-auto flex flex-col items-end gap-1",children:[(0,c.jsx)("button",{onClick:()=>{if(o<x-1)l(o+1),S();else{const e={};Ya.forEach(t=>{e[t.id]=w[t.id]||0}),n(e)}},disabled:T,className:"px-6 py-3 font-display text-sm rounded font-bold tracking-wide shadow-copper transition-colors ".concat(T?"bg-war-gold/30 text-war-ink/50 cursor-not-allowed":"bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer"),children:o===x-1?"Start Playing!":"Next"}),T&&(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs font-body italic",children:"Answer the question above to continue"})]})]})}),(0,c.jsx)("div",{className:"mt-6 flex justify-center gap-2",children:ai.map((e,t)=>(0,c.jsx)("div",{className:"h-1.5 rounded-full transition-all ".concat(t===o?"bg-war-gold w-6":t<o?"bg-war-gold/40 w-1.5":"bg-parchment-dark/15 w-1.5")},t))}),i&&(0,c.jsx)("div",{className:"mt-4 text-center",children:(0,c.jsx)("button",{onClick:i,className:"text-parchment-dark/40 text-xs font-body hover:text-parchment/60 transition-colors cursor-pointer",children:"dyslexic"===a?"Switch to Standard Font":"Switch to OpenDyslexic Font"})})]})})}Ya.forEach(e=>{li[e.section]=e});const ui=[{id:"all",label:"All"},{id:"us",label:"United States"},{id:"british",label:"British / Canada"},{id:"native",label:"Native Coalition"}],pi={military:"Military",political:"Political",civilian:"Civilian",native_leader:"Native Leader"};function mi(t){let{onClose:n}=t;const[r,a]=(0,e.useState)("all"),[i,o]=(0,e.useState)(null),s="all"===r?Ia:Ia.filter(e=>e.faction===r);return i?(0,c.jsx)(fi,{profile:i,onBack:()=>o(null),onClose:n}):(0,c.jsxs)("div",{className:"min-h-screen",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:[(0,c.jsxs)("header",{className:"bg-war-navy/80 backdrop-blur-sm px-4 md:px-6 py-3 md:py-4 border-b border-war-gold/15 flex items-center justify-between gap-3 sticky top-0 z-10",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"}),(0,c.jsx)("p",{className:"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold",children:"Historical Figures"}),(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-war-gold/60"})]}),(0,c.jsx)("h1",{className:"text-war-gold font-display text-lg md:text-xl tracking-wide",children:"People of 1812"})]}),(0,c.jsx)("button",{onClick:n,className:"px-3 md:px-4 py-2 border border-parchment-dark/15 text-parchment-dark/50 rounded hover:border-war-gold/40 hover:text-war-gold transition-colors text-xs font-body flex-shrink-0 cursor-pointer",children:"Back to Menu"})]}),(0,c.jsxs)("div",{className:"p-3 md:p-6 max-w-6xl mx-auto",children:[(0,c.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:ui.map(e=>(0,c.jsx)("button",{onClick:()=>a(e.id),className:"px-4 py-1.5 rounded-full text-xs font-body transition-all cursor-pointer ".concat(r===e.id?"bg-war-gold/20 border border-war-gold/40 text-war-gold font-bold":"border border-parchment-dark/15 text-parchment-dark/50 hover:border-war-gold/30 hover:text-parchment/70"),children:e.label},e.id))}),(0,c.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,c.jsxs)("button",{onClick:()=>o(e),className:"text-left bg-war-navy/50 rounded-lg p-4 border border-parchment-dark/8 hover:border-war-gold/25 hover:bg-war-navy/70 transition-all cursor-pointer group",children:[(0,c.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-parchment/90 font-display text-base tracking-wide group-hover:text-war-gold transition-colors",children:e.name}),(0,c.jsx)("p",{className:"text-parchment-dark/50 text-xs font-body",children:e.title})]}),e.isGameLeader&&(0,c.jsx)("span",{className:"text-war-gold/50 text-[10px] uppercase tracking-widest font-body font-bold border border-war-gold/20 rounded px-1.5 py-0.5 flex-shrink-0",children:"Leader"})]}),e.years&&(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs font-body mb-2",children:e.years}),(0,c.jsx)("p",{className:"text-parchment/60 text-xs font-body leading-relaxed line-clamp-3",children:e.biography[0]}),(0,c.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,c.jsx)("span",{className:"text-war-copper/50 text-[10px] uppercase tracking-widest font-body",children:pi[e.category]||e.category})})]},e.id))})]})]})}function fi(e){let{profile:t,onBack:n,onClose:r}=e;return(0,c.jsxs)("div",{className:"min-h-screen",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:[(0,c.jsxs)("header",{className:"bg-war-navy/80 backdrop-blur-sm px-4 md:px-6 py-3 md:py-4 border-b border-war-gold/15 flex items-center justify-between gap-3 sticky top-0 z-10",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold mb-0.5",children:pi[t.category]||t.category}),(0,c.jsx)("h1",{className:"text-war-gold font-display text-lg md:text-xl tracking-wide",children:t.name}),(0,c.jsxs)("p",{className:"text-parchment-dark/40 text-xs font-body",children:[t.title,t.years?" \u2022 ".concat(t.years):""]})]}),(0,c.jsxs)("div",{className:"flex gap-2 flex-shrink-0",children:[(0,c.jsx)("button",{onClick:n,className:"px-3 py-2 border border-parchment-dark/15 text-parchment-dark/50 rounded hover:border-war-gold/40 hover:text-war-gold transition-colors text-xs font-body cursor-pointer",children:"All People"}),(0,c.jsx)("button",{onClick:r,className:"px-3 py-2 border border-parchment-dark/15 text-parchment-dark/50 rounded hover:border-war-gold/40 hover:text-war-gold transition-colors text-xs font-body cursor-pointer",children:"Back to Menu"})]})]}),(0,c.jsxs)("div",{className:"p-3 md:p-6 max-w-3xl mx-auto space-y-5",children:[t.isGameLeader&&(0,c.jsx)("div",{className:"inline-block bg-war-gold/10 border border-war-gold/20 rounded-full px-3 py-1",children:(0,c.jsx)("span",{className:"text-war-gold text-xs font-body font-bold",children:"In-Game Leader"})}),(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8 space-y-3",children:[(0,c.jsx)("h2",{className:"text-war-gold/80 font-display text-base tracking-wide border-b border-war-gold/15 pb-2",children:"Biography"}),t.biography.map((e,t)=>(0,c.jsx)("p",{className:"text-parchment/70 text-sm font-body leading-relaxed",children:e},t))]}),t.primarySources&&t.primarySources.length>0&&(0,c.jsxs)("div",{className:"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8 space-y-3",children:[(0,c.jsx)("h2",{className:"text-war-gold/80 font-display text-base tracking-wide border-b border-war-gold/15 pb-2",children:"Primary Sources"}),t.primarySources.map((e,t)=>(0,c.jsxs)("div",{className:"bg-war-red/5 border-l-2 border-war-red/20 rounded-r-lg pl-4 py-3 pr-3",children:[(0,c.jsxs)("p",{className:"text-parchment/80 text-sm font-body italic leading-relaxed",children:["\u201c",e.quote,"\u201d"]}),(0,c.jsxs)("p",{className:"text-parchment-dark/50 text-xs font-body mt-1.5",children:["\u2014 ",e.attribution]}),e.context&&(0,c.jsx)("p",{className:"text-parchment/50 text-xs font-body mt-1.5 pt-1.5 border-t border-parchment-dark/10",children:e.context})]},t))]}),t.didYouKnow&&(0,c.jsxs)("div",{className:"bg-war-red/10 border-l-2 border-war-red/30 rounded-r-lg p-4",children:[(0,c.jsx)("p",{className:"text-war-copper/80 text-xs uppercase tracking-wider mb-1 font-body font-bold",children:"Did You Know?"}),(0,c.jsx)("p",{className:"text-parchment/70 text-sm italic font-body leading-relaxed",children:t.didYouKnow})]})]})]})}function gi(t){let{onNext:n,classParam:r,savedGame:a,onContinue:i,onDeleteSave:o,onExportSave:s,onImportSave:l,fontMode:d,toggleFont:h}=t;const[u,p]=(0,e.useState)(""),[m,f]=(0,e.useState)(""),[g,y]=(0,e.useState)(r||""),[w,v]=(0,e.useState)(null),[b,x]=(0,e.useState)(""),[k,_]=(0,e.useState)(!1),[T,S]=(0,e.useState)(!!r),[N,C]=(0,e.useState)(!1),[A,j]=(0,e.useState)(!1),[E,B]=(0,e.useState)(""),P=async e=>{if(!e.trim())return v(null),void x("");_(!0),x("");const{data:t,error:n}=await Xr(e);_(!1),n?x("Could not validate code. Try again."):t?(v(t),x("")):(x("Code not found \u2014 check with your teacher"),v(null))};(0,e.useEffect)(()=>{r&&P(r)},[]);const I=()=>{u.trim()&&n(T&&w?{playerName:u.trim(),classPeriod:w.name,classId:w.id}:{playerName:u.trim(),classPeriod:m.trim()||"Unassigned",classId:null})},O=e=>{"Enter"===e.key&&u.trim()&&I()};return(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:(0,c.jsxs)("div",{className:"max-w-2xl w-full",children:[(0,c.jsxs)("div",{className:"text-center mb-8",children:[(0,c.jsx)("h1",{className:"text-4xl md:text-5xl font-display text-war-gold tracking-wide mb-3",children:"War of 1812"}),(0,c.jsx)("p",{className:"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold",children:"Rise of the Nation"})]}),(0,c.jsxs)("div",{className:"bg-war-navy border border-war-gold/20 rounded-lg p-6 md:p-8 shadow-modal animate-fadein",children:[(0,c.jsx)("h2",{className:"text-xl font-display text-war-gold/80 mb-6 tracking-wide border-b border-war-gold/15 pb-3",children:"Identify Yourself, Commander"}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("label",{className:"block text-parchment/60 text-xs uppercase tracking-wider mb-1.5 font-body font-bold",children:["Commander's Name ",(0,c.jsx)("span",{className:"text-war-red/60",children:"*"})]}),(0,c.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value.slice(0,30)),onKeyDown:O,placeholder:"Enter your name",className:"w-full bg-war-ink/50 border border-parchment-dark/15 rounded px-4 py-3 text-parchment/90 placeholder-parchment-dark/30 font-body focus:border-war-gold/40 focus:outline-none transition-colors",autoFocus:!0})]}),(0,c.jsx)("div",{className:"mb-6",children:T?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("label",{className:"block text-parchment/60 text-xs uppercase tracking-wider mb-1.5 font-body font-bold",children:["Class Code ",(0,c.jsx)("span",{className:"text-parchment-dark/30",children:"(from your teacher)"})]}),(0,c.jsx)("div",{className:"flex gap-2",children:(0,c.jsx)("input",{type:"text",value:g,onChange:e=>{const t=e.target.value.toUpperCase().slice(0,6);y(t),6===t.length?P(t):(v(null),x(""))},onKeyDown:O,placeholder:"e.g., ABC123",maxLength:6,className:"flex-1 bg-war-ink/50 border border-parchment-dark/15 rounded px-4 py-3 text-parchment/90 placeholder-parchment-dark/30 font-body font-mono tracking-widest text-center uppercase focus:border-war-gold/40 focus:outline-none transition-colors"})}),k&&(0,c.jsx)("p",{className:"text-parchment-dark/40 text-xs mt-1.5 font-body italic",children:"Checking code..."}),b&&(0,c.jsx)("p",{className:"text-red-400 text-xs mt-1.5 font-body",children:b}),w&&(0,c.jsxs)("p",{className:"text-green-400 text-xs mt-1.5 font-body",children:["Joined: ",w.name]}),(0,c.jsx)("button",{type:"button",onClick:()=>{S(!1),v(null),x("")},className:"text-parchment-dark/40 text-xs font-body mt-2 hover:text-parchment/60 transition-colors cursor-pointer",children:"No class code? Enter period instead"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("label",{className:"block text-parchment/60 text-xs uppercase tracking-wider mb-1.5 font-body font-bold",children:["Class Period ",(0,c.jsx)("span",{className:"text-parchment-dark/30",children:"(optional)"})]}),(0,c.jsx)("input",{type:"text",value:m,onChange:e=>f(e.target.value.slice(0,10)),onKeyDown:O,placeholder:"e.g., Period 3",className:"w-full bg-war-ink/50 border border-parchment-dark/15 rounded px-4 py-3 text-parchment/90 placeholder-parchment-dark/30 font-body focus:border-war-gold/40 focus:outline-none transition-colors"}),(0,c.jsx)("button",{type:"button",onClick:()=>S(!0),className:"text-parchment-dark/40 text-xs font-body mt-2 hover:text-parchment/60 transition-colors cursor-pointer",children:"Have a class code? Enter it here"})]})}),(0,c.jsx)("button",{onClick:I,disabled:!u.trim()||T&&g.trim()&&!w,className:"w-full py-4 font-display text-lg rounded-lg font-bold tracking-wider transition-colors\n                       shadow-copper ".concat(!u.trim()||T&&g.trim()&&!w?"bg-parchment-dark/20 text-parchment-dark/40 cursor-not-allowed":"bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer"),children:"Continue"})]}),a&&(0,c.jsxs)("div",{className:"mt-6 bg-war-navy border border-war-gold/20 rounded-lg p-5 shadow-modal animate-fadein",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,c.jsx)("h3",{className:"text-war-gold/80 font-display text-sm tracking-wide",children:"Saved Campaign"}),(0,c.jsx)("span",{className:"text-parchment-dark/40 text-xs font-body",children:a.timestamp?new Date(a.timestamp).toLocaleDateString():""})]}),(0,c.jsxs)("p",{className:"text-parchment/70 text-sm font-body mb-3",children:[a.playerName," \u2014 ","us"===a.faction?"United States":"british"===a.faction?"British/Canada":"Native Coalition"," \u2014 Round ",a.round,", ",a.season]}),(0,c.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,c.jsx)("button",{onClick:i,className:"px-4 py-2 bg-war-gold text-war-ink font-display text-xs rounded font-bold hover:bg-war-brass transition-colors cursor-pointer tracking-wide",children:"Continue Campaign"}),N?(0,c.jsxs)("div",{className:"flex gap-1",children:[(0,c.jsx)("button",{onClick:()=>{o(),C(!1)},className:"px-3 py-2 bg-war-red/80 text-parchment font-display text-xs rounded font-bold hover:bg-war-red transition-colors cursor-pointer tracking-wide",children:"Confirm Delete"}),(0,c.jsx)("button",{onClick:()=>C(!1),className:"px-3 py-2 border border-parchment-dark/20 text-parchment-dark/60 font-display text-xs rounded hover:border-war-gold/40 transition-colors cursor-pointer",children:"Cancel"})]}):(0,c.jsx)("button",{onClick:()=>C(!0),className:"px-3 py-2 border border-parchment-dark/20 text-parchment-dark/60 font-display text-xs rounded hover:border-war-red/40 hover:text-war-red/80 transition-colors cursor-pointer tracking-wide",children:"Delete"}),(0,c.jsx)("button",{onClick:s,className:"px-3 py-2 border border-parchment-dark/20 text-parchment-dark/60 font-display text-xs rounded hover:border-war-gold/40 hover:text-parchment transition-colors cursor-pointer tracking-wide",children:"Export"}),(0,c.jsxs)("label",{className:"px-3 py-2 border border-parchment-dark/20 text-parchment-dark/60 font-display text-xs rounded hover:border-war-gold/40 hover:text-parchment transition-colors cursor-pointer tracking-wide",children:["Import",(0,c.jsx)("input",{type:"file",accept:".json",onChange:async e=>{const t=e.target.files[0];if(t){try{const e=await t.text();l(e),B("Save imported!"),setTimeout(()=>B(""),3e3)}catch(n){B("Invalid save file."),setTimeout(()=>B(""),3e3)}e.target.value=""}},className:"hidden"})]})]})]}),E&&(0,c.jsx)("div",{className:"mt-4 text-center text-parchment/70 text-sm font-body animate-fadein",children:E}),(0,c.jsx)("div",{className:"mt-6",children:(0,c.jsx)(sa,{onViewFull:()=>j(!0)})}),(0,c.jsx)("div",{className:"mt-6 text-center",children:(0,c.jsx)("button",{onClick:h,className:"text-parchment-dark/40 text-xs font-body hover:text-parchment/60 transition-colors cursor-pointer",children:"dyslexic"===d?"Switch to Standard Font":"Switch to OpenDyslexic Font"})}),A&&(0,c.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:()=>j(!1),children:(0,c.jsxs)("div",{className:"bg-war-navy border border-war-gold/30 rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto shadow-modal",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,c.jsx)("h2",{className:"text-war-gold font-display text-xl tracking-wide",children:"Leaderboard"}),(0,c.jsx)("button",{onClick:()=>j(!1),className:"text-parchment-dark/40 hover:text-parchment/70 transition-colors cursor-pointer text-xl",children:"\xd7"})]}),(0,c.jsx)(sa,{fullMode:!0})]})})]})})}const yi={easy:{BASE_REINFORCEMENTS:2,MAX_ATTACKS_PER_TURN:2,MIN_ATTACK_PROBABILITY:.55,CONCENTRATION_RATIO:.2,TOP_N_ATTACK_CHOICES:5,ATTACK_PROBABILITY_WEIGHT:8,ATTACK_FORT_PENALTY:5,MAX_TROOPS_TO_MOVE:1,MAX_MANEUVERS:1},medium:{},hard:{BASE_REINFORCEMENTS:6,MAX_ATTACKS_PER_TURN:7,MIN_ATTACK_PROBABILITY:.15,CONCENTRATION_RATIO:.6,TOP_N_ATTACK_CHOICES:1,ATTACK_PROBABILITY_WEIGHT:2,ATTACK_FORT_PENALTY:1,MAX_TROOPS_TO_MOVE:5,MAX_MANEUVERS:5}},wi={easy:{name:"Learning",description:"The AI takes it easy. Good for learning the game."},medium:{name:"Balanced",description:"A fair challenge. The AI plays smart."},hard:{name:"Commander",description:"The AI is aggressive and relentless. For experienced players."}},vi=["easy","medium","hard"],bi={easy:{border:"border-green-500/30",bg:"bg-green-900/10",accent:"text-green-400"},medium:{border:"border-war-gold/30",bg:"bg-war-gold/10",accent:"text-war-gold"},hard:{border:"border-red-500/30",bg:"bg-red-900/10",accent:"text-red-400"}};function xi(t){let{onNext:n,playerName:r,fontMode:a,toggleFont:i}=t;const[o,s]=(0,e.useState)("medium"),[l,d]=(0,e.useState)("historian");return(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:(0,c.jsxs)("div",{className:"max-w-3xl w-full",children:[(0,c.jsxs)("div",{className:"text-center mb-8",children:[(0,c.jsxs)("p",{className:"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold mb-2",children:["Welcome, ",r]}),(0,c.jsx)("h1",{className:"text-3xl md:text-4xl font-display text-war-gold tracking-wide mb-2",children:"Choose Your Challenge"}),(0,c.jsx)("p",{className:"text-parchment-dark/50 text-sm font-body",children:"Select how tough you want the AI opponent to be."})]}),(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:vi.map(e=>{const t=wi[e],n=bi[e],r=o===e;return(0,c.jsxs)("button",{onClick:()=>s(e),className:"p-6 rounded-lg border-2 transition-all cursor-pointer text-left\n                  ".concat(r?"".concat(n.border," ").concat(n.bg," shadow-modal"):"border-parchment-dark/10 bg-war-navy/50 hover:border-parchment-dark/25"),children:[(0,c.jsx)("h3",{className:"font-display text-xl mb-2 tracking-wide ".concat(r?n.accent:"text-parchment/70"),children:t.name}),(0,c.jsx)("p",{className:"text-sm font-body leading-relaxed ".concat(r?"text-parchment/70":"text-parchment-dark/50"),children:t.description}),"medium"===e&&(0,c.jsx)("span",{className:"inline-block mt-3 text-xs font-body text-war-gold/50 uppercase tracking-wider",children:"Recommended"})]},e)})}),(0,c.jsxs)("div",{className:"bg-war-navy border border-war-gold/20 rounded-lg p-6 shadow-modal mb-8",children:[(0,c.jsx)("h2",{className:"text-war-gold/80 font-display text-sm mb-4 tracking-wide border-b border-war-gold/15 pb-2",children:"Reading Level"}),(0,c.jsxs)("div",{className:"flex gap-3",children:[(0,c.jsxs)("button",{onClick:()=>d("historian"),className:"flex-1 py-3 px-4 rounded-lg font-display text-sm tracking-wide transition-all cursor-pointer border\n                ".concat("historian"===l?"bg-war-gold/15 border-war-gold/40 text-war-gold font-bold":"border-parchment-dark/15 text-parchment-dark/50 hover:border-parchment-dark/30"),children:[(0,c.jsx)("span",{className:"block text-base mb-1",children:"Historian Mode"}),(0,c.jsx)("span",{className:"block text-xs font-body font-normal opacity-70",children:"Full detail \u2014 8th grade reading level"})]}),(0,c.jsxs)("button",{onClick:()=>d("explorer"),className:"flex-1 py-3 px-4 rounded-lg font-display text-sm tracking-wide transition-all cursor-pointer border\n                ".concat("explorer"===l?"bg-war-gold/15 border-war-gold/40 text-war-gold font-bold":"border-parchment-dark/15 text-parchment-dark/50 hover:border-parchment-dark/30"),children:[(0,c.jsx)("span",{className:"block text-base mb-1",children:"Explorer Mode"}),(0,c.jsx)("span",{className:"block text-xs font-body font-normal opacity-70",children:"Simplified text \u2014 3rd grade reading level"})]})]})]}),(0,c.jsx)("button",{onClick:()=>{n({difficulty:o,gameMode:l})},className:"w-full py-4 bg-war-gold text-war-ink font-display text-lg rounded-lg font-bold tracking-wider hover:bg-war-brass transition-colors cursor-pointer shadow-copper",children:"Continue"}),i&&(0,c.jsx)("div",{className:"mt-6 text-center",children:(0,c.jsx)("button",{onClick:i,className:"text-parchment-dark/40 text-xs font-body hover:text-parchment/60 transition-colors cursor-pointer",children:"dyslexic"===a?"Switch to Standard Font":"Switch to OpenDyslexic Font"})})]})})}class ki extends e.Component{constructor(e){super(e),this.handleRestoreLastSave=()=>{const{onRestoreSave:e}=this.props;e?(this.setState({hasError:!1,error:null,errorInfo:null}),e()):window.location.reload()},this.handleStartNewGame=()=>{const{onStartNewGame:e}=this.props;this.setState({hasError:!1,error:null,errorInfo:null}),e?e():(localStorage.removeItem("war1812_save"),window.location.reload())},this.handleExportSave=()=>{try{const e=localStorage.getItem("war1812_save");if(!e)return void this.setState({toastMessage:"No save file found to export."});const t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="war1812_save_".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),this.setState({toastMessage:"Save file downloaded!"})}catch(e){console.error("Failed to export save:",e),this.setState({toastMessage:"Failed to export save file."})}},this.handleToggleDetails=()=>{this.setState(e=>({showDetails:!e.showDetails}))},this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t,errorCount:this.state.errorCount+1});try{const n=JSON.parse(localStorage.getItem("war1812_error_log")||"[]");n.push({timestamp:Date.now(),error:e.toString(),componentStack:t.componentStack,section:this.props.section||"unknown"}),n.length>10&&n.shift(),localStorage.setItem("war1812_error_log",JSON.stringify(n))}catch(n){console.error("Failed to log error to localStorage:",n)}}render(){if(this.state.hasError){const{section:e="game",showExportButton:t=!0}=this.props,n=!!localStorage.getItem("war1812_save");return(0,c.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{background:"radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)"},children:(0,c.jsxs)("div",{className:"w-full max-w-2xl bg-war-navy border border-war-red/30 shadow-modal rounded-lg overflow-hidden animate-fadein",children:[(0,c.jsxs)("div",{className:"px-6 py-4 border-b border-war-red/20",style:{background:"linear-gradient(135deg, rgba(139,26,26,0.4) 0%, rgba(20,30,48,0.95) 100%)"},children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500/80"}),(0,c.jsx)("p",{className:"text-red-400/80 text-xs tracking-[0.2em] uppercase font-body font-bold",children:"Error"})]}),(0,c.jsx)("h2",{className:"text-parchment font-display text-xl tracking-wide",children:"Something Went Wrong"}),(0,c.jsxs)("p",{className:"text-parchment-dark/50 text-xs mt-1 font-body",children:["The ",e," encountered an unexpected error"]})]}),this.state.toastMessage&&(0,c.jsx)("div",{className:"mx-6 mt-4 px-4 py-2.5 bg-war-gold/10 border border-war-gold/25 rounded text-parchment/80 text-sm font-body animate-fadein",role:"status",children:this.state.toastMessage}),(0,c.jsxs)("div",{className:"px-6 py-6 space-y-4",children:[(0,c.jsx)("p",{className:"text-parchment/70 text-sm leading-relaxed font-body",children:"Don't worry! Your progress may have been auto-saved. You can try to restore your last save or start a fresh game."}),this.state.errorCount>1&&(0,c.jsx)("div",{className:"bg-war-red/10 border-l-2 border-war-red/40 px-4 py-3 rounded-r",children:(0,c.jsxs)("p",{className:"text-parchment/70 text-sm font-body",children:[(0,c.jsx)("strong",{children:"Warning:"})," This error has occurred ",this.state.errorCount," times. If it persists, try starting a new game or refreshing your browser."]})}),(0,c.jsxs)("div",{className:"flex flex-col gap-3 mt-6",children:[n&&(0,c.jsx)("button",{onClick:this.handleRestoreLastSave,className:"w-full px-6 py-3 bg-war-navy border border-war-gold/30 text-parchment/80 font-display text-sm rounded tracking-wide hover:border-war-gold/50 hover:text-parchment transition-all cursor-pointer",children:"Restore Last Save"}),(0,c.jsx)("button",{onClick:this.handleStartNewGame,className:"w-full px-6 py-3 bg-war-gold text-war-ink font-display text-sm rounded font-bold tracking-wide hover:bg-war-brass transition-colors cursor-pointer shadow-copper",children:"Start New Game"}),t&&n&&(0,c.jsx)("button",{onClick:this.handleExportSave,className:"w-full px-6 py-3 border border-parchment-dark/15 text-parchment-dark/50 font-body text-sm rounded hover:border-parchment-dark/30 hover:text-parchment-dark/70 transition-all cursor-pointer",children:"Export Save File (Backup)"})]}),(0,c.jsxs)("div",{className:"mt-6 pt-4 border-t border-parchment-dark/10",children:[(0,c.jsxs)("button",{onClick:this.handleToggleDetails,className:"text-parchment-dark/40 text-xs underline hover:text-parchment-dark/60 cursor-pointer font-body",children:[this.state.showDetails?"Hide":"Show"," Technical Details"]}),this.state.showDetails&&this.state.error&&(0,c.jsxs)("div",{className:"mt-3 bg-war-ink/50 rounded p-4 overflow-auto max-h-64 border border-parchment-dark/8",children:[(0,c.jsxs)("p",{className:"text-red-400/80 font-mono text-xs mb-2",children:[(0,c.jsx)("strong",{children:"Error:"})," ",this.state.error.toString()]}),this.state.errorInfo&&(0,c.jsx)("pre",{className:"text-parchment-dark/40 font-mono text-xs whitespace-pre-wrap",children:this.state.errorInfo.componentStack})]})]}),(0,c.jsx)("div",{className:"mt-4 bg-black/15 rounded px-4 py-3 border-l-2 border-war-gold/20",children:(0,c.jsxs)("p",{className:"text-parchment-dark/40 text-xs font-body",children:[(0,c.jsx)("strong",{className:"text-parchment-dark/60",children:"For Teachers:"})," Error logs are saved locally and can be reviewed in the browser console. Students should report persistent errors with the date/time they occurred."]})})]})]})})}return this.props.children}}const _i=[{id:"chesapeake_affair",title:"The Chesapeake-Leopard Affair Remembered",year:1807,description:"The memory of HMS Leopard firing on USS Chesapeake still burns. Anti-British sentiment fuels recruitment.",didYouKnow:"In 1807, HMS Leopard fired on the unprepared USS Chesapeake just off the Virginia coast, killing 3 and wounding 18. The British boarded and seized 4 sailors they claimed were deserters. Americans were outraged, but President Jefferson chose economic pressure over war \u2014 a decision that only delayed the conflict.",primarySource:{quote:"This affair has produced a great sensation... The feeling of independence is very strong and will, I think, be called into action.",attribution:"Senator Samuel Smith of Maryland, 1807"},effect:"US gains +2 troops in Chesapeake territory. +5 Nationalism (US player).",simpleDescription:"A British warship attacked an American ship in 1807. Americans were very angry about it.",simpleDidYouKnow:"Three Americans were killed and 18 were hurt in the attack. The British boarded the ship and took 4 sailors they said were runaways.",simpleEffect:"The US gets 2 extra troops near Chesapeake and people feel more patriotic.",roundRange:[1,3],apply:e=>{let{territoryOwners:t,playerFaction:n}=e;return{troopBonus:{faction:"us",count:2,theater:"Chesapeake"},nationalismChange:"us"===n?5:0}},quiz:{question:"How many American sailors were killed when HMS Leopard fired on USS Chesapeake in 1807?",choices:["3 killed, 18 wounded","15 killed, 50 wounded","1 killed, 3 wounded","No casualties occurred"],correctIndex:0,explanation:"The attack killed 3 American sailors and wounded 18. The British then boarded and seized 4 sailors they claimed were deserters, fueling outrage that led toward the War of 1812.",simpleQuestion:"How many American sailors died when the British ship attacked the Chesapeake?",simpleChoices:["3 died, 18 hurt","15 died, 50 hurt","1 died, 3 hurt","Nobody was hurt"],simpleExplanation:"The British attack killed 3 American sailors and hurt 18 more. They also took 4 sailors off the ship. Americans were furious about this attack.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"war_hawks",title:"War Hawks Demand Action",year:1812,description:"Henry Clay, John C. Calhoun, and the War Hawks in Congress push for aggressive expansion into Canada.",didYouKnow:'Henry Clay of Kentucky became Speaker of the House at just 34 years old and used the position to stack committees with pro-war members. The War Hawks believed conquering Canada would be, as Thomas Jefferson predicted, "a mere matter of marching." They were very wrong.',primarySource:{quote:"The conquest of Canada is in your power. I trust I shall not be deemed presumptuous when I state that I verily believe that the militia of Kentucky are alone competent to place Montreal and Upper Canada at your feet.",attribution:"Henry Clay, speech in the U.S. Senate, February 1810"},effect:"US gains +3 troops on Great Lakes border territories.",simpleDescription:"A group in Congress called the War Hawks wanted to invade Canada. They thought it would be easy.",simpleDidYouKnow:"Thomas Jefferson said taking Canada would be as easy as marching. Henry Clay became Speaker of the House at just 34 years old and pushed hard for war.",simpleEffect:"The US gets 3 extra troops near the Great Lakes border.",roundRange:[1,2],apply:()=>({troopBonus:{faction:"us",count:3,theater:"Great Lakes"}}),quiz:{question:"What did Thomas Jefferson predict about conquering Canada?",choices:['It would be "a mere matter of marching"',"It would require a navy of 100 ships","It would take at least 10 years","It was impossible without French support"],correctIndex:0,explanation:'Jefferson famously predicted conquering Canada would be "a mere matter of marching," reflecting the War Hawks\' overconfidence. The actual invasions of Canada largely failed.',simpleQuestion:"What did Thomas Jefferson say about taking over Canada?",simpleChoices:["He said it would be as easy as marching","He said they would need 100 ships","He said it would take 10 years","He said they needed help from France"],simpleExplanation:"Jefferson thought taking Canada would be very easy. He was wrong. The Americans tried to invade Canada many times and mostly failed.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"hulls_surrender",title:"Hull's Surrender at Detroit",year:1812,description:"General William Hull surrenders Fort Detroit to the British without a fight, shocking the nation.",didYouKnow:"General Brock sent Hull a message warning that once fighting began, he could not control his Native allies. Terrified of a massacre, Hull surrendered 2,500 troops to a force of only 1,300. He was later court-martialed and sentenced to death, though President Madison pardoned him due to his Revolutionary War service.",primarySource:{quote:"The force at my disposal does not exceed seven hundred... but the very circumstance of an enemy being in force upon your territory, I am persuaded, will be the signal for every man to quit his plow for the sword.",attribution:"Major General Isaac Brock, message to General Hull, August 1812"},effect:"Detroit defenders lose 2 troops. Nationalism drops if US controls Detroit.",simpleDescription:"General Hull gave up Fort Detroit to the British without even fighting. The whole country was shocked.",simpleDidYouKnow:"Hull surrendered 2,500 soldiers to only 1,300 British troops because he was scared. He was put on trial, but President Madison let him go.",simpleEffect:"Detroit loses 2 troops. Americans feel less patriotic if they own Detroit.",roundRange:[1,3],apply:e=>{let{territoryOwners:t}=e;return{troopPenalty:{territory:"detroit",count:2},nationalismChange:"us"===t.detroit?-5:0}},quiz:{question:"What happened to General Hull after surrendering Detroit?",choices:["He was court-martialed and sentenced to death, but pardoned by President Madison","He was promoted for saving his soldiers' lives","He defected to the British army","He was immediately executed for treason"],correctIndex:0,explanation:"Hull was court-martialed for cowardice and sentenced to death, but President Madison pardoned him due to his Revolutionary War service. He had surrendered 2,500 troops to a force of only 1,300.",simpleQuestion:"What happened to General Hull after he gave up Detroit?",simpleChoices:["He was put on trial but the President let him go","He got a promotion for keeping soldiers safe","He joined the British army","He was punished right away"],simpleExplanation:"Hull was put on trial for giving up without a fight. He was supposed to be punished, but President Madison forgave him. Hull had fought in the Revolutionary War before.",reward:{nationalism:3},penalty:{troops:-1}}},{id:"tecumseh_alliance",title:"Tecumseh's Alliance with Britain",year:1812,description:"Tecumseh forges a powerful alliance with British forces, uniting Native warriors across the frontier.",didYouKnow:'Tecumseh traveled thousands of miles \u2014 from the Great Lakes to the Gulf Coast \u2014 recruiting nations into his confederacy. He was one of the most gifted orators and military strategists of his era. British General Brock said of him: "A more sagacious or a more gallant Warrior does not I believe exist."',primarySource:{quote:"Where today are the Pequot? Where are the Narragansett, the Mohican, the Pocanet, and many other once powerful tribes of our people? They have vanished before the avarice and the oppression of the White Man, as snow before a summer sun.",attribution:"Tecumseh, speech to the Osage, 1811"},effect:"Native Coalition gains +2 troops in their territories.",simpleDescription:"Tecumseh joined forces with the British. He brought together many Native nations to fight together.",simpleDidYouKnow:"Tecumseh traveled thousands of miles to ask different Native nations to work together. British General Brock said Tecumseh was the bravest warrior he ever saw.",simpleEffect:"The Native Coalition gets 2 extra troops in their lands.",roundRange:[1,4],apply:e=>{let{territoryOwners:t}=e;const n=["indiana_territory","creek_nation"].filter(e=>"native"===t[e]);return 0===n.length?{}:{troopBonus:{faction:"native",count:2,territories:n}}},quiz:{question:"What did British General Brock say about Tecumseh?",choices:['"A more sagacious or a more gallant Warrior does not I believe exist"','"He is a dangerous savage who cannot be trusted"','"His warriors fight bravely but lack discipline"','"He would make a fine British officer"'],correctIndex:0,explanation:"Brock was deeply impressed by Tecumseh's military genius and leadership. Tecumseh traveled thousands of miles recruiting nations into his confederacy, making him one of the most gifted leaders of his era.",simpleQuestion:"What did British General Brock think about Tecumseh?",simpleChoices:["He said Tecumseh was the bravest warrior he ever saw","He called Tecumseh dangerous and untrustworthy","He said Tecumseh's fighters lacked training","He wanted Tecumseh to become a British officer"],simpleExplanation:"General Brock thought Tecumseh was an amazing leader and warrior. Tecumseh traveled thousands of miles to bring Native nations together. He was one of the greatest leaders of his time.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"constitution_guerriere",title:"USS Constitution vs HMS Guerriere",year:1812,description:'"Old Ironsides" defeats HMS Guerriere in a stunning frigate action, proving American naval capability.',didYouKnow:'USS Constitution\'s hull was made of dense Southern live oak, up to 21 inches thick. During the battle, British cannonballs literally bounced off her sides, leading a sailor to cry "Huzza! Her sides are made of iron!" The ship is still afloat today in Boston Harbor \u2014 the oldest commissioned warship still afloat in the world.',primarySource:{quote:"Huzza! Her sides are made of iron!",attribution:"Unnamed sailor aboard USS Constitution, August 19, 1812"},effect:"+5 Nationalism. British loses 1 troop on Atlantic Sea Lanes.",simpleDescription:'The American ship "Old Ironsides" beat a British warship. Cannonballs bounced off its thick wooden sides!',simpleDidYouKnow:"The USS Constitution is still floating in Boston Harbor today. It is the oldest warship still in the water.",simpleEffect:"Americans feel more patriotic. The British lose 1 troop at sea.",roundRange:[2,4],apply:e=>{let{territoryOwners:t}=e;return{nationalismChange:5,troopPenalty:"british"===t.atlantic_sea_lanes?{territory:"atlantic_sea_lanes",count:1}:null}},quiz:{question:'Why was USS Constitution nicknamed "Old Ironsides"?',choices:["British cannonballs bounced off her thick live oak hull","She was plated with iron armor","Her crew wore iron helmets in battle","She was painted iron-gray for camouflage"],correctIndex:0,explanation:'Constitution\'s hull was made of dense Southern live oak, up to 21 inches thick. During battle, cannonballs literally bounced off, leading a sailor to cry "Her sides are made of iron!" She is still afloat today in Boston Harbor.',simpleQuestion:'Why did people call the ship "Old Ironsides"?',simpleChoices:["Cannonballs bounced off its very thick wooden walls","It was covered in iron plates","The crew wore iron helmets","It was painted to look like iron"],simpleExplanation:'The ship was made of very thick oak wood. Cannonballs bounced right off! A sailor yelled "Her sides are made of iron!" The ship is still in Boston Harbor today.',reward:{nationalism:3},penalty:{nationalism:-2}}},{id:"fort_dearborn_massacre",title:"Fort Dearborn Massacre",year:1812,description:"Potawatomi warriors attack the evacuating garrison of Fort Dearborn, killing soldiers and civilians.",didYouKnow:"Fort Dearborn stood where downtown Chicago is today. When Hull surrendered Detroit, he ordered Fort Dearborn evacuated. As the garrison marched out, Potawatomi warriors attacked. About 52 soldiers and civilians were killed. The event became a rallying cry for American frontier settlers demanding military protection.",effect:"Fort Dearborn loses 2 troops. Native gains +1 troop in Indiana Territory.",simpleDescription:"Soldiers leaving Fort Dearborn were attacked. About 52 people were killed.",simpleDidYouKnow:"Fort Dearborn was in the same spot where downtown Chicago is today.",simpleEffect:"Fort Dearborn loses 2 troops. Native fighters gain 1 troop nearby.",roundRange:[1,3],apply:e=>{let{territoryOwners:t}=e;const n={troopPenalty:{territory:"fort_dearborn",count:2}};return"native"===t.indiana_territory&&(n.troopBonus={faction:"native",count:1,territories:["indiana_territory"]}),n},quiz:{question:"Where was Fort Dearborn located (in modern terms)?",choices:["Where downtown Chicago stands today","In present-day Detroit, Michigan","Near modern Buffalo, New York","On the coast of Virginia"],correctIndex:0,explanation:"Fort Dearborn stood where downtown Chicago is today. When Hull surrendered Detroit, he ordered the fort evacuated. About 52 soldiers and civilians were killed in the subsequent attack.",simpleQuestion:"Where was Fort Dearborn? What city is there now?",simpleChoices:["Where Chicago is today","Where Detroit is today","Where Buffalo is today","On the coast of Virginia"],simpleExplanation:"Fort Dearborn stood right where downtown Chicago is today. When the soldiers tried to leave, they were attacked. About 52 people were killed.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"queenston_heights",title:"Battle of Queenston Heights",year:1812,description:"British and Canadian forces repel an American invasion across the Niagara River. General Brock is killed but becomes a national hero.",didYouKnow:"Brock was killed leading a counterattack uphill against American positions. Many New York militiamen refused to cross the river into Canada, citing their constitutional right to only defend American soil. This left the American regulars who had crossed outnumbered and doomed. Brock's monument at Queenston Heights still stands today.",effect:"British gains +2 troops at Niagara. Brock is removed from play.",simpleDescription:"The British stopped an American attack near Niagara. General Brock was killed but became a hero.",simpleDidYouKnow:"Many American soldiers refused to cross the river into Canada. They said they only had to defend American land.",simpleEffect:"The British get 2 extra troops at Niagara. General Brock is gone from the game.",roundRange:[2,4],apply:e=>{let{territoryOwners:t}=e;const n={removeLeader:"brock"};return"british"===t.niagara&&(n.troopBonus={faction:"british",count:2,territories:["niagara"]}),n},quiz:{question:"Why did many New York militiamen refuse to cross the Niagara River into Canada?",choices:["They cited their constitutional right to only defend American soil","They were afraid of the Niagara Falls rapids","They had not been paid in months","Their commander ordered them to stay behind"],correctIndex:0,explanation:"Many NY militia refused to cross into Canada, leaving American regulars outnumbered and doomed. General Brock was killed leading a counterattack, but the British won the battle. His monument at Queenston Heights still stands today.",simpleQuestion:"Why did many New York soldiers refuse to cross into Canada?",simpleChoices:["They said they only had to protect American land","They were afraid of the waterfalls","They had not been paid","Their leader told them to stay behind"],simpleExplanation:"Many soldiers said they only had to fight on American soil. They would not cross into Canada. This left the Americans who did cross with too few fighters.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"perry_lake_erie",title:"Perry's Victory on Lake Erie",year:1813,description:'"We have met the enemy and they are ours." Oliver Hazard Perry wins control of Lake Erie.',didYouKnow:"Perry built his fleet from scratch at Presque Isle (Erie, PA) using local timber. During the battle, his flagship Lawrence was shot to pieces. He rowed through enemy fire to the Niagara and continued fighting. His victory gave the US control of Lake Erie and forced the British to abandon Detroit \u2014 one of the war's turning points.",primarySource:{quote:"We have met the enemy and they are ours: two ships, two brigs, one schooner and one sloop.",attribution:"Oliver Hazard Perry, dispatch to General William Henry Harrison, September 10, 1813"},effect:"US takes control of Lake Erie. +5 Nationalism.",simpleDescription:'Oliver Perry won a big battle on Lake Erie. He said, "We have met the enemy and they are ours."',simpleDidYouKnow:"Perry built his ships at Presque Isle in Pennsylvania from trees cut down nearby. When his first ship was destroyed, he rowed to another one and kept fighting.",simpleEffect:"The US takes control of Lake Erie. Americans feel more patriotic.",roundRange:[5,7],apply:()=>({territoryChange:{territory:"lake_erie",newOwner:"us"},troopBonus:{faction:"us",count:3,territories:["lake_erie"]},nationalismChange:5}),quiz:{question:"Where did Perry build the fleet he used to win the Battle of Lake Erie?",choices:["Presque Isle (Erie, Pennsylvania)","Fort Dearborn (Chicago)","Buffalo, New York","Montreal, Canada"],correctIndex:0,explanation:"Perry built his fleet from scratch at Presque Isle using local timber. During the battle his flagship was shot to pieces, so he rowed through enemy fire to another ship and continued fighting until victory.",simpleQuestion:"Where did Perry build his ships for the battle?",simpleChoices:["Presque Isle in Pennsylvania","Fort Dearborn in Chicago","Buffalo, New York","Montreal, Canada"],simpleExplanation:"Perry built his ships from local trees at Presque Isle. During the fight, his first ship was destroyed. He rowed to another ship and kept fighting until he won.",reward:{troops:1},penalty:{nationalism:-3}}},{id:"thames_tecumseh_death",title:"Battle of the Thames \u2014 Tecumseh Falls",year:1813,description:"Tecumseh is killed at the Battle of the Thames. His death shatters the Native coalition's unity.",didYouKnow:"The circumstances of Tecumseh's death remain debated. Richard Mentor Johnson claimed credit and rode it to the Vice Presidency with the slogan \"Rumpsey Dumpsey, Johnson killed Tecumseh!\" The British commander, Henry Procter, had retreated against Tecumseh's wishes, leaving the Native warriors exposed. Tecumseh's death effectively ended the dream of a unified Native confederacy.",effect:"Native Coalition loses 3 troops across all territories. Tecumseh removed from play.",simpleDescription:"Tecumseh was killed in battle. Without him, the Native nations could not stay united.",simpleDidYouKnow:"A man named Richard Johnson said he killed Tecumseh. He later became Vice President because of it.",simpleEffect:"The Native Coalition loses 3 troops everywhere. Tecumseh is gone from the game.",roundRange:[5,8],apply:()=>({troopPenalty:{faction:"native",count:3},removeLeader:"tecumseh"}),quiz:{question:"Who claimed credit for killing Tecumseh and used it to advance his political career?",choices:["Richard Mentor Johnson, who became Vice President","Andrew Jackson, who became President","William Henry Harrison, who led the battle","Henry Clay, who started the war movement"],correctIndex:0,explanation:'Richard Mentor Johnson claimed credit and rode it to the Vice Presidency with the slogan "Rumpsey Dumpsey, Johnson killed Tecumseh!" The true circumstances of Tecumseh\'s death remain debated.',simpleQuestion:"Who said he killed Tecumseh and used that to get a big job?",simpleChoices:["Richard Johnson, who became Vice President","Andrew Jackson, who became President","William Harrison, who led the battle","Henry Clay, who started the war movement"],simpleExplanation:"Richard Johnson said he killed Tecumseh. He used that claim to become Vice President. No one knows for sure who really killed Tecumseh.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"york_burning",title:"Americans Burn York (Toronto)",year:1813,description:"American forces capture and burn the capital of Upper Canada, enraging the British.",didYouKnow:"The burning of York's Parliament buildings was partly accidental and partly retaliatory. It set a dangerous precedent: when British forces later burned Washington D.C., they explicitly cited York as justification. The cycle of retaliation showed how quickly wars can escalate beyond anyone's intentions.",primarySource:{quote:"We were told to burn and destroy everything that could give shelter to the enemy... it was done most effectually.",attribution:"Lieutenant David Thomson, Pennsylvania Volunteers, April 1813"},effect:"British loses 2 troops in Upper Canada. British gains +2 troops at Montreal.",simpleDescription:"American soldiers burned the capital of Upper Canada. This made the British very angry.",simpleDidYouKnow:"The British later burned Washington D.C. to get back at the Americans for burning York.",simpleEffect:"The British lose 2 troops in Upper Canada but get 2 more at Montreal.",roundRange:[4,6],apply:()=>({troopPenalty:{territory:"upper_canada",count:2},troopBonus:{faction:"british",count:2,territories:["montreal"]}}),quiz:{question:"What did the British cite as justification for later burning Washington D.C.?",choices:["The American burning of York's Parliament buildings","The Boston Tea Party of 1773","American attacks on British merchant ships","The imprisonment of British diplomats"],correctIndex:0,explanation:"The burning of York's Parliament was partly accidental and partly retaliatory. It set a dangerous precedent: the British explicitly cited York when they later burned Washington D.C., showing how quickly wars can escalate.",simpleQuestion:"Why did the British say they burned Washington D.C.?",simpleChoices:["Because Americans burned buildings in York first","Because of the Boston Tea Party","Because Americans attacked British trade ships","Because Americans locked up British leaders"],simpleExplanation:"The Americans burned buildings in York, Canada. Later, the British burned Washington D.C. to get revenge. This shows how fighting can get worse and worse.",reward:{nationalism:3},penalty:{nationalism:-2}}},{id:"creek_war_begins",title:"Creek War Erupts",year:1813,description:"The Red Stick faction of the Creek Nation launches attacks against American settlements in the South.",didYouKnow:'The Creek Nation was divided: "Red Sticks" (inspired by Tecumseh) fought against American expansion, while other Creek factions allied with the Americans. This civil war within the Creek Nation was as devastating as their conflict with the US. The division would have lasting consequences for all Creek people.',effect:"Native gains +3 troops in Creek Nation.",simpleDescription:"A group of Creek people called the Red Sticks started fighting American settlers in the South.",simpleDidYouKnow:"The Creek Nation was split. Some Creek people fought the Americans. Other Creek people helped the Americans.",simpleEffect:"The Native Coalition gets 3 extra troops in Creek lands.",roundRange:[5,7],apply:e=>{let{territoryOwners:t}=e;return"native"===t.creek_nation?{troopBonus:{faction:"native",count:3,territories:["creek_nation"]}}:{}},quiz:{question:"What divided the Creek Nation during this conflict?",choices:['"Red Sticks" fought expansion while other Creek factions allied with the US',"Northern Creeks sided with Britain while Southern Creeks sided with Spain","The Creek chief was assassinated, splitting the tribe","Half the Creek warriors were captured and forced to fight for the US"],correctIndex:0,explanation:'The Creek civil war was devastating \u2014 "Red Sticks" (inspired by Tecumseh) fought against American expansion, while other Creek factions allied with the Americans. This division had lasting consequences for all Creek people.',simpleQuestion:"What split the Creek Nation during this war?",simpleChoices:["Some Creeks fought Americans while others helped Americans","Northern Creeks joined Britain while Southern Creeks joined Spain","Their chief was killed and the tribe split apart","Half the Creek fighters were forced to join the US army"],simpleExplanation:'The Creek Nation was divided. The "Red Sticks" fought against American settlers. Other Creek groups helped the Americans instead. This split hurt all Creek people.',reward:{troops:1},penalty:{nationalism:-2}}},{id:"british_blockade",title:"British Naval Blockade Tightens",year:1813,description:"The Royal Navy extends its blockade along the American coast, strangling trade.",didYouKnow:"By 1814, the British blockade was so effective that American exports dropped from $61 million (1811) to just $7 million. Prices for imported goods skyrocketed. However, the blockade had an unintended consequence: it forced Americans to manufacture their own goods, inadvertently jumpstarting American industrialization.",effect:"British gains +2 troops on Atlantic Sea Lanes. US coastal territories lose 1 troop each.",simpleDescription:"British warships blocked American ports. American ships could not trade with other countries.",simpleDidYouKnow:"The blockade cut American trade from $61 million down to just $7 million. Americans had to start making their own goods in factories.",simpleEffect:"The British get 2 more troops at sea. American coastal areas each lose 1 troop.",roundRange:[4,8],apply:e=>{let{territoryOwners:t}=e;const n={};"british"===t.atlantic_sea_lanes&&(n.troopBonus={faction:"british",count:2,territories:["atlantic_sea_lanes"]});const r=["chesapeake_bay","new_york","baltimore"].filter(e=>"us"===t[e]);return r.length>0&&(n.troopPenalty={territories:r,count:1}),n},quiz:{question:"How much did American exports drop due to the British blockade?",choices:["From $61 million to just $7 million","From $100 million to $50 million","From $30 million to $15 million","Exports were completely stopped"],correctIndex:0,explanation:"The blockade was devastating to American trade, but had an unintended consequence: it forced Americans to manufacture their own goods, inadvertently jumpstarting American industrialization.",simpleQuestion:"How much did American trade drop because of the British blockade?",simpleChoices:["From $61 million to just $7 million","From $100 million to $50 million","From $30 million to $15 million","Trade stopped completely"],simpleExplanation:"American trade fell a huge amount because of the blockade. But something good came from it. Americans started building their own factories to make things they used to buy from Britain.",reward:{nationalism:3},penalty:{nationalism:-2}}},{id:"napoleon_defeated",title:"Napoleon's Setbacks in Europe",year:1813,description:"Napoleon's losses free up British regulars to be sent to North America.",didYouKnow:'The War of 1812 is sometimes called America\'s "forgotten war," but it was really a sideshow of the massive Napoleonic Wars. When Napoleon was exiled to Elba in April 1814, over 10,000 Peninsular War veterans \u2014 battle-hardened from fighting in Spain and Portugal \u2014 were shipped to North America. Their arrival transformed the war.',effect:"British gains +3 troops distributed across Halifax and Montreal.",simpleDescription:"Napoleon lost battles in Europe. Now Britain could send more soldiers to fight in North America.",simpleDidYouKnow:"Over 10,000 British soldiers who had been fighting in Spain and Portugal were sent to North America after Napoleon lost.",simpleEffect:"The British get 3 extra troops at Halifax and Montreal.",roundRange:[5,8],apply:e=>{let{territoryOwners:t}=e;const n=["halifax","montreal"].filter(e=>"british"===t[e]);return 0===n.length?{}:{troopBonus:{faction:"british",count:3,territories:n}}},quiz:{question:"What were the battle-hardened British troops sent to North America called?",choices:["Peninsular War veterans from Spain and Portugal","Royal Guards from London","Scottish Highlanders from the north","Indian Army veterans from Bengal"],correctIndex:0,explanation:"When Napoleon was exiled to Elba in 1814, over 10,000 veterans from the Peninsular War in Spain and Portugal were shipped to North America, dramatically shifting the balance of the war.",simpleQuestion:"Where had these tough British soldiers been fighting before?",simpleChoices:["In Spain and Portugal","In Russia","In Egypt","In India"],simpleExplanation:"These soldiers had been fighting in Spain and Portugal for years. They were very experienced. When Napoleon lost, over 10,000 of them came to North America.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"fort_mims_massacre",title:"Fort Mims Massacre",year:1813,description:"Red Stick Creeks attack Fort Mims, killing hundreds. It galvanizes American resolve in the South.",didYouKnow:"The attack on Fort Mims in Alabama killed approximately 250-500 people \u2014 soldiers, settlers, and their Creek allies. It was the deadliest single event of the Creek War. The massacre outraged Americans and gave Andrew Jackson the political support to raise a large militia army and march against the Red Sticks.",effect:"US gains +2 troops in Mobile. +3 Nationalism.",simpleDescription:"Red Stick Creek fighters attacked Fort Mims. Hundreds of people were killed. Americans wanted revenge.",simpleDidYouKnow:"This attack gave Andrew Jackson support to build a big army and fight back.",simpleEffect:"The US gets 2 extra troops at Mobile. Americans feel more patriotic.",roundRange:[5,7],apply:e=>{let{territoryOwners:t}=e;const n={nationalismChange:3};return"us"===t.mobile&&(n.troopBonus={faction:"us",count:2,territories:["mobile"]}),n},quiz:{question:"Approximately how many people were killed in the Fort Mims attack?",choices:["250 to 500 people","About 50 soldiers","Over 2,000 settlers","Only 10 were killed"],correctIndex:0,explanation:"The attack killed approximately 250-500 people \u2014 soldiers, settlers, and their Creek allies. It was the deadliest single event of the Creek War and gave Andrew Jackson political support to raise a large militia army.",simpleQuestion:"About how many people died in the Fort Mims attack?",simpleChoices:["250 to 500 people","About 50 soldiers","Over 2,000 settlers","Only 10 people"],simpleExplanation:"Between 250 and 500 people died at Fort Mims. It was the deadliest event of the Creek War. After this, Andrew Jackson raised a big army to fight back.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"american_privateers",title:"American Privateers Harass British Shipping",year:1813,description:"Hundreds of American privateers prey on British merchant ships, disrupting supply lines.",didYouKnow:"Over 500 American privateers were commissioned during the war, capturing an estimated 1,500+ British merchant ships. Insurance rates for British shipping skyrocketed by 13%. British merchants petitioned Parliament for peace, showing that economic warfare could be as effective as battlefield victories.",effect:"British loses 1 troop from Halifax. +2 Nationalism.",simpleDescription:"American ships attacked British trading ships. This hurt Britain and helped America.",simpleDidYouKnow:"Over 500 American ships captured more than 1,500 British trading ships during the war.",simpleEffect:"The British lose 1 troop from Halifax. Americans feel more patriotic.",roundRange:[4,8],apply:()=>({troopPenalty:{territory:"halifax",count:1},nationalismChange:2}),quiz:{question:"Approximately how many British merchant ships did American privateers capture during the war?",choices:["Over 1,500 ships","About 100 ships","Exactly 50 ships","Nearly 5,000 ships"],correctIndex:0,explanation:"Over 500 American privateers captured an estimated 1,500+ British merchant ships. Insurance rates for British shipping skyrocketed by 13%, and British merchants petitioned Parliament for peace.",simpleQuestion:"How many British trading ships did American ships capture?",simpleChoices:["Over 1,500 ships","About 100 ships","Exactly 50 ships","Nearly 5,000 ships"],simpleExplanation:"American ships captured more than 1,500 British trading ships. This cost Britain a lot of money. British traders begged their government to make peace.",reward:{nationalism:3},penalty:{nationalism:-2}}},{id:"washington_burned",title:"The British Burn Washington D.C.",year:1814,description:"British forces march into the capital and burn the White House and Capitol. A dark day for the republic.",didYouKnow:'British Admiral Cockburn reportedly sat in the Speaker\'s chair in the House of Representatives and asked his men, "Shall this harbor of Yankee democracy be burned?" They shouted "Aye!" A thunderstorm and possible tornado the next day helped extinguish the fires. Washington D.C. is the only capital of a major nation to be captured and burned by a foreign power in the modern era.',primarySource:{quote:"Shall this harbor of Yankee democracy be burned? All for it will say Aye!",attribution:"Rear Admiral George Cockburn, in the U.S. House of Representatives, August 24, 1814"},effect:"Washington D.C. captured by British. -10 Nationalism.",simpleDescription:"British soldiers marched into Washington D.C. They burned the White House and the Capitol building.",simpleDidYouKnow:'A British admiral asked "Shall this harbor of Yankee democracy be burned?" before they set the Capitol on fire. Washington D.C. is the only major country\'s capital ever captured and burned by an enemy.',simpleEffect:"The British take Washington D.C. Americans feel much less patriotic.",roundRange:[9,10],apply:()=>({territoryChange:{territory:"washington_dc",newOwner:"british"},troopBonus:{faction:"british",count:4,territories:["washington_dc"]},nationalismChange:-10}),quiz:{question:"What did Admiral Cockburn ask in the House of Representatives before burning it?",choices:['"Shall this harbor of Yankee democracy be burned?"','"Where is the President hiding?"','"Does anyone wish to surrender?"','"Is there any gold in the treasury?"'],correctIndex:0,explanation:'Cockburn sat in the Speaker\'s chair and asked "Shall this harbor of Yankee democracy be burned?" His men shouted "Aye!" A thunderstorm the next day helped extinguish the fires. Washington D.C. is the only major nation\'s capital to be captured and burned by a foreign power in the modern era.',simpleQuestion:"What did the British admiral ask before burning the Capitol building?",simpleChoices:['"Should we burn this place?"','"Where is the President hiding?"','"Does anyone want to give up?"','"Is there gold in the building?"'],simpleExplanation:'Admiral Cockburn sat in the Speaker\'s chair. He asked if they should burn the building. His soldiers shouted "Yes!" A big storm the next day helped put out the fires.',reward:{troops:2},penalty:{nationalism:-3}}},{id:"fort_mchenry",title:"The Bombardment of Fort McHenry",year:1814,description:"The British bombard Fort McHenry through the night. At dawn, the flag still waves \u2014 inspiring Francis Scott Key.",didYouKnow:"The British fired over 1,500 cannonballs, rockets, and mortar shells during the 25-hour bombardment. Francis Scott Key, detained on a British ship 8 miles away, watched through the night. The flag he saw at dawn was enormous \u2014 42 by 30 feet, sewn by Mary Pickersgill and her daughter. It now hangs in the Smithsonian.",primarySource:{quote:"It was a night of watchfulness and anxiety... but at early dawn our eyes were greeted with the proudly waving flag of our country.",attribution:"Francis Scott Key, letter describing the night of September 13\u201314, 1814"},effect:"Baltimore cannot be captured this round. +10 Nationalism.",simpleDescription:"The British fired cannons at Fort McHenry all night long. In the morning, the American flag was still flying.",simpleDidYouKnow:"The British fired cannons at the fort for 25 hours straight. The flag that flew over the fort was huge \u2014 42 feet long and 30 feet tall. You can see it at the Smithsonian today.",simpleEffect:"Baltimore is safe this round. Americans feel very patriotic.",roundRange:[9,11],apply:()=>({fortify:{territory:"baltimore",invulnerable:!0},nationalismChange:10}),quiz:{question:"How long did the British bombardment of Fort McHenry last?",choices:["25 hours","3 hours","48 hours","7 days"],correctIndex:0,explanation:"The British fired over 1,500 cannonballs, rockets, and mortar shells during the 25-hour bombardment. The enormous flag Key saw at dawn \u2014 42 by 30 feet, sewn by Mary Pickersgill \u2014 now hangs in the Smithsonian.",simpleQuestion:"How long did the British fire cannons at Fort McHenry?",simpleChoices:["25 hours","3 hours","48 hours","7 days"],simpleExplanation:"The British fired over 1,500 cannonballs for 25 hours straight. The big American flag was still waving in the morning. That flag now hangs in the Smithsonian museum.",reward:{nationalism:5},penalty:{nationalism:-3}}},{id:"star_spangled_banner",title:"The Star-Spangled Banner",year:1814,description:"Francis Scott Key pens the words that will become the national anthem after witnessing Fort McHenry's defense.",didYouKnow:'Key wrote the poem on the back of a letter while still on the British ship. It was set to the tune of a popular British drinking song, "To Anacreon in Heaven." The song became widely popular but wasn\'t made the official national anthem until 1931 \u2014 117 years after Key wrote it.',primarySource:{quote:"O say can you see, by the dawn's early light, / What so proudly we hail'd at the twilight's last gleaming?",attribution:'Francis Scott Key, "Defence of Fort M\'Henry," September 1814'},effect:"+8 Nationalism. US gains +1 troop in Chesapeake.",simpleDescription:"Francis Scott Key watched the battle at Fort McHenry. He wrote a poem that became America's national anthem.",simpleDidYouKnow:"The poem was set to a popular British song. It did not become the official national anthem until 1931.",simpleEffect:"Americans feel very patriotic. The US gets 1 extra troop near Chesapeake.",roundRange:[9,11],apply:()=>({nationalismChange:8,troopBonus:{faction:"us",count:1,theater:"Chesapeake"}}),quiz:{question:'What tune was "The Star-Spangled Banner" poem originally set to?',choices:['"To Anacreon in Heaven," a British drinking song','"God Save the King," the British anthem','"Yankee Doodle," an American folk song',"It was originally written as an opera"],correctIndex:0,explanation:'Key wrote the poem on the back of a letter while still on a British ship. It was set to "To Anacreon in Heaven," a popular British drinking song. It didn\'t become the official national anthem until 1931 \u2014 117 years later.',simpleQuestion:'What song was "The Star-Spangled Banner" set to?',simpleChoices:["A popular British song","The British national anthem",'"Yankee Doodle"',"It was written as an opera"],simpleExplanation:"Key wrote the poem on the back of a letter. The words were set to a popular British song. It did not become America's national anthem until 117 years later in 1931.",reward:{nationalism:3},penalty:{nationalism:-2}}},{id:"horseshoe_bend",title:"Battle of Horseshoe Bend",year:1814,description:"Andrew Jackson crushes the Red Stick Creeks at Horseshoe Bend, ending the Creek War.",didYouKnow:'Jackson\'s force included 2,600 American troops, 500 Cherokee, and 100 Lower Creek allies \u2014 showing that the conflict was not simply "settlers vs. Natives." Over 800 Red Stick warriors were killed. The resulting Treaty of Fort Jackson forced the Creek to cede 23 million acres \u2014 roughly half of present-day Alabama and part of Georgia.',primarySource:{quote:"The fiends of the Tallapoosa will no longer murder our women and children... They have disappeared from the face of the Earth.",attribution:"Andrew Jackson, letter to his wife Rachel, March 28, 1814"},effect:"US takes Creek Nation. Native loses 3 troops across all territories.",simpleDescription:"Andrew Jackson beat the Red Stick Creeks at Horseshoe Bend. This ended the Creek War.",simpleDidYouKnow:"Jackson's army included Cherokee and Creek fighters. Not all Native people were on the same side.",simpleEffect:"The US takes Creek lands. The Native Coalition loses 3 troops everywhere.",roundRange:[8,10],apply:()=>({territoryChange:{territory:"creek_nation",newOwner:"us"},troopBonus:{faction:"us",count:2,territories:["creek_nation"]},troopPenalty:{faction:"native",count:3}}),quiz:{question:"Who fought alongside Andrew Jackson's US troops at Horseshoe Bend?",choices:["500 Cherokee and 100 Lower Creek allies","French soldiers from Louisiana","Spanish troops from Florida","Only American regulars fought in the battle"],correctIndex:0,explanation:'Jackson\'s force included Cherokee and Lower Creek allies, showing that the conflict was not simply "settlers vs. Natives." Over 800 Red Stick warriors were killed, and the resulting treaty forced the Creek to cede 23 million acres.',simpleQuestion:"Who fought alongside Jackson's US troops at Horseshoe Bend?",simpleChoices:["500 Cherokee and 100 Creek allies","French soldiers from Louisiana","Spanish troops from Florida","Only American soldiers fought there"],simpleExplanation:"Cherokee and Creek people fought alongside Jackson. Not all Native people were on the same side. Over 800 Red Stick fighters were killed in this battle.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"plattsburgh",title:"Battle of Plattsburgh",year:1814,description:"An outnumbered American force defeats a major British invasion from Canada at Plattsburgh Bay.",didYouKnow:"The British invasion force of 10,000+ veterans vastly outnumbered the 3,400 American defenders. But American Commodore Macdonough won the naval battle on Lake Champlain, cutting British supply lines. British General Prevost retreated despite his numerical advantage. News of this defeat convinced British negotiators at Ghent to accept peace.",effect:"British loses 3 troops from Montreal. +3 Nationalism.",simpleDescription:"A small American force beat a much bigger British army at Plattsburgh. This helped end the war.",simpleDidYouKnow:"The British had over 10,000 soldiers. The Americans had only 3,400. But the Americans still won.",simpleEffect:"The British lose 3 troops from Montreal. Americans feel more patriotic.",roundRange:[9,11],apply:()=>({troopPenalty:{territory:"montreal",count:3},nationalismChange:3}),quiz:{question:"How did the British and American forces compare at the Battle of Plattsburgh?",choices:["10,000+ British vs only 3,400 Americans","Equal forces of about 5,000 each","3,000 British vs 8,000 Americans","20,000 British vs 15,000 Americans"],correctIndex:0,explanation:"Despite vastly outnumbering the defenders, the British retreated after Commodore Macdonough won the naval battle on Lake Champlain, cutting British supply lines. This defeat helped convince British negotiators at Ghent to accept peace.",simpleQuestion:"How many soldiers did each side have at Plattsburgh?",simpleChoices:["Over 10,000 British vs only 3,400 Americans","About 5,000 on each side","3,000 British vs 8,000 Americans","20,000 British vs 15,000 Americans"],simpleExplanation:"The British had more than 10,000 soldiers. The Americans only had 3,400. But the Americans won the battle on the lake. This cut off British supplies and made them retreat.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"british_veterans_arrive",title:"Peninsular War Veterans Arrive",year:1814,description:"With Napoleon exiled to Elba, battle-hardened British troops flood into North America.",didYouKnow:"These soldiers had spent years fighting Napoleon's armies across Spain and Portugal under the Duke of Wellington. They were among the finest soldiers in the world. Their arrival in 1814 shifted the war dramatically \u2014 enabling the Washington campaign, the attack on Baltimore, and the assault on New Orleans.",effect:"British gains +4 troops across Halifax, Montreal, and Upper Canada.",simpleDescription:"Experienced British soldiers arrived from Europe. They had been fighting Napoleon for years.",simpleDidYouKnow:"These soldiers were some of the best in the world. They had fought for years in Spain and Portugal.",simpleEffect:"The British get 4 extra troops at Halifax, Montreal, and Upper Canada.",roundRange:[9,11],apply:e=>{let{territoryOwners:t}=e;const n=["halifax","montreal","upper_canada"].filter(e=>"british"===t[e]);return 0===n.length?{}:{troopBonus:{faction:"british",count:4,territories:n}}},quiz:{question:"Where had the Peninsular War veterans fought before being sent to North America?",choices:["Spain and Portugal under the Duke of Wellington","Russia during Napoleon's invasion","Egypt against the Ottoman Empire","India against local rulers"],correctIndex:0,explanation:"These soldiers had spent years fighting Napoleon's armies across Spain and Portugal. They were among the finest soldiers in the world, and their arrival enabled the Washington campaign, the attack on Baltimore, and the assault on New Orleans.",simpleQuestion:"Where had these soldiers fought before coming to North America?",simpleChoices:["Spain and Portugal","Russia","Egypt","India"],simpleExplanation:"These soldiers spent years fighting in Spain and Portugal. They were some of the best fighters in the world. They helped the British attack Washington, Baltimore, and New Orleans.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"lundy_lane",title:"Battle of Lundy's Lane",year:1814,description:"One of the bloodiest battles of the war ends in a draw at Niagara. Both sides suffer heavy losses.",didYouKnow:"The battle raged for six hours, much of it in darkness, near Niagara Falls. Over 1,700 soldiers were killed or wounded. Winfield Scott, who had drilled American troops to professional standards, was badly wounded. Despite the tactical draw, the battle proved American regulars could match British veterans \u2014 a far cry from the humiliating defeats of 1812.",effect:"Niagara loses 4 troops total (penalty to current owner).",simpleDescription:"A very bloody battle happened near Niagara Falls. Both sides lost many soldiers. Nobody won.",simpleDidYouKnow:"The battle lasted six hours. Most of the fighting happened in the dark. Over 1,700 soldiers were killed or hurt.",simpleEffect:"Niagara loses 4 troops total. Both sides suffer.",roundRange:[9,11],apply:()=>({troopPenalty:{territory:"niagara",count:4}}),quiz:{question:"How long did the Battle of Lundy's Lane rage, and under what conditions?",choices:["Six hours, much of it in darkness","Two days of continuous fighting","Three hours in a blizzard","Thirty minutes at dawn"],correctIndex:0,explanation:"The battle raged for six hours, much of it in darkness near Niagara Falls. Over 1,700 soldiers were killed or wounded. Despite the draw, the battle proved American regulars could match British veterans.",simpleQuestion:"How long did the Battle of Lundy's Lane last?",simpleChoices:["Six hours, mostly in the dark","Two whole days","Three hours in a snowstorm","Thirty minutes at sunrise"],simpleExplanation:"The battle went on for six hours. Most of the fighting was in the dark near Niagara Falls. Over 1,700 soldiers were killed or hurt on both sides.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"treaty_of_ghent",title:"Treaty of Ghent Signed",year:1814,description:"Diplomats in Ghent sign a peace treaty restoring pre-war borders. But news travels slowly...",didYouKnow:'The negotiations in the Belgian city of Ghent lasted five months. The British initially demanded a Native buffer state, control of the Great Lakes, and territorial concessions. American victories at Plattsburgh and Baltimore weakened Britain\'s bargaining position. In the end, the treaty changed almost nothing \u2014 a "status quo ante bellum" that left the underlying issues unresolved.',primarySource:{quote:"All the under-signed Plenipotentiaries have agreed... that there shall be a firm and universal Peace between His Britannic Majesty and the United States.",attribution:"Treaty of Ghent, Article the First, December 24, 1814"},effect:"+5 Nationalism. The war winds down.",simpleDescription:"Leaders signed a peace deal in Belgium. Things went back to how they were before the war.",simpleDidYouKnow:"At first, Britain wanted a Native homeland, control of the Great Lakes, and American land. But the talks lasted five months, and in the end the treaty changed almost nothing. Both sides kept what they had before.",simpleEffect:"Americans feel more patriotic. The war is ending.",roundRange:[11,12],apply:()=>({nationalismChange:5}),quiz:{question:"What was Britain's initial demand during the Treaty of Ghent negotiations?",choices:["A Native buffer state, control of the Great Lakes, and territorial concessions","Full American surrender and annexation","Payment of $10 million in reparations","Return of all British deserters"],correctIndex:0,explanation:'Negotiations lasted five months. American victories at Plattsburgh and Baltimore weakened Britain\'s position. In the end, the treaty restored pre-war borders \u2014 "status quo ante bellum" \u2014 leaving the underlying issues unresolved.',simpleQuestion:"What did Britain first ask for during the peace talks?",simpleChoices:["A Native homeland, the Great Lakes, and American land","America to give up completely","$10 million to pay for the war","All British sailors returned"],simpleExplanation:"The talks lasted five months. At first, Britain wanted a lot. But American wins at Plattsburgh and Baltimore made Britain accept peace. Everything went back to how it was before the war.",reward:{nationalism:3},penalty:{nationalism:-2}}},{id:"battle_new_orleans",title:"Battle of New Orleans",year:1815,description:"Andrew Jackson wins a stunning victory at New Orleans \u2014 fought after the peace treaty was signed, but before news arrived.",didYouKnow:"Jackson assembled a remarkable force: US regulars, Kentucky and Tennessee militia, free Black soldiers, Choctaw warriors, French-speaking Creoles, and the pirate Jean Lafitte's men. Behind cotton-bale barricades, they annihilated a British force of 8,000 in just 30 minutes. British losses: 2,042. American losses: 71. It was the most lopsided major battle in American history.",primarySource:{quote:"I will smash them, so help me God!",attribution:"Major General Andrew Jackson, before the Battle of New Orleans, January 1815"},effect:"US gains +4 troops at New Orleans. +15 Nationalism.",simpleDescription:"Andrew Jackson won a huge battle at New Orleans. It happened after peace was signed, but nobody knew yet.",simpleDidYouKnow:"The British lost over 2,000 soldiers. The Americans lost only 71. Jackson's army had all kinds of people \u2014 soldiers, pirates, free Black fighters, and Native warriors all fighting together.",simpleEffect:"The US gets 4 extra troops at New Orleans. Americans feel very patriotic.",roundRange:[11,12],apply:()=>({troopBonus:{faction:"us",count:4,territories:["new_orleans"]},nationalismChange:15}),quiz:{question:"What were the casualty numbers at the Battle of New Orleans?",choices:["British: 2,042 \u2014 American: 71","British: 500 \u2014 American: 300","British: 71 \u2014 American: 2,042","Both sides lost about 1,000 each"],correctIndex:0,explanation:"It was the most lopsided major battle in American history. Behind cotton-bale barricades, Jackson's diverse force annihilated 8,000 British troops in just 30 minutes. The battle was fought after the peace treaty was signed, but before news arrived.",simpleQuestion:"How many soldiers died on each side at New Orleans?",simpleChoices:["British: 2,042 -- American: 71","British: 500 -- American: 300","British: 71 -- American: 2,042","About 1,000 on each side"],simpleExplanation:"The British lost 2,042 soldiers. The Americans only lost 71. Jackson's fighters hid behind walls made of cotton bales. The battle only lasted about 30 minutes.",reward:{troops:2},penalty:{nationalism:-3}}},{id:"hartford_convention",title:"Hartford Convention",year:1814,description:"New England Federalists meet in Hartford to discuss secession, but the war's end makes them look treasonous.",didYouKnow:"The Hartford Convention met in secret, which fueled rumors of treason. Their actual proposals were moderate \u2014 constitutional amendments to limit presidential power and war declarations. But when news of peace and Jackson's victory arrived simultaneously, the delegates appeared to be sore losers at best, traitors at worst. The Federalist Party never recovered.",effect:"If US is winning: +5 Nationalism (Federalists humiliated). If losing: -5 Nationalism.",simpleDescription:"Some leaders from New England had a secret meeting. People thought they were talking about leaving the country, but their ideas were actually mild \u2014 they just wanted to change some rules.",simpleDidYouKnow:"The meeting was secret, so people feared the worst. But the real ideas were mild. When the war ended, these leaders looked like traitors anyway. Their political party never won again.",simpleEffect:"If the US is winning, people feel more patriotic. If losing, people feel less patriotic.",roundRange:[10,12],apply:e=>{let{scores:t}=e;return{nationalismChange:(t.us||0)>=(t.british||0)?5:-5}},quiz:{question:"Were the Hartford Convention's actual proposals radical or moderate?",choices:["Moderate \u2014 constitutional amendments to limit presidential power","Radical \u2014 they voted to secede from the Union","Radical \u2014 they declared war on the US government","Moderate \u2014 they only asked for lower taxes"],correctIndex:0,explanation:"The convention met in secret, fueling rumors of treason. Their actual proposals were moderate constitutional amendments. But when peace and Jackson's victory arrived, the delegates appeared treasonous. The Federalist Party never recovered.",simpleQuestion:"Were the ideas from the Hartford Convention extreme or mild?",simpleChoices:["Mild -- they just wanted to change some rules","Extreme -- they voted to leave the country","Extreme -- they declared war on the US","Mild -- they only asked for lower taxes"],simpleExplanation:"The meeting was secret, so people thought it was about treason. The ideas were actually mild. But when the war ended, these leaders looked like traitors. Their party fell apart.",reward:{nationalism:3},penalty:{nationalism:-2}}},{id:"impressment_ends",title:"Impressment Effectively Ends",year:1815,description:"With the Napoleonic Wars over, Britain no longer needs to press American sailors into service.",didYouKnow:'The Treaty of Ghent never mentioned impressment \u2014 the very issue that caused the war. The practice simply stopped because Britain no longer needed extra sailors. This irony means the war\'s primary cause was resolved not by fighting, but by events in Europe. The War of 1812 was, in many ways, a "second front" of the Napoleonic Wars.',effect:"+3 Nationalism. A root cause of the war is resolved.",simpleDescription:"Britain stopped taking American sailors and making them work on British ships. The war in Europe was over, so they did not need extra sailors.",simpleDidYouKnow:"The peace treaty never talked about taking sailors. Britain just stopped doing it on their own.",simpleEffect:"Americans feel more patriotic. A big reason for the war is gone.",roundRange:[11,12],apply:()=>({nationalismChange:3}),quiz:{question:"Was impressment mentioned in the Treaty of Ghent?",choices:["No \u2014 the practice simply stopped because Britain no longer needed extra sailors","Yes \u2014 Britain formally agreed to end the practice","Yes \u2014 both sides agreed to stop pressing sailors","No \u2014 but a separate treaty specifically addressed it"],correctIndex:0,explanation:"The Treaty of Ghent never mentioned impressment \u2014 the very issue that caused the war. The practice simply stopped because Britain no longer needed extra sailors after the Napoleonic Wars ended. The war's primary cause was resolved by events in Europe, not fighting.",simpleQuestion:"Did the peace treaty say anything about taking American sailors?",simpleChoices:["No -- Britain just stopped because they did not need more sailors","Yes -- Britain promised to stop","Yes -- both sides agreed to stop","No -- but a different agreement covered it"],simpleExplanation:"The peace treaty never talked about taking sailors. That was the main reason for the war! Britain just stopped doing it because the war in Europe ended. They did not need extra sailors anymore.",reward:{nationalism:3},penalty:{nationalism:-2}}},{id:"american_manufacturing_boom",title:"American Manufacturing Boom",year:1814,description:"Cut off from British goods, American factories spring up across New England and the Mid-Atlantic.",didYouKnow:"Before the war, Americans imported most manufactured goods from Britain. The blockade forced them to build their own factories. Cotton mills, iron foundries, and other industries sprouted up. After the war, Congress passed the Tariff of 1816 \u2014 the first protectionist tariff \u2014 to shield these new industries. The war inadvertently kickstarted the American Industrial Revolution.",effect:"US gains +1 troop in New York and Ohio Valley. +3 Nationalism.",simpleDescription:"Americans could not buy British goods anymore. So they built their own factories to make things.",simpleDidYouKnow:"After the war, Congress passed the Tariff of 1816 to protect these new American factories from cheaper British goods.",simpleEffect:"The US gets 1 extra troop in New York and Ohio Valley. Americans feel more patriotic.",roundRange:[8,12],apply:e=>{let{territoryOwners:t}=e;const n=["new_york","ohio_valley"].filter(e=>"us"===t[e]);return 0===n.length?{nationalismChange:3}:{troopBonus:{faction:"us",count:1,territories:n},nationalismChange:3}},quiz:{question:"What tariff was passed after the war to protect new American industries?",choices:["The Tariff of 1816","The Tariff of 1812","The Embargo Act of 1807","The Navigation Act of 1815"],correctIndex:0,explanation:"The British blockade forced Americans to build their own factories. After the war, Congress passed the Tariff of 1816 \u2014 the first protectionist tariff \u2014 to shield these new industries. The war inadvertently kickstarted the American Industrial Revolution.",simpleQuestion:"What law did Congress pass to help new American factories?",simpleChoices:["The Tariff of 1816","The Tariff of 1812","The Embargo Act of 1807","The Navigation Act of 1815"],simpleExplanation:"The British blockade made Americans build their own factories. After the war, Congress passed the Tariff of 1816. This law made British goods cost more so people would buy American-made things.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"laura_secord",title:"Laura Secord's Warning",year:1813,description:"Laura Secord walks 20 miles through enemy territory to warn British forces of an American attack at Beaver Dams.",didYouKnow:"Laura Secord walked through swamps, forests, and enemy-held territory to deliver her warning. The resulting Battle of Beaver Dams was a complete British-Native victory, capturing over 500 American troops. Secord received little recognition during her lifetime, but she is now one of Canada's most celebrated national heroes \u2014 and yes, the famous chocolate company is named after her.",effect:"British gains +2 troops at Niagara.",simpleDescription:"Laura Secord walked 20 miles through dangerous land to warn the British about an American attack.",simpleDidYouKnow:"A famous Canadian chocolate company is named after Laura Secord. She is a hero in Canada.",simpleEffect:"The British get 2 extra troops at Niagara.",roundRange:[5,7],apply:e=>{let{territoryOwners:t}=e;return"british"===t.niagara?{troopBonus:{faction:"british",count:2,territories:["niagara"]}}:{}},quiz:{question:"What is Laura Secord famous for in modern Canadian culture?",choices:["A famous chocolate company is named after her","Her face appears on the Canadian $20 bill","A major Canadian holiday celebrates her","The capital of Ontario was renamed in her honor"],correctIndex:0,explanation:"Laura Secord walked 20 miles through swamps and enemy territory to deliver her warning. She received little recognition during her lifetime but is now one of Canada's most celebrated heroes \u2014 and yes, the famous chocolate company is named after her.",simpleQuestion:"What is Laura Secord famous for in Canada today?",simpleChoices:["A chocolate company is named after her","Her face is on the Canadian $20 bill","A big holiday celebrates her","The capital of Ontario was renamed for her"],simpleExplanation:"Laura Secord walked 20 miles through swamps to deliver a warning. She is a hero in Canada now. A famous chocolate company is named after her.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"dolley_madison",title:"Dolley Madison Saves the Portrait",year:1814,description:"As the British approach Washington, First Lady Dolley Madison saves George Washington's portrait from the burning White House.",didYouKnow:"With British troops just miles away, Dolley Madison refused to leave until the large portrait of George Washington was cut from its frame and loaded onto a wagon. She also saved copies of the Declaration of Independence and other state papers. Her courage under fire made her an American icon and showed that the spirit of the nation couldn't be burned.",primarySource:{quote:"Our kind friend, Mr. Carroll, has come to hasten my departure, and is in a very bad humor with me because I insist on waiting until the large picture of Gen. Washington is secured.",attribution:"Dolley Madison, letter to her sister Lucy, August 23, 1814"},effect:"+5 Nationalism.",simpleDescription:"Dolley Madison saved a big painting of George Washington from the White House before the British burned it.",simpleDidYouKnow:"She also saved important government papers. She would not leave until the painting was safe.",simpleEffect:"Americans feel more patriotic because of Dolley Madison's bravery.",roundRange:[9,11],apply:()=>({nationalismChange:5}),quiz:{question:"What famous artwork did Dolley Madison save from the burning White House?",choices:["A large portrait of George Washington by Gilbert Stuart","The original Declaration of Independence","A painting of the Battle of Bunker Hill","Benjamin Franklin's portrait by Charles Willson Peale"],correctIndex:0,explanation:"Dolley Madison refused to leave until George Washington's large portrait was cut from its frame and loaded onto a wagon. She also saved copies of state papers. Her courage under fire made her an American icon.",simpleQuestion:"What did Dolley Madison save from the White House?",simpleChoices:["A big painting of George Washington","The Declaration of Independence","A painting of the Battle of Bunker Hill","A painting of Benjamin Franklin"],simpleExplanation:"Dolley Madison saved a large painting of George Washington. She would not leave until it was safe. She also saved important papers. Her bravery made her famous.",reward:{nationalism:3},penalty:{nationalism:-2}}},{id:"chateauguay",title:"Battle of Chateauguay",year:1813,description:"Lieutenant Colonel de Salaberry and 300 Canadian Voltigeurs repel an American force of 3,000+ marching toward Montreal.",didYouKnow:"Charles de Salaberry used buglers positioned throughout the forest to create the illusion of a massive army. The Americans, convinced they were surrounded, retreated despite outnumbering the defenders nearly ten to one. It was one of the most remarkable defensive victories of the war.",primarySource:{quote:"I have won a victory mounted on a wooden horse.",attribution:"Charles de Salaberry, after the Battle of Chateauguay, 1813"},effect:"British gains +2 troops in Great Lakes Theater. Canadian defenders hold firm.",simpleDescription:"A small group of Canadian soldiers tricked a much bigger American army into retreating near Montreal.",simpleDidYouKnow:"De Salaberry had buglers blow horns from different spots in the forest. The Americans thought they were surrounded and ran away.",simpleEffect:"The British get 2 extra troops near the Great Lakes.",roundRange:[6,8],apply:()=>({troopBonus:{faction:"british",count:2,theater:"Great Lakes"}}),quiz:{question:"How did de Salaberry defeat a much larger American force at Chateauguay?",choices:["He used buglers in the forest to make his force seem much larger","He received reinforcements from Britain at the last moment","He used cannon fire to destroy the American supply lines","He flooded the river to block the American advance"],correctIndex:0,explanation:"De Salaberry positioned buglers throughout the forest to create the illusion of a massive army. With only about 300 men, he convinced the American commander to withdraw over 3,000 troops.",simpleQuestion:"How did de Salaberry trick the Americans at Chateauguay?",simpleChoices:["He used buglers to make his small army sound much bigger","He got extra soldiers from Britain just in time","He used big cannons to stop them","He flooded the river to block them"],simpleExplanation:"De Salaberry had buglers blow horns from many spots in the forest. The Americans thought a huge army was surrounding them. They ran away even though they had way more soldiers.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"chryslers_farm",title:"Battle of Crysler's Farm",year:1813,description:"A small British force defeats a much larger American army at Crysler's Farm on the St. Lawrence River, ending the American campaign against Montreal.",didYouKnow:"At Crysler's Farm on November 11, 1813, about 800 British regulars under Lieutenant Colonel Joseph Morrison defeated over 2,500 Americans in a textbook defensive battle. Combined with de Salaberry's victory at Chateauguay two weeks earlier, the twin defeats ended any realistic American hope of capturing Montreal \u2014 Canada's most important city.",primarySource:{quote:"The enemy's loss must be very considerable... our troops behaved with the greatest gallantry.",attribution:"Lieutenant Colonel Joseph Morrison, report on the Battle of Crysler's Farm, 1813"},effect:"British gains +2 troops in Great Lakes. US loses -1 Nationalism.",simpleDescription:"The British won another battle near the St. Lawrence River. The Americans could not capture Montreal.",simpleDidYouKnow:"Only 800 British soldiers beat over 2,500 Americans at Crysler's Farm. This plus the loss at Chateauguay meant the Americans could not take Montreal.",simpleEffect:"The British get 2 extra troops near the Great Lakes. Americans feel less patriotic.",roundRange:[6,8],apply:e=>{let{playerFaction:t}=e;return{troopBonus:{faction:"british",count:2,theater:"Great Lakes"},nationalismChange:"us"===t?-1:0}},quiz:{question:"What was the combined effect of the battles of Chateauguay and Crysler's Farm in 1813?",choices:["They ended the American campaign to capture Montreal","They gave the Americans control of the St. Lawrence River","They forced the British to surrender Upper Canada","They led to an immediate peace treaty"],correctIndex:0,explanation:"The twin defeats at Chateauguay (October) and Crysler's Farm (November) in 1813 ended the American campaign against Montreal. In both battles, smaller British and Canadian forces defeated much larger American armies.",simpleQuestion:"What happened after the Americans lost at both Chateauguay and Crysler's Farm?",simpleChoices:["They gave up trying to capture Montreal","They took control of the St. Lawrence River","The British surrendered Upper Canada","Both sides signed a peace treaty right away"],simpleExplanation:"After losing both battles, the Americans could not take Montreal. In both fights, small groups of British and Canadian soldiers beat much bigger American armies.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"frenchtown_massacre",title:"River Raisin Massacre",year:1813,description:'"Remember the Raisin!" After a British and Native victory at Frenchtown, wounded American prisoners are killed \u2014 sparking outrage across the frontier.',didYouKnow:'On January 22, 1813, a British-Native force defeated the Americans at the River Raisin near Frenchtown (modern-day Monroe, Michigan). The next day, Native warriors killed dozens of wounded American prisoners. The massacre became a powerful rallying cry \u2014 "Remember the Raisin!" \u2014 that fueled American recruitment in the West for the rest of the war. It remains the deadliest battle ever fought on Michigan soil.',primarySource:{quote:"Remember the Raisin!",attribution:"American rallying cry after the Frenchtown massacre, 1813"},effect:'Native gains +2 troops in Great Lakes. US gains +3 Nationalism ("Remember the Raisin!").',simpleDescription:'After a battle near the River Raisin, wounded American soldiers were killed. Americans were furious and shouted "Remember the Raisin!"',simpleDidYouKnow:'The battle happened where Monroe, Michigan is today. "Remember the Raisin!" became a war cry that made many Americans want to join the army.',simpleEffect:"Native fighters get 2 extra troops near the Great Lakes. Americans feel more patriotic.",roundRange:[3,5],apply:e=>{let{playerFaction:t}=e;return{troopBonus:{faction:"native",count:2,theater:"Great Lakes"},nationalismChange:"us"===t?3:0}},quiz:{question:"What happened at the River Raisin in January 1813 that became a famous rallying cry?",choices:['Wounded American prisoners were killed after the battle, sparking the cry "Remember the Raisin!"','American forces burned a British supply depot, crying "Remember the Raisin!"',"A massive flood destroyed an American fort on the river","A peace conference on the river broke down and fighting resumed"],correctIndex:0,explanation:'After the British-Native victory at Frenchtown, Native warriors killed dozens of wounded American prisoners. "Remember the Raisin!" became a powerful rallying cry that fueled American recruitment for the rest of the war.',simpleQuestion:'Why did Americans start shouting "Remember the Raisin!"?',simpleChoices:["Because wounded American soldiers were killed after a battle near the River Raisin","Because Americans burned a British fort on the river","Because a big flood destroyed an American camp","Because a peace meeting on the river went wrong"],simpleExplanation:'After a battle near the River Raisin, hurt American soldiers who could not fight back were killed. Americans were so angry that "Remember the Raisin!" became their battle cry.',reward:{nationalism:3},penalty:{troops:-1}}},{id:"colonial_marines",title:"Colonial Marines Form",year:1814,description:"The British form the Corps of Colonial Marines from formerly enslaved people who escaped to British lines, promising them freedom in exchange for military service.",didYouKnow:"During the war, the British offered freedom to any enslaved person who reached their lines. Roughly 3,000-5,000 people escaped slavery and joined the British, and several hundred formed the Corps of Colonial Marines. These men fought with distinction at the Battle of Bladensburg and in raids along the Chesapeake Bay. After the war, most were resettled as free people in Trinidad, Nova Scotia, or New Brunswick \u2014 never returned to slavery.",primarySource:{quote:"Be it known to all... that all those who may be disposed to emigrate from the United States will... be received on board His Majesty's Ships or Vessels of War.",attribution:"Vice Admiral Alexander Cochrane, British proclamation, April 1814"},effect:"British gains +1 troop in Chesapeake Theater. A story of freedom and courage.",simpleDescription:"Enslaved people escaped to the British side and became soldiers. The British promised them freedom.",simpleDidYouKnow:"About 3,000 to 5,000 enslaved people escaped to the British during the war. Some became soldiers called Colonial Marines. After the war, they lived as free people.",simpleEffect:"The British get 1 extra troop near the Chesapeake Bay.",roundRange:[7,9],apply:()=>({troopBonus:{faction:"british",count:1,theater:"Chesapeake"}}),quiz:{question:"What did the British promise enslaved people who escaped to their lines during the War of 1812?",choices:["Freedom and resettlement in British territories after the war","Payment in gold for each year of military service","Return to their owners after the war ended","Land in the American West"],correctIndex:0,explanation:"The British offered freedom to enslaved people who reached their lines. Roughly 3,000-5,000 people escaped slavery during the war. The Corps of Colonial Marines fought with distinction, and most were resettled as free people in Trinidad, Nova Scotia, or New Brunswick.",simpleQuestion:"What did the British promise enslaved people who came to their side?",simpleChoices:["They would be free and could live in British lands after the war","They would be paid in gold for helping","They would be sent back to their owners when the war ended","They would get land in the American West"],simpleExplanation:"The British promised freedom to enslaved people who escaped to them. Thousands of people escaped slavery this way. After the war, most lived as free people in Canada or the Caribbean.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"nancy_hart",title:"Nancy Hart's Resistance",year:1813,description:"Stories of frontier women like Nancy Hart defending their homes and families spread across the backcountry, symbolizing civilian resilience during wartime.",didYouKnow:"While most famous battles featured male soldiers, women on the frontier played critical roles in the war effort. They defended homesteads, organized supply networks, manufactured ammunition, and served as messengers. In many frontier communities, women were the primary defenders while their husbands were away fighting. Their contributions were rarely recorded in official histories but were essential to sustaining the war effort.",effect:"US gains +1 Nationalism from civilian determination on the frontier.",simpleDescription:"Women on the frontier defended their homes and helped the war effort in many ways.",simpleDidYouKnow:"While men were fighting, women protected homes, made bullets, carried messages, and organized supplies. Their help was very important even though history books often forgot about them.",simpleEffect:"Americans feel more patriotic because of brave people at home.",roundRange:[5,8],apply:e=>{let{playerFaction:t}=e;return{nationalismChange:"us"===t?1:0}},quiz:{question:"What role did frontier women play during the War of 1812?",choices:["They defended homesteads, made ammunition, organized supplies, and served as messengers","They were not involved in the war effort at all","They only worked as nurses in military hospitals","They served as official officers in the regular army"],correctIndex:0,explanation:"Frontier women played critical roles during the war \u2014 defending homesteads, manufacturing ammunition, organizing supply networks, and serving as messengers. Their contributions were essential but rarely recorded in official histories.",simpleQuestion:"How did women on the frontier help during the war?",simpleChoices:["They protected homes, made bullets, carried messages, and organized supplies","They did not help with the war at all","They only worked as nurses","They became officers in the army"],simpleExplanation:"Women on the frontier did many important things during the war. They protected their homes, made bullets, carried messages, and organized supplies. Most history books did not write about what they did.",reward:{nationalism:2},penalty:{nationalism:-1}}},{id:"economic_blockade_impact",title:"New England Smuggling",year:1813,description:"As the British blockade tightens, New England merchants defy their own government by smuggling goods to British Canada, deepening the nation's divisions.",didYouKnow:"New England, which had voted heavily against the war, saw smuggling to British Canada as justified civil disobedience. Some New England towns openly traded with the enemy, and the British deliberately left New England ports unblockaded until 1814 to encourage this division. The smuggling was so extensive that much of the British army in Canada was fed by American suppliers. This internal division nearly split the nation apart at the Hartford Convention.",effect:"US loses -1 Nationalism (division). British gains +1 troop in Maritime.",simpleDescription:"People in New England did not like the war. Some sold food and supplies to the British enemy.",simpleDidYouKnow:"The British did not block New England ports at first because they wanted New England to keep trading with them. Some American merchants fed the British army!",simpleEffect:"Americans feel less united. The British get 1 extra troop near the coast.",roundRange:[5,8],apply:e=>{let{playerFaction:t}=e;return{nationalismChange:"us"===t?-1:0,troopBonus:{faction:"british",count:1,theater:"Maritime"}}},quiz:{question:"Why did the British deliberately leave New England ports unblockaded early in the war?",choices:["To encourage New England merchants to keep smuggling goods to British Canada","Because the British navy was too weak to blockade all American ports","Because New England had already surrendered to Britain","To allow their own merchants to trade with New England"],correctIndex:0,explanation:"The British left New England ports open to encourage smuggling and deepen American divisions. New England had voted heavily against the war, and much of the British army in Canada was actually fed by American suppliers from New England.",simpleQuestion:"Why did the British not block New England ports at first?",simpleChoices:["They wanted New England to keep selling them food and supplies","Their navy was not strong enough","New England had already given up","They wanted to trade with New England merchants"],simpleExplanation:"The British left New England ports open on purpose. They wanted New England merchants to keep selling them food and supplies. This made Americans argue with each other about the war.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"uss_wasp",title:"USS Wasp Victories",year:1812,description:"The sloop USS Wasp captures HMS Frolic in a fierce close-range action, proving American sailors can match the Royal Navy ship for ship.",didYouKnow:"The USS Wasp's victory over HMS Frolic in October 1812 was one of several shocking American naval victories that stunned Britain. While the Royal Navy had over 600 warships to America's 16, American frigates and sloops were often better built and better crewed. However, hours after capturing Frolic, both ships were seized by the massive British ship-of-the-line HMS Poictiers \u2014 a reminder of Britain's overwhelming naval advantage.",primarySource:{quote:"In the annals of naval warfare, seldom has there been a more spirited engagement.",attribution:"Contemporary newspaper account of the Wasp vs. Frolic action, 1812"},effect:"US gains +2 troops in Maritime territories. Naval glory boosts morale.",simpleDescription:"The small American ship USS Wasp beat a British warship in a close battle at sea.",simpleDidYouKnow:"America only had 16 warships while Britain had over 600. But American ships were often built better and had better-trained crews.",simpleEffect:"The US gets 2 extra troops near the coast.",roundRange:[3,6],apply:()=>({troopBonus:{faction:"us",count:2,theater:"Maritime"}}),quiz:{question:"What happened to the USS Wasp just hours after it captured HMS Frolic?",choices:["Both ships were seized by the massive British ship-of-the-line HMS Poictiers","The Wasp sailed triumphantly back to Boston Harbor","A storm sank both ships off the coast of Virginia","The crew mutinied and surrendered to the British"],correctIndex:0,explanation:"Hours after the Wasp captured the Frolic, both ships were seized by HMS Poictiers \u2014 a huge British ship-of-the-line. It was a reminder that while American ships could win individual battles, Britain's overwhelming naval numbers gave it control of the seas.",simpleQuestion:"What happened right after the USS Wasp beat the British ship?",simpleChoices:["A much bigger British ship captured both of them","The Wasp sailed home to a big celebration","A storm sank both ships","The crew gave up and joined the British"],simpleExplanation:"Right after the Wasp won its battle, a much bigger British ship came along and captured both ships. Even though America could win small battles, Britain had way more ships overall.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"beaver_dams",title:"Battle of Beaver Dams",year:1813,description:"Laura Secord walks 20 miles through enemy territory to warn British forces. The resulting ambush at Beaver Dams captures over 500 American troops.",didYouKnow:"Laura Secord overheard American officers discussing their attack plans while they were quartered in her home. She walked 20 miles through swamps, forests, and enemy lines to reach the British outpost at Beaver Dams. Her warning allowed Mohawk warriors under Captain Dominique Ducharme and British troops to prepare a devastating ambush. Over 500 Americans were captured \u2014 one of the most complete victories of the entire war.",primarySource:{quote:"I was determined to put the Americans off the guard, and I was determined to go to warn the British.",attribution:"Laura Secord, describing her motivation for the dangerous journey"},effect:"British gains +2 troops in Great Lakes Theater. Laura Secord's courage saves the day.",simpleDescription:"A brave woman named Laura Secord walked 20 miles to warn the British about an American attack. The British won a big victory.",simpleDidYouKnow:"Laura Secord heard American soldiers talking about their plans in her own house. She walked through swamps and forests to warn the British. Over 500 Americans were captured.",simpleEffect:"The British get 2 extra troops near the Great Lakes.",roundRange:[5,7],apply:()=>({troopBonus:{faction:"british",count:2,theater:"Great Lakes"}}),quiz:{question:"How did Laura Secord learn about the American attack on Beaver Dams?",choices:["She overheard American officers discussing plans while quartered in her home","She intercepted a secret letter from an American spy","A British scout brought her the information","She discovered the plans while working at an American hospital"],correctIndex:0,explanation:"American officers were quartered in Secord's home and she overheard their attack plans. She then walked 20 miles through enemy territory to warn the British, enabling an ambush that captured over 500 American troops.",simpleQuestion:"How did Laura Secord find out about the American attack plan?",simpleChoices:["She heard American soldiers talking about it in her house","She found a secret letter from an American spy","A British scout told her about it","She learned about it at an American hospital"],simpleExplanation:"American soldiers stayed at Laura Secord's house and talked about their plans. She heard them and walked 20 miles through dangerous land to tell the British. Over 500 Americans were captured.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"fort_meigs",title:"Siege of Fort Meigs",year:1813,description:"William Henry Harrison holds Fort Meigs against a British-Native siege on the Maumee River, keeping the American foothold in the Northwest.",didYouKnow:'Fort Meigs, built by Harrison on the Maumee River in northwest Ohio, was besieged twice in 1813 by British and Native forces under Henry Procter and Tecumseh. Harrison\'s troops survived the first siege by building massive earthwork walls that absorbed cannon fire. During a sortie to destroy British batteries, Kentucky reinforcements were ambushed and many were captured and killed \u2014 contributing to the "Remember the Raisin!" anger on the frontier.',effect:"US gains +1 troop in Great Lakes Theater. Harrison's defense holds.",simpleDescription:"General Harrison defended Fort Meigs against a British and Native attack in Ohio.",simpleDidYouKnow:"Fort Meigs was attacked twice. Harrison built thick dirt walls that stopped cannonballs. The fort held both times.",simpleEffect:"The US gets 1 extra troop near the Great Lakes.",roundRange:[4,6],apply:()=>({troopBonus:{faction:"us",count:1,theater:"Great Lakes"}}),quiz:{question:"How did Harrison's troops at Fort Meigs survive British cannon bombardment?",choices:["They built massive earthwork walls that absorbed the cannonballs","They dug underground tunnels to escape the shelling","They launched a surprise night attack on the British cannons","They received reinforcements from Lake Erie by boat"],correctIndex:0,explanation:"Harrison's troops built massive earthwork walls that absorbed cannon fire. The fort survived two sieges in 1813, maintaining the American foothold in the Northwest until Perry's victory on Lake Erie changed the balance of power.",simpleQuestion:"How did the soldiers at Fort Meigs protect themselves from cannonballs?",simpleChoices:["They built very thick dirt walls that stopped the cannonballs","They dug tunnels underground to hide","They attacked the British cannons at night","They got help from boats on Lake Erie"],simpleExplanation:"The soldiers built really thick walls out of dirt. The cannonballs just got stuck in the dirt! The fort survived two attacks.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"detroit_recaptured",title:"Recapture of Detroit",year:1813,description:"After Perry's victory on Lake Erie, American forces retake Detroit without a fight. The humiliation of Hull's surrender is avenged.",didYouKnow:"After Perry's victory gave the Americans control of Lake Erie in September 1813, the British position at Detroit became untenable. British commander Henry Procter abandoned Detroit and retreated east along the Thames River, pursued by Harrison's army. The recapture of Detroit \u2014 lost in the war's most embarrassing moment \u2014 was a major morale boost for the American public.",effect:"If US does not control Detroit, they reclaim it with 3 troops.",simpleDescription:"After winning on Lake Erie, the Americans took back Detroit. The British had to run away.",simpleDidYouKnow:"When the Americans won on Lake Erie, the British could no longer get supplies to Detroit. They left the city and tried to escape, but the Americans chased them.",simpleEffect:"If the US lost Detroit, they get it back with 3 troops.",roundRange:[6,8],apply:e=>{let{territoryOwners:t}=e;return"us"!==t.detroit?{territoryChange:{territory:"detroit",newOwner:"us"},troopBonus:{faction:"us",count:3,territories:["detroit"]},nationalismChange:3}:{nationalismChange:1}},quiz:{question:"Why did the British abandon Detroit in 1813?",choices:["Perry's victory on Lake Erie cut off their supply line","A massive American army attacked from three directions","Native allies refused to defend the city","A fire destroyed the British fortifications"],correctIndex:0,explanation:"After Perry won the Battle of Lake Erie, the British could no longer supply or reinforce Detroit by water. Commander Procter abandoned the city and retreated east, where Harrison's army caught and defeated him at the Battle of the Thames.",simpleQuestion:"Why did the British leave Detroit?",simpleChoices:["The Americans won on Lake Erie so the British could not get supplies","A huge American army attacked from all sides","Native fighters would not help defend the city","A fire burned down the British walls"],simpleExplanation:"When Perry won the battle on Lake Erie, the British could not get food or supplies to Detroit anymore. They had to leave the city and run away.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"native_displacement",title:"Native Removal Begins",year:1815,description:"With the war over and British support gone, American settlers flood into Native territories. Forced removal and treaty violations accelerate across the frontier.",didYouKnow:"The Treaty of Ghent (1814) included provisions for restoring Native lands to pre-war boundaries, but the United States largely ignored these terms. Without British military support, Native nations had no leverage to enforce treaty provisions. Within 15 years, the Indian Removal Act of 1830 would force tens of thousands of Native people from their ancestral homelands on the Trail of Tears \u2014 a direct consequence of the power shift caused by the War of 1812.",effect:"Native Coalition loses -2 troops across all territories. The post-war displacement begins.",simpleDescription:"After the war, Americans moved onto Native lands. The promises made in the peace treaty were broken.",simpleDidYouKnow:"The peace treaty said Native lands should be given back. But America did not follow the treaty. Within 15 years, thousands of Native people would be forced to leave their homes.",simpleEffect:"The Native Coalition loses 2 troops everywhere.",roundRange:[10,12],apply:()=>({troopPenalty:{faction:"native",count:2}}),quiz:{question:"What happened to the Treaty of Ghent's provisions about restoring Native lands?",choices:["The United States largely ignored them and continued expanding into Native territory","They were fully honored, and all Native lands were restored","Britain enforced the terms with military force","Native nations voluntarily gave up their land claims"],correctIndex:0,explanation:"Although the Treaty of Ghent included provisions to restore Native lands, the U.S. largely ignored them. Without British military backing, Native nations had no way to enforce the treaty. This led to the Indian Removal Act and the Trail of Tears.",simpleQuestion:"Did America follow the peace treaty's rules about giving back Native lands?",simpleChoices:["No \u2014 America ignored the rules and kept taking Native land","Yes \u2014 all Native lands were given back","Britain made America follow the rules","Native nations decided they did not want their land back"],simpleExplanation:"America did not follow the rules about Native land. Without the British to help them, Native nations could not make America keep its promises. This led to even more Native people losing their homes.",reward:{troops:1},penalty:{nationalism:-2}}},{id:"war_financing",title:"War Debt Crisis",year:1814,description:"Both sides struggle to pay for the war. The American treasury is nearly bankrupt, and British taxpayers demand an end to expensive overseas campaigns.",didYouKnow:"By 1814, the U.S. government was nearly bankrupt. New England banks refused to lend money to fund a war they opposed, and the British blockade had destroyed customs revenue \u2014 the government's main income source. Britain, meanwhile, had spent over 20 years fighting Napoleon and its people were exhausted. Both sides' financial desperation was a major factor in bringing them to the peace table at Ghent.",effect:"Both factions lose -1 troop from war exhaustion.",simpleDescription:"Both America and Britain were running out of money. The war was too expensive for everyone.",simpleDidYouKnow:"The American government was almost out of money. Banks in New England would not lend money for a war they did not like. Britain had been fighting wars for 20 years and was tired too.",simpleEffect:"Both sides lose 1 troop because everyone is running out of supplies.",roundRange:[8,10],apply:()=>({troopPenalty:{faction:"us",count:1},troopPenalty2:{faction:"british",count:1}}),quiz:{question:"Why was the U.S. government nearly bankrupt by 1814?",choices:["New England banks refused to lend money and the British blockade destroyed customs revenue","Congress had voted to stop funding the war","The army had spent all the money on building forts","France demanded repayment of Revolutionary War debts"],correctIndex:0,explanation:"By 1814, New England banks refused to fund a war they opposed, and the British blockade destroyed customs revenue \u2014 the government's main income. This financial crisis was a major factor pushing both sides toward peace at Ghent.",simpleQuestion:"Why did the American government run out of money during the war?",simpleChoices:["Banks would not lend money and the British blockade stopped trade income","Congress voted to stop paying for the war","The army spent everything on building forts","France wanted old debts paid back"],simpleExplanation:"Banks in New England would not lend money because they did not want the war. The British also blocked ships from coming in, so the government could not collect taxes on trade. Both sides were running out of money.",reward:{troops:1},penalty:{nationalism:-2}}}];function Ti(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=_i.filter(n=>!t.includes(n.id)&&(!n.roundRange||e>=n.roundRange[0]&&e<=n.roundRange[1]));return 0===n.length?null:n[Math.floor(Math.random()*n.length)]}const Si=[{id:"kc_war_causes",question:"Which of the following was a major cause of the War of 1812?",choices:["British impressment of American sailors","Dispute over the Louisiana Purchase","The assassination of a U.S. diplomat","A trade war with France"],correctIndex:0,explanation:"Britain was forcibly recruiting (impressing) American sailors into the Royal Navy, which was a primary cause of the war. Between 1803 and 1812, the British impressed an estimated 6,000-10,000 American citizens.",simpleQuestion:"What was one big reason the United States went to war with Britain in 1812?",simpleChoices:["Britain was taking American sailors and making them work on British ships","The two countries argued about the Louisiana Purchase","Someone killed a U.S. leader in another country","America and France were fighting over trade"],simpleExplanation:"Britain forced American sailors to work on British ships. This was called impressment. It made Americans very angry and helped start the war.",roundRange:[2,4],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_war_hawks",question:'Who were the "War Hawks" and what did they want?',choices:["Congressmen who pushed for war with Britain and expansion into Canada","British generals planning the invasion of Washington D.C.","Native American leaders allied with Tecumseh","A group of New England merchants opposed to the war"],correctIndex:0,explanation:"War Hawks like Henry Clay (Kentucky) and John C. Calhoun (South Carolina) were young Congressional leaders who demanded war with Britain. They saw an opportunity to expand into British Canada and end British support for Native resistance on the frontier.",simpleQuestion:'Who were the "War Hawks" and what did they want?',simpleChoices:["Members of Congress who wanted to go to war with Britain and take over Canada","British generals who planned to attack Washington D.C.","Native American leaders who worked with Tecumseh","Merchants from New England who did not want the war"],simpleExplanation:"The War Hawks were young leaders in Congress like Henry Clay. They wanted to fight Britain and take over Canada. They also wanted to stop Britain from helping Native Americans on the frontier.",roundRange:[1,3],reward:{type:"nationalism",count:3,description:"+3 Nationalism"}},{id:"kc_war_declaration",question:"How close was the vote to declare war on Britain in 1812?",choices:["It was the closest war vote in U.S. history \u2014 79-49 in the House, 19-13 in the Senate","It was unanimous \u2014 every member of Congress voted for war","Congress never voted \u2014 the President declared war unilaterally","It passed overwhelmingly with only 3 dissenting votes"],correctIndex:0,explanation:"The War of 1812 was declared by the narrowest margin of any war vote in American history. New England and the Federalist Party largely opposed the war, while Southern and Western states supported it. This regional divide would shape the entire conflict.",simpleQuestion:"How close was the vote in Congress to start the War of 1812?",simpleChoices:["It was the closest war vote ever \u2014 many people in Congress voted no","Everyone in Congress voted yes for the war","Congress never voted \u2014 the President started the war on his own","Almost everyone voted yes with only 3 people saying no"],simpleExplanation:"The vote to start the war was very close. It was the closest war vote in American history. People in the North mostly said no, and people in the South and West mostly said yes.",roundRange:[1,3],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_orders_in_council",question:'What were the British "Orders in Council" that angered Americans?',choices:["Decrees that restricted neutral nations from trading with France and its allies","Military orders to invade the American frontier","Laws banning American ships from British ports","Orders to arm Native Americans with British weapons"],correctIndex:0,explanation:"The Orders in Council (1807) were British trade restrictions during the Napoleonic Wars that prohibited neutral countries (including the U.S.) from trading with France. American merchants lost ships and cargoes, fueling anger toward Britain. Ironically, Britain repealed the Orders just days before the U.S. declared war \u2014 but news traveled too slowly to prevent the conflict.",simpleQuestion:'What were the British "Orders in Council" that made Americans angry?',simpleChoices:["Rules that stopped America from trading with France and other countries","Orders for the British army to attack the American frontier","Laws that kept American ships out of British ports","Orders to give weapons to Native Americans"],simpleExplanation:"The Orders in Council were British rules that stopped Americans from trading with France. American merchants lost their ships and goods. This made Americans very angry at Britain.",roundRange:[1,4],reward:{type:"nationalism",count:2,description:"+2 Nationalism"},required:!0},{id:"kc_embargo_act",question:"What was the Embargo Act of 1807 and why did it fail?",choices:["A U.S. trade ban on all foreign nations that hurt American merchants more than Britain","A British law blocking all American trade with Europe","A French blockade of the American coast","A treaty between the U.S. and Spain restricting trade"],correctIndex:0,explanation:"President Jefferson's Embargo Act banned all U.S. foreign trade, hoping to pressure Britain and France. Instead, it devastated the American economy \u2014 especially in New England \u2014 while barely affecting Britain. It was repealed in 1809 and replaced with weaker measures, but the failure convinced many Americans that only war could protect their rights.",simpleQuestion:"What was the Embargo Act of 1807 and why did it not work?",simpleChoices:["A U.S. law that stopped all trade with other countries but hurt Americans more than Britain","A British law that blocked American trade with Europe","A French plan to stop ships from reaching America","A deal between the U.S. and Spain to limit trade"],simpleExplanation:"President Jefferson banned all trade with other countries. He hoped this would hurt Britain. But it hurt American businesses much more, so it was ended in 1809.",roundRange:[1,3],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_tecumseh",question:"What was Tecumseh's primary goal in the War of 1812?",choices:["To create a unified Native confederacy to resist American expansion","To become the governor of Indiana Territory","To help the British conquer all of North America","To negotiate a peace treaty with the United States"],correctIndex:0,explanation:"Tecumseh, a Shawnee leader, sought to unite dozens of Native nations into a confederacy strong enough to stop American settlers from taking Native lands in the Northwest Territory. His vision was one of the most ambitious pan-Native political movements in history, and his alliance with Britain gave his confederacy military support.",simpleQuestion:"What was Tecumseh trying to do during the War of 1812?",simpleChoices:["He wanted to bring Native nations together to stop Americans from taking their land","He wanted to become the governor of Indiana","He wanted to help Britain take over all of North America","He wanted to make a peace deal with the United States"],simpleExplanation:"Tecumseh was a Shawnee leader. He wanted to unite many Native nations into one group. Together, they could stop American settlers from taking Native lands.",roundRange:[1,4],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_hull_detroit",question:"Why was General Hull's surrender of Detroit significant?",choices:["It was a shocking defeat that embarrassed the American military early in the war","It ended the War of 1812 immediately","It gave the Americans control of Lake Erie","It led to the burning of Washington D.C."],correctIndex:0,explanation:"General William Hull surrendered Fort Detroit to a smaller British and Native force under General Brock without a fight in August 1812. Brock bluffed Hull into believing he faced overwhelming numbers and that Native warriors would massacre civilians. The shocking surrender demoralized the nation and led to Hull's court-martial.",simpleQuestion:"Why was General Hull giving up Detroit a big deal?",simpleChoices:["It was a shocking loss that made Americans feel bad about the war early on","It ended the War of 1812 right away","It gave Americans control of Lake Erie","It caused the British to burn Washington D.C."],simpleExplanation:"General Hull gave up Fort Detroit without a fight. The British tricked him into thinking they had more soldiers. This loss shocked the whole country early in the war.",roundRange:[2,4],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}},{id:"kc_brock",question:'Why is Sir Isaac Brock remembered as the "Hero of Upper Canada"?',choices:["He captured Detroit and died defending Niagara at Queenston Heights","He signed the Treaty of Ghent ending the war","He led the burning of Washington D.C.","He defeated the American navy on Lake Erie"],correctIndex:0,explanation:"Major General Isaac Brock captured Detroit through brilliant bluffing and aggressive action, then rushed to defend the Niagara frontier. He was killed leading a charge at the Battle of Queenston Heights in October 1812. His early victories saved Upper Canada from American invasion and made him a Canadian national hero.",simpleQuestion:'Why is Sir Isaac Brock called the "Hero of Upper Canada"?',simpleChoices:["He captured Detroit and died fighting at the Battle of Queenston Heights","He signed the peace treaty that ended the war","He led the attack that burned Washington D.C.","He beat the American navy on Lake Erie"],simpleExplanation:"General Brock tricked the Americans and captured Detroit. Then he fought to protect Canada at Queenston Heights, where he died. Canadians see him as a great hero.",roundRange:[2,5],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_tenskwatawa",question:"Who was Tenskwatawa, and what role did he play in the Native resistance?",choices:['Tecumseh\'s brother, a spiritual leader known as "The Prophet" who inspired Native unity',"A British general who commanded Native forces","An American diplomat who negotiated with Native nations","A French fur trader who supplied weapons to the Natives"],correctIndex:0,explanation:'Tenskwatawa ("The Prophet") was Tecumseh\'s brother who led a spiritual revitalization movement among Native peoples. He preached rejection of American customs and a return to traditional ways. He established Prophetstown on the Tippecanoe River, which became the center of the resistance movement until Harrison destroyed it in 1811.',simpleQuestion:"Who was Tenskwatawa and what did he do?",simpleChoices:['Tecumseh\'s brother, a spiritual leader called "The Prophet" who helped unite Native peoples',"A British general who led Native fighters","An American leader who talked with Native nations","A French fur trader who gave weapons to Native peoples"],simpleExplanation:'Tenskwatawa was Tecumseh\'s brother. People called him "The Prophet." He told Native peoples to keep their traditions and not follow American ways. He built a town called Prophetstown.',roundRange:[1,5],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}},{id:"kc_jackson_background",question:"Before the War of 1812, Andrew Jackson was known primarily as:",choices:["A Tennessee militia commander and frontier politician","A distinguished naval officer","The Governor of Louisiana Territory","A West Point military academy professor"],correctIndex:0,explanation:"Jackson was a self-made frontier lawyer, congressman, and militia general from Tennessee. He had no formal military training but was known for his iron will and fierce temper. The War of 1812 transformed him from a regional figure into a national hero, ultimately leading to his presidency in 1828.",simpleQuestion:"What was Andrew Jackson known for before the War of 1812?",simpleChoices:["He was a militia leader and politician from Tennessee","He was a famous Navy officer","He was the Governor of Louisiana","He was a teacher at a military school"],simpleExplanation:"Andrew Jackson was a lawyer and militia leader from Tennessee. He never went to military school. The War of 1812 made him famous across the whole country.",roundRange:[5,9],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_laura_secord",question:"How did Laura Secord contribute to the British war effort?",choices:["She walked 20 miles through enemy territory to warn British forces of an American attack","She commanded a regiment of Canadian volunteers","She nursed wounded soldiers at Fort York","She carried supplies across Lake Ontario in a rowboat"],correctIndex:0,explanation:"In June 1813, Laura Secord overheard American officers planning a surprise attack on the British outpost at Beaver Dams. She walked 20 miles through swamps and forest to warn Lieutenant FitzGibbon. The resulting British-Native ambush captured over 500 American troops. Secord is one of Canada's most celebrated heroes of the war.",simpleQuestion:"How did Laura Secord help the British during the war?",simpleChoices:["She walked 20 miles through enemy land to warn British soldiers about an American attack","She led a group of Canadian fighters","She took care of hurt soldiers at Fort York","She rowed supplies across Lake Ontario"],simpleExplanation:"Laura Secord heard American officers planning a surprise attack. She walked 20 miles through swamps and forests to warn the British. The British set a trap and captured over 500 American soldiers.",roundRange:[4,7],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_mary_pickersgill",question:"Who made the enormous flag that flew over Fort McHenry during the British bombardment?",choices:["Mary Pickersgill and her daughter Caroline, professional flagmakers in Baltimore","Betsy Ross in Philadelphia","Dolley Madison at the White House","British sailors who left it behind when they retreated"],correctIndex:0,explanation:'Mary Pickersgill was a skilled flagmaker who ran a successful business in Baltimore. In 1813, she and her 13-year-old daughter Caroline sewed the massive 30-by-42-foot garrison flag for Fort McHenry. The flag contained 15 stars and 15 stripes and required over 400 yards of fabric. This is the flag Francis Scott Key saw "still waving" after the 25-hour bombardment, inspiring "The Star-Spangled Banner." Pickersgill\'s work became one of the most important symbols in American history.',simpleQuestion:"Who made the big flag that flew over Fort McHenry during the British attack?",simpleChoices:["Mary Pickersgill and her daughter Caroline, who made flags in Baltimore","Betsy Ross in Philadelphia","Dolley Madison at the White House","British sailors who left it behind when they left"],simpleExplanation:'Mary Pickersgill and her daughter Caroline sewed a huge flag for Fort McHenry. It was 30 by 42 feet. This is the flag that inspired "The Star-Spangled Banner."',roundRange:[9,12],reward:{type:"nationalism",count:3,description:"+3 Nationalism"}},{id:"kc_women_home_front",question:"How did women on the home front contribute to the American war effort?",choices:["They managed farms, businesses, and plantations while men were away fighting","They were forbidden from working outside the home during the war","They mostly stayed in cities and avoided any involvement in the war","They only contributed by writing letters to soldiers"],correctIndex:0,explanation:"When men left to fight, women took on critical economic roles that kept communities functioning. Farm women managed entire agricultural operations, making decisions about planting, harvesting, and selling crops. Business owners' wives ran shops, taverns, and trade operations. Plantation mistresses supervised labor forces and production. Many women also organized aid for soldiers, producing supplies like bandages and uniforms. Their work demonstrated women's capability to manage complex economic enterprises and challenged traditional gender roles.",simpleQuestion:"How did women help during the war while men were away fighting?",simpleChoices:["They ran farms, shops, and businesses while the men were gone","They were not allowed to work outside the home during the war","They stayed in cities and did not get involved in the war","They only helped by writing letters to soldiers"],simpleExplanation:"When men left to fight, women took over important jobs. They ran farms, shops, and businesses. They also made supplies like bandages and uniforms for soldiers.",roundRange:[3,10],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_native_women",question:"What roles did Native American women play during the War of 1812?",choices:["They participated in tribal councils, advocated for peace or war, and maintained communities during conflict","They had no political voice and were excluded from all war decisions","They fought in battles alongside men as warriors","They all fled to Canada before the fighting began"],correctIndex:0,explanation:"Native American women held important political and social roles during the war. In many nations, including the Iroquois Confederacy, women participated in council meetings and influenced decisions about alliances and warfare. Some advocated for neutrality to protect their communities, while others supported joining British or American forces. Women also maintained food production, preserved cultural practices, and cared for refugees displaced by fighting. When Tecumseh traveled to recruit allies, he often addressed both male and female leaders. Their experiences show the diversity of Native responses to the war and women's significant political agency.",simpleQuestion:"What did Native American women do during the War of 1812?",simpleChoices:["They helped make decisions in councils, spoke for peace or war, and kept their communities going","They had no voice and were kept out of all war decisions","They fought in battles as warriors alongside men","They all ran away to Canada before the fighting started"],simpleExplanation:"Native American women played important roles during the war. In many nations, women helped make decisions about war and peace. They also grew food and took care of people who lost their homes.",roundRange:[2,8],reward:{type:"nationalism",count:2,description:"+2 Nationalism"},required:!0},{id:"kc_women_manufacturing",question:"How did the British blockade affect American women workers?",choices:["Thousands of women found jobs in new textile mills and factories producing war supplies","Women lost all employment opportunities during the war","Only wealthy women were allowed to work in factories","The blockade had no effect on women's employment"],correctIndex:0,explanation:'The British naval blockade cut off imported British cloth and manufactured goods, forcing Americans to produce their own. This created a manufacturing boom, especially in New England textile mills. Young women from farming families became some of the first factory workers in America, operating spinning machines and looms. Women also produced military supplies like uniforms, tents, and cartridges. In some towns, women organized "sewing circles" to make clothing for soldiers. This wartime work accelerated American industrialization and gave women new economic opportunities, though factory conditions were often difficult and dangerous.',simpleQuestion:"How did the British blockade change work for American women?",simpleChoices:["Many women got new jobs in factories making cloth and war supplies","Women lost all their jobs during the war","Only rich women were allowed to work in factories","The blockade did not change anything for women"],simpleExplanation:"The British blockade stopped cloth and goods from coming to America. Americans had to make their own. Many women started working in new factories making cloth, uniforms, and supplies.",roundRange:[5,12],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_frontier_women",question:"What challenges did frontier women face during the War of 1812?",choices:["They defended homesteads from raids, evacuated families during attacks, and survived as refugees","They lived in peaceful areas unaffected by the fighting","They all moved to eastern cities for safety","The government provided them with military protection at all times"],correctIndex:0,explanation:"Women on the frontier faced extreme danger as warfare swept through their communities. In areas like the Ohio Valley and the Canadian border, raids by various military forces destroyed homes and crops. Some women defended their cabins with rifles when attacks came. Many became refugees, fleeing with children to forts or safer territories, often walking for days with few supplies. Women like those at Fort Harrison (Indiana) helped defend the stockade during siege. After battles, women searched for missing family members and tried to rebuild destroyed farms. Their resilience was essential to frontier survival, though their stories are often overlooked.",simpleQuestion:"What problems did women on the frontier face during the War of 1812?",simpleChoices:["They protected their homes from attacks, fled with their children, and lived as refugees","They lived in safe areas away from all the fighting","They all moved to big cities in the East for safety","The government sent soldiers to protect them at all times"],simpleExplanation:"Women on the frontier faced great danger during the war. Attacks destroyed their homes and farms. Many women had to protect their families and run to safer places with their children.",roundRange:[2,9],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_perry",question:"What famous message did Oliver Hazard Perry send after his victory on Lake Erie?",choices:['"We have met the enemy and they are ours"','"Don\'t give up the ship"','"I have not yet begun to fight"','"Damn the torpedoes, full speed ahead"'],correctIndex:0,explanation:"After defeating the British fleet on Lake Erie on September 10, 1813, Perry sent this famous message to General Harrison. The victory gave the Americans control of Lake Erie, cut British supply lines, and forced the British to abandon Detroit \u2014 changing the war's trajectory in the Great Lakes.",simpleQuestion:"What famous message did Oliver Hazard Perry send after winning on Lake Erie?",simpleChoices:['"We have met the enemy and they are ours"','"Don\'t give up the ship"','"I have not yet begun to fight"','"Full speed ahead"'],simpleExplanation:'Perry beat the British fleet on Lake Erie in 1813. He sent the famous message "We have met the enemy and they are ours." This victory gave Americans control of Lake Erie.',roundRange:[5,7],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_napoleon",question:"How did the Napoleonic Wars in Europe affect the War of 1812?",choices:["When Napoleon was defeated, Britain sent experienced troops to fight in America","Napoleon sent French troops to help the Americans","The wars had no effect on events in North America","Napoleon invaded Canada during the War of 1812"],correctIndex:0,explanation:"Napoleon's defeat freed up thousands of battle-hardened British veterans who were then sent to North America in 1814. These Peninsular War veterans significantly strengthened British forces, enabling the burning of Washington and the major offensives at Baltimore, Plattsburgh, and New Orleans.",simpleQuestion:"How did the wars in Europe affect the War of 1812?",simpleChoices:["When Napoleon lost in Europe, Britain sent experienced soldiers to fight in America","Napoleon sent French soldiers to help America","The wars in Europe did not affect the war in America","Napoleon attacked Canada during the War of 1812"],simpleExplanation:"Britain was fighting Napoleon in Europe at the same time. When Napoleon lost, Britain sent thousands of experienced soldiers to America. This made the British army much stronger.",roundRange:[5,8],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}},{id:"kc_creek_war",question:"The Creek War (1813-1814) was connected to the War of 1812 because:",choices:["Some Creek factions allied with the British against American expansion in the South","The Creek Nation declared war on Canada","American troops invaded Creek territory to reach the Pacific Ocean","The Creek supplied weapons to the British Navy"],correctIndex:0,explanation:"The Red Stick faction of the Creek Nation, inspired by Tecumseh and supported by British and Spanish agents, fought against American expansion in the Southern frontier. Andrew Jackson's campaign against the Red Sticks culminated at the Battle of Horseshoe Bend (1814), which broke Creek resistance and opened vast lands for American settlement.",simpleQuestion:"How was the Creek War connected to the War of 1812?",simpleChoices:["Some Creek people joined with the British to fight against American settlers in the South","The Creek Nation went to war against Canada","American soldiers went through Creek land to reach the Pacific Ocean","The Creek gave weapons to the British Navy"],simpleExplanation:"Some Creek people, called the Red Sticks, joined the British side. They fought against American settlers in the South. Andrew Jackson defeated them at the Battle of Horseshoe Bend in 1814.",roundRange:[5,8],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_york_burning",question:"What happened when Americans captured York (modern-day Toronto) in 1813?",choices:["They burned government buildings, which later motivated the British burning of Washington","They established a permanent American military base in Canada","They freed hundreds of British prisoners of war","Nothing \u2014 the Americans left immediately after capturing the city"],correctIndex:0,explanation:"In April 1813, American forces captured and burned the Parliament buildings and other public structures in York, the capital of Upper Canada. This act of destruction enraged the British and Canadians. When British forces later burned Washington D.C. in 1814, they explicitly cited the burning of York as justification \u2014 showing how the war escalated through retaliation.",simpleQuestion:"What happened when Americans captured York (now called Toronto) in 1813?",simpleChoices:["They burned government buildings, which later made the British burn Washington D.C.","They set up a permanent American army base in Canada","They freed hundreds of British prisoners","Nothing \u2014 the Americans left the city right away"],simpleExplanation:"American soldiers captured York and burned the government buildings there. This made the British very angry. Later, the British burned Washington D.C. to get back at the Americans.",roundRange:[4,7],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}},{id:"kc_thames",question:"What was the significance of the Battle of the Thames (1813)?",choices:["Tecumseh was killed, shattering the Native confederacy and ending British influence in the Northwest","The British captured Detroit for the second time","The Americans lost control of Lake Ontario","It was the final battle of the war"],correctIndex:0,explanation:"The Battle of the Thames (October 5, 1813) was a decisive American victory in Ontario. Tecumseh was killed and the British retreated. Without Tecumseh's leadership, the Native confederacy fractured. The battle effectively ended the Native military threat in the Northwest and restored American control over Detroit and the Michigan frontier.",simpleQuestion:"Why was the Battle of the Thames in 1813 so important?",simpleChoices:["Tecumseh was killed, which broke apart the Native alliance and ended British power in the area","The British captured Detroit for the second time","The Americans lost control of Lake Ontario","It was the last battle of the whole war"],simpleExplanation:"Tecumseh was killed at this battle. Without him, the Native alliance fell apart. The British lost their power in the Northwest, and Americans took back control of Detroit.",roundRange:[5,8],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_african_american_navy",question:"What role did African Americans play in the U.S. Navy during the War of 1812?",choices:["About 15-20% of American sailors were free Black men who served as equals alongside white sailors","African Americans were prohibited from all military service","They only served as cooks and servants, never as combat sailors","Only enslaved people were allowed to serve, not free Black men"],correctIndex:0,explanation:"Free Black men made up an estimated 15-20% of the U.S. Navy during the War of 1812. Unlike the Army, the Navy offered relatively equal treatment \u2014 Black and white sailors received the same pay, shared the same quarters, and fought side-by-side. Many served on famous ships like USS Constitution and played crucial roles in naval victories. At the Battle of Lake Erie, Oliver Hazard Perry praised his Black sailors for their bravery.",simpleQuestion:"What role did African Americans play in the U.S. Navy during the war?",simpleChoices:["About 1 out of every 5 American sailors were free Black men who worked as equals with white sailors","African Americans were not allowed to serve in the military","They only worked as cooks, never as fighters","Only enslaved people could serve, not free Black men"],simpleExplanation:"Free Black men made up about 15-20% of the U.S. Navy. They got the same pay as white sailors and fought side by side with them. They helped win important battles on the water.",roundRange:[3,8],reward:{type:"nationalism",count:3,description:"+3 Nationalism"},required:!0},{id:"kc_colonial_marines",question:'What were the British "Colonial Marines" during the War of 1812?',choices:["A military unit of formerly enslaved people who escaped to British lines in exchange for freedom","British soldiers stationed in the American colonies before the war","American naval officers who defected to Britain","Native American scouts who worked for the British army"],correctIndex:0,explanation:"In 1814, the British offered freedom to enslaved people who escaped from American plantations and joined their forces. Over 4,000 people fled to British lines, with hundreds forming the Corps of Colonial Marines. They fought in several battles, including the burning of Washington D.C. After the war, Britain resettled most in Canada, Trinidad, and other colonies, honoring its promise of freedom \u2014 though the U.S. demanded their return.",simpleQuestion:'What were the British "Colonial Marines" during the War of 1812?',simpleChoices:["Enslaved people who escaped to the British side and were given freedom to fight for Britain","British soldiers who lived in America before the war","American Navy officers who joined the British side","Native American scouts who worked for the British army"],simpleExplanation:"The British promised freedom to enslaved people who escaped and joined them. Hundreds of these people formed the Colonial Marines. They fought in battles and were given their freedom after the war.",roundRange:[7,10],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_enslaved_freedom",question:"During the War of 1812, approximately how many enslaved people escaped to British lines seeking freedom?",choices:["About 4,000 people self-emancipated by fleeing to British ships and camps","Fewer than 100 people managed to escape during the war","Over 50,000 enslaved people were freed by the British army","No enslaved people attempted to escape during the conflict"],correctIndex:0,explanation:"Approximately 4,000 enslaved people escaped to British lines during the War of 1812, particularly in the Chesapeake Bay region. The British offered freedom to anyone who joined them, and many risked their lives to reach British ships. Some joined the Colonial Marines and fought against their former enslavers. After the war, most were resettled in Nova Scotia, Trinidad, or other British colonies. American slaveholders demanded their return, but Britain refused\u2014one of the few times a major power honored its promise of freedom to formerly enslaved people.",simpleQuestion:"About how many enslaved people escaped to the British side during the war?",simpleChoices:["About 4,000 people escaped to British ships and camps to gain their freedom","Fewer than 100 people escaped during the war","Over 50,000 enslaved people were freed by the British army","No enslaved people tried to escape during the war"],simpleExplanation:"About 4,000 enslaved people escaped to the British side during the war. The British promised them freedom. After the war, Britain kept its promise and helped them start new lives in Canada and other places.",roundRange:[6,10],reward:{type:"nationalism",count:3,description:"+3 Nationalism"},required:!0},{id:"kc_black_soldiers_jackson",question:"How did Andrew Jackson use free Black soldiers at the Battle of New Orleans?",choices:["He recruited free men of color into two battalions who fought bravely and were praised for their service","He refused to allow any African Americans to fight","He forced enslaved people to dig trenches but did not arm them","He promised freedom to enslaved people but broke his promise after the battle"],correctIndex:0,explanation:'Facing a shortage of troops, Andrew Jackson recruited free Black men in Louisiana into two battalions of "Free Men of Color." Despite initial skepticism from some white officers, these soldiers fought with distinction at the Battle of New Orleans on January 8, 1815. Jackson publicly praised their courage, saying they had "not disappointed the hopes" placed in them. However, after the war, Black veterans received little recognition and continued to face systemic discrimination.',simpleQuestion:"How did Andrew Jackson use free Black soldiers at the Battle of New Orleans?",simpleChoices:["He put free Black men into two groups of soldiers who fought bravely and were praised","He did not let any African Americans fight","He made enslaved people dig ditches but did not give them weapons","He promised enslaved people freedom but broke his promise after the battle"],simpleExplanation:"Andrew Jackson needed more soldiers. He asked free Black men in Louisiana to fight. They fought bravely at the Battle of New Orleans, and Jackson praised them for their courage.",roundRange:[10,12],reward:{type:"nationalism",count:3,description:"+3 Nationalism"},required:!0},{id:"kc_blockade",question:"What was the purpose of the British naval blockade during the war?",choices:["To strangle American trade and prevent supplies from reaching U.S. ports","To protect British fishing rights in the Atlantic","To stop French ships from reaching America","To prevent American settlers from crossing the Great Lakes"],correctIndex:0,explanation:"The Royal Navy's blockade of the American coast was designed to cripple the U.S. economy and prevent military supplies from moving by sea. By 1814, the blockade covered nearly the entire coast. American exports plummeted from $61 million in 1811 to $7 million in 1814, devastating the economy.",simpleQuestion:"Why did the British Navy block American ports during the war?",simpleChoices:["To stop American trade and keep supplies from reaching U.S. ports","To protect British fishing areas in the Atlantic Ocean","To stop French ships from reaching America","To keep American settlers from crossing the Great Lakes"],simpleExplanation:"The British Navy blocked American ports to hurt the U.S. economy. They wanted to stop trade and supplies. American exports dropped from $61 million to just $7 million.",roundRange:[4,8],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}},{id:"kc_constitution",question:'Why was USS Constitution nicknamed "Old Ironsides"?',choices:["British cannonballs appeared to bounce off her thick oak hull","She was plated with iron armor",'Her captain, William Hull, had the nickname "Iron Will"',"She survived a fire that destroyed the rest of the fleet"],correctIndex:0,explanation:'During her victory over HMS Guerriere in August 1812, sailors watched British cannonballs seemingly bounce off Constitution\'s hull (which was made of dense live oak up to 21 inches thick). A sailor reportedly cried "Huzza! Her sides are made of iron!" The nickname stuck and her victories were a massive morale boost for Americans facing setbacks on land.',simpleQuestion:'Why was the ship USS Constitution called "Old Ironsides"?',simpleChoices:["British cannonballs seemed to bounce off her thick wooden sides","She had iron armor on her sides",'Her captain had the nickname "Iron Will"',"She survived a fire that destroyed the other ships"],simpleExplanation:'The USS Constitution had very thick oak wood on her sides. British cannonballs seemed to bounce right off. A sailor yelled "Her sides are made of iron!" and the nickname stuck.',roundRange:[2,5],reward:{type:"nationalism",count:3,description:"+3 Nationalism"}},{id:"kc_privateers",question:"What role did American privateers play in the War of 1812?",choices:["They captured over 1,500 British merchant ships, disrupting trade worldwide","They blockaded British ports in Europe","They transported troops across the Great Lakes","They had no significant impact on the war"],correctIndex:0,explanation:"The U.S. government issued over 500 letters of marque, licensing private ships to attack British commerce. American privateers captured an estimated 1,500+ British merchant vessels, causing insurance rates to skyrocket and British merchants to pressure Parliament for peace. They were far more effective than the small U.S. Navy at disrupting British trade.",simpleQuestion:"What did American privateers do during the War of 1812?",simpleChoices:["They captured over 1,500 British trading ships all around the world","They blocked British ports in Europe","They moved troops across the Great Lakes","They did not have any real effect on the war"],simpleExplanation:"Privateers were private ships allowed by the government to attack British trading ships. They captured over 1,500 British ships. This hurt British trade and helped push Britain toward peace.",roundRange:[3,8],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_washington_burned",question:"What happened when the British captured Washington D.C. in 1814?",choices:["They burned the White House and the Capitol building","They forced President Madison to surrender","They made Washington the new British capital","Nothing \u2014 the city was abandoned before they arrived"],correctIndex:0,explanation:"On August 24, 1814, British forces routed American defenders at Bladensburg and marched into Washington. They burned the White House, Capitol, Treasury, and other government buildings. President Madison and Congress had fled. A thunderstorm and tornado the next day helped extinguish the fires. It remains the only time a foreign power has captured and burned the American capital.",simpleQuestion:"What happened when the British captured Washington D.C. in 1814?",simpleChoices:["They burned the White House and the Capitol building","They forced President Madison to give up","They made Washington the new British capital","Nothing \u2014 everyone left the city before they got there"],simpleExplanation:"The British marched into Washington D.C. in August 1814. They burned the White House, the Capitol, and other government buildings. This is the only time another country has burned the American capital.",roundRange:[9,11],reward:{type:"troops",count:2,description:"+2 reinforcement troops"}},{id:"kc_fort_mchenry",question:"The Battle of Fort McHenry inspired which famous American symbol?",choices:["The Star-Spangled Banner (national anthem)","The Pledge of Allegiance","The Liberty Bell tradition","The bald eagle as national symbol"],correctIndex:0,explanation:"Francis Scott Key, detained on a British ship, watched the 25-hour bombardment of Fort McHenry in Baltimore Harbor through the night of September 13-14, 1814. When he saw the enormous 42x30 foot American flag still flying at dawn, he wrote the poem 'Defence of Fort M'Henry,' which was set to music and eventually became the national anthem in 1931.",simpleQuestion:"The battle at Fort McHenry inspired which famous American song?",simpleChoices:["The Star-Spangled Banner (the national anthem)","The Pledge of Allegiance","The Liberty Bell tradition","The bald eagle as a national symbol"],simpleExplanation:'Francis Scott Key watched the British attack Fort McHenry for 25 hours. When he saw the American flag still flying in the morning, he wrote a poem. That poem became "The Star-Spangled Banner."',roundRange:[9,11],reward:{type:"nationalism",count:5,description:"+5 Nationalism"},required:!0},{id:"kc_dolley_madison",question:"What did Dolley Madison famously do as the British approached Washington?",choices:["She saved a portrait of George Washington and important state documents from the White House","She led a militia defense of the Capitol","She negotiated a ceasefire with the British commander","She escaped to Canada disguised as a British officer"],correctIndex:0,explanation:"As British troops closed in on Washington, First Lady Dolley Madison refused to leave the White House until she secured Gilbert Stuart's full-length portrait of George Washington and cabinet documents. Her bravery in saving these national treasures while under threat of capture became a powerful symbol of American resilience and devotion to the republic.",simpleQuestion:"What did Dolley Madison do when the British were coming to Washington?",simpleChoices:["She saved a painting of George Washington and important papers from the White House","She led soldiers to protect the Capitol","She talked the British commander into stopping the attack","She escaped to Canada dressed as a British officer"],simpleExplanation:"Dolley Madison would not leave the White House until she saved a famous painting of George Washington. She also saved important government papers. Her bravery made her a hero.",roundRange:[9,11],reward:{type:"nationalism",count:3,description:"+3 Nationalism"},required:!0},{id:"kc_dolley_political_role",question:"Beyond saving Washington's portrait, what was Dolley Madison's broader role in American politics?",choices:["She was a skilled political partner who hosted strategic social events and built political alliances for her husband","She had no involvement in politics beyond her famous rescue of the portrait","She served as an unofficial general, commanding troops during the British invasion","She opposed the war and publicly criticized her husband's decision to fight"],correctIndex:0,explanation:"Dolley Madison was far more than a portrait-rescuer. She was one of the most politically influential First Ladies in American history. She hosted \"Wednesday drawing rooms\"\u2014social gatherings where politicians from opposing parties mixed, negotiated, and built alliances. She helped her shy husband navigate Washington's social politics and was widely credited with helping him win reelection in 1812. Her political skills were so respected that after James Madison's death, Congress gave her an honorary seat on the House floor\u2014the first woman to receive this honor.",simpleQuestion:"Besides saving the painting, what else was Dolley Madison known for in politics?",simpleChoices:["She hosted parties where leaders met, talked, and made deals to help her husband","She had nothing to do with politics besides saving the painting","She was a general who led soldiers during the British attack","She spoke out against the war and argued with her husband about it"],simpleExplanation:"Dolley Madison was very important in politics. She hosted parties where leaders from different sides could meet and work together. She helped her husband win support and get reelected as President.",roundRange:[7,11],reward:{type:"nationalism",count:2,description:"+2 Nationalism"},required:!0},{id:"kc_plattsburgh",question:"Why was the American victory at Plattsburgh (1814) so important?",choices:["It repelled a major British invasion from Canada and influenced peace negotiations","It was the first American naval victory of the war","It led directly to the burning of Washington D.C.","It gave the Americans permanent control of Montreal"],correctIndex:0,explanation:"In September 1814, an outnumbered American force defeated a British army of 10,000+ veterans at Plattsburgh on Lake Champlain. The American naval victory on the lake forced the British to retreat to Canada. News of this defeat reached British negotiators at Ghent and convinced them that conquering the U.S. would be too costly, accelerating the peace treaty.",simpleQuestion:"Why was the American victory at Plattsburgh in 1814 so important?",simpleChoices:["It stopped a big British attack from Canada and helped bring about the peace treaty","It was the first American win on the water during the war","It led to the burning of Washington D.C.","It gave America permanent control of Montreal"],simpleExplanation:"A smaller American force beat a big British army at Plattsburgh. The Americans also won the battle on the lake. This loss helped convince Britain to agree to a peace treaty.",roundRange:[9,12],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_lundys_lane",question:"The Battle of Lundy's Lane (1814) is remembered as:",choices:["One of the bloodiest battles of the war, ending in a tactical draw near Niagara Falls","A decisive British victory that ended the war","A minor skirmish with few casualties","The first battle where the U.S. used artillery"],correctIndex:0,explanation:"Fought on July 25, 1814, Lundy's Lane was a brutal six-hour battle near Niagara Falls with over 1,700 combined casualties. Both sides claimed victory, but the Americans withdrew. The battle demonstrated that American regulars \u2014 trained by Winfield Scott \u2014 could now stand toe-to-toe with British professionals, a marked improvement from the war's early disasters.",simpleQuestion:"What is the Battle of Lundy's Lane remembered for?",simpleChoices:["One of the bloodiest battles of the war, ending in a tie near Niagara Falls","A big British win that ended the war","A small fight with very few people hurt","The first battle where Americans used cannons"],simpleExplanation:"The Battle of Lundy's Lane was a very bloody fight near Niagara Falls. It lasted 6 hours and over 1,700 soldiers were hurt or killed. Neither side truly won the battle.",roundRange:[8,11],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_treaty_ghent",question:"What did the Treaty of Ghent (1814) actually accomplish?",choices:["It restored pre-war borders \u2014 neither side gained territory","It gave Canada to the United States","It created an independent Native state in the Northwest","It forced Britain to pay war reparations to America"],correctIndex:0,explanation:'The Treaty of Ghent (signed December 24, 1814) essentially restored the "status quo ante bellum" \u2014 things as they were before the war. Neither side gained or lost territory. It did not address impressment (which had already stopped) or trade rights. The biggest losers were the Native peoples, who lost their British ally and faced unchecked American expansion.',simpleQuestion:"What did the Treaty of Ghent actually do?",simpleChoices:["Things went back to how they were before the war \u2014 no one gained land","It gave Canada to the United States","It created a new homeland for Native peoples in the Northwest","It made Britain pay money to America for the war"],simpleExplanation:"The Treaty of Ghent ended the war in December 1814. Things went back to how they were before the war. Neither side gained or lost any land. Native peoples lost the most because they lost British support.",roundRange:[10,12],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_treaty_broken_promises",question:"What happened to the Treaty of Ghent's promise to restore Native American lands to their pre-war status?",choices:["The promise was ignored \u2014 the U.S. never returned any lands and accelerated westward expansion","All Native lands were faithfully restored within two years","Britain enforced the promise by sending troops to protect Native territories","Native leaders voluntarily gave up their lands in exchange for payment"],correctIndex:0,explanation:"Article IX of the Treaty of Ghent required the U.S. to restore Native nations to their pre-war status and territories. The U.S. government completely ignored this provision. Without British military support, Native nations had no power to enforce the treaty terms. Instead of restoring lands, the U.S. accelerated its policy of forced removal. Within 15 years, President Andrew Jackson\u2014the war's greatest hero\u2014signed the Indian Removal Act of 1830, leading to the Trail of Tears and the displacement of tens of thousands of Native people from their ancestral homelands.",simpleQuestion:"What happened to the treaty promise to give Native peoples their land back?",simpleChoices:["The U.S. broke the promise and never gave back any lands, then pushed Native peoples off even more land","All Native lands were given back within two years","Britain sent soldiers to protect Native lands","Native leaders chose to give up their lands in exchange for money"],simpleExplanation:"The peace treaty said the U.S. would give Native peoples their lands back. The U.S. broke this promise. Without British help, Native peoples could not make the U.S. keep its word. The U.S. took even more Native land after the war.",roundRange:[10,12],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_new_orleans",question:"Why is the Battle of New Orleans (1815) historically ironic?",choices:["It was fought after the peace treaty was already signed, but before news arrived","It was the only battle the British won during the entire war","Andrew Jackson lost the battle but became president anyway","It took place in French territory, not American"],correctIndex:0,explanation:"The Treaty of Ghent was signed on December 24, 1814, but news traveled by ship and didn't reach New Orleans in time. Jackson's stunning victory on January 8, 1815 \u2014 where his forces killed over 2,000 British while suffering only 71 casualties \u2014 made him a national hero and helped Americans believe they had 'won' the war, despite the treaty changing nothing.",simpleQuestion:"Why is the Battle of New Orleans in 1815 considered ironic?",simpleChoices:["The peace treaty had already been signed, but the news had not arrived yet","It was the only battle the British won during the whole war","Andrew Jackson lost the battle but became president anyway","It took place in French land, not American land"],simpleExplanation:"The peace treaty was already signed before the battle happened. But news traveled slowly by ship, so nobody in New Orleans knew. Jackson won a huge victory that made him a national hero.",roundRange:[11,12],reward:{type:"nationalism",count:3,description:"+3 Nationalism"},required:!0},{id:"kc_hartford",question:"What was the Hartford Convention?",choices:["A meeting of New England Federalists who considered secession over the war","A peace conference between the U.S. and Britain","A Native American council to discuss alliances","A military strategy meeting led by Andrew Jackson"],correctIndex:0,explanation:"New England Federalists, opposed to the war and its devastating effect on their trade-based economy, met in Hartford, Connecticut (December 1814 - January 1815) to discuss grievances. Some delegates hinted at secession. But when news of the peace treaty and Jackson's victory arrived, the delegates looked unpatriotic. The Federalist Party never recovered and dissolved within a few years.",simpleQuestion:"What was the Hartford Convention?",simpleChoices:["A meeting of New England leaders who were so upset about the war they talked about leaving the country","A peace meeting between the U.S. and Britain","A Native American council to talk about alliances","A war planning meeting led by Andrew Jackson"],simpleExplanation:"Leaders from New England met in Hartford because they hated the war. Some even talked about leaving the United States. But then the war ended, and they looked unpatriotic. Their party fell apart soon after.",roundRange:[10,12],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}},{id:"kc_legacy",question:"What was a major legacy of the War of 1812 for the United States?",choices:["A surge of American nationalism and the decline of the Federalist Party","The permanent conquest of Canada","The end of slavery in the United States","An alliance with France against Britain"],correctIndex:0,explanation:"The War of 1812 sparked a powerful wave of American nationalism known as the 'Era of Good Feelings.' It destroyed the Federalist Party, boosted American manufacturing (since British trade was cut off), created national heroes like Jackson, and produced enduring symbols like the Star-Spangled Banner. The U.S. emerged with a stronger sense of national identity.",simpleQuestion:"What was one big result of the War of 1812 for the United States?",simpleChoices:["Americans felt much more proud of their country and the Federalist Party fell apart","America took over Canada for good","The war ended slavery in the United States","America and France joined together against Britain"],simpleExplanation:"After the war, Americans felt very proud of their country. The war created heroes like Andrew Jackson and gave America the Star-Spangled Banner. The Federalist Party, which was against the war, fell apart.",roundRange:[11,12],reward:{type:"nationalism",count:3,description:"+3 Nationalism"}},{id:"kc_native_aftermath",question:"What happened to Native American nations after the War of 1812?",choices:["They lost their British ally and faced rapid displacement by American settlers","They gained an independent homeland as promised in the Treaty of Ghent","They formed a lasting alliance with the United States","They migrated to British Canada where they received full citizenship"],correctIndex:0,explanation:"The War of 1812 was catastrophic for Native peoples. With Tecumseh dead and the British no longer willing to support Native interests, there was no check on American westward expansion. The Treaty of Ghent mentioned restoring Native lands to their 1811 status, but this was never enforced. Within two decades, most Eastern tribes would be forcibly removed via the Indian Removal Act of 1830.",simpleQuestion:"What happened to Native American nations after the War of 1812?",simpleChoices:["They lost British help and American settlers quickly took their lands","They got their own homeland as the peace treaty promised","They made a lasting friendship with the United States","They moved to Canada where they became full citizens"],simpleExplanation:"The war was terrible for Native peoples. Tecumseh was dead and Britain stopped helping them. American settlers took more and more Native land. Within 20 years, the government forced most Eastern nations off their lands.",roundRange:[10,12],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_canadian_identity",question:"How did the War of 1812 affect Canadian national identity?",choices:["It became a founding story \u2014 Canadians saw themselves as having defended their homeland from invasion","It had no lasting impact on Canada","It convinced Canadians to join the United States","It led to immediate Canadian independence from Britain"],correctIndex:0,explanation:"For English-speaking Canadians, the War of 1812 became a crucial founding myth. The defense of Upper Canada against repeated American invasions \u2014 with heroes like Brock, Secord, and the Canadian militia \u2014 helped forge a distinct Canadian identity separate from both Britain and the United States. It remains a significant part of Canadian heritage.",simpleQuestion:"How did the War of 1812 change how Canadians felt about their country?",simpleChoices:["Canadians felt proud that they defended their homeland from American attacks","The war had no lasting effect on Canada","Canadians decided they wanted to join the United States","Canada became independent from Britain right after the war"],simpleExplanation:"Canadians were proud that they defended their country against American attacks. Heroes like Brock and Laura Secord became famous. The war helped Canadians feel like their own separate nation.",roundRange:[10,12],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}},{id:"kc_manufacturing",question:"How did the War of 1812 change the American economy?",choices:["The British blockade forced Americans to build their own factories, jumpstarting industrialization","It destroyed the American economy permanently","It had no economic effects","It made the U.S. completely dependent on French trade"],correctIndex:0,explanation:"Cut off from British manufactured goods by the blockade, Americans began producing their own textiles, iron, and other goods. Factories sprang up across New England and the Mid-Atlantic. After the war, Congress passed the Tariff of 1816 to protect these new industries. The war inadvertently jumpstarted the American Industrial Revolution.",simpleQuestion:"How did the War of 1812 change how Americans made things?",simpleChoices:["The British blockade forced Americans to build their own factories and start making their own goods","The war destroyed the American economy for good","The war did not change the economy at all","America became completely dependent on French trade"],simpleExplanation:"The British blockade stopped goods from reaching America. Americans had to build their own factories to make cloth, iron, and other things. This was the start of American manufacturing.",roundRange:[8,12],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_impressment_end",question:"Why did British impressment of American sailors ultimately stop?",choices:["The end of the Napoleonic Wars meant Britain no longer needed extra sailors","The Treaty of Ghent specifically banned impressment","The American Navy destroyed all British ships","Congress passed a law making impressment illegal under international law"],correctIndex:0,explanation:"Impressment was one of the main causes of the war, yet the Treaty of Ghent never mentioned it. The practice simply stopped because Napoleon's defeat in 1814 ended Britain's desperate need for sailors. This irony highlights how the War of 1812 was deeply intertwined with European conflicts \u2014 a \"second front\" of the Napoleonic Wars.",simpleQuestion:"Why did Britain stop taking American sailors and making them work on British ships?",simpleChoices:["The wars in Europe ended, so Britain did not need extra sailors anymore","The peace treaty said Britain had to stop","The American Navy destroyed all British ships","Congress passed a law that made it illegal"],simpleExplanation:"Taking American sailors was a main cause of the war. But Britain stopped doing it because the wars in Europe ended. Britain no longer needed extra sailors. The peace treaty never even mentioned it.",roundRange:[10,12],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}},{id:"kc_de_salaberry",question:"How did Charles de Salaberry defeat a much larger American force at the Battle of Chateauguay?",choices:["He used buglers in the forest to make his 300 troops seem like a much larger army","He received secret reinforcements from British ships on the St. Lawrence","He used artillery to destroy the American supply wagons","He negotiated a ceasefire while more British troops arrived"],correctIndex:0,explanation:"De Salaberry positioned buglers throughout the forest to create the illusion of a massive force. With roughly 300 Canadian Voltigeurs and Native warriors, he convinced over 3,000 American troops to retreat \u2014 saving Montreal from invasion.",simpleQuestion:"How did de Salaberry win a battle with only 300 soldiers against 3,000 Americans?",simpleChoices:["He used buglers to make his army sound much bigger than it was","He got secret help from British ships","He used big cannons to stop the Americans","He asked for a truce while waiting for more soldiers"],simpleExplanation:"De Salaberry spread buglers all over the forest. They blew their horns from different spots so the Americans thought a huge army was around them. The Americans ran away even though they had way more soldiers.",roundRange:[6,9],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_black_hawk_war",question:"What role did Black Hawk play during the War of 1812?",choices:["He was a Sauk war chief who fought alongside the British at Fort Meigs and the Thames","He led the American army at the Battle of New Orleans","He served as a translator between the British and French Canadians","He negotiated the Treaty of Ghent on behalf of Native nations"],correctIndex:0,explanation:"Black Hawk was a Sauk war chief who fought alongside the British during the War of 1812, participating in the battles of Fort Meigs and the Thames. He never accepted treaties surrendering his people's ancestral lands and later led the Black Hawk War of 1832.",simpleQuestion:"What did Black Hawk do during the War of 1812?",simpleChoices:["He was a Sauk war chief who fought with the British in important battles","He led the American army at New Orleans","He worked as a translator for the British","He helped make the peace treaty"],simpleExplanation:"Black Hawk was a Sauk war chief. He fought alongside the British in big battles like Fort Meigs. He never agreed with treaties that gave away his people's land.",roundRange:[4,8],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_frenchtown",question:"What event at the River Raisin became a powerful American rallying cry?",choices:['Wounded American prisoners were killed after the battle, sparking "Remember the Raisin!"',"American forces burned a British supply depot on the river","A major flood destroyed the American camp on the River Raisin","The British surrendered their largest fortress on the river"],correctIndex:0,explanation:'After the British-Native victory at Frenchtown (modern Monroe, Michigan) in January 1813, Native warriors killed dozens of wounded American prisoners. "Remember the Raisin!" became one of the war\'s most powerful rallying cries, fueling recruitment across the American frontier.',simpleQuestion:'Why did Americans shout "Remember the Raisin!" during the war?',simpleChoices:["Because wounded American soldiers were killed after a battle near the River Raisin","Because the Americans burned a British building on the river","Because a flood destroyed an American camp","Because the British gave up their biggest fort"],simpleExplanation:'After a battle near the River Raisin, hurt American soldiers who could not fight were killed. Americans were very angry. "Remember the Raisin!" became a battle cry that made many people want to join the army.',roundRange:[3,6],reward:{type:"nationalism",count:3,description:"+3 Nationalism"},required:!0},{id:"kc_colonial_marines_role",question:"Who were the Colonial Marines during the War of 1812?",choices:["Formerly enslaved people who escaped to British lines and were formed into a military unit","French-Canadian militia who defended Montreal against American attack","American marines who fought at the Battle of New Orleans","British soldiers recruited from prisons to fight in North America"],correctIndex:0,explanation:"The Corps of Colonial Marines were formed from enslaved people who escaped to British lines after Vice Admiral Cochrane's 1814 proclamation promising freedom. They fought with distinction at Bladensburg and in Chesapeake raids. After the war, most were resettled as free people in Trinidad, Nova Scotia, or New Brunswick.",simpleQuestion:"Who were the Colonial Marines?",simpleChoices:["Enslaved people who escaped to the British and became soldiers in exchange for freedom","French-Canadian soldiers who defended Montreal","American marines who fought at New Orleans","British prisoners who were forced to fight"],simpleExplanation:"The Colonial Marines were people who escaped from slavery. They joined the British army in exchange for freedom. They fought bravely and after the war, they lived as free people in places like Canada and the Caribbean.",roundRange:[7,10],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_war_financing",question:"Why was the U.S. government nearly bankrupt by 1814?",choices:["New England banks refused to lend money and the British blockade destroyed customs revenue","Congress voted to defund the military as a protest against the war","The army spent all its money building a new capital city","France demanded immediate repayment of Revolutionary War loans"],correctIndex:0,explanation:"By 1814, New England banks refused to fund a war they opposed, and the British blockade destroyed customs revenue \u2014 the government's main income source. This financial crisis, combined with British war exhaustion after 20 years of fighting Napoleon, pushed both sides toward peace at Ghent.",simpleQuestion:"Why was America running out of money during the war?",simpleChoices:["Banks would not lend money and the British blockade stopped trade income","Congress voted to stop paying for the military","The army spent all the money on a new capital","France wanted old debts paid back right away"],simpleExplanation:"Banks in New England did not want to lend money for a war they did not like. The British also blocked ships, so the government could not collect money from trade. Both sides were broke and wanted peace.",roundRange:[6,10],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}},{id:"kc_new_england_opposition",question:"How did New England express its opposition to the War of 1812?",choices:["New England merchants smuggled goods to British Canada and some states considered secession at the Hartford Convention","New England sent its largest militia force to fight in Canada","New England immediately surrendered to the British navy","New England governors signed a separate peace treaty with Britain"],correctIndex:0,explanation:"New England strongly opposed the war \u2014 merchants smuggled goods to British Canada, banks refused to fund the war, and in 1814, delegates met at the Hartford Convention to discuss possible secession. The British deliberately left New England ports unblockaded to encourage this division. Much of the British army in Canada was actually fed by American suppliers from New England.",simpleQuestion:"How did people in New England show they did not like the war?",simpleChoices:["They sold supplies to the enemy and some talked about leaving the United States","They sent a big army to fight in Canada","They gave up and let the British take over","Their governors made a peace deal with Britain by themselves"],simpleExplanation:"New England did not want the war. Merchants sold food and supplies to the British enemy. Banks would not lend money. Some leaders even talked about leaving the United States at a big meeting called the Hartford Convention.",roundRange:[4,8],reward:{type:"nationalism",count:2,description:"+2 Nationalism"},required:!0},{id:"kc_canadian_defense",question:"What role did the Canadian militia play in defending Canada during the War of 1812?",choices:["Canadian-born soldiers fought in key battles like Chateauguay and Beaver Dams, helping save Canada from invasion","The Canadian militia did not participate \u2014 only British regulars defended Canada","Canadian militia only guarded supply depots far from the fighting","Canadian militia soldiers all deserted to the American side"],correctIndex:0,explanation:"Canadian militia, including French-Canadian Voltigeurs under de Salaberry and English-Canadian units, fought alongside British regulars and Native warriors. Their participation at battles like Chateauguay, Beaver Dams, and Queenston Heights was essential to Canada's defense and helped forge a sense of Canadian national identity.",simpleQuestion:"Did Canadian soldiers help defend Canada during the war?",simpleChoices:["Yes \u2014 they fought in important battles and helped save Canada from being taken over","No \u2014 only British soldiers from England fought in Canada","They only guarded supply buildings away from the fighting","They all left and joined the American army"],simpleExplanation:"Canadian soldiers fought in many important battles. French-Canadian soldiers under de Salaberry won at Chateauguay. Canadian and Native fighters won at Beaver Dams. These battles helped save Canada from being taken over.",roundRange:[3,7],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_naval_strategy",question:"Why was the British naval blockade of the American coast so devastating?",choices:["It cut off customs revenue (the government's main income) and strangled American trade","It sank all American merchant ships within the first month of the war","It prevented Americans from fishing, causing widespread famine","It allowed the British to land armies at any point along the coast"],correctIndex:0,explanation:"The British blockade was devastating because it cut off customs duties \u2014 the federal government's primary source of revenue. By 1814, American exports had fallen by over 90%, the treasury was nearly empty, and prices for imported goods soared. The blockade was arguably Britain's most effective weapon in the entire war.",simpleQuestion:"Why did the British blocking American ports hurt so much?",simpleChoices:["It stopped trade, which was how the government got most of its money","It sank all American ships in the first month","It stopped Americans from fishing and they ran out of food","It let the British land soldiers anywhere on the coast"],simpleExplanation:"The government got most of its money from taxes on trade. When the British blocked the ports, ships could not come in or go out. The government lost almost all its money, and everyday things became very expensive.",roundRange:[4,8],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_native_allies_british",question:"Why did most Native nations in the Great Lakes region ally with Britain rather than the United States?",choices:["Britain promised to support a Native buffer state and had a history of trading partnerships with Native nations","Britain offered Native nations control of all Canadian territory","The United States refused to trade with any Native nations","Native nations were required by treaty to fight for Britain"],correctIndex:0,explanation:"Native nations allied with Britain because the British had long-established trade relationships and supported the idea of a Native buffer state between the U.S. and Canada. American expansionism directly threatened Native lands, while British policy (at least officially) favored protecting them. For many nations, the British alliance was the last hope of resisting American settlement.",simpleQuestion:"Why did most Native nations near the Great Lakes fight on the British side?",simpleChoices:["Britain promised to help protect Native lands and had traded with them for a long time","Britain offered to give them all of Canada","America refused to trade with any Native nations","Native nations were forced by an old treaty to fight for Britain"],simpleExplanation:"Britain had been trading partners with Native nations for many years. Britain also promised to help protect their land from American settlers. Native nations saw the British as their best hope to keep their homes.",roundRange:[2,5],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_fort_meigs",question:"How did William Henry Harrison defend Fort Meigs against British siege in 1813?",choices:["His troops built massive earthwork walls that absorbed British cannon fire","He launched a surprise naval attack on the British supply ships","He negotiated a temporary truce while waiting for reinforcements","He surrendered the outer walls and retreated to a stone keep"],correctIndex:0,explanation:"Harrison's troops built massive earthwork walls at Fort Meigs on the Maumee River in Ohio. The earthen embankments absorbed British cannon fire, preventing the destruction the British expected. The fort survived two sieges in 1813, maintaining the American foothold in the Northwest.",simpleQuestion:"How did the soldiers at Fort Meigs stop the British cannonballs?",simpleChoices:["They built very thick dirt walls that soaked up the cannonballs","They attacked British ships to stop the cannons","They asked for a truce until more soldiers came","They hid inside a stone building"],simpleExplanation:"The soldiers built really thick walls out of dirt and earth. The cannonballs just got stuck in the dirt instead of breaking through. The fort survived two attacks this way.",roundRange:[4,7],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_beaver_dams",question:"What was Laura Secord's role in the British victory at Beaver Dams?",choices:["She walked 20 miles through enemy territory to warn the British of an American attack","She commanded the British artillery during the battle","She decoded American military messages for the British","She organized Canadian civilians to block the American advance"],correctIndex:0,explanation:"Laura Secord overheard American officers discussing their attack plans while they were quartered in her home. She walked 20 miles through swamps and enemy territory to warn the British outpost. Her warning enabled Mohawk warriors and British troops to prepare an ambush that captured over 500 American troops.",simpleQuestion:"What did Laura Secord do to help the British at Beaver Dams?",simpleChoices:["She walked 20 miles through dangerous land to warn them about an American attack","She fired the cannons during the battle","She read secret American letters for the British","She got townspeople to block the American army"],simpleExplanation:"Laura Secord heard American soldiers talking about their plans in her house. She walked 20 miles through swamps and enemy land to warn the British. Because of her, the British and Mohawk fighters were ready and captured over 500 Americans.",roundRange:[5,8],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_uss_wasp",question:"What ironic fate befell the USS Wasp after its victory over HMS Frolic?",choices:["Hours after capturing the Frolic, both ships were seized by the massive British ship HMS Poictiers","The Wasp ran aground on the Virginia coast and was abandoned","The Wasp's crew mutinied and sailed to France","The British recaptured the Frolic during a prisoner exchange"],correctIndex:0,explanation:"Just hours after the USS Wasp defeated HMS Frolic in October 1812, both ships were captured by the British ship-of-the-line HMS Poictiers. While American ships could win individual battles, Britain's overwhelming numbers (600+ warships vs. America's 16) gave it strategic control of the seas.",simpleQuestion:"What happened to the USS Wasp right after it won a battle?",simpleChoices:["A much bigger British ship came and captured both ships","It got stuck on the beach and everyone had to leave","The crew took over the ship and sailed to France","The British got their ship back in a prisoner trade"],simpleExplanation:"Right after the Wasp won, a much bigger British ship showed up and took both ships. Even though American ships could win one-on-one, Britain had way more ships \u2014 over 600 compared to America's 16.",roundRange:[3,6],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_war_hawks_expansion",question:"Beyond British impressment, what did the War Hawks hope to gain from war with Britain?",choices:["Expansion into British Canada and an end to British support for Native resistance on the frontier","Control of Britain's Caribbean sugar islands","A permanent alliance with Napoleon's France","The abolition of slavery throughout North America"],correctIndex:0,explanation:"The War Hawks, led by Henry Clay and John C. Calhoun, saw war as an opportunity to expand into British Canada and eliminate British support for Native nations resisting American settlement on the frontier. Western and Southern states particularly wanted to stop British agents from supplying weapons and encouragement to Tecumseh's confederacy.",simpleQuestion:"Besides stopping impressment, what else did the War Hawks want?",simpleChoices:["To take over Canada and stop Britain from helping Native nations fight against American settlers","To take Britain's islands in the Caribbean","To become best friends with France forever","To end slavery across North America"],simpleExplanation:"The War Hawks wanted to take over Canada. They also wanted Britain to stop helping Native nations who were fighting against American settlers moving west.",roundRange:[1,4],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}},{id:"kc_detroit_significance",question:"Why was Detroit strategically important during the War of 1812?",choices:["It controlled access to the Great Lakes and the western frontier, connecting trade routes and military supply lines","It was the largest city in North America at the time","It contained the only bridge across the Great Lakes","It was the capital of the United States during the war"],correctIndex:0,explanation:"Detroit sat at the junction of the Great Lakes waterway system and the western frontier. Controlling Detroit meant controlling access to the upper Great Lakes, trade routes with Native nations, and the military supply lines that fed armies on both sides. Its loss and recapture were major turning points in the war.",simpleQuestion:"Why was Detroit so important during the war?",simpleChoices:["It controlled the Great Lakes waterways and the roads to the western frontier","It was the biggest city in North America","It had the only bridge over the Great Lakes","It was America's capital during the war"],simpleExplanation:"Detroit was at an important crossroads. Whoever controlled Detroit controlled the Great Lakes waterways and the roads to the western frontier. That is why both sides fought so hard over it.",roundRange:[2,5],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_great_lakes_control",question:"Why was control of the Great Lakes so important to both sides during the war?",choices:["The lakes were the primary transportation routes for moving troops, supplies, and trade goods in the Northwest","Gold had been discovered on the shores of Lake Superior","Both countries wanted to build permanent naval bases on every lake","The Great Lakes were the main source of drinking water for both armies"],correctIndex:0,explanation:"In an era before railroads, the Great Lakes were the highways of the Northwest. Armies, supplies, and trade goods all moved primarily by water. Controlling the lakes meant controlling the ability to supply, reinforce, and move armies \u2014 which is why Perry's victory on Lake Erie was such a decisive turning point.",simpleQuestion:"Why did both sides want to control the Great Lakes?",simpleChoices:["The lakes were the main way to move soldiers, supplies, and trade goods","There was gold near Lake Superior","Both countries wanted to build military bases on every lake","The lakes were the main source of water for drinking"],simpleExplanation:"Before there were trains or highways, the Great Lakes were like roads on water. Armies, food, and supplies all traveled by boat on the lakes. Whoever controlled the lakes could move their army faster and keep them fed.",roundRange:[4,8],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_nancy_hart",question:"What essential roles did frontier women play during the War of 1812?",choices:["They defended homesteads, manufactured ammunition, organized supply networks, and served as messengers","They had no involvement in the war effort","They only served as nurses in official military hospitals","They were evacuated to coastal cities for their safety"],correctIndex:0,explanation:"Frontier women played critical roles that rarely made it into history books \u2014 defending homesteads when men were away, manufacturing ammunition, organizing community supply networks, and serving as messengers. In many frontier communities, women were the primary defenders of their homes and families.",simpleQuestion:"What did women on the frontier do during the war?",simpleChoices:["They protected their homes, made bullets, organized supplies, and carried messages","They did not help with the war at all","They only worked as nurses in army hospitals","They were all sent to big cities to be safe"],simpleExplanation:"Women on the frontier did many important jobs during the war. They protected their homes, made bullets, organized supplies, and carried messages. Most history books forgot to write about their work.",roundRange:[5,9],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}},{id:"kc_impressment_numbers",question:"Approximately how many American citizens were impressed into the Royal Navy between 1803 and 1812?",choices:["6,000 to 10,000 Americans","About 100 Americans","Over 50,000 Americans","Exactly 12 Americans"],correctIndex:0,explanation:"Between 1803 and 1812, the British impressed an estimated 6,000 to 10,000 American citizens into the Royal Navy. Britain was fighting Napoleon and desperately needed sailors. The Royal Navy would stop American ships at sea, line up the crew, and take anyone they claimed was a British subject \u2014 often ignoring American citizenship papers.",simpleQuestion:"About how many Americans did the British force to work on their ships before the war?",simpleChoices:["Between 6,000 and 10,000 people","About 100 people","More than 50,000 people","Only 12 people"],simpleExplanation:"Britain took between 6,000 and 10,000 American sailors and forced them to work on British ships. Britain needed sailors for their war against Napoleon. They would stop American ships and take people off them.",roundRange:[1,4],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}},{id:"kc_native_confederacy_challenge",question:"What was the greatest challenge Tecumseh faced in building his pan-Native confederacy?",choices:["Different Native nations had their own interests, languages, and traditions, making a unified political alliance extremely difficult","He lacked the ability to communicate with other Native nations","The British refused to support his confederacy","All Native nations had already signed peace treaties with the United States"],correctIndex:0,explanation:"Tecumseh's greatest challenge was that Native nations were diverse sovereign entities with different languages, traditions, priorities, and relationships with the U.S. Some nations, like the Cherokee, chose diplomacy. Others, like parts of the Creek Nation, were internally divided. Building a unified confederacy across such diversity required extraordinary diplomatic skill.",simpleQuestion:"What was the hardest part about Tecumseh bringing Native nations together?",simpleChoices:["Each nation had its own language, traditions, and goals, so it was very hard to agree on things","He could not talk to other nations because he did not speak their languages","The British would not help him at all","Every Native nation had already made peace with the United States"],simpleExplanation:"Every Native nation was different. They spoke different languages, had different traditions, and wanted different things. Getting them all to work together was extremely hard. Tecumseh traveled thousands of miles trying to convince them.",roundRange:[3,7],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_british_veterans_impact",question:"How did the end of the Napoleonic Wars in 1814 change the War of 1812?",choices:["Britain could send thousands of veteran troops from Europe to North America, dramatically shifting the balance of power","It had no effect on the War of 1812 since the conflicts were unrelated","It forced Britain to immediately surrender to the United States","It caused France to join the war on the American side"],correctIndex:0,explanation:"When Napoleon was defeated in 1814, Britain was free to send thousands of battle-hardened veterans to North America. These experienced troops led the burning of Washington and the attacks on Baltimore and New Orleans. The influx dramatically shifted the military balance, though it came too late to change the war's outcome.",simpleQuestion:"What happened when the wars in Europe ended in 1814?",simpleChoices:["Britain sent thousands of experienced soldiers from Europe to fight in America","Nothing \u2014 the wars in Europe had nothing to do with the War of 1812","Britain had to give up and surrender to America","France joined the war to help America"],simpleExplanation:"When the wars in Europe ended, Britain did not need soldiers there anymore. They sent thousands of experienced fighters to America. These soldiers burned Washington and attacked Baltimore and New Orleans.",roundRange:[8,11],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_american_manufacturing",question:"How did the British blockade unexpectedly benefit the American economy in the long term?",choices:["It forced Americans to build their own factories, jumpstarting American manufacturing and industrialization","It made American merchants richer by allowing them to charge higher prices","It had no long-term economic effects on the United States","It caused Americans to return to farming and abandon all trade"],correctIndex:0,explanation:"When the British blockade cut off imported manufactured goods, Americans had to make their own. Factories sprang up across New England and the Mid-Atlantic states. By war's end, American manufacturing had grown dramatically \u2014 laying the foundation for the Industrial Revolution in America. The war's disruption of trade permanently shifted the American economy toward domestic production.",simpleQuestion:"What good thing happened because the British blocked American ports?",simpleChoices:["Americans started building their own factories to make things they could no longer buy from other countries","Merchants got richer by charging more money","Nothing good happened \u2014 the blockade only caused problems","Americans gave up on trade and went back to just farming"],simpleExplanation:"When the British blocked the ports, Americans could not buy things from other countries. So they started building their own factories to make those things. This was the beginning of American manufacturing.",roundRange:[9,12],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}},{id:"kc_war_of_1812_memory",question:"How is the War of 1812 remembered differently by Americans, Canadians, and Native peoples?",choices:['Americans see it as a "second independence"; Canadians as the defense of their homeland; Native peoples as a catastrophic loss of sovereignty',"All three groups remember it exactly the same way","Only Americans remember the war \u2014 Canadians and Native peoples have forgotten it","Everyone agrees that the British won the war decisively"],correctIndex:0,explanation:'The War of 1812 is remembered very differently by each group. Americans celebrate it as a "second war of independence" that confirmed their sovereignty. Canadians see it as the war that saved their country from American invasion and forged national identity. For Native peoples, it was a catastrophic turning point \u2014 the end of British military support and the beginning of accelerated dispossession and removal.',simpleQuestion:"Do Americans, Canadians, and Native peoples remember the War of 1812 the same way?",simpleChoices:["No \u2014 Americans see it as a win, Canadians as saving their country, and Native peoples as a terrible loss","Yes \u2014 everyone remembers it the same way","Only Americans remember the war at all","Everyone agrees that Britain won the war"],simpleExplanation:"Each group remembers the war differently. Americans see it as proving they were truly free. Canadians see it as saving their country. For Native peoples, it was a disaster \u2014 they lost British help and then lost more and more of their land.",roundRange:[10,12],reward:{type:"nationalism",count:3,description:"+3 Nationalism"},required:!0},{id:"kc_chryslers_farm",question:"What was the significance of the Battle of Crysler's Farm in November 1813?",choices:["Along with Chateauguay, it ended the American campaign to capture Montreal","It was the first time the American navy defeated the British on a river","It led to the immediate British surrender of Upper Canada","It was where Andrew Jackson first gained fame as a military leader"],correctIndex:0,explanation:"At Crysler's Farm on November 11, 1813, about 800 British regulars defeated over 2,500 Americans. Combined with de Salaberry's victory at Chateauguay two weeks earlier, the twin defeats ended the American campaign to capture Montreal \u2014 Canada's most important city.",simpleQuestion:"Why was the Battle of Crysler's Farm important?",simpleChoices:["Together with another battle, it stopped the Americans from taking Montreal","It was the first time Americans won a battle on a river","It made the British surrender Upper Canada","It was where Andrew Jackson became famous"],simpleExplanation:"At Crysler's Farm, a small British force beat a much bigger American army. This battle plus the Battle of Chateauguay two weeks before meant the Americans could not capture Montreal.",roundRange:[6,9],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_enslaved_escape_routes",question:"How did enslaved people reach British lines during the War of 1812?",choices:["They fled at night through swamps and forests to British ships anchored in the Chesapeake Bay and coastal waterways","The British army invaded plantations and freed all enslaved people","The U.S. government organized a formal exchange program with Britain","Enslaved people were transported on American merchant ships"],correctIndex:0,explanation:"Enslaved people risked their lives escaping to British ships, often fleeing at night through swamps, forests, and waterways. British ships anchored in the Chesapeake Bay and along the coast served as beacons of freedom. Roughly 3,000-5,000 people escaped slavery this way. The journey was extremely dangerous \u2014 those caught faced brutal punishment or sale to the Deep South.",simpleQuestion:"How did enslaved people get to the British during the war?",simpleChoices:["They ran away at night through swamps and forests to reach British ships on the coast","The British army attacked farms and freed everyone","The U.S. government sent them to the British as part of a deal","They traveled on American trading ships"],simpleExplanation:"Enslaved people escaped at night, traveling through dangerous swamps and forests to reach British ships. Between 3,000 and 5,000 people escaped this way. It was very dangerous \u2014 if they were caught, they would be severely punished.",roundRange:[6,10],reward:{type:"troops",count:1,description:"+1 reinforcement troop"},required:!0},{id:"kc_frontier_warfare",question:"How did frontier warfare during the War of 1812 differ from European-style battles?",choices:["It relied on ambushes, raids, and guerrilla tactics rather than formations and open-field battles","It was fought entirely on horseback using cavalry charges","Both sides always followed formal European rules of engagement","Frontier warfare used only naval combat on rivers and lakes"],correctIndex:0,explanation:"Frontier warfare looked nothing like European battles. Instead of neat formations on open fields, fighting in the forests and frontier involved ambushes, raids, and guerrilla tactics. Native warriors excelled at this style of warfare, using the terrain and surprise to offset their smaller numbers. This forced both the British and Americans to adapt their tactics.",simpleQuestion:"How was fighting on the frontier different from fighting in Europe?",simpleChoices:["It used surprise attacks and hiding in forests instead of standing in lines on open fields","Everyone fought on horseback","Both sides always followed the same rules as in Europe","All the fighting was on rivers and lakes"],simpleExplanation:"Fighting on the frontier was very different from Europe. Instead of standing in neat lines on open fields, soldiers hid in forests and used surprise attacks. Native warriors were very good at this kind of fighting.",roundRange:[3,8],reward:{type:"troops",count:1,description:"+1 reinforcement troop"}},{id:"kc_war_opposition_voices",question:"Which groups most strongly opposed the War of 1812, and why?",choices:["Federalists, New England merchants, and Quakers \u2014 they feared economic ruin, opposed expansion, or held religious objections to war","Southern plantation owners who worried about losing enslaved workers","Western frontier settlers who feared Native attacks","The U.S. military officer corps who doubted they could win"],correctIndex:0,explanation:"The Federalist Party, New England merchants, and Quaker religious communities were the strongest opponents of the war. Federalists feared the war would ruin trade and strengthen their Republican political rivals. Merchants faced financial ruin from the British blockade. Quakers opposed all war on religious principles. This opposition led to the Hartford Convention, where some delegates discussed secession.",simpleQuestion:"Who most strongly opposed the War of 1812?",simpleChoices:["The Federalist political party, business owners in New England, and Quakers who were against all wars","Southern farm owners who worried about losing workers","People on the frontier who feared being attacked","Army leaders who thought they could not win"],simpleExplanation:"The Federalist Party, New England merchants, and Quakers were most against the war. Federalists thought the war was bad for business. Merchants were losing money. Quakers believed all war was wrong.",roundRange:[5,10],reward:{type:"nationalism",count:2,description:"+2 Nationalism"}}];function Ni(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=Si.filter(r=>r.required&&!t.includes(r.id)&&!n.includes(r.id)&&(!r.roundRange||e>=r.roundRange[0]&&e<=r.roundRange[1]));let a;if(r.length>0)a=r[Math.floor(Math.random()*r.length)];else{const n=Si.filter(n=>!t.includes(n.id)&&(!n.roundRange||e>=n.roundRange[0]&&e<=n.roundRange[1]));if(0===n.length)return null;a=n[Math.floor(Math.random()*n.length)]}const i=a.choices.map((e,t)=>t);for(let o=i.length-1;o>0;o--){const e=Math.floor(Math.random()*(o+1));[i[o],i[e]]=[i[e],i[o]]}return s(s({},a),{},{choices:i.map(e=>a.choices[e]),correctIndex:i.indexOf(a.correctIndex),shuffleIndices:i})}const Ci=[{id:"us_defend_capital",faction:"us",title:"Defend the Republic",description:"Control Washington D.C. at the end of the war.",historicalContext:"The British captured and burned Washington D.C. in August 1814 \u2014 the only time a foreign power has taken the American capital. Holding it would have been a powerful statement of American resilience.",points:10,progress:e=>{let{territoryOwners:t}=e;return{current:"us"===t.washington_dc?1:0,total:1}},check:e=>{let{territoryOwners:t}=e;return"us"===t.washington_dc}},{id:"us_conquer_canada",faction:"us",title:"Manifest Destiny: North",description:"Control Upper Canada and Montreal at the end of the war.",historicalContext:'Many War Hawks believed conquering Canada would be "a mere matter of marching." In reality, every American invasion of Canada failed. Achieving this objective would rewrite history.',points:15,progress:e=>{let{territoryOwners:t}=e;return{current:("us"===t.upper_canada?1:0)+("us"===t.montreal?1:0),total:2}},check:e=>{let{territoryOwners:t}=e;return"us"===t.upper_canada&&"us"===t.montreal}},{id:"us_nationalism_high",faction:"us",title:"Era of Good Feelings",description:"End the war with Nationalism at 70% or higher.",historicalContext:'After the war, American nationalism surged so powerfully that the period 1815-1825 was called the "Era of Good Feelings." This sense of national unity helped define American identity for generations.',points:10,progress:e=>{let{nationalismMeter:t}=e;return{current:Math.min(t,70),total:70}},check:e=>{let{nationalismMeter:t}=e;return t>=70}},{id:"us_lake_control",faction:"us",title:"Master of the Lakes",description:"Control both Lake Erie and Lake Ontario at game end.",historicalContext:"Control of the Great Lakes determined who controlled the frontier. Perry's victory on Lake Erie in 1813 was a turning point that cut British supply lines and forced them to abandon Detroit.",points:10,progress:e=>{let{territoryOwners:t}=e;return{current:("us"===t.lake_erie?1:0)+("us"===t.lake_ontario?1:0),total:2}},check:e=>{let{territoryOwners:t}=e;return"us"===t.lake_erie&&"us"===t.lake_ontario}},{id:"us_southern_secure",faction:"us",title:"Secure the South",description:"Control New Orleans, Mobile, and Creek Nation at game end.",historicalContext:"The Southern theater was crucial for controlling the Mississippi River \u2014 America's economic lifeline. Jackson's campaigns here made him a national hero and opened millions of acres to American settlement.",points:10,progress:e=>{let{territoryOwners:t}=e;return{current:("us"===t.new_orleans?1:0)+("us"===t.mobile?1:0)+("us"===t.creek_nation?1:0),total:3}},check:e=>{let{territoryOwners:t}=e;return"us"===t.new_orleans&&"us"===t.mobile&&"us"===t.creek_nation}},{id:"british_hold_canada",faction:"british",title:"Hold the Line",description:"Control Upper Canada and Montreal at the end of the war.",historicalContext:"Canada's survival against repeated American invasions became a founding myth for Canadian national identity. Brock, Secord, and the Canadian militia became national heroes for defending their homeland.",points:10,progress:e=>{let{territoryOwners:t}=e;return{current:("british"===t.upper_canada?1:0)+("british"===t.montreal?1:0),total:2}},check:e=>{let{territoryOwners:t}=e;return"british"===t.upper_canada&&"british"===t.montreal}},{id:"british_burn_washington",faction:"british",title:"Burn the Capital",description:"Control Washington D.C. at the end of the war.",historicalContext:'The burning of Washington in 1814 was retaliation for the American burning of York (Toronto). British Admiral Cockburn sat in the Speaker\'s chair and held a mock vote to burn the "harbor of Yankee democracy."',points:15,progress:e=>{let{territoryOwners:t}=e;return{current:"british"===t.washington_dc?1:0,total:1}},check:e=>{let{territoryOwners:t}=e;return"british"===t.washington_dc}},{id:"british_naval_dominance",faction:"british",title:"Rule Britannia",description:"Control Atlantic Sea Lanes, Chesapeake Bay, and Halifax at game end.",historicalContext:"The Royal Navy was the most powerful fleet in the world, with over 600 ships. British naval dominance allowed them to blockade the entire American coast, strangling trade and projecting power at will.",points:10,progress:e=>{let{territoryOwners:t}=e;return{current:("british"===t.atlantic_sea_lanes?1:0)+("british"===t.chesapeake_bay?1:0)+("british"===t.halifax?1:0),total:3}},check:e=>{let{territoryOwners:t}=e;return"british"===t.atlantic_sea_lanes&&"british"===t.chesapeake_bay&&"british"===t.halifax}},{id:"british_niagara_front",faction:"british",title:"Fortress Niagara",description:"Control Niagara and have 5+ troops there at game end.",historicalContext:"The Niagara frontier saw some of the war's fiercest fighting \u2014 Queenston Heights, Lundy's Lane, Fort Niagara. Control of this corridor between Lakes Erie and Ontario was essential for defending Upper Canada.",points:10,progress:e=>{let{territoryOwners:t,troops:n}=e;return{current:("british"===t.niagara?1:0)+("british"===t.niagara&&(n.niagara||0)>=5?1:0),total:2}},check:e=>{let{territoryOwners:t,troops:n}=e;return"british"===t.niagara&&(n.niagara||0)>=5}},{id:"british_blockade",faction:"british",title:"The Blockade Holds",description:"Control at least 3 naval territories (lakes/seas) at game end.",historicalContext:"The British blockade reduced American exports from $61 million (1811) to just $7 million (1814). But it also forced Americans to build their own factories, inadvertently kickstarting American industrialization.",points:10,progress:e=>{let{territoryOwners:t}=e;return{current:["lake_erie","lake_ontario","chesapeake_bay","atlantic_sea_lanes","gulf_of_mexico"].filter(e=>"british"===t[e]).length,total:3}},check:e=>{let{territoryOwners:t}=e;return["lake_erie","lake_ontario","chesapeake_bay","atlantic_sea_lanes","gulf_of_mexico"].filter(e=>"british"===t[e]).length>=3}},{id:"native_hold_homeland",faction:"native",title:"Tecumseh's Dream",description:"Control Indiana Territory and Creek Nation at the end of the war.",historicalContext:"Tecumseh envisioned a sovereign Native confederacy stretching from the Great Lakes to the Gulf Coast. His dream of a unified resistance to American expansion was the most ambitious pan-Native political movement in history.",points:10,progress:e=>{let{territoryOwners:t}=e;return{current:("native"===t.indiana_territory?1:0)+("native"===t.creek_nation?1:0),total:2}},check:e=>{let{territoryOwners:t}=e;return"native"===t.indiana_territory&&"native"===t.creek_nation}},{id:"native_frontier_expansion",faction:"native",title:"Reclaim the Frontier",description:"Control at least 4 territories at game end.",historicalContext:"Before European colonization, Native peoples governed vast territories across North America. By 1812, decades of treaties (often coerced) had reduced their lands dramatically. Reclaiming territory would reverse this devastating trend.",points:15,progress:e=>{let{territoryOwners:t}=e;return{current:Object.values(t).filter(e=>"native"===e).length,total:4}},check:e=>{let{territoryOwners:t}=e;return Object.values(t).filter(e=>"native"===e).length>=4}},{id:"native_fort_dearborn",faction:"native",title:"Fall of Fort Dearborn",description:"Capture Fort Dearborn from the Americans.",historicalContext:"Fort Dearborn (present-day Chicago) was a symbol of American military presence on the frontier. Its fall in August 1812 shocked settlers and demonstrated the power of Native resistance in the Great Lakes region.",points:10,progress:e=>{let{territoryOwners:t}=e;return{current:"native"===t.fort_dearborn?1:0,total:1}},check:e=>{let{territoryOwners:t}=e;return"native"===t.fort_dearborn}},{id:"native_detroit",faction:"native",title:"Detroit Reclaimed",description:"Control Detroit at the end of the war.",historicalContext:"Detroit was the gateway to the Northwest Territory. When Brock and Tecumseh captured it in 1812, it was a stunning combined victory. Native control of Detroit would ensure access to the Great Lakes fur trade and vital hunting grounds.",points:10,progress:e=>{let{territoryOwners:t}=e;return{current:"native"===t.detroit?1:0,total:1}},check:e=>{let{territoryOwners:t}=e;return"native"===t.detroit}},{id:"native_survive",faction:"native",title:"Endure",description:"Have at least 10 total troops across all territories at game end.",historicalContext:"In reality, the war's end was catastrophic for Native peoples. With Tecumseh dead and Britain unwilling to support them, there was no check on American expansion. Within 20 years, the Indian Removal Act forced most Eastern nations west of the Mississippi.",points:10,progress:e=>{let{territoryOwners:t,troops:n}=e;const r=Object.entries(t).filter(e=>{let[,t]=e;return"native"===t}).map(e=>{let[t]=e;return t});return{current:Math.min(r.reduce((e,t)=>e+(n[t]||0),0),10),total:10}},check:e=>{let{territoryOwners:t,troops:n}=e;return Object.entries(t).filter(e=>{let[,t]=e;return"native"===t}).map(e=>{let[t]=e;return t}).reduce((e,t)=>e+(n[t]||0),0)>=10}}];function Ai(e,t){return function(e){return Ci.filter(t=>t.faction===e)}(e).map(e=>s(s({},e),{},{completed:e.check(t),progressInfo:e.progress?e.progress(t):null}))}const ji={BASE_REINFORCEMENTS:4,TERRITORY_DIVISOR:2,NATIVE_EARLY_BONUS:2,NATIVE_EARLY_CUTOFF:4,BRITISH_NAVAL_BONUS:1,CONCENTRATION_RATIO:.4,PRIORITY_POINTS_WEIGHT:2,PRIORITY_ENEMY_NEIGHBOR_WEIGHT:3,PRIORITY_LOW_TROOP_THRESHOLD:2,PRIORITY_LOW_TROOP_BONUS:4,PRIORITY_FORT_BONUS:2,BONUS_EFFECTIVENESS:.5,MIN_ATTACK_PROBABILITY:.3,ATTACK_TROOP_DIFF_WEIGHT:3,ATTACK_POINTS_WEIGHT:2,ATTACK_FORT_PENALTY:3,ATTACK_LEADER_WEIGHT:2,ATTACK_PROBABILITY_WEIGHT:5,ATTACK_THEATER_BONUS:2,ATTACK_US_CANADA_BONUS:3,MAX_BONUS:2,MAX_ATTACKS_PER_TURN:5,TOP_N_ATTACK_CHOICES:3,MAX_ATTACKER_DICE:3,MAX_DEFENDER_DICE:2,MAX_TROOPS_TO_MOVE:3,FIRST_STRIKE_DAMAGE:1,MAX_MANEUVERS:3,MAX_REINFORCE_ITERATIONS:200};function Ei(e,t,n,r,a){const i=O[e];if(!i)return 0;let o=i.points*a.PRIORITY_POINTS_WEIGHT;return o+=i.adjacency.filter(e=>n[e]&&n[e]!==t&&"neutral"!==n[e]).length*a.PRIORITY_ENEMY_NEIGHBOR_WEIGHT,(r[e]||0)<=a.PRIORITY_LOW_TROOP_THRESHOLD&&(o+=a.PRIORITY_LOW_TROOP_BONUS),i.hasFort&&(o+=a.PRIORITY_FORT_BONUS),o}function Bi(e,t,n,r,a,i,o){const s=O[t];if(!s)return-1;const l=(a[e]||0)-1,c=a[t]||0;if(l<1)return-1;let d=Da({faction:n,territory:O[e],isAttacking:!0,leaderStates:i});"british"===n&&null!==s&&void 0!==s&&s.isNaval&&(d+=1),d=Math.min(d,o.MAX_BONUS);const h=r[t];let u=Da({faction:h,territory:s,isAttacking:!1,leaderStates:i});"british"===h&&null!==s&&void 0!==s&&s.isNaval&&(u+=1),null!==s&&void 0!==s&&s.hasFort&&(u+=1),u=Math.min(u,o.MAX_BONUS);const p=function(e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0;const a=e+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)*r.BONUS_EFFECTIVENESS,i=t+n*r.BONUS_EFFECTIVENESS;if(i<=0)return 1;const o=a/i;return o>=2.5?.85:o>=2?.75:o>=1.5?.65:o>=1.2?.55:o>=1?.45:o>=.8?.35:.25}(l,c,d,u,o);if(p<o.MIN_ATTACK_PROBABILITY)return-1;let m=0;return m+=(l-c)*o.ATTACK_TROOP_DIFF_WEIGHT,m+=s.points*o.ATTACK_POINTS_WEIGHT,s.hasFort&&(m-=o.ATTACK_FORT_PENALTY),m+=d*o.ATTACK_LEADER_WEIGHT,m+=p*o.ATTACK_PROBABILITY_WEIGHT,"british"!==n||"Chesapeake"!==s.theater&&"Maritime"!==s.theater||(m+=o.ATTACK_THEATER_BONUS),"native"===n&&"Great Lakes"===s.theater&&(m+=o.ATTACK_THEATER_BONUS),"us"===n&&"Great Lakes"===s.theater&&(m+=o.ATTACK_US_CANADA_BONUS),m}function Pi(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"medium";const l=s(s({},ji),yi[o]||{});let c=s({},t),d=s({},n);const h=[],u=[],p=function(e,t,n,r,a){const i=Object.entries(t).filter(t=>{let[,n]=t;return n===e});return 0===i.length?0:a.BASE_REINFORCEMENTS+Math.floor(i.length/a.TERRITORY_DIVISOR)+Ha(e,n)+("native"===e&&r<=a.NATIVE_EARLY_CUTOFF?a.NATIVE_EARLY_BONUS:0)+("british"===e?a.BRITISH_NAVAL_BONUS:0)}(e,c,r,i,l),m=Object.entries(c).filter(t=>{let[,n]=t;return n===e}).map(e=>{let[t]=e;return t});if(0===m.length)return{territoryOwners:c,troops:d,log:h,actions:u};const f=m.map(t=>({id:t,priority:Ei(t,e,c,d,l)})).sort((e,t)=>t.priority-e.priority),g={};let y=Number.isFinite(p)?p:0;if(f.length>0&&y>0){const t=f.filter(t=>{let{id:n}=t;const r=O[n];return r&&r.adjacency.some(t=>c[t]&&c[t]!==e&&"neutral"!==c[t])}),n=t.length>0?t:f,r=n[0],a=Math.min(Math.ceil(p*l.CONCENTRATION_RATIO),y);d[r.id]=(d[r.id]||0)+a,g[r.id]=a,y-=a;let i=1,o=0;for(;y>0&&n.length>0&&o<l.MAX_REINFORCE_ITERATIONS;){const e=n[i%n.length];d[e.id]=(d[e.id]||0)+1,g[e.id]=(g[e.id]||0)+1,y--,i++,o++}}for(const[s,C]of Object.entries(g)){var w;u.push({type:"reinforce",territory:(null===(w=O[s])||void 0===w?void 0:w.name)||s,troops:C})}h.push("".concat(Li(e)," receives ").concat(p," reinforcements."));let v=l.MAX_ATTACKS_PER_TURN;for(;v>0;){var b,x;v--;const t=Ii(e,c,d,r,a,l);if(0===t.length)break;t.sort((e,t)=>t.score-e.score);const n=t.slice(0,l.TOP_N_ATTACK_CHOICES),i=n[Math.floor(Math.random()*n.length)],o=d[i.fromId]||0,s=d[i.toId]||0,p=Oi(i.fromId,i.toId,e,c,d,r,l),m=o-(p.troops[i.fromId]||0)-(p.conquered&&p.movedTroops||0),f=s-(p.conquered?0:p.troops[i.toId]||0);c=p.territoryOwners,d=p.troops;const g=(null===(b=O[i.fromId])||void 0===b?void 0:b.name)||i.fromId,y=(null===(x=O[i.toId])||void 0===x?void 0:x.name)||i.toId;u.push({type:"attack",from:g,to:y,result:p.conquered?"captured":"repelled",casualties:{attacker:m,defender:f}}),p.conquered?h.push("".concat(Li(e)," captures ").concat(y,"!")):h.push("".concat(Li(e)," attacks ").concat(y," but is repelled."))}const k=Object.entries(c).filter(t=>{let[,n]=t;return n===e}).map(e=>{let[t]=e;return t}).filter(t=>{const n=O[t];if(!n)return!1;return!n.adjacency.some(t=>c[t]&&c[t]!==e&&"neutral"!==c[t])&&(d[t]||0)>1});let _=l.MAX_MANEUVERS;for(const s of k){if(_<=0)break;const t=O[s];if(!t)continue;const n=t.adjacency.find(t=>{if(c[t]!==e)return!1;const n=O[t];return!!n&&n.adjacency.some(t=>c[t]&&c[t]!==e&&"neutral"!==c[t])});if(n){const t=Math.min((d[s]||0)-1,l.MAX_TROOPS_TO_MOVE);var T,S,N;if(t>0)d[s]-=t,d[n]=(d[n]||0)+t,u.push({type:"maneuver",from:(null===(T=O[s])||void 0===T?void 0:T.name)||s,to:(null===(S=O[n])||void 0===S?void 0:S.name)||n,troops:t}),h.push("".concat(Li(e)," moves ").concat(t," troops to ").concat(null===(N=O[n])||void 0===N?void 0:N.name,".")),_--}}return{territoryOwners:c,troops:d,log:h,actions:u}}function Ii(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5?arguments[5]:void 0;const o=[];for(const s of Object.keys(t).filter(n=>t[n]===e)){if((n[s]||0)<2)continue;const l=O[s];if(l)for(const c of l.adjacency){if(t[c]===e||void 0===t[c])continue;if(a.includes(c))continue;const l=Bi(s,c,e,t,n,r,i);l>0&&o.push({fromId:s,toId:c,score:l})}}return o}function Oi(e,t,n,r,a,i,o){var l,c,d;const h=s({},r),u=s({},a);let p=u[t]||0;if(0===p){const r=Math.min((u[e]||0)-1,o.MAX_TROOPS_TO_MOVE);return u[e]=Math.max(1,(u[e]||0)-r),u[t]=Math.max(1,r),h[t]=n,{territoryOwners:h,troops:u,conquered:!0,movedTroops:r}}let m=0;if(Wa(n,O[t],i)>0&&(m=o.FIRST_STRIKE_DAMAGE,p=Math.max(0,p-m),0===p)){const r=Math.min((u[e]||0)-1,o.MAX_TROOPS_TO_MOVE);return u[e]=Math.max(1,(u[e]||0)-r),u[t]=Math.max(1,r),h[t]=n,{territoryOwners:h,troops:u,conquered:!0,movedTroops:r}}const f=Math.min((u[e]||0)-1,o.MAX_ATTACKER_DICE),g=Math.min(p,o.MAX_DEFENDER_DICE);if(f<=0)return{territoryOwners:h,troops:u,conquered:!1,movedTroops:0};const y=Array.from({length:f},()=>Math.floor(6*Math.random())+1).sort((e,t)=>t-e),w=Array.from({length:g},()=>Math.floor(6*Math.random())+1).sort((e,t)=>t-e);let v=Da({faction:n,territory:O[e],isAttacking:!0,leaderStates:i});"british"===n&&null!==(l=O[t])&&void 0!==l&&l.isNaval&&(v+=1),v=Math.min(v,o.MAX_BONUS),v>0&&y.length>0&&(y[0]=Math.min(y[0]+v,9));const b=r[t];let x=Da({faction:b,territory:O[t],isAttacking:!1,leaderStates:i});"british"===b&&null!==(c=O[t])&&void 0!==c&&c.isNaval&&(x+=1),null!==(d=O[t])&&void 0!==d&&d.hasFort&&(x+=1),x=Math.min(x,o.MAX_BONUS),x>0&&w.length>0&&(w[0]=Math.min(w[0]+x,9));let k=0,_=m;const T=Math.min(y.length,w.length);for(let s=0;s<T;s++)y[s]>w[s]?_++:k++;u[e]=Math.max(1,(u[e]||0)-k);const S=a[t]||0,N=Math.max(0,S-_),C=0===N;if(C){const r=Math.min(f-k,u[e]-1);return u[e]=Math.max(1,u[e]-r),u[t]=Math.max(1,r),h[t]=n,{territoryOwners:h,troops:u,conquered:C,movedTroops:r}}return u[t]=N,{territoryOwners:h,troops:u,conquered:C,movedTroops:0}}function Li(e){return{us:"United States",british:"British/Canada",native:"Native Coalition"}[e]||e}const Ri="GAME_START",Mi="GAME_OVER",Di="GAME_RESET",Wi="ADVANCE_PHASE",Hi="ADVANCE_ROUND",zi="SET_MESSAGE",Fi="HIDE_INTRO",qi="CAPTURE_TERRITORY",Ui="ADD_TROOPS",Gi="REMOVE_TROOPS",Ki="SET_TROOPS",Yi="SELECT_TERRITORY",Vi="DESELECT_TERRITORY",Zi="SET_REINFORCEMENTS",Ji="USE_REINFORCEMENT",Qi="START_BATTLE",$i="DISMISS_BATTLE",Xi="UPDATE_BATTLE_STATS",eo="START_MANEUVER",to="EXECUTE_MANEUVER",no="CANCEL_MANEUVER",ro="SET_MANEUVERS",ao="DRAW_EVENT",io="SHOW_EVENT_CARD",oo="HIDE_EVENT_CARD",so="MARK_EVENT_USED",lo="ADD_INVULNERABLE_TERRITORY",co="CLEAR_INVULNERABLE_TERRITORIES",ho="DRAW_KNOWLEDGE_CHECK",uo="SHOW_KNOWLEDGE_CHECK",po="HIDE_KNOWLEDGE_CHECK",mo="ANSWER_KNOWLEDGE_CHECK",fo="MARK_CHECK_USED",go="MARK_REQUIRED_CHECK_SEEN",yo="UPDATE_SCORES",wo="DELTA_NATIONALISM",vo="SET_NATIONALISM",bo="ADD_AI_LOG",xo="CLEAR_AI_LOG",ko="SET_AI_ACTIONS",_o="SHOW_AI_REPLAY",To="HIDE_AI_REPLAY",So="KILL_LEADER",No="ADD_JOURNAL_ENTRY",Co="SAVE_PHASE_SNAPSHOT",Ao="SET_PENDING_ADVANCE",jo="CLEAR_PENDING_ADVANCE",Eo="SET_PENDING_ACTION",Bo="CLEAR_PENDING_ACTION",Po="SAVE_ACTION_SNAPSHOT",Io="REMOVE_LAST_ACTION",Oo="LOAD_GAME_STATE",Lo="LOAD_MAP_STATE",Ro="LOAD_COMBAT_STATE",Mo="LOAD_EVENT_STATE",Do="LOAD_KNOWLEDGE_STATE",Wo="LOAD_SCORE_STATE",Ho="LOAD_AI_STATE",zo="LOAD_LEADER_STATE",Fo="LOAD_HISTORY_STATE",qo=["event","allocate","battle","maneuver","score"];function Uo(){return{status:"not_started",playerFaction:null,playerName:"",classPeriod:"",round:1,phaseIndex:0,message:"Welcome to the War of 1812",showIntro:!0,gameOverReason:null,gameOverWinner:null,gameMode:"historian",difficulty:"medium"}}function Go(){var e,t,n,r,a,i,o,l,c,d,h,u,p;let m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:"not_started",playerFaction:null,playerName:"",classPeriod:"",round:1,phaseIndex:0,message:"Welcome to the War of 1812",showIntro:!0,gameOverReason:null,gameOverWinner:null,gameMode:"historian",difficulty:"medium"},f=arguments.length>1?arguments[1]:void 0;switch(f.type){case Ri:return s(s({},m),{},{status:"in_progress",playerFaction:f.payload.faction,playerName:f.payload.name,classPeriod:f.payload.period,gameMode:f.payload.gameMode||"historian",difficulty:f.payload.difficulty||"medium",sessionId:f.payload.sessionId||null,classId:f.payload.classId||null,round:1,phaseIndex:0,message:"".concat(f.payload.name,", you command the ").concat(Ko(f.payload.faction),"!")});case Mi:return s(s({},m),{},{status:"game_over",message:"string"===typeof f.payload?f.payload:(null===(e=f.payload)||void 0===e?void 0:e.message)||"The War of 1812 has ended.",gameOverReason:(null===(t=f.payload)||void 0===t?void 0:t.reason)||"treaty",gameOverWinner:(null===(n=f.payload)||void 0===n?void 0:n.winner)||null});case Di:return{status:"not_started",playerFaction:null,playerName:"",classPeriod:"",round:1,phaseIndex:0,message:"Welcome to the War of 1812",showIntro:!0,gameOverReason:null,gameOverWinner:null,gameMode:"historian",difficulty:"medium"};case"SET_PLAYER_INFO":return s(s({},m),{},{playerName:null!==(r=f.payload.name)&&void 0!==r?r:m.playerName,classPeriod:null!==(a=f.payload.period)&&void 0!==a?a:m.classPeriod,playerFaction:null!==(i=f.payload.faction)&&void 0!==i?i:m.playerFaction});case Wi:{var g,y;if(void 0!==(null===(g=f.payload)||void 0===g?void 0:g.overridePhaseIndex)){var w;const e=f.payload.overridePhaseIndex;return s(s({},m),{},{phaseIndex:e,message:(null===(w=f.payload)||void 0===w?void 0:w.message)||Yo(qo[e])})}const e=(m.phaseIndex+1)%qo.length,t=qo[e];var v;return 0===e&&m.round<12?s(s({},m),{},{phaseIndex:e,round:m.round+1,message:(null===(v=f.payload)||void 0===v?void 0:v.message)||"Round ".concat(m.round+1," begins")}):0===e&&m.round>=12?s(s({},m),{},{status:"game_over",message:"The Treaty of Ghent has been signed. The war is over!"}):s(s({},m),{},{phaseIndex:e,message:(null===(y=f.payload)||void 0===y?void 0:y.message)||Yo(t)})}case Hi:return m.round>=12?s(s({},m),{},{status:"game_over",message:"The Treaty of Ghent has been signed. The war is over!"}):s(s({},m),{},{round:m.round+1,phaseIndex:0,message:(null===(o=f.payload)||void 0===o?void 0:o.message)||"Round ".concat(m.round+1," begins")});case zi:return s(s({},m),{},{message:f.payload});case Fi:return s(s({},m),{},{showIntro:!1});case Oo:return s(s(s({},{status:"not_started",playerFaction:null,playerName:"",classPeriod:"",round:1,phaseIndex:0,message:"Welcome to the War of 1812",showIntro:!0,gameOverReason:null,gameOverWinner:null,gameMode:"historian",difficulty:"medium"}),f.payload),{},{showIntro:!1,gameOverReason:(null===(l=f.payload)||void 0===l?void 0:l.gameOverReason)||null,gameOverWinner:(null===(c=f.payload)||void 0===c?void 0:c.gameOverWinner)||null,gameMode:(null===(d=f.payload)||void 0===d?void 0:d.gameMode)||"historian",difficulty:(null===(h=f.payload)||void 0===h?void 0:h.difficulty)||"medium",sessionId:(null===(u=f.payload)||void 0===u?void 0:u.sessionId)||null,classId:(null===(p=f.payload)||void 0===p?void 0:p.classId)||null});default:return m}}function Ko(e){return{us:"United States of America",british:"British Empire and Canadian forces",native:"Native American Confederacy"}[e]||e}function Yo(e){return{event:"A new event unfolds...",allocate:"Place your reinforcements",battle:"Time for battle!",maneuver:"Reposition your forces",score:"Calculating scores..."}[e]||""}function Vo(){return{territoryOwners:Zo(),troops:Jo(),selectedTerritory:null}}function Zo(){const e={};for(const[t,n]of Object.entries(O))e[t]=n.startingOwner;return e}function Jo(){const e={};for(const[t,n]of Object.entries(O))"neutral"===n.startingOwner?e[t]=0:n.startingTroops?e[t]=n.startingTroops:n.hasFort?e[t]=4:e[t]=2;return e}function Qo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vo(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qi:return s(s({},e),{},{territoryOwners:s(s({},e.territoryOwners),{},{[t.payload.territoryId]:t.payload.newOwner})});case Ui:{const{territoryId:n,count:r}=t.payload;if(!Number.isFinite(r)||r<0)return e;const a=e.troops[n]||0;return s(s({},e),{},{troops:s(s({},e.troops),{},{[n]:a+r})})}case Gi:{const{territoryId:n,count:r}=t.payload;if(!Number.isFinite(r)||r<0)return e;const a=e.troops[n]||0,i=Math.max(0,a-r);return s(s({},e),{},{troops:s(s({},e.troops),{},{[n]:i})})}case Ki:{const{territoryId:n,count:r}=t.payload;return!Number.isFinite(r)||r<0?e:s(s({},e),{},{troops:s(s({},e.troops),{},{[n]:r})})}case Yi:return s(s({},e),{},{selectedTerritory:t.payload});case Vi:return s(s({},e),{},{selectedTerritory:null});case Di:return Vo();case Lo:return s(s(s({},Vo()),t.payload),{},{selectedTerritory:null});default:return e}}function $o(){return{reinforcementsRemaining:0,battleResult:null,showBattleModal:!1,battleStats:{fought:0,won:0,lost:0},maneuverFrom:null,maneuversRemaining:0}}function Xo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{reinforcementsRemaining:0,battleResult:null,showBattleModal:!1,battleStats:{fought:0,won:0,lost:0},maneuverFrom:null,maneuversRemaining:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zi:{const n=t.payload;return!Number.isFinite(n)||n<0?e:s(s({},e),{},{reinforcementsRemaining:n})}case Ji:return e.reinforcementsRemaining<=0?e:s(s({},e),{},{reinforcementsRemaining:e.reinforcementsRemaining-1});case Qi:return s(s({},e),{},{battleResult:t.payload,showBattleModal:!0});case"RESOLVE_BATTLE":return s(s({},e),{},{battleResult:t.payload});case $i:return s(s({},e),{},{battleResult:null,showBattleModal:!1});case Xi:{const{fought:n,won:r,lost:a}=t.payload;return s(s({},e),{},{battleStats:{fought:e.battleStats.fought+(n||0),won:e.battleStats.won+(r||0),lost:e.battleStats.lost+(a||0)}})}case eo:return s(s({},e),{},{maneuverFrom:t.payload});case to:return s(s({},e),{},{maneuverFrom:null,maneuversRemaining:Math.max(0,e.maneuversRemaining-1)});case no:return s(s({},e),{},{maneuverFrom:null});case"USE_MANEUVER":return s(s({},e),{},{maneuversRemaining:Math.max(0,e.maneuversRemaining-1)});case ro:{const n=t.payload;return!Number.isFinite(n)||n<0?e:s(s({},e),{},{maneuversRemaining:n})}case Di:return{reinforcementsRemaining:0,battleResult:null,showBattleModal:!1,battleStats:{fought:0,won:0,lost:0},maneuverFrom:null,maneuversRemaining:0};case Ro:return s(s(s({},{reinforcementsRemaining:0,battleResult:null,showBattleModal:!1,battleStats:{fought:0,won:0,lost:0},maneuverFrom:null,maneuversRemaining:0}),t.payload),{},{battleResult:null,showBattleModal:!1,maneuverFrom:null});default:return e}}function es(){return{currentEvent:null,usedEventIds:[],showEventCard:!1,invulnerableTerritories:[]}}function ts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentEvent:null,usedEventIds:[],showEventCard:!1,invulnerableTerritories:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ao:return s(s({},e),{},{currentEvent:t.payload});case io:return s(s({},e),{},{showEventCard:!0});case oo:return s(s({},e),{},{showEventCard:!1});case so:return s(s({},e),{},{usedEventIds:[...e.usedEventIds,t.payload]});case lo:return e.invulnerableTerritories.includes(t.payload)?e:s(s({},e),{},{invulnerableTerritories:[...e.invulnerableTerritories,t.payload]});case co:return s(s({},e),{},{invulnerableTerritories:[]});case Di:return{currentEvent:null,usedEventIds:[],showEventCard:!1,invulnerableTerritories:[]};case Mo:return s(s(s({},{currentEvent:null,usedEventIds:[],showEventCard:!1,invulnerableTerritories:[]}),t.payload),{},{currentEvent:null,showEventCard:!1});default:return e}}function ns(){return{currentKnowledgeCheck:null,showKnowledgeCheck:!1,usedCheckIds:[],requiredChecksSeen:[],knowledgeCheckResults:{total:0,correct:0},knowledgeCheckHistory:[]}}function rs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentKnowledgeCheck:null,showKnowledgeCheck:!1,usedCheckIds:[],requiredChecksSeen:[],knowledgeCheckResults:{total:0,correct:0},knowledgeCheckHistory:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ho:return s(s({},e),{},{currentKnowledgeCheck:t.payload});case uo:return s(s({},e),{},{showKnowledgeCheck:!0});case po:return s(s({},e),{},{showKnowledgeCheck:!1});case mo:{const{correct:n,checkData:r}=t.payload;return s(s({},e),{},{knowledgeCheckResults:{total:e.knowledgeCheckResults.total+1,correct:e.knowledgeCheckResults.correct+(n?1:0)},knowledgeCheckHistory:[...e.knowledgeCheckHistory,s(s({},r),{},{correct:n,timestamp:Date.now()})]})}case fo:return s(s({},e),{},{usedCheckIds:[...e.usedCheckIds,t.payload]});case go:return s(s({},e),{},{requiredChecksSeen:[...e.requiredChecksSeen,t.payload]});case Di:return{currentKnowledgeCheck:null,showKnowledgeCheck:!1,usedCheckIds:[],requiredChecksSeen:[],knowledgeCheckResults:{total:0,correct:0},knowledgeCheckHistory:[]};case Do:return s(s(s({},{currentKnowledgeCheck:null,showKnowledgeCheck:!1,usedCheckIds:[],requiredChecksSeen:[],knowledgeCheckResults:{total:0,correct:0},knowledgeCheckHistory:[]}),t.payload),{},{currentKnowledgeCheck:null,showKnowledgeCheck:!1});default:return e}}function as(){return{scores:{us:0,british:0,native:0},nationalismMeter:0}}function is(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scores:{us:0,british:0,native:0},nationalismMeter:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yo:return s(s({},e),{},{scores:s(s({},e.scores),t.payload)});case wo:{const n=e.nationalismMeter+t.payload;return s(s({},e),{},{nationalismMeter:Math.max(0,Math.min(100,n))})}case vo:return s(s({},e),{},{nationalismMeter:Math.max(0,Math.min(100,t.payload))});case Di:return{scores:{us:0,british:0,native:0},nationalismMeter:0};case Wo:return s(s({},{scores:{us:0,british:0,native:0},nationalismMeter:0}),t.payload);default:return e}}function os(){return{aiLog:[],aiActions:[],showAIReplay:!1}}function ss(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{aiLog:[],aiActions:[],showAIReplay:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bo:return s(s({},e),{},{aiLog:[...e.aiLog,t.payload]});case xo:return s(s({},e),{},{aiLog:[]});case ko:return s(s({},e),{},{aiActions:t.payload});case _o:return s(s({},e),{},{showAIReplay:!0});case To:return s(s({},e),{},{showAIReplay:!1});case Di:case Ho:return{aiLog:[],aiActions:[],showAIReplay:!1};default:return e}}function ls(){const e={};for(const[t,n]of Object.entries(za))e[t]={alive:n.alive};return e}function cs(){return{leaderStates:ls()}}function ds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cs(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case So:return s(s({},e),{},{leaderStates:s(s({},e.leaderStates),{},{[t.payload]:{alive:!1}})});case"REVIVE_LEADER":return s(s({},e),{},{leaderStates:s(s({},e.leaderStates),{},{[t.payload]:{alive:!0}})});case Di:return cs();case zo:{const e=cs();return s(s({},e),{},{leaderStates:s(s({},e.leaderStates),t.payload.leaderStates)})}default:return e}}function hs(){return{journalEntries:[],phaseHistory:[],pendingAdvance:!1,pendingAdvanceMessage:"",pendingAction:null,actionHistory:[]}}function us(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{journalEntries:[],phaseHistory:[],pendingAdvance:!1,pendingAdvanceMessage:"",pendingAction:null,actionHistory:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case No:return s(s({},e),{},{journalEntries:[...e.journalEntries,t.payload]});case Co:return s(s({},e),{},{phaseHistory:[...e.phaseHistory,t.payload]});case Ao:return s(s({},e),{},{pendingAdvance:!0,pendingAdvanceMessage:t.payload||""});case jo:return s(s({},e),{},{pendingAdvance:!1,pendingAdvanceMessage:""});case Eo:return s(s({},e),{},{pendingAction:t.payload});case Bo:return s(s({},e),{},{pendingAction:null});case Po:return s(s({},e),{},{actionHistory:[...e.actionHistory,t.payload]});case Io:return s(s({},e),{},{actionHistory:e.actionHistory.slice(0,-1)});case Di:return{journalEntries:[],phaseHistory:[],pendingAdvance:!1,pendingAdvanceMessage:"",pendingAction:null,actionHistory:[]};case Fo:return s(s({},{journalEntries:[],phaseHistory:[],pendingAdvance:!1,pendingAdvanceMessage:"",pendingAction:null,actionHistory:[]}),{},{journalEntries:t.payload.journalEntries||[]});default:return e}}const ps=["Spring","Summer","Autumn","Winter"],ms=["event","allocate","battle","maneuver","score"],fs={event:"Draw Event Card",allocate:"Allocate Forces",battle:"Battle",maneuver:"Maneuver",score:"Score Update"},gs=["us","british","native"],ys=e=>{const t=1812+Math.floor((e-1)/4);return"".concat(ps[(e-1)%4]," ").concat(t)};function ws(e,t,n,r){const a=Object.entries(e).filter(e=>{let[,n]=e;return n===t});if(0===a.length)return 0;return 3+Math.floor(a.length/2)+Ha(t,n)+("native"===t&&r<=4?1:0)}function vs(e){const t=Object.entries(e).filter(e=>{let[,t]=e;return"neutral"!==t});if(0===t.length)return null;const n=t[0][1];return t.every(e=>{let[,t]=e;return t===n})?n:null}function bs(){const[t,n]=(0,e.useReducer)(Go,null,Uo),[r,a]=(0,e.useReducer)(Qo,null,Vo),[i,o]=(0,e.useReducer)(Xo,null,$o),[l,c]=(0,e.useReducer)(ts,null,es),[d,h]=(0,e.useReducer)(rs,null,ns),[u,p]=(0,e.useReducer)(is,null,as),[m,f]=(0,e.useReducer)(ss,null,os),[g,y]=(0,e.useReducer)(ds,null,cs),[w,v]=(0,e.useReducer)(us,null,hs),b=(0,e.useRef)(!1),x=ms[t.phaseIndex],k=fs[x]||"",_=(0,e.useMemo)(()=>ys(t.round),[t.round]),T=(0,e.useMemo)(()=>Object.values(r.territoryOwners).filter(e=>e===t.playerFaction).length,[r.territoryOwners,t.playerFaction]),S=(0,e.useMemo)(()=>t.playerFaction?Ai(t.playerFaction,{territoryOwners:r.territoryOwners,troops:r.troops,nationalismMeter:u.nationalismMeter}):[],[t.playerFaction,r.territoryOwners,r.troops,u.nationalismMeter]),N=(0,e.useMemo)(()=>t.playerFaction?function(e,t){return Ai(e,t).filter(e=>e.completed).reduce((e,t)=>e+t.points,0)}(t.playerFaction,{territoryOwners:r.territoryOwners,troops:r.troops,nationalismMeter:u.nationalismMeter}):0,[t.playerFaction,r.territoryOwners,r.troops,u.nationalismMeter]),C=(0,e.useMemo)(()=>"native"!==t.playerFaction?0:Math.min(T,6),[t.playerFaction,T]),A=(0,e.useMemo)(()=>"british"!==t.playerFaction?0:Object.entries(r.territoryOwners).filter(e=>{var t;let[n,r]=e;return"british"===r&&(null===(t=O[n])||void 0===t?void 0:t.isNaval)}).length,[t.playerFaction,r.territoryOwners]),j=(0,e.useMemo)(()=>"us"===t.playerFaction?1+u.nationalismMeter/100:"native"===t.playerFaction?1+Math.min(C,6)/6*.5:"british"===t.playerFaction?1+Math.min(A,4)/4*.3:1,[t.playerFaction,u.nationalismMeter,C,A]),E=(0,e.useMemo)(()=>{if(!t.playerFaction)return 0;const e=u.scores[t.playerFaction]||0;return Math.round(e*j)+N},[u.scores,t.playerFaction,j,N]),B=(0,e.useCallback)((e,n,r,a,i)=>{if(!e||!e.apply)return{owners:n,troops:r,nationalism:a,leaders:i};const o={territoryOwners:n,troops:r,scores:u.scores,playerFaction:t.playerFaction},l=e.apply(o);let c=s({},n),d=s({},r),h=a,p=s({},i);if(l.territoryChange){const{territory:e,newOwner:t}=l.territoryChange;e&&t&&(c[e]=t)}if(l.troopBonus){const{faction:e,count:t,territories:n,theater:r,territory:a}=l.troopBonus,i=Number.isFinite(t)?Math.max(0,t):0;if(n&&n.length>0){let e=i,t=0;for(;e>0&&t<200;){const r=n[t%n.length];d[r]=(d[r]||0)+1,e--,t++}}else if(r){const t=Object.entries(c).filter(t=>{var n;let[a,i]=t;return i===e&&(null===(n=O[a])||void 0===n?void 0:n.theater)===r});if(t.length>0){let e=i,n=0;for(;e>0&&n<200;){const[r]=t[n%t.length];d[r]=(d[r]||0)+1,e--,n++}}}else a&&(d[a]=(d[a]||0)+i)}if(l.troopPenalty){const{territory:e,territories:t,faction:n,count:r}=l.troopPenalty;if(e)d[e]=Math.max(0,(d[e]||0)-r);else if(t)for(const a of t)d[a]=Math.max(0,(d[a]||0)-r);else if(n){const e=Object.entries(c).filter(e=>{let[,t]=e;return t===n}).map(e=>{let[t]=e;return t});let t=r;for(const n of e){if(t<=0)break;const e=Math.min(t,Math.max(0,(d[n]||0)-1));d[n]=(d[n]||0)-e,t-=e}}}l.nationalismChange&&"us"===t.playerFaction&&(h=Math.max(0,Math.min(100,h+l.nationalismChange))),l.removeLeader&&p[l.removeLeader]&&(p[l.removeLeader]=s(s({},p[l.removeLeader]),{},{alive:!1}));const m=[];return l.fortify&&l.fortify.invulnerable&&l.fortify.territory&&m.push(l.fortify.territory),{owners:c,troops:d,nationalism:h,leaders:p,invulnerable:m}},[u.scores,t.playerFaction]),P=(0,e.useCallback)(e=>{v({type:No,payload:{round:t.round,season:ys(t.round),items:e}})},[t.round]),L=(0,e.useCallback)(e=>{let{faction:t,playerName:r,classPeriod:i,gameMode:s,difficulty:l,sessionId:d,classId:u}=e;n({type:Di}),a({type:Di}),o({type:Di}),c({type:Di}),h({type:Di}),p({type:Di}),f({type:Di}),y({type:Di}),v({type:Di}),n({type:Ri,payload:{faction:t,name:r,period:i,gameMode:s,difficulty:l,sessionId:d,classId:u}}),n({type:Fi}),n({type:zi,payload:"The war begins! You command the ".concat("us"===t?"United States":"british"===t?"British/Canadian":"Native Coalition"," forces.")});const m=Ti(1,[]);m&&(c({type:ao,payload:m}),c({type:io}),c({type:so,payload:m.id}))},[]),R=(0,e.useCallback)(()=>{n({type:Di}),a({type:Di}),o({type:Di}),c({type:Di}),h({type:Di}),p({type:Di}),f({type:Di}),y({type:Di}),v({type:Di}),b.current=!1},[]),M=(0,e.useCallback)(()=>{n({type:Fi})},[]),D=(0,e.useCallback)(e=>{r.selectedTerritory===e?a({type:Vi}):a({type:Yi,payload:e})},[r.selectedTerritory]),W=(0,e.useCallback)(e=>{var s;"allocate"===x&&r.territoryOwners[e]===t.playerFaction&&(i.reinforcementsRemaining<=0||(a({type:Ui,payload:{territoryId:e,count:1}}),o({type:Ji}),a({type:Vi}),n({type:zi,payload:"Deployed 1 troop to ".concat(null===(s=O[e])||void 0===s?void 0:s.name,". ").concat(i.reinforcementsRemaining-1," reinforcements remaining.")})))},[x,r.territoryOwners,t.playerFaction,i.reinforcementsRemaining]),H=(0,e.useCallback)((e,i)=>{var c,d,h,u,m,f,y,w;if("battle"!==x)return{success:!1};if(!I(e,i))return{success:!1,reason:"Not adjacent"};if(r.territoryOwners[e]!==t.playerFaction)return{success:!1,reason:"Not your territory"};if(r.territoryOwners[i]===t.playerFaction)return{success:!1,reason:"Already yours"};if((r.troops[e]||0)<2)return{success:!1,reason:"Need at least 2 troops to attack"};if(l.invulnerableTerritories.includes(i))return n({type:zi,payload:"".concat(null===(w=O[i])||void 0===w?void 0:w.name," is invulnerable this round! The bombardment failed.")}),{success:!1,reason:"Territory is invulnerable this round"};let v=r.troops[i]||0;if(0===v){var b,k;const s=Math.min(r.troops[e]-1,3);a({type:Ki,payload:{territoryId:e,count:Math.max(1,r.troops[e]-s)}}),a({type:Ki,payload:{territoryId:i,count:Math.max(1,s)}}),a({type:qi,payload:{territoryId:i,newOwner:t.playerFaction}}),"us"===t.playerFaction&&p({type:wo,payload:2});const l={success:!0,conquered:!0,attackRolls:[],defendRolls:[],attackerLosses:0,defenderLosses:0,attackLeaderBonus:0,defendLeaderBonus:0,fortBonus:!1,firstStrike:!1,fromId:e,toId:i,undefended:!0};return o({type:Qi,payload:l}),o({type:Xi,payload:{fought:1,won:1,lost:0}}),P(["Battle: Your forces occupied the undefended ".concat(null===(b=O[i])||void 0===b?void 0:b.name,".")]),n({type:zi,payload:"Your forces march into the undefended ".concat(null===(k=O[i])||void 0===k?void 0:k.name,"!")}),l}let _=0;if(Wa(t.playerFaction,O[i],g.leaderStates)>0&&(_=1,v=Math.max(0,v-_),0===v)){var T,S;const s=Math.min(r.troops[e]-1,3);a({type:Ki,payload:{territoryId:e,count:Math.max(1,r.troops[e]-s)}}),a({type:Ki,payload:{territoryId:i,count:Math.max(1,s)}}),a({type:qi,payload:{territoryId:i,newOwner:t.playerFaction}}),"us"===t.playerFaction&&p({type:wo,payload:3});const l={success:!0,conquered:!0,attackRolls:[],defendRolls:[],attackerLosses:0,defenderLosses:_,attackLeaderBonus:0,defendLeaderBonus:0,fortBonus:!1,firstStrike:!0,fromId:e,toId:i};return o({type:Qi,payload:l}),o({type:Xi,payload:{fought:1,won:1,lost:0}}),P(["Battle: Ambush! First strike wiped out defenders at ".concat(null===(T=O[i])||void 0===T?void 0:T.name,"!")]),n({type:zi,payload:"Ambush! First strike wipes out defenders at ".concat(null===(S=O[i])||void 0===S?void 0:S.name,"!")}),l}const N=r.troops[e]-1,C=Math.min(N,3),A=Math.min(v,2),j=Array.from({length:C},()=>Math.floor(6*Math.random())+1).sort((e,t)=>t-e),E=Array.from({length:A},()=>Math.floor(6*Math.random())+1).sort((e,t)=>t-e);let B=Da({faction:t.playerFaction,territory:O[e],isAttacking:!0,leaderStates:g.leaderStates});"british"===t.playerFaction&&null!==(c=O[i])&&void 0!==c&&c.isNaval&&(B+=1),B=Math.min(B,2),B>0&&j.length>0&&(j[0]=Math.min(j[0]+B,9));const L=r.territoryOwners[i];let R=Da({faction:L,territory:O[i],isAttacking:!1,leaderStates:g.leaderStates});"british"===L&&null!==(d=O[i])&&void 0!==d&&d.isNaval&&(R+=1);const M=null===(h=O[i])||void 0===h?void 0:h.hasFort;M&&(R+=1),R=Math.min(R,2),R>0&&E.length>0&&(E[0]=Math.min(E[0]+R,9));let D=0,W=_;const H=Math.min(j.length,E.length);for(let t=0;t<H;t++)j[t]>E[t]?W++:D++;const z=r.troops[i]||0,F=0===Math.max(0,z-W);if(F){const n=Math.min(N-D,r.troops[e]-1);a({type:Ki,payload:{territoryId:e,count:Math.max(1,r.troops[e]-n)}}),a({type:Ki,payload:{territoryId:i,count:Math.max(1,n)}}),a({type:qi,payload:{territoryId:i,newOwner:t.playerFaction}}),"us"===t.playerFaction&&p("baltimore"===i||"new_orleans"===i?{type:wo,payload:10}:{type:wo,payload:3})}else a({type:Gi,payload:{territoryId:e,count:D}}),a({type:Gi,payload:{territoryId:i,count:W}});const q={success:!0,conquered:F,attackRolls:j,defendRolls:E,attackerLosses:D,defenderLosses:W,attackLeaderBonus:B,defendLeaderBonus:R,fortBonus:!!M,firstStrike:_>0,fromId:e,toId:i};if(o({type:Qi,payload:q}),o({type:Xi,payload:{fought:1,won:F?1:0,lost:F?0:1}}),P([F?"Battle: Your forces captured ".concat(null===(u=O[i])||void 0===u?void 0:u.name,"! (lost ").concat(D," troops)"):"Battle: Attack on ".concat(null===(m=O[i])||void 0===m?void 0:m.name," repelled (lost ").concat(D,", enemy lost ").concat(W,")")]),n({type:zi,payload:F?"Victory! ".concat(null===(f=O[i])||void 0===f?void 0:f.name," has been captured!"):"Battle at ".concat(null===(y=O[i])||void 0===y?void 0:y.name,": you lost ").concat(D,", defender lost ").concat(W,".")}),F){vs(s(s({},r.territoryOwners),{},{[i]:t.playerFaction}))===t.playerFaction&&n({type:Mi,payload:{reason:"domination",winner:t.playerFaction,message:"Total Victory! Your forces have achieved complete domination!"}})}return q},[x,r.territoryOwners,r.troops,t.playerFaction,l.invulnerableTerritories,g.leaderStates,P]),z=(0,e.useCallback)(()=>{o({type:$i}),a({type:Vi})},[]),F=(0,e.useCallback)(e=>{var i;if(l.currentEvent){const n=B(l.currentEvent,r.territoryOwners,r.troops,u.nationalismMeter,g.leaderStates);let i=n.nationalism;if(Object.keys(n.owners).forEach(e=>{n.owners[e]!==r.territoryOwners[e]&&a({type:qi,payload:{territoryId:e,newOwner:n.owners[e]}})}),Object.keys(n.troops).forEach(e=>{const t=n.troops[e]-(r.troops[e]||0);t>0?a({type:Ui,payload:{territoryId:e,count:t}}):t<0&&a({type:Gi,payload:{territoryId:e,count:Math.abs(t)}})}),Object.keys(n.leaders).forEach(e=>{!n.leaders[e].alive&&g.leaderStates[e].alive&&y({type:So,payload:e})}),n.invulnerable&&n.invulnerable.length>0&&n.invulnerable.forEach(e=>{c({type:lo,payload:e})}),null!==e&&void 0!==e&&e.answered&&l.currentEvent.quiz)if(e.correct){const e=l.currentEvent.quiz.reward;null!==e&&void 0!==e&&e.nationalism&&"us"===t.playerFaction&&(i=Math.max(0,Math.min(100,i+e.nationalism))),P(["Event: ".concat(l.currentEvent.title," \u2014 ").concat(l.currentEvent.effect),"Quiz correct! ".concat(null!==e&&void 0!==e&&e.troops?"+".concat(e.troops," bonus troops"):"").concat(null!==e&&void 0!==e&&e.nationalism?"+".concat(e.nationalism," nationalism"):"")])}else{const e=l.currentEvent.quiz.penalty;null!==e&&void 0!==e&&e.nationalism&&"us"===t.playerFaction&&(i=Math.max(0,Math.min(100,i+e.nationalism))),P(["Event: ".concat(l.currentEvent.title," \u2014 ").concat(l.currentEvent.effect),"Quiz missed. ".concat(null!==e&&void 0!==e&&e.nationalism?"".concat(e.nationalism," nationalism"):"")])}else P(["Event: ".concat(l.currentEvent.title," \u2014 ").concat(l.currentEvent.effect)]);p({type:vo,payload:i});const o=n.owners,d={us:0,british:0,native:0};for(const[e,t]of Object.entries(o)){var s;if("neutral"!==t)d[t]=(d[t]||0)+((null===(s=O[e])||void 0===s?void 0:s.points)||0)}p({type:yo,payload:d})}if(c({type:oo}),!t.playerFaction)return void console.error("dismissEvent: playerFaction is null!");let d=ws(r.territoryOwners,t.playerFaction,g.leaderStates,t.round);var h,m;null!==e&&void 0!==e&&e.answered&&null!==(i=l.currentEvent)&&void 0!==i&&i.quiz&&(e.correct&&null!==(h=l.currentEvent.quiz.reward)&&void 0!==h&&h.troops?d+=l.currentEvent.quiz.reward.troops:!e.correct&&null!==(m=l.currentEvent.quiz.penalty)&&void 0!==m&&m.troops&&(d=Math.max(0,d+l.currentEvent.quiz.penalty.troops)));o({type:Zi,payload:d}),n({type:zi,payload:"You receive ".concat(d," reinforcements. Click your territories to place troops.")}),n({type:Wi})},[l.currentEvent,r.territoryOwners,r.troops,u.nationalismMeter,g.leaderStates,t.playerFaction,t.round,B,P]),q=(0,e.useCallback)((e,n)=>{var r,a;if(h({type:mo,payload:{correct:e,selectedIndex:n,round:t.round,check:d.currentKnowledgeCheck}}),null!==(r=d.currentKnowledgeCheck)&&void 0!==r&&r.required&&h({type:go,payload:d.currentKnowledgeCheck.id}),e&&null!==(a=d.currentKnowledgeCheck)&&void 0!==a&&a.reward){const e=d.currentKnowledgeCheck.reward;"troops"===e.type?o({type:Zi,payload:i.reinforcementsRemaining+e.count}):"nationalism"===e.type&&"us"===t.playerFaction&&p({type:wo,payload:e.count})}h({type:po})},[d.currentKnowledgeCheck,t.playerFaction,t.round,i.reinforcementsRemaining]),U=(0,e.useCallback)(()=>{if(d.showKnowledgeCheck||l.showEventCard||i.showBattleModal)return;const e=Ni(t.round,d.usedCheckIds,d.requiredChecksSeen);e&&(h({type:ho,payload:e}),h({type:uo}),h({type:fo,payload:e.id}))},[t.round,d.usedCheckIds,d.requiredChecksSeen,d.showKnowledgeCheck,l.showEventCard,i.showBattleModal]),G=(0,e.useCallback)((e,n)=>{var a,o;if("maneuver"!==x)return;if(i.maneuversRemaining<=0)return;if(r.territoryOwners[e]!==t.playerFaction||r.territoryOwners[n]!==t.playerFaction)return;if(!I(e,n))return;if((r.troops[e]||0)<2)return;const s=Math.min((r.troops[e]||0)-1,3);v({type:Eo,payload:{type:"maneuver",fromId:e,toId:n,fromTerritoryName:null===(a=O[e])||void 0===a?void 0:a.name,territoryName:null===(o=O[n])||void 0===o?void 0:o.name,troopCount:s,fromCurrentTroops:r.troops[e]||0,fromNewTroops:(r.troops[e]||0)-s,currentTroops:r.troops[n]||0,newTroops:(r.troops[n]||0)+s}})},[x,i.maneuversRemaining,r.territoryOwners,r.troops,t.playerFaction]),K=(0,e.useCallback)(()=>{var e,t,s,l;if(!w.pendingAction||"maneuver"!==w.pendingAction.type)return;const{fromId:c,toId:d,troopCount:h}=w.pendingAction;v({type:Po,payload:{phase:x,type:"maneuver",fromId:c,toId:d,movers:h,previousFromTroops:r.troops[c]||0,previousToTroops:r.troops[d]||0,previousManeuversRemaining:i.maneuversRemaining}}),a({type:Gi,payload:{territoryId:c,count:h}}),a({type:Ui,payload:{territoryId:d,count:h}}),o({type:to}),o({type:no}),a({type:Vi}),v({type:Bo}),P(["Maneuver: Moved ".concat(h," troops from ").concat(null===(e=O[c])||void 0===e?void 0:e.name," to ").concat(null===(t=O[d])||void 0===t?void 0:t.name,".")]);const u=i.maneuversRemaining-1;n({type:zi,payload:u>0?"Moved ".concat(h," troops to ").concat(null===(s=O[d])||void 0===s?void 0:s.name,". ").concat(u," move(s) remaining."):"Moved ".concat(h," troops to ").concat(null===(l=O[d])||void 0===l?void 0:l.name,". No moves remaining \u2014 advance when ready.")})},[w.pendingAction,x,r.troops,i.maneuversRemaining,P]),Y=G,V=(0,e.useCallback)(()=>{v({type:Bo}),a({type:Vi})},[]),Z=(0,e.useCallback)(()=>{if(!w.pendingAction||"placement"!==w.pendingAction.type)return;const{territoryId:e}=w.pendingAction;v({type:Po,payload:{phase:x,type:"placement",territoryId:e,previousTroops:r.troops[e]||0,previousReinforcements:i.reinforcementsRemaining}}),a({type:Ui,payload:{territoryId:e,count:1}}),o({type:Ji}),v({type:Bo}),a({type:Vi})},[w.pendingAction,x,r.troops,i.reinforcementsRemaining]),J=(0,e.useCallback)(e=>{if(l.showEventCard||i.showBattleModal||d.showKnowledgeCheck)return;if(!e){if("allocate"===x&&i.reinforcementsRemaining>0)return void v({type:Ao,payload:"You have ".concat(i.reinforcementsRemaining," reinforcement").concat(i.reinforcementsRemaining>1?"s":""," remaining. They will be lost if you advance.")});if("maneuver"===x&&i.maneuversRemaining>0)return void v({type:Ao,payload:"You have ".concat(i.maneuversRemaining," move").concat(i.maneuversRemaining>1?"s":""," remaining.")})}v({type:jo});try{const e={version:1,timestamp:Date.now(),playerFaction:t.playerFaction,playerName:t.playerName,classPeriod:t.classPeriod,gameMode:t.gameMode,round:t.round,phase:t.phaseIndex,territoryOwners:r.territoryOwners,troops:r.troops,scores:u.scores,nationalismMeter:u.nationalismMeter,reinforcementsRemaining:i.reinforcementsRemaining,leaderStates:g.leaderStates,usedEventIds:l.usedEventIds,usedCheckIds:d.usedCheckIds,requiredChecksSeen:d.requiredChecksSeen,knowledgeCheckResults:d.knowledgeCheckResults,knowledgeCheckHistory:d.knowledgeCheckHistory,journalEntries:w.journalEntries,battleStats:i.battleStats,invulnerableTerritories:l.invulnerableTerritories};localStorage.setItem("war1812_save",JSON.stringify(e))}catch(_){console.error("Auto-save failed:",_)}v({type:Co,payload:{phase:t.phaseIndex,troops:r.troops,territoryOwners:r.territoryOwners,reinforcementsRemaining:i.reinforcementsRemaining,maneuversRemaining:i.maneuversRemaining}});const m=t.phaseIndex+1;if(m>=ms.length){const e=gs.filter(e=>e!==t.playerFaction);let i=s({},r.territoryOwners),o=s({},r.troops);const d=[],h=[];for(const n of e){if(!Object.values(i).some(e=>e===n))continue;const e=Pi(n,i,o,g.leaderStates,l.invulnerableTerritories,t.round,t.difficulty);i=e.territoryOwners,o=e.troops,d.push(...e.log),h.push(...e.actions)}Object.keys(i).forEach(e=>{i[e]!==r.territoryOwners[e]&&a({type:qi,payload:{territoryId:e,newOwner:i[e]}})}),Object.keys(o).forEach(e=>{a({type:Ki,payload:{territoryId:e,count:o[e]}})}),d.forEach(e=>f({type:bo,payload:e})),f({type:ko,payload:h}),h.length>0&&f({type:_o}),d.length>0&&P(d.map(e=>"Opponent: ".concat(e)));const u={us:0,british:0,native:0};for(const[t,n]of Object.entries(i)){var y;if("neutral"!==n)u[n]=(u[n]||0)+((null===(y=O[t])||void 0===y?void 0:y.points)||0)}p({type:yo,payload:u});const m=vs(i);if(m){const e={us:"United States",british:"British/Canada",native:"Native Coalition"};return void(m===t.playerFaction?n({type:Mi,payload:{reason:"domination",winner:m,message:"Total Victory! Your forces have achieved complete domination!"}}):n({type:Mi,payload:{reason:"domination",winner:m,message:"Defeated! ".concat(e[m]||m," has achieved total control of the theater.")}}))}if("us"===t.playerFaction){const e="us"===r.territoryOwners.washington_dc&&"us"!==i.washington_dc,t="us"===r.territoryOwners.baltimore&&"us"!==i.baltimore;e&&p({type:wo,payload:-10}),t&&p({type:wo,payload:-8})}if(0===Object.values(i).filter(e=>e===t.playerFaction).length)return void n({type:Mi,payload:{reason:"elimination",winner:null,message:"Your faction has been eliminated! The war is over."}});const w=t.round+1;if(w>12)return void n({type:Mi,payload:{reason:"treaty",winner:null,message:"The Treaty of Ghent has been signed. The war is over!"}});n({type:Hi}),c({type:co});const v=Ti(w,l.usedEventIds);v&&(c({type:ao,payload:v}),c({type:so,payload:v.id}),h.length>0?b.current=!0:c({type:io}));const x=d.length>0?" | "+d.join(" "):"";return void n({type:zi,payload:"Round ".concat(w," \u2014 ").concat(ys(w)).concat(x)})}n({type:Wi});const k=ms[m];if("allocate"===k){const e=ws(r.territoryOwners,t.playerFaction,g.leaderStates,t.round);o({type:Zi,payload:e}),n({type:zi,payload:"You receive ".concat(e," reinforcements. Click your territories to place troops.")})}else if("battle"===k)n({type:zi,payload:"Select one of your territories, then click an adjacent enemy territory to attack. Advance phase when done."}),a({type:Vi});else if("maneuver"===k)o({type:ro,payload:2}),o({type:no}),a({type:Vi}),n({type:zi,payload:"Maneuver phase: select your territory to move troops FROM, then click an adjacent territory you own. (2 moves available)"});else if("score"===k){o({type:no}),f({type:xo});const e=Ni(t.round,d.usedCheckIds,d.requiredChecksSeen);e?(h({type:ho,payload:e}),h({type:uo}),h({type:fo,payload:e.id}),n({type:zi,payload:"Review your turn and answer a knowledge check before ending."})):n({type:zi,payload:"Review the board and scores. Advance to end your turn and let opponents move."})}},[x,l.showEventCard,l.usedEventIds,l.invulnerableTerritories,i.showBattleModal,i.reinforcementsRemaining,i.maneuversRemaining,d.showKnowledgeCheck,d.usedCheckIds,d.requiredChecksSeen,t.playerFaction,t.round,t.phaseIndex,t.playerName,t.classPeriod,t.gameMode,t.difficulty,r.territoryOwners,r.troops,u.scores,u.nationalismMeter,g.leaderStates,i.battleStats,d.knowledgeCheckResults,d.knowledgeCheckHistory,w.journalEntries,P]),Q=(0,e.useCallback)(()=>J(!1),[J]),$=(0,e.useCallback)(()=>J(!0),[J]),X=(0,e.useCallback)(()=>{v({type:jo})},[]),ee=(0,e.useCallback)(()=>{if(0===w.actionHistory.length)return;if("battle"===x)return;const e=w.actionHistory[w.actionHistory.length-1];if(e.phase===x){var t;if("placement"===e.type)a({type:Ki,payload:{territoryId:e.territoryId,count:e.previousTroops}}),o({type:Zi,payload:e.previousReinforcements}),n({type:zi,payload:"Undid deployment to ".concat(null===(t=O[e.territoryId])||void 0===t?void 0:t.name,".")});else if("maneuver"===e.type){var r,i;a({type:Ki,payload:{territoryId:e.fromId,count:e.previousFromTroops}}),a({type:Ki,payload:{territoryId:e.toId,count:e.previousToTroops}}),o({type:ro,payload:e.previousManeuversRemaining}),n({type:zi,payload:"Undid maneuver from ".concat(null===(r=O[e.fromId])||void 0===r?void 0:r.name," to ").concat(null===(i=O[e.toId])||void 0===i?void 0:i.name,".")})}v({type:Io})}else n({type:zi,payload:"Can only undo actions from the current phase."})},[w.actionHistory,x]),te=(0,e.useCallback)(()=>{if(0===w.phaseHistory.length)return;const e=w.phaseHistory[w.phaseHistory.length-1];n({type:Wi,payload:{overridePhaseIndex:e.phase}}),Object.keys(e.troops).forEach(t=>{a({type:Ki,payload:{territoryId:t,count:e.troops[t]}})}),Object.keys(e.territoryOwners).forEach(t=>{e.territoryOwners[t]!==r.territoryOwners[t]&&a({type:qi,payload:{territoryId:t,newOwner:e.territoryOwners[t]}})}),o({type:Zi,payload:e.reinforcementsRemaining}),o({type:ro,payload:e.maneuversRemaining}),a({type:Vi}),o({type:no}),v({type:jo}),n({type:zi,payload:"Returned to ".concat(fs[ms[e.phase]]," phase.")})},[w.phaseHistory,r.territoryOwners]),ne=(0,e.useCallback)(e=>{if(!(l.showEventCard||i.showBattleModal||d.showKnowledgeCheck))if("allocate"===x)r.selectedTerritory===e?W(e):D(e);else if("battle"===x){if(r.selectedTerritory)if(r.selectedTerritory===e)a({type:Vi}),n({type:zi,payload:"Attack cancelled. Select a territory to attack from."});else{if(r.territoryOwners[e]===t.playerFaction){var s;if((r.troops[e]||0)>=2)D(e),n({type:zi,payload:"Switched to ".concat(null===(s=O[e])||void 0===s?void 0:s.name,". Click an adjacent enemy territory to attack.")});return}var c,h;if(!I(r.selectedTerritory,e))return void n({type:zi,payload:"".concat(null===(c=O[e])||void 0===c?void 0:c.name," is not adjacent to ").concat(null===(h=O[r.selectedTerritory])||void 0===h?void 0:h.name,".")});H(r.selectedTerritory,e),a({type:Vi})}else if(r.territoryOwners[e]===t.playerFaction){var u,p;if((r.troops[e]||0)<2)return void n({type:zi,payload:"".concat(null===(p=O[e])||void 0===p?void 0:p.name," needs at least 2 troops to attack from.")});D(e),n({type:zi,payload:"Selected ".concat(null===(u=O[e])||void 0===u?void 0:u.name,". Click an adjacent enemy territory to attack, or click again to deselect.")})}}else if("maneuver"===x){if(i.maneuversRemaining<=0)return void n({type:zi,payload:"No maneuvers remaining. Advance to end your turn."});if(i.maneuverFrom)if(i.maneuverFrom===e)o({type:no}),D(null),n({type:zi,payload:"Maneuver cancelled. Select a territory to move troops from."});else{if(r.territoryOwners[e]!==t.playerFaction)return void n({type:zi,payload:"You can only maneuver troops to territories you own."});var m,f;if(!I(i.maneuverFrom,e))return void n({type:zi,payload:"".concat(null===(m=O[e])||void 0===m?void 0:m.name," is not adjacent to ").concat(null===(f=O[i.maneuverFrom])||void 0===f?void 0:f.name,".")});Y(i.maneuverFrom,e)}else{var g,y;if(r.territoryOwners[e]!==t.playerFaction)return;if((r.troops[e]||0)<2)return void n({type:zi,payload:"".concat(null===(y=O[e])||void 0===y?void 0:y.name," needs at least 2 troops to move from.")});o({type:eo,payload:e}),D(e),n({type:zi,payload:"Selected ".concat(null===(g=O[e])||void 0===g?void 0:g.name," (").concat(r.troops[e]," troops). Click an adjacent friendly territory to move troops, or click again to cancel.")})}}else D(e)},[x,l.showEventCard,i.showBattleModal,i.maneuversRemaining,i.maneuverFrom,d.showKnowledgeCheck,r.selectedTerritory,r.territoryOwners,r.troops,t.playerFaction,W,D,H,Y]),re=(0,e.useCallback)(()=>{const e={version:1,timestamp:Date.now(),playerFaction:t.playerFaction,playerName:t.playerName,classPeriod:t.classPeriod,gameMode:t.gameMode,round:t.round,phase:t.phaseIndex,territoryOwners:r.territoryOwners,troops:r.troops,scores:u.scores,nationalismMeter:u.nationalismMeter,reinforcementsRemaining:i.reinforcementsRemaining,leaderStates:g.leaderStates,usedEventIds:l.usedEventIds,usedCheckIds:d.usedCheckIds,requiredChecksSeen:d.requiredChecksSeen,knowledgeCheckResults:d.knowledgeCheckResults,knowledgeCheckHistory:d.knowledgeCheckHistory,journalEntries:w.journalEntries,battleStats:i.battleStats,invulnerableTerritories:l.invulnerableTerritories};try{return localStorage.setItem("war1812_save",JSON.stringify(e)),!0}catch(n){return!1}},[t,r,i,l,d,u,g,w]),ae=(0,e.useCallback)(()=>{try{const e=localStorage.getItem("war1812_save");if(!e)return!1;const t=JSON.parse(e);return 1===t.version&&(localStorage.setItem("war1812_tutorial_completed","true"),n({type:Oo,payload:{status:"in_progress",playerFaction:t.playerFaction,playerName:t.playerName,classPeriod:t.classPeriod,gameMode:t.gameMode||"historian",round:t.round,phaseIndex:t.phase,message:"Game loaded \u2014 Round ".concat(t.round,", ").concat(ys(t.round),".")}}),a({type:Lo,payload:{territoryOwners:t.territoryOwners,troops:t.troops}}),o({type:Ro,payload:{reinforcementsRemaining:t.reinforcementsRemaining||0,battleStats:t.battleStats||{fought:0,won:0,lost:0}}}),c({type:Mo,payload:{usedEventIds:t.usedEventIds||[],invulnerableTerritories:t.invulnerableTerritories||[]}}),h({type:Do,payload:{usedCheckIds:t.usedCheckIds||[],requiredChecksSeen:t.requiredChecksSeen||[],knowledgeCheckResults:t.knowledgeCheckResults||{total:0,correct:0},knowledgeCheckHistory:t.knowledgeCheckHistory||[]}}),p({type:Wo,payload:{scores:t.scores||{us:0,british:0,native:0},nationalismMeter:t.nationalismMeter||0}}),f({type:Ho}),y({type:zo,payload:{leaderStates:t.leaderStates||{}}}),v({type:Fo,payload:{journalEntries:t.journalEntries||[]}}),!0)}catch(e){return!1}},[]),ie=(0,e.useCallback)(()=>{try{const e=localStorage.getItem("war1812_save");if(!e)return null;const t=JSON.parse(e);return{playerName:t.playerName,faction:t.playerFaction,round:t.round,season:ys(t.round),timestamp:t.timestamp}}catch(e){return null}},[]),oe=(0,e.useCallback)(()=>{localStorage.removeItem("war1812_save")},[]),se=(0,e.useCallback)(()=>{try{const e=localStorage.getItem("war1812_save");if(!e)return{success:!1,error:"No save file found"};const t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");return r.href=n,r.download="war1812_save_".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),{success:!0}}catch(e){return console.error("Failed to export save file:",e),{success:!1,error:e.message}}},[]),le=(0,e.useCallback)(e=>{try{const t=JSON.parse(e);if(!t.version||!t.playerFaction)return{success:!1,error:"Invalid save file format"};localStorage.setItem("war1812_save",e);return ae()?{success:!0}:{success:!1,error:"Failed to load imported save"}}catch(t){return console.error("Failed to import save file:",t),{success:!1,error:"Invalid JSON file"}}},[ae]);return{gameStarted:"in_progress"===t.status,gameOver:"game_over"===t.status,gameOverReason:t.gameOverReason,gameOverWinner:t.gameOverWinner,playerFaction:t.playerFaction,playerName:t.playerName,classPeriod:t.classPeriod,gameMode:t.gameMode,difficulty:t.difficulty,sessionId:t.sessionId,classId:t.classId,round:t.round,totalRounds:12,currentPhase:x,currentPhaseLabel:k,seasonYear:_,territoryOwners:r.territoryOwners,troops:r.troops,selectedTerritory:r.selectedTerritory,scores:u.scores,nationalismMeter:u.nationalismMeter,reinforcementsRemaining:i.reinforcementsRemaining,showIntro:t.showIntro,currentEvent:l.currentEvent,showEventCard:l.showEventCard,battleResult:i.battleResult,showBattleModal:i.showBattleModal,message:t.message,playerTerritoryCount:T,finalScore:E,objectiveBonus:N,leaderStates:g.leaderStates,aiLog:m.aiLog,aiActions:m.aiActions,showAIReplay:m.showAIReplay,playerObjectives:S,currentKnowledgeCheck:d.currentKnowledgeCheck,showKnowledgeCheck:d.showKnowledgeCheck,knowledgeCheckResults:d.knowledgeCheckResults,knowledgeCheckHistory:d.knowledgeCheckHistory,journalEntries:w.journalEntries,battleStats:i.battleStats,maneuverFrom:i.maneuverFrom,maneuversRemaining:i.maneuversRemaining,nativeResistance:C,navalDominance:A,factionMultiplier:j,phaseHistory:w.phaseHistory,pendingAdvance:w.pendingAdvance,pendingAdvanceMessage:w.pendingAdvanceMessage,pendingAction:w.pendingAction,actionHistory:w.actionHistory,startGame:L,resetGame:R,advancePhase:Q,confirmAdvance:$,cancelAdvance:X,goBackPhase:te,undoLastAction:ee,handleTerritoryClick:ne,placeTroop:W,confirmPlaceTroop:Z,confirmManeuver:K,cancelAction:V,attack:H,selectTerritory:D,dismissEvent:F,dismissBattle:z,answerKnowledgeCheck:q,requestKnowledgeCheck:U,setMessage:e=>n({type:zi,payload:e}),setBattleResult:e=>o({type:Qi,payload:e}),saveGame:re,loadGame:ae,hasSavedGame:ie,deleteSave:oe,exportSaveFile:se,importSaveFile:le,dismissIntro:M,closeAIReplay:()=>{f({type:To}),b.current&&(b.current=!1,c({type:io}))}}}const xs=[{title:"Welcome, Commander!",description:'Welcome to War of 1812: Rise of the Nation! This brief tutorial will walk you through the game. You can revisit it anytime by clicking the "?" button in the header.',simpleDescription:'Welcome! This quick guide will show you how to play. You can come back to it anytime by clicking the "?" button at the top.',target:null},{title:"The War Board",description:"This is your war board. Each tile represents a territory from the War of 1812. The color of each tile shows which faction controls it: blue for the United States, red for the British, and brown for Native nations.",simpleDescription:"This is your game map. Each colored area is a territory. Blue means America controls it. Red means Britain controls it. Brown means Native nations control it.",target:'[data-tutorial="map"]'},{title:"Territory Tiles",description:"Click any territory to select it. Each tile shows the territory name, troop count (bottom-left badge), victory points (top-right star), and a fort icon if fortified. You can zoom in and out using the controls or your scroll wheel.",simpleDescription:"Click any territory to pick it. You can see the name, how many troops are there, and how many points it is worth. Use the zoom buttons or your scroll wheel to look closer.",target:'[data-territory="detroit"]'},{title:"Scoreboard",description:"Track scores for all three factions here. Your nationalism meter (US only) provides a score multiplier. The more territories you hold, the more points you earn each round.",simpleDescription:"This shows the score for all three sides. The more territories you hold, the more points you get each round.",target:'[data-tutorial="scoreboard"]'},{title:"Your Leaders",description:"Your faction leaders provide combat bonuses in specific theaters. Keep them alive -- if they fall in battle, you lose their benefits!",simpleDescription:"Your leaders help you fight better. Keep them alive! If they are defeated in battle, you lose their help.",target:'[data-tutorial="leaders"]'},{title:"Objectives",description:"Complete faction-specific objectives for bonus victory points at the end of the war. Check your progress here throughout the game.",simpleDescription:"These are your goals. Complete them to earn extra points at the end of the game. Check here to see how you are doing.",target:'[data-tutorial="objectives"]'},{title:"Game Phases",description:"Each round has 5 phases: Event (draw a historical event), Allocate (place reinforcements), Battle (attack enemies), Maneuver (reposition troops), and Score (end your turn). The gold dot shows your current phase.",simpleDescription:"Each round has 5 steps: Event (see what happens in history), Place Troops (add new troops), Battle (attack enemies), Move Troops (move your army around), and Score (finish your turn). The gold dot shows which step you are on.",target:'[data-tutorial="phase-indicator"]'},{title:"Battle Phase",description:"During battle, select one of your territories, then click an adjacent enemy territory to attack. Dice determine the outcome, with bonuses from forts and leaders. A knowledge check quiz may also appear!",simpleDescription:"To fight a battle, first click one of your territories. Then click an enemy territory next to it. Dice decide who wins. You might also get a quiz question!",target:'[data-tutorial="advance-btn"]'},{title:"History Quiz",description:"Test your knowledge of the War of 1812! Quiz questions appear during battle phases, and you can also take them voluntarily from the sidebar. Correct answers earn bonus troops or nationalism points.",simpleDescription:"Quiz questions about the War of 1812 will pop up during the game. Get them right to earn extra troops or bonus points!",target:'[data-tutorial="knowledge-check"]'},{title:"Ready for War!",description:"You are ready to lead your forces through 12 rounds of the War of 1812. Capture territories, complete objectives, and make history. Good luck, Commander!",simpleDescription:"You are ready to play! Lead your army through 12 rounds. Capture territories, finish your goals, and make history. Good luck!",target:null}],ks="war1812_tutorial_completed";let _s=null,Ts=null,Ss=null,Ns=null,Cs=null,As=!1,js=!1;function Es(){return _s||(_s=new(window.AudioContext||window.webkitAudioContext),Ts=_s.createGain(),Ts.gain.value=.5,Ts.connect(_s.destination),Ss=_s.createGain(),Ss.gain.value=.25,Ss.connect(Ts),Ns=_s.createGain(),Ns.gain.value=.6,Ns.connect(Ts)),"suspended"===_s.state&&_s.resume(),_s}function Bs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"square",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ns,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.3;const i=Es();if(As)return;const o=i.createOscillator(),s=i.createGain();o.type=n,o.frequency.value=e,s.gain.setValueAtTime(a,i.currentTime),s.gain.exponentialRampToValueAtTime(.001,i.currentTime+t),o.connect(s),s.connect(r),o.start(i.currentTime),o.stop(i.currentTime+t)}function Ps(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ns;const r=Es();if(As)return;const a=r.sampleRate*e,i=r.createBuffer(1,a,r.sampleRate),o=i.getChannelData(0);for(let d=0;d<a;d++)o[d]=2*Math.random()-1;const s=r.createBufferSource();s.buffer=i;const l=r.createGain();l.gain.setValueAtTime(t,r.currentTime),l.gain.exponentialRampToValueAtTime(.001,r.currentTime+e);const c=r.createBiquadFilter();c.type="lowpass",c.frequency.value=800,s.connect(c),c.connect(l),l.connect(n),s.start(r.currentTime)}const Is=[523,523,587,659,523,659,587,392,523,523,587,659,523,0,494,0,523,523,587,659,698,659,587,523,494,392,440,494,523,523,0,0],Os=[1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,1,0,0,1,0,1,0,1,0,0,0];let Ls=0;function Rs(){if(As||!js)return;const e=Es(),t=Is[Ls%Is.length];if(t>0){const n=e.createOscillator(),r=e.createGain();n.type="square",n.frequency.value=t,r.gain.setValueAtTime(.08,e.currentTime),r.gain.exponentialRampToValueAtTime(.001,e.currentTime+.18),n.connect(r),r.connect(Ss),n.start(e.currentTime),n.stop(e.currentTime+.2)}if(Os[Ls%Os.length]){const t=.05*e.sampleRate,n=e.createBuffer(1,t,e.sampleRate),r=n.getChannelData(0);for(let e=0;e<t;e++)r[e]=2*Math.random()-1;const a=e.createBufferSource();a.buffer=n;const i=e.createGain();i.gain.setValueAtTime(.12,e.currentTime),i.gain.exponentialRampToValueAtTime(.001,e.currentTime+.08);const o=e.createBiquadFilter();o.type="lowpass",o.frequency.value=300,a.connect(o),o.connect(i),i.connect(Ss),a.start(e.currentTime)}Ls++}function Ms(){js||(Es(),js=!0,Ls=0,Cs=setInterval(Rs,220))}function Ds(){js=!1,Cs&&(clearInterval(Cs),Cs=null)}function Ws(){return As}function Hs(){Es()}function zs(){const[t,n]=(0,e.useState)(()=>{try{return"true"===localStorage.getItem("war1812_muted")}catch(e){return!1}}),[r,a]=(0,e.useState)(!1);(0,e.useEffect)(()=>{!function(e){As=e,e&&Ds()}(t);try{localStorage.setItem("war1812_muted",String(t))}catch(e){}},[t]);const i=(0,e.useCallback)(()=>{n(e=>{const t=!e;return t&&Ds(),t}),a(!1)},[]),o=(0,e.useCallback)(()=>{Ws()||(js?(Ds(),a(!1)):(Hs(),Ms(),a(!0)))},[]),s={click:(0,e.useCallback)(()=>{Ws()||(Hs(),Bs(800,.06,"square",Ns,.15))},[]),confirm:(0,e.useCallback)(()=>{Ws()||(Hs(),Es(),As||(Bs(523,.1,"triangle",Ns,.2),setTimeout(()=>Bs(659,.1,"triangle",Ns,.2),80),setTimeout(()=>Bs(784,.15,"triangle",Ns,.2),160)))},[]),phaseAdvance:(0,e.useCallback)(()=>{Ws()||(Hs(),Bs(392,.12,"triangle",Ns,.2),setTimeout(()=>Bs(523,.15,"triangle",Ns,.25),100))},[]),placeTroop:(0,e.useCallback)(()=>{Ws()||(Hs(),Bs(600,.08,"square",Ns,.12))},[]),cannon:(0,e.useCallback)(()=>{Ws()||(Hs(),Ps(.5,.4),Bs(80,.4,"sine",Ns,.3))},[]),battleStart:(0,e.useCallback)(()=>{Ws()||(Hs(),function(){if(Es(),!As){for(let e=0;e<8;e++)setTimeout(()=>Ps(.06,.15),60*e);setTimeout(()=>Ps(.2,.25),500)}}())},[]),victory:(0,e.useCallback)(()=>{Ws()||(Hs(),[523,659,784,1047].forEach((e,t)=>{setTimeout(()=>Bs(e,.25,"triangle",Ns,.25),150*t)}))},[]),defeat:(0,e.useCallback)(()=>{Ws()||(Hs(),[392,330,262,196].forEach((e,t)=>{setTimeout(()=>Bs(e,.3,"triangle",Ns,.2),200*t)}))},[]),eventCard:(0,e.useCallback)(()=>{Ws()||(Hs(),Bs(330,.15,"triangle",Ns,.15),setTimeout(()=>Bs(440,.2,"triangle",Ns,.2),120))},[]),quizCorrect:(0,e.useCallback)(()=>{Ws()||(Hs(),Bs(523,.1,"sine",Ns,.2),setTimeout(()=>Bs(784,.2,"sine",Ns,.25),100))},[]),quizWrong:(0,e.useCallback)(()=>{Ws()||(Hs(),Bs(200,.2,"sawtooth",Ns,.1),setTimeout(()=>Bs(160,.3,"sawtooth",Ns,.1),150))},[])};return{muted:t,musicOn:r,toggleMute:i,toggleMusic:o,sfx:s}}const Fs="war1812_font_preference";function qs(){return"undefined"!==typeof crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function Us(){const t=window.location.hash,n=t.startsWith("#access_token=")||t.startsWith("#error="),[r,a]=(0,e.useState)(n?"#teacher":t),[i,o]=(0,e.useState)("name"),[l,d]=(0,e.useState)({playerName:"",classPeriod:"",difficulty:"medium",gameMode:"historian",sessionId:qs(),classId:null}),[u,p]=(0,e.useState)(!1),m=bs(),f=function(){const[t,n]=(0,e.useState)(!1),[r,a]=(0,e.useState)(0),i=t?xs[r]:null,o=xs.length,s=(0,e.useCallback)(()=>{a(0),n(!0)},[]),l=(0,e.useCallback)(()=>{r<xs.length-1?a(e=>e+1):(n(!1),localStorage.setItem(ks,"true"))},[r]),c=(0,e.useCallback)(()=>{r>0&&a(e=>e-1)},[r]),d=(0,e.useCallback)(()=>{n(!1),localStorage.setItem(ks,"true")},[]),h=(0,e.useCallback)(()=>!localStorage.getItem(ks),[]);return{tutorialActive:t,currentStep:r,currentStepData:i,totalSteps:o,startTutorial:s,nextStep:l,prevStep:c,skipTutorial:d,shouldAutoStart:h}}(),g=zs(),{fontMode:y,toggleFont:w}=function(){const[t,n]=(0,e.useState)(()=>{try{return localStorage.getItem(Fs)||"default"}catch(e){return"default"}});(0,e.useEffect)(()=>{"dyslexic"===t?document.documentElement.setAttribute("data-font","dyslexic"):document.documentElement.removeAttribute("data-font");try{localStorage.setItem(Fs,t)}catch(e){}},[t]);const r=(0,e.useCallback)(()=>{n(e=>"dyslexic"===e?"default":"dyslexic")},[]);return{fontMode:t,toggleFont:r}}(),v=(0,e.useRef)(!1);(0,e.useEffect)(()=>{if(n&&!t.startsWith("#error=")){const e=setTimeout(()=>{window.location.hash="#teacher"},2e3);return()=>clearTimeout(e)}},[n,t]),(0,e.useEffect)(()=>{const e=()=>a(window.location.hash);return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]),(0,e.useEffect)(()=>{!m.gameStarted||v.current||m.showEventCard||m.showBattleModal||m.showKnowledgeCheck||!f.shouldAutoStart()||(v.current=!0,setTimeout(()=>f.startTutorial(),300))},[m.gameStarted,m.showEventCard,m.showBattleModal,m.showKnowledgeCheck,f]);const b="learning"===new URLSearchParams(window.location.search).get("skip"),x=new URLSearchParams(window.location.search).get("class")||"",k=(0,e.useCallback)(e=>{let{playerName:t,classPeriod:n,classId:r}=e;d(e=>s(s({},e),{},{playerName:t,classPeriod:n,classId:r})),o("difficulty")},[]),_=(0,e.useCallback)(e=>{let{difficulty:t,gameMode:n}=e;d(e=>s(s({},e),{},{difficulty:t,gameMode:n})),o(b?"faction":"learning")},[b]),T=(0,e.useCallback)(e=>{if(d(t=>s(s({},t),{},{quizRetries:e})),o("faction"),e){const t=l.sessionId,n="war1812_qg_submitted_".concat(t);localStorage.getItem(n)||(localStorage.setItem(n,"true"),async function(e){let{sessionId:t,playerName:n,classPeriod:r,gameMode:a,retries:i,classId:o}=e;if(!Vr)return{error:"Supabase not configured"};const s=Object.entries(i).map(e=>{let[i,s]=e;return{session_id:t,player_name:n,class_period:r||"",game_mode:a||"historian",question_id:i,retries:s,class_id:o||null}}),{data:l,error:c}=await Vr.from("quiz_gate_results").insert(s).select();return{data:l,error:c}}({sessionId:t,playerName:l.playerName,classPeriod:l.classPeriod,gameMode:l.gameMode,retries:e,classId:l.classId}).then(e=>{let{error:t}=e;t&&(console.error("Quiz gate submit error:",t),localStorage.removeItem(n))}).catch(e=>{console.error("Quiz gate submit failed:",e),localStorage.removeItem(n)}))}},[l]),S=(0,e.useCallback)(e=>{m.startGame({faction:e,playerName:l.playerName,classPeriod:l.classPeriod,gameMode:l.gameMode,difficulty:l.difficulty,sessionId:l.sessionId,classId:l.classId})},[m,l]),N=(0,e.useCallback)(()=>{m.resetGame(),o("name"),d({playerName:"",classPeriod:"",difficulty:"medium",gameMode:"historian",sessionId:qs(),classId:null})},[m]),C=()=>{m.loadGame()},A=()=>{m.deleteSave(),m.resetGame(),o("name"),d({playerName:"",classPeriod:"",difficulty:"medium",gameMode:"historian",sessionId:qs(),classId:null})};if("#teacher"===r)return(0,c.jsx)(ki,{section:"Teacher Dashboard",onRestoreSave:C,onStartNewGame:A,children:(0,c.jsx)(ei,{})});if("#guide"===r)return(0,c.jsx)(ki,{section:"Teacher Guide",onRestoreSave:C,onStartNewGame:A,children:(0,c.jsx)(ri,{})});if(u)return(0,c.jsx)(ki,{section:"People Gallery",onRestoreSave:C,onStartNewGame:A,children:(0,c.jsx)(mi,{onClose:()=>p(!1)})});if(!m.gameStarted&&!m.gameOver){if("name"===i)return(0,c.jsx)(ki,{section:"Name Entry",onRestoreSave:C,onStartNewGame:A,children:(0,c.jsx)(gi,{onNext:k,classParam:x,savedGame:m.hasSavedGame(),onContinue:m.loadGame,onDeleteSave:m.deleteSave,onExportSave:m.exportSaveFile,onImportSave:m.importSaveFile,fontMode:y,toggleFont:w})});if("difficulty"===i)return(0,c.jsx)(ki,{section:"Difficulty Select",onRestoreSave:C,onStartNewGame:A,children:(0,c.jsx)(xi,{onNext:_,playerName:l.playerName,fontMode:y,toggleFont:w})});if("learning"===i)return(0,c.jsx)(ki,{section:"Learning Mode",onRestoreSave:C,onStartNewGame:A,children:(0,c.jsx)(hi,{onComplete:T,gameMode:l.gameMode,playerName:l.playerName,classPeriod:l.classPeriod,sessionId:l.sessionId,fontMode:y,toggleFont:w})});if("faction"===i)return(0,c.jsx)(ki,{section:"Faction Select",onRestoreSave:C,onStartNewGame:A,children:(0,c.jsx)(h,{onSelect:S,onOpenPeopleGallery:()=>p(!0),gameMode:l.gameMode,fontMode:y,toggleFont:w})})}return(0,c.jsx)(ki,{section:"Game Board",onRestoreSave:C,onStartNewGame:A,children:(0,c.jsx)(Ka,{sessionId:m.sessionId,classId:m.classId,gameMode:m.gameMode,round:m.round,totalRounds:m.totalRounds,currentPhase:m.currentPhase,currentPhaseLabel:m.currentPhaseLabel,seasonYear:m.seasonYear,territoryOwners:m.territoryOwners,troops:m.troops,selectedTerritory:m.selectedTerritory,scores:m.scores,nationalismMeter:m.nationalismMeter,nativeResistance:m.nativeResistance,navalDominance:m.navalDominance,factionMultiplier:m.factionMultiplier,reinforcementsRemaining:m.reinforcementsRemaining,playerFaction:m.playerFaction,playerName:m.playerName,classPeriod:m.classPeriod,playerTerritoryCount:m.playerTerritoryCount,message:m.message,battleResult:m.battleResult,showBattleModal:m.showBattleModal,showIntro:m.showIntro,currentEvent:m.currentEvent,showEventCard:m.showEventCard,gameOver:m.gameOver,gameOverReason:m.gameOverReason,gameOverWinner:m.gameOverWinner,finalScore:m.finalScore,difficulty:m.difficulty,objectiveBonus:m.objectiveBonus,leaderStates:m.leaderStates,aiLog:m.aiLog,aiActions:m.aiActions,showAIReplay:m.showAIReplay,playerObjectives:m.playerObjectives,currentKnowledgeCheck:m.currentKnowledgeCheck,showKnowledgeCheck:m.showKnowledgeCheck,knowledgeCheckResults:m.knowledgeCheckResults,knowledgeCheckHistory:m.knowledgeCheckHistory,journalEntries:m.journalEntries,battleStats:m.battleStats,maneuversRemaining:m.maneuversRemaining,onTerritoryClick:m.handleTerritoryClick,onAdvancePhase:m.advancePhase,onDismissIntro:m.dismissIntro,onDismissEvent:m.dismissEvent,onDismissBattle:m.dismissBattle,onAnswerKnowledgeCheck:m.answerKnowledgeCheck,onRequestKnowledgeCheck:m.requestKnowledgeCheck,onSaveGame:m.saveGame,onDeleteSave:m.deleteSave,pendingAdvance:m.pendingAdvance,pendingAdvanceMessage:m.pendingAdvanceMessage,onConfirmAdvance:m.confirmAdvance,onCancelAdvance:m.cancelAdvance,onGoBack:m.goBackPhase,canGoBack:m.phaseHistory.length>0&&"event"!==m.currentPhase,pendingAction:m.pendingAction,actionHistory:m.actionHistory,onConfirmPlaceTroop:m.confirmPlaceTroop,onConfirmManeuver:m.confirmManeuver,onCancelAction:m.cancelAction,onUndoLastAction:m.undoLastAction,tutorialActive:f.tutorialActive,tutorialStepData:f.currentStepData,tutorialCurrentStep:f.currentStep,tutorialTotalSteps:f.totalSteps,onTutorialNext:f.nextStep,onTutorialPrev:f.prevStep,onTutorialSkip:f.skipTutorial,onStartTutorial:f.startTutorial,onCloseAIReplay:m.closeAIReplay,onPlayAgain:N,sounds:g,fontMode:y,toggleFont:w})})}t.createRoot(document.getElementById("root")).render((0,c.jsx)(e.StrictMode,{children:(0,c.jsx)(Us,{})}))})()})();
//# sourceMappingURL=main.409370db.js.map