{"version":3,"file":"static/js/main.b56acdc3.js","mappings":"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,OACH,MAAQC,GACR,oBAAsBA,GACtB,kBAAoBA,IACnB6G,MAAM7G,IACP,GAAKA,EACD40F,EAAWnhE,aAAa1zB,EAAKC,GAC7B40F,EAAW7wC,gBAAgBhkD,GAC/B,MACF,IAAK,UACL,IAAK,QACH,MAAQC,GACR,oBAAsBA,GACtB,kBAAoBA,GACpB6G,MAAM7G,GACF40F,EAAW7wC,gBAAgBhkD,GAC3B60F,EAAWnhE,aAAa1zB,EAAKC,GACjC,MACF,IAAK,UACH8wE,GAA0B,eAAgB8jB,GAC1C9jB,GAA0B,SAAU8jB,GACpCp7B,GAAqBo7B,EAAY,UAAW50F,GAC5C,MACF,IAAK,eACH45D,GACEg7B,EACA,+BACA,gBACA50F,GAEF,MACF,IAAK,eACH45D,GACEg7B,EACA,+BACA,gBACA50F,GAEF,MACF,IAAK,YACH45D,GACEg7B,EACA,+BACA,aACA50F,GAEF,MACF,IAAK,YACH45D,GACEg7B,EACA,+BACA,aACA50F,GAEF,MACF,IAAK,aACH45D,GACEg7B,EACA,+BACA,cACA50F,GAEF,MACF,IAAK,YACH45D,GACEg7B,EACA,+BACA,aACA50F,GAEF,MACF,IAAK,UACH45D,GACEg7B,EACA,uCACA,WACA50F,GAEF,MACF,IAAK,UACH45D,GACEg7B,EACA,uCACA,WACA50F,GAEF,MACF,IAAK,WACH45D,GACEg7B,EACA,uCACA,YACA50F,GAEF,MACF,IAAK,KACHw5D,GAAqBo7B,EAAY,KAAM50F,GACvC,MACF,IAAK,YACL,IAAK,cACH,MACF,WAEM,EAAID,EAAI7D,SACT,MAAQ6D,EAAI,IAAM,MAAQA,EAAI,IAC9B,MAAQA,EAAI,IAAM,MAAQA,EAAI,KAG7By5D,GAAqBo7B,EADtB70F,EAAMq9D,GAAQ3qD,IAAI1S,IAAQA,EACaC,GAEhD,CACA,SAASq1F,GAAuBT,EAAYjoC,EAAK5sD,EAAKC,EAAOgC,EAAO0kF,GAClE,OAAQ3mF,GACN,IAAK,QACHg9D,GAAkB63B,EAAY50F,EAAO0mF,GACrC,MACF,IAAK,0BACH,GAAI,MAAQ1mF,EAAO,CACjB,GAA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oB,GAAK,CAAC,EAC/CA,EAAI,EAAI07F,EAAQtkH,OAAOmjB,IAAI,GAAI20D,QAAQ,SAAUlvD,GAC/C,EAAelgB,EAAGkgB,EAAGzF,EAAEyF,GACzB,GAAK5oB,OAAOykH,0BAA4BzkH,OAAO0kH,iBAAiBh8G,EAAG1I,OAAOykH,0BAA0BthG,IAAMmhG,EAAQtkH,OAAOmjB,IAAI20D,QAAQ,SAAUlvD,GAC7I5oB,OAAOoW,eAAe1N,EAAGkgB,EAAG5oB,OAAO21D,yBAAyBxyC,EAAGyF,GACjE,EACF,CACA,OAAOlgB,CACT,CCjBO,MAEMi8G,EAAY,CACvB,CACEjiE,QAAS,QACT0mB,KAAM,aACNzxC,MAAO,oBACPitF,QAAS,CACP,sEACA,2DACA,iEACA,qEACA,qEACA,yEACA,kEAGJ,CACEliE,QAAS,QACT0mB,KAAM,aACNzxC,MAAO,sBACPitF,QAAS,CACP,8FACA,mFACA,iEACA,4CACA,gFAGJ,CACEliE,QAAS,QACT0mB,KAAM,aACNzxC,MAAO,oBACPitF,QAAS,CACP,2HACA,kGACA,+GACA,yEACA,6FAGJ,CACEliE,QAAS,QACT0mB,KAAM,aACNzxC,MAAO,sCACPitF,QAAS,CACP,gGACA,6EACA,0EACA,+DACA,oEACA,kEAGJ,CACEliE,QAAS,QACT0mB,KAAM,aACNzxC,MAAO,uBACPitF,QAAS,CACP,6EACA,yFACA,0EACA,4EACA,sEACA,uEACA,qDACA,4DAGJ,CACEliE,QAAS,QACT0mB,KAAM,aACNzxC,MAAO,4BACPitF,QAAS,CACP,0GACA,8FACA,sGACA,0FACA,oEAGJ,CACEliE,QAAS,QACT0mB,KAAM,aACNzxC,MAAO,2BACPitF,QAAS,CACP,8FACA,wFACA,qGACA,+GACA,6FACA,qDACA,wHACA,qFAGJ,CACEliE,QAAS,QACT0mB,KAAM,aACNzxC,MAAO,uBACPitF,QAAS,CACP,2DACA,6CACA,uDACA,6CACA,2CACA,2BACA,uCAGJ,CACEliE,QAAS,QACT0mB,KAAM,aACNzxC,MAAO,yBACPitF,QAAS,CACP,yDACA,yCACA,2CACA,yCACA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","sources":["../node_modules/leaflet/src/core/Util.js","../node_modules/leaflet/src/core/Class.js","../node_modules/leaflet/src/core/Events.js","../node_modules/leaflet/src/geometry/Point.js","../node_modules/leaflet/src/geometry/Bounds.js","../node_modules/leaflet/src/geo/LatLngBounds.js","../node_modules/leaflet/src/geo/LatLng.js","../node_modules/leaflet/src/geo/crs/CRS.js","../node_modules/leaflet/src/geo/crs/CRS.Earth.js","../node_modules/leaflet/src/geo/projection/Projection.SphericalMercator.js","../node_modules/leaflet/src/geometry/Transformation.js","../node_modules/leaflet/src/geo/crs/CRS.EPSG3857.js","../node_modules/leaflet/src/layer/vector/SVG.Util.js","../node_modules/leaflet/src/core/Browser.js","../node_modules/leaflet/src/dom/DomEvent.Pointer.js","../node_modules/leaflet/src/dom/DomEvent.DoubleTap.js","../node_modules/leaflet/src/dom/DomUtil.js","../node_modules/leaflet/src/dom/DomEvent.js","../node_modules/leaflet/src/dom/PosAnimation.js","../node_modules/leaflet/src/map/Map.js","../node_modules/leaflet/src/control/Control.js","../node_modules/leaflet/src/control/Control.Layers.js","../node_modules/leaflet/src/control/Control.Zoom.js","../node_modules/leaflet/src/control/Control.Scale.js","../node_modules/leaflet/src/control/Control.Attribution.js","../node_modules/leaflet/src/control/index.js","../node_modules/leaflet/src/core/Handler.js","../node_modules/leaflet/src/core/index.js","../node_modules/leaflet/src/dom/Draggable.js","../node_modules/leaflet/src/geometry/PolyUtil.js","../node_modules/leaflet/src/geometry/LineUtil.js","../node_modules/leaflet/src/geo/projection/Projection.LonLat.js","../node_modules/leaflet/src/geo/projection/Projection.Mercator.js","../node_modules/leaflet/src/geo/crs/CRS.EPSG3395.js","../node_modules/leaflet/src/geo/crs/CRS.EPSG4326.js","../node_modules/leaflet/src/geo/crs/CRS.Simple.js","../node_modules/leaflet/src/geo/crs/index.js","../node_modules/leaflet/src/layer/Layer.js","../node_modules/leaflet/src/layer/LayerGroup.js","../node_modules/leaflet/src/layer/FeatureGroup.js","../node_modules/leaflet/src/layer/marker/Icon.js","../node_modules/leaflet/src/layer/marker/Icon.Default.js","../node_modules/leaflet/src/layer/marker/Marker.Drag.js","../node_modules/leaflet/src/layer/marker/Marker.js","../node_modules/leaflet/src/layer/vector/Path.js","../node_modules/leaflet/src/layer/vector/CircleMarker.js","../node_modules/leaflet/src/layer/vector/Circle.js","../node_modules/leaflet/src/layer/vector/Polyline.js","../node_modules/leaflet/src/layer/vector/Polygon.js","../node_modules/leaflet/src/layer/GeoJSON.js","../node_modules/leaflet/src/layer/ImageOverlay.js","../node_modules/leaflet/src/layer/VideoOverlay.js","../node_modules/leaflet/src/layer/SVGOverlay.js","../node_modules/leaflet/src/layer/DivOverlay.js","../node_modules/leaflet/src/layer/Popup.js","../node_modules/leaflet/src/layer/Tooltip.js","../node_modules/leaflet/src/layer/marker/DivIcon.js","../node_modules/leaflet/src/layer/marker/index.js","../node_modules/leaflet/src/layer/tile/GridLayer.js","../node_modules/leaflet/src/layer/tile/TileLayer.js","../node_modules/leaflet/src/layer/tile/TileLayer.WMS.js","../node_modules/leaflet/src/layer/tile/index.js","../node_modules/leaflet/src/layer/vector/Renderer.js","../node_modules/leaflet/src/layer/vector/Canvas.js","../node_modules/leaflet/src/layer/vector/SVG.VML.js","../node_modules/leaflet/src/layer/vector/SVG.js","../node_modules/leaflet/src/layer/vector/Renderer.getRenderer.js","../node_modules/leaflet/src/layer/vector/Rectangle.js","../node_modules/leaflet/src/layer/vector/index.js","../node_modules/leaflet/src/layer/index.js","../node_modules/leaflet/src/map/handler/Map.BoxZoom.js","../node_modules/leaflet/src/map/handler/Map.DoubleClickZoom.js","../node_modules/leaflet/src/map/handler/Map.Drag.js","../node_modules/leaflet/src/map/handler/Map.Keyboard.js","../node_modules/leaflet/src/map/handler/Map.ScrollWheelZoom.js","../node_modules/leaflet/src/map/handler/Map.TapHold.js","../node_modules/leaflet/src/map/handler/Map.TouchZoom.js","../node_modules/leaflet/src/map/index.js","../node_modules/react-dom/cjs/react-dom-client.production.js","../node_modules/react-dom/cjs/react-dom.production.js","../node_modules/react-dom/client.js","../node_modules/react-dom/index.js","../node_modules/react/cjs/react-jsx-runtime.production.js","../node_modules/react/cjs/react.production.js","../node_modules/react/index.js","../node_modules/react/jsx-runtime.js","../node_modules/scheduler/cjs/scheduler.production.js","../node_modules/scheduler/index.js","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","data/changelog.js","components/FactionSelect.jsx","../node_modules/@react-leaflet/core/lib/context.js","../node_modules/react-leaflet/lib/hooks.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/react-leaflet/lib/MapContainer.js","../node_modules/@react-leaflet/core/lib/element.js","../node_modules/@react-leaflet/core/lib/events.js","../node_modules/@react-leaflet/core/lib/pane.js","../node_modules/@react-leaflet/core/lib/layer.js","../node_modules/@react-leaflet/core/lib/attribution.js","../node_modules/@react-leaflet/core/lib/path.js","../node_modules/react-leaflet/lib/TileLayer.js","../node_modules/@react-leaflet/core/lib/component.js","../node_modules/@react-leaflet/core/lib/generic.js","../node_modules/@react-leaflet/core/lib/grid-layer.js","../node_modules/react-leaflet/lib/GeoJSON.js","data/territories.js","data/territoryGeo.js","components/LeafletMap.jsx","components/Scoreboard.jsx","components/TerritoryInfo.jsx","components/IntroScreen.jsx","components/EventCard.jsx","components/BattleModal.jsx","components/KnowledgeCheck.jsx","components/KnowledgeCheckPanel.jsx","components/ObjectivesPanel.jsx","components/TurnJournal.jsx","../node_modules/tslib/tslib.es6.mjs","../node_modules/@supabase/functions-js/src/types.ts","../node_modules/@supabase/functions-js/src/FunctionsClient.ts","../node_modules/@supabase/functions-js/src/helper.ts","../node_modules/@supabase/postgrest-js/src/PostgrestError.ts","../node_modules/@supabase/postgrest-js/src/PostgrestBuilder.ts","../node_modules/@supabase/postgrest-js/src/PostgrestTransformBuilder.ts","../node_modules/@supabase/postgrest-js/src/PostgrestFilterBuilder.ts","../node_modules/@supabase/postgrest-js/src/PostgrestQueryBuilder.ts","../node_modules/@supabase/postgrest-js/src/PostgrestClient.ts","../node_modules/@supabase/realtime-js/src/lib/websocket-factory.ts","../node_modules/@supabase/realtime-js/src/lib/constants.ts","../node_modules/@supabase/realtime-js/src/lib/version.ts","../node_modules/@supabase/realtime-js/src/lib/transformers.ts","../node_modules/@supabase/realtime-js/src/lib/serializer.ts","../node_modules/@supabase/realtime-js/src/lib/timer.ts","../node_modules/@supabase/realtime-js/src/lib/push.ts","../node_modules/@supabase/realtime-js/src/RealtimePresence.ts","../node_modules/@supabase/realtime-js/src/RealtimeChannel.ts","../node_modules/@supabase/realtime-js/src/RealtimeClient.ts","../node_modules/iceberg-js/src/errors/IcebergError.ts","../node_modules/iceberg-js/src/http/createFetchClient.ts","../node_modules/iceberg-js/src/utils/url.ts","../node_modules/iceberg-js/src/catalog/namespaces.ts","../node_modules/iceberg-js/src/catalog/tables.ts","../node_modules/iceberg-js/src/catalog/IcebergRestCatalog.ts","../node_modules/@supabase/storage-js/src/lib/common/errors.ts","../node_modules/@supabase/storage-js/src/lib/common/helpers.ts","../node_modules/@supabase/storage-js/src/lib/common/fetch.ts","../node_modules/@supabase/storage-js/src/lib/common/BaseApiClient.ts","../node_modules/@supabase/storage-js/src/packages/StreamDownloadBuilder.ts","../node_modules/@supabase/storage-js/src/packages/BlobDownloadBuilder.ts","../node_modules/@supabase/storage-js/src/packages/StorageFileApi.ts","../node_modules/@supabase/storage-js/src/lib/version.ts","../node_modules/@supabase/storage-js/src/lib/constants.ts","../node_modules/@supabase/storage-js/src/packages/StorageBucketApi.ts","../node_modules/@supabase/storage-js/src/packages/StorageAnalyticsClient.ts","../node_modules/@supabase/storage-js/src/packages/VectorIndexApi.ts","../node_modules/@supabase/storage-js/src/packages/VectorDataApi.ts","../node_modules/@supabase/storage-js/src/packages/VectorBucketApi.ts","../node_modules/@supabase/storage-js/src/packages/StorageVectorsClient.ts","../node_modules/@supabase/storage-js/src/StorageClient.ts","../node_modules/@supabase/auth-js/src/lib/version.ts","../node_modules/@supabase/auth-js/src/lib/constants.ts","../node_modules/@supabase/auth-js/src/lib/errors.ts","../node_modules/@supabase/auth-js/src/lib/base64url.ts","../node_modules/@supabase/auth-js/src/lib/helpers.ts","../node_modules/@supabase/auth-js/src/lib/fetch.ts","../node_modules/@supabase/auth-js/src/lib/types.ts","../node_modules/@supabase/auth-js/src/GoTrueAdminApi.ts","../node_modules/@supabase/auth-js/src/lib/local-storage.ts","../node_modules/@supabase/auth-js/src/lib/locks.ts","../node_modules/@supabase/auth-js/src/lib/web3/ethereum.ts","../node_modules/@supabase/auth-js/src/lib/webauthn.errors.ts","../node_modules/@supabase/auth-js/src/lib/webauthn.ts","../node_modules/@supabase/auth-js/src/lib/polyfills.ts","../node_modules/@supabase/auth-js/src/GoTrueClient.ts","../node_modules/@supabase/auth-js/src/AuthAdminApi.ts","../node_modules/@supabase/auth-js/src/AuthClient.ts","../node_modules/@supabase/supabase-js/src/lib/constants.ts","../node_modules/@supabase/supabase-js/src/lib/version.ts","../node_modules/@supabase/supabase-js/src/lib/fetch.ts","../node_modules/@supabase/supabase-js/src/lib/SupabaseAuthClient.ts","../node_modules/@supabase/supabase-js/src/SupabaseClient.ts","../node_modules/@supabase/supabase-js/src/lib/helpers.ts","../node_modules/@supabase/supabase-js/src/index.ts","lib/supabase.js","components/ScoreSubmission.jsx","components/LeaderboardPreview.jsx","components/Leaderboard.jsx","data/historicalAnalysis.js","components/GameReport.jsx","components/QuizReviewPanel.jsx","components/TutorialOverlay.jsx","components/AITurnReplay.jsx","components/VictoryProgress.jsx","components/ConfirmActionModal.jsx","data/vocabulary.js","components/GlossaryPanel.jsx","data/peopleProfiles.js","components/PeoplePanel.jsx","data/leaders.js","components/GameBoard.jsx","data/quizGateQuestions.js","components/TeacherDashboard.jsx","data/teacherGuide.js","components/TeacherGuide.jsx","data/learningContent.js","utils/renderBoldText.js","components/VocabTerm.jsx","utils/injectVocabTerms.js","components/LearningMode.jsx","components/PeopleGallery.jsx","components/NameEntry.jsx","data/difficultySettings.js","components/DifficultySelect.jsx","components/ErrorBoundary.jsx","data/eventCards.js","data/knowledgeChecks.js","data/objectives.js","hooks/useAI.js","reducers/types.js","reducers/gameReducer.js","reducers/mapReducer.js","reducers/combatReducer.js","reducers/eventReducer.js","reducers/knowledgeReducer.js","reducers/scoreReducer.js","reducers/aiReducer.js","reducers/leaderReducer.js","reducers/historyReducer.js","hooks/useGameStateV2.js","hooks/useTutorial.js","lib/sounds.js","hooks/useSounds.js","hooks/useFontPreference.js","App.js","index.js"],"sourcesContent":["/*\r\n * @namespace Util\r\n *\r\n * Various utility functions, used by Leaflet internally.\r\n */\r\n\r\n// @function extend(dest: Object, src?: Object): Object\r\n// Merges the properties of the `src` object (or multiple objects) into `dest` object and returns the latter. Has an `L.extend` shortcut.\r\nexport function extend(dest) {\r\n\tvar i, j, len, src;\r\n\r\n\tfor (j = 1, len = arguments.length; j < len; j++) {\r\n\t\tsrc = arguments[j];\r\n\t\tfor (i in src) {\r\n\t\t\tdest[i] = src[i];\r\n\t\t}\r\n\t}\r\n\treturn dest;\r\n}\r\n\r\n// @function create(proto: Object, properties?: Object): Object\r\n// Compatibility polyfill for [Object.create](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/create)\r\nexport var create = Object.create || (function () {\r\n\tfunction F() {}\r\n\treturn function (proto) {\r\n\t\tF.prototype = proto;\r\n\t\treturn new F();\r\n\t};\r\n})();\r\n\r\n// @function bind(fn: Function, ): Function\r\n// Returns a new function bound to the arguments passed, like [Function.prototype.bind](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\r\n// Has a `L.bind()` shortcut.\r\nexport function bind(fn, obj) {\r\n\tvar slice = Array.prototype.slice;\r\n\r\n\tif (fn.bind) {\r\n\t\treturn fn.bind.apply(fn, slice.call(arguments, 1));\r\n\t}\r\n\r\n\tvar args = slice.call(arguments, 2);\r\n\r\n\treturn function () {\r\n\t\treturn fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);\r\n\t};\r\n}\r\n\r\n// @property lastId: Number\r\n// Last unique ID used by [`stamp()`](#util-stamp)\r\nexport var lastId = 0;\r\n\r\n// @function stamp(obj: Object): Number\r\n// Returns the unique ID of an object, assigning it one if it doesn't have it.\r\nexport function stamp(obj) {\r\n\tif (!('_leaflet_id' in obj)) {\r\n\t\tobj['_leaflet_id'] = ++lastId;\r\n\t}\r\n\treturn obj._leaflet_id;\r\n}\r\n\r\n// @function throttle(fn: Function, time: Number, context: Object): Function\r\n// Returns a function which executes function `fn` with the given scope `context`\r\n// (so that the `this` keyword refers to `context` inside `fn`'s code). The function\r\n// `fn` will be called no more than one time per given amount of `time`. The arguments\r\n// received by the bound function will be any arguments passed when binding the\r\n// function, followed by any arguments passed when invoking the bound function.\r\n// Has an `L.throttle` shortcut.\r\nexport function throttle(fn, time, context) {\r\n\tvar lock, args, wrapperFn, later;\r\n\r\n\tlater = function () {\r\n\t\t// reset lock and call if queued\r\n\t\tlock = false;\r\n\t\tif (args) {\r\n\t\t\twrapperFn.apply(context, args);\r\n\t\t\targs = false;\r\n\t\t}\r\n\t};\r\n\r\n\twrapperFn = function () {\r\n\t\tif (lock) {\r\n\t\t\t// called too soon, queue to call later\r\n\t\t\targs = arguments;\r\n\r\n\t\t} else {\r\n\t\t\t// call and lock until later\r\n\t\t\tfn.apply(context, arguments);\r\n\t\t\tsetTimeout(later, time);\r\n\t\t\tlock = true;\r\n\t\t}\r\n\t};\r\n\r\n\treturn wrapperFn;\r\n}\r\n\r\n// @function wrapNum(num: Number, range: Number[], includeMax?: Boolean): Number\r\n// Returns the number `num` modulo `range` in such a way so it lies within\r\n// `range[0]` and `range[1]`. The returned value will be always smaller than\r\n// `range[1]` unless `includeMax` is set to `true`.\r\nexport function wrapNum(x, range, includeMax) {\r\n\tvar max = range[1],\r\n\t    min = range[0],\r\n\t    d = max - min;\r\n\treturn x === max && includeMax ? x : ((x - min) % d + d) % d + min;\r\n}\r\n\r\n// @function falseFn(): Function\r\n// Returns a function which always returns `false`.\r\nexport function falseFn() { return false; }\r\n\r\n// @function formatNum(num: Number, precision?: Number|false): Number\r\n// Returns the number `num` rounded with specified `precision`.\r\n// The default `precision` value is 6 decimal places.\r\n// `false` can be passed to skip any processing (can be useful to avoid round-off errors).\r\nexport function formatNum(num, precision) {\r\n\tif (precision === false) { return num; }\r\n\tvar pow = Math.pow(10, precision === undefined ? 6 : precision);\r\n\treturn Math.round(num * pow) / pow;\r\n}\r\n\r\n// @function trim(str: String): String\r\n// Compatibility polyfill for [String.prototype.trim](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)\r\nexport function trim(str) {\r\n\treturn str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\r\n}\r\n\r\n// @function splitWords(str: String): String[]\r\n// Trims and splits the string on whitespace and returns the array of parts.\r\nexport function splitWords(str) {\r\n\treturn trim(str).split(/\\s+/);\r\n}\r\n\r\n// @function setOptions(obj: Object, options: Object): Object\r\n// Merges the given properties to the `options` of the `obj` object, returning the resulting options. See `Class options`. Has an `L.setOptions` shortcut.\r\nexport function setOptions(obj, options) {\r\n\tif (!Object.prototype.hasOwnProperty.call(obj, 'options')) {\r\n\t\tobj.options = obj.options ? create(obj.options) : {};\r\n\t}\r\n\tfor (var i in options) {\r\n\t\tobj.options[i] = options[i];\r\n\t}\r\n\treturn obj.options;\r\n}\r\n\r\n// @function getParamString(obj: Object, existingUrl?: String, uppercase?: Boolean): String\r\n// Converts an object into a parameter URL string, e.g. `{a: \"foo\", b: \"bar\"}`\r\n// translates to `'?a=foo&b=bar'`. If `existingUrl` is set, the parameters will\r\n// be appended at the end. If `uppercase` is `true`, the parameter names will\r\n// be uppercased (e.g. `'?A=foo&B=bar'`)\r\nexport function getParamString(obj, existingUrl, uppercase) {\r\n\tvar params = [];\r\n\tfor (var i in obj) {\r\n\t\tparams.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\r\n\t}\r\n\treturn ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&');\r\n}\r\n\r\nvar templateRe = /\\{ *([\\w_ -]+) *\\}/g;\r\n\r\n// @function template(str: String, data: Object): String\r\n// Simple templating facility, accepts a template string of the form `'Hello {a}, {b}'`\r\n// and a data object like `{a: 'foo', b: 'bar'}`, returns evaluated string\r\n// `('Hello foo, bar')`. You can also specify functions instead of strings for\r\n// data values  they will be evaluated passing `data` as an argument.\r\nexport function template(str, data) {\r\n\treturn str.replace(templateRe, function (str, key) {\r\n\t\tvar value = data[key];\r\n\r\n\t\tif (value === undefined) {\r\n\t\t\tthrow new Error('No value provided for variable ' + str);\r\n\r\n\t\t} else if (typeof value === 'function') {\r\n\t\t\tvalue = value(data);\r\n\t\t}\r\n\t\treturn value;\r\n\t});\r\n}\r\n\r\n// @function isArray(obj): Boolean\r\n// Compatibility polyfill for [Array.isArray](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray)\r\nexport var isArray = Array.isArray || function (obj) {\r\n\treturn (Object.prototype.toString.call(obj) === '[object Array]');\r\n};\r\n\r\n// @function indexOf(array: Array, el: Object): Number\r\n// Compatibility polyfill for [Array.prototype.indexOf](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)\r\nexport function indexOf(array, el) {\r\n\tfor (var i = 0; i < array.length; i++) {\r\n\t\tif (array[i] === el) { return i; }\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n// @property emptyImageUrl: String\r\n// Data URI string containing a base64-encoded empty GIF image.\r\n// Used as a hack to free memory from unused images on WebKit-powered\r\n// mobile devices (by setting image `src` to this string).\r\nexport var emptyImageUrl = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';\r\n\r\n// inspired by https://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n\r\nfunction getPrefixed(name) {\r\n\treturn window['webkit' + name] || window['moz' + name] || window['ms' + name];\r\n}\r\n\r\nvar lastTime = 0;\r\n\r\n// fallback for IE 7-8\r\nfunction timeoutDefer(fn) {\r\n\tvar time = +new Date(),\r\n\t    timeToCall = Math.max(0, 16 - (time - lastTime));\r\n\r\n\tlastTime = time + timeToCall;\r\n\treturn window.setTimeout(fn, timeToCall);\r\n}\r\n\r\nexport var requestFn = window.requestAnimationFrame || getPrefixed('RequestAnimationFrame') || timeoutDefer;\r\nexport var cancelFn = window.cancelAnimationFrame || getPrefixed('CancelAnimationFrame') ||\r\n\t\tgetPrefixed('CancelRequestAnimationFrame') || function (id) { window.clearTimeout(id); };\r\n\r\n// @function requestAnimFrame(fn: Function, context?: Object, immediate?: Boolean): Number\r\n// Schedules `fn` to be executed when the browser repaints. `fn` is bound to\r\n// `context` if given. When `immediate` is set, `fn` is called immediately if\r\n// the browser doesn't have native support for\r\n// [`window.requestAnimationFrame`](https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame),\r\n// otherwise it's delayed. Returns a request ID that can be used to cancel the request.\r\nexport function requestAnimFrame(fn, context, immediate) {\r\n\tif (immediate && requestFn === timeoutDefer) {\r\n\t\tfn.call(context);\r\n\t} else {\r\n\t\treturn requestFn.call(window, bind(fn, context));\r\n\t}\r\n}\r\n\r\n// @function cancelAnimFrame(id: Number): undefined\r\n// Cancels a previous `requestAnimFrame`. See also [window.cancelAnimationFrame](https://developer.mozilla.org/docs/Web/API/window/cancelAnimationFrame).\r\nexport function cancelAnimFrame(id) {\r\n\tif (id) {\r\n\t\tcancelFn.call(window, id);\r\n\t}\r\n}\r\n","import * as Util from './Util';\r\n\r\n// @class Class\r\n// @aka L.Class\r\n\r\n// @section\r\n// @uninheritable\r\n\r\n// Thanks to John Resig and Dean Edwards for inspiration!\r\n\r\nexport function Class() {}\r\n\r\nClass.extend = function (props) {\r\n\r\n\t// @function extend(props: Object): Function\r\n\t// [Extends the current class](#class-inheritance) given the properties to be included.\r\n\t// Returns a Javascript function that is a class constructor (to be called with `new`).\r\n\tvar NewClass = function () {\r\n\r\n\t\tUtil.setOptions(this);\r\n\r\n\t\t// call the constructor\r\n\t\tif (this.initialize) {\r\n\t\t\tthis.initialize.apply(this, arguments);\r\n\t\t}\r\n\r\n\t\t// call all constructor hooks\r\n\t\tthis.callInitHooks();\r\n\t};\r\n\r\n\tvar parentProto = NewClass.__super__ = this.prototype;\r\n\r\n\tvar proto = Util.create(parentProto);\r\n\tproto.constructor = NewClass;\r\n\r\n\tNewClass.prototype = proto;\r\n\r\n\t// inherit parent's statics\r\n\tfor (var i in this) {\r\n\t\tif (Object.prototype.hasOwnProperty.call(this, i) && i !== 'prototype' && i !== '__super__') {\r\n\t\t\tNewClass[i] = this[i];\r\n\t\t}\r\n\t}\r\n\r\n\t// mix static properties into the class\r\n\tif (props.statics) {\r\n\t\tUtil.extend(NewClass, props.statics);\r\n\t}\r\n\r\n\t// mix includes into the prototype\r\n\tif (props.includes) {\r\n\t\tcheckDeprecatedMixinEvents(props.includes);\r\n\t\tUtil.extend.apply(null, [proto].concat(props.includes));\r\n\t}\r\n\r\n\t// mix given properties into the prototype\r\n\tUtil.extend(proto, props);\r\n\tdelete proto.statics;\r\n\tdelete proto.includes;\r\n\r\n\t// merge options\r\n\tif (proto.options) {\r\n\t\tproto.options = parentProto.options ? Util.create(parentProto.options) : {};\r\n\t\tUtil.extend(proto.options, props.options);\r\n\t}\r\n\r\n\tproto._initHooks = [];\r\n\r\n\t// add method for calling all hooks\r\n\tproto.callInitHooks = function () {\r\n\r\n\t\tif (this._initHooksCalled) { return; }\r\n\r\n\t\tif (parentProto.callInitHooks) {\r\n\t\t\tparentProto.callInitHooks.call(this);\r\n\t\t}\r\n\r\n\t\tthis._initHooksCalled = true;\r\n\r\n\t\tfor (var i = 0, len = proto._initHooks.length; i < len; i++) {\r\n\t\t\tproto._initHooks[i].call(this);\r\n\t\t}\r\n\t};\r\n\r\n\treturn NewClass;\r\n};\r\n\r\n\r\n// @function include(properties: Object): this\r\n// [Includes a mixin](#class-includes) into the current class.\r\nClass.include = function (props) {\r\n\tvar parentOptions = this.prototype.options;\r\n\tUtil.extend(this.prototype, props);\r\n\tif (props.options) {\r\n\t\tthis.prototype.options = parentOptions;\r\n\t\tthis.mergeOptions(props.options);\r\n\t}\r\n\treturn this;\r\n};\r\n\r\n// @function mergeOptions(options: Object): this\r\n// [Merges `options`](#class-options) into the defaults of the class.\r\nClass.mergeOptions = function (options) {\r\n\tUtil.extend(this.prototype.options, options);\r\n\treturn this;\r\n};\r\n\r\n// @function addInitHook(fn: Function): this\r\n// Adds a [constructor hook](#class-constructor-hooks) to the class.\r\nClass.addInitHook = function (fn) { // (Function) || (String, args...)\r\n\tvar args = Array.prototype.slice.call(arguments, 1);\r\n\r\n\tvar init = typeof fn === 'function' ? fn : function () {\r\n\t\tthis[fn].apply(this, args);\r\n\t};\r\n\r\n\tthis.prototype._initHooks = this.prototype._initHooks || [];\r\n\tthis.prototype._initHooks.push(init);\r\n\treturn this;\r\n};\r\n\r\nfunction checkDeprecatedMixinEvents(includes) {\r\n\t/* global L: true */\r\n\tif (typeof L === 'undefined' || !L || !L.Mixin) { return; }\r\n\r\n\tincludes = Util.isArray(includes) ? includes : [includes];\r\n\r\n\tfor (var i = 0; i < includes.length; i++) {\r\n\t\tif (includes[i] === L.Mixin.Events) {\r\n\t\t\tconsole.warn('Deprecated include of L.Mixin.Events: ' +\r\n\t\t\t\t'this property will be removed in future releases, ' +\r\n\t\t\t\t'please inherit from L.Evented instead.', new Error().stack);\r\n\t\t}\r\n\t}\r\n}\r\n","import {Class} from './Class';\r\nimport * as Util from './Util';\r\n\r\n/*\r\n * @class Evented\r\n * @aka L.Evented\r\n * @inherits Class\r\n *\r\n * A set of methods shared between event-powered classes (like `Map` and `Marker`). Generally, events allow you to execute some function when something happens with an object (e.g. the user clicks on the map, causing the map to fire `'click'` event).\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * map.on('click', function(e) {\r\n * \talert(e.latlng);\r\n * } );\r\n * ```\r\n *\r\n * Leaflet deals with event listeners by reference, so if you want to add a listener and then remove it, define it as a function:\r\n *\r\n * ```js\r\n * function onClick(e) { ... }\r\n *\r\n * map.on('click', onClick);\r\n * map.off('click', onClick);\r\n * ```\r\n */\r\n\r\nexport var Events = {\r\n\t/* @method on(type: String, fn: Function, context?: Object): this\r\n\t * Adds a listener function (`fn`) to a particular event type of the object. You can optionally specify the context of the listener (object the this keyword will point to). You can also pass several space-separated types (e.g. `'click dblclick'`).\r\n\t *\r\n\t * @alternative\r\n\t * @method on(eventMap: Object): this\r\n\t * Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\n\t */\r\n\ton: function (types, fn, context) {\r\n\r\n\t\t// types can be a map of types/handlers\r\n\t\tif (typeof types === 'object') {\r\n\t\t\tfor (var type in types) {\r\n\t\t\t\t// we don't process space-separated events here for performance;\r\n\t\t\t\t// it's a hot path since Layer uses the on(obj) syntax\r\n\t\t\t\tthis._on(type, types[type], fn);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\t// types can be a string of space-separated words\r\n\t\t\ttypes = Util.splitWords(types);\r\n\r\n\t\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\t\tthis._on(types[i], fn, context);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/* @method off(type: String, fn?: Function, context?: Object): this\r\n\t * Removes a previously added listener function. If no function is specified, it will remove all the listeners of that particular event from the object. Note that if you passed a custom context to `on`, you must pass the same context to `off` in order to remove the listener.\r\n\t *\r\n\t * @alternative\r\n\t * @method off(eventMap: Object): this\r\n\t * Removes a set of type/listener pairs.\r\n\t *\r\n\t * @alternative\r\n\t * @method off: this\r\n\t * Removes all listeners to all events on the object. This includes implicitly attached events.\r\n\t */\r\n\toff: function (types, fn, context) {\r\n\r\n\t\tif (!arguments.length) {\r\n\t\t\t// clear all listeners if called without arguments\r\n\t\t\tdelete this._events;\r\n\r\n\t\t} else if (typeof types === 'object') {\r\n\t\t\tfor (var type in types) {\r\n\t\t\t\tthis._off(type, types[type], fn);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\ttypes = Util.splitWords(types);\r\n\r\n\t\t\tvar removeAll = arguments.length === 1;\r\n\t\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\t\tif (removeAll) {\r\n\t\t\t\t\tthis._off(types[i]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._off(types[i], fn, context);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// attach listener (without syntactic sugar now)\r\n\t_on: function (type, fn, context, _once) {\r\n\t\tif (typeof fn !== 'function') {\r\n\t\t\tconsole.warn('wrong listener type: ' + typeof fn);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// check if fn already there\r\n\t\tif (this._listens(type, fn, context) !== false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (context === this) {\r\n\t\t\t// Less memory footprint.\r\n\t\t\tcontext = undefined;\r\n\t\t}\r\n\r\n\t\tvar newListener = {fn: fn, ctx: context};\r\n\t\tif (_once) {\r\n\t\t\tnewListener.once = true;\r\n\t\t}\r\n\r\n\t\tthis._events = this._events || {};\r\n\t\tthis._events[type] = this._events[type] || [];\r\n\t\tthis._events[type].push(newListener);\r\n\t},\r\n\r\n\t_off: function (type, fn, context) {\r\n\t\tvar listeners,\r\n\t\t    i,\r\n\t\t    len;\r\n\r\n\t\tif (!this._events) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlisteners = this._events[type];\r\n\t\tif (!listeners) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (arguments.length === 1) { // remove all\r\n\t\t\tif (this._firingCount) {\r\n\t\t\t\t// Set all removed listeners to noop\r\n\t\t\t\t// so they are not called if remove happens in fire\r\n\t\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\t\tlisteners[i].fn = Util.falseFn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// clear all listeners for a type if function isn't specified\r\n\t\t\tdelete this._events[type];\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (typeof fn !== 'function') {\r\n\t\t\tconsole.warn('wrong listener type: ' + typeof fn);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// find fn and remove it\r\n\t\tvar index = this._listens(type, fn, context);\r\n\t\tif (index !== false) {\r\n\t\t\tvar listener = listeners[index];\r\n\t\t\tif (this._firingCount) {\r\n\t\t\t\t// set the removed listener to noop so that's not called if remove happens in fire\r\n\t\t\t\tlistener.fn = Util.falseFn;\r\n\r\n\t\t\t\t/* copy array in case events are being fired */\r\n\t\t\t\tthis._events[type] = listeners = listeners.slice();\r\n\t\t\t}\r\n\t\t\tlisteners.splice(index, 1);\r\n\t\t}\r\n\t},\r\n\r\n\t// @method fire(type: String, data?: Object, propagate?: Boolean): this\r\n\t// Fires an event of the specified type. You can optionally provide a data\r\n\t// object  the first argument of the listener function will contain its\r\n\t// properties. The event can optionally be propagated to event parents.\r\n\tfire: function (type, data, propagate) {\r\n\t\tif (!this.listens(type, propagate)) { return this; }\r\n\r\n\t\tvar event = Util.extend({}, data, {\r\n\t\t\ttype: type,\r\n\t\t\ttarget: this,\r\n\t\t\tsourceTarget: data && data.sourceTarget || this\r\n\t\t});\r\n\r\n\t\tif (this._events) {\r\n\t\t\tvar listeners = this._events[type];\r\n\t\t\tif (listeners) {\r\n\t\t\t\tthis._firingCount = (this._firingCount + 1) || 1;\r\n\t\t\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\t\tvar l = listeners[i];\r\n\t\t\t\t\t// off overwrites l.fn, so we need to copy fn to a var\r\n\t\t\t\t\tvar fn = l.fn;\r\n\t\t\t\t\tif (l.once) {\r\n\t\t\t\t\t\tthis.off(type, fn, l.ctx);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfn.call(l.ctx || this, event);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._firingCount--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (propagate) {\r\n\t\t\t// propagate the event to parents (set with addEventParent)\r\n\t\t\tthis._propagateEvent(event);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method listens(type: String, propagate?: Boolean): Boolean\r\n\t// @method listens(type: String, fn: Function, context?: Object, propagate?: Boolean): Boolean\r\n\t// Returns `true` if a particular event type has any listeners attached to it.\r\n\t// The verification can optionally be propagated, it will return `true` if parents have the listener attached to it.\r\n\tlistens: function (type, fn, context, propagate) {\r\n\t\tif (typeof type !== 'string') {\r\n\t\t\tconsole.warn('\"string\" type argument expected');\r\n\t\t}\r\n\r\n\t\t// we don't overwrite the input `fn` value, because we need to use it for propagation\r\n\t\tvar _fn = fn;\r\n\t\tif (typeof fn !== 'function') {\r\n\t\t\tpropagate = !!fn;\r\n\t\t\t_fn = undefined;\r\n\t\t\tcontext = undefined;\r\n\t\t}\r\n\r\n\t\tvar listeners = this._events && this._events[type];\r\n\t\tif (listeners && listeners.length) {\r\n\t\t\tif (this._listens(type, _fn, context) !== false) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (propagate) {\r\n\t\t\t// also check parents for listeners if event propagates\r\n\t\t\tfor (var id in this._eventParents) {\r\n\t\t\t\tif (this._eventParents[id].listens(type, fn, context, propagate)) { return true; }\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t// returns the index (number) or false\r\n\t_listens: function (type, fn, context) {\r\n\t\tif (!this._events) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar listeners = this._events[type] || [];\r\n\t\tif (!fn) {\r\n\t\t\treturn !!listeners.length;\r\n\t\t}\r\n\r\n\t\tif (context === this) {\r\n\t\t\t// Less memory footprint.\r\n\t\t\tcontext = undefined;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\tif (listeners[i].fn === fn && listeners[i].ctx === context) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\t// @method once(): this\r\n\t// Behaves as [`on()`](#evented-on), except the listener will only get fired once and then removed.\r\n\tonce: function (types, fn, context) {\r\n\r\n\t\t// types can be a map of types/handlers\r\n\t\tif (typeof types === 'object') {\r\n\t\t\tfor (var type in types) {\r\n\t\t\t\t// we don't process space-separated events here for performance;\r\n\t\t\t\t// it's a hot path since Layer uses the on(obj) syntax\r\n\t\t\t\tthis._on(type, types[type], fn, true);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\t// types can be a string of space-separated words\r\n\t\t\ttypes = Util.splitWords(types);\r\n\r\n\t\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\t\tthis._on(types[i], fn, context, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method addEventParent(obj: Evented): this\r\n\t// Adds an event parent - an `Evented` that will receive propagated events\r\n\taddEventParent: function (obj) {\r\n\t\tthis._eventParents = this._eventParents || {};\r\n\t\tthis._eventParents[Util.stamp(obj)] = obj;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method removeEventParent(obj: Evented): this\r\n\t// Removes an event parent, so it will stop receiving propagated events\r\n\tremoveEventParent: function (obj) {\r\n\t\tif (this._eventParents) {\r\n\t\t\tdelete this._eventParents[Util.stamp(obj)];\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_propagateEvent: function (e) {\r\n\t\tfor (var id in this._eventParents) {\r\n\t\t\tthis._eventParents[id].fire(e.type, Util.extend({\r\n\t\t\t\tlayer: e.target,\r\n\t\t\t\tpropagatedFrom: e.target\r\n\t\t\t}, e), true);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// aliases; we should ditch those eventually\r\n\r\n// @method addEventListener(): this\r\n// Alias to [`on()`](#evented-on)\r\nEvents.addEventListener = Events.on;\r\n\r\n// @method removeEventListener(): this\r\n// Alias to [`off()`](#evented-off)\r\n\r\n// @method clearAllEventListeners(): this\r\n// Alias to [`off()`](#evented-off)\r\nEvents.removeEventListener = Events.clearAllEventListeners = Events.off;\r\n\r\n// @method addOneTimeEventListener(): this\r\n// Alias to [`once()`](#evented-once)\r\nEvents.addOneTimeEventListener = Events.once;\r\n\r\n// @method fireEvent(): this\r\n// Alias to [`fire()`](#evented-fire)\r\nEvents.fireEvent = Events.fire;\r\n\r\n// @method hasEventListeners(): Boolean\r\n// Alias to [`listens()`](#evented-listens)\r\nEvents.hasEventListeners = Events.listens;\r\n\r\nexport var Evented = Class.extend(Events);\r\n","import {isArray, formatNum} from '../core/Util';\r\n\r\n/*\r\n * @class Point\r\n * @aka L.Point\r\n *\r\n * Represents a point with `x` and `y` coordinates in pixels.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * var point = L.point(200, 300);\r\n * ```\r\n *\r\n * All Leaflet methods and options that accept `Point` objects also accept them in a simple Array form (unless noted otherwise), so these lines are equivalent:\r\n *\r\n * ```js\r\n * map.panBy([200, 300]);\r\n * map.panBy(L.point(200, 300));\r\n * ```\r\n *\r\n * Note that `Point` does not inherit from Leaflet's `Class` object,\r\n * which means new classes can't inherit from it, and new methods\r\n * can't be added to it with the `include` function.\r\n */\r\n\r\nexport function Point(x, y, round) {\r\n\t// @property x: Number; The `x` coordinate of the point\r\n\tthis.x = (round ? Math.round(x) : x);\r\n\t// @property y: Number; The `y` coordinate of the point\r\n\tthis.y = (round ? Math.round(y) : y);\r\n}\r\n\r\nvar trunc = Math.trunc || function (v) {\r\n\treturn v > 0 ? Math.floor(v) : Math.ceil(v);\r\n};\r\n\r\nPoint.prototype = {\r\n\r\n\t// @method clone(): Point\r\n\t// Returns a copy of the current point.\r\n\tclone: function () {\r\n\t\treturn new Point(this.x, this.y);\r\n\t},\r\n\r\n\t// @method add(otherPoint: Point): Point\r\n\t// Returns the result of addition of the current and the given points.\r\n\tadd: function (point) {\r\n\t\t// non-destructive, returns a new point\r\n\t\treturn this.clone()._add(toPoint(point));\r\n\t},\r\n\r\n\t_add: function (point) {\r\n\t\t// destructive, used directly for performance in situations where it's safe to modify existing point\r\n\t\tthis.x += point.x;\r\n\t\tthis.y += point.y;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method subtract(otherPoint: Point): Point\r\n\t// Returns the result of subtraction of the given point from the current.\r\n\tsubtract: function (point) {\r\n\t\treturn this.clone()._subtract(toPoint(point));\r\n\t},\r\n\r\n\t_subtract: function (point) {\r\n\t\tthis.x -= point.x;\r\n\t\tthis.y -= point.y;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method divideBy(num: Number): Point\r\n\t// Returns the result of division of the current point by the given number.\r\n\tdivideBy: function (num) {\r\n\t\treturn this.clone()._divideBy(num);\r\n\t},\r\n\r\n\t_divideBy: function (num) {\r\n\t\tthis.x /= num;\r\n\t\tthis.y /= num;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method multiplyBy(num: Number): Point\r\n\t// Returns the result of multiplication of the current point by the given number.\r\n\tmultiplyBy: function (num) {\r\n\t\treturn this.clone()._multiplyBy(num);\r\n\t},\r\n\r\n\t_multiplyBy: function (num) {\r\n\t\tthis.x *= num;\r\n\t\tthis.y *= num;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method scaleBy(scale: Point): Point\r\n\t// Multiply each coordinate of the current point by each coordinate of\r\n\t// `scale`. In linear algebra terms, multiply the point by the\r\n\t// [scaling matrix](https://en.wikipedia.org/wiki/Scaling_%28geometry%29#Matrix_representation)\r\n\t// defined by `scale`.\r\n\tscaleBy: function (point) {\r\n\t\treturn new Point(this.x * point.x, this.y * point.y);\r\n\t},\r\n\r\n\t// @method unscaleBy(scale: Point): Point\r\n\t// Inverse of `scaleBy`. Divide each coordinate of the current point by\r\n\t// each coordinate of `scale`.\r\n\tunscaleBy: function (point) {\r\n\t\treturn new Point(this.x / point.x, this.y / point.y);\r\n\t},\r\n\r\n\t// @method round(): Point\r\n\t// Returns a copy of the current point with rounded coordinates.\r\n\tround: function () {\r\n\t\treturn this.clone()._round();\r\n\t},\r\n\r\n\t_round: function () {\r\n\t\tthis.x = Math.round(this.x);\r\n\t\tthis.y = Math.round(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method floor(): Point\r\n\t// Returns a copy of the current point with floored coordinates (rounded down).\r\n\tfloor: function () {\r\n\t\treturn this.clone()._floor();\r\n\t},\r\n\r\n\t_floor: function () {\r\n\t\tthis.x = Math.floor(this.x);\r\n\t\tthis.y = Math.floor(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method ceil(): Point\r\n\t// Returns a copy of the current point with ceiled coordinates (rounded up).\r\n\tceil: function () {\r\n\t\treturn this.clone()._ceil();\r\n\t},\r\n\r\n\t_ceil: function () {\r\n\t\tthis.x = Math.ceil(this.x);\r\n\t\tthis.y = Math.ceil(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method trunc(): Point\r\n\t// Returns a copy of the current point with truncated coordinates (rounded towards zero).\r\n\ttrunc: function () {\r\n\t\treturn this.clone()._trunc();\r\n\t},\r\n\r\n\t_trunc: function () {\r\n\t\tthis.x = trunc(this.x);\r\n\t\tthis.y = trunc(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method distanceTo(otherPoint: Point): Number\r\n\t// Returns the cartesian distance between the current and the given points.\r\n\tdistanceTo: function (point) {\r\n\t\tpoint = toPoint(point);\r\n\r\n\t\tvar x = point.x - this.x,\r\n\t\t    y = point.y - this.y;\r\n\r\n\t\treturn Math.sqrt(x * x + y * y);\r\n\t},\r\n\r\n\t// @method equals(otherPoint: Point): Boolean\r\n\t// Returns `true` if the given point has the same coordinates.\r\n\tequals: function (point) {\r\n\t\tpoint = toPoint(point);\r\n\r\n\t\treturn point.x === this.x &&\r\n\t\t       point.y === this.y;\r\n\t},\r\n\r\n\t// @method contains(otherPoint: Point): Boolean\r\n\t// Returns `true` if both coordinates of the given point are less than the corresponding current point coordinates (in absolute values).\r\n\tcontains: function (point) {\r\n\t\tpoint = toPoint(point);\r\n\r\n\t\treturn Math.abs(point.x) <= Math.abs(this.x) &&\r\n\t\t       Math.abs(point.y) <= Math.abs(this.y);\r\n\t},\r\n\r\n\t// @method toString(): String\r\n\t// Returns a string representation of the point for debugging purposes.\r\n\ttoString: function () {\r\n\t\treturn 'Point(' +\r\n\t\t        formatNum(this.x) + ', ' +\r\n\t\t        formatNum(this.y) + ')';\r\n\t}\r\n};\r\n\r\n// @factory L.point(x: Number, y: Number, round?: Boolean)\r\n// Creates a Point object with the given `x` and `y` coordinates. If optional `round` is set to true, rounds the `x` and `y` values.\r\n\r\n// @alternative\r\n// @factory L.point(coords: Number[])\r\n// Expects an array of the form `[x, y]` instead.\r\n\r\n// @alternative\r\n// @factory L.point(coords: Object)\r\n// Expects a plain object of the form `{x: Number, y: Number}` instead.\r\nexport function toPoint(x, y, round) {\r\n\tif (x instanceof Point) {\r\n\t\treturn x;\r\n\t}\r\n\tif (isArray(x)) {\r\n\t\treturn new Point(x[0], x[1]);\r\n\t}\r\n\tif (x === undefined || x === null) {\r\n\t\treturn x;\r\n\t}\r\n\tif (typeof x === 'object' && 'x' in x && 'y' in x) {\r\n\t\treturn new Point(x.x, x.y);\r\n\t}\r\n\treturn new Point(x, y, round);\r\n}\r\n","import {Point, toPoint} from './Point';\r\n\r\n/*\r\n * @class Bounds\r\n * @aka L.Bounds\r\n *\r\n * Represents a rectangular area in pixel coordinates.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * var p1 = L.point(10, 10),\r\n * p2 = L.point(40, 60),\r\n * bounds = L.bounds(p1, p2);\r\n * ```\r\n *\r\n * All Leaflet methods that accept `Bounds` objects also accept them in a simple Array form (unless noted otherwise), so the bounds example above can be passed like this:\r\n *\r\n * ```js\r\n * otherBounds.intersects([[10, 10], [40, 60]]);\r\n * ```\r\n *\r\n * Note that `Bounds` does not inherit from Leaflet's `Class` object,\r\n * which means new classes can't inherit from it, and new methods\r\n * can't be added to it with the `include` function.\r\n */\r\n\r\nexport function Bounds(a, b) {\r\n\tif (!a) { return; }\r\n\r\n\tvar points = b ? [a, b] : a;\r\n\r\n\tfor (var i = 0, len = points.length; i < len; i++) {\r\n\t\tthis.extend(points[i]);\r\n\t}\r\n}\r\n\r\nBounds.prototype = {\r\n\t// @method extend(point: Point): this\r\n\t// Extends the bounds to contain the given point.\r\n\r\n\t// @alternative\r\n\t// @method extend(otherBounds: Bounds): this\r\n\t// Extend the bounds to contain the given bounds\r\n\textend: function (obj) {\r\n\t\tvar min2, max2;\r\n\t\tif (!obj) { return this; }\r\n\r\n\t\tif (obj instanceof Point || typeof obj[0] === 'number' || 'x' in obj) {\r\n\t\t\tmin2 = max2 = toPoint(obj);\r\n\t\t} else {\r\n\t\t\tobj = toBounds(obj);\r\n\t\t\tmin2 = obj.min;\r\n\t\t\tmax2 = obj.max;\r\n\r\n\t\t\tif (!min2 || !max2) { return this; }\r\n\t\t}\r\n\r\n\t\t// @property min: Point\r\n\t\t// The top left corner of the rectangle.\r\n\t\t// @property max: Point\r\n\t\t// The bottom right corner of the rectangle.\r\n\t\tif (!this.min && !this.max) {\r\n\t\t\tthis.min = min2.clone();\r\n\t\t\tthis.max = max2.clone();\r\n\t\t} else {\r\n\t\t\tthis.min.x = Math.min(min2.x, this.min.x);\r\n\t\t\tthis.max.x = Math.max(max2.x, this.max.x);\r\n\t\t\tthis.min.y = Math.min(min2.y, this.min.y);\r\n\t\t\tthis.max.y = Math.max(max2.y, this.max.y);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method getCenter(round?: Boolean): Point\r\n\t// Returns the center point of the bounds.\r\n\tgetCenter: function (round) {\r\n\t\treturn toPoint(\r\n\t\t        (this.min.x + this.max.x) / 2,\r\n\t\t        (this.min.y + this.max.y) / 2, round);\r\n\t},\r\n\r\n\t// @method getBottomLeft(): Point\r\n\t// Returns the bottom-left point of the bounds.\r\n\tgetBottomLeft: function () {\r\n\t\treturn toPoint(this.min.x, this.max.y);\r\n\t},\r\n\r\n\t// @method getTopRight(): Point\r\n\t// Returns the top-right point of the bounds.\r\n\tgetTopRight: function () { // -> Point\r\n\t\treturn toPoint(this.max.x, this.min.y);\r\n\t},\r\n\r\n\t// @method getTopLeft(): Point\r\n\t// Returns the top-left point of the bounds (i.e. [`this.min`](#bounds-min)).\r\n\tgetTopLeft: function () {\r\n\t\treturn this.min; // left, top\r\n\t},\r\n\r\n\t// @method getBottomRight(): Point\r\n\t// Returns the bottom-right point of the bounds (i.e. [`this.max`](#bounds-max)).\r\n\tgetBottomRight: function () {\r\n\t\treturn this.max; // right, bottom\r\n\t},\r\n\r\n\t// @method getSize(): Point\r\n\t// Returns the size of the given bounds\r\n\tgetSize: function () {\r\n\t\treturn this.max.subtract(this.min);\r\n\t},\r\n\r\n\t// @method contains(otherBounds: Bounds): Boolean\r\n\t// Returns `true` if the rectangle contains the given one.\r\n\t// @alternative\r\n\t// @method contains(point: Point): Boolean\r\n\t// Returns `true` if the rectangle contains the given point.\r\n\tcontains: function (obj) {\r\n\t\tvar min, max;\r\n\r\n\t\tif (typeof obj[0] === 'number' || obj instanceof Point) {\r\n\t\t\tobj = toPoint(obj);\r\n\t\t} else {\r\n\t\t\tobj = toBounds(obj);\r\n\t\t}\r\n\r\n\t\tif (obj instanceof Bounds) {\r\n\t\t\tmin = obj.min;\r\n\t\t\tmax = obj.max;\r\n\t\t} else {\r\n\t\t\tmin = max = obj;\r\n\t\t}\r\n\r\n\t\treturn (min.x >= this.min.x) &&\r\n\t\t       (max.x <= this.max.x) &&\r\n\t\t       (min.y >= this.min.y) &&\r\n\t\t       (max.y <= this.max.y);\r\n\t},\r\n\r\n\t// @method intersects(otherBounds: Bounds): Boolean\r\n\t// Returns `true` if the rectangle intersects the given bounds. Two bounds\r\n\t// intersect if they have at least one point in common.\r\n\tintersects: function (bounds) { // (Bounds) -> Boolean\r\n\t\tbounds = toBounds(bounds);\r\n\r\n\t\tvar min = this.min,\r\n\t\t    max = this.max,\r\n\t\t    min2 = bounds.min,\r\n\t\t    max2 = bounds.max,\r\n\t\t    xIntersects = (max2.x >= min.x) && (min2.x <= max.x),\r\n\t\t    yIntersects = (max2.y >= min.y) && (min2.y <= max.y);\r\n\r\n\t\treturn xIntersects && yIntersects;\r\n\t},\r\n\r\n\t// @method overlaps(otherBounds: Bounds): Boolean\r\n\t// Returns `true` if the rectangle overlaps the given bounds. Two bounds\r\n\t// overlap if their intersection is an area.\r\n\toverlaps: function (bounds) { // (Bounds) -> Boolean\r\n\t\tbounds = toBounds(bounds);\r\n\r\n\t\tvar min = this.min,\r\n\t\t    max = this.max,\r\n\t\t    min2 = bounds.min,\r\n\t\t    max2 = bounds.max,\r\n\t\t    xOverlaps = (max2.x > min.x) && (min2.x < max.x),\r\n\t\t    yOverlaps = (max2.y > min.y) && (min2.y < max.y);\r\n\r\n\t\treturn xOverlaps && yOverlaps;\r\n\t},\r\n\r\n\t// @method isValid(): Boolean\r\n\t// Returns `true` if the bounds are properly initialized.\r\n\tisValid: function () {\r\n\t\treturn !!(this.min && this.max);\r\n\t},\r\n\r\n\r\n\t// @method pad(bufferRatio: Number): Bounds\r\n\t// Returns bounds created by extending or retracting the current bounds by a given ratio in each direction.\r\n\t// For example, a ratio of 0.5 extends the bounds by 50% in each direction.\r\n\t// Negative values will retract the bounds.\r\n\tpad: function (bufferRatio) {\r\n\t\tvar min = this.min,\r\n\t\tmax = this.max,\r\n\t\theightBuffer = Math.abs(min.x - max.x) * bufferRatio,\r\n\t\twidthBuffer = Math.abs(min.y - max.y) * bufferRatio;\r\n\r\n\r\n\t\treturn toBounds(\r\n\t\t\ttoPoint(min.x - heightBuffer, min.y - widthBuffer),\r\n\t\t\ttoPoint(max.x + heightBuffer, max.y + widthBuffer));\r\n\t},\r\n\r\n\r\n\t// @method equals(otherBounds: Bounds): Boolean\r\n\t// Returns `true` if the rectangle is equivalent to the given bounds.\r\n\tequals: function (bounds) {\r\n\t\tif (!bounds) { return false; }\r\n\r\n\t\tbounds = toBounds(bounds);\r\n\r\n\t\treturn this.min.equals(bounds.getTopLeft()) &&\r\n\t\t\tthis.max.equals(bounds.getBottomRight());\r\n\t},\r\n};\r\n\r\n\r\n// @factory L.bounds(corner1: Point, corner2: Point)\r\n// Creates a Bounds object from two corners coordinate pairs.\r\n// @alternative\r\n// @factory L.bounds(points: Point[])\r\n// Creates a Bounds object from the given array of points.\r\nexport function toBounds(a, b) {\r\n\tif (!a || a instanceof Bounds) {\r\n\t\treturn a;\r\n\t}\r\n\treturn new Bounds(a, b);\r\n}\r\n","import {LatLng, toLatLng} from './LatLng';\r\n\r\n/*\r\n * @class LatLngBounds\r\n * @aka L.LatLngBounds\r\n *\r\n * Represents a rectangular geographical area on a map.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * var corner1 = L.latLng(40.712, -74.227),\r\n * corner2 = L.latLng(40.774, -74.125),\r\n * bounds = L.latLngBounds(corner1, corner2);\r\n * ```\r\n *\r\n * All Leaflet methods that accept LatLngBounds objects also accept them in a simple Array form (unless noted otherwise), so the bounds example above can be passed like this:\r\n *\r\n * ```js\r\n * map.fitBounds([\r\n * \t[40.712, -74.227],\r\n * \t[40.774, -74.125]\r\n * ]);\r\n * ```\r\n *\r\n * Caution: if the area crosses the antimeridian (often confused with the International Date Line), you must specify corners _outside_ the [-180, 180] degrees longitude range.\r\n *\r\n * Note that `LatLngBounds` does not inherit from Leaflet's `Class` object,\r\n * which means new classes can't inherit from it, and new methods\r\n * can't be added to it with the `include` function.\r\n */\r\n\r\nexport function LatLngBounds(corner1, corner2) { // (LatLng, LatLng) or (LatLng[])\r\n\tif (!corner1) { return; }\r\n\r\n\tvar latlngs = corner2 ? [corner1, corner2] : corner1;\r\n\r\n\tfor (var i = 0, len = latlngs.length; i < len; i++) {\r\n\t\tthis.extend(latlngs[i]);\r\n\t}\r\n}\r\n\r\nLatLngBounds.prototype = {\r\n\r\n\t// @method extend(latlng: LatLng): this\r\n\t// Extend the bounds to contain the given point\r\n\r\n\t// @alternative\r\n\t// @method extend(otherBounds: LatLngBounds): this\r\n\t// Extend the bounds to contain the given bounds\r\n\textend: function (obj) {\r\n\t\tvar sw = this._southWest,\r\n\t\t    ne = this._northEast,\r\n\t\t    sw2, ne2;\r\n\r\n\t\tif (obj instanceof LatLng) {\r\n\t\t\tsw2 = obj;\r\n\t\t\tne2 = obj;\r\n\r\n\t\t} else if (obj instanceof LatLngBounds) {\r\n\t\t\tsw2 = obj._southWest;\r\n\t\t\tne2 = obj._northEast;\r\n\r\n\t\t\tif (!sw2 || !ne2) { return this; }\r\n\r\n\t\t} else {\r\n\t\t\treturn obj ? this.extend(toLatLng(obj) || toLatLngBounds(obj)) : this;\r\n\t\t}\r\n\r\n\t\tif (!sw && !ne) {\r\n\t\t\tthis._southWest = new LatLng(sw2.lat, sw2.lng);\r\n\t\t\tthis._northEast = new LatLng(ne2.lat, ne2.lng);\r\n\t\t} else {\r\n\t\t\tsw.lat = Math.min(sw2.lat, sw.lat);\r\n\t\t\tsw.lng = Math.min(sw2.lng, sw.lng);\r\n\t\t\tne.lat = Math.max(ne2.lat, ne.lat);\r\n\t\t\tne.lng = Math.max(ne2.lng, ne.lng);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method pad(bufferRatio: Number): LatLngBounds\r\n\t// Returns bounds created by extending or retracting the current bounds by a given ratio in each direction.\r\n\t// For example, a ratio of 0.5 extends the bounds by 50% in each direction.\r\n\t// Negative values will retract the bounds.\r\n\tpad: function (bufferRatio) {\r\n\t\tvar sw = this._southWest,\r\n\t\t    ne = this._northEast,\r\n\t\t    heightBuffer = Math.abs(sw.lat - ne.lat) * bufferRatio,\r\n\t\t    widthBuffer = Math.abs(sw.lng - ne.lng) * bufferRatio;\r\n\r\n\t\treturn new LatLngBounds(\r\n\t\t        new LatLng(sw.lat - heightBuffer, sw.lng - widthBuffer),\r\n\t\t        new LatLng(ne.lat + heightBuffer, ne.lng + widthBuffer));\r\n\t},\r\n\r\n\t// @method getCenter(): LatLng\r\n\t// Returns the center point of the bounds.\r\n\tgetCenter: function () {\r\n\t\treturn new LatLng(\r\n\t\t        (this._southWest.lat + this._northEast.lat) / 2,\r\n\t\t        (this._southWest.lng + this._northEast.lng) / 2);\r\n\t},\r\n\r\n\t// @method getSouthWest(): LatLng\r\n\t// Returns the south-west point of the bounds.\r\n\tgetSouthWest: function () {\r\n\t\treturn this._southWest;\r\n\t},\r\n\r\n\t// @method getNorthEast(): LatLng\r\n\t// Returns the north-east point of the bounds.\r\n\tgetNorthEast: function () {\r\n\t\treturn this._northEast;\r\n\t},\r\n\r\n\t// @method getNorthWest(): LatLng\r\n\t// Returns the north-west point of the bounds.\r\n\tgetNorthWest: function () {\r\n\t\treturn new LatLng(this.getNorth(), this.getWest());\r\n\t},\r\n\r\n\t// @method getSouthEast(): LatLng\r\n\t// Returns the south-east point of the bounds.\r\n\tgetSouthEast: function () {\r\n\t\treturn new LatLng(this.getSouth(), this.getEast());\r\n\t},\r\n\r\n\t// @method getWest(): Number\r\n\t// Returns the west longitude of the bounds\r\n\tgetWest: function () {\r\n\t\treturn this._southWest.lng;\r\n\t},\r\n\r\n\t// @method getSouth(): Number\r\n\t// Returns the south latitude of the bounds\r\n\tgetSouth: function () {\r\n\t\treturn this._southWest.lat;\r\n\t},\r\n\r\n\t// @method getEast(): Number\r\n\t// Returns the east longitude of the bounds\r\n\tgetEast: function () {\r\n\t\treturn this._northEast.lng;\r\n\t},\r\n\r\n\t// @method getNorth(): Number\r\n\t// Returns the north latitude of the bounds\r\n\tgetNorth: function () {\r\n\t\treturn this._northEast.lat;\r\n\t},\r\n\r\n\t// @method contains(otherBounds: LatLngBounds): Boolean\r\n\t// Returns `true` if the rectangle contains the given one.\r\n\r\n\t// @alternative\r\n\t// @method contains (latlng: LatLng): Boolean\r\n\t// Returns `true` if the rectangle contains the given point.\r\n\tcontains: function (obj) { // (LatLngBounds) or (LatLng) -> Boolean\r\n\t\tif (typeof obj[0] === 'number' || obj instanceof LatLng || 'lat' in obj) {\r\n\t\t\tobj = toLatLng(obj);\r\n\t\t} else {\r\n\t\t\tobj = toLatLngBounds(obj);\r\n\t\t}\r\n\r\n\t\tvar sw = this._southWest,\r\n\t\t    ne = this._northEast,\r\n\t\t    sw2, ne2;\r\n\r\n\t\tif (obj instanceof LatLngBounds) {\r\n\t\t\tsw2 = obj.getSouthWest();\r\n\t\t\tne2 = obj.getNorthEast();\r\n\t\t} else {\r\n\t\t\tsw2 = ne2 = obj;\r\n\t\t}\r\n\r\n\t\treturn (sw2.lat >= sw.lat) && (ne2.lat <= ne.lat) &&\r\n\t\t       (sw2.lng >= sw.lng) && (ne2.lng <= ne.lng);\r\n\t},\r\n\r\n\t// @method intersects(otherBounds: LatLngBounds): Boolean\r\n\t// Returns `true` if the rectangle intersects the given bounds. Two bounds intersect if they have at least one point in common.\r\n\tintersects: function (bounds) {\r\n\t\tbounds = toLatLngBounds(bounds);\r\n\r\n\t\tvar sw = this._southWest,\r\n\t\t    ne = this._northEast,\r\n\t\t    sw2 = bounds.getSouthWest(),\r\n\t\t    ne2 = bounds.getNorthEast(),\r\n\r\n\t\t    latIntersects = (ne2.lat >= sw.lat) && (sw2.lat <= ne.lat),\r\n\t\t    lngIntersects = (ne2.lng >= sw.lng) && (sw2.lng <= ne.lng);\r\n\r\n\t\treturn latIntersects && lngIntersects;\r\n\t},\r\n\r\n\t// @method overlaps(otherBounds: LatLngBounds): Boolean\r\n\t// Returns `true` if the rectangle overlaps the given bounds. Two bounds overlap if their intersection is an area.\r\n\toverlaps: function (bounds) {\r\n\t\tbounds = toLatLngBounds(bounds);\r\n\r\n\t\tvar sw = this._southWest,\r\n\t\t    ne = this._northEast,\r\n\t\t    sw2 = bounds.getSouthWest(),\r\n\t\t    ne2 = bounds.getNorthEast(),\r\n\r\n\t\t    latOverlaps = (ne2.lat > sw.lat) && (sw2.lat < ne.lat),\r\n\t\t    lngOverlaps = (ne2.lng > sw.lng) && (sw2.lng < ne.lng);\r\n\r\n\t\treturn latOverlaps && lngOverlaps;\r\n\t},\r\n\r\n\t// @method toBBoxString(): String\r\n\t// Returns a string with bounding box coordinates in a 'southwest_lng,southwest_lat,northeast_lng,northeast_lat' format. Useful for sending requests to web services that return geo data.\r\n\ttoBBoxString: function () {\r\n\t\treturn [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(',');\r\n\t},\r\n\r\n\t// @method equals(otherBounds: LatLngBounds, maxMargin?: Number): Boolean\r\n\t// Returns `true` if the rectangle is equivalent (within a small margin of error) to the given bounds. The margin of error can be overridden by setting `maxMargin` to a small number.\r\n\tequals: function (bounds, maxMargin) {\r\n\t\tif (!bounds) { return false; }\r\n\r\n\t\tbounds = toLatLngBounds(bounds);\r\n\r\n\t\treturn this._southWest.equals(bounds.getSouthWest(), maxMargin) &&\r\n\t\t       this._northEast.equals(bounds.getNorthEast(), maxMargin);\r\n\t},\r\n\r\n\t// @method isValid(): Boolean\r\n\t// Returns `true` if the bounds are properly initialized.\r\n\tisValid: function () {\r\n\t\treturn !!(this._southWest && this._northEast);\r\n\t}\r\n};\r\n\r\n// TODO International date line?\r\n\r\n// @factory L.latLngBounds(corner1: LatLng, corner2: LatLng)\r\n// Creates a `LatLngBounds` object by defining two diagonally opposite corners of the rectangle.\r\n\r\n// @alternative\r\n// @factory L.latLngBounds(latlngs: LatLng[])\r\n// Creates a `LatLngBounds` object defined by the geographical points it contains. Very useful for zooming the map to fit a particular set of locations with [`fitBounds`](#map-fitbounds).\r\nexport function toLatLngBounds(a, b) {\r\n\tif (a instanceof LatLngBounds) {\r\n\t\treturn a;\r\n\t}\r\n\treturn new LatLngBounds(a, b);\r\n}\r\n","import * as Util from '../core/Util';\r\nimport {Earth} from './crs/CRS.Earth';\r\nimport {toLatLngBounds} from './LatLngBounds';\r\n\r\n/* @class LatLng\r\n * @aka L.LatLng\r\n *\r\n * Represents a geographical point with a certain latitude and longitude.\r\n *\r\n * @example\r\n *\r\n * ```\r\n * var latlng = L.latLng(50.5, 30.5);\r\n * ```\r\n *\r\n * All Leaflet methods that accept LatLng objects also accept them in a simple Array form and simple object form (unless noted otherwise), so these lines are equivalent:\r\n *\r\n * ```\r\n * map.panTo([50, 30]);\r\n * map.panTo({lon: 30, lat: 50});\r\n * map.panTo({lat: 50, lng: 30});\r\n * map.panTo(L.latLng(50, 30));\r\n * ```\r\n *\r\n * Note that `LatLng` does not inherit from Leaflet's `Class` object,\r\n * which means new classes can't inherit from it, and new methods\r\n * can't be added to it with the `include` function.\r\n */\r\n\r\nexport function LatLng(lat, lng, alt) {\r\n\tif (isNaN(lat) || isNaN(lng)) {\r\n\t\tthrow new Error('Invalid LatLng object: (' + lat + ', ' + lng + ')');\r\n\t}\r\n\r\n\t// @property lat: Number\r\n\t// Latitude in degrees\r\n\tthis.lat = +lat;\r\n\r\n\t// @property lng: Number\r\n\t// Longitude in degrees\r\n\tthis.lng = +lng;\r\n\r\n\t// @property alt: Number\r\n\t// Altitude in meters (optional)\r\n\tif (alt !== undefined) {\r\n\t\tthis.alt = +alt;\r\n\t}\r\n}\r\n\r\nLatLng.prototype = {\r\n\t// @method equals(otherLatLng: LatLng, maxMargin?: Number): Boolean\r\n\t// Returns `true` if the given `LatLng` point is at the same position (within a small margin of error). The margin of error can be overridden by setting `maxMargin` to a small number.\r\n\tequals: function (obj, maxMargin) {\r\n\t\tif (!obj) { return false; }\r\n\r\n\t\tobj = toLatLng(obj);\r\n\r\n\t\tvar margin = Math.max(\r\n\t\t        Math.abs(this.lat - obj.lat),\r\n\t\t        Math.abs(this.lng - obj.lng));\r\n\r\n\t\treturn margin <= (maxMargin === undefined ? 1.0E-9 : maxMargin);\r\n\t},\r\n\r\n\t// @method toString(): String\r\n\t// Returns a string representation of the point (for debugging purposes).\r\n\ttoString: function (precision) {\r\n\t\treturn 'LatLng(' +\r\n\t\t        Util.formatNum(this.lat, precision) + ', ' +\r\n\t\t        Util.formatNum(this.lng, precision) + ')';\r\n\t},\r\n\r\n\t// @method distanceTo(otherLatLng: LatLng): Number\r\n\t// Returns the distance (in meters) to the given `LatLng` calculated using the [Spherical Law of Cosines](https://en.wikipedia.org/wiki/Spherical_law_of_cosines).\r\n\tdistanceTo: function (other) {\r\n\t\treturn Earth.distance(this, toLatLng(other));\r\n\t},\r\n\r\n\t// @method wrap(): LatLng\r\n\t// Returns a new `LatLng` object with the longitude wrapped so it's always between -180 and +180 degrees.\r\n\twrap: function () {\r\n\t\treturn Earth.wrapLatLng(this);\r\n\t},\r\n\r\n\t// @method toBounds(sizeInMeters: Number): LatLngBounds\r\n\t// Returns a new `LatLngBounds` object in which each boundary is `sizeInMeters/2` meters apart from the `LatLng`.\r\n\ttoBounds: function (sizeInMeters) {\r\n\t\tvar latAccuracy = 180 * sizeInMeters / 40075017,\r\n\t\t    lngAccuracy = latAccuracy / Math.cos((Math.PI / 180) * this.lat);\r\n\r\n\t\treturn toLatLngBounds(\r\n\t\t        [this.lat - latAccuracy, this.lng - lngAccuracy],\r\n\t\t        [this.lat + latAccuracy, this.lng + lngAccuracy]);\r\n\t},\r\n\r\n\tclone: function () {\r\n\t\treturn new LatLng(this.lat, this.lng, this.alt);\r\n\t}\r\n};\r\n\r\n\r\n\r\n// @factory L.latLng(latitude: Number, longitude: Number, altitude?: Number): LatLng\r\n// Creates an object representing a geographical point with the given latitude and longitude (and optionally altitude).\r\n\r\n// @alternative\r\n// @factory L.latLng(coords: Array): LatLng\r\n// Expects an array of the form `[Number, Number]` or `[Number, Number, Number]` instead.\r\n\r\n// @alternative\r\n// @factory L.latLng(coords: Object): LatLng\r\n// Expects an plain object of the form `{lat: Number, lng: Number}` or `{lat: Number, lng: Number, alt: Number}` instead.\r\n\r\nexport function toLatLng(a, b, c) {\r\n\tif (a instanceof LatLng) {\r\n\t\treturn a;\r\n\t}\r\n\tif (Util.isArray(a) && typeof a[0] !== 'object') {\r\n\t\tif (a.length === 3) {\r\n\t\t\treturn new LatLng(a[0], a[1], a[2]);\r\n\t\t}\r\n\t\tif (a.length === 2) {\r\n\t\t\treturn new LatLng(a[0], a[1]);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tif (a === undefined || a === null) {\r\n\t\treturn a;\r\n\t}\r\n\tif (typeof a === 'object' && 'lat' in a) {\r\n\t\treturn new LatLng(a.lat, 'lng' in a ? a.lng : a.lon, a.alt);\r\n\t}\r\n\tif (b === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\treturn new LatLng(a, b, c);\r\n}\r\n","\r\nimport {Bounds} from '../../geometry/Bounds';\r\nimport {LatLng} from '../LatLng';\r\nimport {LatLngBounds} from '../LatLngBounds';\r\nimport * as Util from '../../core/Util';\r\n\r\n/*\r\n * @namespace CRS\r\n * @crs L.CRS.Base\r\n * Object that defines coordinate reference systems for projecting\r\n * geographical points into pixel (screen) coordinates and back (and to\r\n * coordinates in other units for [WMS](https://en.wikipedia.org/wiki/Web_Map_Service) services). See\r\n * [spatial reference system](https://en.wikipedia.org/wiki/Spatial_reference_system).\r\n *\r\n * Leaflet defines the most usual CRSs by default. If you want to use a\r\n * CRS not defined by default, take a look at the\r\n * [Proj4Leaflet](https://github.com/kartena/Proj4Leaflet) plugin.\r\n *\r\n * Note that the CRS instances do not inherit from Leaflet's `Class` object,\r\n * and can't be instantiated. Also, new classes can't inherit from them,\r\n * and methods can't be added to them with the `include` function.\r\n */\r\n\r\nexport var CRS = {\r\n\t// @method latLngToPoint(latlng: LatLng, zoom: Number): Point\r\n\t// Projects geographical coordinates into pixel coordinates for a given zoom.\r\n\tlatLngToPoint: function (latlng, zoom) {\r\n\t\tvar projectedPoint = this.projection.project(latlng),\r\n\t\t    scale = this.scale(zoom);\r\n\r\n\t\treturn this.transformation._transform(projectedPoint, scale);\r\n\t},\r\n\r\n\t// @method pointToLatLng(point: Point, zoom: Number): LatLng\r\n\t// The inverse of `latLngToPoint`. Projects pixel coordinates on a given\r\n\t// zoom into geographical coordinates.\r\n\tpointToLatLng: function (point, zoom) {\r\n\t\tvar scale = this.scale(zoom),\r\n\t\t    untransformedPoint = this.transformation.untransform(point, scale);\r\n\r\n\t\treturn this.projection.unproject(untransformedPoint);\r\n\t},\r\n\r\n\t// @method project(latlng: LatLng): Point\r\n\t// Projects geographical coordinates into coordinates in units accepted for\r\n\t// this CRS (e.g. meters for EPSG:3857, for passing it to WMS services).\r\n\tproject: function (latlng) {\r\n\t\treturn this.projection.project(latlng);\r\n\t},\r\n\r\n\t// @method unproject(point: Point): LatLng\r\n\t// Given a projected coordinate returns the corresponding LatLng.\r\n\t// The inverse of `project`.\r\n\tunproject: function (point) {\r\n\t\treturn this.projection.unproject(point);\r\n\t},\r\n\r\n\t// @method scale(zoom: Number): Number\r\n\t// Returns the scale used when transforming projected coordinates into\r\n\t// pixel coordinates for a particular zoom. For example, it returns\r\n\t// `256 * 2^zoom` for Mercator-based CRS.\r\n\tscale: function (zoom) {\r\n\t\treturn 256 * Math.pow(2, zoom);\r\n\t},\r\n\r\n\t// @method zoom(scale: Number): Number\r\n\t// Inverse of `scale()`, returns the zoom level corresponding to a scale\r\n\t// factor of `scale`.\r\n\tzoom: function (scale) {\r\n\t\treturn Math.log(scale / 256) / Math.LN2;\r\n\t},\r\n\r\n\t// @method getProjectedBounds(zoom: Number): Bounds\r\n\t// Returns the projection's bounds scaled and transformed for the provided `zoom`.\r\n\tgetProjectedBounds: function (zoom) {\r\n\t\tif (this.infinite) { return null; }\r\n\r\n\t\tvar b = this.projection.bounds,\r\n\t\t    s = this.scale(zoom),\r\n\t\t    min = this.transformation.transform(b.min, s),\r\n\t\t    max = this.transformation.transform(b.max, s);\r\n\r\n\t\treturn new Bounds(min, max);\r\n\t},\r\n\r\n\t// @method distance(latlng1: LatLng, latlng2: LatLng): Number\r\n\t// Returns the distance between two geographical coordinates.\r\n\r\n\t// @property code: String\r\n\t// Standard code name of the CRS passed into WMS services (e.g. `'EPSG:3857'`)\r\n\t//\r\n\t// @property wrapLng: Number[]\r\n\t// An array of two numbers defining whether the longitude (horizontal) coordinate\r\n\t// axis wraps around a given range and how. Defaults to `[-180, 180]` in most\r\n\t// geographical CRSs. If `undefined`, the longitude axis does not wrap around.\r\n\t//\r\n\t// @property wrapLat: Number[]\r\n\t// Like `wrapLng`, but for the latitude (vertical) axis.\r\n\r\n\t// wrapLng: [min, max],\r\n\t// wrapLat: [min, max],\r\n\r\n\t// @property infinite: Boolean\r\n\t// If true, the coordinate space will be unbounded (infinite in both axes)\r\n\tinfinite: false,\r\n\r\n\t// @method wrapLatLng(latlng: LatLng): LatLng\r\n\t// Returns a `LatLng` where lat and lng has been wrapped according to the\r\n\t// CRS's `wrapLat` and `wrapLng` properties, if they are outside the CRS's bounds.\r\n\twrapLatLng: function (latlng) {\r\n\t\tvar lng = this.wrapLng ? Util.wrapNum(latlng.lng, this.wrapLng, true) : latlng.lng,\r\n\t\t    lat = this.wrapLat ? Util.wrapNum(latlng.lat, this.wrapLat, true) : latlng.lat,\r\n\t\t    alt = latlng.alt;\r\n\r\n\t\treturn new LatLng(lat, lng, alt);\r\n\t},\r\n\r\n\t// @method wrapLatLngBounds(bounds: LatLngBounds): LatLngBounds\r\n\t// Returns a `LatLngBounds` with the same size as the given one, ensuring\r\n\t// that its center is within the CRS's bounds.\r\n\t// Only accepts actual `L.LatLngBounds` instances, not arrays.\r\n\twrapLatLngBounds: function (bounds) {\r\n\t\tvar center = bounds.getCenter(),\r\n\t\t    newCenter = this.wrapLatLng(center),\r\n\t\t    latShift = center.lat - newCenter.lat,\r\n\t\t    lngShift = center.lng - newCenter.lng;\r\n\r\n\t\tif (latShift === 0 && lngShift === 0) {\r\n\t\t\treturn bounds;\r\n\t\t}\r\n\r\n\t\tvar sw = bounds.getSouthWest(),\r\n\t\t    ne = bounds.getNorthEast(),\r\n\t\t    newSw = new LatLng(sw.lat - latShift, sw.lng - lngShift),\r\n\t\t    newNe = new LatLng(ne.lat - latShift, ne.lng - lngShift);\r\n\r\n\t\treturn new LatLngBounds(newSw, newNe);\r\n\t}\r\n};\r\n","import {CRS} from './CRS';\nimport * as Util from '../../core/Util';\n\n/*\n * @namespace CRS\n * @crs L.CRS.Earth\n *\n * Serves as the base for CRS that are global such that they cover the earth.\n * Can only be used as the base for other CRS and cannot be used directly,\n * since it does not have a `code`, `projection` or `transformation`. `distance()` returns\n * meters.\n */\n\nexport var Earth = Util.extend({}, CRS, {\n\twrapLng: [-180, 180],\n\n\t// Mean Earth Radius, as recommended for use by\n\t// the International Union of Geodesy and Geophysics,\n\t// see https://rosettacode.org/wiki/Haversine_formula\n\tR: 6371000,\n\n\t// distance between two geographical points using spherical law of cosines approximation\n\tdistance: function (latlng1, latlng2) {\n\t\tvar rad = Math.PI / 180,\n\t\t    lat1 = latlng1.lat * rad,\n\t\t    lat2 = latlng2.lat * rad,\n\t\t    sinDLat = Math.sin((latlng2.lat - latlng1.lat) * rad / 2),\n\t\t    sinDLon = Math.sin((latlng2.lng - latlng1.lng) * rad / 2),\n\t\t    a = sinDLat * sinDLat + Math.cos(lat1) * Math.cos(lat2) * sinDLon * sinDLon,\n\t\t    c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\t\treturn this.R * c;\n\t}\n});\n","import {LatLng} from '../LatLng';\r\nimport {Bounds} from '../../geometry/Bounds';\r\nimport {Point} from '../../geometry/Point';\r\n\r\n/*\r\n * @namespace Projection\r\n * @projection L.Projection.SphericalMercator\r\n *\r\n * Spherical Mercator projection  the most common projection for online maps,\r\n * used by almost all free and commercial tile providers. Assumes that Earth is\r\n * a sphere. Used by the `EPSG:3857` CRS.\r\n */\r\n\r\nvar earthRadius = 6378137;\r\n\r\nexport var SphericalMercator = {\r\n\r\n\tR: earthRadius,\r\n\tMAX_LATITUDE: 85.0511287798,\r\n\r\n\tproject: function (latlng) {\r\n\t\tvar d = Math.PI / 180,\r\n\t\t    max = this.MAX_LATITUDE,\r\n\t\t    lat = Math.max(Math.min(max, latlng.lat), -max),\r\n\t\t    sin = Math.sin(lat * d);\r\n\r\n\t\treturn new Point(\r\n\t\t\tthis.R * latlng.lng * d,\r\n\t\t\tthis.R * Math.log((1 + sin) / (1 - sin)) / 2);\r\n\t},\r\n\r\n\tunproject: function (point) {\r\n\t\tvar d = 180 / Math.PI;\r\n\r\n\t\treturn new LatLng(\r\n\t\t\t(2 * Math.atan(Math.exp(point.y / this.R)) - (Math.PI / 2)) * d,\r\n\t\t\tpoint.x * d / this.R);\r\n\t},\r\n\r\n\tbounds: (function () {\r\n\t\tvar d = earthRadius * Math.PI;\r\n\t\treturn new Bounds([-d, -d], [d, d]);\r\n\t})()\r\n};\r\n","import {Point} from './Point';\r\nimport * as Util from '../core/Util';\r\n\r\n/*\r\n * @class Transformation\r\n * @aka L.Transformation\r\n *\r\n * Represents an affine transformation: a set of coefficients `a`, `b`, `c`, `d`\r\n * for transforming a point of a form `(x, y)` into `(a*x + b, c*y + d)` and doing\r\n * the reverse. Used by Leaflet in its projections code.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * var transformation = L.transformation(2, 5, -1, 10),\r\n * \tp = L.point(1, 2),\r\n * \tp2 = transformation.transform(p), //  L.point(7, 8)\r\n * \tp3 = transformation.untransform(p2); //  L.point(1, 2)\r\n * ```\r\n */\r\n\r\n\r\n// factory new L.Transformation(a: Number, b: Number, c: Number, d: Number)\r\n// Creates a `Transformation` object with the given coefficients.\r\nexport function Transformation(a, b, c, d) {\r\n\tif (Util.isArray(a)) {\r\n\t\t// use array properties\r\n\t\tthis._a = a[0];\r\n\t\tthis._b = a[1];\r\n\t\tthis._c = a[2];\r\n\t\tthis._d = a[3];\r\n\t\treturn;\r\n\t}\r\n\tthis._a = a;\r\n\tthis._b = b;\r\n\tthis._c = c;\r\n\tthis._d = d;\r\n}\r\n\r\nTransformation.prototype = {\r\n\t// @method transform(point: Point, scale?: Number): Point\r\n\t// Returns a transformed point, optionally multiplied by the given scale.\r\n\t// Only accepts actual `L.Point` instances, not arrays.\r\n\ttransform: function (point, scale) { // (Point, Number) -> Point\r\n\t\treturn this._transform(point.clone(), scale);\r\n\t},\r\n\r\n\t// destructive transform (faster)\r\n\t_transform: function (point, scale) {\r\n\t\tscale = scale || 1;\r\n\t\tpoint.x = scale * (this._a * point.x + this._b);\r\n\t\tpoint.y = scale * (this._c * point.y + this._d);\r\n\t\treturn point;\r\n\t},\r\n\r\n\t// @method untransform(point: Point, scale?: Number): Point\r\n\t// Returns the reverse transformation of the given point, optionally divided\r\n\t// by the given scale. Only accepts actual `L.Point` instances, not arrays.\r\n\tuntransform: function (point, scale) {\r\n\t\tscale = scale || 1;\r\n\t\treturn new Point(\r\n\t\t        (point.x / scale - this._b) / this._a,\r\n\t\t        (point.y / scale - this._d) / this._c);\r\n\t}\r\n};\r\n\r\n// factory L.transformation(a: Number, b: Number, c: Number, d: Number)\r\n\r\n// @factory L.transformation(a: Number, b: Number, c: Number, d: Number)\r\n// Instantiates a Transformation object with the given coefficients.\r\n\r\n// @alternative\r\n// @factory L.transformation(coefficients: Array): Transformation\r\n// Expects an coefficients array of the form\r\n// `[a: Number, b: Number, c: Number, d: Number]`.\r\n\r\nexport function toTransformation(a, b, c, d) {\r\n\treturn new Transformation(a, b, c, d);\r\n}\r\n","import {Earth} from './CRS.Earth';\r\nimport {SphericalMercator} from '../projection/Projection.SphericalMercator';\r\nimport {toTransformation} from '../../geometry/Transformation';\r\nimport * as Util from '../../core/Util';\r\n\r\n/*\r\n * @namespace CRS\r\n * @crs L.CRS.EPSG3857\r\n *\r\n * The most common CRS for online maps, used by almost all free and commercial\r\n * tile providers. Uses Spherical Mercator projection. Set in by default in\r\n * Map's `crs` option.\r\n */\r\n\r\nexport var EPSG3857 = Util.extend({}, Earth, {\r\n\tcode: 'EPSG:3857',\r\n\tprojection: SphericalMercator,\r\n\r\n\ttransformation: (function () {\r\n\t\tvar scale = 0.5 / (Math.PI * SphericalMercator.R);\r\n\t\treturn toTransformation(scale, 0.5, -scale, 0.5);\r\n\t}())\r\n});\r\n\r\nexport var EPSG900913 = Util.extend({}, EPSG3857, {\r\n\tcode: 'EPSG:900913'\r\n});\r\n","import Browser from '../../core/Browser';\n\n// @namespace SVG; @section\n// There are several static functions which can be called without instantiating L.SVG:\n\n// @function create(name: String): SVGElement\n// Returns a instance of [SVGElement](https://developer.mozilla.org/docs/Web/API/SVGElement),\n// corresponding to the class name passed. For example, using 'line' will return\n// an instance of [SVGLineElement](https://developer.mozilla.org/docs/Web/API/SVGLineElement).\nexport function svgCreate(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n// @function pointsToPath(rings: Point[], closed: Boolean): String\n// Generates a SVG path string for multiple rings, with each ring turning\n// into \"M..L..L..\" instructions\nexport function pointsToPath(rings, closed) {\n\tvar str = '',\n\ti, j, len, len2, points, p;\n\n\tfor (i = 0, len = rings.length; i < len; i++) {\n\t\tpoints = rings[i];\n\n\t\tfor (j = 0, len2 = points.length; j < len2; j++) {\n\t\t\tp = points[j];\n\t\t\tstr += (j ? 'L' : 'M') + p.x + ' ' + p.y;\n\t\t}\n\n\t\t// closes the ring for polygons; \"x\" is VML syntax\n\t\tstr += closed ? (Browser.svg ? 'z' : 'x') : '';\n\t}\n\n\t// SVG complains about empty path strings\n\treturn str || 'M0 0';\n}\n\n\n\n\n","import * as Util from './Util';\r\nimport {svgCreate} from '../layer/vector/SVG.Util';\r\n\r\n/*\r\n * @namespace Browser\r\n * @aka L.Browser\r\n *\r\n * A namespace with static properties for browser/feature detection used by Leaflet internally.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * if (L.Browser.ielt9) {\r\n *   alert('Upgrade your browser, dude!');\r\n * }\r\n * ```\r\n */\r\n\r\nvar style = document.documentElement.style;\r\n\r\n// @property ie: Boolean; `true` for all Internet Explorer versions (not Edge).\r\nvar ie = 'ActiveXObject' in window;\r\n\r\n// @property ielt9: Boolean; `true` for Internet Explorer versions less than 9.\r\nvar ielt9 = ie && !document.addEventListener;\r\n\r\n// @property edge: Boolean; `true` for the Edge web browser.\r\nvar edge = 'msLaunchUri' in navigator && !('documentMode' in document);\r\n\r\n// @property webkit: Boolean;\r\n// `true` for webkit-based browsers like Chrome and Safari (including mobile versions).\r\nvar webkit = userAgentContains('webkit');\r\n\r\n// @property android: Boolean\r\n// **Deprecated.** `true` for any browser running on an Android platform.\r\nvar android = userAgentContains('android');\r\n\r\n// @property android23: Boolean; **Deprecated.** `true` for browsers running on Android 2 or Android 3.\r\nvar android23 = userAgentContains('android 2') || userAgentContains('android 3');\r\n\r\n/* See https://stackoverflow.com/a/17961266 for details on detecting stock Android */\r\nvar webkitVer = parseInt(/WebKit\\/([0-9]+)|$/.exec(navigator.userAgent)[1], 10); // also matches AppleWebKit\r\n// @property androidStock: Boolean; **Deprecated.** `true` for the Android stock browser (i.e. not Chrome)\r\nvar androidStock = android && userAgentContains('Google') && webkitVer < 537 && !('AudioNode' in window);\r\n\r\n// @property opera: Boolean; `true` for the Opera browser\r\nvar opera = !!window.opera;\r\n\r\n// @property chrome: Boolean; `true` for the Chrome browser.\r\nvar chrome = !edge && userAgentContains('chrome');\r\n\r\n// @property gecko: Boolean; `true` for gecko-based browsers like Firefox.\r\nvar gecko = userAgentContains('gecko') && !webkit && !opera && !ie;\r\n\r\n// @property safari: Boolean; `true` for the Safari browser.\r\nvar safari = !chrome && userAgentContains('safari');\r\n\r\nvar phantom = userAgentContains('phantom');\r\n\r\n// @property opera12: Boolean\r\n// `true` for the Opera browser supporting CSS transforms (version 12 or later).\r\nvar opera12 = 'OTransition' in style;\r\n\r\n// @property win: Boolean; `true` when the browser is running in a Windows platform\r\nvar win = navigator.platform.indexOf('Win') === 0;\r\n\r\n// @property ie3d: Boolean; `true` for all Internet Explorer versions supporting CSS transforms.\r\nvar ie3d = ie && ('transition' in style);\r\n\r\n// @property webkit3d: Boolean; `true` for webkit-based browsers supporting CSS transforms.\r\nvar webkit3d = ('WebKitCSSMatrix' in window) && ('m11' in new window.WebKitCSSMatrix()) && !android23;\r\n\r\n// @property gecko3d: Boolean; `true` for gecko-based browsers supporting CSS transforms.\r\nvar gecko3d = 'MozPerspective' in style;\r\n\r\n// @property any3d: Boolean\r\n// `true` for all browsers supporting CSS transforms.\r\nvar any3d = !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d) && !opera12 && !phantom;\r\n\r\n// @property mobile: Boolean; `true` for all browsers running in a mobile device.\r\nvar mobile = typeof orientation !== 'undefined' || userAgentContains('mobile');\r\n\r\n// @property mobileWebkit: Boolean; `true` for all webkit-based browsers in a mobile device.\r\nvar mobileWebkit = mobile && webkit;\r\n\r\n// @property mobileWebkit3d: Boolean\r\n// `true` for all webkit-based browsers in a mobile device supporting CSS transforms.\r\nvar mobileWebkit3d = mobile && webkit3d;\r\n\r\n// @property msPointer: Boolean\r\n// `true` for browsers implementing the Microsoft touch events model (notably IE10).\r\nvar msPointer = !window.PointerEvent && window.MSPointerEvent;\r\n\r\n// @property pointer: Boolean\r\n// `true` for all browsers supporting [pointer events](https://msdn.microsoft.com/en-us/library/dn433244%28v=vs.85%29.aspx).\r\nvar pointer = !!(window.PointerEvent || msPointer);\r\n\r\n// @property touchNative: Boolean\r\n// `true` for all browsers supporting [touch events](https://developer.mozilla.org/docs/Web/API/Touch_events).\r\n// **This does not necessarily mean** that the browser is running in a computer with\r\n// a touchscreen, it only means that the browser is capable of understanding\r\n// touch events.\r\nvar touchNative = 'ontouchstart' in window || !!window.TouchEvent;\r\n\r\n// @property touch: Boolean\r\n// `true` for all browsers supporting either [touch](#browser-touch) or [pointer](#browser-pointer) events.\r\n// Note: pointer events will be preferred (if available), and processed for all `touch*` listeners.\r\nvar touch = !window.L_NO_TOUCH && (touchNative || pointer);\r\n\r\n// @property mobileOpera: Boolean; `true` for the Opera browser in a mobile device.\r\nvar mobileOpera = mobile && opera;\r\n\r\n// @property mobileGecko: Boolean\r\n// `true` for gecko-based browsers running in a mobile device.\r\nvar mobileGecko = mobile && gecko;\r\n\r\n// @property retina: Boolean\r\n// `true` for browsers on a high-resolution \"retina\" screen or on any screen when browser's display zoom is more than 100%.\r\nvar retina = (window.devicePixelRatio || (window.screen.deviceXDPI / window.screen.logicalXDPI)) > 1;\r\n\r\n// @property passiveEvents: Boolean\r\n// `true` for browsers that support passive events.\r\nvar passiveEvents = (function () {\r\n\tvar supportsPassiveOption = false;\r\n\ttry {\r\n\t\tvar opts = Object.defineProperty({}, 'passive', {\r\n\t\t\tget: function () { // eslint-disable-line getter-return\r\n\t\t\t\tsupportsPassiveOption = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\twindow.addEventListener('testPassiveEventSupport', Util.falseFn, opts);\r\n\t\twindow.removeEventListener('testPassiveEventSupport', Util.falseFn, opts);\r\n\t} catch (e) {\r\n\t\t// Errors can safely be ignored since this is only a browser support test.\r\n\t}\r\n\treturn supportsPassiveOption;\r\n}());\r\n\r\n// @property canvas: Boolean\r\n// `true` when the browser supports [`<canvas>`](https://developer.mozilla.org/docs/Web/API/Canvas_API).\r\nvar canvas = (function () {\r\n\treturn !!document.createElement('canvas').getContext;\r\n}());\r\n\r\n// @property svg: Boolean\r\n// `true` when the browser supports [SVG](https://developer.mozilla.org/docs/Web/SVG).\r\nvar svg = !!(document.createElementNS && svgCreate('svg').createSVGRect);\r\n\r\nvar inlineSvg = !!svg && (function () {\r\n\tvar div = document.createElement('div');\r\n\tdiv.innerHTML = '<svg/>';\r\n\treturn (div.firstChild && div.firstChild.namespaceURI) === 'http://www.w3.org/2000/svg';\r\n})();\r\n\r\n// @property vml: Boolean\r\n// `true` if the browser supports [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language).\r\nvar vml = !svg && (function () {\r\n\ttry {\r\n\t\tvar div = document.createElement('div');\r\n\t\tdiv.innerHTML = '<v:shape adj=\"1\"/>';\r\n\r\n\t\tvar shape = div.firstChild;\r\n\t\tshape.style.behavior = 'url(#default#VML)';\r\n\r\n\t\treturn shape && (typeof shape.adj === 'object');\r\n\r\n\t} catch (e) {\r\n\t\treturn false;\r\n\t}\r\n}());\r\n\r\n\r\n// @property mac: Boolean; `true` when the browser is running in a Mac platform\r\nvar mac = navigator.platform.indexOf('Mac') === 0;\r\n\r\n// @property mac: Boolean; `true` when the browser is running in a Linux platform\r\nvar linux = navigator.platform.indexOf('Linux') === 0;\r\n\r\nfunction userAgentContains(str) {\r\n\treturn navigator.userAgent.toLowerCase().indexOf(str) >= 0;\r\n}\r\n\r\n\r\nexport default {\r\n\tie: ie,\r\n\tielt9: ielt9,\r\n\tedge: edge,\r\n\twebkit: webkit,\r\n\tandroid: android,\r\n\tandroid23: android23,\r\n\tandroidStock: androidStock,\r\n\topera: opera,\r\n\tchrome: chrome,\r\n\tgecko: gecko,\r\n\tsafari: safari,\r\n\tphantom: phantom,\r\n\topera12: opera12,\r\n\twin: win,\r\n\tie3d: ie3d,\r\n\twebkit3d: webkit3d,\r\n\tgecko3d: gecko3d,\r\n\tany3d: any3d,\r\n\tmobile: mobile,\r\n\tmobileWebkit: mobileWebkit,\r\n\tmobileWebkit3d: mobileWebkit3d,\r\n\tmsPointer: msPointer,\r\n\tpointer: pointer,\r\n\ttouch: touch,\r\n\ttouchNative: touchNative,\r\n\tmobileOpera: mobileOpera,\r\n\tmobileGecko: mobileGecko,\r\n\tretina: retina,\r\n\tpassiveEvents: passiveEvents,\r\n\tcanvas: canvas,\r\n\tsvg: svg,\r\n\tvml: vml,\r\n\tinlineSvg: inlineSvg,\r\n\tmac: mac,\r\n\tlinux: linux\r\n};\r\n","import * as DomEvent from './DomEvent';\nimport Browser from '../core/Browser';\nimport {falseFn} from '../core/Util';\n\n/*\n * Extends L.DomEvent to provide touch support for Internet Explorer and Windows-based devices.\n */\n\nvar POINTER_DOWN =   Browser.msPointer ? 'MSPointerDown'   : 'pointerdown';\nvar POINTER_MOVE =   Browser.msPointer ? 'MSPointerMove'   : 'pointermove';\nvar POINTER_UP =     Browser.msPointer ? 'MSPointerUp'     : 'pointerup';\nvar POINTER_CANCEL = Browser.msPointer ? 'MSPointerCancel' : 'pointercancel';\nvar pEvent = {\n\ttouchstart  : POINTER_DOWN,\n\ttouchmove   : POINTER_MOVE,\n\ttouchend    : POINTER_UP,\n\ttouchcancel : POINTER_CANCEL\n};\nvar handle = {\n\ttouchstart  : _onPointerStart,\n\ttouchmove   : _handlePointer,\n\ttouchend    : _handlePointer,\n\ttouchcancel : _handlePointer\n};\nvar _pointers = {};\nvar _pointerDocListener = false;\n\n// Provides a touch events wrapper for (ms)pointer events.\n// ref https://www.w3.org/TR/pointerevents/ https://www.w3.org/Bugs/Public/show_bug.cgi?id=22890\n\nexport function addPointerListener(obj, type, handler) {\n\tif (type === 'touchstart') {\n\t\t_addPointerDocListener();\n\t}\n\tif (!handle[type]) {\n\t\tconsole.warn('wrong event specified:', type);\n\t\treturn falseFn;\n\t}\n\thandler = handle[type].bind(this, handler);\n\tobj.addEventListener(pEvent[type], handler, false);\n\treturn handler;\n}\n\nexport function removePointerListener(obj, type, handler) {\n\tif (!pEvent[type]) {\n\t\tconsole.warn('wrong event specified:', type);\n\t\treturn;\n\t}\n\tobj.removeEventListener(pEvent[type], handler, false);\n}\n\nfunction _globalPointerDown(e) {\n\t_pointers[e.pointerId] = e;\n}\n\nfunction _globalPointerMove(e) {\n\tif (_pointers[e.pointerId]) {\n\t\t_pointers[e.pointerId] = e;\n\t}\n}\n\nfunction _globalPointerUp(e) {\n\tdelete _pointers[e.pointerId];\n}\n\nfunction _addPointerDocListener() {\n\t// need to keep track of what pointers and how many are active to provide e.touches emulation\n\tif (!_pointerDocListener) {\n\t\t// we listen document as any drags that end by moving the touch off the screen get fired there\n\t\tdocument.addEventListener(POINTER_DOWN, _globalPointerDown, true);\n\t\tdocument.addEventListener(POINTER_MOVE, _globalPointerMove, true);\n\t\tdocument.addEventListener(POINTER_UP, _globalPointerUp, true);\n\t\tdocument.addEventListener(POINTER_CANCEL, _globalPointerUp, true);\n\n\t\t_pointerDocListener = true;\n\t}\n}\n\nfunction _handlePointer(handler, e) {\n\tif (e.pointerType === (e.MSPOINTER_TYPE_MOUSE || 'mouse')) { return; }\n\n\te.touches = [];\n\tfor (var i in _pointers) {\n\t\te.touches.push(_pointers[i]);\n\t}\n\te.changedTouches = [e];\n\n\thandler(e);\n}\n\nfunction _onPointerStart(handler, e) {\n\t// IE10 specific: MsTouch needs preventDefault. See #2000\n\tif (e.MSPOINTER_TYPE_TOUCH && e.pointerType === e.MSPOINTER_TYPE_TOUCH) {\n\t\tDomEvent.preventDefault(e);\n\t}\n\t_handlePointer(handler, e);\n}\n","import * as DomEvent from './DomEvent';\r\n\r\n/*\r\n * Extends the event handling code with double tap support for mobile browsers.\r\n *\r\n * Note: currently most browsers fire native dblclick, with only a few exceptions\r\n * (see https://github.com/Leaflet/Leaflet/issues/7012#issuecomment-595087386)\r\n */\r\n\r\nfunction makeDblclick(event) {\r\n\t// in modern browsers `type` cannot be just overridden:\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only\r\n\tvar newEvent = {},\r\n\t    prop, i;\r\n\tfor (i in event) {\r\n\t\tprop = event[i];\r\n\t\tnewEvent[i] = prop && prop.bind ? prop.bind(event) : prop;\r\n\t}\r\n\tevent = newEvent;\r\n\tnewEvent.type = 'dblclick';\r\n\tnewEvent.detail = 2;\r\n\tnewEvent.isTrusted = false;\r\n\tnewEvent._simulated = true; // for debug purposes\r\n\treturn newEvent;\r\n}\r\n\r\nvar delay = 200;\r\nexport function addDoubleTapListener(obj, handler) {\r\n\t// Most browsers handle double tap natively\r\n\tobj.addEventListener('dblclick', handler);\r\n\r\n\t// On some platforms the browser doesn't fire native dblclicks for touch events.\r\n\t// It seems that in all such cases `detail` property of `click` event is always `1`.\r\n\t// So here we rely on that fact to avoid excessive 'dblclick' simulation when not needed.\r\n\tvar last = 0,\r\n\t    detail;\r\n\tfunction simDblclick(e) {\r\n\t\tif (e.detail !== 1) {\r\n\t\t\tdetail = e.detail; // keep in sync to avoid false dblclick in some cases\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (e.pointerType === 'mouse' ||\r\n\t\t\t(e.sourceCapabilities && !e.sourceCapabilities.firesTouchEvents)) {\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// When clicking on an <input>, the browser generates a click on its\r\n\t\t// <label> (and vice versa) triggering two clicks in quick succession.\r\n\t\t// This ignores clicks on elements which are a label with a 'for'\r\n\t\t// attribute (or children of such a label), but not children of\r\n\t\t// a <input>.\r\n\t\tvar path = DomEvent.getPropagationPath(e);\r\n\t\tif (path.some(function (el) {\r\n\t\t\treturn el instanceof HTMLLabelElement && el.attributes.for;\r\n\t\t}) &&\r\n\t\t\t!path.some(function (el) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tel instanceof HTMLInputElement ||\r\n\t\t\t\t\tel instanceof HTMLSelectElement\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar now = Date.now();\r\n\t\tif (now - last <= delay) {\r\n\t\t\tdetail++;\r\n\t\t\tif (detail === 2) {\r\n\t\t\t\thandler(makeDblclick(e));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tdetail = 1;\r\n\t\t}\r\n\t\tlast = now;\r\n\t}\r\n\r\n\tobj.addEventListener('click', simDblclick);\r\n\r\n\treturn {\r\n\t\tdblclick: handler,\r\n\t\tsimDblclick: simDblclick\r\n\t};\r\n}\r\n\r\nexport function removeDoubleTapListener(obj, handlers) {\r\n\tobj.removeEventListener('dblclick', handlers.dblclick);\r\n\tobj.removeEventListener('click', handlers.simDblclick);\r\n}\r\n","import * as DomEvent from './DomEvent';\r\nimport * as Util from '../core/Util';\r\nimport {Point} from '../geometry/Point';\r\nimport Browser from '../core/Browser';\r\n\r\n/*\r\n * @namespace DomUtil\r\n *\r\n * Utility functions to work with the [DOM](https://developer.mozilla.org/docs/Web/API/Document_Object_Model)\r\n * tree, used by Leaflet internally.\r\n *\r\n * Most functions expecting or returning a `HTMLElement` also work for\r\n * SVG elements. The only difference is that classes refer to CSS classes\r\n * in HTML and SVG classes in SVG.\r\n */\r\n\r\n\r\n// @property TRANSFORM: String\r\n// Vendor-prefixed transform style name (e.g. `'webkitTransform'` for WebKit).\r\nexport var TRANSFORM = testProp(\r\n\t['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\r\n\r\n// webkitTransition comes first because some browser versions that drop vendor prefix don't do\r\n// the same for the transitionend event, in particular the Android 4.1 stock browser\r\n\r\n// @property TRANSITION: String\r\n// Vendor-prefixed transition style name.\r\nexport var TRANSITION = testProp(\r\n\t['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\r\n\r\n// @property TRANSITION_END: String\r\n// Vendor-prefixed transitionend event name.\r\nexport var TRANSITION_END =\r\n\tTRANSITION === 'webkitTransition' || TRANSITION === 'OTransition' ? TRANSITION + 'End' : 'transitionend';\r\n\r\n\r\n// @function get(id: String|HTMLElement): HTMLElement\r\n// Returns an element given its DOM id, or returns the element itself\r\n// if it was passed directly.\r\nexport function get(id) {\r\n\treturn typeof id === 'string' ? document.getElementById(id) : id;\r\n}\r\n\r\n// @function getStyle(el: HTMLElement, styleAttrib: String): String\r\n// Returns the value for a certain style attribute on an element,\r\n// including computed values or values set through CSS.\r\nexport function getStyle(el, style) {\r\n\tvar value = el.style[style] || (el.currentStyle && el.currentStyle[style]);\r\n\r\n\tif ((!value || value === 'auto') && document.defaultView) {\r\n\t\tvar css = document.defaultView.getComputedStyle(el, null);\r\n\t\tvalue = css ? css[style] : null;\r\n\t}\r\n\treturn value === 'auto' ? null : value;\r\n}\r\n\r\n// @function create(tagName: String, className?: String, container?: HTMLElement): HTMLElement\r\n// Creates an HTML element with `tagName`, sets its class to `className`, and optionally appends it to `container` element.\r\nexport function create(tagName, className, container) {\r\n\tvar el = document.createElement(tagName);\r\n\tel.className = className || '';\r\n\r\n\tif (container) {\r\n\t\tcontainer.appendChild(el);\r\n\t}\r\n\treturn el;\r\n}\r\n\r\n// @function remove(el: HTMLElement)\r\n// Removes `el` from its parent element\r\nexport function remove(el) {\r\n\tvar parent = el.parentNode;\r\n\tif (parent) {\r\n\t\tparent.removeChild(el);\r\n\t}\r\n}\r\n\r\n// @function empty(el: HTMLElement)\r\n// Removes all of `el`'s children elements from `el`\r\nexport function empty(el) {\r\n\twhile (el.firstChild) {\r\n\t\tel.removeChild(el.firstChild);\r\n\t}\r\n}\r\n\r\n// @function toFront(el: HTMLElement)\r\n// Makes `el` the last child of its parent, so it renders in front of the other children.\r\nexport function toFront(el) {\r\n\tvar parent = el.parentNode;\r\n\tif (parent && parent.lastChild !== el) {\r\n\t\tparent.appendChild(el);\r\n\t}\r\n}\r\n\r\n// @function toBack(el: HTMLElement)\r\n// Makes `el` the first child of its parent, so it renders behind the other children.\r\nexport function toBack(el) {\r\n\tvar parent = el.parentNode;\r\n\tif (parent && parent.firstChild !== el) {\r\n\t\tparent.insertBefore(el, parent.firstChild);\r\n\t}\r\n}\r\n\r\n// @function hasClass(el: HTMLElement, name: String): Boolean\r\n// Returns `true` if the element's class attribute contains `name`.\r\nexport function hasClass(el, name) {\r\n\tif (el.classList !== undefined) {\r\n\t\treturn el.classList.contains(name);\r\n\t}\r\n\tvar className = getClass(el);\r\n\treturn className.length > 0 && new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(className);\r\n}\r\n\r\n// @function addClass(el: HTMLElement, name: String)\r\n// Adds `name` to the element's class attribute.\r\nexport function addClass(el, name) {\r\n\tif (el.classList !== undefined) {\r\n\t\tvar classes = Util.splitWords(name);\r\n\t\tfor (var i = 0, len = classes.length; i < len; i++) {\r\n\t\t\tel.classList.add(classes[i]);\r\n\t\t}\r\n\t} else if (!hasClass(el, name)) {\r\n\t\tvar className = getClass(el);\r\n\t\tsetClass(el, (className ? className + ' ' : '') + name);\r\n\t}\r\n}\r\n\r\n// @function removeClass(el: HTMLElement, name: String)\r\n// Removes `name` from the element's class attribute.\r\nexport function removeClass(el, name) {\r\n\tif (el.classList !== undefined) {\r\n\t\tel.classList.remove(name);\r\n\t} else {\r\n\t\tsetClass(el, Util.trim((' ' + getClass(el) + ' ').replace(' ' + name + ' ', ' ')));\r\n\t}\r\n}\r\n\r\n// @function setClass(el: HTMLElement, name: String)\r\n// Sets the element's class.\r\nexport function setClass(el, name) {\r\n\tif (el.className.baseVal === undefined) {\r\n\t\tel.className = name;\r\n\t} else {\r\n\t\t// in case of SVG element\r\n\t\tel.className.baseVal = name;\r\n\t}\r\n}\r\n\r\n// @function getClass(el: HTMLElement): String\r\n// Returns the element's class.\r\nexport function getClass(el) {\r\n\t// Check if the element is an SVGElementInstance and use the correspondingElement instead\r\n\t// (Required for linked SVG elements in IE11.)\r\n\tif (el.correspondingElement) {\r\n\t\tel = el.correspondingElement;\r\n\t}\r\n\treturn el.className.baseVal === undefined ? el.className : el.className.baseVal;\r\n}\r\n\r\n// @function setOpacity(el: HTMLElement, opacity: Number)\r\n// Set the opacity of an element (including old IE support).\r\n// `opacity` must be a number from `0` to `1`.\r\nexport function setOpacity(el, value) {\r\n\tif ('opacity' in el.style) {\r\n\t\tel.style.opacity = value;\r\n\t} else if ('filter' in el.style) {\r\n\t\t_setOpacityIE(el, value);\r\n\t}\r\n}\r\n\r\nfunction _setOpacityIE(el, value) {\r\n\tvar filter = false,\r\n\t    filterName = 'DXImageTransform.Microsoft.Alpha';\r\n\r\n\t// filters collection throws an error if we try to retrieve a filter that doesn't exist\r\n\ttry {\r\n\t\tfilter = el.filters.item(filterName);\r\n\t} catch (e) {\r\n\t\t// don't set opacity to 1 if we haven't already set an opacity,\r\n\t\t// it isn't needed and breaks transparent pngs.\r\n\t\tif (value === 1) { return; }\r\n\t}\r\n\r\n\tvalue = Math.round(value * 100);\r\n\r\n\tif (filter) {\r\n\t\tfilter.Enabled = (value !== 100);\r\n\t\tfilter.Opacity = value;\r\n\t} else {\r\n\t\tel.style.filter += ' progid:' + filterName + '(opacity=' + value + ')';\r\n\t}\r\n}\r\n\r\n// @function testProp(props: String[]): String|false\r\n// Goes through the array of style names and returns the first name\r\n// that is a valid style name for an element. If no such name is found,\r\n// it returns false. Useful for vendor-prefixed styles like `transform`.\r\nexport function testProp(props) {\r\n\tvar style = document.documentElement.style;\r\n\r\n\tfor (var i = 0; i < props.length; i++) {\r\n\t\tif (props[i] in style) {\r\n\t\t\treturn props[i];\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n// @function setTransform(el: HTMLElement, offset: Point, scale?: Number)\r\n// Resets the 3D CSS transform of `el` so it is translated by `offset` pixels\r\n// and optionally scaled by `scale`. Does not have an effect if the\r\n// browser doesn't support 3D CSS transforms.\r\nexport function setTransform(el, offset, scale) {\r\n\tvar pos = offset || new Point(0, 0);\r\n\r\n\tel.style[TRANSFORM] =\r\n\t\t(Browser.ie3d ?\r\n\t\t\t'translate(' + pos.x + 'px,' + pos.y + 'px)' :\r\n\t\t\t'translate3d(' + pos.x + 'px,' + pos.y + 'px,0)') +\r\n\t\t(scale ? ' scale(' + scale + ')' : '');\r\n}\r\n\r\n// @function setPosition(el: HTMLElement, position: Point)\r\n// Sets the position of `el` to coordinates specified by `position`,\r\n// using CSS translate or top/left positioning depending on the browser\r\n// (used by Leaflet internally to position its layers).\r\nexport function setPosition(el, point) {\r\n\r\n\t/*eslint-disable */\r\n\tel._leaflet_pos = point;\r\n\t/* eslint-enable */\r\n\r\n\tif (Browser.any3d) {\r\n\t\tsetTransform(el, point);\r\n\t} else {\r\n\t\tel.style.left = point.x + 'px';\r\n\t\tel.style.top = point.y + 'px';\r\n\t}\r\n}\r\n\r\n// @function getPosition(el: HTMLElement): Point\r\n// Returns the coordinates of an element previously positioned with setPosition.\r\nexport function getPosition(el) {\r\n\t// this method is only used for elements previously positioned using setPosition,\r\n\t// so it's safe to cache the position for performance\r\n\r\n\treturn el._leaflet_pos || new Point(0, 0);\r\n}\r\n\r\n// @function disableTextSelection()\r\n// Prevents the user from generating `selectstart` DOM events, usually generated\r\n// when the user drags the mouse through a page with text. Used internally\r\n// by Leaflet to override the behaviour of any click-and-drag interaction on\r\n// the map. Affects drag interactions on the whole document.\r\n\r\n// @function enableTextSelection()\r\n// Cancels the effects of a previous [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection).\r\nexport var disableTextSelection;\r\nexport var enableTextSelection;\r\nvar _userSelect;\r\nif ('onselectstart' in document) {\r\n\tdisableTextSelection = function () {\r\n\t\tDomEvent.on(window, 'selectstart', DomEvent.preventDefault);\r\n\t};\r\n\tenableTextSelection = function () {\r\n\t\tDomEvent.off(window, 'selectstart', DomEvent.preventDefault);\r\n\t};\r\n} else {\r\n\tvar userSelectProperty = testProp(\r\n\t\t['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);\r\n\r\n\tdisableTextSelection = function () {\r\n\t\tif (userSelectProperty) {\r\n\t\t\tvar style = document.documentElement.style;\r\n\t\t\t_userSelect = style[userSelectProperty];\r\n\t\t\tstyle[userSelectProperty] = 'none';\r\n\t\t}\r\n\t};\r\n\tenableTextSelection = function () {\r\n\t\tif (userSelectProperty) {\r\n\t\t\tdocument.documentElement.style[userSelectProperty] = _userSelect;\r\n\t\t\t_userSelect = undefined;\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// @function disableImageDrag()\r\n// As [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection), but\r\n// for `dragstart` DOM events, usually generated when the user drags an image.\r\nexport function disableImageDrag() {\r\n\tDomEvent.on(window, 'dragstart', DomEvent.preventDefault);\r\n}\r\n\r\n// @function enableImageDrag()\r\n// Cancels the effects of a previous [`L.DomUtil.disableImageDrag`](#domutil-disabletextselection).\r\nexport function enableImageDrag() {\r\n\tDomEvent.off(window, 'dragstart', DomEvent.preventDefault);\r\n}\r\n\r\nvar _outlineElement, _outlineStyle;\r\n// @function preventOutline(el: HTMLElement)\r\n// Makes the [outline](https://developer.mozilla.org/docs/Web/CSS/outline)\r\n// of the element `el` invisible. Used internally by Leaflet to prevent\r\n// focusable elements from displaying an outline when the user performs a\r\n// drag interaction on them.\r\nexport function preventOutline(element) {\r\n\twhile (element.tabIndex === -1) {\r\n\t\telement = element.parentNode;\r\n\t}\r\n\tif (!element.style) { return; }\r\n\trestoreOutline();\r\n\t_outlineElement = element;\r\n\t_outlineStyle = element.style.outlineStyle;\r\n\telement.style.outlineStyle = 'none';\r\n\tDomEvent.on(window, 'keydown', restoreOutline);\r\n}\r\n\r\n// @function restoreOutline()\r\n// Cancels the effects of a previous [`L.DomUtil.preventOutline`]().\r\nexport function restoreOutline() {\r\n\tif (!_outlineElement) { return; }\r\n\t_outlineElement.style.outlineStyle = _outlineStyle;\r\n\t_outlineElement = undefined;\r\n\t_outlineStyle = undefined;\r\n\tDomEvent.off(window, 'keydown', restoreOutline);\r\n}\r\n\r\n// @function getSizedParentNode(el: HTMLElement): HTMLElement\r\n// Finds the closest parent node which size (width and height) is not null.\r\nexport function getSizedParentNode(element) {\r\n\tdo {\r\n\t\telement = element.parentNode;\r\n\t} while ((!element.offsetWidth || !element.offsetHeight) && element !== document.body);\r\n\treturn element;\r\n}\r\n\r\n// @function getScale(el: HTMLElement): Object\r\n// Computes the CSS scale currently applied on the element.\r\n// Returns an object with `x` and `y` members as horizontal and vertical scales respectively,\r\n// and `boundingClientRect` as the result of [`getBoundingClientRect()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect).\r\nexport function getScale(element) {\r\n\tvar rect = element.getBoundingClientRect(); // Read-only in old browsers.\r\n\r\n\treturn {\r\n\t\tx: rect.width / element.offsetWidth || 1,\r\n\t\ty: rect.height / element.offsetHeight || 1,\r\n\t\tboundingClientRect: rect\r\n\t};\r\n}\r\n","import {Point} from '../geometry/Point';\r\nimport * as Util from '../core/Util';\r\nimport Browser from '../core/Browser';\r\nimport {addPointerListener, removePointerListener} from './DomEvent.Pointer';\r\nimport {addDoubleTapListener, removeDoubleTapListener} from './DomEvent.DoubleTap';\r\nimport {getScale} from './DomUtil';\r\n\r\n/*\r\n * @namespace DomEvent\r\n * Utility functions to work with the [DOM events](https://developer.mozilla.org/docs/Web/API/Event), used by Leaflet internally.\r\n */\r\n\r\n// Inspired by John Resig, Dean Edwards and YUI addEvent implementations.\r\n\r\n// @function on(el: HTMLElement, types: String, fn: Function, context?: Object): this\r\n// Adds a listener function (`fn`) to a particular DOM event type of the\r\n// element `el`. You can optionally specify the context of the listener\r\n// (object the `this` keyword will point to). You can also pass several\r\n// space-separated types (e.g. `'click dblclick'`).\r\n\r\n// @alternative\r\n// @function on(el: HTMLElement, eventMap: Object, context?: Object): this\r\n// Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\nexport function on(obj, types, fn, context) {\r\n\r\n\tif (types && typeof types === 'object') {\r\n\t\tfor (var type in types) {\r\n\t\t\taddOne(obj, type, types[type], fn);\r\n\t\t}\r\n\t} else {\r\n\t\ttypes = Util.splitWords(types);\r\n\r\n\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\taddOne(obj, types[i], fn, context);\r\n\t\t}\r\n\t}\r\n\r\n\treturn this;\r\n}\r\n\r\nvar eventsKey = '_leaflet_events';\r\n\r\n// @function off(el: HTMLElement, types: String, fn: Function, context?: Object): this\r\n// Removes a previously added listener function.\r\n// Note that if you passed a custom context to on, you must pass the same\r\n// context to `off` in order to remove the listener.\r\n\r\n// @alternative\r\n// @function off(el: HTMLElement, eventMap: Object, context?: Object): this\r\n// Removes a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\n\r\n// @alternative\r\n// @function off(el: HTMLElement, types: String): this\r\n// Removes all previously added listeners of given types.\r\n\r\n// @alternative\r\n// @function off(el: HTMLElement): this\r\n// Removes all previously added listeners from given HTMLElement\r\nexport function off(obj, types, fn, context) {\r\n\r\n\tif (arguments.length === 1) {\r\n\t\tbatchRemove(obj);\r\n\t\tdelete obj[eventsKey];\r\n\r\n\t} else if (types && typeof types === 'object') {\r\n\t\tfor (var type in types) {\r\n\t\t\tremoveOne(obj, type, types[type], fn);\r\n\t\t}\r\n\r\n\t} else {\r\n\t\ttypes = Util.splitWords(types);\r\n\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tbatchRemove(obj, function (type) {\r\n\t\t\t\treturn Util.indexOf(types, type) !== -1;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\t\tremoveOne(obj, types[i], fn, context);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn this;\r\n}\r\n\r\nfunction batchRemove(obj, filterFn) {\r\n\tfor (var id in obj[eventsKey]) {\r\n\t\tvar type = id.split(/\\d/)[0];\r\n\t\tif (!filterFn || filterFn(type)) {\r\n\t\t\tremoveOne(obj, type, null, null, id);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar mouseSubst = {\r\n\tmouseenter: 'mouseover',\r\n\tmouseleave: 'mouseout',\r\n\twheel: !('onwheel' in window) && 'mousewheel'\r\n};\r\n\r\nfunction addOne(obj, type, fn, context) {\r\n\tvar id = type + Util.stamp(fn) + (context ? '_' + Util.stamp(context) : '');\r\n\r\n\tif (obj[eventsKey] && obj[eventsKey][id]) { return this; }\r\n\r\n\tvar handler = function (e) {\r\n\t\treturn fn.call(context || obj, e || window.event);\r\n\t};\r\n\r\n\tvar originalHandler = handler;\r\n\r\n\tif (!Browser.touchNative && Browser.pointer && type.indexOf('touch') === 0) {\r\n\t\t// Needs DomEvent.Pointer.js\r\n\t\thandler = addPointerListener(obj, type, handler);\r\n\r\n\t} else if (Browser.touch && (type === 'dblclick')) {\r\n\t\thandler = addDoubleTapListener(obj, handler);\r\n\r\n\t} else if ('addEventListener' in obj) {\r\n\r\n\t\tif (type === 'touchstart' || type === 'touchmove' || type === 'wheel' ||  type === 'mousewheel') {\r\n\t\t\tobj.addEventListener(mouseSubst[type] || type, handler, Browser.passiveEvents ? {passive: false} : false);\r\n\r\n\t\t} else if (type === 'mouseenter' || type === 'mouseleave') {\r\n\t\t\thandler = function (e) {\r\n\t\t\t\te = e || window.event;\r\n\t\t\t\tif (isExternalTarget(obj, e)) {\r\n\t\t\t\t\toriginalHandler(e);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tobj.addEventListener(mouseSubst[type], handler, false);\r\n\r\n\t\t} else {\r\n\t\t\tobj.addEventListener(type, originalHandler, false);\r\n\t\t}\r\n\r\n\t} else {\r\n\t\tobj.attachEvent('on' + type, handler);\r\n\t}\r\n\r\n\tobj[eventsKey] = obj[eventsKey] || {};\r\n\tobj[eventsKey][id] = handler;\r\n}\r\n\r\nfunction removeOne(obj, type, fn, context, id) {\r\n\tid = id || type + Util.stamp(fn) + (context ? '_' + Util.stamp(context) : '');\r\n\tvar handler = obj[eventsKey] && obj[eventsKey][id];\r\n\r\n\tif (!handler) { return this; }\r\n\r\n\tif (!Browser.touchNative && Browser.pointer && type.indexOf('touch') === 0) {\r\n\t\tremovePointerListener(obj, type, handler);\r\n\r\n\t} else if (Browser.touch && (type === 'dblclick')) {\r\n\t\tremoveDoubleTapListener(obj, handler);\r\n\r\n\t} else if ('removeEventListener' in obj) {\r\n\r\n\t\tobj.removeEventListener(mouseSubst[type] || type, handler, false);\r\n\r\n\t} else {\r\n\t\tobj.detachEvent('on' + type, handler);\r\n\t}\r\n\r\n\tobj[eventsKey][id] = null;\r\n}\r\n\r\n// @function stopPropagation(ev: DOMEvent): this\r\n// Stop the given event from propagation to parent elements. Used inside the listener functions:\r\n// ```js\r\n// L.DomEvent.on(div, 'click', function (ev) {\r\n// \tL.DomEvent.stopPropagation(ev);\r\n// });\r\n// ```\r\nexport function stopPropagation(e) {\r\n\r\n\tif (e.stopPropagation) {\r\n\t\te.stopPropagation();\r\n\t} else if (e.originalEvent) {  // In case of Leaflet event.\r\n\t\te.originalEvent._stopped = true;\r\n\t} else {\r\n\t\te.cancelBubble = true;\r\n\t}\r\n\r\n\treturn this;\r\n}\r\n\r\n// @function disableScrollPropagation(el: HTMLElement): this\r\n// Adds `stopPropagation` to the element's `'wheel'` events (plus browser variants).\r\nexport function disableScrollPropagation(el) {\r\n\taddOne(el, 'wheel', stopPropagation);\r\n\treturn this;\r\n}\r\n\r\n// @function disableClickPropagation(el: HTMLElement): this\r\n// Adds `stopPropagation` to the element's `'click'`, `'dblclick'`, `'contextmenu'`,\r\n// `'mousedown'` and `'touchstart'` events (plus browser variants).\r\nexport function disableClickPropagation(el) {\r\n\ton(el, 'mousedown touchstart dblclick contextmenu', stopPropagation);\r\n\tel['_leaflet_disable_click'] = true;\r\n\treturn this;\r\n}\r\n\r\n// @function preventDefault(ev: DOMEvent): this\r\n// Prevents the default action of the DOM Event `ev` from happening (such as\r\n// following a link in the href of the a element, or doing a POST request\r\n// with page reload when a `<form>` is submitted).\r\n// Use it inside listener functions.\r\nexport function preventDefault(e) {\r\n\tif (e.preventDefault) {\r\n\t\te.preventDefault();\r\n\t} else {\r\n\t\te.returnValue = false;\r\n\t}\r\n\treturn this;\r\n}\r\n\r\n// @function stop(ev: DOMEvent): this\r\n// Does `stopPropagation` and `preventDefault` at the same time.\r\nexport function stop(e) {\r\n\tpreventDefault(e);\r\n\tstopPropagation(e);\r\n\treturn this;\r\n}\r\n\r\n// @function getPropagationPath(ev: DOMEvent): Array\r\n// Compatibility polyfill for [`Event.composedPath()`](https://developer.mozilla.org/en-US/docs/Web/API/Event/composedPath).\r\n// Returns an array containing the `HTMLElement`s that the given DOM event\r\n// should propagate to (if not stopped).\r\nexport function getPropagationPath(ev) {\r\n\tif (ev.composedPath) {\r\n\t\treturn ev.composedPath();\r\n\t}\r\n\r\n\tvar path = [];\r\n\tvar el = ev.target;\r\n\r\n\twhile (el) {\r\n\t\tpath.push(el);\r\n\t\tel = el.parentNode;\r\n\t}\r\n\treturn path;\r\n}\r\n\r\n\r\n// @function getMousePosition(ev: DOMEvent, container?: HTMLElement): Point\r\n// Gets normalized mouse position from a DOM event relative to the\r\n// `container` (border excluded) or to the whole page if not specified.\r\nexport function getMousePosition(e, container) {\r\n\tif (!container) {\r\n\t\treturn new Point(e.clientX, e.clientY);\r\n\t}\r\n\r\n\tvar scale = getScale(container),\r\n\t    offset = scale.boundingClientRect; // left and top  values are in page scale (like the event clientX/Y)\r\n\r\n\treturn new Point(\r\n\t\t// offset.left/top values are in page scale (like clientX/Y),\r\n\t\t// whereas clientLeft/Top (border width) values are the original values (before CSS scale applies).\r\n\t\t(e.clientX - offset.left) / scale.x - container.clientLeft,\r\n\t\t(e.clientY - offset.top) / scale.y - container.clientTop\r\n\t);\r\n}\r\n\r\n\r\n//  except , Safari and\r\n// We need double the scroll pixels (see #7403 and #4538) for all Browsers\r\n// except OSX (Mac) -> 3x, Chrome running on Linux 1x\r\n\r\nvar wheelPxFactor =\r\n\t(Browser.linux && Browser.chrome) ? window.devicePixelRatio :\r\n\tBrowser.mac ? window.devicePixelRatio * 3 :\r\n\twindow.devicePixelRatio > 0 ? 2 * window.devicePixelRatio : 1;\r\n// @function getWheelDelta(ev: DOMEvent): Number\r\n// Gets normalized wheel delta from a wheel DOM event, in vertical\r\n// pixels scrolled (negative if scrolling down).\r\n// Events from pointing devices without precise scrolling are mapped to\r\n// a best guess of 60 pixels.\r\nexport function getWheelDelta(e) {\r\n\treturn (Browser.edge) ? e.wheelDeltaY / 2 : // Don't trust window-geometry-based delta\r\n\t       (e.deltaY && e.deltaMode === 0) ? -e.deltaY / wheelPxFactor : // Pixels\r\n\t       (e.deltaY && e.deltaMode === 1) ? -e.deltaY * 20 : // Lines\r\n\t       (e.deltaY && e.deltaMode === 2) ? -e.deltaY * 60 : // Pages\r\n\t       (e.deltaX || e.deltaZ) ? 0 :\t// Skip horizontal/depth wheel events\r\n\t       e.wheelDelta ? (e.wheelDeltaY || e.wheelDelta) / 2 : // Legacy IE pixels\r\n\t       (e.detail && Math.abs(e.detail) < 32765) ? -e.detail * 20 : // Legacy Moz lines\r\n\t       e.detail ? e.detail / -32765 * 60 : // Legacy Moz pages\r\n\t       0;\r\n}\r\n\r\n// check if element really left/entered the event target (for mouseenter/mouseleave)\r\nexport function isExternalTarget(el, e) {\r\n\r\n\tvar related = e.relatedTarget;\r\n\r\n\tif (!related) { return true; }\r\n\r\n\ttry {\r\n\t\twhile (related && (related !== el)) {\r\n\t\t\trelated = related.parentNode;\r\n\t\t}\r\n\t} catch (err) {\r\n\t\treturn false;\r\n\t}\r\n\treturn (related !== el);\r\n}\r\n\r\n// @function addListener(): this\r\n// Alias to [`L.DomEvent.on`](#domevent-on)\r\nexport {on as addListener};\r\n\r\n// @function removeListener(): this\r\n// Alias to [`L.DomEvent.off`](#domevent-off)\r\nexport {off as removeListener};\r\n","import * as Util from '../core/Util';\nimport {Evented} from '../core/Events';\nimport * as DomUtil from '../dom/DomUtil';\n\n\n/*\n * @class PosAnimation\n * @aka L.PosAnimation\n * @inherits Evented\n * Used internally for panning animations, utilizing CSS3 Transitions for modern browsers and a timer fallback for IE6-9.\n *\n * @example\n * ```js\n * var myPositionMarker = L.marker([48.864716, 2.294694]).addTo(map);\n *\n * myPositionMarker.on(\"click\", function() {\n * \tvar pos = map.latLngToLayerPoint(myPositionMarker.getLatLng());\n * \tpos.y -= 25;\n * \tvar fx = new L.PosAnimation();\n *\n * \tfx.once('end',function() {\n * \t\tpos.y += 25;\n * \t\tfx.run(myPositionMarker._icon, pos, 0.8);\n * \t});\n *\n * \tfx.run(myPositionMarker._icon, pos, 0.3);\n * });\n *\n * ```\n *\n * @constructor L.PosAnimation()\n * Creates a `PosAnimation` object.\n *\n */\n\nexport var PosAnimation = Evented.extend({\n\n\t// @method run(el: HTMLElement, newPos: Point, duration?: Number, easeLinearity?: Number)\n\t// Run an animation of a given element to a new position, optionally setting\n\t// duration in seconds (`0.25` by default) and easing linearity factor (3rd\n\t// argument of the [cubic bezier curve](https://cubic-bezier.com/#0,0,.5,1),\n\t// `0.5` by default).\n\trun: function (el, newPos, duration, easeLinearity) {\n\t\tthis.stop();\n\n\t\tthis._el = el;\n\t\tthis._inProgress = true;\n\t\tthis._duration = duration || 0.25;\n\t\tthis._easeOutPower = 1 / Math.max(easeLinearity || 0.5, 0.2);\n\n\t\tthis._startPos = DomUtil.getPosition(el);\n\t\tthis._offset = newPos.subtract(this._startPos);\n\t\tthis._startTime = +new Date();\n\n\t\t// @event start: Event\n\t\t// Fired when the animation starts\n\t\tthis.fire('start');\n\n\t\tthis._animate();\n\t},\n\n\t// @method stop()\n\t// Stops the animation (if currently running).\n\tstop: function () {\n\t\tif (!this._inProgress) { return; }\n\n\t\tthis._step(true);\n\t\tthis._complete();\n\t},\n\n\t_animate: function () {\n\t\t// animation loop\n\t\tthis._animId = Util.requestAnimFrame(this._animate, this);\n\t\tthis._step();\n\t},\n\n\t_step: function (round) {\n\t\tvar elapsed = (+new Date()) - this._startTime,\n\t\t    duration = this._duration * 1000;\n\n\t\tif (elapsed < duration) {\n\t\t\tthis._runFrame(this._easeOut(elapsed / duration), round);\n\t\t} else {\n\t\t\tthis._runFrame(1);\n\t\t\tthis._complete();\n\t\t}\n\t},\n\n\t_runFrame: function (progress, round) {\n\t\tvar pos = this._startPos.add(this._offset.multiplyBy(progress));\n\t\tif (round) {\n\t\t\tpos._round();\n\t\t}\n\t\tDomUtil.setPosition(this._el, pos);\n\n\t\t// @event step: Event\n\t\t// Fired continuously during the animation.\n\t\tthis.fire('step');\n\t},\n\n\t_complete: function () {\n\t\tUtil.cancelAnimFrame(this._animId);\n\n\t\tthis._inProgress = false;\n\t\t// @event end: Event\n\t\t// Fired when the animation ends.\n\t\tthis.fire('end');\n\t},\n\n\t_easeOut: function (t) {\n\t\treturn 1 - Math.pow(1 - t, this._easeOutPower);\n\t}\n});\n","import * as Util from '../core/Util';\r\nimport {Evented} from '../core/Events';\r\nimport {EPSG3857} from '../geo/crs/CRS.EPSG3857';\r\nimport {Point, toPoint} from '../geometry/Point';\r\nimport {Bounds, toBounds} from '../geometry/Bounds';\r\nimport {LatLng, toLatLng} from '../geo/LatLng';\r\nimport {LatLngBounds, toLatLngBounds} from '../geo/LatLngBounds';\r\nimport Browser from '../core/Browser';\r\nimport * as DomEvent from '../dom/DomEvent';\r\nimport * as DomUtil from '../dom/DomUtil';\r\nimport {PosAnimation} from '../dom/PosAnimation';\r\n\r\n/*\r\n * @class Map\r\n * @aka L.Map\r\n * @inherits Evented\r\n *\r\n * The central class of the API  it is used to create a map on a page and manipulate it.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * // initialize the map on the \"map\" div with a given center and zoom\r\n * var map = L.map('map', {\r\n * \tcenter: [51.505, -0.09],\r\n * \tzoom: 13\r\n * });\r\n * ```\r\n *\r\n */\r\n\r\nexport var Map = Evented.extend({\r\n\r\n\toptions: {\r\n\t\t// @section Map State Options\r\n\t\t// @option crs: CRS = L.CRS.EPSG3857\r\n\t\t// The [Coordinate Reference System](#crs) to use. Don't change this if you're not\r\n\t\t// sure what it means.\r\n\t\tcrs: EPSG3857,\r\n\r\n\t\t// @option center: LatLng = undefined\r\n\t\t// Initial geographic center of the map\r\n\t\tcenter: undefined,\r\n\r\n\t\t// @option zoom: Number = undefined\r\n\t\t// Initial map zoom level\r\n\t\tzoom: undefined,\r\n\r\n\t\t// @option minZoom: Number = *\r\n\t\t// Minimum zoom level of the map.\r\n\t\t// If not specified and at least one `GridLayer` or `TileLayer` is in the map,\r\n\t\t// the lowest of their `minZoom` options will be used instead.\r\n\t\tminZoom: undefined,\r\n\r\n\t\t// @option maxZoom: Number = *\r\n\t\t// Maximum zoom level of the map.\r\n\t\t// If not specified and at least one `GridLayer` or `TileLayer` is in the map,\r\n\t\t// the highest of their `maxZoom` options will be used instead.\r\n\t\tmaxZoom: undefined,\r\n\r\n\t\t// @option layers: Layer[] = []\r\n\t\t// Array of layers that will be added to the map initially\r\n\t\tlayers: [],\r\n\r\n\t\t// @option maxBounds: LatLngBounds = null\r\n\t\t// When this option is set, the map restricts the view to the given\r\n\t\t// geographical bounds, bouncing the user back if the user tries to pan\r\n\t\t// outside the view. To set the restriction dynamically, use\r\n\t\t// [`setMaxBounds`](#map-setmaxbounds) method.\r\n\t\tmaxBounds: undefined,\r\n\r\n\t\t// @option renderer: Renderer = *\r\n\t\t// The default method for drawing vector layers on the map. `L.SVG`\r\n\t\t// or `L.Canvas` by default depending on browser support.\r\n\t\trenderer: undefined,\r\n\r\n\r\n\t\t// @section Animation Options\r\n\t\t// @option zoomAnimation: Boolean = true\r\n\t\t// Whether the map zoom animation is enabled. By default it's enabled\r\n\t\t// in all browsers that support CSS3 Transitions except Android.\r\n\t\tzoomAnimation: true,\r\n\r\n\t\t// @option zoomAnimationThreshold: Number = 4\r\n\t\t// Won't animate zoom if the zoom difference exceeds this value.\r\n\t\tzoomAnimationThreshold: 4,\r\n\r\n\t\t// @option fadeAnimation: Boolean = true\r\n\t\t// Whether the tile fade animation is enabled. By default it's enabled\r\n\t\t// in all browsers that support CSS3 Transitions except Android.\r\n\t\tfadeAnimation: true,\r\n\r\n\t\t// @option markerZoomAnimation: Boolean = true\r\n\t\t// Whether markers animate their zoom with the zoom animation, if disabled\r\n\t\t// they will disappear for the length of the animation. By default it's\r\n\t\t// enabled in all browsers that support CSS3 Transitions except Android.\r\n\t\tmarkerZoomAnimation: true,\r\n\r\n\t\t// @option transform3DLimit: Number = 2^23\r\n\t\t// Defines the maximum size of a CSS translation transform. The default\r\n\t\t// value should not be changed unless a web browser positions layers in\r\n\t\t// the wrong place after doing a large `panBy`.\r\n\t\ttransform3DLimit: 8388608, // Precision limit of a 32-bit float\r\n\r\n\t\t// @section Interaction Options\r\n\t\t// @option zoomSnap: Number = 1\r\n\t\t// Forces the map's zoom level to always be a multiple of this, particularly\r\n\t\t// right after a [`fitBounds()`](#map-fitbounds) or a pinch-zoom.\r\n\t\t// By default, the zoom level snaps to the nearest integer; lower values\r\n\t\t// (e.g. `0.5` or `0.1`) allow for greater granularity. A value of `0`\r\n\t\t// means the zoom level will not be snapped after `fitBounds` or a pinch-zoom.\r\n\t\tzoomSnap: 1,\r\n\r\n\t\t// @option zoomDelta: Number = 1\r\n\t\t// Controls how much the map's zoom level will change after a\r\n\t\t// [`zoomIn()`](#map-zoomin), [`zoomOut()`](#map-zoomout), pressing `+`\r\n\t\t// or `-` on the keyboard, or using the [zoom controls](#control-zoom).\r\n\t\t// Values smaller than `1` (e.g. `0.5`) allow for greater granularity.\r\n\t\tzoomDelta: 1,\r\n\r\n\t\t// @option trackResize: Boolean = true\r\n\t\t// Whether the map automatically handles browser window resize to update itself.\r\n\t\ttrackResize: true\r\n\t},\r\n\r\n\tinitialize: function (id, options) { // (HTMLElement or String, Object)\r\n\t\toptions = Util.setOptions(this, options);\r\n\r\n\t\t// Make sure to assign internal flags at the beginning,\r\n\t\t// to avoid inconsistent state in some edge cases.\r\n\t\tthis._handlers = [];\r\n\t\tthis._layers = {};\r\n\t\tthis._zoomBoundLayers = {};\r\n\t\tthis._sizeChanged = true;\r\n\r\n\t\tthis._initContainer(id);\r\n\t\tthis._initLayout();\r\n\r\n\t\t// hack for https://github.com/Leaflet/Leaflet/issues/1980\r\n\t\tthis._onResize = Util.bind(this._onResize, this);\r\n\r\n\t\tthis._initEvents();\r\n\r\n\t\tif (options.maxBounds) {\r\n\t\t\tthis.setMaxBounds(options.maxBounds);\r\n\t\t}\r\n\r\n\t\tif (options.zoom !== undefined) {\r\n\t\t\tthis._zoom = this._limitZoom(options.zoom);\r\n\t\t}\r\n\r\n\t\tif (options.center && options.zoom !== undefined) {\r\n\t\t\tthis.setView(toLatLng(options.center), options.zoom, {reset: true});\r\n\t\t}\r\n\r\n\t\tthis.callInitHooks();\r\n\r\n\t\t// don't animate on browsers without hardware-accelerated transitions or old Android/Opera\r\n\t\tthis._zoomAnimated = DomUtil.TRANSITION && Browser.any3d && !Browser.mobileOpera &&\r\n\t\t\t\tthis.options.zoomAnimation;\r\n\r\n\t\t// zoom transitions run with the same duration for all layers, so if one of transitionend events\r\n\t\t// happens after starting zoom animation (propagating to the map pane), we know that it ended globally\r\n\t\tif (this._zoomAnimated) {\r\n\t\t\tthis._createAnimProxy();\r\n\t\t\tDomEvent.on(this._proxy, DomUtil.TRANSITION_END, this._catchTransitionEnd, this);\r\n\t\t}\r\n\r\n\t\tthis._addLayers(this.options.layers);\r\n\t},\r\n\r\n\r\n\t// @section Methods for modifying map state\r\n\r\n\t// @method setView(center: LatLng, zoom: Number, options?: Zoom/pan options): this\r\n\t// Sets the view of the map (geographical center and zoom) with the given\r\n\t// animation options.\r\n\tsetView: function (center, zoom, options) {\r\n\r\n\t\tzoom = zoom === undefined ? this._zoom : this._limitZoom(zoom);\r\n\t\tcenter = this._limitCenter(toLatLng(center), zoom, this.options.maxBounds);\r\n\t\toptions = options || {};\r\n\r\n\t\tthis._stop();\r\n\r\n\t\tif (this._loaded && !options.reset && options !== true) {\r\n\r\n\t\t\tif (options.animate !== undefined) {\r\n\t\t\t\toptions.zoom = Util.extend({animate: options.animate}, options.zoom);\r\n\t\t\t\toptions.pan = Util.extend({animate: options.animate, duration: options.duration}, options.pan);\r\n\t\t\t}\r\n\r\n\t\t\t// try animating pan or zoom\r\n\t\t\tvar moved = (this._zoom !== zoom) ?\r\n\t\t\t\tthis._tryAnimatedZoom && this._tryAnimatedZoom(center, zoom, options.zoom) :\r\n\t\t\t\tthis._tryAnimatedPan(center, options.pan);\r\n\r\n\t\t\tif (moved) {\r\n\t\t\t\t// prevent resize handler call, the view will refresh after animation anyway\r\n\t\t\t\tclearTimeout(this._sizeTimer);\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// animation didn't start, just reset the map view\r\n\t\tthis._resetView(center, zoom, options.pan && options.pan.noMoveStart);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method setZoom(zoom: Number, options?: Zoom/pan options): this\r\n\t// Sets the zoom of the map.\r\n\tsetZoom: function (zoom, options) {\r\n\t\tif (!this._loaded) {\r\n\t\t\tthis._zoom = zoom;\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\treturn this.setView(this.getCenter(), zoom, {zoom: options});\r\n\t},\r\n\r\n\t// @method zoomIn(delta?: Number, options?: Zoom options): this\r\n\t// Increases the zoom of the map by `delta` ([`zoomDelta`](#map-zoomdelta) by default).\r\n\tzoomIn: function (delta, options) {\r\n\t\tdelta = delta || (Browser.any3d ? this.options.zoomDelta : 1);\r\n\t\treturn this.setZoom(this._zoom + delta, options);\r\n\t},\r\n\r\n\t// @method zoomOut(delta?: Number, options?: Zoom options): this\r\n\t// Decreases the zoom of the map by `delta` ([`zoomDelta`](#map-zoomdelta) by default).\r\n\tzoomOut: function (delta, options) {\r\n\t\tdelta = delta || (Browser.any3d ? this.options.zoomDelta : 1);\r\n\t\treturn this.setZoom(this._zoom - delta, options);\r\n\t},\r\n\r\n\t// @method setZoomAround(latlng: LatLng, zoom: Number, options: Zoom options): this\r\n\t// Zooms the map while keeping a specified geographical point on the map\r\n\t// stationary (e.g. used internally for scroll zoom and double-click zoom).\r\n\t// @alternative\r\n\t// @method setZoomAround(offset: Point, zoom: Number, options: Zoom options): this\r\n\t// Zooms the map while keeping a specified pixel on the map (relative to the top-left corner) stationary.\r\n\tsetZoomAround: function (latlng, zoom, options) {\r\n\t\tvar scale = this.getZoomScale(zoom),\r\n\t\t    viewHalf = this.getSize().divideBy(2),\r\n\t\t    containerPoint = latlng instanceof Point ? latlng : this.latLngToContainerPoint(latlng),\r\n\r\n\t\t    centerOffset = containerPoint.subtract(viewHalf).multiplyBy(1 - 1 / scale),\r\n\t\t    newCenter = this.containerPointToLatLng(viewHalf.add(centerOffset));\r\n\r\n\t\treturn this.setView(newCenter, zoom, {zoom: options});\r\n\t},\r\n\r\n\t_getBoundsCenterZoom: function (bounds, options) {\r\n\r\n\t\toptions = options || {};\r\n\t\tbounds = bounds.getBounds ? bounds.getBounds() : toLatLngBounds(bounds);\r\n\r\n\t\tvar paddingTL = toPoint(options.paddingTopLeft || options.padding || [0, 0]),\r\n\t\t    paddingBR = toPoint(options.paddingBottomRight || options.padding || [0, 0]),\r\n\r\n\t\t    zoom = this.getBoundsZoom(bounds, false, paddingTL.add(paddingBR));\r\n\r\n\t\tzoom = (typeof options.maxZoom === 'number') ? Math.min(options.maxZoom, zoom) : zoom;\r\n\r\n\t\tif (zoom === Infinity) {\r\n\t\t\treturn {\r\n\t\t\t\tcenter: bounds.getCenter(),\r\n\t\t\t\tzoom: zoom\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar paddingOffset = paddingBR.subtract(paddingTL).divideBy(2),\r\n\r\n\t\t    swPoint = this.project(bounds.getSouthWest(), zoom),\r\n\t\t    nePoint = this.project(bounds.getNorthEast(), zoom),\r\n\t\t    center = this.unproject(swPoint.add(nePoint).divideBy(2).add(paddingOffset), zoom);\r\n\r\n\t\treturn {\r\n\t\t\tcenter: center,\r\n\t\t\tzoom: zoom\r\n\t\t};\r\n\t},\r\n\r\n\t// @method fitBounds(bounds: LatLngBounds, options?: fitBounds options): this\r\n\t// Sets a map view that contains the given geographical bounds with the\r\n\t// maximum zoom level possible.\r\n\tfitBounds: function (bounds, options) {\r\n\r\n\t\tbounds = toLatLngBounds(bounds);\r\n\r\n\t\tif (!bounds.isValid()) {\r\n\t\t\tthrow new Error('Bounds are not valid.');\r\n\t\t}\r\n\r\n\t\tvar target = this._getBoundsCenterZoom(bounds, options);\r\n\t\treturn this.setView(target.center, target.zoom, options);\r\n\t},\r\n\r\n\t// @method fitWorld(options?: fitBounds options): this\r\n\t// Sets a map view that mostly contains the whole world with the maximum\r\n\t// zoom level possible.\r\n\tfitWorld: function (options) {\r\n\t\treturn this.fitBounds([[-90, -180], [90, 180]], options);\r\n\t},\r\n\r\n\t// @method panTo(latlng: LatLng, options?: Pan options): this\r\n\t// Pans the map to a given center.\r\n\tpanTo: function (center, options) { // (LatLng)\r\n\t\treturn this.setView(center, this._zoom, {pan: options});\r\n\t},\r\n\r\n\t// @method panBy(offset: Point, options?: Pan options): this\r\n\t// Pans the map by a given number of pixels (animated).\r\n\tpanBy: function (offset, options) {\r\n\t\toffset = toPoint(offset).round();\r\n\t\toptions = options || {};\r\n\r\n\t\tif (!offset.x && !offset.y) {\r\n\t\t\treturn this.fire('moveend');\r\n\t\t}\r\n\t\t// If we pan too far, Chrome gets issues with tiles\r\n\t\t// and makes them disappear or appear in the wrong place (slightly offset) #2602\r\n\t\tif (options.animate !== true && !this.getSize().contains(offset)) {\r\n\t\t\tthis._resetView(this.unproject(this.project(this.getCenter()).add(offset)), this.getZoom());\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tif (!this._panAnim) {\r\n\t\t\tthis._panAnim = new PosAnimation();\r\n\r\n\t\t\tthis._panAnim.on({\r\n\t\t\t\t'step': this._onPanTransitionStep,\r\n\t\t\t\t'end': this._onPanTransitionEnd\r\n\t\t\t}, this);\r\n\t\t}\r\n\r\n\t\t// don't fire movestart if animating inertia\r\n\t\tif (!options.noMoveStart) {\r\n\t\t\tthis.fire('movestart');\r\n\t\t}\r\n\r\n\t\t// animate pan unless animate: false specified\r\n\t\tif (options.animate !== false) {\r\n\t\t\tDomUtil.addClass(this._mapPane, 'leaflet-pan-anim');\r\n\r\n\t\t\tvar newPos = this._getMapPanePos().subtract(offset).round();\r\n\t\t\tthis._panAnim.run(this._mapPane, newPos, options.duration || 0.25, options.easeLinearity);\r\n\t\t} else {\r\n\t\t\tthis._rawPanBy(offset);\r\n\t\t\tthis.fire('move').fire('moveend');\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method flyTo(latlng: LatLng, zoom?: Number, options?: Zoom/pan options): this\r\n\t// Sets the view of the map (geographical center and zoom) performing a smooth\r\n\t// pan-zoom animation.\r\n\tflyTo: function (targetCenter, targetZoom, options) {\r\n\r\n\t\toptions = options || {};\r\n\t\tif (options.animate === false || !Browser.any3d) {\r\n\t\t\treturn this.setView(targetCenter, targetZoom, options);\r\n\t\t}\r\n\r\n\t\tthis._stop();\r\n\r\n\t\tvar from = this.project(this.getCenter()),\r\n\t\t    to = this.project(targetCenter),\r\n\t\t    size = this.getSize(),\r\n\t\t    startZoom = this._zoom;\r\n\r\n\t\ttargetCenter = toLatLng(targetCenter);\r\n\t\ttargetZoom = targetZoom === undefined ? startZoom : targetZoom;\r\n\r\n\t\tvar w0 = Math.max(size.x, size.y),\r\n\t\t    w1 = w0 * this.getZoomScale(startZoom, targetZoom),\r\n\t\t    u1 = (to.distanceTo(from)) || 1,\r\n\t\t    rho = 1.42,\r\n\t\t    rho2 = rho * rho;\r\n\r\n\t\tfunction r(i) {\r\n\t\t\tvar s1 = i ? -1 : 1,\r\n\t\t\t    s2 = i ? w1 : w0,\r\n\t\t\t    t1 = w1 * w1 - w0 * w0 + s1 * rho2 * rho2 * u1 * u1,\r\n\t\t\t    b1 = 2 * s2 * rho2 * u1,\r\n\t\t\t    b = t1 / b1,\r\n\t\t\t    sq = Math.sqrt(b * b + 1) - b;\r\n\r\n\t\t\t    // workaround for floating point precision bug when sq = 0, log = -Infinite,\r\n\t\t\t    // thus triggering an infinite loop in flyTo\r\n\t\t\t    var log = sq < 0.000000001 ? -18 : Math.log(sq);\r\n\r\n\t\t\treturn log;\r\n\t\t}\r\n\r\n\t\tfunction sinh(n) { return (Math.exp(n) - Math.exp(-n)) / 2; }\r\n\t\tfunction cosh(n) { return (Math.exp(n) + Math.exp(-n)) / 2; }\r\n\t\tfunction tanh(n) { return sinh(n) / cosh(n); }\r\n\r\n\t\tvar r0 = r(0);\r\n\r\n\t\tfunction w(s) { return w0 * (cosh(r0) / cosh(r0 + rho * s)); }\r\n\t\tfunction u(s) { return w0 * (cosh(r0) * tanh(r0 + rho * s) - sinh(r0)) / rho2; }\r\n\r\n\t\tfunction easeOut(t) { return 1 - Math.pow(1 - t, 1.5); }\r\n\r\n\t\tvar start = Date.now(),\r\n\t\t    S = (r(1) - r0) / rho,\r\n\t\t    duration = options.duration ? 1000 * options.duration : 1000 * S * 0.8;\r\n\r\n\t\tfunction frame() {\r\n\t\t\tvar t = (Date.now() - start) / duration,\r\n\t\t\t    s = easeOut(t) * S;\r\n\r\n\t\t\tif (t <= 1) {\r\n\t\t\t\tthis._flyToFrame = Util.requestAnimFrame(frame, this);\r\n\r\n\t\t\t\tthis._move(\r\n\t\t\t\t\tthis.unproject(from.add(to.subtract(from).multiplyBy(u(s) / u1)), startZoom),\r\n\t\t\t\t\tthis.getScaleZoom(w0 / w(s), startZoom),\r\n\t\t\t\t\t{flyTo: true});\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis\r\n\t\t\t\t\t._move(targetCenter, targetZoom)\r\n\t\t\t\t\t._moveEnd(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._moveStart(true, options.noMoveStart);\r\n\r\n\t\tframe.call(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method flyToBounds(bounds: LatLngBounds, options?: fitBounds options): this\r\n\t// Sets the view of the map with a smooth animation like [`flyTo`](#map-flyto),\r\n\t// but takes a bounds parameter like [`fitBounds`](#map-fitbounds).\r\n\tflyToBounds: function (bounds, options) {\r\n\t\tvar target = this._getBoundsCenterZoom(bounds, options);\r\n\t\treturn this.flyTo(target.center, target.zoom, options);\r\n\t},\r\n\r\n\t// @method setMaxBounds(bounds: LatLngBounds): this\r\n\t// Restricts the map view to the given bounds (see the [maxBounds](#map-maxbounds) option).\r\n\tsetMaxBounds: function (bounds) {\r\n\t\tbounds = toLatLngBounds(bounds);\r\n\r\n\t\tif (this.listens('moveend', this._panInsideMaxBounds)) {\r\n\t\t\tthis.off('moveend', this._panInsideMaxBounds);\r\n\t\t}\r\n\r\n\t\tif (!bounds.isValid()) {\r\n\t\t\tthis.options.maxBounds = null;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tthis.options.maxBounds = bounds;\r\n\r\n\t\tif (this._loaded) {\r\n\t\t\tthis._panInsideMaxBounds();\r\n\t\t}\r\n\r\n\t\treturn this.on('moveend', this._panInsideMaxBounds);\r\n\t},\r\n\r\n\t// @method setMinZoom(zoom: Number): this\r\n\t// Sets the lower limit for the available zoom levels (see the [minZoom](#map-minzoom) option).\r\n\tsetMinZoom: function (zoom) {\r\n\t\tvar oldZoom = this.options.minZoom;\r\n\t\tthis.options.minZoom = zoom;\r\n\r\n\t\tif (this._loaded && oldZoom !== zoom) {\r\n\t\t\tthis.fire('zoomlevelschange');\r\n\r\n\t\t\tif (this.getZoom() < this.options.minZoom) {\r\n\t\t\t\treturn this.setZoom(zoom);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method setMaxZoom(zoom: Number): this\r\n\t// Sets the upper limit for the available zoom levels (see the [maxZoom](#map-maxzoom) option).\r\n\tsetMaxZoom: function (zoom) {\r\n\t\tvar oldZoom = this.options.maxZoom;\r\n\t\tthis.options.maxZoom = zoom;\r\n\r\n\t\tif (this._loaded && oldZoom !== zoom) {\r\n\t\t\tthis.fire('zoomlevelschange');\r\n\r\n\t\t\tif (this.getZoom() > this.options.maxZoom) {\r\n\t\t\t\treturn this.setZoom(zoom);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method panInsideBounds(bounds: LatLngBounds, options?: Pan options): this\r\n\t// Pans the map to the closest view that would lie inside the given bounds (if it's not already), controlling the animation using the options specific, if any.\r\n\tpanInsideBounds: function (bounds, options) {\r\n\t\tthis._enforcingBounds = true;\r\n\t\tvar center = this.getCenter(),\r\n\t\t    newCenter = this._limitCenter(center, this._zoom, toLatLngBounds(bounds));\r\n\r\n\t\tif (!center.equals(newCenter)) {\r\n\t\t\tthis.panTo(newCenter, options);\r\n\t\t}\r\n\r\n\t\tthis._enforcingBounds = false;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method panInside(latlng: LatLng, options?: padding options): this\r\n\t// Pans the map the minimum amount to make the `latlng` visible. Use\r\n\t// padding options to fit the display to more restricted bounds.\r\n\t// If `latlng` is already within the (optionally padded) display bounds,\r\n\t// the map will not be panned.\r\n\tpanInside: function (latlng, options) {\r\n\t\toptions = options || {};\r\n\r\n\t\tvar paddingTL = toPoint(options.paddingTopLeft || options.padding || [0, 0]),\r\n\t\t    paddingBR = toPoint(options.paddingBottomRight || options.padding || [0, 0]),\r\n\t\t    pixelCenter = this.project(this.getCenter()),\r\n\t\t    pixelPoint = this.project(latlng),\r\n\t\t    pixelBounds = this.getPixelBounds(),\r\n\t\t    paddedBounds = toBounds([pixelBounds.min.add(paddingTL), pixelBounds.max.subtract(paddingBR)]),\r\n\t\t    paddedSize = paddedBounds.getSize();\r\n\r\n\t\tif (!paddedBounds.contains(pixelPoint)) {\r\n\t\t\tthis._enforcingBounds = true;\r\n\t\t\tvar centerOffset = pixelPoint.subtract(paddedBounds.getCenter());\r\n\t\t\tvar offset = paddedBounds.extend(pixelPoint).getSize().subtract(paddedSize);\r\n\t\t\tpixelCenter.x += centerOffset.x < 0 ? -offset.x : offset.x;\r\n\t\t\tpixelCenter.y += centerOffset.y < 0 ? -offset.y : offset.y;\r\n\t\t\tthis.panTo(this.unproject(pixelCenter), options);\r\n\t\t\tthis._enforcingBounds = false;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method invalidateSize(options: Zoom/pan options): this\r\n\t// Checks if the map container size changed and updates the map if so \r\n\t// call it after you've changed the map size dynamically, also animating\r\n\t// pan by default. If `options.pan` is `false`, panning will not occur.\r\n\t// If `options.debounceMoveend` is `true`, it will delay `moveend` event so\r\n\t// that it doesn't happen often even if the method is called many\r\n\t// times in a row.\r\n\r\n\t// @alternative\r\n\t// @method invalidateSize(animate: Boolean): this\r\n\t// Checks if the map container size changed and updates the map if so \r\n\t// call it after you've changed the map size dynamically, also animating\r\n\t// pan by default.\r\n\tinvalidateSize: function (options) {\r\n\t\tif (!this._loaded) { return this; }\r\n\r\n\t\toptions = Util.extend({\r\n\t\t\tanimate: false,\r\n\t\t\tpan: true\r\n\t\t}, options === true ? {animate: true} : options);\r\n\r\n\t\tvar oldSize = this.getSize();\r\n\t\tthis._sizeChanged = true;\r\n\t\tthis._lastCenter = null;\r\n\r\n\t\tvar newSize = this.getSize(),\r\n\t\t    oldCenter = oldSize.divideBy(2).round(),\r\n\t\t    newCenter = newSize.divideBy(2).round(),\r\n\t\t    offset = oldCenter.subtract(newCenter);\r\n\r\n\t\tif (!offset.x && !offset.y) { return this; }\r\n\r\n\t\tif (options.animate && options.pan) {\r\n\t\t\tthis.panBy(offset);\r\n\r\n\t\t} else {\r\n\t\t\tif (options.pan) {\r\n\t\t\t\tthis._rawPanBy(offset);\r\n\t\t\t}\r\n\r\n\t\t\tthis.fire('move');\r\n\r\n\t\t\tif (options.debounceMoveend) {\r\n\t\t\t\tclearTimeout(this._sizeTimer);\r\n\t\t\t\tthis._sizeTimer = setTimeout(Util.bind(this.fire, this, 'moveend'), 200);\r\n\t\t\t} else {\r\n\t\t\t\tthis.fire('moveend');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// @section Map state change events\r\n\t\t// @event resize: ResizeEvent\r\n\t\t// Fired when the map is resized.\r\n\t\treturn this.fire('resize', {\r\n\t\t\toldSize: oldSize,\r\n\t\t\tnewSize: newSize\r\n\t\t});\r\n\t},\r\n\r\n\t// @section Methods for modifying map state\r\n\t// @method stop(): this\r\n\t// Stops the currently running `panTo` or `flyTo` animation, if any.\r\n\tstop: function () {\r\n\t\tthis.setZoom(this._limitZoom(this._zoom));\r\n\t\tif (!this.options.zoomSnap) {\r\n\t\t\tthis.fire('viewreset');\r\n\t\t}\r\n\t\treturn this._stop();\r\n\t},\r\n\r\n\t// @section Geolocation methods\r\n\t// @method locate(options?: Locate options): this\r\n\t// Tries to locate the user using the Geolocation API, firing a [`locationfound`](#map-locationfound)\r\n\t// event with location data on success or a [`locationerror`](#map-locationerror) event on failure,\r\n\t// and optionally sets the map view to the user's location with respect to\r\n\t// detection accuracy (or to the world view if geolocation failed).\r\n\t// Note that, if your page doesn't use HTTPS, this method will fail in\r\n\t// modern browsers ([Chrome 50 and newer](https://sites.google.com/a/chromium.org/dev/Home/chromium-security/deprecating-powerful-features-on-insecure-origins))\r\n\t// See `Locate options` for more details.\r\n\tlocate: function (options) {\r\n\r\n\t\toptions = this._locateOptions = Util.extend({\r\n\t\t\ttimeout: 10000,\r\n\t\t\twatch: false\r\n\t\t\t// setView: false\r\n\t\t\t// maxZoom: <Number>\r\n\t\t\t// maximumAge: 0\r\n\t\t\t// enableHighAccuracy: false\r\n\t\t}, options);\r\n\r\n\t\tif (!('geolocation' in navigator)) {\r\n\t\t\tthis._handleGeolocationError({\r\n\t\t\t\tcode: 0,\r\n\t\t\t\tmessage: 'Geolocation not supported.'\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar onResponse = Util.bind(this._handleGeolocationResponse, this),\r\n\t\t    onError = Util.bind(this._handleGeolocationError, this);\r\n\r\n\t\tif (options.watch) {\r\n\t\t\tthis._locationWatchId =\r\n\t\t\t        navigator.geolocation.watchPosition(onResponse, onError, options);\r\n\t\t} else {\r\n\t\t\tnavigator.geolocation.getCurrentPosition(onResponse, onError, options);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method stopLocate(): this\r\n\t// Stops watching location previously initiated by `map.locate({watch: true})`\r\n\t// and aborts resetting the map view if map.locate was called with\r\n\t// `{setView: true}`.\r\n\tstopLocate: function () {\r\n\t\tif (navigator.geolocation && navigator.geolocation.clearWatch) {\r\n\t\t\tnavigator.geolocation.clearWatch(this._locationWatchId);\r\n\t\t}\r\n\t\tif (this._locateOptions) {\r\n\t\t\tthis._locateOptions.setView = false;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_handleGeolocationError: function (error) {\r\n\t\tif (!this._container._leaflet_id) { return; }\r\n\r\n\t\tvar c = error.code,\r\n\t\t    message = error.message ||\r\n\t\t            (c === 1 ? 'permission denied' :\r\n\t\t            (c === 2 ? 'position unavailable' : 'timeout'));\r\n\r\n\t\tif (this._locateOptions.setView && !this._loaded) {\r\n\t\t\tthis.fitWorld();\r\n\t\t}\r\n\r\n\t\t// @section Location events\r\n\t\t// @event locationerror: ErrorEvent\r\n\t\t// Fired when geolocation (using the [`locate`](#map-locate) method) failed.\r\n\t\tthis.fire('locationerror', {\r\n\t\t\tcode: c,\r\n\t\t\tmessage: 'Geolocation error: ' + message + '.'\r\n\t\t});\r\n\t},\r\n\r\n\t_handleGeolocationResponse: function (pos) {\r\n\t\tif (!this._container._leaflet_id) { return; }\r\n\r\n\t\tvar lat = pos.coords.latitude,\r\n\t\t    lng = pos.coords.longitude,\r\n\t\t    latlng = new LatLng(lat, lng),\r\n\t\t    bounds = latlng.toBounds(pos.coords.accuracy * 2),\r\n\t\t    options = this._locateOptions;\r\n\r\n\t\tif (options.setView) {\r\n\t\t\tvar zoom = this.getBoundsZoom(bounds);\r\n\t\t\tthis.setView(latlng, options.maxZoom ? Math.min(zoom, options.maxZoom) : zoom);\r\n\t\t}\r\n\r\n\t\tvar data = {\r\n\t\t\tlatlng: latlng,\r\n\t\t\tbounds: bounds,\r\n\t\t\ttimestamp: pos.timestamp\r\n\t\t};\r\n\r\n\t\tfor (var i in pos.coords) {\r\n\t\t\tif (typeof pos.coords[i] === 'number') {\r\n\t\t\t\tdata[i] = pos.coords[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// @event locationfound: LocationEvent\r\n\t\t// Fired when geolocation (using the [`locate`](#map-locate) method)\r\n\t\t// went successfully.\r\n\t\tthis.fire('locationfound', data);\r\n\t},\r\n\r\n\t// TODO Appropriate docs section?\r\n\t// @section Other Methods\r\n\t// @method addHandler(name: String, HandlerClass: Function): this\r\n\t// Adds a new `Handler` to the map, given its name and constructor function.\r\n\taddHandler: function (name, HandlerClass) {\r\n\t\tif (!HandlerClass) { return this; }\r\n\r\n\t\tvar handler = this[name] = new HandlerClass(this);\r\n\r\n\t\tthis._handlers.push(handler);\r\n\r\n\t\tif (this.options[name]) {\r\n\t\t\thandler.enable();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method remove(): this\r\n\t// Destroys the map and clears all related event listeners.\r\n\tremove: function () {\r\n\r\n\t\tthis._initEvents(true);\r\n\t\tif (this.options.maxBounds) { this.off('moveend', this._panInsideMaxBounds); }\r\n\r\n\t\tif (this._containerId !== this._container._leaflet_id) {\r\n\t\t\tthrow new Error('Map container is being reused by another instance');\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\t// throws error in IE6-8\r\n\t\t\tdelete this._container._leaflet_id;\r\n\t\t\tdelete this._containerId;\r\n\t\t} catch (e) {\r\n\t\t\t/*eslint-disable */\r\n\t\t\tthis._container._leaflet_id = undefined;\r\n\t\t\t/* eslint-enable */\r\n\t\t\tthis._containerId = undefined;\r\n\t\t}\r\n\r\n\t\tif (this._locationWatchId !== undefined) {\r\n\t\t\tthis.stopLocate();\r\n\t\t}\r\n\r\n\t\tthis._stop();\r\n\r\n\t\tDomUtil.remove(this._mapPane);\r\n\r\n\t\tif (this._clearControlPos) {\r\n\t\t\tthis._clearControlPos();\r\n\t\t}\r\n\t\tif (this._resizeRequest) {\r\n\t\t\tUtil.cancelAnimFrame(this._resizeRequest);\r\n\t\t\tthis._resizeRequest = null;\r\n\t\t}\r\n\r\n\t\tthis._clearHandlers();\r\n\r\n\t\tif (this._loaded) {\r\n\t\t\t// @section Map state change events\r\n\t\t\t// @event unload: Event\r\n\t\t\t// Fired when the map is destroyed with [remove](#map-remove) method.\r\n\t\t\tthis.fire('unload');\r\n\t\t}\r\n\r\n\t\tvar i;\r\n\t\tfor (i in this._layers) {\r\n\t\t\tthis._layers[i].remove();\r\n\t\t}\r\n\t\tfor (i in this._panes) {\r\n\t\t\tDomUtil.remove(this._panes[i]);\r\n\t\t}\r\n\r\n\t\tthis._layers = [];\r\n\t\tthis._panes = [];\r\n\t\tdelete this._mapPane;\r\n\t\tdelete this._renderer;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @section Other Methods\r\n\t// @method createPane(name: String, container?: HTMLElement): HTMLElement\r\n\t// Creates a new [map pane](#map-pane) with the given name if it doesn't exist already,\r\n\t// then returns it. The pane is created as a child of `container`, or\r\n\t// as a child of the main map pane if not set.\r\n\tcreatePane: function (name, container) {\r\n\t\tvar className = 'leaflet-pane' + (name ? ' leaflet-' + name.replace('Pane', '') + '-pane' : ''),\r\n\t\t    pane = DomUtil.create('div', className, container || this._mapPane);\r\n\r\n\t\tif (name) {\r\n\t\t\tthis._panes[name] = pane;\r\n\t\t}\r\n\t\treturn pane;\r\n\t},\r\n\r\n\t// @section Methods for Getting Map State\r\n\r\n\t// @method getCenter(): LatLng\r\n\t// Returns the geographical center of the map view\r\n\tgetCenter: function () {\r\n\t\tthis._checkIfLoaded();\r\n\r\n\t\tif (this._lastCenter && !this._moved()) {\r\n\t\t\treturn this._lastCenter.clone();\r\n\t\t}\r\n\t\treturn this.layerPointToLatLng(this._getCenterLayerPoint());\r\n\t},\r\n\r\n\t// @method getZoom(): Number\r\n\t// Returns the current zoom level of the map view\r\n\tgetZoom: function () {\r\n\t\treturn this._zoom;\r\n\t},\r\n\r\n\t// @method getBounds(): LatLngBounds\r\n\t// Returns the geographical bounds visible in the current map view\r\n\tgetBounds: function () {\r\n\t\tvar bounds = this.getPixelBounds(),\r\n\t\t    sw = this.unproject(bounds.getBottomLeft()),\r\n\t\t    ne = this.unproject(bounds.getTopRight());\r\n\r\n\t\treturn new LatLngBounds(sw, ne);\r\n\t},\r\n\r\n\t// @method getMinZoom(): Number\r\n\t// Returns the minimum zoom level of the map (if set in the `minZoom` option of the map or of any layers), or `0` by default.\r\n\tgetMinZoom: function () {\r\n\t\treturn this.options.minZoom === undefined ? this._layersMinZoom || 0 : this.options.minZoom;\r\n\t},\r\n\r\n\t// @method getMaxZoom(): Number\r\n\t// Returns the maximum zoom level of the map (if set in the `maxZoom` option of the map or of any layers).\r\n\tgetMaxZoom: function () {\r\n\t\treturn this.options.maxZoom === undefined ?\r\n\t\t\t(this._layersMaxZoom === undefined ? Infinity : this._layersMaxZoom) :\r\n\t\t\tthis.options.maxZoom;\r\n\t},\r\n\r\n\t// @method getBoundsZoom(bounds: LatLngBounds, inside?: Boolean, padding?: Point): Number\r\n\t// Returns the maximum zoom level on which the given bounds fit to the map\r\n\t// view in its entirety. If `inside` (optional) is set to `true`, the method\r\n\t// instead returns the minimum zoom level on which the map view fits into\r\n\t// the given bounds in its entirety.\r\n\tgetBoundsZoom: function (bounds, inside, padding) { // (LatLngBounds[, Boolean, Point]) -> Number\r\n\t\tbounds = toLatLngBounds(bounds);\r\n\t\tpadding = toPoint(padding || [0, 0]);\r\n\r\n\t\tvar zoom = this.getZoom() || 0,\r\n\t\t    min = this.getMinZoom(),\r\n\t\t    max = this.getMaxZoom(),\r\n\t\t    nw = bounds.getNorthWest(),\r\n\t\t    se = bounds.getSouthEast(),\r\n\t\t    size = this.getSize().subtract(padding),\r\n\t\t    boundsSize = toBounds(this.project(se, zoom), this.project(nw, zoom)).getSize(),\r\n\t\t    snap = Browser.any3d ? this.options.zoomSnap : 1,\r\n\t\t    scalex = size.x / boundsSize.x,\r\n\t\t    scaley = size.y / boundsSize.y,\r\n\t\t    scale = inside ? Math.max(scalex, scaley) : Math.min(scalex, scaley);\r\n\r\n\t\tzoom = this.getScaleZoom(scale, zoom);\r\n\r\n\t\tif (snap) {\r\n\t\t\tzoom = Math.round(zoom / (snap / 100)) * (snap / 100); // don't jump if within 1% of a snap level\r\n\t\t\tzoom = inside ? Math.ceil(zoom / snap) * snap : Math.floor(zoom / snap) * snap;\r\n\t\t}\r\n\r\n\t\treturn Math.max(min, Math.min(max, zoom));\r\n\t},\r\n\r\n\t// @method getSize(): Point\r\n\t// Returns the current size of the map container (in pixels).\r\n\tgetSize: function () {\r\n\t\tif (!this._size || this._sizeChanged) {\r\n\t\t\tthis._size = new Point(\r\n\t\t\t\tthis._container.clientWidth || 0,\r\n\t\t\t\tthis._container.clientHeight || 0);\r\n\r\n\t\t\tthis._sizeChanged = false;\r\n\t\t}\r\n\t\treturn this._size.clone();\r\n\t},\r\n\r\n\t// @method getPixelBounds(): Bounds\r\n\t// Returns the bounds of the current map view in projected pixel\r\n\t// coordinates (sometimes useful in layer and overlay implementations).\r\n\tgetPixelBounds: function (center, zoom) {\r\n\t\tvar topLeftPoint = this._getTopLeftPoint(center, zoom);\r\n\t\treturn new Bounds(topLeftPoint, topLeftPoint.add(this.getSize()));\r\n\t},\r\n\r\n\t// TODO: Check semantics - isn't the pixel origin the 0,0 coord relative to\r\n\t// the map pane? \"left point of the map layer\" can be confusing, specially\r\n\t// since there can be negative offsets.\r\n\t// @method getPixelOrigin(): Point\r\n\t// Returns the projected pixel coordinates of the top left point of\r\n\t// the map layer (useful in custom layer and overlay implementations).\r\n\tgetPixelOrigin: function () {\r\n\t\tthis._checkIfLoaded();\r\n\t\treturn this._pixelOrigin;\r\n\t},\r\n\r\n\t// @method getPixelWorldBounds(zoom?: Number): Bounds\r\n\t// Returns the world's bounds in pixel coordinates for zoom level `zoom`.\r\n\t// If `zoom` is omitted, the map's current zoom level is used.\r\n\tgetPixelWorldBounds: function (zoom) {\r\n\t\treturn this.options.crs.getProjectedBounds(zoom === undefined ? this.getZoom() : zoom);\r\n\t},\r\n\r\n\t// @section Other Methods\r\n\r\n\t// @method getPane(pane: String|HTMLElement): HTMLElement\r\n\t// Returns a [map pane](#map-pane), given its name or its HTML element (its identity).\r\n\tgetPane: function (pane) {\r\n\t\treturn typeof pane === 'string' ? this._panes[pane] : pane;\r\n\t},\r\n\r\n\t// @method getPanes(): Object\r\n\t// Returns a plain object containing the names of all [panes](#map-pane) as keys and\r\n\t// the panes as values.\r\n\tgetPanes: function () {\r\n\t\treturn this._panes;\r\n\t},\r\n\r\n\t// @method getContainer: HTMLElement\r\n\t// Returns the HTML element that contains the map.\r\n\tgetContainer: function () {\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\r\n\t// @section Conversion Methods\r\n\r\n\t// @method getZoomScale(toZoom: Number, fromZoom: Number): Number\r\n\t// Returns the scale factor to be applied to a map transition from zoom level\r\n\t// `fromZoom` to `toZoom`. Used internally to help with zoom animations.\r\n\tgetZoomScale: function (toZoom, fromZoom) {\r\n\t\t// TODO replace with universal implementation after refactoring projections\r\n\t\tvar crs = this.options.crs;\r\n\t\tfromZoom = fromZoom === undefined ? this._zoom : fromZoom;\r\n\t\treturn crs.scale(toZoom) / crs.scale(fromZoom);\r\n\t},\r\n\r\n\t// @method getScaleZoom(scale: Number, fromZoom: Number): Number\r\n\t// Returns the zoom level that the map would end up at, if it is at `fromZoom`\r\n\t// level and everything is scaled by a factor of `scale`. Inverse of\r\n\t// [`getZoomScale`](#map-getZoomScale).\r\n\tgetScaleZoom: function (scale, fromZoom) {\r\n\t\tvar crs = this.options.crs;\r\n\t\tfromZoom = fromZoom === undefined ? this._zoom : fromZoom;\r\n\t\tvar zoom = crs.zoom(scale * crs.scale(fromZoom));\r\n\t\treturn isNaN(zoom) ? Infinity : zoom;\r\n\t},\r\n\r\n\t// @method project(latlng: LatLng, zoom: Number): Point\r\n\t// Projects a geographical coordinate `LatLng` according to the projection\r\n\t// of the map's CRS, then scales it according to `zoom` and the CRS's\r\n\t// `Transformation`. The result is pixel coordinate relative to\r\n\t// the CRS origin.\r\n\tproject: function (latlng, zoom) {\r\n\t\tzoom = zoom === undefined ? this._zoom : zoom;\r\n\t\treturn this.options.crs.latLngToPoint(toLatLng(latlng), zoom);\r\n\t},\r\n\r\n\t// @method unproject(point: Point, zoom: Number): LatLng\r\n\t// Inverse of [`project`](#map-project).\r\n\tunproject: function (point, zoom) {\r\n\t\tzoom = zoom === undefined ? this._zoom : zoom;\r\n\t\treturn this.options.crs.pointToLatLng(toPoint(point), zoom);\r\n\t},\r\n\r\n\t// @method layerPointToLatLng(point: Point): LatLng\r\n\t// Given a pixel coordinate relative to the [origin pixel](#map-getpixelorigin),\r\n\t// returns the corresponding geographical coordinate (for the current zoom level).\r\n\tlayerPointToLatLng: function (point) {\r\n\t\tvar projectedPoint = toPoint(point).add(this.getPixelOrigin());\r\n\t\treturn this.unproject(projectedPoint);\r\n\t},\r\n\r\n\t// @method latLngToLayerPoint(latlng: LatLng): Point\r\n\t// Given a geographical coordinate, returns the corresponding pixel coordinate\r\n\t// relative to the [origin pixel](#map-getpixelorigin).\r\n\tlatLngToLayerPoint: function (latlng) {\r\n\t\tvar projectedPoint = this.project(toLatLng(latlng))._round();\r\n\t\treturn projectedPoint._subtract(this.getPixelOrigin());\r\n\t},\r\n\r\n\t// @method wrapLatLng(latlng: LatLng): LatLng\r\n\t// Returns a `LatLng` where `lat` and `lng` has been wrapped according to the\r\n\t// map's CRS's `wrapLat` and `wrapLng` properties, if they are outside the\r\n\t// CRS's bounds.\r\n\t// By default this means longitude is wrapped around the dateline so its\r\n\t// value is between -180 and +180 degrees.\r\n\twrapLatLng: function (latlng) {\r\n\t\treturn this.options.crs.wrapLatLng(toLatLng(latlng));\r\n\t},\r\n\r\n\t// @method wrapLatLngBounds(bounds: LatLngBounds): LatLngBounds\r\n\t// Returns a `LatLngBounds` with the same size as the given one, ensuring that\r\n\t// its center is within the CRS's bounds.\r\n\t// By default this means the center longitude is wrapped around the dateline so its\r\n\t// value is between -180 and +180 degrees, and the majority of the bounds\r\n\t// overlaps the CRS's bounds.\r\n\twrapLatLngBounds: function (latlng) {\r\n\t\treturn this.options.crs.wrapLatLngBounds(toLatLngBounds(latlng));\r\n\t},\r\n\r\n\t// @method distance(latlng1: LatLng, latlng2: LatLng): Number\r\n\t// Returns the distance between two geographical coordinates according to\r\n\t// the map's CRS. By default this measures distance in meters.\r\n\tdistance: function (latlng1, latlng2) {\r\n\t\treturn this.options.crs.distance(toLatLng(latlng1), toLatLng(latlng2));\r\n\t},\r\n\r\n\t// @method containerPointToLayerPoint(point: Point): Point\r\n\t// Given a pixel coordinate relative to the map container, returns the corresponding\r\n\t// pixel coordinate relative to the [origin pixel](#map-getpixelorigin).\r\n\tcontainerPointToLayerPoint: function (point) { // (Point)\r\n\t\treturn toPoint(point).subtract(this._getMapPanePos());\r\n\t},\r\n\r\n\t// @method layerPointToContainerPoint(point: Point): Point\r\n\t// Given a pixel coordinate relative to the [origin pixel](#map-getpixelorigin),\r\n\t// returns the corresponding pixel coordinate relative to the map container.\r\n\tlayerPointToContainerPoint: function (point) { // (Point)\r\n\t\treturn toPoint(point).add(this._getMapPanePos());\r\n\t},\r\n\r\n\t// @method containerPointToLatLng(point: Point): LatLng\r\n\t// Given a pixel coordinate relative to the map container, returns\r\n\t// the corresponding geographical coordinate (for the current zoom level).\r\n\tcontainerPointToLatLng: function (point) {\r\n\t\tvar layerPoint = this.containerPointToLayerPoint(toPoint(point));\r\n\t\treturn this.layerPointToLatLng(layerPoint);\r\n\t},\r\n\r\n\t// @method latLngToContainerPoint(latlng: LatLng): Point\r\n\t// Given a geographical coordinate, returns the corresponding pixel coordinate\r\n\t// relative to the map container.\r\n\tlatLngToContainerPoint: function (latlng) {\r\n\t\treturn this.layerPointToContainerPoint(this.latLngToLayerPoint(toLatLng(latlng)));\r\n\t},\r\n\r\n\t// @method mouseEventToContainerPoint(ev: MouseEvent): Point\r\n\t// Given a MouseEvent object, returns the pixel coordinate relative to the\r\n\t// map container where the event took place.\r\n\tmouseEventToContainerPoint: function (e) {\r\n\t\treturn DomEvent.getMousePosition(e, this._container);\r\n\t},\r\n\r\n\t// @method mouseEventToLayerPoint(ev: MouseEvent): Point\r\n\t// Given a MouseEvent object, returns the pixel coordinate relative to\r\n\t// the [origin pixel](#map-getpixelorigin) where the event took place.\r\n\tmouseEventToLayerPoint: function (e) {\r\n\t\treturn this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e));\r\n\t},\r\n\r\n\t// @method mouseEventToLatLng(ev: MouseEvent): LatLng\r\n\t// Given a MouseEvent object, returns geographical coordinate where the\r\n\t// event took place.\r\n\tmouseEventToLatLng: function (e) { // (MouseEvent)\r\n\t\treturn this.layerPointToLatLng(this.mouseEventToLayerPoint(e));\r\n\t},\r\n\r\n\r\n\t// map initialization methods\r\n\r\n\t_initContainer: function (id) {\r\n\t\tvar container = this._container = DomUtil.get(id);\r\n\r\n\t\tif (!container) {\r\n\t\t\tthrow new Error('Map container not found.');\r\n\t\t} else if (container._leaflet_id) {\r\n\t\t\tthrow new Error('Map container is already initialized.');\r\n\t\t}\r\n\r\n\t\tDomEvent.on(container, 'scroll', this._onScroll, this);\r\n\t\tthis._containerId = Util.stamp(container);\r\n\t},\r\n\r\n\t_initLayout: function () {\r\n\t\tvar container = this._container;\r\n\r\n\t\tthis._fadeAnimated = this.options.fadeAnimation && Browser.any3d;\r\n\r\n\t\tDomUtil.addClass(container, 'leaflet-container' +\r\n\t\t\t(Browser.touch ? ' leaflet-touch' : '') +\r\n\t\t\t(Browser.retina ? ' leaflet-retina' : '') +\r\n\t\t\t(Browser.ielt9 ? ' leaflet-oldie' : '') +\r\n\t\t\t(Browser.safari ? ' leaflet-safari' : '') +\r\n\t\t\t(this._fadeAnimated ? ' leaflet-fade-anim' : ''));\r\n\r\n\t\tvar position = DomUtil.getStyle(container, 'position');\r\n\r\n\t\tif (position !== 'absolute' && position !== 'relative' && position !== 'fixed' && position !== 'sticky') {\r\n\t\t\tcontainer.style.position = 'relative';\r\n\t\t}\r\n\r\n\t\tthis._initPanes();\r\n\r\n\t\tif (this._initControlPos) {\r\n\t\t\tthis._initControlPos();\r\n\t\t}\r\n\t},\r\n\r\n\t_initPanes: function () {\r\n\t\tvar panes = this._panes = {};\r\n\t\tthis._paneRenderers = {};\r\n\r\n\t\t// @section\r\n\t\t//\r\n\t\t// Panes are DOM elements used to control the ordering of layers on the map. You\r\n\t\t// can access panes with [`map.getPane`](#map-getpane) or\r\n\t\t// [`map.getPanes`](#map-getpanes) methods. New panes can be created with the\r\n\t\t// [`map.createPane`](#map-createpane) method.\r\n\t\t//\r\n\t\t// Every map has the following default panes that differ only in zIndex.\r\n\t\t//\r\n\t\t// @pane mapPane: HTMLElement = 'auto'\r\n\t\t// Pane that contains all other map panes\r\n\r\n\t\tthis._mapPane = this.createPane('mapPane', this._container);\r\n\t\tDomUtil.setPosition(this._mapPane, new Point(0, 0));\r\n\r\n\t\t// @pane tilePane: HTMLElement = 200\r\n\t\t// Pane for `GridLayer`s and `TileLayer`s\r\n\t\tthis.createPane('tilePane');\r\n\t\t// @pane overlayPane: HTMLElement = 400\r\n\t\t// Pane for vectors (`Path`s, like `Polyline`s and `Polygon`s), `ImageOverlay`s and `VideoOverlay`s\r\n\t\tthis.createPane('overlayPane');\r\n\t\t// @pane shadowPane: HTMLElement = 500\r\n\t\t// Pane for overlay shadows (e.g. `Marker` shadows)\r\n\t\tthis.createPane('shadowPane');\r\n\t\t// @pane markerPane: HTMLElement = 600\r\n\t\t// Pane for `Icon`s of `Marker`s\r\n\t\tthis.createPane('markerPane');\r\n\t\t// @pane tooltipPane: HTMLElement = 650\r\n\t\t// Pane for `Tooltip`s.\r\n\t\tthis.createPane('tooltipPane');\r\n\t\t// @pane popupPane: HTMLElement = 700\r\n\t\t// Pane for `Popup`s.\r\n\t\tthis.createPane('popupPane');\r\n\r\n\t\tif (!this.options.markerZoomAnimation) {\r\n\t\t\tDomUtil.addClass(panes.markerPane, 'leaflet-zoom-hide');\r\n\t\t\tDomUtil.addClass(panes.shadowPane, 'leaflet-zoom-hide');\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// private methods that modify map state\r\n\r\n\t// @section Map state change events\r\n\t_resetView: function (center, zoom, noMoveStart) {\r\n\t\tDomUtil.setPosition(this._mapPane, new Point(0, 0));\r\n\r\n\t\tvar loading = !this._loaded;\r\n\t\tthis._loaded = true;\r\n\t\tzoom = this._limitZoom(zoom);\r\n\r\n\t\tthis.fire('viewprereset');\r\n\r\n\t\tvar zoomChanged = this._zoom !== zoom;\r\n\t\tthis\r\n\t\t\t._moveStart(zoomChanged, noMoveStart)\r\n\t\t\t._move(center, zoom)\r\n\t\t\t._moveEnd(zoomChanged);\r\n\r\n\t\t// @event viewreset: Event\r\n\t\t// Fired when the map needs to redraw its content (this usually happens\r\n\t\t// on map zoom or load). Very useful for creating custom overlays.\r\n\t\tthis.fire('viewreset');\r\n\r\n\t\t// @event load: Event\r\n\t\t// Fired when the map is initialized (when its center and zoom are set\r\n\t\t// for the first time).\r\n\t\tif (loading) {\r\n\t\t\tthis.fire('load');\r\n\t\t}\r\n\t},\r\n\r\n\t_moveStart: function (zoomChanged, noMoveStart) {\r\n\t\t// @event zoomstart: Event\r\n\t\t// Fired when the map zoom is about to change (e.g. before zoom animation).\r\n\t\t// @event movestart: Event\r\n\t\t// Fired when the view of the map starts changing (e.g. user starts dragging the map).\r\n\t\tif (zoomChanged) {\r\n\t\t\tthis.fire('zoomstart');\r\n\t\t}\r\n\t\tif (!noMoveStart) {\r\n\t\t\tthis.fire('movestart');\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_move: function (center, zoom, data, supressEvent) {\r\n\t\tif (zoom === undefined) {\r\n\t\t\tzoom = this._zoom;\r\n\t\t}\r\n\t\tvar zoomChanged = this._zoom !== zoom;\r\n\r\n\t\tthis._zoom = zoom;\r\n\t\tthis._lastCenter = center;\r\n\t\tthis._pixelOrigin = this._getNewPixelOrigin(center);\r\n\r\n\t\tif (!supressEvent) {\r\n\t\t\t// @event zoom: Event\r\n\t\t\t// Fired repeatedly during any change in zoom level,\r\n\t\t\t// including zoom and fly animations.\r\n\t\t\tif (zoomChanged || (data && data.pinch)) {\t// Always fire 'zoom' if pinching because #3530\r\n\t\t\t\tthis.fire('zoom', data);\r\n\t\t\t}\r\n\r\n\t\t\t// @event move: Event\r\n\t\t\t// Fired repeatedly during any movement of the map,\r\n\t\t\t// including pan and fly animations.\r\n\t\t\tthis.fire('move', data);\r\n\t\t} else if (data && data.pinch) {\t// Always fire 'zoom' if pinching because #3530\r\n\t\t\tthis.fire('zoom', data);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_moveEnd: function (zoomChanged) {\r\n\t\t// @event zoomend: Event\r\n\t\t// Fired when the map zoom changed, after any animations.\r\n\t\tif (zoomChanged) {\r\n\t\t\tthis.fire('zoomend');\r\n\t\t}\r\n\r\n\t\t// @event moveend: Event\r\n\t\t// Fired when the center of the map stops changing\r\n\t\t// (e.g. user stopped dragging the map or after non-centered zoom).\r\n\t\treturn this.fire('moveend');\r\n\t},\r\n\r\n\t_stop: function () {\r\n\t\tUtil.cancelAnimFrame(this._flyToFrame);\r\n\t\tif (this._panAnim) {\r\n\t\t\tthis._panAnim.stop();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_rawPanBy: function (offset) {\r\n\t\tDomUtil.setPosition(this._mapPane, this._getMapPanePos().subtract(offset));\r\n\t},\r\n\r\n\t_getZoomSpan: function () {\r\n\t\treturn this.getMaxZoom() - this.getMinZoom();\r\n\t},\r\n\r\n\t_panInsideMaxBounds: function () {\r\n\t\tif (!this._enforcingBounds) {\r\n\t\t\tthis.panInsideBounds(this.options.maxBounds);\r\n\t\t}\r\n\t},\r\n\r\n\t_checkIfLoaded: function () {\r\n\t\tif (!this._loaded) {\r\n\t\t\tthrow new Error('Set map center and zoom first.');\r\n\t\t}\r\n\t},\r\n\r\n\t// DOM event handling\r\n\r\n\t// @section Interaction events\r\n\t_initEvents: function (remove) {\r\n\t\tthis._targets = {};\r\n\t\tthis._targets[Util.stamp(this._container)] = this;\r\n\r\n\t\tvar onOff = remove ? DomEvent.off : DomEvent.on;\r\n\r\n\t\t// @event click: MouseEvent\r\n\t\t// Fired when the user clicks (or taps) the map.\r\n\t\t// @event dblclick: MouseEvent\r\n\t\t// Fired when the user double-clicks (or double-taps) the map.\r\n\t\t// @event mousedown: MouseEvent\r\n\t\t// Fired when the user pushes the mouse button on the map.\r\n\t\t// @event mouseup: MouseEvent\r\n\t\t// Fired when the user releases the mouse button on the map.\r\n\t\t// @event mouseover: MouseEvent\r\n\t\t// Fired when the mouse enters the map.\r\n\t\t// @event mouseout: MouseEvent\r\n\t\t// Fired when the mouse leaves the map.\r\n\t\t// @event mousemove: MouseEvent\r\n\t\t// Fired while the mouse moves over the map.\r\n\t\t// @event contextmenu: MouseEvent\r\n\t\t// Fired when the user pushes the right mouse button on the map, prevents\r\n\t\t// default browser context menu from showing if there are listeners on\r\n\t\t// this event. Also fired on mobile when the user holds a single touch\r\n\t\t// for a second (also called long press).\r\n\t\t// @event keypress: KeyboardEvent\r\n\t\t// Fired when the user presses a key from the keyboard that produces a character value while the map is focused.\r\n\t\t// @event keydown: KeyboardEvent\r\n\t\t// Fired when the user presses a key from the keyboard while the map is focused. Unlike the `keypress` event,\r\n\t\t// the `keydown` event is fired for keys that produce a character value and for keys\r\n\t\t// that do not produce a character value.\r\n\t\t// @event keyup: KeyboardEvent\r\n\t\t// Fired when the user releases a key from the keyboard while the map is focused.\r\n\t\tonOff(this._container, 'click dblclick mousedown mouseup ' +\r\n\t\t\t'mouseover mouseout mousemove contextmenu keypress keydown keyup', this._handleDOMEvent, this);\r\n\r\n\t\tif (this.options.trackResize) {\r\n\t\t\tonOff(window, 'resize', this._onResize, this);\r\n\t\t}\r\n\r\n\t\tif (Browser.any3d && this.options.transform3DLimit) {\r\n\t\t\t(remove ? this.off : this.on).call(this, 'moveend', this._onMoveEnd);\r\n\t\t}\r\n\t},\r\n\r\n\t_onResize: function () {\r\n\t\tUtil.cancelAnimFrame(this._resizeRequest);\r\n\t\tthis._resizeRequest = Util.requestAnimFrame(\r\n\t\t        function () { this.invalidateSize({debounceMoveend: true}); }, this);\r\n\t},\r\n\r\n\t_onScroll: function () {\r\n\t\tthis._container.scrollTop  = 0;\r\n\t\tthis._container.scrollLeft = 0;\r\n\t},\r\n\r\n\t_onMoveEnd: function () {\r\n\t\tvar pos = this._getMapPanePos();\r\n\t\tif (Math.max(Math.abs(pos.x), Math.abs(pos.y)) >= this.options.transform3DLimit) {\r\n\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1203873 but Webkit also have\r\n\t\t\t// a pixel offset on very high values, see: https://jsfiddle.net/dg6r5hhb/\r\n\t\t\tthis._resetView(this.getCenter(), this.getZoom());\r\n\t\t}\r\n\t},\r\n\r\n\t_findEventTargets: function (e, type) {\r\n\t\tvar targets = [],\r\n\t\t    target,\r\n\t\t    isHover = type === 'mouseout' || type === 'mouseover',\r\n\t\t    src = e.target || e.srcElement,\r\n\t\t    dragging = false;\r\n\r\n\t\twhile (src) {\r\n\t\t\ttarget = this._targets[Util.stamp(src)];\r\n\t\t\tif (target && (type === 'click' || type === 'preclick') && this._draggableMoved(target)) {\r\n\t\t\t\t// Prevent firing click after you just dragged an object.\r\n\t\t\t\tdragging = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (target && target.listens(type, true)) {\r\n\t\t\t\tif (isHover && !DomEvent.isExternalTarget(src, e)) { break; }\r\n\t\t\t\ttargets.push(target);\r\n\t\t\t\tif (isHover) { break; }\r\n\t\t\t}\r\n\t\t\tif (src === this._container) { break; }\r\n\t\t\tsrc = src.parentNode;\r\n\t\t}\r\n\t\tif (!targets.length && !dragging && !isHover && this.listens(type, true)) {\r\n\t\t\ttargets = [this];\r\n\t\t}\r\n\t\treturn targets;\r\n\t},\r\n\r\n\t_isClickDisabled: function (el) {\r\n\t\twhile (el && el !== this._container) {\r\n\t\t\tif (el['_leaflet_disable_click']) { return true; }\r\n\t\t\tel = el.parentNode;\r\n\t\t}\r\n\t},\r\n\r\n\t_handleDOMEvent: function (e) {\r\n\t\tvar el = (e.target || e.srcElement);\r\n\t\tif (!this._loaded || el['_leaflet_disable_events'] || e.type === 'click' && this._isClickDisabled(el)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar type = e.type;\r\n\r\n\t\tif (type === 'mousedown') {\r\n\t\t\t// prevents outline when clicking on keyboard-focusable element\r\n\t\t\tDomUtil.preventOutline(el);\r\n\t\t}\r\n\r\n\t\tthis._fireDOMEvent(e, type);\r\n\t},\r\n\r\n\t_mouseEvents: ['click', 'dblclick', 'mouseover', 'mouseout', 'contextmenu'],\r\n\r\n\t_fireDOMEvent: function (e, type, canvasTargets) {\r\n\r\n\t\tif (e.type === 'click') {\r\n\t\t\t// Fire a synthetic 'preclick' event which propagates up (mainly for closing popups).\r\n\t\t\t// @event preclick: MouseEvent\r\n\t\t\t// Fired before mouse click on the map (sometimes useful when you\r\n\t\t\t// want something to happen on click before any existing click\r\n\t\t\t// handlers start running).\r\n\t\t\tvar synth = Util.extend({}, e);\r\n\t\t\tsynth.type = 'preclick';\r\n\t\t\tthis._fireDOMEvent(synth, synth.type, canvasTargets);\r\n\t\t}\r\n\r\n\t\t// Find the layer the event is propagating from and its parents.\r\n\t\tvar targets = this._findEventTargets(e, type);\r\n\r\n\t\tif (canvasTargets) {\r\n\t\t\tvar filtered = []; // pick only targets with listeners\r\n\t\t\tfor (var i = 0; i < canvasTargets.length; i++) {\r\n\t\t\t\tif (canvasTargets[i].listens(type, true)) {\r\n\t\t\t\t\tfiltered.push(canvasTargets[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttargets = filtered.concat(targets);\r\n\t\t}\r\n\r\n\t\tif (!targets.length) { return; }\r\n\r\n\t\tif (type === 'contextmenu') {\r\n\t\t\tDomEvent.preventDefault(e);\r\n\t\t}\r\n\r\n\t\tvar target = targets[0];\r\n\t\tvar data = {\r\n\t\t\toriginalEvent: e\r\n\t\t};\r\n\r\n\t\tif (e.type !== 'keypress' && e.type !== 'keydown' && e.type !== 'keyup') {\r\n\t\t\tvar isMarker = target.getLatLng && (!target._radius || target._radius <= 10);\r\n\t\t\tdata.containerPoint = isMarker ?\r\n\t\t\t\tthis.latLngToContainerPoint(target.getLatLng()) : this.mouseEventToContainerPoint(e);\r\n\t\t\tdata.layerPoint = this.containerPointToLayerPoint(data.containerPoint);\r\n\t\t\tdata.latlng = isMarker ? target.getLatLng() : this.layerPointToLatLng(data.layerPoint);\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < targets.length; i++) {\r\n\t\t\ttargets[i].fire(type, data, true);\r\n\t\t\tif (data.originalEvent._stopped ||\r\n\t\t\t\t(targets[i].options.bubblingMouseEvents === false && Util.indexOf(this._mouseEvents, type) !== -1)) { return; }\r\n\t\t}\r\n\t},\r\n\r\n\t_draggableMoved: function (obj) {\r\n\t\tobj = obj.dragging && obj.dragging.enabled() ? obj : this;\r\n\t\treturn (obj.dragging && obj.dragging.moved()) || (this.boxZoom && this.boxZoom.moved());\r\n\t},\r\n\r\n\t_clearHandlers: function () {\r\n\t\tfor (var i = 0, len = this._handlers.length; i < len; i++) {\r\n\t\t\tthis._handlers[i].disable();\r\n\t\t}\r\n\t},\r\n\r\n\t// @section Other Methods\r\n\r\n\t// @method whenReady(fn: Function, context?: Object): this\r\n\t// Runs the given function `fn` when the map gets initialized with\r\n\t// a view (center and zoom) and at least one layer, or immediately\r\n\t// if it's already initialized, optionally passing a function context.\r\n\twhenReady: function (callback, context) {\r\n\t\tif (this._loaded) {\r\n\t\t\tcallback.call(context || this, {target: this});\r\n\t\t} else {\r\n\t\t\tthis.on('load', callback, context);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\t// private methods for getting map state\r\n\r\n\t_getMapPanePos: function () {\r\n\t\treturn DomUtil.getPosition(this._mapPane) || new Point(0, 0);\r\n\t},\r\n\r\n\t_moved: function () {\r\n\t\tvar pos = this._getMapPanePos();\r\n\t\treturn pos && !pos.equals([0, 0]);\r\n\t},\r\n\r\n\t_getTopLeftPoint: function (center, zoom) {\r\n\t\tvar pixelOrigin = center && zoom !== undefined ?\r\n\t\t\tthis._getNewPixelOrigin(center, zoom) :\r\n\t\t\tthis.getPixelOrigin();\r\n\t\treturn pixelOrigin.subtract(this._getMapPanePos());\r\n\t},\r\n\r\n\t_getNewPixelOrigin: function (center, zoom) {\r\n\t\tvar viewHalf = this.getSize()._divideBy(2);\r\n\t\treturn this.project(center, zoom)._subtract(viewHalf)._add(this._getMapPanePos())._round();\r\n\t},\r\n\r\n\t_latLngToNewLayerPoint: function (latlng, zoom, center) {\r\n\t\tvar topLeft = this._getNewPixelOrigin(center, zoom);\r\n\t\treturn this.project(latlng, zoom)._subtract(topLeft);\r\n\t},\r\n\r\n\t_latLngBoundsToNewLayerBounds: function (latLngBounds, zoom, center) {\r\n\t\tvar topLeft = this._getNewPixelOrigin(center, zoom);\r\n\t\treturn toBounds([\r\n\t\t\tthis.project(latLngBounds.getSouthWest(), zoom)._subtract(topLeft),\r\n\t\t\tthis.project(latLngBounds.getNorthWest(), zoom)._subtract(topLeft),\r\n\t\t\tthis.project(latLngBounds.getSouthEast(), zoom)._subtract(topLeft),\r\n\t\t\tthis.project(latLngBounds.getNorthEast(), zoom)._subtract(topLeft)\r\n\t\t]);\r\n\t},\r\n\r\n\t// layer point of the current center\r\n\t_getCenterLayerPoint: function () {\r\n\t\treturn this.containerPointToLayerPoint(this.getSize()._divideBy(2));\r\n\t},\r\n\r\n\t// offset of the specified place to the current center in pixels\r\n\t_getCenterOffset: function (latlng) {\r\n\t\treturn this.latLngToLayerPoint(latlng).subtract(this._getCenterLayerPoint());\r\n\t},\r\n\r\n\t// adjust center for view to get inside bounds\r\n\t_limitCenter: function (center, zoom, bounds) {\r\n\r\n\t\tif (!bounds) { return center; }\r\n\r\n\t\tvar centerPoint = this.project(center, zoom),\r\n\t\t    viewHalf = this.getSize().divideBy(2),\r\n\t\t    viewBounds = new Bounds(centerPoint.subtract(viewHalf), centerPoint.add(viewHalf)),\r\n\t\t    offset = this._getBoundsOffset(viewBounds, bounds, zoom);\r\n\r\n\t\t// If offset is less than a pixel, ignore.\r\n\t\t// This prevents unstable projections from getting into\r\n\t\t// an infinite loop of tiny offsets.\r\n\t\tif (Math.abs(offset.x) <= 1 && Math.abs(offset.y) <= 1) {\r\n\t\t\treturn center;\r\n\t\t}\r\n\r\n\t\treturn this.unproject(centerPoint.add(offset), zoom);\r\n\t},\r\n\r\n\t// adjust offset for view to get inside bounds\r\n\t_limitOffset: function (offset, bounds) {\r\n\t\tif (!bounds) { return offset; }\r\n\r\n\t\tvar viewBounds = this.getPixelBounds(),\r\n\t\t    newBounds = new Bounds(viewBounds.min.add(offset), viewBounds.max.add(offset));\r\n\r\n\t\treturn offset.add(this._getBoundsOffset(newBounds, bounds));\r\n\t},\r\n\r\n\t// returns offset needed for pxBounds to get inside maxBounds at a specified zoom\r\n\t_getBoundsOffset: function (pxBounds, maxBounds, zoom) {\r\n\t\tvar projectedMaxBounds = toBounds(\r\n\t\t        this.project(maxBounds.getNorthEast(), zoom),\r\n\t\t        this.project(maxBounds.getSouthWest(), zoom)\r\n\t\t    ),\r\n\t\t    minOffset = projectedMaxBounds.min.subtract(pxBounds.min),\r\n\t\t    maxOffset = projectedMaxBounds.max.subtract(pxBounds.max),\r\n\r\n\t\t    dx = this._rebound(minOffset.x, -maxOffset.x),\r\n\t\t    dy = this._rebound(minOffset.y, -maxOffset.y);\r\n\r\n\t\treturn new Point(dx, dy);\r\n\t},\r\n\r\n\t_rebound: function (left, right) {\r\n\t\treturn left + right > 0 ?\r\n\t\t\tMath.round(left - right) / 2 :\r\n\t\t\tMath.max(0, Math.ceil(left)) - Math.max(0, Math.floor(right));\r\n\t},\r\n\r\n\t_limitZoom: function (zoom) {\r\n\t\tvar min = this.getMinZoom(),\r\n\t\t    max = this.getMaxZoom(),\r\n\t\t    snap = Browser.any3d ? this.options.zoomSnap : 1;\r\n\t\tif (snap) {\r\n\t\t\tzoom = Math.round(zoom / snap) * snap;\r\n\t\t}\r\n\t\treturn Math.max(min, Math.min(max, zoom));\r\n\t},\r\n\r\n\t_onPanTransitionStep: function () {\r\n\t\tthis.fire('move');\r\n\t},\r\n\r\n\t_onPanTransitionEnd: function () {\r\n\t\tDomUtil.removeClass(this._mapPane, 'leaflet-pan-anim');\r\n\t\tthis.fire('moveend');\r\n\t},\r\n\r\n\t_tryAnimatedPan: function (center, options) {\r\n\t\t// difference between the new and current centers in pixels\r\n\t\tvar offset = this._getCenterOffset(center)._trunc();\r\n\r\n\t\t// don't animate too far unless animate: true specified in options\r\n\t\tif ((options && options.animate) !== true && !this.getSize().contains(offset)) { return false; }\r\n\r\n\t\tthis.panBy(offset, options);\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t_createAnimProxy: function () {\r\n\r\n\t\tvar proxy = this._proxy = DomUtil.create('div', 'leaflet-proxy leaflet-zoom-animated');\r\n\t\tthis._panes.mapPane.appendChild(proxy);\r\n\r\n\t\tthis.on('zoomanim', function (e) {\r\n\t\t\tvar prop = DomUtil.TRANSFORM,\r\n\t\t\t    transform = this._proxy.style[prop];\r\n\r\n\t\t\tDomUtil.setTransform(this._proxy, this.project(e.center, e.zoom), this.getZoomScale(e.zoom, 1));\r\n\r\n\t\t\t// workaround for case when transform is the same and so transitionend event is not fired\r\n\t\t\tif (transform === this._proxy.style[prop] && this._animatingZoom) {\r\n\t\t\t\tthis._onZoomTransitionEnd();\r\n\t\t\t}\r\n\t\t}, this);\r\n\r\n\t\tthis.on('load moveend', this._animMoveEnd, this);\r\n\r\n\t\tthis._on('unload', this._destroyAnimProxy, this);\r\n\t},\r\n\r\n\t_destroyAnimProxy: function () {\r\n\t\tDomUtil.remove(this._proxy);\r\n\t\tthis.off('load moveend', this._animMoveEnd, this);\r\n\t\tdelete this._proxy;\r\n\t},\r\n\r\n\t_animMoveEnd: function () {\r\n\t\tvar c = this.getCenter(),\r\n\t\t    z = this.getZoom();\r\n\t\tDomUtil.setTransform(this._proxy, this.project(c, z), this.getZoomScale(z, 1));\r\n\t},\r\n\r\n\t_catchTransitionEnd: function (e) {\r\n\t\tif (this._animatingZoom && e.propertyName.indexOf('transform') >= 0) {\r\n\t\t\tthis._onZoomTransitionEnd();\r\n\t\t}\r\n\t},\r\n\r\n\t_nothingToAnimate: function () {\r\n\t\treturn !this._container.getElementsByClassName('leaflet-zoom-animated').length;\r\n\t},\r\n\r\n\t_tryAnimatedZoom: function (center, zoom, options) {\r\n\r\n\t\tif (this._animatingZoom) { return true; }\r\n\r\n\t\toptions = options || {};\r\n\r\n\t\t// don't animate if disabled, not supported or zoom difference is too large\r\n\t\tif (!this._zoomAnimated || options.animate === false || this._nothingToAnimate() ||\r\n\t\t        Math.abs(zoom - this._zoom) > this.options.zoomAnimationThreshold) { return false; }\r\n\r\n\t\t// offset is the pixel coords of the zoom origin relative to the current center\r\n\t\tvar scale = this.getZoomScale(zoom),\r\n\t\t    offset = this._getCenterOffset(center)._divideBy(1 - 1 / scale);\r\n\r\n\t\t// don't animate if the zoom origin isn't within one screen from the current center, unless forced\r\n\t\tif (options.animate !== true && !this.getSize().contains(offset)) { return false; }\r\n\r\n\t\tUtil.requestAnimFrame(function () {\r\n\t\t\tthis\r\n\t\t\t    ._moveStart(true, options.noMoveStart || false)\r\n\t\t\t    ._animateZoom(center, zoom, true);\r\n\t\t}, this);\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t_animateZoom: function (center, zoom, startAnim, noUpdate) {\r\n\t\tif (!this._mapPane) { return; }\r\n\r\n\t\tif (startAnim) {\r\n\t\t\tthis._animatingZoom = true;\r\n\r\n\t\t\t// remember what center/zoom to set after animation\r\n\t\t\tthis._animateToCenter = center;\r\n\t\t\tthis._animateToZoom = zoom;\r\n\r\n\t\t\tDomUtil.addClass(this._mapPane, 'leaflet-zoom-anim');\r\n\t\t}\r\n\r\n\t\t// @section Other Events\r\n\t\t// @event zoomanim: ZoomAnimEvent\r\n\t\t// Fired at least once per zoom animation. For continuous zoom, like pinch zooming, fired once per frame during zoom.\r\n\t\tthis.fire('zoomanim', {\r\n\t\t\tcenter: center,\r\n\t\t\tzoom: zoom,\r\n\t\t\tnoUpdate: noUpdate\r\n\t\t});\r\n\r\n\t\tif (!this._tempFireZoomEvent) {\r\n\t\t\tthis._tempFireZoomEvent = this._zoom !== this._animateToZoom;\r\n\t\t}\r\n\r\n\t\tthis._move(this._animateToCenter, this._animateToZoom, undefined, true);\r\n\r\n\t\t// Work around webkit not firing 'transitionend', see https://github.com/Leaflet/Leaflet/issues/3689, 2693\r\n\t\tsetTimeout(Util.bind(this._onZoomTransitionEnd, this), 250);\r\n\t},\r\n\r\n\t_onZoomTransitionEnd: function () {\r\n\t\tif (!this._animatingZoom) { return; }\r\n\r\n\t\tif (this._mapPane) {\r\n\t\t\tDomUtil.removeClass(this._mapPane, 'leaflet-zoom-anim');\r\n\t\t}\r\n\r\n\t\tthis._animatingZoom = false;\r\n\r\n\t\tthis._move(this._animateToCenter, this._animateToZoom, undefined, true);\r\n\r\n\t\tif (this._tempFireZoomEvent) {\r\n\t\t\tthis.fire('zoom');\r\n\t\t}\r\n\t\tdelete this._tempFireZoomEvent;\r\n\r\n\t\tthis.fire('move');\r\n\r\n\t\tthis._moveEnd(true);\r\n\t}\r\n});\r\n\r\n// @section\r\n\r\n// @factory L.map(id: String, options?: Map options)\r\n// Instantiates a map object given the DOM ID of a `<div>` element\r\n// and optionally an object literal with `Map options`.\r\n//\r\n// @alternative\r\n// @factory L.map(el: HTMLElement, options?: Map options)\r\n// Instantiates a map object given an instance of a `<div>` HTML element\r\n// and optionally an object literal with `Map options`.\r\nexport function createMap(id, options) {\r\n\treturn new Map(id, options);\r\n}\r\n","\r\nimport {Class} from '../core/Class';\r\nimport {Map} from '../map/Map';\r\nimport * as Util from '../core/Util';\r\nimport * as DomUtil from '../dom/DomUtil';\r\n\r\n/*\r\n * @class Control\r\n * @aka L.Control\r\n * @inherits Class\r\n *\r\n * L.Control is a base class for implementing map controls. Handles positioning.\r\n * All other controls extend from this class.\r\n */\r\n\r\nexport var Control = Class.extend({\r\n\t// @section\r\n\t// @aka Control Options\r\n\toptions: {\r\n\t\t// @option position: String = 'topright'\r\n\t\t// The position of the control (one of the map corners). Possible values are `'topleft'`,\r\n\t\t// `'topright'`, `'bottomleft'` or `'bottomright'`\r\n\t\tposition: 'topright'\r\n\t},\r\n\r\n\tinitialize: function (options) {\r\n\t\tUtil.setOptions(this, options);\r\n\t},\r\n\r\n\t/* @section\r\n\t * Classes extending L.Control will inherit the following methods:\r\n\t *\r\n\t * @method getPosition: string\r\n\t * Returns the position of the control.\r\n\t */\r\n\tgetPosition: function () {\r\n\t\treturn this.options.position;\r\n\t},\r\n\r\n\t// @method setPosition(position: string): this\r\n\t// Sets the position of the control.\r\n\tsetPosition: function (position) {\r\n\t\tvar map = this._map;\r\n\r\n\t\tif (map) {\r\n\t\t\tmap.removeControl(this);\r\n\t\t}\r\n\r\n\t\tthis.options.position = position;\r\n\r\n\t\tif (map) {\r\n\t\t\tmap.addControl(this);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method getContainer: HTMLElement\r\n\t// Returns the HTMLElement that contains the control.\r\n\tgetContainer: function () {\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\t// @method addTo(map: Map): this\r\n\t// Adds the control to the given map.\r\n\taddTo: function (map) {\r\n\t\tthis.remove();\r\n\t\tthis._map = map;\r\n\r\n\t\tvar container = this._container = this.onAdd(map),\r\n\t\t    pos = this.getPosition(),\r\n\t\t    corner = map._controlCorners[pos];\r\n\r\n\t\tDomUtil.addClass(container, 'leaflet-control');\r\n\r\n\t\tif (pos.indexOf('bottom') !== -1) {\r\n\t\t\tcorner.insertBefore(container, corner.firstChild);\r\n\t\t} else {\r\n\t\t\tcorner.appendChild(container);\r\n\t\t}\r\n\r\n\t\tthis._map.on('unload', this.remove, this);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method remove: this\r\n\t// Removes the control from the map it is currently active on.\r\n\tremove: function () {\r\n\t\tif (!this._map) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tDomUtil.remove(this._container);\r\n\r\n\t\tif (this.onRemove) {\r\n\t\t\tthis.onRemove(this._map);\r\n\t\t}\r\n\r\n\t\tthis._map.off('unload', this.remove, this);\r\n\t\tthis._map = null;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_refocusOnMap: function (e) {\r\n\t\t// if map exists and event is not a keyboard event\r\n\t\tif (this._map && e && e.screenX > 0 && e.screenY > 0) {\r\n\t\t\tthis._map.getContainer().focus();\r\n\t\t}\r\n\t}\r\n});\r\n\r\nexport var control = function (options) {\r\n\treturn new Control(options);\r\n};\r\n\r\n/* @section Extension methods\r\n * @uninheritable\r\n *\r\n * Every control should extend from `L.Control` and (re-)implement the following methods.\r\n *\r\n * @method onAdd(map: Map): HTMLElement\r\n * Should return the container DOM element for the control and add listeners on relevant map events. Called on [`control.addTo(map)`](#control-addTo).\r\n *\r\n * @method onRemove(map: Map)\r\n * Optional method. Should contain all clean up code that removes the listeners previously added in [`onAdd`](#control-onadd). Called on [`control.remove()`](#control-remove).\r\n */\r\n\r\n/* @namespace Map\r\n * @section Methods for Layers and Controls\r\n */\r\nMap.include({\r\n\t// @method addControl(control: Control): this\r\n\t// Adds the given control to the map\r\n\taddControl: function (control) {\r\n\t\tcontrol.addTo(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method removeControl(control: Control): this\r\n\t// Removes the given control from the map\r\n\tremoveControl: function (control) {\r\n\t\tcontrol.remove();\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_initControlPos: function () {\r\n\t\tvar corners = this._controlCorners = {},\r\n\t\t    l = 'leaflet-',\r\n\t\t    container = this._controlContainer =\r\n\t\t            DomUtil.create('div', l + 'control-container', this._container);\r\n\r\n\t\tfunction createCorner(vSide, hSide) {\r\n\t\t\tvar className = l + vSide + ' ' + l + hSide;\r\n\r\n\t\t\tcorners[vSide + hSide] = DomUtil.create('div', className, container);\r\n\t\t}\r\n\r\n\t\tcreateCorner('top', 'left');\r\n\t\tcreateCorner('top', 'right');\r\n\t\tcreateCorner('bottom', 'left');\r\n\t\tcreateCorner('bottom', 'right');\r\n\t},\r\n\r\n\t_clearControlPos: function () {\r\n\t\tfor (var i in this._controlCorners) {\r\n\t\t\tDomUtil.remove(this._controlCorners[i]);\r\n\t\t}\r\n\t\tDomUtil.remove(this._controlContainer);\r\n\t\tdelete this._controlCorners;\r\n\t\tdelete this._controlContainer;\r\n\t}\r\n});\r\n","\r\nimport {Control} from './Control';\r\nimport * as Util from '../core/Util';\r\nimport * as DomEvent from '../dom/DomEvent';\r\nimport * as DomUtil from '../dom/DomUtil';\r\n\r\n/*\r\n * @class Control.Layers\r\n * @aka L.Control.Layers\r\n * @inherits Control\r\n *\r\n * The layers control gives users the ability to switch between different base layers and switch overlays on/off (check out the [detailed example](https://leafletjs.com/examples/layers-control/)). Extends `Control`.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * var baseLayers = {\r\n * \t\"Mapbox\": mapbox,\r\n * \t\"OpenStreetMap\": osm\r\n * };\r\n *\r\n * var overlays = {\r\n * \t\"Marker\": marker,\r\n * \t\"Roads\": roadsLayer\r\n * };\r\n *\r\n * L.control.layers(baseLayers, overlays).addTo(map);\r\n * ```\r\n *\r\n * The `baseLayers` and `overlays` parameters are object literals with layer names as keys and `Layer` objects as values:\r\n *\r\n * ```js\r\n * {\r\n *     \"<someName1>\": layer1,\r\n *     \"<someName2>\": layer2\r\n * }\r\n * ```\r\n *\r\n * The layer names can contain HTML, which allows you to add additional styling to the items:\r\n *\r\n * ```js\r\n * {\"<img src='my-layer-icon' /> <span class='my-layer-item'>My Layer</span>\": myLayer}\r\n * ```\r\n */\r\n\r\nexport var Layers = Control.extend({\r\n\t// @section\r\n\t// @aka Control.Layers options\r\n\toptions: {\r\n\t\t// @option collapsed: Boolean = true\r\n\t\t// If `true`, the control will be collapsed into an icon and expanded on mouse hover, touch, or keyboard activation.\r\n\t\tcollapsed: true,\r\n\t\tposition: 'topright',\r\n\r\n\t\t// @option autoZIndex: Boolean = true\r\n\t\t// If `true`, the control will assign zIndexes in increasing order to all of its layers so that the order is preserved when switching them on/off.\r\n\t\tautoZIndex: true,\r\n\r\n\t\t// @option hideSingleBase: Boolean = false\r\n\t\t// If `true`, the base layers in the control will be hidden when there is only one.\r\n\t\thideSingleBase: false,\r\n\r\n\t\t// @option sortLayers: Boolean = false\r\n\t\t// Whether to sort the layers. When `false`, layers will keep the order\r\n\t\t// in which they were added to the control.\r\n\t\tsortLayers: false,\r\n\r\n\t\t// @option sortFunction: Function = *\r\n\t\t// A [compare function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)\r\n\t\t// that will be used for sorting the layers, when `sortLayers` is `true`.\r\n\t\t// The function receives both the `L.Layer` instances and their names, as in\r\n\t\t// `sortFunction(layerA, layerB, nameA, nameB)`.\r\n\t\t// By default, it sorts layers alphabetically by their name.\r\n\t\tsortFunction: function (layerA, layerB, nameA, nameB) {\r\n\t\t\treturn nameA < nameB ? -1 : (nameB < nameA ? 1 : 0);\r\n\t\t}\r\n\t},\r\n\r\n\tinitialize: function (baseLayers, overlays, options) {\r\n\t\tUtil.setOptions(this, options);\r\n\r\n\t\tthis._layerControlInputs = [];\r\n\t\tthis._layers = [];\r\n\t\tthis._lastZIndex = 0;\r\n\t\tthis._handlingClick = false;\r\n\t\tthis._preventClick = false;\r\n\r\n\t\tfor (var i in baseLayers) {\r\n\t\t\tthis._addLayer(baseLayers[i], i);\r\n\t\t}\r\n\r\n\t\tfor (i in overlays) {\r\n\t\t\tthis._addLayer(overlays[i], i, true);\r\n\t\t}\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._initLayout();\r\n\t\tthis._update();\r\n\r\n\t\tthis._map = map;\r\n\t\tmap.on('zoomend', this._checkDisabledLayers, this);\r\n\r\n\t\tfor (var i = 0; i < this._layers.length; i++) {\r\n\t\t\tthis._layers[i].layer.on('add remove', this._onLayerChange, this);\r\n\t\t}\r\n\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tControl.prototype.addTo.call(this, map);\r\n\t\t// Trigger expand after Layers Control has been inserted into DOM so that is now has an actual height.\r\n\t\treturn this._expandIfNotCollapsed();\r\n\t},\r\n\r\n\tonRemove: function () {\r\n\t\tthis._map.off('zoomend', this._checkDisabledLayers, this);\r\n\r\n\t\tfor (var i = 0; i < this._layers.length; i++) {\r\n\t\t\tthis._layers[i].layer.off('add remove', this._onLayerChange, this);\r\n\t\t}\r\n\t},\r\n\r\n\t// @method addBaseLayer(layer: Layer, name: String): this\r\n\t// Adds a base layer (radio button entry) with the given name to the control.\r\n\taddBaseLayer: function (layer, name) {\r\n\t\tthis._addLayer(layer, name);\r\n\t\treturn (this._map) ? this._update() : this;\r\n\t},\r\n\r\n\t// @method addOverlay(layer: Layer, name: String): this\r\n\t// Adds an overlay (checkbox entry) with the given name to the control.\r\n\taddOverlay: function (layer, name) {\r\n\t\tthis._addLayer(layer, name, true);\r\n\t\treturn (this._map) ? this._update() : this;\r\n\t},\r\n\r\n\t// @method removeLayer(layer: Layer): this\r\n\t// Remove the given layer from the control.\r\n\tremoveLayer: function (layer) {\r\n\t\tlayer.off('add remove', this._onLayerChange, this);\r\n\r\n\t\tvar obj = this._getLayer(Util.stamp(layer));\r\n\t\tif (obj) {\r\n\t\t\tthis._layers.splice(this._layers.indexOf(obj), 1);\r\n\t\t}\r\n\t\treturn (this._map) ? this._update() : this;\r\n\t},\r\n\r\n\t// @method expand(): this\r\n\t// Expand the control container if collapsed.\r\n\texpand: function () {\r\n\t\tDomUtil.addClass(this._container, 'leaflet-control-layers-expanded');\r\n\t\tthis._section.style.height = null;\r\n\t\tvar acceptableHeight = this._map.getSize().y - (this._container.offsetTop + 50);\r\n\t\tif (acceptableHeight < this._section.clientHeight) {\r\n\t\t\tDomUtil.addClass(this._section, 'leaflet-control-layers-scrollbar');\r\n\t\t\tthis._section.style.height = acceptableHeight + 'px';\r\n\t\t} else {\r\n\t\t\tDomUtil.removeClass(this._section, 'leaflet-control-layers-scrollbar');\r\n\t\t}\r\n\t\tthis._checkDisabledLayers();\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method collapse(): this\r\n\t// Collapse the control container if expanded.\r\n\tcollapse: function () {\r\n\t\tDomUtil.removeClass(this._container, 'leaflet-control-layers-expanded');\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_initLayout: function () {\r\n\t\tvar className = 'leaflet-control-layers',\r\n\t\t    container = this._container = DomUtil.create('div', className),\r\n\t\t    collapsed = this.options.collapsed;\r\n\r\n\t\t// makes this work on IE touch devices by stopping it from firing a mouseout event when the touch is released\r\n\t\tcontainer.setAttribute('aria-haspopup', true);\r\n\r\n\t\tDomEvent.disableClickPropagation(container);\r\n\t\tDomEvent.disableScrollPropagation(container);\r\n\r\n\t\tvar section = this._section = DomUtil.create('section', className + '-list');\r\n\r\n\t\tif (collapsed) {\r\n\t\t\tthis._map.on('click', this.collapse, this);\r\n\r\n\t\t\tDomEvent.on(container, {\r\n\t\t\t\tmouseenter: this._expandSafely,\r\n\t\t\t\tmouseleave: this.collapse\r\n\t\t\t}, this);\r\n\t\t}\r\n\r\n\t\tvar link = this._layersLink = DomUtil.create('a', className + '-toggle', container);\r\n\t\tlink.href = '#';\r\n\t\tlink.title = 'Layers';\r\n\t\tlink.setAttribute('role', 'button');\r\n\r\n\t\tDomEvent.on(link, {\r\n\t\t\tkeydown: function (e) {\r\n\t\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t\tthis._expandSafely();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// Certain screen readers intercept the key event and instead send a click event\r\n\t\t\tclick: function (e) {\r\n\t\t\t\tDomEvent.preventDefault(e);\r\n\t\t\t\tthis._expandSafely();\r\n\t\t\t}\r\n\t\t}, this);\r\n\r\n\t\tif (!collapsed) {\r\n\t\t\tthis.expand();\r\n\t\t}\r\n\r\n\t\tthis._baseLayersList = DomUtil.create('div', className + '-base', section);\r\n\t\tthis._separator = DomUtil.create('div', className + '-separator', section);\r\n\t\tthis._overlaysList = DomUtil.create('div', className + '-overlays', section);\r\n\r\n\t\tcontainer.appendChild(section);\r\n\t},\r\n\r\n\t_getLayer: function (id) {\r\n\t\tfor (var i = 0; i < this._layers.length; i++) {\r\n\r\n\t\t\tif (this._layers[i] && Util.stamp(this._layers[i].layer) === id) {\r\n\t\t\t\treturn this._layers[i];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_addLayer: function (layer, name, overlay) {\r\n\t\tif (this._map) {\r\n\t\t\tlayer.on('add remove', this._onLayerChange, this);\r\n\t\t}\r\n\r\n\t\tthis._layers.push({\r\n\t\t\tlayer: layer,\r\n\t\t\tname: name,\r\n\t\t\toverlay: overlay\r\n\t\t});\r\n\r\n\t\tif (this.options.sortLayers) {\r\n\t\t\tthis._layers.sort(Util.bind(function (a, b) {\r\n\t\t\t\treturn this.options.sortFunction(a.layer, b.layer, a.name, b.name);\r\n\t\t\t}, this));\r\n\t\t}\r\n\r\n\t\tif (this.options.autoZIndex && layer.setZIndex) {\r\n\t\t\tthis._lastZIndex++;\r\n\t\t\tlayer.setZIndex(this._lastZIndex);\r\n\t\t}\r\n\r\n\t\tthis._expandIfNotCollapsed();\r\n\t},\r\n\r\n\t_update: function () {\r\n\t\tif (!this._container) { return this; }\r\n\r\n\t\tDomUtil.empty(this._baseLayersList);\r\n\t\tDomUtil.empty(this._overlaysList);\r\n\r\n\t\tthis._layerControlInputs = [];\r\n\t\tvar baseLayersPresent, overlaysPresent, i, obj, baseLayersCount = 0;\r\n\r\n\t\tfor (i = 0; i < this._layers.length; i++) {\r\n\t\t\tobj = this._layers[i];\r\n\t\t\tthis._addItem(obj);\r\n\t\t\toverlaysPresent = overlaysPresent || obj.overlay;\r\n\t\t\tbaseLayersPresent = baseLayersPresent || !obj.overlay;\r\n\t\t\tbaseLayersCount += !obj.overlay ? 1 : 0;\r\n\t\t}\r\n\r\n\t\t// Hide base layers section if there's only one layer.\r\n\t\tif (this.options.hideSingleBase) {\r\n\t\t\tbaseLayersPresent = baseLayersPresent && baseLayersCount > 1;\r\n\t\t\tthis._baseLayersList.style.display = baseLayersPresent ? '' : 'none';\r\n\t\t}\r\n\r\n\t\tthis._separator.style.display = overlaysPresent && baseLayersPresent ? '' : 'none';\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_onLayerChange: function (e) {\r\n\t\tif (!this._handlingClick) {\r\n\t\t\tthis._update();\r\n\t\t}\r\n\r\n\t\tvar obj = this._getLayer(Util.stamp(e.target));\r\n\r\n\t\t// @namespace Map\r\n\t\t// @section Layer events\r\n\t\t// @event baselayerchange: LayersControlEvent\r\n\t\t// Fired when the base layer is changed through the [layers control](#control-layers).\r\n\t\t// @event overlayadd: LayersControlEvent\r\n\t\t// Fired when an overlay is selected through the [layers control](#control-layers).\r\n\t\t// @event overlayremove: LayersControlEvent\r\n\t\t// Fired when an overlay is deselected through the [layers control](#control-layers).\r\n\t\t// @namespace Control.Layers\r\n\t\tvar type = obj.overlay ?\r\n\t\t\t(e.type === 'add' ? 'overlayadd' : 'overlayremove') :\r\n\t\t\t(e.type === 'add' ? 'baselayerchange' : null);\r\n\r\n\t\tif (type) {\r\n\t\t\tthis._map.fire(type, obj);\r\n\t\t}\r\n\t},\r\n\r\n\t// IE7 bugs out if you create a radio dynamically, so you have to do it this hacky way (see https://stackoverflow.com/a/119079)\r\n\t_createRadioElement: function (name, checked) {\r\n\r\n\t\tvar radioHtml = '<input type=\"radio\" class=\"leaflet-control-layers-selector\" name=\"' +\r\n\t\t\t\tname + '\"' + (checked ? ' checked=\"checked\"' : '') + '/>';\r\n\r\n\t\tvar radioFragment = document.createElement('div');\r\n\t\tradioFragment.innerHTML = radioHtml;\r\n\r\n\t\treturn radioFragment.firstChild;\r\n\t},\r\n\r\n\t_addItem: function (obj) {\r\n\t\tvar label = document.createElement('label'),\r\n\t\t    checked = this._map.hasLayer(obj.layer),\r\n\t\t    input;\r\n\r\n\t\tif (obj.overlay) {\r\n\t\t\tinput = document.createElement('input');\r\n\t\t\tinput.type = 'checkbox';\r\n\t\t\tinput.className = 'leaflet-control-layers-selector';\r\n\t\t\tinput.defaultChecked = checked;\r\n\t\t} else {\r\n\t\t\tinput = this._createRadioElement('leaflet-base-layers_' + Util.stamp(this), checked);\r\n\t\t}\r\n\r\n\t\tthis._layerControlInputs.push(input);\r\n\t\tinput.layerId = Util.stamp(obj.layer);\r\n\r\n\t\tDomEvent.on(input, 'click', this._onInputClick, this);\r\n\r\n\t\tvar name = document.createElement('span');\r\n\t\tname.innerHTML = ' ' + obj.name;\r\n\r\n\t\t// Helps from preventing layer control flicker when checkboxes are disabled\r\n\t\t// https://github.com/Leaflet/Leaflet/issues/2771\r\n\t\tvar holder = document.createElement('span');\r\n\r\n\t\tlabel.appendChild(holder);\r\n\t\tholder.appendChild(input);\r\n\t\tholder.appendChild(name);\r\n\r\n\t\tvar container = obj.overlay ? this._overlaysList : this._baseLayersList;\r\n\t\tcontainer.appendChild(label);\r\n\r\n\t\tthis._checkDisabledLayers();\r\n\t\treturn label;\r\n\t},\r\n\r\n\t_onInputClick: function () {\r\n\t\t// expanding the control on mobile with a click can cause adding a layer - we don't want this\r\n\t\tif (this._preventClick) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar inputs = this._layerControlInputs,\r\n\t\t    input, layer;\r\n\t\tvar addedLayers = [],\r\n\t\t    removedLayers = [];\r\n\r\n\t\tthis._handlingClick = true;\r\n\r\n\t\tfor (var i = inputs.length - 1; i >= 0; i--) {\r\n\t\t\tinput = inputs[i];\r\n\t\t\tlayer = this._getLayer(input.layerId).layer;\r\n\r\n\t\t\tif (input.checked) {\r\n\t\t\t\taddedLayers.push(layer);\r\n\t\t\t} else if (!input.checked) {\r\n\t\t\t\tremovedLayers.push(layer);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Bugfix issue 2318: Should remove all old layers before readding new ones\r\n\t\tfor (i = 0; i < removedLayers.length; i++) {\r\n\t\t\tif (this._map.hasLayer(removedLayers[i])) {\r\n\t\t\t\tthis._map.removeLayer(removedLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (i = 0; i < addedLayers.length; i++) {\r\n\t\t\tif (!this._map.hasLayer(addedLayers[i])) {\r\n\t\t\t\tthis._map.addLayer(addedLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._handlingClick = false;\r\n\r\n\t\tthis._refocusOnMap();\r\n\t},\r\n\r\n\t_checkDisabledLayers: function () {\r\n\t\tvar inputs = this._layerControlInputs,\r\n\t\t    input,\r\n\t\t    layer,\r\n\t\t    zoom = this._map.getZoom();\r\n\r\n\t\tfor (var i = inputs.length - 1; i >= 0; i--) {\r\n\t\t\tinput = inputs[i];\r\n\t\t\tlayer = this._getLayer(input.layerId).layer;\r\n\t\t\tinput.disabled = (layer.options.minZoom !== undefined && zoom < layer.options.minZoom) ||\r\n\t\t\t                 (layer.options.maxZoom !== undefined && zoom > layer.options.maxZoom);\r\n\r\n\t\t}\r\n\t},\r\n\r\n\t_expandIfNotCollapsed: function () {\r\n\t\tif (this._map && !this.options.collapsed) {\r\n\t\t\tthis.expand();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_expandSafely: function () {\r\n\t\tvar section = this._section;\r\n\t\tthis._preventClick = true;\r\n\t\tDomEvent.on(section, 'click', DomEvent.preventDefault);\r\n\t\tthis.expand();\r\n\t\tvar that = this;\r\n\t\tsetTimeout(function () {\r\n\t\t\tDomEvent.off(section, 'click', DomEvent.preventDefault);\r\n\t\t\tthat._preventClick = false;\r\n\t\t});\r\n\t}\r\n\r\n});\r\n\r\n\r\n// @factory L.control.layers(baselayers?: Object, overlays?: Object, options?: Control.Layers options)\r\n// Creates a layers control with the given layers. Base layers will be switched with radio buttons, while overlays will be switched with checkboxes. Note that all base layers should be passed in the base layers object, but only one should be added to the map during map instantiation.\r\nexport var layers = function (baseLayers, overlays, options) {\r\n\treturn new Layers(baseLayers, overlays, options);\r\n};\r\n","\r\nimport {Control} from './Control';\r\nimport {Map} from '../map/Map';\r\nimport * as DomUtil from '../dom/DomUtil';\r\nimport * as DomEvent from '../dom/DomEvent';\r\n\r\n/*\r\n * @class Control.Zoom\r\n * @aka L.Control.Zoom\r\n * @inherits Control\r\n *\r\n * A basic zoom control with two buttons (zoom in and zoom out). It is put on the map by default unless you set its [`zoomControl` option](#map-zoomcontrol) to `false`. Extends `Control`.\r\n */\r\n\r\nexport var Zoom = Control.extend({\r\n\t// @section\r\n\t// @aka Control.Zoom options\r\n\toptions: {\r\n\t\tposition: 'topleft',\r\n\r\n\t\t// @option zoomInText: String = '<span aria-hidden=\"true\">+</span>'\r\n\t\t// The text set on the 'zoom in' button.\r\n\t\tzoomInText: '<span aria-hidden=\"true\">+</span>',\r\n\r\n\t\t// @option zoomInTitle: String = 'Zoom in'\r\n\t\t// The title set on the 'zoom in' button.\r\n\t\tzoomInTitle: 'Zoom in',\r\n\r\n\t\t// @option zoomOutText: String = '<span aria-hidden=\"true\">&#x2212;</span>'\r\n\t\t// The text set on the 'zoom out' button.\r\n\t\tzoomOutText: '<span aria-hidden=\"true\">&#x2212;</span>',\r\n\r\n\t\t// @option zoomOutTitle: String = 'Zoom out'\r\n\t\t// The title set on the 'zoom out' button.\r\n\t\tzoomOutTitle: 'Zoom out'\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tvar zoomName = 'leaflet-control-zoom',\r\n\t\t    container = DomUtil.create('div', zoomName + ' leaflet-bar'),\r\n\t\t    options = this.options;\r\n\r\n\t\tthis._zoomInButton  = this._createButton(options.zoomInText, options.zoomInTitle,\r\n\t\t        zoomName + '-in',  container, this._zoomIn);\r\n\t\tthis._zoomOutButton = this._createButton(options.zoomOutText, options.zoomOutTitle,\r\n\t\t        zoomName + '-out', container, this._zoomOut);\r\n\r\n\t\tthis._updateDisabled();\r\n\t\tmap.on('zoomend zoomlevelschange', this._updateDisabled, this);\r\n\r\n\t\treturn container;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap.off('zoomend zoomlevelschange', this._updateDisabled, this);\r\n\t},\r\n\r\n\tdisable: function () {\r\n\t\tthis._disabled = true;\r\n\t\tthis._updateDisabled();\r\n\t\treturn this;\r\n\t},\r\n\r\n\tenable: function () {\r\n\t\tthis._disabled = false;\r\n\t\tthis._updateDisabled();\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_zoomIn: function (e) {\r\n\t\tif (!this._disabled && this._map._zoom < this._map.getMaxZoom()) {\r\n\t\t\tthis._map.zoomIn(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1));\r\n\t\t}\r\n\t},\r\n\r\n\t_zoomOut: function (e) {\r\n\t\tif (!this._disabled && this._map._zoom > this._map.getMinZoom()) {\r\n\t\t\tthis._map.zoomOut(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1));\r\n\t\t}\r\n\t},\r\n\r\n\t_createButton: function (html, title, className, container, fn) {\r\n\t\tvar link = DomUtil.create('a', className, container);\r\n\t\tlink.innerHTML = html;\r\n\t\tlink.href = '#';\r\n\t\tlink.title = title;\r\n\r\n\t\t/*\r\n\t\t * Will force screen readers like VoiceOver to read this as \"Zoom in - button\"\r\n\t\t */\r\n\t\tlink.setAttribute('role', 'button');\r\n\t\tlink.setAttribute('aria-label', title);\r\n\r\n\t\tDomEvent.disableClickPropagation(link);\r\n\t\tDomEvent.on(link, 'click', DomEvent.stop);\r\n\t\tDomEvent.on(link, 'click', fn, this);\r\n\t\tDomEvent.on(link, 'click', this._refocusOnMap, this);\r\n\r\n\t\treturn link;\r\n\t},\r\n\r\n\t_updateDisabled: function () {\r\n\t\tvar map = this._map,\r\n\t\t    className = 'leaflet-disabled';\r\n\r\n\t\tDomUtil.removeClass(this._zoomInButton, className);\r\n\t\tDomUtil.removeClass(this._zoomOutButton, className);\r\n\t\tthis._zoomInButton.setAttribute('aria-disabled', 'false');\r\n\t\tthis._zoomOutButton.setAttribute('aria-disabled', 'false');\r\n\r\n\t\tif (this._disabled || map._zoom === map.getMinZoom()) {\r\n\t\t\tDomUtil.addClass(this._zoomOutButton, className);\r\n\t\t\tthis._zoomOutButton.setAttribute('aria-disabled', 'true');\r\n\t\t}\r\n\t\tif (this._disabled || map._zoom === map.getMaxZoom()) {\r\n\t\t\tDomUtil.addClass(this._zoomInButton, className);\r\n\t\t\tthis._zoomInButton.setAttribute('aria-disabled', 'true');\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// @namespace Map\r\n// @section Control options\r\n// @option zoomControl: Boolean = true\r\n// Whether a [zoom control](#control-zoom) is added to the map by default.\r\nMap.mergeOptions({\r\n\tzoomControl: true\r\n});\r\n\r\nMap.addInitHook(function () {\r\n\tif (this.options.zoomControl) {\r\n\t\t// @section Controls\r\n\t\t// @property zoomControl: Control.Zoom\r\n\t\t// The default zoom control (only available if the\r\n\t\t// [`zoomControl` option](#map-zoomcontrol) was `true` when creating the map).\r\n\t\tthis.zoomControl = new Zoom();\r\n\t\tthis.addControl(this.zoomControl);\r\n\t}\r\n});\r\n\r\n// @namespace Control.Zoom\r\n// @factory L.control.zoom(options: Control.Zoom options)\r\n// Creates a zoom control\r\nexport var zoom = function (options) {\r\n\treturn new Zoom(options);\r\n};\r\n","\nimport {Control} from './Control';\nimport * as DomUtil from '../dom/DomUtil';\n\n/*\n * @class Control.Scale\n * @aka L.Control.Scale\n * @inherits Control\n *\n * A simple scale control that shows the scale of the current center of screen in metric (m/km) and imperial (mi/ft) systems. Extends `Control`.\n *\n * @example\n *\n * ```js\n * L.control.scale().addTo(map);\n * ```\n */\n\nexport var Scale = Control.extend({\n\t// @section\n\t// @aka Control.Scale options\n\toptions: {\n\t\tposition: 'bottomleft',\n\n\t\t// @option maxWidth: Number = 100\n\t\t// Maximum width of the control in pixels. The width is set dynamically to show round values (e.g. 100, 200, 500).\n\t\tmaxWidth: 100,\n\n\t\t// @option metric: Boolean = True\n\t\t// Whether to show the metric scale line (m/km).\n\t\tmetric: true,\n\n\t\t// @option imperial: Boolean = True\n\t\t// Whether to show the imperial scale line (mi/ft).\n\t\timperial: true\n\n\t\t// @option updateWhenIdle: Boolean = false\n\t\t// If `true`, the control is updated on [`moveend`](#map-moveend), otherwise it's always up-to-date (updated on [`move`](#map-move)).\n\t},\n\n\tonAdd: function (map) {\n\t\tvar className = 'leaflet-control-scale',\n\t\t    container = DomUtil.create('div', className),\n\t\t    options = this.options;\n\n\t\tthis._addScales(options, className + '-line', container);\n\n\t\tmap.on(options.updateWhenIdle ? 'moveend' : 'move', this._update, this);\n\t\tmap.whenReady(this._update, this);\n\n\t\treturn container;\n\t},\n\n\tonRemove: function (map) {\n\t\tmap.off(this.options.updateWhenIdle ? 'moveend' : 'move', this._update, this);\n\t},\n\n\t_addScales: function (options, className, container) {\n\t\tif (options.metric) {\n\t\t\tthis._mScale = DomUtil.create('div', className, container);\n\t\t}\n\t\tif (options.imperial) {\n\t\t\tthis._iScale = DomUtil.create('div', className, container);\n\t\t}\n\t},\n\n\t_update: function () {\n\t\tvar map = this._map,\n\t\t    y = map.getSize().y / 2;\n\n\t\tvar maxMeters = map.distance(\n\t\t\tmap.containerPointToLatLng([0, y]),\n\t\t\tmap.containerPointToLatLng([this.options.maxWidth, y]));\n\n\t\tthis._updateScales(maxMeters);\n\t},\n\n\t_updateScales: function (maxMeters) {\n\t\tif (this.options.metric && maxMeters) {\n\t\t\tthis._updateMetric(maxMeters);\n\t\t}\n\t\tif (this.options.imperial && maxMeters) {\n\t\t\tthis._updateImperial(maxMeters);\n\t\t}\n\t},\n\n\t_updateMetric: function (maxMeters) {\n\t\tvar meters = this._getRoundNum(maxMeters),\n\t\t    label = meters < 1000 ? meters + ' m' : (meters / 1000) + ' km';\n\n\t\tthis._updateScale(this._mScale, label, meters / maxMeters);\n\t},\n\n\t_updateImperial: function (maxMeters) {\n\t\tvar maxFeet = maxMeters * 3.2808399,\n\t\t    maxMiles, miles, feet;\n\n\t\tif (maxFeet > 5280) {\n\t\t\tmaxMiles = maxFeet / 5280;\n\t\t\tmiles = this._getRoundNum(maxMiles);\n\t\t\tthis._updateScale(this._iScale, miles + ' mi', miles / maxMiles);\n\n\t\t} else {\n\t\t\tfeet = this._getRoundNum(maxFeet);\n\t\t\tthis._updateScale(this._iScale, feet + ' ft', feet / maxFeet);\n\t\t}\n\t},\n\n\t_updateScale: function (scale, text, ratio) {\n\t\tscale.style.width = Math.round(this.options.maxWidth * ratio) + 'px';\n\t\tscale.innerHTML = text;\n\t},\n\n\t_getRoundNum: function (num) {\n\t\tvar pow10 = Math.pow(10, (Math.floor(num) + '').length - 1),\n\t\t    d = num / pow10;\n\n\t\td = d >= 10 ? 10 :\n\t\t    d >= 5 ? 5 :\n\t\t    d >= 3 ? 3 :\n\t\t    d >= 2 ? 2 : 1;\n\n\t\treturn pow10 * d;\n\t}\n});\n\n\n// @factory L.control.scale(options?: Control.Scale options)\n// Creates an scale control with the given options.\nexport var scale = function (options) {\n\treturn new Scale(options);\n};\n","\r\nimport {Control} from './Control';\r\nimport {Map} from '../map/Map';\r\nimport * as Util from '../core/Util';\r\nimport * as DomEvent from '../dom/DomEvent';\r\nimport * as DomUtil from '../dom/DomUtil';\r\nimport Browser from '../core/Browser';\r\n\r\nvar ukrainianFlag = '<svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"8\" viewBox=\"0 0 12 8\" class=\"leaflet-attribution-flag\"><path fill=\"#4C7BE1\" d=\"M0 0h12v4H0z\"/><path fill=\"#FFD500\" d=\"M0 4h12v3H0z\"/><path fill=\"#E0BC00\" d=\"M0 7h12v1H0z\"/></svg>';\r\n\r\n\r\n/*\r\n * @class Control.Attribution\r\n * @aka L.Control.Attribution\r\n * @inherits Control\r\n *\r\n * The attribution control allows you to display attribution data in a small text box on a map. It is put on the map by default unless you set its [`attributionControl` option](#map-attributioncontrol) to `false`, and it fetches attribution texts from layers with the [`getAttribution` method](#layer-getattribution) automatically. Extends Control.\r\n */\r\n\r\nexport var Attribution = Control.extend({\r\n\t// @section\r\n\t// @aka Control.Attribution options\r\n\toptions: {\r\n\t\tposition: 'bottomright',\r\n\r\n\t\t// @option prefix: String|false = 'Leaflet'\r\n\t\t// The HTML text shown before the attributions. Pass `false` to disable.\r\n\t\tprefix: '<a href=\"https://leafletjs.com\" title=\"A JavaScript library for interactive maps\">' + (Browser.inlineSvg ? ukrainianFlag + ' ' : '') + 'Leaflet</a>'\r\n\t},\r\n\r\n\tinitialize: function (options) {\r\n\t\tUtil.setOptions(this, options);\r\n\r\n\t\tthis._attributions = {};\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tmap.attributionControl = this;\r\n\t\tthis._container = DomUtil.create('div', 'leaflet-control-attribution');\r\n\t\tDomEvent.disableClickPropagation(this._container);\r\n\r\n\t\t// TODO ugly, refactor\r\n\t\tfor (var i in map._layers) {\r\n\t\t\tif (map._layers[i].getAttribution) {\r\n\t\t\t\tthis.addAttribution(map._layers[i].getAttribution());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._update();\r\n\r\n\t\tmap.on('layeradd', this._addAttribution, this);\r\n\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap.off('layeradd', this._addAttribution, this);\r\n\t},\r\n\r\n\t_addAttribution: function (ev) {\r\n\t\tif (ev.layer.getAttribution) {\r\n\t\t\tthis.addAttribution(ev.layer.getAttribution());\r\n\t\t\tev.layer.once('remove', function () {\r\n\t\t\t\tthis.removeAttribution(ev.layer.getAttribution());\r\n\t\t\t}, this);\r\n\t\t}\r\n\t},\r\n\r\n\t// @method setPrefix(prefix: String|false): this\r\n\t// The HTML text shown before the attributions. Pass `false` to disable.\r\n\tsetPrefix: function (prefix) {\r\n\t\tthis.options.prefix = prefix;\r\n\t\tthis._update();\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method addAttribution(text: String): this\r\n\t// Adds an attribution text (e.g. `'&copy; OpenStreetMap contributors'`).\r\n\taddAttribution: function (text) {\r\n\t\tif (!text) { return this; }\r\n\r\n\t\tif (!this._attributions[text]) {\r\n\t\t\tthis._attributions[text] = 0;\r\n\t\t}\r\n\t\tthis._attributions[text]++;\r\n\r\n\t\tthis._update();\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method removeAttribution(text: String): this\r\n\t// Removes an attribution text.\r\n\tremoveAttribution: function (text) {\r\n\t\tif (!text) { return this; }\r\n\r\n\t\tif (this._attributions[text]) {\r\n\t\t\tthis._attributions[text]--;\r\n\t\t\tthis._update();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_update: function () {\r\n\t\tif (!this._map) { return; }\r\n\r\n\t\tvar attribs = [];\r\n\r\n\t\tfor (var i in this._attributions) {\r\n\t\t\tif (this._attributions[i]) {\r\n\t\t\t\tattribs.push(i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar prefixAndAttribs = [];\r\n\r\n\t\tif (this.options.prefix) {\r\n\t\t\tprefixAndAttribs.push(this.options.prefix);\r\n\t\t}\r\n\t\tif (attribs.length) {\r\n\t\t\tprefixAndAttribs.push(attribs.join(', '));\r\n\t\t}\r\n\r\n\t\tthis._container.innerHTML = prefixAndAttribs.join(' <span aria-hidden=\"true\">|</span> ');\r\n\t}\r\n});\r\n\r\n// @namespace Map\r\n// @section Control options\r\n// @option attributionControl: Boolean = true\r\n// Whether a [attribution control](#control-attribution) is added to the map by default.\r\nMap.mergeOptions({\r\n\tattributionControl: true\r\n});\r\n\r\nMap.addInitHook(function () {\r\n\tif (this.options.attributionControl) {\r\n\t\tnew Attribution().addTo(this);\r\n\t}\r\n});\r\n\r\n// @namespace Control.Attribution\r\n// @factory L.control.attribution(options: Control.Attribution options)\r\n// Creates an attribution control.\r\nexport var attribution = function (options) {\r\n\treturn new Attribution(options);\r\n};\r\n","import {Control, control} from './Control';\nimport {Layers, layers} from './Control.Layers';\nimport {Zoom, zoom} from './Control.Zoom';\nimport {Scale, scale} from './Control.Scale';\nimport {Attribution, attribution} from './Control.Attribution';\n\nControl.Layers = Layers;\nControl.Zoom = Zoom;\nControl.Scale = Scale;\nControl.Attribution = Attribution;\n\ncontrol.layers = layers;\ncontrol.zoom = zoom;\ncontrol.scale = scale;\ncontrol.attribution = attribution;\n\nexport {Control, control};\n","import {Class} from './Class';\n\n/*\n\tL.Handler is a base class for handler classes that are used internally to inject\n\tinteraction features like dragging to classes like Map and Marker.\n*/\n\n// @class Handler\n// @aka L.Handler\n// Abstract class for map interaction handlers\n\nexport var Handler = Class.extend({\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\t},\n\n\t// @method enable(): this\n\t// Enables the handler\n\tenable: function () {\n\t\tif (this._enabled) { return this; }\n\n\t\tthis._enabled = true;\n\t\tthis.addHooks();\n\t\treturn this;\n\t},\n\n\t// @method disable(): this\n\t// Disables the handler\n\tdisable: function () {\n\t\tif (!this._enabled) { return this; }\n\n\t\tthis._enabled = false;\n\t\tthis.removeHooks();\n\t\treturn this;\n\t},\n\n\t// @method enabled(): Boolean\n\t// Returns `true` if the handler is enabled\n\tenabled: function () {\n\t\treturn !!this._enabled;\n\t}\n\n\t// @section Extension methods\n\t// Classes inheriting from `Handler` must implement the two following methods:\n\t// @method addHooks()\n\t// Called when the handler is enabled, should add event hooks.\n\t// @method removeHooks()\n\t// Called when the handler is disabled, should remove the event hooks added previously.\n});\n\n// @section There is static function which can be called without instantiating L.Handler:\n// @function addTo(map: Map, name: String): this\n// Adds a new Handler to the given map with the given name.\nHandler.addTo = function (map, name) {\n\tmap.addHandler(name, this);\n\treturn this;\n};\n","import Browser from './Browser';\nexport {Browser};\n\nexport {Class} from './Class';\n\nimport {Evented} from './Events';\nimport {Events} from './Events';\nexport {Evented};\nexport var Mixin = {Events: Events};\n\nexport {Handler} from './Handler';\n\nimport * as Util from './Util';\nexport {Util};\nexport {extend, bind, stamp, setOptions} from './Util';\n","import {Evented} from '../core/Events';\r\nimport Browser from '../core/Browser';\r\nimport * as DomEvent from './DomEvent';\r\nimport * as DomUtil from './DomUtil';\r\nimport * as Util from '../core/Util';\r\nimport {Point} from '../geometry/Point';\r\n\r\n/*\r\n * @class Draggable\r\n * @aka L.Draggable\r\n * @inherits Evented\r\n *\r\n * A class for making DOM elements draggable (including touch support).\r\n * Used internally for map and marker dragging. Only works for elements\r\n * that were positioned with [`L.DomUtil.setPosition`](#domutil-setposition).\r\n *\r\n * @example\r\n * ```js\r\n * var draggable = new L.Draggable(elementToDrag);\r\n * draggable.enable();\r\n * ```\r\n */\r\n\r\nvar START = Browser.touch ? 'touchstart mousedown' : 'mousedown';\r\n\r\nexport var Draggable = Evented.extend({\r\n\r\n\toptions: {\r\n\t\t// @section\r\n\t\t// @aka Draggable options\r\n\t\t// @option clickTolerance: Number = 3\r\n\t\t// The max number of pixels a user can shift the mouse pointer during a click\r\n\t\t// for it to be considered a valid click (as opposed to a mouse drag).\r\n\t\tclickTolerance: 3\r\n\t},\r\n\r\n\t// @constructor L.Draggable(el: HTMLElement, dragHandle?: HTMLElement, preventOutline?: Boolean, options?: Draggable options)\r\n\t// Creates a `Draggable` object for moving `el` when you start dragging the `dragHandle` element (equals `el` itself by default).\r\n\tinitialize: function (element, dragStartTarget, preventOutline, options) {\r\n\t\tUtil.setOptions(this, options);\r\n\r\n\t\tthis._element = element;\r\n\t\tthis._dragStartTarget = dragStartTarget || element;\r\n\t\tthis._preventOutline = preventOutline;\r\n\t},\r\n\r\n\t// @method enable()\r\n\t// Enables the dragging ability\r\n\tenable: function () {\r\n\t\tif (this._enabled) { return; }\r\n\r\n\t\tDomEvent.on(this._dragStartTarget, START, this._onDown, this);\r\n\r\n\t\tthis._enabled = true;\r\n\t},\r\n\r\n\t// @method disable()\r\n\t// Disables the dragging ability\r\n\tdisable: function () {\r\n\t\tif (!this._enabled) { return; }\r\n\r\n\t\t// If we're currently dragging this draggable,\r\n\t\t// disabling it counts as first ending the drag.\r\n\t\tif (Draggable._dragging === this) {\r\n\t\t\tthis.finishDrag(true);\r\n\t\t}\r\n\r\n\t\tDomEvent.off(this._dragStartTarget, START, this._onDown, this);\r\n\r\n\t\tthis._enabled = false;\r\n\t\tthis._moved = false;\r\n\t},\r\n\r\n\t_onDown: function (e) {\r\n\t\t// Ignore the event if disabled; this happens in IE11\r\n\t\t// under some circumstances, see #3666.\r\n\t\tif (!this._enabled) { return; }\r\n\r\n\t\tthis._moved = false;\r\n\r\n\t\tif (DomUtil.hasClass(this._element, 'leaflet-zoom-anim')) { return; }\r\n\r\n\t\tif (e.touches && e.touches.length !== 1) {\r\n\t\t\t// Finish dragging to avoid conflict with touchZoom\r\n\t\t\tif (Draggable._dragging === this) {\r\n\t\t\t\tthis.finishDrag();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (Draggable._dragging || e.shiftKey || ((e.which !== 1) && (e.button !== 1) && !e.touches)) { return; }\r\n\t\tDraggable._dragging = this;  // Prevent dragging multiple objects at once.\r\n\r\n\t\tif (this._preventOutline) {\r\n\t\t\tDomUtil.preventOutline(this._element);\r\n\t\t}\r\n\r\n\t\tDomUtil.disableImageDrag();\r\n\t\tDomUtil.disableTextSelection();\r\n\r\n\t\tif (this._moving) { return; }\r\n\r\n\t\t// @event down: Event\r\n\t\t// Fired when a drag is about to start.\r\n\t\tthis.fire('down');\r\n\r\n\t\tvar first = e.touches ? e.touches[0] : e,\r\n\t\t    sizedParent = DomUtil.getSizedParentNode(this._element);\r\n\r\n\t\tthis._startPoint = new Point(first.clientX, first.clientY);\r\n\t\tthis._startPos = DomUtil.getPosition(this._element);\r\n\r\n\t\t// Cache the scale, so that we can continuously compensate for it during drag (_onMove).\r\n\t\tthis._parentScale = DomUtil.getScale(sizedParent);\r\n\r\n\t\tvar mouseevent = e.type === 'mousedown';\r\n\t\tDomEvent.on(document, mouseevent ? 'mousemove' : 'touchmove', this._onMove, this);\r\n\t\tDomEvent.on(document, mouseevent ? 'mouseup' : 'touchend touchcancel', this._onUp, this);\r\n\t},\r\n\r\n\t_onMove: function (e) {\r\n\t\t// Ignore the event if disabled; this happens in IE11\r\n\t\t// under some circumstances, see #3666.\r\n\t\tif (!this._enabled) { return; }\r\n\r\n\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\tthis._moved = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar first = (e.touches && e.touches.length === 1 ? e.touches[0] : e),\r\n\t\t    offset = new Point(first.clientX, first.clientY)._subtract(this._startPoint);\r\n\r\n\t\tif (!offset.x && !offset.y) { return; }\r\n\t\tif (Math.abs(offset.x) + Math.abs(offset.y) < this.options.clickTolerance) { return; }\r\n\r\n\t\t// We assume that the parent container's position, border and scale do not change for the duration of the drag.\r\n\t\t// Therefore there is no need to account for the position and border (they are eliminated by the subtraction)\r\n\t\t// and we can use the cached value for the scale.\r\n\t\toffset.x /= this._parentScale.x;\r\n\t\toffset.y /= this._parentScale.y;\r\n\r\n\t\tDomEvent.preventDefault(e);\r\n\r\n\t\tif (!this._moved) {\r\n\t\t\t// @event dragstart: Event\r\n\t\t\t// Fired when a drag starts\r\n\t\t\tthis.fire('dragstart');\r\n\r\n\t\t\tthis._moved = true;\r\n\r\n\t\t\tDomUtil.addClass(document.body, 'leaflet-dragging');\r\n\r\n\t\t\tthis._lastTarget = e.target || e.srcElement;\r\n\t\t\t// IE and Edge do not give the <use> element, so fetch it\r\n\t\t\t// if necessary\r\n\t\t\tif (window.SVGElementInstance && this._lastTarget instanceof window.SVGElementInstance) {\r\n\t\t\t\tthis._lastTarget = this._lastTarget.correspondingUseElement;\r\n\t\t\t}\r\n\t\t\tDomUtil.addClass(this._lastTarget, 'leaflet-drag-target');\r\n\t\t}\r\n\r\n\t\tthis._newPos = this._startPos.add(offset);\r\n\t\tthis._moving = true;\r\n\r\n\t\tthis._lastEvent = e;\r\n\t\tthis._updatePosition();\r\n\t},\r\n\r\n\t_updatePosition: function () {\r\n\t\tvar e = {originalEvent: this._lastEvent};\r\n\r\n\t\t// @event predrag: Event\r\n\t\t// Fired continuously during dragging *before* each corresponding\r\n\t\t// update of the element's position.\r\n\t\tthis.fire('predrag', e);\r\n\t\tDomUtil.setPosition(this._element, this._newPos);\r\n\r\n\t\t// @event drag: Event\r\n\t\t// Fired continuously during dragging.\r\n\t\tthis.fire('drag', e);\r\n\t},\r\n\r\n\t_onUp: function () {\r\n\t\t// Ignore the event if disabled; this happens in IE11\r\n\t\t// under some circumstances, see #3666.\r\n\t\tif (!this._enabled) { return; }\r\n\t\tthis.finishDrag();\r\n\t},\r\n\r\n\tfinishDrag: function (noInertia) {\r\n\t\tDomUtil.removeClass(document.body, 'leaflet-dragging');\r\n\r\n\t\tif (this._lastTarget) {\r\n\t\t\tDomUtil.removeClass(this._lastTarget, 'leaflet-drag-target');\r\n\t\t\tthis._lastTarget = null;\r\n\t\t}\r\n\r\n\t\tDomEvent.off(document, 'mousemove touchmove', this._onMove, this);\r\n\t\tDomEvent.off(document, 'mouseup touchend touchcancel', this._onUp, this);\r\n\r\n\t\tDomUtil.enableImageDrag();\r\n\t\tDomUtil.enableTextSelection();\r\n\r\n\t\tvar fireDragend = this._moved && this._moving;\r\n\r\n\t\tthis._moving = false;\r\n\t\tDraggable._dragging = false;\r\n\r\n\t\tif (fireDragend) {\r\n\t\t\t// @event dragend: DragEndEvent\r\n\t\t\t// Fired when the drag ends.\r\n\t\t\tthis.fire('dragend', {\r\n\t\t\t\tnoInertia: noInertia,\r\n\t\t\t\tdistance: this._newPos.distanceTo(this._startPos)\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n});\r\n","import * as LineUtil from './LineUtil';\r\nimport {toLatLng} from '../geo/LatLng';\r\nimport {toPoint} from './Point';\r\nimport {toLatLngBounds} from '../geo/LatLngBounds';\r\n/*\r\n * @namespace PolyUtil\r\n * Various utility functions for polygon geometries.\r\n */\r\n\r\n/* @function clipPolygon(points: Point[], bounds: Bounds, round?: Boolean): Point[]\r\n * Clips the polygon geometry defined by the given `points` by the given bounds (using the [Sutherland-Hodgman algorithm](https://en.wikipedia.org/wiki/Sutherland%E2%80%93Hodgman_algorithm)).\r\n * Used by Leaflet to only show polygon points that are on the screen or near, increasing\r\n * performance. Note that polygon points needs different algorithm for clipping\r\n * than polyline, so there's a separate method for it.\r\n */\r\nexport function clipPolygon(points, bounds, round) {\r\n\tvar clippedPoints,\r\n\t    edges = [1, 4, 2, 8],\r\n\t    i, j, k,\r\n\t    a, b,\r\n\t    len, edge, p;\r\n\r\n\tfor (i = 0, len = points.length; i < len; i++) {\r\n\t\tpoints[i]._code = LineUtil._getBitCode(points[i], bounds);\r\n\t}\r\n\r\n\t// for each edge (left, bottom, right, top)\r\n\tfor (k = 0; k < 4; k++) {\r\n\t\tedge = edges[k];\r\n\t\tclippedPoints = [];\r\n\r\n\t\tfor (i = 0, len = points.length, j = len - 1; i < len; j = i++) {\r\n\t\t\ta = points[i];\r\n\t\t\tb = points[j];\r\n\r\n\t\t\t// if a is inside the clip window\r\n\t\t\tif (!(a._code & edge)) {\r\n\t\t\t\t// if b is outside the clip window (a->b goes out of screen)\r\n\t\t\t\tif (b._code & edge) {\r\n\t\t\t\t\tp = LineUtil._getEdgeIntersection(b, a, edge, bounds, round);\r\n\t\t\t\t\tp._code = LineUtil._getBitCode(p, bounds);\r\n\t\t\t\t\tclippedPoints.push(p);\r\n\t\t\t\t}\r\n\t\t\t\tclippedPoints.push(a);\r\n\r\n\t\t\t// else if b is inside the clip window (a->b enters the screen)\r\n\t\t\t} else if (!(b._code & edge)) {\r\n\t\t\t\tp = LineUtil._getEdgeIntersection(b, a, edge, bounds, round);\r\n\t\t\t\tp._code = LineUtil._getBitCode(p, bounds);\r\n\t\t\t\tclippedPoints.push(p);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpoints = clippedPoints;\r\n\t}\r\n\r\n\treturn points;\r\n}\r\n\r\n/* @function polygonCenter(latlngs: LatLng[], crs: CRS): LatLng\r\n * Returns the center ([centroid](http://en.wikipedia.org/wiki/Centroid)) of the passed LatLngs (first ring) from a polygon.\r\n */\r\nexport function polygonCenter(latlngs, crs) {\r\n\tvar i, j, p1, p2, f, area, x, y, center;\r\n\r\n\tif (!latlngs || latlngs.length === 0) {\r\n\t\tthrow new Error('latlngs not passed');\r\n\t}\r\n\r\n\tif (!LineUtil.isFlat(latlngs)) {\r\n\t\tconsole.warn('latlngs are not flat! Only the first ring will be used');\r\n\t\tlatlngs = latlngs[0];\r\n\t}\r\n\r\n\tvar centroidLatLng = toLatLng([0, 0]);\r\n\r\n\tvar bounds = toLatLngBounds(latlngs);\r\n\tvar areaBounds = bounds.getNorthWest().distanceTo(bounds.getSouthWest()) * bounds.getNorthEast().distanceTo(bounds.getNorthWest());\r\n\t// tests showed that below 1700 rounding errors are happening\r\n\tif (areaBounds < 1700) {\r\n\t\t// getting a inexact center, to move the latlngs near to [0, 0] to prevent rounding errors\r\n\t\tcentroidLatLng = centroid(latlngs);\r\n\t}\r\n\r\n\tvar len = latlngs.length;\r\n\tvar points = [];\r\n\tfor (i = 0; i < len; i++) {\r\n\t\tvar latlng = toLatLng(latlngs[i]);\r\n\t\tpoints.push(crs.project(toLatLng([latlng.lat - centroidLatLng.lat, latlng.lng - centroidLatLng.lng])));\r\n\t}\r\n\r\n\tarea = x = y = 0;\r\n\r\n\t// polygon centroid algorithm;\r\n\tfor (i = 0, j = len - 1; i < len; j = i++) {\r\n\t\tp1 = points[i];\r\n\t\tp2 = points[j];\r\n\r\n\t\tf = p1.y * p2.x - p2.y * p1.x;\r\n\t\tx += (p1.x + p2.x) * f;\r\n\t\ty += (p1.y + p2.y) * f;\r\n\t\tarea += f * 3;\r\n\t}\r\n\r\n\tif (area === 0) {\r\n\t\t// Polygon is so small that all points are on same pixel.\r\n\t\tcenter = points[0];\r\n\t} else {\r\n\t\tcenter = [x / area, y / area];\r\n\t}\r\n\r\n\tvar latlngCenter = crs.unproject(toPoint(center));\r\n\treturn toLatLng([latlngCenter.lat + centroidLatLng.lat, latlngCenter.lng + centroidLatLng.lng]);\r\n}\r\n\r\n/* @function centroid(latlngs: LatLng[]): LatLng\r\n * Returns the 'center of mass' of the passed LatLngs.\r\n */\r\nexport function centroid(coords) {\r\n\tvar latSum = 0;\r\n\tvar lngSum = 0;\r\n\tvar len = 0;\r\n\tfor (var i = 0; i < coords.length; i++) {\r\n\t\tvar latlng = toLatLng(coords[i]);\r\n\t\tlatSum += latlng.lat;\r\n\t\tlngSum += latlng.lng;\r\n\t\tlen++;\r\n\t}\r\n\treturn toLatLng([latSum / len, lngSum / len]);\r\n}\r\n","import {Point, toPoint} from './Point';\r\nimport * as Util from '../core/Util';\r\nimport {toLatLng} from '../geo/LatLng';\r\nimport {centroid} from './PolyUtil';\r\nimport {toLatLngBounds} from '../geo/LatLngBounds';\r\n\r\n\r\n/*\r\n * @namespace LineUtil\r\n *\r\n * Various utility functions for polyline points processing, used by Leaflet internally to make polylines lightning-fast.\r\n */\r\n\r\n// Simplify polyline with vertex reduction and Douglas-Peucker simplification.\r\n// Improves rendering performance dramatically by lessening the number of points to draw.\r\n\r\n// @function simplify(points: Point[], tolerance: Number): Point[]\r\n// Dramatically reduces the number of points in a polyline while retaining\r\n// its shape and returns a new array of simplified points, using the\r\n// [Ramer-Douglas-Peucker algorithm](https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm).\r\n// Used for a huge performance boost when processing/displaying Leaflet polylines for\r\n// each zoom level and also reducing visual noise. tolerance affects the amount of\r\n// simplification (lesser value means higher quality but slower and with more points).\r\n// Also released as a separated micro-library [Simplify.js](https://mourner.github.io/simplify-js/).\r\nexport function simplify(points, tolerance) {\r\n\tif (!tolerance || !points.length) {\r\n\t\treturn points.slice();\r\n\t}\r\n\r\n\tvar sqTolerance = tolerance * tolerance;\r\n\r\n\t    // stage 1: vertex reduction\r\n\t    points = _reducePoints(points, sqTolerance);\r\n\r\n\t    // stage 2: Douglas-Peucker simplification\r\n\t    points = _simplifyDP(points, sqTolerance);\r\n\r\n\treturn points;\r\n}\r\n\r\n// @function pointToSegmentDistance(p: Point, p1: Point, p2: Point): Number\r\n// Returns the distance between point `p` and segment `p1` to `p2`.\r\nexport function pointToSegmentDistance(p, p1, p2) {\r\n\treturn Math.sqrt(_sqClosestPointOnSegment(p, p1, p2, true));\r\n}\r\n\r\n// @function closestPointOnSegment(p: Point, p1: Point, p2: Point): Number\r\n// Returns the closest point from a point `p` on a segment `p1` to `p2`.\r\nexport function closestPointOnSegment(p, p1, p2) {\r\n\treturn _sqClosestPointOnSegment(p, p1, p2);\r\n}\r\n\r\n// Ramer-Douglas-Peucker simplification, see https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm\r\nfunction _simplifyDP(points, sqTolerance) {\r\n\r\n\tvar len = points.length,\r\n\t    ArrayConstructor = typeof Uint8Array !== undefined + '' ? Uint8Array : Array,\r\n\t    markers = new ArrayConstructor(len);\r\n\r\n\t    markers[0] = markers[len - 1] = 1;\r\n\r\n\t_simplifyDPStep(points, markers, sqTolerance, 0, len - 1);\r\n\r\n\tvar i,\r\n\t    newPoints = [];\r\n\r\n\tfor (i = 0; i < len; i++) {\r\n\t\tif (markers[i]) {\r\n\t\t\tnewPoints.push(points[i]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn newPoints;\r\n}\r\n\r\nfunction _simplifyDPStep(points, markers, sqTolerance, first, last) {\r\n\r\n\tvar maxSqDist = 0,\r\n\tindex, i, sqDist;\r\n\r\n\tfor (i = first + 1; i <= last - 1; i++) {\r\n\t\tsqDist = _sqClosestPointOnSegment(points[i], points[first], points[last], true);\r\n\r\n\t\tif (sqDist > maxSqDist) {\r\n\t\t\tindex = i;\r\n\t\t\tmaxSqDist = sqDist;\r\n\t\t}\r\n\t}\r\n\r\n\tif (maxSqDist > sqTolerance) {\r\n\t\tmarkers[index] = 1;\r\n\r\n\t\t_simplifyDPStep(points, markers, sqTolerance, first, index);\r\n\t\t_simplifyDPStep(points, markers, sqTolerance, index, last);\r\n\t}\r\n}\r\n\r\n// reduce points that are too close to each other to a single point\r\nfunction _reducePoints(points, sqTolerance) {\r\n\tvar reducedPoints = [points[0]];\r\n\r\n\tfor (var i = 1, prev = 0, len = points.length; i < len; i++) {\r\n\t\tif (_sqDist(points[i], points[prev]) > sqTolerance) {\r\n\t\t\treducedPoints.push(points[i]);\r\n\t\t\tprev = i;\r\n\t\t}\r\n\t}\r\n\tif (prev < len - 1) {\r\n\t\treducedPoints.push(points[len - 1]);\r\n\t}\r\n\treturn reducedPoints;\r\n}\r\n\r\nvar _lastCode;\r\n\r\n// @function clipSegment(a: Point, b: Point, bounds: Bounds, useLastCode?: Boolean, round?: Boolean): Point[]|Boolean\r\n// Clips the segment a to b by rectangular bounds with the\r\n// [Cohen-Sutherland algorithm](https://en.wikipedia.org/wiki/Cohen%E2%80%93Sutherland_algorithm)\r\n// (modifying the segment points directly!). Used by Leaflet to only show polyline\r\n// points that are on the screen or near, increasing performance.\r\nexport function clipSegment(a, b, bounds, useLastCode, round) {\r\n\tvar codeA = useLastCode ? _lastCode : _getBitCode(a, bounds),\r\n\t    codeB = _getBitCode(b, bounds),\r\n\r\n\t    codeOut, p, newCode;\r\n\r\n\t    // save 2nd code to avoid calculating it on the next segment\r\n\t    _lastCode = codeB;\r\n\r\n\twhile (true) {\r\n\t\t// if a,b is inside the clip window (trivial accept)\r\n\t\tif (!(codeA | codeB)) {\r\n\t\t\treturn [a, b];\r\n\t\t}\r\n\r\n\t\t// if a,b is outside the clip window (trivial reject)\r\n\t\tif (codeA & codeB) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// other cases\r\n\t\tcodeOut = codeA || codeB;\r\n\t\tp = _getEdgeIntersection(a, b, codeOut, bounds, round);\r\n\t\tnewCode = _getBitCode(p, bounds);\r\n\r\n\t\tif (codeOut === codeA) {\r\n\t\t\ta = p;\r\n\t\t\tcodeA = newCode;\r\n\t\t} else {\r\n\t\t\tb = p;\r\n\t\t\tcodeB = newCode;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function _getEdgeIntersection(a, b, code, bounds, round) {\r\n\tvar dx = b.x - a.x,\r\n\t    dy = b.y - a.y,\r\n\t    min = bounds.min,\r\n\t    max = bounds.max,\r\n\t    x, y;\r\n\r\n\tif (code & 8) { // top\r\n\t\tx = a.x + dx * (max.y - a.y) / dy;\r\n\t\ty = max.y;\r\n\r\n\t} else if (code & 4) { // bottom\r\n\t\tx = a.x + dx * (min.y - a.y) / dy;\r\n\t\ty = min.y;\r\n\r\n\t} else if (code & 2) { // right\r\n\t\tx = max.x;\r\n\t\ty = a.y + dy * (max.x - a.x) / dx;\r\n\r\n\t} else if (code & 1) { // left\r\n\t\tx = min.x;\r\n\t\ty = a.y + dy * (min.x - a.x) / dx;\r\n\t}\r\n\r\n\treturn new Point(x, y, round);\r\n}\r\n\r\nexport function _getBitCode(p, bounds) {\r\n\tvar code = 0;\r\n\r\n\tif (p.x < bounds.min.x) { // left\r\n\t\tcode |= 1;\r\n\t} else if (p.x > bounds.max.x) { // right\r\n\t\tcode |= 2;\r\n\t}\r\n\r\n\tif (p.y < bounds.min.y) { // bottom\r\n\t\tcode |= 4;\r\n\t} else if (p.y > bounds.max.y) { // top\r\n\t\tcode |= 8;\r\n\t}\r\n\r\n\treturn code;\r\n}\r\n\r\n// square distance (to avoid unnecessary Math.sqrt calls)\r\nfunction _sqDist(p1, p2) {\r\n\tvar dx = p2.x - p1.x,\r\n\t    dy = p2.y - p1.y;\r\n\treturn dx * dx + dy * dy;\r\n}\r\n\r\n// return closest point on segment or distance to that point\r\nexport function _sqClosestPointOnSegment(p, p1, p2, sqDist) {\r\n\tvar x = p1.x,\r\n\t    y = p1.y,\r\n\t    dx = p2.x - x,\r\n\t    dy = p2.y - y,\r\n\t    dot = dx * dx + dy * dy,\r\n\t    t;\r\n\r\n\tif (dot > 0) {\r\n\t\tt = ((p.x - x) * dx + (p.y - y) * dy) / dot;\r\n\r\n\t\tif (t > 1) {\r\n\t\t\tx = p2.x;\r\n\t\t\ty = p2.y;\r\n\t\t} else if (t > 0) {\r\n\t\t\tx += dx * t;\r\n\t\t\ty += dy * t;\r\n\t\t}\r\n\t}\r\n\r\n\tdx = p.x - x;\r\n\tdy = p.y - y;\r\n\r\n\treturn sqDist ? dx * dx + dy * dy : new Point(x, y);\r\n}\r\n\r\n\r\n// @function isFlat(latlngs: LatLng[]): Boolean\r\n// Returns true if `latlngs` is a flat array, false is nested.\r\nexport function isFlat(latlngs) {\r\n\treturn !Util.isArray(latlngs[0]) || (typeof latlngs[0][0] !== 'object' && typeof latlngs[0][0] !== 'undefined');\r\n}\r\n\r\nexport function _flat(latlngs) {\r\n\tconsole.warn('Deprecated use of _flat, please use L.LineUtil.isFlat instead.');\r\n\treturn isFlat(latlngs);\r\n}\r\n\r\n/* @function polylineCenter(latlngs: LatLng[], crs: CRS): LatLng\r\n * Returns the center ([centroid](http://en.wikipedia.org/wiki/Centroid)) of the passed LatLngs (first ring) from a polyline.\r\n */\r\nexport function polylineCenter(latlngs, crs) {\r\n\tvar i, halfDist, segDist, dist, p1, p2, ratio, center;\r\n\r\n\tif (!latlngs || latlngs.length === 0) {\r\n\t\tthrow new Error('latlngs not passed');\r\n\t}\r\n\r\n\tif (!isFlat(latlngs)) {\r\n\t\tconsole.warn('latlngs are not flat! Only the first ring will be used');\r\n\t\tlatlngs = latlngs[0];\r\n\t}\r\n\r\n\tvar centroidLatLng = toLatLng([0, 0]);\r\n\r\n\tvar bounds = toLatLngBounds(latlngs);\r\n\tvar areaBounds = bounds.getNorthWest().distanceTo(bounds.getSouthWest()) * bounds.getNorthEast().distanceTo(bounds.getNorthWest());\r\n\t// tests showed that below 1700 rounding errors are happening\r\n\tif (areaBounds < 1700) {\r\n\t\t// getting a inexact center, to move the latlngs near to [0, 0] to prevent rounding errors\r\n\t\tcentroidLatLng = centroid(latlngs);\r\n\t}\r\n\r\n\tvar len = latlngs.length;\r\n\tvar points = [];\r\n\tfor (i = 0; i < len; i++) {\r\n\t\tvar latlng = toLatLng(latlngs[i]);\r\n\t\tpoints.push(crs.project(toLatLng([latlng.lat - centroidLatLng.lat, latlng.lng - centroidLatLng.lng])));\r\n\t}\r\n\r\n\tfor (i = 0, halfDist = 0; i < len - 1; i++) {\r\n\t\thalfDist += points[i].distanceTo(points[i + 1]) / 2;\r\n\t}\r\n\r\n\t// The line is so small in the current view that all points are on the same pixel.\r\n\tif (halfDist === 0) {\r\n\t\tcenter = points[0];\r\n\t} else {\r\n\t\tfor (i = 0, dist = 0; i < len - 1; i++) {\r\n\t\t\tp1 = points[i];\r\n\t\t\tp2 = points[i + 1];\r\n\t\t\tsegDist = p1.distanceTo(p2);\r\n\t\t\tdist += segDist;\r\n\r\n\t\t\tif (dist > halfDist) {\r\n\t\t\t\tratio = (dist - halfDist) / segDist;\r\n\t\t\t\tcenter = [\r\n\t\t\t\t\tp2.x - ratio * (p2.x - p1.x),\r\n\t\t\t\t\tp2.y - ratio * (p2.y - p1.y)\r\n\t\t\t\t];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar latlngCenter = crs.unproject(toPoint(center));\r\n\treturn toLatLng([latlngCenter.lat + centroidLatLng.lat, latlngCenter.lng + centroidLatLng.lng]);\r\n}\r\n","import {LatLng} from '../LatLng';\r\nimport {Bounds} from '../../geometry/Bounds';\r\nimport {Point} from '../../geometry/Point';\r\n\r\n/*\r\n * @namespace Projection\r\n * @section\r\n * Leaflet comes with a set of already defined Projections out of the box:\r\n *\r\n * @projection L.Projection.LonLat\r\n *\r\n * Equirectangular, or Plate Carree projection  the most simple projection,\r\n * mostly used by GIS enthusiasts. Directly maps `x` as longitude, and `y` as\r\n * latitude. Also suitable for flat worlds, e.g. game maps. Used by the\r\n * `EPSG:4326` and `Simple` CRS.\r\n */\r\n\r\nexport var LonLat = {\r\n\tproject: function (latlng) {\r\n\t\treturn new Point(latlng.lng, latlng.lat);\r\n\t},\r\n\r\n\tunproject: function (point) {\r\n\t\treturn new LatLng(point.y, point.x);\r\n\t},\r\n\r\n\tbounds: new Bounds([-180, -90], [180, 90])\r\n};\r\n","import {LatLng} from '../LatLng';\r\nimport {Bounds} from '../../geometry/Bounds';\r\nimport {Point} from '../../geometry/Point';\r\n\r\n/*\r\n * @namespace Projection\r\n * @projection L.Projection.Mercator\r\n *\r\n * Elliptical Mercator projection  more complex than Spherical Mercator. Assumes that Earth is an ellipsoid. Used by the EPSG:3395 CRS.\r\n */\r\n\r\nexport var Mercator = {\r\n\tR: 6378137,\r\n\tR_MINOR: 6356752.314245179,\r\n\r\n\tbounds: new Bounds([-20037508.34279, -15496570.73972], [20037508.34279, 18764656.23138]),\r\n\r\n\tproject: function (latlng) {\r\n\t\tvar d = Math.PI / 180,\r\n\t\t    r = this.R,\r\n\t\t    y = latlng.lat * d,\r\n\t\t    tmp = this.R_MINOR / r,\r\n\t\t    e = Math.sqrt(1 - tmp * tmp),\r\n\t\t    con = e * Math.sin(y);\r\n\r\n\t\tvar ts = Math.tan(Math.PI / 4 - y / 2) / Math.pow((1 - con) / (1 + con), e / 2);\r\n\t\ty = -r * Math.log(Math.max(ts, 1E-10));\r\n\r\n\t\treturn new Point(latlng.lng * d * r, y);\r\n\t},\r\n\r\n\tunproject: function (point) {\r\n\t\tvar d = 180 / Math.PI,\r\n\t\t    r = this.R,\r\n\t\t    tmp = this.R_MINOR / r,\r\n\t\t    e = Math.sqrt(1 - tmp * tmp),\r\n\t\t    ts = Math.exp(-point.y / r),\r\n\t\t    phi = Math.PI / 2 - 2 * Math.atan(ts);\r\n\r\n\t\tfor (var i = 0, dphi = 0.1, con; i < 15 && Math.abs(dphi) > 1e-7; i++) {\r\n\t\t\tcon = e * Math.sin(phi);\r\n\t\t\tcon = Math.pow((1 - con) / (1 + con), e / 2);\r\n\t\t\tdphi = Math.PI / 2 - 2 * Math.atan(ts * con) - phi;\r\n\t\t\tphi += dphi;\r\n\t\t}\r\n\r\n\t\treturn new LatLng(phi * d, point.x * d / r);\r\n\t}\r\n};\r\n","import {Earth} from './CRS.Earth';\r\nimport {Mercator} from '../projection/Projection.Mercator';\r\nimport {toTransformation} from '../../geometry/Transformation';\r\nimport * as Util from '../../core/Util';\r\n\r\n/*\r\n * @namespace CRS\r\n * @crs L.CRS.EPSG3395\r\n *\r\n * Rarely used by some commercial tile providers. Uses Elliptical Mercator projection.\r\n */\r\nexport var EPSG3395 = Util.extend({}, Earth, {\r\n\tcode: 'EPSG:3395',\r\n\tprojection: Mercator,\r\n\r\n\ttransformation: (function () {\r\n\t\tvar scale = 0.5 / (Math.PI * Mercator.R);\r\n\t\treturn toTransformation(scale, 0.5, -scale, 0.5);\r\n\t}())\r\n});\r\n","import {Earth} from './CRS.Earth';\r\nimport {LonLat} from '../projection/Projection.LonLat';\r\nimport {toTransformation} from '../../geometry/Transformation';\r\nimport * as Util from '../../core/Util';\r\n\r\n/*\r\n * @namespace CRS\r\n * @crs L.CRS.EPSG4326\r\n *\r\n * A common CRS among GIS enthusiasts. Uses simple Equirectangular projection.\r\n *\r\n * Leaflet 1.0.x complies with the [TMS coordinate scheme for EPSG:4326](https://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#global-geodetic),\r\n * which is a breaking change from 0.7.x behaviour.  If you are using a `TileLayer`\r\n * with this CRS, ensure that there are two 256x256 pixel tiles covering the\r\n * whole earth at zoom level zero, and that the tile coordinate origin is (-180,+90),\r\n * or (-180,-90) for `TileLayer`s with [the `tms` option](#tilelayer-tms) set.\r\n */\r\n\r\nexport var EPSG4326 = Util.extend({}, Earth, {\r\n\tcode: 'EPSG:4326',\r\n\tprojection: LonLat,\r\n\ttransformation: toTransformation(1 / 180, 1, -1 / 180, 0.5)\r\n});\r\n","import {CRS} from './CRS';\nimport {LonLat} from '../projection/Projection.LonLat';\nimport {toTransformation} from '../../geometry/Transformation';\nimport * as Util from '../../core/Util';\n\n/*\n * @namespace CRS\n * @crs L.CRS.Simple\n *\n * A simple CRS that maps longitude and latitude into `x` and `y` directly.\n * May be used for maps of flat surfaces (e.g. game maps). Note that the `y`\n * axis should still be inverted (going from bottom to top). `distance()` returns\n * simple euclidean distance.\n */\n\nexport var Simple = Util.extend({}, CRS, {\n\tprojection: LonLat,\n\ttransformation: toTransformation(1, 0, -1, 0),\n\n\tscale: function (zoom) {\n\t\treturn Math.pow(2, zoom);\n\t},\n\n\tzoom: function (scale) {\n\t\treturn Math.log(scale) / Math.LN2;\n\t},\n\n\tdistance: function (latlng1, latlng2) {\n\t\tvar dx = latlng2.lng - latlng1.lng,\n\t\t    dy = latlng2.lat - latlng1.lat;\n\n\t\treturn Math.sqrt(dx * dx + dy * dy);\n\t},\n\n\tinfinite: true\n});\n","import {CRS} from './CRS';\nimport {Earth} from './CRS.Earth';\nimport {EPSG3395} from './CRS.EPSG3395';\nimport {EPSG3857, EPSG900913} from './CRS.EPSG3857';\nimport {EPSG4326} from './CRS.EPSG4326';\nimport {Simple} from './CRS.Simple';\n\nCRS.Earth = Earth;\nCRS.EPSG3395 = EPSG3395;\nCRS.EPSG3857 = EPSG3857;\nCRS.EPSG900913 = EPSG900913;\nCRS.EPSG4326 = EPSG4326;\nCRS.Simple = Simple;\n\nexport {CRS};\n","import {Evented} from '../core/Events';\nimport {Map} from '../map/Map';\nimport * as Util from '../core/Util';\n\n/*\n * @class Layer\n * @inherits Evented\n * @aka L.Layer\n * @aka ILayer\n *\n * A set of methods from the Layer base class that all Leaflet layers use.\n * Inherits all methods, options and events from `L.Evented`.\n *\n * @example\n *\n * ```js\n * var layer = L.marker(latlng).addTo(map);\n * layer.addTo(map);\n * layer.remove();\n * ```\n *\n * @event add: Event\n * Fired after the layer is added to a map\n *\n * @event remove: Event\n * Fired after the layer is removed from a map\n */\n\n\nexport var Layer = Evented.extend({\n\n\t// Classes extending `L.Layer` will inherit the following options:\n\toptions: {\n\t\t// @option pane: String = 'overlayPane'\n\t\t// By default the layer will be added to the map's [overlay pane](#map-overlaypane). Overriding this option will cause the layer to be placed on another pane by default.\n\t\tpane: 'overlayPane',\n\n\t\t// @option attribution: String = null\n\t\t// String to be shown in the attribution control, e.g. \" OpenStreetMap contributors\". It describes the layer data and is often a legal obligation towards copyright holders and tile providers.\n\t\tattribution: null,\n\n\t\tbubblingMouseEvents: true\n\t},\n\n\t/* @section\n\t * Classes extending `L.Layer` will inherit the following methods:\n\t *\n\t * @method addTo(map: Map|LayerGroup): this\n\t * Adds the layer to the given map or layer group.\n\t */\n\taddTo: function (map) {\n\t\tmap.addLayer(this);\n\t\treturn this;\n\t},\n\n\t// @method remove: this\n\t// Removes the layer from the map it is currently active on.\n\tremove: function () {\n\t\treturn this.removeFrom(this._map || this._mapToAdd);\n\t},\n\n\t// @method removeFrom(map: Map): this\n\t// Removes the layer from the given map\n\t//\n\t// @alternative\n\t// @method removeFrom(group: LayerGroup): this\n\t// Removes the layer from the given `LayerGroup`\n\tremoveFrom: function (obj) {\n\t\tif (obj) {\n\t\t\tobj.removeLayer(this);\n\t\t}\n\t\treturn this;\n\t},\n\n\t// @method getPane(name? : String): HTMLElement\n\t// Returns the `HTMLElement` representing the named pane on the map. If `name` is omitted, returns the pane for this layer.\n\tgetPane: function (name) {\n\t\treturn this._map.getPane(name ? (this.options[name] || name) : this.options.pane);\n\t},\n\n\taddInteractiveTarget: function (targetEl) {\n\t\tthis._map._targets[Util.stamp(targetEl)] = this;\n\t\treturn this;\n\t},\n\n\tremoveInteractiveTarget: function (targetEl) {\n\t\tdelete this._map._targets[Util.stamp(targetEl)];\n\t\treturn this;\n\t},\n\n\t// @method getAttribution: String\n\t// Used by the `attribution control`, returns the [attribution option](#gridlayer-attribution).\n\tgetAttribution: function () {\n\t\treturn this.options.attribution;\n\t},\n\n\t_layerAdd: function (e) {\n\t\tvar map = e.target;\n\n\t\t// check in case layer gets added and then removed before the map is ready\n\t\tif (!map.hasLayer(this)) { return; }\n\n\t\tthis._map = map;\n\t\tthis._zoomAnimated = map._zoomAnimated;\n\n\t\tif (this.getEvents) {\n\t\t\tvar events = this.getEvents();\n\t\t\tmap.on(events, this);\n\t\t\tthis.once('remove', function () {\n\t\t\t\tmap.off(events, this);\n\t\t\t}, this);\n\t\t}\n\n\t\tthis.onAdd(map);\n\n\t\tthis.fire('add');\n\t\tmap.fire('layeradd', {layer: this});\n\t}\n});\n\n/* @section Extension methods\n * @uninheritable\n *\n * Every layer should extend from `L.Layer` and (re-)implement the following methods.\n *\n * @method onAdd(map: Map): this\n * Should contain code that creates DOM elements for the layer, adds them to `map panes` where they should belong and puts listeners on relevant map events. Called on [`map.addLayer(layer)`](#map-addlayer).\n *\n * @method onRemove(map: Map): this\n * Should contain all clean up code that removes the layer's elements from the DOM and removes listeners previously added in [`onAdd`](#layer-onadd). Called on [`map.removeLayer(layer)`](#map-removelayer).\n *\n * @method getEvents(): Object\n * This optional method should return an object like `{ viewreset: this._reset }` for [`addEventListener`](#evented-addeventlistener). The event handlers in this object will be automatically added and removed from the map with your layer.\n *\n * @method getAttribution(): String\n * This optional method should return a string containing HTML to be shown on the `Attribution control` whenever the layer is visible.\n *\n * @method beforeAdd(map: Map): this\n * Optional method. Called on [`map.addLayer(layer)`](#map-addlayer), before the layer is added to the map, before events are initialized, without waiting until the map is in a usable state. Use for early initialization only.\n */\n\n\n/* @namespace Map\n * @section Layer events\n *\n * @event layeradd: LayerEvent\n * Fired when a new layer is added to the map.\n *\n * @event layerremove: LayerEvent\n * Fired when some layer is removed from the map\n *\n * @section Methods for Layers and Controls\n */\nMap.include({\n\t// @method addLayer(layer: Layer): this\n\t// Adds the given layer to the map\n\taddLayer: function (layer) {\n\t\tif (!layer._layerAdd) {\n\t\t\tthrow new Error('The provided object is not a Layer.');\n\t\t}\n\n\t\tvar id = Util.stamp(layer);\n\t\tif (this._layers[id]) { return this; }\n\t\tthis._layers[id] = layer;\n\n\t\tlayer._mapToAdd = this;\n\n\t\tif (layer.beforeAdd) {\n\t\t\tlayer.beforeAdd(this);\n\t\t}\n\n\t\tthis.whenReady(layer._layerAdd, layer);\n\n\t\treturn this;\n\t},\n\n\t// @method removeLayer(layer: Layer): this\n\t// Removes the given layer from the map.\n\tremoveLayer: function (layer) {\n\t\tvar id = Util.stamp(layer);\n\n\t\tif (!this._layers[id]) { return this; }\n\n\t\tif (this._loaded) {\n\t\t\tlayer.onRemove(this);\n\t\t}\n\n\t\tdelete this._layers[id];\n\n\t\tif (this._loaded) {\n\t\t\tthis.fire('layerremove', {layer: layer});\n\t\t\tlayer.fire('remove');\n\t\t}\n\n\t\tlayer._map = layer._mapToAdd = null;\n\n\t\treturn this;\n\t},\n\n\t// @method hasLayer(layer: Layer): Boolean\n\t// Returns `true` if the given layer is currently added to the map\n\thasLayer: function (layer) {\n\t\treturn Util.stamp(layer) in this._layers;\n\t},\n\n\t/* @method eachLayer(fn: Function, context?: Object): this\n\t * Iterates over the layers of the map, optionally specifying context of the iterator function.\n\t * ```\n\t * map.eachLayer(function(layer){\n\t *     layer.bindPopup('Hello');\n\t * });\n\t * ```\n\t */\n\teachLayer: function (method, context) {\n\t\tfor (var i in this._layers) {\n\t\t\tmethod.call(context, this._layers[i]);\n\t\t}\n\t\treturn this;\n\t},\n\n\t_addLayers: function (layers) {\n\t\tlayers = layers ? (Util.isArray(layers) ? layers : [layers]) : [];\n\n\t\tfor (var i = 0, len = layers.length; i < len; i++) {\n\t\t\tthis.addLayer(layers[i]);\n\t\t}\n\t},\n\n\t_addZoomLimit: function (layer) {\n\t\tif (!isNaN(layer.options.maxZoom) || !isNaN(layer.options.minZoom)) {\n\t\t\tthis._zoomBoundLayers[Util.stamp(layer)] = layer;\n\t\t\tthis._updateZoomLevels();\n\t\t}\n\t},\n\n\t_removeZoomLimit: function (layer) {\n\t\tvar id = Util.stamp(layer);\n\n\t\tif (this._zoomBoundLayers[id]) {\n\t\t\tdelete this._zoomBoundLayers[id];\n\t\t\tthis._updateZoomLevels();\n\t\t}\n\t},\n\n\t_updateZoomLevels: function () {\n\t\tvar minZoom = Infinity,\n\t\t    maxZoom = -Infinity,\n\t\t    oldZoomSpan = this._getZoomSpan();\n\n\t\tfor (var i in this._zoomBoundLayers) {\n\t\t\tvar options = this._zoomBoundLayers[i].options;\n\n\t\t\tminZoom = options.minZoom === undefined ? minZoom : Math.min(minZoom, options.minZoom);\n\t\t\tmaxZoom = options.maxZoom === undefined ? maxZoom : Math.max(maxZoom, options.maxZoom);\n\t\t}\n\n\t\tthis._layersMaxZoom = maxZoom === -Infinity ? undefined : maxZoom;\n\t\tthis._layersMinZoom = minZoom === Infinity ? undefined : minZoom;\n\n\t\t// @section Map state change events\n\t\t// @event zoomlevelschange: Event\n\t\t// Fired when the number of zoomlevels on the map is changed due\n\t\t// to adding or removing a layer.\n\t\tif (oldZoomSpan !== this._getZoomSpan()) {\n\t\t\tthis.fire('zoomlevelschange');\n\t\t}\n\n\t\tif (this.options.maxZoom === undefined && this._layersMaxZoom && this.getZoom() > this._layersMaxZoom) {\n\t\t\tthis.setZoom(this._layersMaxZoom);\n\t\t}\n\t\tif (this.options.minZoom === undefined && this._layersMinZoom && this.getZoom() < this._layersMinZoom) {\n\t\t\tthis.setZoom(this._layersMinZoom);\n\t\t}\n\t}\n});\n","\r\nimport {Layer} from './Layer';\r\nimport * as Util from '../core/Util';\r\n\r\n/*\r\n * @class LayerGroup\r\n * @aka L.LayerGroup\r\n * @inherits Interactive layer\r\n *\r\n * Used to group several layers and handle them as one. If you add it to the map,\r\n * any layers added or removed from the group will be added/removed on the map as\r\n * well. Extends `Layer`.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * L.layerGroup([marker1, marker2])\r\n * \t.addLayer(polyline)\r\n * \t.addTo(map);\r\n * ```\r\n */\r\n\r\nexport var LayerGroup = Layer.extend({\r\n\r\n\tinitialize: function (layers, options) {\r\n\t\tUtil.setOptions(this, options);\r\n\r\n\t\tthis._layers = {};\r\n\r\n\t\tvar i, len;\r\n\r\n\t\tif (layers) {\r\n\t\t\tfor (i = 0, len = layers.length; i < len; i++) {\r\n\t\t\t\tthis.addLayer(layers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// @method addLayer(layer: Layer): this\r\n\t// Adds the given layer to the group.\r\n\taddLayer: function (layer) {\r\n\t\tvar id = this.getLayerId(layer);\r\n\r\n\t\tthis._layers[id] = layer;\r\n\r\n\t\tif (this._map) {\r\n\t\t\tthis._map.addLayer(layer);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method removeLayer(layer: Layer): this\r\n\t// Removes the given layer from the group.\r\n\t// @alternative\r\n\t// @method removeLayer(id: Number): this\r\n\t// Removes the layer with the given internal ID from the group.\r\n\tremoveLayer: function (layer) {\r\n\t\tvar id = layer in this._layers ? layer : this.getLayerId(layer);\r\n\r\n\t\tif (this._map && this._layers[id]) {\r\n\t\t\tthis._map.removeLayer(this._layers[id]);\r\n\t\t}\r\n\r\n\t\tdelete this._layers[id];\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method hasLayer(layer: Layer): Boolean\r\n\t// Returns `true` if the given layer is currently added to the group.\r\n\t// @alternative\r\n\t// @method hasLayer(id: Number): Boolean\r\n\t// Returns `true` if the given internal ID is currently added to the group.\r\n\thasLayer: function (layer) {\r\n\t\tvar layerId = typeof layer === 'number' ? layer : this.getLayerId(layer);\r\n\t\treturn layerId in this._layers;\r\n\t},\r\n\r\n\t// @method clearLayers(): this\r\n\t// Removes all the layers from the group.\r\n\tclearLayers: function () {\r\n\t\treturn this.eachLayer(this.removeLayer, this);\r\n\t},\r\n\r\n\t// @method invoke(methodName: String, ): this\r\n\t// Calls `methodName` on every layer contained in this group, passing any\r\n\t// additional parameters. Has no effect if the layers contained do not\r\n\t// implement `methodName`.\r\n\tinvoke: function (methodName) {\r\n\t\tvar args = Array.prototype.slice.call(arguments, 1),\r\n\t\t    i, layer;\r\n\r\n\t\tfor (i in this._layers) {\r\n\t\t\tlayer = this._layers[i];\r\n\r\n\t\t\tif (layer[methodName]) {\r\n\t\t\t\tlayer[methodName].apply(layer, args);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis.eachLayer(map.addLayer, map);\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tthis.eachLayer(map.removeLayer, map);\r\n\t},\r\n\r\n\t// @method eachLayer(fn: Function, context?: Object): this\r\n\t// Iterates over the layers of the group, optionally specifying context of the iterator function.\r\n\t// ```js\r\n\t// group.eachLayer(function (layer) {\r\n\t// \tlayer.bindPopup('Hello');\r\n\t// });\r\n\t// ```\r\n\teachLayer: function (method, context) {\r\n\t\tfor (var i in this._layers) {\r\n\t\t\tmethod.call(context, this._layers[i]);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method getLayer(id: Number): Layer\r\n\t// Returns the layer with the given internal ID.\r\n\tgetLayer: function (id) {\r\n\t\treturn this._layers[id];\r\n\t},\r\n\r\n\t// @method getLayers(): Layer[]\r\n\t// Returns an array of all the layers added to the group.\r\n\tgetLayers: function () {\r\n\t\tvar layers = [];\r\n\t\tthis.eachLayer(layers.push, layers);\r\n\t\treturn layers;\r\n\t},\r\n\r\n\t// @method setZIndex(zIndex: Number): this\r\n\t// Calls `setZIndex` on every layer contained in this group, passing the z-index.\r\n\tsetZIndex: function (zIndex) {\r\n\t\treturn this.invoke('setZIndex', zIndex);\r\n\t},\r\n\r\n\t// @method getLayerId(layer: Layer): Number\r\n\t// Returns the internal ID for a layer\r\n\tgetLayerId: function (layer) {\r\n\t\treturn Util.stamp(layer);\r\n\t}\r\n});\r\n\r\n\r\n// @factory L.layerGroup(layers?: Layer[], options?: Object)\r\n// Create a layer group, optionally given an initial set of layers and an `options` object.\r\nexport var layerGroup = function (layers, options) {\r\n\treturn new LayerGroup(layers, options);\r\n};\r\n","import {LayerGroup} from './LayerGroup';\r\nimport {LatLngBounds} from '../geo/LatLngBounds';\r\n\r\n/*\r\n * @class FeatureGroup\r\n * @aka L.FeatureGroup\r\n * @inherits LayerGroup\r\n *\r\n * Extended `LayerGroup` that makes it easier to do the same thing to all its member layers:\r\n *  * [`bindPopup`](#layer-bindpopup) binds a popup to all of the layers at once (likewise with [`bindTooltip`](#layer-bindtooltip))\r\n *  * Events are propagated to the `FeatureGroup`, so if the group has an event\r\n * handler, it will handle events from any of the layers. This includes mouse events\r\n * and custom events.\r\n *  * Has `layeradd` and `layerremove` events\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * L.featureGroup([marker1, marker2, polyline])\r\n * \t.bindPopup('Hello world!')\r\n * \t.on('click', function() { alert('Clicked on a member of the group!'); })\r\n * \t.addTo(map);\r\n * ```\r\n */\r\n\r\nexport var FeatureGroup = LayerGroup.extend({\r\n\r\n\taddLayer: function (layer) {\r\n\t\tif (this.hasLayer(layer)) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tlayer.addEventParent(this);\r\n\r\n\t\tLayerGroup.prototype.addLayer.call(this, layer);\r\n\r\n\t\t// @event layeradd: LayerEvent\r\n\t\t// Fired when a layer is added to this `FeatureGroup`\r\n\t\treturn this.fire('layeradd', {layer: layer});\r\n\t},\r\n\r\n\tremoveLayer: function (layer) {\r\n\t\tif (!this.hasLayer(layer)) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tif (layer in this._layers) {\r\n\t\t\tlayer = this._layers[layer];\r\n\t\t}\r\n\r\n\t\tlayer.removeEventParent(this);\r\n\r\n\t\tLayerGroup.prototype.removeLayer.call(this, layer);\r\n\r\n\t\t// @event layerremove: LayerEvent\r\n\t\t// Fired when a layer is removed from this `FeatureGroup`\r\n\t\treturn this.fire('layerremove', {layer: layer});\r\n\t},\r\n\r\n\t// @method setStyle(style: Path options): this\r\n\t// Sets the given path options to each layer of the group that has a `setStyle` method.\r\n\tsetStyle: function (style) {\r\n\t\treturn this.invoke('setStyle', style);\r\n\t},\r\n\r\n\t// @method bringToFront(): this\r\n\t// Brings the layer group to the top of all other layers\r\n\tbringToFront: function () {\r\n\t\treturn this.invoke('bringToFront');\r\n\t},\r\n\r\n\t// @method bringToBack(): this\r\n\t// Brings the layer group to the back of all other layers\r\n\tbringToBack: function () {\r\n\t\treturn this.invoke('bringToBack');\r\n\t},\r\n\r\n\t// @method getBounds(): LatLngBounds\r\n\t// Returns the LatLngBounds of the Feature Group (created from bounds and coordinates of its children).\r\n\tgetBounds: function () {\r\n\t\tvar bounds = new LatLngBounds();\r\n\r\n\t\tfor (var id in this._layers) {\r\n\t\t\tvar layer = this._layers[id];\r\n\t\t\tbounds.extend(layer.getBounds ? layer.getBounds() : layer.getLatLng());\r\n\t\t}\r\n\t\treturn bounds;\r\n\t}\r\n});\r\n\r\n// @factory L.featureGroup(layers?: Layer[], options?: Object)\r\n// Create a feature group, optionally given an initial set of layers and an `options` object.\r\nexport var featureGroup = function (layers, options) {\r\n\treturn new FeatureGroup(layers, options);\r\n};\r\n","import {Class} from '../../core/Class';\r\nimport {setOptions} from '../../core/Util';\r\nimport {toPoint as point} from '../../geometry/Point';\r\nimport Browser from '../../core/Browser';\r\n\r\n/*\r\n * @class Icon\r\n * @aka L.Icon\r\n *\r\n * Represents an icon to provide when creating a marker.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * var myIcon = L.icon({\r\n *     iconUrl: 'my-icon.png',\r\n *     iconRetinaUrl: 'my-icon@2x.png',\r\n *     iconSize: [38, 95],\r\n *     iconAnchor: [22, 94],\r\n *     popupAnchor: [-3, -76],\r\n *     shadowUrl: 'my-icon-shadow.png',\r\n *     shadowRetinaUrl: 'my-icon-shadow@2x.png',\r\n *     shadowSize: [68, 95],\r\n *     shadowAnchor: [22, 94]\r\n * });\r\n *\r\n * L.marker([50.505, 30.57], {icon: myIcon}).addTo(map);\r\n * ```\r\n *\r\n * `L.Icon.Default` extends `L.Icon` and is the blue icon Leaflet uses for markers by default.\r\n *\r\n */\r\n\r\nexport var Icon = Class.extend({\r\n\r\n\t/* @section\r\n\t * @aka Icon options\r\n\t *\r\n\t * @option iconUrl: String = null\r\n\t * **(required)** The URL to the icon image (absolute or relative to your script path).\r\n\t *\r\n\t * @option iconRetinaUrl: String = null\r\n\t * The URL to a retina sized version of the icon image (absolute or relative to your\r\n\t * script path). Used for Retina screen devices.\r\n\t *\r\n\t * @option iconSize: Point = null\r\n\t * Size of the icon image in pixels.\r\n\t *\r\n\t * @option iconAnchor: Point = null\r\n\t * The coordinates of the \"tip\" of the icon (relative to its top left corner). The icon\r\n\t * will be aligned so that this point is at the marker's geographical location. Centered\r\n\t * by default if size is specified, also can be set in CSS with negative margins.\r\n\t *\r\n\t * @option popupAnchor: Point = [0, 0]\r\n\t * The coordinates of the point from which popups will \"open\", relative to the icon anchor.\r\n\t *\r\n\t * @option tooltipAnchor: Point = [0, 0]\r\n\t * The coordinates of the point from which tooltips will \"open\", relative to the icon anchor.\r\n\t *\r\n\t * @option shadowUrl: String = null\r\n\t * The URL to the icon shadow image. If not specified, no shadow image will be created.\r\n\t *\r\n\t * @option shadowRetinaUrl: String = null\r\n\t *\r\n\t * @option shadowSize: Point = null\r\n\t * Size of the shadow image in pixels.\r\n\t *\r\n\t * @option shadowAnchor: Point = null\r\n\t * The coordinates of the \"tip\" of the shadow (relative to its top left corner) (the same\r\n\t * as iconAnchor if not specified).\r\n\t *\r\n\t * @option className: String = ''\r\n\t * A custom class name to assign to both icon and shadow images. Empty by default.\r\n\t */\r\n\r\n\toptions: {\r\n\t\tpopupAnchor: [0, 0],\r\n\t\ttooltipAnchor: [0, 0],\r\n\r\n\t\t// @option crossOrigin: Boolean|String = false\r\n\t\t// Whether the crossOrigin attribute will be added to the tiles.\r\n\t\t// If a String is provided, all tiles will have their crossOrigin attribute set to the String provided. This is needed if you want to access tile pixel data.\r\n\t\t// Refer to [CORS Settings](https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes) for valid String values.\r\n\t\tcrossOrigin: false\r\n\t},\r\n\r\n\tinitialize: function (options) {\r\n\t\tsetOptions(this, options);\r\n\t},\r\n\r\n\t// @method createIcon(oldIcon?: HTMLElement): HTMLElement\r\n\t// Called internally when the icon has to be shown, returns a `<img>` HTML element\r\n\t// styled according to the options.\r\n\tcreateIcon: function (oldIcon) {\r\n\t\treturn this._createIcon('icon', oldIcon);\r\n\t},\r\n\r\n\t// @method createShadow(oldIcon?: HTMLElement): HTMLElement\r\n\t// As `createIcon`, but for the shadow beneath it.\r\n\tcreateShadow: function (oldIcon) {\r\n\t\treturn this._createIcon('shadow', oldIcon);\r\n\t},\r\n\r\n\t_createIcon: function (name, oldIcon) {\r\n\t\tvar src = this._getIconUrl(name);\r\n\r\n\t\tif (!src) {\r\n\t\t\tif (name === 'icon') {\r\n\t\t\t\tthrow new Error('iconUrl not set in Icon options (see the docs).');\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar img = this._createImg(src, oldIcon && oldIcon.tagName === 'IMG' ? oldIcon : null);\r\n\t\tthis._setIconStyles(img, name);\r\n\r\n\t\tif (this.options.crossOrigin || this.options.crossOrigin === '') {\r\n\t\t\timg.crossOrigin = this.options.crossOrigin === true ? '' : this.options.crossOrigin;\r\n\t\t}\r\n\r\n\t\treturn img;\r\n\t},\r\n\r\n\t_setIconStyles: function (img, name) {\r\n\t\tvar options = this.options;\r\n\t\tvar sizeOption = options[name + 'Size'];\r\n\r\n\t\tif (typeof sizeOption === 'number') {\r\n\t\t\tsizeOption = [sizeOption, sizeOption];\r\n\t\t}\r\n\r\n\t\tvar size = point(sizeOption),\r\n\t\t    anchor = point(name === 'shadow' && options.shadowAnchor || options.iconAnchor ||\r\n\t\t            size && size.divideBy(2, true));\r\n\r\n\t\timg.className = 'leaflet-marker-' + name + ' ' + (options.className || '');\r\n\r\n\t\tif (anchor) {\r\n\t\t\timg.style.marginLeft = (-anchor.x) + 'px';\r\n\t\t\timg.style.marginTop  = (-anchor.y) + 'px';\r\n\t\t}\r\n\r\n\t\tif (size) {\r\n\t\t\timg.style.width  = size.x + 'px';\r\n\t\t\timg.style.height = size.y + 'px';\r\n\t\t}\r\n\t},\r\n\r\n\t_createImg: function (src, el) {\r\n\t\tel = el || document.createElement('img');\r\n\t\tel.src = src;\r\n\t\treturn el;\r\n\t},\r\n\r\n\t_getIconUrl: function (name) {\r\n\t\treturn Browser.retina && this.options[name + 'RetinaUrl'] || this.options[name + 'Url'];\r\n\t}\r\n});\r\n\r\n\r\n// @factory L.icon(options: Icon options)\r\n// Creates an icon instance with the given options.\r\nexport function icon(options) {\r\n\treturn new Icon(options);\r\n}\r\n","import {Icon} from './Icon';\nimport * as DomUtil from '../../dom/DomUtil';\n\n/*\n * @miniclass Icon.Default (Icon)\n * @aka L.Icon.Default\n * @section\n *\n * A trivial subclass of `Icon`, represents the icon to use in `Marker`s when\n * no icon is specified. Points to the blue marker image distributed with Leaflet\n * releases.\n *\n * In order to customize the default icon, just change the properties of `L.Icon.Default.prototype.options`\n * (which is a set of `Icon options`).\n *\n * If you want to _completely_ replace the default icon, override the\n * `L.Marker.prototype.options.icon` with your own icon instead.\n */\n\nexport var IconDefault = Icon.extend({\n\n\toptions: {\n\t\ticonUrl:       'marker-icon.png',\n\t\ticonRetinaUrl: 'marker-icon-2x.png',\n\t\tshadowUrl:     'marker-shadow.png',\n\t\ticonSize:    [25, 41],\n\t\ticonAnchor:  [12, 41],\n\t\tpopupAnchor: [1, -34],\n\t\ttooltipAnchor: [16, -28],\n\t\tshadowSize:  [41, 41]\n\t},\n\n\t_getIconUrl: function (name) {\n\t\tif (typeof IconDefault.imagePath !== 'string') {\t// Deprecated, backwards-compatibility only\n\t\t\tIconDefault.imagePath = this._detectIconPath();\n\t\t}\n\n\t\t// @option imagePath: String\n\t\t// `Icon.Default` will try to auto-detect the location of the\n\t\t// blue icon images. If you are placing these images in a non-standard\n\t\t// way, set this option to point to the right path.\n\t\treturn (this.options.imagePath || IconDefault.imagePath) + Icon.prototype._getIconUrl.call(this, name);\n\t},\n\n\t_stripUrl: function (path) {\t// separate function to use in tests\n\t\tvar strip = function (str, re, idx) {\n\t\t\tvar match = re.exec(str);\n\t\t\treturn match && match[idx];\n\t\t};\n\t\tpath = strip(path, /^url\\((['\"])?(.+)\\1\\)$/, 2);\n\t\treturn path && strip(path, /^(.*)marker-icon\\.png$/, 1);\n\t},\n\n\t_detectIconPath: function () {\n\t\tvar el = DomUtil.create('div',  'leaflet-default-icon-path', document.body);\n\t\tvar path = DomUtil.getStyle(el, 'background-image') ||\n\t\t           DomUtil.getStyle(el, 'backgroundImage');\t// IE8\n\n\t\tdocument.body.removeChild(el);\n\t\tpath = this._stripUrl(path);\n\t\tif (path) { return path; }\n\t\tvar link = document.querySelector('link[href$=\"leaflet.css\"]');\n\t\tif (!link) { return ''; }\n\t\treturn link.href.substring(0, link.href.length - 'leaflet.css'.length - 1);\n\t}\n});\n","import {Handler} from '../../core/Handler';\nimport * as DomUtil from '../../dom/DomUtil';\nimport {Draggable} from '../../dom/Draggable';\nimport {toBounds} from '../../geometry/Bounds';\nimport {toPoint} from '../../geometry/Point';\nimport {requestAnimFrame, cancelAnimFrame} from '../../core/Util';\n\n/*\n * L.Handler.MarkerDrag is used internally by L.Marker to make the markers draggable.\n */\n\n\n/* @namespace Marker\n * @section Interaction handlers\n *\n * Interaction handlers are properties of a marker instance that allow you to control interaction behavior in runtime, enabling or disabling certain features such as dragging (see `Handler` methods). Example:\n *\n * ```js\n * marker.dragging.disable();\n * ```\n *\n * @property dragging: Handler\n * Marker dragging handler (by both mouse and touch). Only valid when the marker is on the map (Otherwise set [`marker.options.draggable`](#marker-draggable)).\n */\n\nexport var MarkerDrag = Handler.extend({\n\tinitialize: function (marker) {\n\t\tthis._marker = marker;\n\t},\n\n\taddHooks: function () {\n\t\tvar icon = this._marker._icon;\n\n\t\tif (!this._draggable) {\n\t\t\tthis._draggable = new Draggable(icon, icon, true);\n\t\t}\n\n\t\tthis._draggable.on({\n\t\t\tdragstart: this._onDragStart,\n\t\t\tpredrag: this._onPreDrag,\n\t\t\tdrag: this._onDrag,\n\t\t\tdragend: this._onDragEnd\n\t\t}, this).enable();\n\n\t\tDomUtil.addClass(icon, 'leaflet-marker-draggable');\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._draggable.off({\n\t\t\tdragstart: this._onDragStart,\n\t\t\tpredrag: this._onPreDrag,\n\t\t\tdrag: this._onDrag,\n\t\t\tdragend: this._onDragEnd\n\t\t}, this).disable();\n\n\t\tif (this._marker._icon) {\n\t\t\tDomUtil.removeClass(this._marker._icon, 'leaflet-marker-draggable');\n\t\t}\n\t},\n\n\tmoved: function () {\n\t\treturn this._draggable && this._draggable._moved;\n\t},\n\n\t_adjustPan: function (e) {\n\t\tvar marker = this._marker,\n\t\t    map = marker._map,\n\t\t    speed = this._marker.options.autoPanSpeed,\n\t\t    padding = this._marker.options.autoPanPadding,\n\t\t    iconPos = DomUtil.getPosition(marker._icon),\n\t\t    bounds = map.getPixelBounds(),\n\t\t    origin = map.getPixelOrigin();\n\n\t\tvar panBounds = toBounds(\n\t\t\tbounds.min._subtract(origin).add(padding),\n\t\t\tbounds.max._subtract(origin).subtract(padding)\n\t\t);\n\n\t\tif (!panBounds.contains(iconPos)) {\n\t\t\t// Compute incremental movement\n\t\t\tvar movement = toPoint(\n\t\t\t\t(Math.max(panBounds.max.x, iconPos.x) - panBounds.max.x) / (bounds.max.x - panBounds.max.x) -\n\t\t\t\t(Math.min(panBounds.min.x, iconPos.x) - panBounds.min.x) / (bounds.min.x - panBounds.min.x),\n\n\t\t\t\t(Math.max(panBounds.max.y, iconPos.y) - panBounds.max.y) / (bounds.max.y - panBounds.max.y) -\n\t\t\t\t(Math.min(panBounds.min.y, iconPos.y) - panBounds.min.y) / (bounds.min.y - panBounds.min.y)\n\t\t\t).multiplyBy(speed);\n\n\t\t\tmap.panBy(movement, {animate: false});\n\n\t\t\tthis._draggable._newPos._add(movement);\n\t\t\tthis._draggable._startPos._add(movement);\n\n\t\t\tDomUtil.setPosition(marker._icon, this._draggable._newPos);\n\t\t\tthis._onDrag(e);\n\n\t\t\tthis._panRequest = requestAnimFrame(this._adjustPan.bind(this, e));\n\t\t}\n\t},\n\n\t_onDragStart: function () {\n\t\t// @section Dragging events\n\t\t// @event dragstart: Event\n\t\t// Fired when the user starts dragging the marker.\n\n\t\t// @event movestart: Event\n\t\t// Fired when the marker starts moving (because of dragging).\n\n\t\tthis._oldLatLng = this._marker.getLatLng();\n\n\t\t// When using ES6 imports it could not be set when `Popup` was not imported as well\n\t\tthis._marker.closePopup && this._marker.closePopup();\n\n\t\tthis._marker\n\t\t\t.fire('movestart')\n\t\t\t.fire('dragstart');\n\t},\n\n\t_onPreDrag: function (e) {\n\t\tif (this._marker.options.autoPan) {\n\t\t\tcancelAnimFrame(this._panRequest);\n\t\t\tthis._panRequest = requestAnimFrame(this._adjustPan.bind(this, e));\n\t\t}\n\t},\n\n\t_onDrag: function (e) {\n\t\tvar marker = this._marker,\n\t\t    shadow = marker._shadow,\n\t\t    iconPos = DomUtil.getPosition(marker._icon),\n\t\t    latlng = marker._map.layerPointToLatLng(iconPos);\n\n\t\t// update shadow position\n\t\tif (shadow) {\n\t\t\tDomUtil.setPosition(shadow, iconPos);\n\t\t}\n\n\t\tmarker._latlng = latlng;\n\t\te.latlng = latlng;\n\t\te.oldLatLng = this._oldLatLng;\n\n\t\t// @event drag: Event\n\t\t// Fired repeatedly while the user drags the marker.\n\t\tmarker\n\t\t    .fire('move', e)\n\t\t    .fire('drag', e);\n\t},\n\n\t_onDragEnd: function (e) {\n\t\t// @event dragend: DragEndEvent\n\t\t// Fired when the user stops dragging the marker.\n\n\t\t cancelAnimFrame(this._panRequest);\n\n\t\t// @event moveend: Event\n\t\t// Fired when the marker stops moving (because of dragging).\n\t\tdelete this._oldLatLng;\n\t\tthis._marker\n\t\t    .fire('moveend')\n\t\t    .fire('dragend', e);\n\t}\n});\n","import {Layer} from '../Layer';\r\nimport {IconDefault} from './Icon.Default';\r\nimport * as Util from '../../core/Util';\r\nimport {toLatLng as latLng} from '../../geo/LatLng';\r\nimport {toPoint as point} from '../../geometry/Point';\r\nimport * as DomUtil from '../../dom/DomUtil';\r\nimport * as DomEvent from '../../dom/DomEvent';\r\nimport {MarkerDrag} from './Marker.Drag';\r\n\r\n/*\r\n * @class Marker\r\n * @inherits Interactive layer\r\n * @aka L.Marker\r\n * L.Marker is used to display clickable/draggable icons on the map. Extends `Layer`.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * L.marker([50.5, 30.5]).addTo(map);\r\n * ```\r\n */\r\n\r\nexport var Marker = Layer.extend({\r\n\r\n\t// @section\r\n\t// @aka Marker options\r\n\toptions: {\r\n\t\t// @option icon: Icon = *\r\n\t\t// Icon instance to use for rendering the marker.\r\n\t\t// See [Icon documentation](#L.Icon) for details on how to customize the marker icon.\r\n\t\t// If not specified, a common instance of `L.Icon.Default` is used.\r\n\t\ticon: new IconDefault(),\r\n\r\n\t\t// Option inherited from \"Interactive layer\" abstract class\r\n\t\tinteractive: true,\r\n\r\n\t\t// @option keyboard: Boolean = true\r\n\t\t// Whether the marker can be tabbed to with a keyboard and clicked by pressing enter.\r\n\t\tkeyboard: true,\r\n\r\n\t\t// @option title: String = ''\r\n\t\t// Text for the browser tooltip that appear on marker hover (no tooltip by default).\r\n\t\t// [Useful for accessibility](https://leafletjs.com/examples/accessibility/#markers-must-be-labelled).\r\n\t\ttitle: '',\r\n\r\n\t\t// @option alt: String = 'Marker'\r\n\t\t// Text for the `alt` attribute of the icon image.\r\n\t\t// [Useful for accessibility](https://leafletjs.com/examples/accessibility/#markers-must-be-labelled).\r\n\t\talt: 'Marker',\r\n\r\n\t\t// @option zIndexOffset: Number = 0\r\n\t\t// By default, marker images zIndex is set automatically based on its latitude. Use this option if you want to put the marker on top of all others (or below), specifying a high value like `1000` (or high negative value, respectively).\r\n\t\tzIndexOffset: 0,\r\n\r\n\t\t// @option opacity: Number = 1.0\r\n\t\t// The opacity of the marker.\r\n\t\topacity: 1,\r\n\r\n\t\t// @option riseOnHover: Boolean = false\r\n\t\t// If `true`, the marker will get on top of others when you hover the mouse over it.\r\n\t\triseOnHover: false,\r\n\r\n\t\t// @option riseOffset: Number = 250\r\n\t\t// The z-index offset used for the `riseOnHover` feature.\r\n\t\triseOffset: 250,\r\n\r\n\t\t// @option pane: String = 'markerPane'\r\n\t\t// `Map pane` where the markers icon will be added.\r\n\t\tpane: 'markerPane',\r\n\r\n\t\t// @option shadowPane: String = 'shadowPane'\r\n\t\t// `Map pane` where the markers shadow will be added.\r\n\t\tshadowPane: 'shadowPane',\r\n\r\n\t\t// @option bubblingMouseEvents: Boolean = false\r\n\t\t// When `true`, a mouse event on this marker will trigger the same event on the map\r\n\t\t// (unless [`L.DomEvent.stopPropagation`](#domevent-stoppropagation) is used).\r\n\t\tbubblingMouseEvents: false,\r\n\r\n\t\t// @option autoPanOnFocus: Boolean = true\r\n\t\t// When `true`, the map will pan whenever the marker is focused (via\r\n\t\t// e.g. pressing `tab` on the keyboard) to ensure the marker is\r\n\t\t// visible within the map's bounds\r\n\t\tautoPanOnFocus: true,\r\n\r\n\t\t// @section Draggable marker options\r\n\t\t// @option draggable: Boolean = false\r\n\t\t// Whether the marker is draggable with mouse/touch or not.\r\n\t\tdraggable: false,\r\n\r\n\t\t// @option autoPan: Boolean = false\r\n\t\t// Whether to pan the map when dragging this marker near its edge or not.\r\n\t\tautoPan: false,\r\n\r\n\t\t// @option autoPanPadding: Point = Point(50, 50)\r\n\t\t// Distance (in pixels to the left/right and to the top/bottom) of the\r\n\t\t// map edge to start panning the map.\r\n\t\tautoPanPadding: [50, 50],\r\n\r\n\t\t// @option autoPanSpeed: Number = 10\r\n\t\t// Number of pixels the map should pan by.\r\n\t\tautoPanSpeed: 10\r\n\t},\r\n\r\n\t/* @section\r\n\t *\r\n\t * In addition to [shared layer methods](#Layer) like `addTo()` and `remove()` and [popup methods](#Popup) like bindPopup() you can also use the following methods:\r\n\t */\r\n\r\n\tinitialize: function (latlng, options) {\r\n\t\tUtil.setOptions(this, options);\r\n\t\tthis._latlng = latLng(latlng);\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._zoomAnimated = this._zoomAnimated && map.options.markerZoomAnimation;\r\n\r\n\t\tif (this._zoomAnimated) {\r\n\t\t\tmap.on('zoomanim', this._animateZoom, this);\r\n\t\t}\r\n\r\n\t\tthis._initIcon();\r\n\t\tthis.update();\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tif (this.dragging && this.dragging.enabled()) {\r\n\t\t\tthis.options.draggable = true;\r\n\t\t\tthis.dragging.removeHooks();\r\n\t\t}\r\n\t\tdelete this.dragging;\r\n\r\n\t\tif (this._zoomAnimated) {\r\n\t\t\tmap.off('zoomanim', this._animateZoom, this);\r\n\t\t}\r\n\r\n\t\tthis._removeIcon();\r\n\t\tthis._removeShadow();\r\n\t},\r\n\r\n\tgetEvents: function () {\r\n\t\treturn {\r\n\t\t\tzoom: this.update,\r\n\t\t\tviewreset: this.update\r\n\t\t};\r\n\t},\r\n\r\n\t// @method getLatLng: LatLng\r\n\t// Returns the current geographical position of the marker.\r\n\tgetLatLng: function () {\r\n\t\treturn this._latlng;\r\n\t},\r\n\r\n\t// @method setLatLng(latlng: LatLng): this\r\n\t// Changes the marker position to the given point.\r\n\tsetLatLng: function (latlng) {\r\n\t\tvar oldLatLng = this._latlng;\r\n\t\tthis._latlng = latLng(latlng);\r\n\t\tthis.update();\r\n\r\n\t\t// @event move: Event\r\n\t\t// Fired when the marker is moved via [`setLatLng`](#marker-setlatlng) or by [dragging](#marker-dragging). Old and new coordinates are included in event arguments as `oldLatLng`, `latlng`.\r\n\t\treturn this.fire('move', {oldLatLng: oldLatLng, latlng: this._latlng});\r\n\t},\r\n\r\n\t// @method setZIndexOffset(offset: Number): this\r\n\t// Changes the [zIndex offset](#marker-zindexoffset) of the marker.\r\n\tsetZIndexOffset: function (offset) {\r\n\t\tthis.options.zIndexOffset = offset;\r\n\t\treturn this.update();\r\n\t},\r\n\r\n\t// @method getIcon: Icon\r\n\t// Returns the current icon used by the marker\r\n\tgetIcon: function () {\r\n\t\treturn this.options.icon;\r\n\t},\r\n\r\n\t// @method setIcon(icon: Icon): this\r\n\t// Changes the marker icon.\r\n\tsetIcon: function (icon) {\r\n\r\n\t\tthis.options.icon = icon;\r\n\r\n\t\tif (this._map) {\r\n\t\t\tthis._initIcon();\r\n\t\t\tthis.update();\r\n\t\t}\r\n\r\n\t\tif (this._popup) {\r\n\t\t\tthis.bindPopup(this._popup, this._popup.options);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetElement: function () {\r\n\t\treturn this._icon;\r\n\t},\r\n\r\n\tupdate: function () {\r\n\r\n\t\tif (this._icon && this._map) {\r\n\t\t\tvar pos = this._map.latLngToLayerPoint(this._latlng).round();\r\n\t\t\tthis._setPos(pos);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_initIcon: function () {\r\n\t\tvar options = this.options,\r\n\t\t    classToAdd = 'leaflet-zoom-' + (this._zoomAnimated ? 'animated' : 'hide');\r\n\r\n\t\tvar icon = options.icon.createIcon(this._icon),\r\n\t\t    addIcon = false;\r\n\r\n\t\t// if we're not reusing the icon, remove the old one and init new one\r\n\t\tif (icon !== this._icon) {\r\n\t\t\tif (this._icon) {\r\n\t\t\t\tthis._removeIcon();\r\n\t\t\t}\r\n\t\t\taddIcon = true;\r\n\r\n\t\t\tif (options.title) {\r\n\t\t\t\ticon.title = options.title;\r\n\t\t\t}\r\n\r\n\t\t\tif (icon.tagName === 'IMG') {\r\n\t\t\t\ticon.alt = options.alt || '';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tDomUtil.addClass(icon, classToAdd);\r\n\r\n\t\tif (options.keyboard) {\r\n\t\t\ticon.tabIndex = '0';\r\n\t\t\ticon.setAttribute('role', 'button');\r\n\t\t}\r\n\r\n\t\tthis._icon = icon;\r\n\r\n\t\tif (options.riseOnHover) {\r\n\t\t\tthis.on({\r\n\t\t\t\tmouseover: this._bringToFront,\r\n\t\t\t\tmouseout: this._resetZIndex\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.options.autoPanOnFocus) {\r\n\t\t\tDomEvent.on(icon, 'focus', this._panOnFocus, this);\r\n\t\t}\r\n\r\n\t\tvar newShadow = options.icon.createShadow(this._shadow),\r\n\t\t    addShadow = false;\r\n\r\n\t\tif (newShadow !== this._shadow) {\r\n\t\t\tthis._removeShadow();\r\n\t\t\taddShadow = true;\r\n\t\t}\r\n\r\n\t\tif (newShadow) {\r\n\t\t\tDomUtil.addClass(newShadow, classToAdd);\r\n\t\t\tnewShadow.alt = '';\r\n\t\t}\r\n\t\tthis._shadow = newShadow;\r\n\r\n\r\n\t\tif (options.opacity < 1) {\r\n\t\t\tthis._updateOpacity();\r\n\t\t}\r\n\r\n\r\n\t\tif (addIcon) {\r\n\t\t\tthis.getPane().appendChild(this._icon);\r\n\t\t}\r\n\t\tthis._initInteraction();\r\n\t\tif (newShadow && addShadow) {\r\n\t\t\tthis.getPane(options.shadowPane).appendChild(this._shadow);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeIcon: function () {\r\n\t\tif (this.options.riseOnHover) {\r\n\t\t\tthis.off({\r\n\t\t\t\tmouseover: this._bringToFront,\r\n\t\t\t\tmouseout: this._resetZIndex\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.options.autoPanOnFocus) {\r\n\t\t\tDomEvent.off(this._icon, 'focus', this._panOnFocus, this);\r\n\t\t}\r\n\r\n\t\tDomUtil.remove(this._icon);\r\n\t\tthis.removeInteractiveTarget(this._icon);\r\n\r\n\t\tthis._icon = null;\r\n\t},\r\n\r\n\t_removeShadow: function () {\r\n\t\tif (this._shadow) {\r\n\t\t\tDomUtil.remove(this._shadow);\r\n\t\t}\r\n\t\tthis._shadow = null;\r\n\t},\r\n\r\n\t_setPos: function (pos) {\r\n\r\n\t\tif (this._icon) {\r\n\t\t\tDomUtil.setPosition(this._icon, pos);\r\n\t\t}\r\n\r\n\t\tif (this._shadow) {\r\n\t\t\tDomUtil.setPosition(this._shadow, pos);\r\n\t\t}\r\n\r\n\t\tthis._zIndex = pos.y + this.options.zIndexOffset;\r\n\r\n\t\tthis._resetZIndex();\r\n\t},\r\n\r\n\t_updateZIndex: function (offset) {\r\n\t\tif (this._icon) {\r\n\t\t\tthis._icon.style.zIndex = this._zIndex + offset;\r\n\t\t}\r\n\t},\r\n\r\n\t_animateZoom: function (opt) {\r\n\t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();\r\n\r\n\t\tthis._setPos(pos);\r\n\t},\r\n\r\n\t_initInteraction: function () {\r\n\r\n\t\tif (!this.options.interactive) { return; }\r\n\r\n\t\tDomUtil.addClass(this._icon, 'leaflet-interactive');\r\n\r\n\t\tthis.addInteractiveTarget(this._icon);\r\n\r\n\t\tif (MarkerDrag) {\r\n\t\t\tvar draggable = this.options.draggable;\r\n\t\t\tif (this.dragging) {\r\n\t\t\t\tdraggable = this.dragging.enabled();\r\n\t\t\t\tthis.dragging.disable();\r\n\t\t\t}\r\n\r\n\t\t\tthis.dragging = new MarkerDrag(this);\r\n\r\n\t\t\tif (draggable) {\r\n\t\t\t\tthis.dragging.enable();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// @method setOpacity(opacity: Number): this\r\n\t// Changes the opacity of the marker.\r\n\tsetOpacity: function (opacity) {\r\n\t\tthis.options.opacity = opacity;\r\n\t\tif (this._map) {\r\n\t\t\tthis._updateOpacity();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_updateOpacity: function () {\r\n\t\tvar opacity = this.options.opacity;\r\n\r\n\t\tif (this._icon) {\r\n\t\t\tDomUtil.setOpacity(this._icon, opacity);\r\n\t\t}\r\n\r\n\t\tif (this._shadow) {\r\n\t\t\tDomUtil.setOpacity(this._shadow, opacity);\r\n\t\t}\r\n\t},\r\n\r\n\t_bringToFront: function () {\r\n\t\tthis._updateZIndex(this.options.riseOffset);\r\n\t},\r\n\r\n\t_resetZIndex: function () {\r\n\t\tthis._updateZIndex(0);\r\n\t},\r\n\r\n\t_panOnFocus: function () {\r\n\t\tvar map = this._map;\r\n\t\tif (!map) { return; }\r\n\r\n\t\tvar iconOpts = this.options.icon.options;\r\n\t\tvar size = iconOpts.iconSize ? point(iconOpts.iconSize) : point(0, 0);\r\n\t\tvar anchor = iconOpts.iconAnchor ? point(iconOpts.iconAnchor) : point(0, 0);\r\n\r\n\t\tmap.panInside(this._latlng, {\r\n\t\t\tpaddingTopLeft: anchor,\r\n\t\t\tpaddingBottomRight: size.subtract(anchor)\r\n\t\t});\r\n\t},\r\n\r\n\t_getPopupAnchor: function () {\r\n\t\treturn this.options.icon.options.popupAnchor;\r\n\t},\r\n\r\n\t_getTooltipAnchor: function () {\r\n\t\treturn this.options.icon.options.tooltipAnchor;\r\n\t}\r\n});\r\n\r\n\r\n// factory L.marker(latlng: LatLng, options? : Marker options)\r\n\r\n// @factory L.marker(latlng: LatLng, options? : Marker options)\r\n// Instantiates a Marker object given a geographical point and optionally an options object.\r\nexport function marker(latlng, options) {\r\n\treturn new Marker(latlng, options);\r\n}\r\n","import {Layer} from '../Layer';\nimport * as Util from '../../core/Util';\n\n/*\n * @class Path\n * @aka L.Path\n * @inherits Interactive layer\n *\n * An abstract class that contains options and constants shared between vector\n * overlays (Polygon, Polyline, Circle). Do not use it directly. Extends `Layer`.\n */\n\nexport var Path = Layer.extend({\n\n\t// @section\n\t// @aka Path options\n\toptions: {\n\t\t// @option stroke: Boolean = true\n\t\t// Whether to draw stroke along the path. Set it to `false` to disable borders on polygons or circles.\n\t\tstroke: true,\n\n\t\t// @option color: String = '#3388ff'\n\t\t// Stroke color\n\t\tcolor: '#3388ff',\n\n\t\t// @option weight: Number = 3\n\t\t// Stroke width in pixels\n\t\tweight: 3,\n\n\t\t// @option opacity: Number = 1.0\n\t\t// Stroke opacity\n\t\topacity: 1,\n\n\t\t// @option lineCap: String= 'round'\n\t\t// A string that defines [shape to be used at the end](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-linecap) of the stroke.\n\t\tlineCap: 'round',\n\n\t\t// @option lineJoin: String = 'round'\n\t\t// A string that defines [shape to be used at the corners](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-linejoin) of the stroke.\n\t\tlineJoin: 'round',\n\n\t\t// @option dashArray: String = null\n\t\t// A string that defines the stroke [dash pattern](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-dasharray). Doesn't work on `Canvas`-powered layers in [some old browsers](https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility).\n\t\tdashArray: null,\n\n\t\t// @option dashOffset: String = null\n\t\t// A string that defines the [distance into the dash pattern to start the dash](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-dashoffset). Doesn't work on `Canvas`-powered layers in [some old browsers](https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility).\n\t\tdashOffset: null,\n\n\t\t// @option fill: Boolean = depends\n\t\t// Whether to fill the path with color. Set it to `false` to disable filling on polygons or circles.\n\t\tfill: false,\n\n\t\t// @option fillColor: String = *\n\t\t// Fill color. Defaults to the value of the [`color`](#path-color) option\n\t\tfillColor: null,\n\n\t\t// @option fillOpacity: Number = 0.2\n\t\t// Fill opacity.\n\t\tfillOpacity: 0.2,\n\n\t\t// @option fillRule: String = 'evenodd'\n\t\t// A string that defines [how the inside of a shape](https://developer.mozilla.org/docs/Web/SVG/Attribute/fill-rule) is determined.\n\t\tfillRule: 'evenodd',\n\n\t\t// className: '',\n\n\t\t// Option inherited from \"Interactive layer\" abstract class\n\t\tinteractive: true,\n\n\t\t// @option bubblingMouseEvents: Boolean = true\n\t\t// When `true`, a mouse event on this path will trigger the same event on the map\n\t\t// (unless [`L.DomEvent.stopPropagation`](#domevent-stoppropagation) is used).\n\t\tbubblingMouseEvents: true\n\t},\n\n\tbeforeAdd: function (map) {\n\t\t// Renderer is set here because we need to call renderer.getEvents\n\t\t// before this.getEvents.\n\t\tthis._renderer = map.getRenderer(this);\n\t},\n\n\tonAdd: function () {\n\t\tthis._renderer._initPath(this);\n\t\tthis._reset();\n\t\tthis._renderer._addPath(this);\n\t},\n\n\tonRemove: function () {\n\t\tthis._renderer._removePath(this);\n\t},\n\n\t// @method redraw(): this\n\t// Redraws the layer. Sometimes useful after you changed the coordinates that the path uses.\n\tredraw: function () {\n\t\tif (this._map) {\n\t\t\tthis._renderer._updatePath(this);\n\t\t}\n\t\treturn this;\n\t},\n\n\t// @method setStyle(style: Path options): this\n\t// Changes the appearance of a Path based on the options in the `Path options` object.\n\tsetStyle: function (style) {\n\t\tUtil.setOptions(this, style);\n\t\tif (this._renderer) {\n\t\t\tthis._renderer._updateStyle(this);\n\t\t\tif (this.options.stroke && style && Object.prototype.hasOwnProperty.call(style, 'weight')) {\n\t\t\t\tthis._updateBounds();\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\t// @method bringToFront(): this\n\t// Brings the layer to the top of all path layers.\n\tbringToFront: function () {\n\t\tif (this._renderer) {\n\t\t\tthis._renderer._bringToFront(this);\n\t\t}\n\t\treturn this;\n\t},\n\n\t// @method bringToBack(): this\n\t// Brings the layer to the bottom of all path layers.\n\tbringToBack: function () {\n\t\tif (this._renderer) {\n\t\t\tthis._renderer._bringToBack(this);\n\t\t}\n\t\treturn this;\n\t},\n\n\tgetElement: function () {\n\t\treturn this._path;\n\t},\n\n\t_reset: function () {\n\t\t// defined in child classes\n\t\tthis._project();\n\t\tthis._update();\n\t},\n\n\t_clickTolerance: function () {\n\t\t// used when doing hit detection for Canvas layers\n\t\treturn (this.options.stroke ? this.options.weight / 2 : 0) +\n\t\t  (this._renderer.options.tolerance || 0);\n\t}\n});\n","import {Path} from './Path';\nimport * as Util from '../../core/Util';\nimport {toLatLng} from '../../geo/LatLng';\nimport {Bounds} from '../../geometry/Bounds';\n\n\n/*\n * @class CircleMarker\n * @aka L.CircleMarker\n * @inherits Path\n *\n * A circle of a fixed size with radius specified in pixels. Extends `Path`.\n */\n\nexport var CircleMarker = Path.extend({\n\n\t// @section\n\t// @aka CircleMarker options\n\toptions: {\n\t\tfill: true,\n\n\t\t// @option radius: Number = 10\n\t\t// Radius of the circle marker, in pixels\n\t\tradius: 10\n\t},\n\n\tinitialize: function (latlng, options) {\n\t\tUtil.setOptions(this, options);\n\t\tthis._latlng = toLatLng(latlng);\n\t\tthis._radius = this.options.radius;\n\t},\n\n\t// @method setLatLng(latLng: LatLng): this\n\t// Sets the position of a circle marker to a new location.\n\tsetLatLng: function (latlng) {\n\t\tvar oldLatLng = this._latlng;\n\t\tthis._latlng = toLatLng(latlng);\n\t\tthis.redraw();\n\n\t\t// @event move: Event\n\t\t// Fired when the marker is moved via [`setLatLng`](#circlemarker-setlatlng). Old and new coordinates are included in event arguments as `oldLatLng`, `latlng`.\n\t\treturn this.fire('move', {oldLatLng: oldLatLng, latlng: this._latlng});\n\t},\n\n\t// @method getLatLng(): LatLng\n\t// Returns the current geographical position of the circle marker\n\tgetLatLng: function () {\n\t\treturn this._latlng;\n\t},\n\n\t// @method setRadius(radius: Number): this\n\t// Sets the radius of a circle marker. Units are in pixels.\n\tsetRadius: function (radius) {\n\t\tthis.options.radius = this._radius = radius;\n\t\treturn this.redraw();\n\t},\n\n\t// @method getRadius(): Number\n\t// Returns the current radius of the circle\n\tgetRadius: function () {\n\t\treturn this._radius;\n\t},\n\n\tsetStyle : function (options) {\n\t\tvar radius = options && options.radius || this._radius;\n\t\tPath.prototype.setStyle.call(this, options);\n\t\tthis.setRadius(radius);\n\t\treturn this;\n\t},\n\n\t_project: function () {\n\t\tthis._point = this._map.latLngToLayerPoint(this._latlng);\n\t\tthis._updateBounds();\n\t},\n\n\t_updateBounds: function () {\n\t\tvar r = this._radius,\n\t\t    r2 = this._radiusY || r,\n\t\t    w = this._clickTolerance(),\n\t\t    p = [r + w, r2 + w];\n\t\tthis._pxBounds = new Bounds(this._point.subtract(p), this._point.add(p));\n\t},\n\n\t_update: function () {\n\t\tif (this._map) {\n\t\t\tthis._updatePath();\n\t\t}\n\t},\n\n\t_updatePath: function () {\n\t\tthis._renderer._updateCircle(this);\n\t},\n\n\t_empty: function () {\n\t\treturn this._radius && !this._renderer._bounds.intersects(this._pxBounds);\n\t},\n\n\t// Needed by the `Canvas` renderer for interactivity\n\t_containsPoint: function (p) {\n\t\treturn p.distanceTo(this._point) <= this._radius + this._clickTolerance();\n\t}\n});\n\n\n// @factory L.circleMarker(latlng: LatLng, options?: CircleMarker options)\n// Instantiates a circle marker object given a geographical point, and an optional options object.\nexport function circleMarker(latlng, options) {\n\treturn new CircleMarker(latlng, options);\n}\n","import {CircleMarker} from './CircleMarker';\nimport {Path} from './Path';\nimport * as Util from '../../core/Util';\nimport {toLatLng} from '../../geo/LatLng';\nimport {LatLngBounds} from '../../geo/LatLngBounds';\nimport {Earth} from '../../geo/crs/CRS.Earth';\n\n\n/*\n * @class Circle\n * @aka L.Circle\n * @inherits CircleMarker\n *\n * A class for drawing circle overlays on a map. Extends `CircleMarker`.\n *\n * It's an approximation and starts to diverge from a real circle closer to poles (due to projection distortion).\n *\n * @example\n *\n * ```js\n * L.circle([50.5, 30.5], {radius: 200}).addTo(map);\n * ```\n */\n\nexport var Circle = CircleMarker.extend({\n\n\tinitialize: function (latlng, options, legacyOptions) {\n\t\tif (typeof options === 'number') {\n\t\t\t// Backwards compatibility with 0.7.x factory (latlng, radius, options?)\n\t\t\toptions = Util.extend({}, legacyOptions, {radius: options});\n\t\t}\n\t\tUtil.setOptions(this, options);\n\t\tthis._latlng = toLatLng(latlng);\n\n\t\tif (isNaN(this.options.radius)) { throw new Error('Circle radius cannot be NaN'); }\n\n\t\t// @section\n\t\t// @aka Circle options\n\t\t// @option radius: Number; Radius of the circle, in meters.\n\t\tthis._mRadius = this.options.radius;\n\t},\n\n\t// @method setRadius(radius: Number): this\n\t// Sets the radius of a circle. Units are in meters.\n\tsetRadius: function (radius) {\n\t\tthis._mRadius = radius;\n\t\treturn this.redraw();\n\t},\n\n\t// @method getRadius(): Number\n\t// Returns the current radius of a circle. Units are in meters.\n\tgetRadius: function () {\n\t\treturn this._mRadius;\n\t},\n\n\t// @method getBounds(): LatLngBounds\n\t// Returns the `LatLngBounds` of the path.\n\tgetBounds: function () {\n\t\tvar half = [this._radius, this._radiusY || this._radius];\n\n\t\treturn new LatLngBounds(\n\t\t\tthis._map.layerPointToLatLng(this._point.subtract(half)),\n\t\t\tthis._map.layerPointToLatLng(this._point.add(half)));\n\t},\n\n\tsetStyle: Path.prototype.setStyle,\n\n\t_project: function () {\n\n\t\tvar lng = this._latlng.lng,\n\t\t    lat = this._latlng.lat,\n\t\t    map = this._map,\n\t\t    crs = map.options.crs;\n\n\t\tif (crs.distance === Earth.distance) {\n\t\t\tvar d = Math.PI / 180,\n\t\t\t    latR = (this._mRadius / Earth.R) / d,\n\t\t\t    top = map.project([lat + latR, lng]),\n\t\t\t    bottom = map.project([lat - latR, lng]),\n\t\t\t    p = top.add(bottom).divideBy(2),\n\t\t\t    lat2 = map.unproject(p).lat,\n\t\t\t    lngR = Math.acos((Math.cos(latR * d) - Math.sin(lat * d) * Math.sin(lat2 * d)) /\n\t\t\t            (Math.cos(lat * d) * Math.cos(lat2 * d))) / d;\n\n\t\t\tif (isNaN(lngR) || lngR === 0) {\n\t\t\t\tlngR = latR / Math.cos(Math.PI / 180 * lat); // Fallback for edge case, #2425\n\t\t\t}\n\n\t\t\tthis._point = p.subtract(map.getPixelOrigin());\n\t\t\tthis._radius = isNaN(lngR) ? 0 : p.x - map.project([lat2, lng - lngR]).x;\n\t\t\tthis._radiusY = p.y - top.y;\n\n\t\t} else {\n\t\t\tvar latlng2 = crs.unproject(crs.project(this._latlng).subtract([this._mRadius, 0]));\n\n\t\t\tthis._point = map.latLngToLayerPoint(this._latlng);\n\t\t\tthis._radius = this._point.x - map.latLngToLayerPoint(latlng2).x;\n\t\t}\n\n\t\tthis._updateBounds();\n\t}\n});\n\n// @factory L.circle(latlng: LatLng, options?: Circle options)\n// Instantiates a circle object given a geographical point, and an options object\n// which contains the circle radius.\n// @alternative\n// @factory L.circle(latlng: LatLng, radius: Number, options?: Circle options)\n// Obsolete way of instantiating a circle, for compatibility with 0.7.x code.\n// Do not use in new applications or plugins.\nexport function circle(latlng, options, legacyOptions) {\n\treturn new Circle(latlng, options, legacyOptions);\n}\n","import {Path} from './Path';\nimport * as Util from '../../core/Util';\nimport * as LineUtil from '../../geometry/LineUtil';\nimport {LatLng, toLatLng} from '../../geo/LatLng';\nimport {LatLngBounds} from '../../geo/LatLngBounds';\nimport {Bounds} from '../../geometry/Bounds';\nimport {Point} from '../../geometry/Point';\n\n/*\n * @class Polyline\n * @aka L.Polyline\n * @inherits Path\n *\n * A class for drawing polyline overlays on a map. Extends `Path`.\n *\n * @example\n *\n * ```js\n * // create a red polyline from an array of LatLng points\n * var latlngs = [\n * \t[45.51, -122.68],\n * \t[37.77, -122.43],\n * \t[34.04, -118.2]\n * ];\n *\n * var polyline = L.polyline(latlngs, {color: 'red'}).addTo(map);\n *\n * // zoom the map to the polyline\n * map.fitBounds(polyline.getBounds());\n * ```\n *\n * You can also pass a multi-dimensional array to represent a `MultiPolyline` shape:\n *\n * ```js\n * // create a red polyline from an array of arrays of LatLng points\n * var latlngs = [\n * \t[[45.51, -122.68],\n * \t [37.77, -122.43],\n * \t [34.04, -118.2]],\n * \t[[40.78, -73.91],\n * \t [41.83, -87.62],\n * \t [32.76, -96.72]]\n * ];\n * ```\n */\n\n\nexport var Polyline = Path.extend({\n\n\t// @section\n\t// @aka Polyline options\n\toptions: {\n\t\t// @option smoothFactor: Number = 1.0\n\t\t// How much to simplify the polyline on each zoom level. More means\n\t\t// better performance and smoother look, and less means more accurate representation.\n\t\tsmoothFactor: 1.0,\n\n\t\t// @option noClip: Boolean = false\n\t\t// Disable polyline clipping.\n\t\tnoClip: false\n\t},\n\n\tinitialize: function (latlngs, options) {\n\t\tUtil.setOptions(this, options);\n\t\tthis._setLatLngs(latlngs);\n\t},\n\n\t// @method getLatLngs(): LatLng[]\n\t// Returns an array of the points in the path, or nested arrays of points in case of multi-polyline.\n\tgetLatLngs: function () {\n\t\treturn this._latlngs;\n\t},\n\n\t// @method setLatLngs(latlngs: LatLng[]): this\n\t// Replaces all the points in the polyline with the given array of geographical points.\n\tsetLatLngs: function (latlngs) {\n\t\tthis._setLatLngs(latlngs);\n\t\treturn this.redraw();\n\t},\n\n\t// @method isEmpty(): Boolean\n\t// Returns `true` if the Polyline has no LatLngs.\n\tisEmpty: function () {\n\t\treturn !this._latlngs.length;\n\t},\n\n\t// @method closestLayerPoint(p: Point): Point\n\t// Returns the point closest to `p` on the Polyline.\n\tclosestLayerPoint: function (p) {\n\t\tvar minDistance = Infinity,\n\t\t    minPoint = null,\n\t\t    closest = LineUtil._sqClosestPointOnSegment,\n\t\t    p1, p2;\n\n\t\tfor (var j = 0, jLen = this._parts.length; j < jLen; j++) {\n\t\t\tvar points = this._parts[j];\n\n\t\t\tfor (var i = 1, len = points.length; i < len; i++) {\n\t\t\t\tp1 = points[i - 1];\n\t\t\t\tp2 = points[i];\n\n\t\t\t\tvar sqDist = closest(p, p1, p2, true);\n\n\t\t\t\tif (sqDist < minDistance) {\n\t\t\t\t\tminDistance = sqDist;\n\t\t\t\t\tminPoint = closest(p, p1, p2);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (minPoint) {\n\t\t\tminPoint.distance = Math.sqrt(minDistance);\n\t\t}\n\t\treturn minPoint;\n\t},\n\n\t// @method getCenter(): LatLng\n\t// Returns the center ([centroid](https://en.wikipedia.org/wiki/Centroid)) of the polyline.\n\tgetCenter: function () {\n\t\t// throws error when not yet added to map as this center calculation requires projected coordinates\n\t\tif (!this._map) {\n\t\t\tthrow new Error('Must add layer to map before using getCenter()');\n\t\t}\n\t\treturn LineUtil.polylineCenter(this._defaultShape(), this._map.options.crs);\n\t},\n\n\t// @method getBounds(): LatLngBounds\n\t// Returns the `LatLngBounds` of the path.\n\tgetBounds: function () {\n\t\treturn this._bounds;\n\t},\n\n\t// @method addLatLng(latlng: LatLng, latlngs?: LatLng[]): this\n\t// Adds a given point to the polyline. By default, adds to the first ring of\n\t// the polyline in case of a multi-polyline, but can be overridden by passing\n\t// a specific ring as a LatLng array (that you can earlier access with [`getLatLngs`](#polyline-getlatlngs)).\n\taddLatLng: function (latlng, latlngs) {\n\t\tlatlngs = latlngs || this._defaultShape();\n\t\tlatlng = toLatLng(latlng);\n\t\tlatlngs.push(latlng);\n\t\tthis._bounds.extend(latlng);\n\t\treturn this.redraw();\n\t},\n\n\t_setLatLngs: function (latlngs) {\n\t\tthis._bounds = new LatLngBounds();\n\t\tthis._latlngs = this._convertLatLngs(latlngs);\n\t},\n\n\t_defaultShape: function () {\n\t\treturn LineUtil.isFlat(this._latlngs) ? this._latlngs : this._latlngs[0];\n\t},\n\n\t// recursively convert latlngs input into actual LatLng instances; calculate bounds along the way\n\t_convertLatLngs: function (latlngs) {\n\t\tvar result = [],\n\t\t    flat = LineUtil.isFlat(latlngs);\n\n\t\tfor (var i = 0, len = latlngs.length; i < len; i++) {\n\t\t\tif (flat) {\n\t\t\t\tresult[i] = toLatLng(latlngs[i]);\n\t\t\t\tthis._bounds.extend(result[i]);\n\t\t\t} else {\n\t\t\t\tresult[i] = this._convertLatLngs(latlngs[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t},\n\n\t_project: function () {\n\t\tvar pxBounds = new Bounds();\n\t\tthis._rings = [];\n\t\tthis._projectLatlngs(this._latlngs, this._rings, pxBounds);\n\n\t\tif (this._bounds.isValid() && pxBounds.isValid()) {\n\t\t\tthis._rawPxBounds = pxBounds;\n\t\t\tthis._updateBounds();\n\t\t}\n\t},\n\n\t_updateBounds: function () {\n\t\tvar w = this._clickTolerance(),\n\t\t    p = new Point(w, w);\n\n\t\tif (!this._rawPxBounds) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._pxBounds = new Bounds([\n\t\t\tthis._rawPxBounds.min.subtract(p),\n\t\t\tthis._rawPxBounds.max.add(p)\n\t\t]);\n\t},\n\n\t// recursively turns latlngs into a set of rings with projected coordinates\n\t_projectLatlngs: function (latlngs, result, projectedBounds) {\n\t\tvar flat = latlngs[0] instanceof LatLng,\n\t\t    len = latlngs.length,\n\t\t    i, ring;\n\n\t\tif (flat) {\n\t\t\tring = [];\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tring[i] = this._map.latLngToLayerPoint(latlngs[i]);\n\t\t\t\tprojectedBounds.extend(ring[i]);\n\t\t\t}\n\t\t\tresult.push(ring);\n\t\t} else {\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tthis._projectLatlngs(latlngs[i], result, projectedBounds);\n\t\t\t}\n\t\t}\n\t},\n\n\t// clip polyline by renderer bounds so that we have less to render for performance\n\t_clipPoints: function () {\n\t\tvar bounds = this._renderer._bounds;\n\n\t\tthis._parts = [];\n\t\tif (!this._pxBounds || !this._pxBounds.intersects(bounds)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.options.noClip) {\n\t\t\tthis._parts = this._rings;\n\t\t\treturn;\n\t\t}\n\n\t\tvar parts = this._parts,\n\t\t    i, j, k, len, len2, segment, points;\n\n\t\tfor (i = 0, k = 0, len = this._rings.length; i < len; i++) {\n\t\t\tpoints = this._rings[i];\n\n\t\t\tfor (j = 0, len2 = points.length; j < len2 - 1; j++) {\n\t\t\t\tsegment = LineUtil.clipSegment(points[j], points[j + 1], bounds, j, true);\n\n\t\t\t\tif (!segment) { continue; }\n\n\t\t\t\tparts[k] = parts[k] || [];\n\t\t\t\tparts[k].push(segment[0]);\n\n\t\t\t\t// if segment goes out of screen, or it's the last one, it's the end of the line part\n\t\t\t\tif ((segment[1] !== points[j + 1]) || (j === len2 - 2)) {\n\t\t\t\t\tparts[k].push(segment[1]);\n\t\t\t\t\tk++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// simplify each clipped part of the polyline for performance\n\t_simplifyPoints: function () {\n\t\tvar parts = this._parts,\n\t\t    tolerance = this.options.smoothFactor;\n\n\t\tfor (var i = 0, len = parts.length; i < len; i++) {\n\t\t\tparts[i] = LineUtil.simplify(parts[i], tolerance);\n\t\t}\n\t},\n\n\t_update: function () {\n\t\tif (!this._map) { return; }\n\n\t\tthis._clipPoints();\n\t\tthis._simplifyPoints();\n\t\tthis._updatePath();\n\t},\n\n\t_updatePath: function () {\n\t\tthis._renderer._updatePoly(this);\n\t},\n\n\t// Needed by the `Canvas` renderer for interactivity\n\t_containsPoint: function (p, closed) {\n\t\tvar i, j, k, len, len2, part,\n\t\t    w = this._clickTolerance();\n\n\t\tif (!this._pxBounds || !this._pxBounds.contains(p)) { return false; }\n\n\t\t// hit detection for polylines\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {\n\t\t\tpart = this._parts[i];\n\n\t\t\tfor (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {\n\t\t\t\tif (!closed && (j === 0)) { continue; }\n\n\t\t\t\tif (LineUtil.pointToSegmentDistance(p, part[k], part[j]) <= w) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n});\n\n// @factory L.polyline(latlngs: LatLng[], options?: Polyline options)\n// Instantiates a polyline object given an array of geographical points and\n// optionally an options object. You can create a `Polyline` object with\n// multiple separate lines (`MultiPolyline`) by passing an array of arrays\n// of geographic points.\nexport function polyline(latlngs, options) {\n\treturn new Polyline(latlngs, options);\n}\n\n// Retrocompat. Allow plugins to support Leaflet versions before and after 1.1.\nPolyline._flat = LineUtil._flat;\n","import {Polyline} from './Polyline';\nimport {LatLng} from '../../geo/LatLng';\nimport * as LineUtil from '../../geometry/LineUtil';\nimport {Point} from '../../geometry/Point';\nimport {Bounds} from '../../geometry/Bounds';\nimport * as PolyUtil from '../../geometry/PolyUtil';\n\n/*\n * @class Polygon\n * @aka L.Polygon\n * @inherits Polyline\n *\n * A class for drawing polygon overlays on a map. Extends `Polyline`.\n *\n * Note that points you pass when creating a polygon shouldn't have an additional last point equal to the first one  it's better to filter out such points.\n *\n *\n * @example\n *\n * ```js\n * // create a red polygon from an array of LatLng points\n * var latlngs = [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]];\n *\n * var polygon = L.polygon(latlngs, {color: 'red'}).addTo(map);\n *\n * // zoom the map to the polygon\n * map.fitBounds(polygon.getBounds());\n * ```\n *\n * You can also pass an array of arrays of latlngs, with the first array representing the outer shape and the other arrays representing holes in the outer shape:\n *\n * ```js\n * var latlngs = [\n *   [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]], // outer ring\n *   [[37.29, -108.58],[40.71, -108.58],[40.71, -102.50],[37.29, -102.50]] // hole\n * ];\n * ```\n *\n * Additionally, you can pass a multi-dimensional array to represent a MultiPolygon shape.\n *\n * ```js\n * var latlngs = [\n *   [ // first polygon\n *     [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]], // outer ring\n *     [[37.29, -108.58],[40.71, -108.58],[40.71, -102.50],[37.29, -102.50]] // hole\n *   ],\n *   [ // second polygon\n *     [[41, -111.03],[45, -111.04],[45, -104.05],[41, -104.05]]\n *   ]\n * ];\n * ```\n */\n\nexport var Polygon = Polyline.extend({\n\n\toptions: {\n\t\tfill: true\n\t},\n\n\tisEmpty: function () {\n\t\treturn !this._latlngs.length || !this._latlngs[0].length;\n\t},\n\n\t// @method getCenter(): LatLng\n\t// Returns the center ([centroid](http://en.wikipedia.org/wiki/Centroid)) of the Polygon.\n\tgetCenter: function () {\n\t\t// throws error when not yet added to map as this center calculation requires projected coordinates\n\t\tif (!this._map) {\n\t\t\tthrow new Error('Must add layer to map before using getCenter()');\n\t\t}\n\t\treturn PolyUtil.polygonCenter(this._defaultShape(), this._map.options.crs);\n\t},\n\n\t_convertLatLngs: function (latlngs) {\n\t\tvar result = Polyline.prototype._convertLatLngs.call(this, latlngs),\n\t\t    len = result.length;\n\n\t\t// remove last point if it equals first one\n\t\tif (len >= 2 && result[0] instanceof LatLng && result[0].equals(result[len - 1])) {\n\t\t\tresult.pop();\n\t\t}\n\t\treturn result;\n\t},\n\n\t_setLatLngs: function (latlngs) {\n\t\tPolyline.prototype._setLatLngs.call(this, latlngs);\n\t\tif (LineUtil.isFlat(this._latlngs)) {\n\t\t\tthis._latlngs = [this._latlngs];\n\t\t}\n\t},\n\n\t_defaultShape: function () {\n\t\treturn LineUtil.isFlat(this._latlngs[0]) ? this._latlngs[0] : this._latlngs[0][0];\n\t},\n\n\t_clipPoints: function () {\n\t\t// polygons need a different clipping algorithm so we redefine that\n\n\t\tvar bounds = this._renderer._bounds,\n\t\t    w = this.options.weight,\n\t\t    p = new Point(w, w);\n\n\t\t// increase clip padding by stroke width to avoid stroke on clip edges\n\t\tbounds = new Bounds(bounds.min.subtract(p), bounds.max.add(p));\n\n\t\tthis._parts = [];\n\t\tif (!this._pxBounds || !this._pxBounds.intersects(bounds)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.options.noClip) {\n\t\t\tthis._parts = this._rings;\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0, len = this._rings.length, clipped; i < len; i++) {\n\t\t\tclipped = PolyUtil.clipPolygon(this._rings[i], bounds, true);\n\t\t\tif (clipped.length) {\n\t\t\t\tthis._parts.push(clipped);\n\t\t\t}\n\t\t}\n\t},\n\n\t_updatePath: function () {\n\t\tthis._renderer._updatePoly(this, true);\n\t},\n\n\t// Needed by the `Canvas` renderer for interactivity\n\t_containsPoint: function (p) {\n\t\tvar inside = false,\n\t\t    part, p1, p2, i, j, k, len, len2;\n\n\t\tif (!this._pxBounds || !this._pxBounds.contains(p)) { return false; }\n\n\t\t// ray casting algorithm for detecting if point is in polygon\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {\n\t\t\tpart = this._parts[i];\n\n\t\t\tfor (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {\n\t\t\t\tp1 = part[j];\n\t\t\t\tp2 = part[k];\n\n\t\t\t\tif (((p1.y > p.y) !== (p2.y > p.y)) && (p.x < (p2.x - p1.x) * (p.y - p1.y) / (p2.y - p1.y) + p1.x)) {\n\t\t\t\t\tinside = !inside;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// also check if it's on polygon stroke\n\t\treturn inside || Polyline.prototype._containsPoint.call(this, p, true);\n\t}\n\n});\n\n\n// @factory L.polygon(latlngs: LatLng[], options?: Polyline options)\nexport function polygon(latlngs, options) {\n\treturn new Polygon(latlngs, options);\n}\n","import {LayerGroup} from './LayerGroup';\r\nimport {FeatureGroup} from './FeatureGroup';\r\nimport * as Util from '../core/Util';\r\nimport {Marker} from './marker/Marker';\r\nimport {Circle} from './vector/Circle';\r\nimport {CircleMarker} from './vector/CircleMarker';\r\nimport {Polyline} from './vector/Polyline';\r\nimport {Polygon} from './vector/Polygon';\r\nimport {LatLng} from '../geo/LatLng';\r\nimport * as LineUtil from '../geometry/LineUtil';\r\nimport {toLatLng} from '../geo/LatLng';\r\n\r\n\r\n/*\r\n * @class GeoJSON\r\n * @aka L.GeoJSON\r\n * @inherits FeatureGroup\r\n *\r\n * Represents a GeoJSON object or an array of GeoJSON objects. Allows you to parse\r\n * GeoJSON data and display it on the map. Extends `FeatureGroup`.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * L.geoJSON(data, {\r\n * \tstyle: function (feature) {\r\n * \t\treturn {color: feature.properties.color};\r\n * \t}\r\n * }).bindPopup(function (layer) {\r\n * \treturn layer.feature.properties.description;\r\n * }).addTo(map);\r\n * ```\r\n */\r\n\r\nexport var GeoJSON = FeatureGroup.extend({\r\n\r\n\t/* @section\r\n\t * @aka GeoJSON options\r\n\t *\r\n\t * @option pointToLayer: Function = *\r\n\t * A `Function` defining how GeoJSON points spawn Leaflet layers. It is internally\r\n\t * called when data is added, passing the GeoJSON point feature and its `LatLng`.\r\n\t * The default is to spawn a default `Marker`:\r\n\t * ```js\r\n\t * function(geoJsonPoint, latlng) {\r\n\t * \treturn L.marker(latlng);\r\n\t * }\r\n\t * ```\r\n\t *\r\n\t * @option style: Function = *\r\n\t * A `Function` defining the `Path options` for styling GeoJSON lines and polygons,\r\n\t * called internally when data is added.\r\n\t * The default value is to not override any defaults:\r\n\t * ```js\r\n\t * function (geoJsonFeature) {\r\n\t * \treturn {}\r\n\t * }\r\n\t * ```\r\n\t *\r\n\t * @option onEachFeature: Function = *\r\n\t * A `Function` that will be called once for each created `Feature`, after it has\r\n\t * been created and styled. Useful for attaching events and popups to features.\r\n\t * The default is to do nothing with the newly created layers:\r\n\t * ```js\r\n\t * function (feature, layer) {}\r\n\t * ```\r\n\t *\r\n\t * @option filter: Function = *\r\n\t * A `Function` that will be used to decide whether to include a feature or not.\r\n\t * The default is to include all features:\r\n\t * ```js\r\n\t * function (geoJsonFeature) {\r\n\t * \treturn true;\r\n\t * }\r\n\t * ```\r\n\t * Note: dynamically changing the `filter` option will have effect only on newly\r\n\t * added data. It will _not_ re-evaluate already included features.\r\n\t *\r\n\t * @option coordsToLatLng: Function = *\r\n\t * A `Function` that will be used for converting GeoJSON coordinates to `LatLng`s.\r\n\t * The default is the `coordsToLatLng` static method.\r\n\t *\r\n\t * @option markersInheritOptions: Boolean = false\r\n\t * Whether default Markers for \"Point\" type Features inherit from group options.\r\n\t */\r\n\r\n\tinitialize: function (geojson, options) {\r\n\t\tUtil.setOptions(this, options);\r\n\r\n\t\tthis._layers = {};\r\n\r\n\t\tif (geojson) {\r\n\t\t\tthis.addData(geojson);\r\n\t\t}\r\n\t},\r\n\r\n\t// @method addData( <GeoJSON> data ): this\r\n\t// Adds a GeoJSON object to the layer.\r\n\taddData: function (geojson) {\r\n\t\tvar features = Util.isArray(geojson) ? geojson : geojson.features,\r\n\t\t    i, len, feature;\r\n\r\n\t\tif (features) {\r\n\t\t\tfor (i = 0, len = features.length; i < len; i++) {\r\n\t\t\t\t// only add this if geometry or geometries are set and not null\r\n\t\t\t\tfeature = features[i];\r\n\t\t\t\tif (feature.geometries || feature.geometry || feature.features || feature.coordinates) {\r\n\t\t\t\t\tthis.addData(feature);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar options = this.options;\r\n\r\n\t\tif (options.filter && !options.filter(geojson)) { return this; }\r\n\r\n\t\tvar layer = geometryToLayer(geojson, options);\r\n\t\tif (!layer) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tlayer.feature = asFeature(geojson);\r\n\r\n\t\tlayer.defaultOptions = layer.options;\r\n\t\tthis.resetStyle(layer);\r\n\r\n\t\tif (options.onEachFeature) {\r\n\t\t\toptions.onEachFeature(geojson, layer);\r\n\t\t}\r\n\r\n\t\treturn this.addLayer(layer);\r\n\t},\r\n\r\n\t// @method resetStyle( <Path> layer? ): this\r\n\t// Resets the given vector layer's style to the original GeoJSON style, useful for resetting style after hover events.\r\n\t// If `layer` is omitted, the style of all features in the current layer is reset.\r\n\tresetStyle: function (layer) {\r\n\t\tif (layer === undefined) {\r\n\t\t\treturn this.eachLayer(this.resetStyle, this);\r\n\t\t}\r\n\t\t// reset any custom styles\r\n\t\tlayer.options = Util.extend({}, layer.defaultOptions);\r\n\t\tthis._setLayerStyle(layer, this.options.style);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method setStyle( <Function> style ): this\r\n\t// Changes styles of GeoJSON vector layers with the given style function.\r\n\tsetStyle: function (style) {\r\n\t\treturn this.eachLayer(function (layer) {\r\n\t\t\tthis._setLayerStyle(layer, style);\r\n\t\t}, this);\r\n\t},\r\n\r\n\t_setLayerStyle: function (layer, style) {\r\n\t\tif (layer.setStyle) {\r\n\t\t\tif (typeof style === 'function') {\r\n\t\t\t\tstyle = style(layer.feature);\r\n\t\t\t}\r\n\t\t\tlayer.setStyle(style);\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// @section\r\n// There are several static functions which can be called without instantiating L.GeoJSON:\r\n\r\n// @function geometryToLayer(featureData: Object, options?: GeoJSON options): Layer\r\n// Creates a `Layer` from a given GeoJSON feature. Can use a custom\r\n// [`pointToLayer`](#geojson-pointtolayer) and/or [`coordsToLatLng`](#geojson-coordstolatlng)\r\n// functions if provided as options.\r\nexport function geometryToLayer(geojson, options) {\r\n\r\n\tvar geometry = geojson.type === 'Feature' ? geojson.geometry : geojson,\r\n\t    coords = geometry ? geometry.coordinates : null,\r\n\t    layers = [],\r\n\t    pointToLayer = options && options.pointToLayer,\r\n\t    _coordsToLatLng = options && options.coordsToLatLng || coordsToLatLng,\r\n\t    latlng, latlngs, i, len;\r\n\r\n\tif (!coords && !geometry) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tswitch (geometry.type) {\r\n\tcase 'Point':\r\n\t\tlatlng = _coordsToLatLng(coords);\r\n\t\treturn _pointToLayer(pointToLayer, geojson, latlng, options);\r\n\r\n\tcase 'MultiPoint':\r\n\t\tfor (i = 0, len = coords.length; i < len; i++) {\r\n\t\t\tlatlng = _coordsToLatLng(coords[i]);\r\n\t\t\tlayers.push(_pointToLayer(pointToLayer, geojson, latlng, options));\r\n\t\t}\r\n\t\treturn new FeatureGroup(layers);\r\n\r\n\tcase 'LineString':\r\n\tcase 'MultiLineString':\r\n\t\tlatlngs = coordsToLatLngs(coords, geometry.type === 'LineString' ? 0 : 1, _coordsToLatLng);\r\n\t\treturn new Polyline(latlngs, options);\r\n\r\n\tcase 'Polygon':\r\n\tcase 'MultiPolygon':\r\n\t\tlatlngs = coordsToLatLngs(coords, geometry.type === 'Polygon' ? 1 : 2, _coordsToLatLng);\r\n\t\treturn new Polygon(latlngs, options);\r\n\r\n\tcase 'GeometryCollection':\r\n\t\tfor (i = 0, len = geometry.geometries.length; i < len; i++) {\r\n\t\t\tvar geoLayer = geometryToLayer({\r\n\t\t\t\tgeometry: geometry.geometries[i],\r\n\t\t\t\ttype: 'Feature',\r\n\t\t\t\tproperties: geojson.properties\r\n\t\t\t}, options);\r\n\r\n\t\t\tif (geoLayer) {\r\n\t\t\t\tlayers.push(geoLayer);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new FeatureGroup(layers);\r\n\r\n\tcase 'FeatureCollection':\r\n\t\tfor (i = 0, len = geometry.features.length; i < len; i++) {\r\n\t\t\tvar featureLayer = geometryToLayer(geometry.features[i], options);\r\n\r\n\t\t\tif (featureLayer) {\r\n\t\t\t\tlayers.push(featureLayer);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new FeatureGroup(layers);\r\n\r\n\tdefault:\r\n\t\tthrow new Error('Invalid GeoJSON object.');\r\n\t}\r\n}\r\n\r\nfunction _pointToLayer(pointToLayerFn, geojson, latlng, options) {\r\n\treturn pointToLayerFn ?\r\n\t\tpointToLayerFn(geojson, latlng) :\r\n\t\tnew Marker(latlng, options && options.markersInheritOptions && options);\r\n}\r\n\r\n// @function coordsToLatLng(coords: Array): LatLng\r\n// Creates a `LatLng` object from an array of 2 numbers (longitude, latitude)\r\n// or 3 numbers (longitude, latitude, altitude) used in GeoJSON for points.\r\nexport function coordsToLatLng(coords) {\r\n\treturn new LatLng(coords[1], coords[0], coords[2]);\r\n}\r\n\r\n// @function coordsToLatLngs(coords: Array, levelsDeep?: Number, coordsToLatLng?: Function): Array\r\n// Creates a multidimensional array of `LatLng`s from a GeoJSON coordinates array.\r\n// `levelsDeep` specifies the nesting level (0 is for an array of points, 1 for an array of arrays of points, etc., 0 by default).\r\n// Can use a custom [`coordsToLatLng`](#geojson-coordstolatlng) function.\r\nexport function coordsToLatLngs(coords, levelsDeep, _coordsToLatLng) {\r\n\tvar latlngs = [];\r\n\r\n\tfor (var i = 0, len = coords.length, latlng; i < len; i++) {\r\n\t\tlatlng = levelsDeep ?\r\n\t\t\tcoordsToLatLngs(coords[i], levelsDeep - 1, _coordsToLatLng) :\r\n\t\t\t(_coordsToLatLng || coordsToLatLng)(coords[i]);\r\n\r\n\t\tlatlngs.push(latlng);\r\n\t}\r\n\r\n\treturn latlngs;\r\n}\r\n\r\n// @function latLngToCoords(latlng: LatLng, precision?: Number|false): Array\r\n// Reverse of [`coordsToLatLng`](#geojson-coordstolatlng)\r\n// Coordinates values are rounded with [`formatNum`](#util-formatnum) function.\r\nexport function latLngToCoords(latlng, precision) {\r\n\tlatlng = toLatLng(latlng);\r\n\treturn latlng.alt !== undefined ?\r\n\t\t[Util.formatNum(latlng.lng, precision), Util.formatNum(latlng.lat, precision), Util.formatNum(latlng.alt, precision)] :\r\n\t\t[Util.formatNum(latlng.lng, precision), Util.formatNum(latlng.lat, precision)];\r\n}\r\n\r\n// @function latLngsToCoords(latlngs: Array, levelsDeep?: Number, closed?: Boolean, precision?: Number|false): Array\r\n// Reverse of [`coordsToLatLngs`](#geojson-coordstolatlngs)\r\n// `closed` determines whether the first point should be appended to the end of the array to close the feature, only used when `levelsDeep` is 0. False by default.\r\n// Coordinates values are rounded with [`formatNum`](#util-formatnum) function.\r\nexport function latLngsToCoords(latlngs, levelsDeep, closed, precision) {\r\n\tvar coords = [];\r\n\r\n\tfor (var i = 0, len = latlngs.length; i < len; i++) {\r\n\t\t// Check for flat arrays required to ensure unbalanced arrays are correctly converted in recursion\r\n\t\tcoords.push(levelsDeep ?\r\n\t\t\tlatLngsToCoords(latlngs[i], LineUtil.isFlat(latlngs[i]) ? 0 : levelsDeep - 1, closed, precision) :\r\n\t\t\tlatLngToCoords(latlngs[i], precision));\r\n\t}\r\n\r\n\tif (!levelsDeep && closed && coords.length > 0) {\r\n\t\tcoords.push(coords[0].slice());\r\n\t}\r\n\r\n\treturn coords;\r\n}\r\n\r\nexport function getFeature(layer, newGeometry) {\r\n\treturn layer.feature ?\r\n\t\tUtil.extend({}, layer.feature, {geometry: newGeometry}) :\r\n\t\tasFeature(newGeometry);\r\n}\r\n\r\n// @function asFeature(geojson: Object): Object\r\n// Normalize GeoJSON geometries/features into GeoJSON features.\r\nexport function asFeature(geojson) {\r\n\tif (geojson.type === 'Feature' || geojson.type === 'FeatureCollection') {\r\n\t\treturn geojson;\r\n\t}\r\n\r\n\treturn {\r\n\t\ttype: 'Feature',\r\n\t\tproperties: {},\r\n\t\tgeometry: geojson\r\n\t};\r\n}\r\n\r\nvar PointToGeoJSON = {\r\n\ttoGeoJSON: function (precision) {\r\n\t\treturn getFeature(this, {\r\n\t\t\ttype: 'Point',\r\n\t\t\tcoordinates: latLngToCoords(this.getLatLng(), precision)\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// @namespace Marker\r\n// @section Other methods\r\n// @method toGeoJSON(precision?: Number|false): Object\r\n// Coordinates values are rounded with [`formatNum`](#util-formatnum) function with given `precision`.\r\n// Returns a [`GeoJSON`](https://en.wikipedia.org/wiki/GeoJSON) representation of the marker (as a GeoJSON `Point` Feature).\r\nMarker.include(PointToGeoJSON);\r\n\r\n// @namespace CircleMarker\r\n// @method toGeoJSON(precision?: Number|false): Object\r\n// Coordinates values are rounded with [`formatNum`](#util-formatnum) function with given `precision`.\r\n// Returns a [`GeoJSON`](https://en.wikipedia.org/wiki/GeoJSON) representation of the circle marker (as a GeoJSON `Point` Feature).\r\nCircle.include(PointToGeoJSON);\r\nCircleMarker.include(PointToGeoJSON);\r\n\r\n\r\n// @namespace Polyline\r\n// @method toGeoJSON(precision?: Number|false): Object\r\n// Coordinates values are rounded with [`formatNum`](#util-formatnum) function with given `precision`.\r\n// Returns a [`GeoJSON`](https://en.wikipedia.org/wiki/GeoJSON) representation of the polyline (as a GeoJSON `LineString` or `MultiLineString` Feature).\r\nPolyline.include({\r\n\ttoGeoJSON: function (precision) {\r\n\t\tvar multi = !LineUtil.isFlat(this._latlngs);\r\n\r\n\t\tvar coords = latLngsToCoords(this._latlngs, multi ? 1 : 0, false, precision);\r\n\r\n\t\treturn getFeature(this, {\r\n\t\t\ttype: (multi ? 'Multi' : '') + 'LineString',\r\n\t\t\tcoordinates: coords\r\n\t\t});\r\n\t}\r\n});\r\n\r\n// @namespace Polygon\r\n// @method toGeoJSON(precision?: Number|false): Object\r\n// Coordinates values are rounded with [`formatNum`](#util-formatnum) function with given `precision`.\r\n// Returns a [`GeoJSON`](https://en.wikipedia.org/wiki/GeoJSON) representation of the polygon (as a GeoJSON `Polygon` or `MultiPolygon` Feature).\r\nPolygon.include({\r\n\ttoGeoJSON: function (precision) {\r\n\t\tvar holes = !LineUtil.isFlat(this._latlngs),\r\n\t\t    multi = holes && !LineUtil.isFlat(this._latlngs[0]);\r\n\r\n\t\tvar coords = latLngsToCoords(this._latlngs, multi ? 2 : holes ? 1 : 0, true, precision);\r\n\r\n\t\tif (!holes) {\r\n\t\t\tcoords = [coords];\r\n\t\t}\r\n\r\n\t\treturn getFeature(this, {\r\n\t\t\ttype: (multi ? 'Multi' : '') + 'Polygon',\r\n\t\t\tcoordinates: coords\r\n\t\t});\r\n\t}\r\n});\r\n\r\n\r\n// @namespace LayerGroup\r\nLayerGroup.include({\r\n\ttoMultiPoint: function (precision) {\r\n\t\tvar coords = [];\r\n\r\n\t\tthis.eachLayer(function (layer) {\r\n\t\t\tcoords.push(layer.toGeoJSON(precision).geometry.coordinates);\r\n\t\t});\r\n\r\n\t\treturn getFeature(this, {\r\n\t\t\ttype: 'MultiPoint',\r\n\t\t\tcoordinates: coords\r\n\t\t});\r\n\t},\r\n\r\n\t// @method toGeoJSON(precision?: Number|false): Object\r\n\t// Coordinates values are rounded with [`formatNum`](#util-formatnum) function with given `precision`.\r\n\t// Returns a [`GeoJSON`](https://en.wikipedia.org/wiki/GeoJSON) representation of the layer group (as a GeoJSON `FeatureCollection`, `GeometryCollection`, or `MultiPoint`).\r\n\ttoGeoJSON: function (precision) {\r\n\r\n\t\tvar type = this.feature && this.feature.geometry && this.feature.geometry.type;\r\n\r\n\t\tif (type === 'MultiPoint') {\r\n\t\t\treturn this.toMultiPoint(precision);\r\n\t\t}\r\n\r\n\t\tvar isGeometryCollection = type === 'GeometryCollection',\r\n\t\t    jsons = [];\r\n\r\n\t\tthis.eachLayer(function (layer) {\r\n\t\t\tif (layer.toGeoJSON) {\r\n\t\t\t\tvar json = layer.toGeoJSON(precision);\r\n\t\t\t\tif (isGeometryCollection) {\r\n\t\t\t\t\tjsons.push(json.geometry);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar feature = asFeature(json);\r\n\t\t\t\t\t// Squash nested feature collections\r\n\t\t\t\t\tif (feature.type === 'FeatureCollection') {\r\n\t\t\t\t\t\tjsons.push.apply(jsons, feature.features);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjsons.push(feature);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (isGeometryCollection) {\r\n\t\t\treturn getFeature(this, {\r\n\t\t\t\tgeometries: jsons,\r\n\t\t\t\ttype: 'GeometryCollection'\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttype: 'FeatureCollection',\r\n\t\t\tfeatures: jsons\r\n\t\t};\r\n\t}\r\n});\r\n\r\n// @namespace GeoJSON\r\n// @factory L.geoJSON(geojson?: Object, options?: GeoJSON options)\r\n// Creates a GeoJSON layer. Optionally accepts an object in\r\n// [GeoJSON format](https://tools.ietf.org/html/rfc7946) to display on the map\r\n// (you can alternatively add it later with `addData` method) and an `options` object.\r\nexport function geoJSON(geojson, options) {\r\n\treturn new GeoJSON(geojson, options);\r\n}\r\n\r\n// Backward compatibility.\r\nexport var geoJson = geoJSON;\r\n","import {Layer} from './Layer';\r\nimport * as Util from '../core/Util';\r\nimport {toLatLngBounds} from '../geo/LatLngBounds';\r\nimport {Bounds} from '../geometry/Bounds';\r\nimport * as DomUtil from '../dom/DomUtil';\r\n\r\n/*\r\n * @class ImageOverlay\r\n * @aka L.ImageOverlay\r\n * @inherits Interactive layer\r\n *\r\n * Used to load and display a single image over specific bounds of the map. Extends `Layer`.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * var imageUrl = 'https://maps.lib.utexas.edu/maps/historical/newark_nj_1922.jpg',\r\n * \timageBounds = [[40.712216, -74.22655], [40.773941, -74.12544]];\r\n * L.imageOverlay(imageUrl, imageBounds).addTo(map);\r\n * ```\r\n */\r\n\r\nexport var ImageOverlay = Layer.extend({\r\n\r\n\t// @section\r\n\t// @aka ImageOverlay options\r\n\toptions: {\r\n\t\t// @option opacity: Number = 1.0\r\n\t\t// The opacity of the image overlay.\r\n\t\topacity: 1,\r\n\r\n\t\t// @option alt: String = ''\r\n\t\t// Text for the `alt` attribute of the image (useful for accessibility).\r\n\t\talt: '',\r\n\r\n\t\t// @option interactive: Boolean = false\r\n\t\t// If `true`, the image overlay will emit [mouse events](#interactive-layer) when clicked or hovered.\r\n\t\tinteractive: false,\r\n\r\n\t\t// @option crossOrigin: Boolean|String = false\r\n\t\t// Whether the crossOrigin attribute will be added to the image.\r\n\t\t// If a String is provided, the image will have its crossOrigin attribute set to the String provided. This is needed if you want to access image pixel data.\r\n\t\t// Refer to [CORS Settings](https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes) for valid String values.\r\n\t\tcrossOrigin: false,\r\n\r\n\t\t// @option errorOverlayUrl: String = ''\r\n\t\t// URL to the overlay image to show in place of the overlay that failed to load.\r\n\t\terrorOverlayUrl: '',\r\n\r\n\t\t// @option zIndex: Number = 1\r\n\t\t// The explicit [zIndex](https://developer.mozilla.org/docs/Web/CSS/CSS_Positioning/Understanding_z_index) of the overlay layer.\r\n\t\tzIndex: 1,\r\n\r\n\t\t// @option className: String = ''\r\n\t\t// A custom class name to assign to the image. Empty by default.\r\n\t\tclassName: ''\r\n\t},\r\n\r\n\tinitialize: function (url, bounds, options) { // (String, LatLngBounds, Object)\r\n\t\tthis._url = url;\r\n\t\tthis._bounds = toLatLngBounds(bounds);\r\n\r\n\t\tUtil.setOptions(this, options);\r\n\t},\r\n\r\n\tonAdd: function () {\r\n\t\tif (!this._image) {\r\n\t\t\tthis._initImage();\r\n\r\n\t\t\tif (this.options.opacity < 1) {\r\n\t\t\t\tthis._updateOpacity();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.options.interactive) {\r\n\t\t\tDomUtil.addClass(this._image, 'leaflet-interactive');\r\n\t\t\tthis.addInteractiveTarget(this._image);\r\n\t\t}\r\n\r\n\t\tthis.getPane().appendChild(this._image);\r\n\t\tthis._reset();\r\n\t},\r\n\r\n\tonRemove: function () {\r\n\t\tDomUtil.remove(this._image);\r\n\t\tif (this.options.interactive) {\r\n\t\t\tthis.removeInteractiveTarget(this._image);\r\n\t\t}\r\n\t},\r\n\r\n\t// @method setOpacity(opacity: Number): this\r\n\t// Sets the opacity of the overlay.\r\n\tsetOpacity: function (opacity) {\r\n\t\tthis.options.opacity = opacity;\r\n\r\n\t\tif (this._image) {\r\n\t\t\tthis._updateOpacity();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetStyle: function (styleOpts) {\r\n\t\tif (styleOpts.opacity) {\r\n\t\t\tthis.setOpacity(styleOpts.opacity);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method bringToFront(): this\r\n\t// Brings the layer to the top of all overlays.\r\n\tbringToFront: function () {\r\n\t\tif (this._map) {\r\n\t\t\tDomUtil.toFront(this._image);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method bringToBack(): this\r\n\t// Brings the layer to the bottom of all overlays.\r\n\tbringToBack: function () {\r\n\t\tif (this._map) {\r\n\t\t\tDomUtil.toBack(this._image);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method setUrl(url: String): this\r\n\t// Changes the URL of the image.\r\n\tsetUrl: function (url) {\r\n\t\tthis._url = url;\r\n\r\n\t\tif (this._image) {\r\n\t\t\tthis._image.src = url;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method setBounds(bounds: LatLngBounds): this\r\n\t// Update the bounds that this ImageOverlay covers\r\n\tsetBounds: function (bounds) {\r\n\t\tthis._bounds = toLatLngBounds(bounds);\r\n\r\n\t\tif (this._map) {\r\n\t\t\tthis._reset();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetEvents: function () {\r\n\t\tvar events = {\r\n\t\t\tzoom: this._reset,\r\n\t\t\tviewreset: this._reset\r\n\t\t};\r\n\r\n\t\tif (this._zoomAnimated) {\r\n\t\t\tevents.zoomanim = this._animateZoom;\r\n\t\t}\r\n\r\n\t\treturn events;\r\n\t},\r\n\r\n\t// @method setZIndex(value: Number): this\r\n\t// Changes the [zIndex](#imageoverlay-zindex) of the image overlay.\r\n\tsetZIndex: function (value) {\r\n\t\tthis.options.zIndex = value;\r\n\t\tthis._updateZIndex();\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method getBounds(): LatLngBounds\r\n\t// Get the bounds that this ImageOverlay covers\r\n\tgetBounds: function () {\r\n\t\treturn this._bounds;\r\n\t},\r\n\r\n\t// @method getElement(): HTMLElement\r\n\t// Returns the instance of [`HTMLImageElement`](https://developer.mozilla.org/docs/Web/API/HTMLImageElement)\r\n\t// used by this overlay.\r\n\tgetElement: function () {\r\n\t\treturn this._image;\r\n\t},\r\n\r\n\t_initImage: function () {\r\n\t\tvar wasElementSupplied = this._url.tagName === 'IMG';\r\n\t\tvar img = this._image = wasElementSupplied ? this._url : DomUtil.create('img');\r\n\r\n\t\tDomUtil.addClass(img, 'leaflet-image-layer');\r\n\t\tif (this._zoomAnimated) { DomUtil.addClass(img, 'leaflet-zoom-animated'); }\r\n\t\tif (this.options.className) { DomUtil.addClass(img, this.options.className); }\r\n\r\n\t\timg.onselectstart = Util.falseFn;\r\n\t\timg.onmousemove = Util.falseFn;\r\n\r\n\t\t// @event load: Event\r\n\t\t// Fired when the ImageOverlay layer has loaded its image\r\n\t\timg.onload = Util.bind(this.fire, this, 'load');\r\n\t\timg.onerror = Util.bind(this._overlayOnError, this, 'error');\r\n\r\n\t\tif (this.options.crossOrigin || this.options.crossOrigin === '') {\r\n\t\t\timg.crossOrigin = this.options.crossOrigin === true ? '' : this.options.crossOrigin;\r\n\t\t}\r\n\r\n\t\tif (this.options.zIndex) {\r\n\t\t\tthis._updateZIndex();\r\n\t\t}\r\n\r\n\t\tif (wasElementSupplied) {\r\n\t\t\tthis._url = img.src;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\timg.src = this._url;\r\n\t\timg.alt = this.options.alt;\r\n\t},\r\n\r\n\t_animateZoom: function (e) {\r\n\t\tvar scale = this._map.getZoomScale(e.zoom),\r\n\t\t    offset = this._map._latLngBoundsToNewLayerBounds(this._bounds, e.zoom, e.center).min;\r\n\r\n\t\tDomUtil.setTransform(this._image, offset, scale);\r\n\t},\r\n\r\n\t_reset: function () {\r\n\t\tvar image = this._image,\r\n\t\t    bounds = new Bounds(\r\n\t\t        this._map.latLngToLayerPoint(this._bounds.getNorthWest()),\r\n\t\t        this._map.latLngToLayerPoint(this._bounds.getSouthEast())),\r\n\t\t    size = bounds.getSize();\r\n\r\n\t\tDomUtil.setPosition(image, bounds.min);\r\n\r\n\t\timage.style.width  = size.x + 'px';\r\n\t\timage.style.height = size.y + 'px';\r\n\t},\r\n\r\n\t_updateOpacity: function () {\r\n\t\tDomUtil.setOpacity(this._image, this.options.opacity);\r\n\t},\r\n\r\n\t_updateZIndex: function () {\r\n\t\tif (this._image && this.options.zIndex !== undefined && this.options.zIndex !== null) {\r\n\t\t\tthis._image.style.zIndex = this.options.zIndex;\r\n\t\t}\r\n\t},\r\n\r\n\t_overlayOnError: function () {\r\n\t\t// @event error: Event\r\n\t\t// Fired when the ImageOverlay layer fails to load its image\r\n\t\tthis.fire('error');\r\n\r\n\t\tvar errorUrl = this.options.errorOverlayUrl;\r\n\t\tif (errorUrl && this._url !== errorUrl) {\r\n\t\t\tthis._url = errorUrl;\r\n\t\t\tthis._image.src = errorUrl;\r\n\t\t}\r\n\t},\r\n\r\n\t// @method getCenter(): LatLng\r\n\t// Returns the center of the ImageOverlay.\r\n\tgetCenter: function () {\r\n\t\treturn this._bounds.getCenter();\r\n\t}\r\n});\r\n\r\n// @factory L.imageOverlay(imageUrl: String, bounds: LatLngBounds, options?: ImageOverlay options)\r\n// Instantiates an image overlay object given the URL of the image and the\r\n// geographical bounds it is tied to.\r\nexport var imageOverlay = function (url, bounds, options) {\r\n\treturn new ImageOverlay(url, bounds, options);\r\n};\r\n","import {ImageOverlay} from './ImageOverlay';\r\nimport * as DomUtil from '../dom/DomUtil';\r\nimport * as Util from '../core/Util';\r\n\r\n/*\r\n * @class VideoOverlay\r\n * @aka L.VideoOverlay\r\n * @inherits ImageOverlay\r\n *\r\n * Used to load and display a video player over specific bounds of the map. Extends `ImageOverlay`.\r\n *\r\n * A video overlay uses the [`<video>`](https://developer.mozilla.org/docs/Web/HTML/Element/video)\r\n * HTML5 element.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * var videoUrl = 'https://www.mapbox.com/bites/00188/patricia_nasa.webm',\r\n * \tvideoBounds = [[ 32, -130], [ 13, -100]];\r\n * L.videoOverlay(videoUrl, videoBounds ).addTo(map);\r\n * ```\r\n */\r\n\r\nexport var VideoOverlay = ImageOverlay.extend({\r\n\r\n\t// @section\r\n\t// @aka VideoOverlay options\r\n\toptions: {\r\n\t\t// @option autoplay: Boolean = true\r\n\t\t// Whether the video starts playing automatically when loaded.\r\n\t\t// On some browsers autoplay will only work with `muted: true`\r\n\t\tautoplay: true,\r\n\r\n\t\t// @option loop: Boolean = true\r\n\t\t// Whether the video will loop back to the beginning when played.\r\n\t\tloop: true,\r\n\r\n\t\t// @option keepAspectRatio: Boolean = true\r\n\t\t// Whether the video will save aspect ratio after the projection.\r\n\t\t// Relevant for supported browsers. See [browser compatibility](https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit)\r\n\t\tkeepAspectRatio: true,\r\n\r\n\t\t// @option muted: Boolean = false\r\n\t\t// Whether the video starts on mute when loaded.\r\n\t\tmuted: false,\r\n\r\n\t\t// @option playsInline: Boolean = true\r\n\t\t// Mobile browsers will play the video right where it is instead of open it up in fullscreen mode.\r\n\t\tplaysInline: true\r\n\t},\r\n\r\n\t_initImage: function () {\r\n\t\tvar wasElementSupplied = this._url.tagName === 'VIDEO';\r\n\t\tvar vid = this._image = wasElementSupplied ? this._url : DomUtil.create('video');\r\n\r\n\t\tDomUtil.addClass(vid, 'leaflet-image-layer');\r\n\t\tif (this._zoomAnimated) { DomUtil.addClass(vid, 'leaflet-zoom-animated'); }\r\n\t\tif (this.options.className) { DomUtil.addClass(vid, this.options.className); }\r\n\r\n\t\tvid.onselectstart = Util.falseFn;\r\n\t\tvid.onmousemove = Util.falseFn;\r\n\r\n\t\t// @event load: Event\r\n\t\t// Fired when the video has finished loading the first frame\r\n\t\tvid.onloadeddata = Util.bind(this.fire, this, 'load');\r\n\r\n\t\tif (wasElementSupplied) {\r\n\t\t\tvar sourceElements = vid.getElementsByTagName('source');\r\n\t\t\tvar sources = [];\r\n\t\t\tfor (var j = 0; j < sourceElements.length; j++) {\r\n\t\t\t\tsources.push(sourceElements[j].src);\r\n\t\t\t}\r\n\r\n\t\t\tthis._url = (sourceElements.length > 0) ? sources : [vid.src];\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!Util.isArray(this._url)) { this._url = [this._url]; }\r\n\r\n\t\tif (!this.options.keepAspectRatio && Object.prototype.hasOwnProperty.call(vid.style, 'objectFit')) {\r\n\t\t\tvid.style['objectFit'] = 'fill';\r\n\t\t}\r\n\t\tvid.autoplay = !!this.options.autoplay;\r\n\t\tvid.loop = !!this.options.loop;\r\n\t\tvid.muted = !!this.options.muted;\r\n\t\tvid.playsInline = !!this.options.playsInline;\r\n\t\tfor (var i = 0; i < this._url.length; i++) {\r\n\t\t\tvar source = DomUtil.create('source');\r\n\t\t\tsource.src = this._url[i];\r\n\t\t\tvid.appendChild(source);\r\n\t\t}\r\n\t}\r\n\r\n\t// @method getElement(): HTMLVideoElement\r\n\t// Returns the instance of [`HTMLVideoElement`](https://developer.mozilla.org/docs/Web/API/HTMLVideoElement)\r\n\t// used by this overlay.\r\n});\r\n\r\n\r\n// @factory L.videoOverlay(video: String|Array|HTMLVideoElement, bounds: LatLngBounds, options?: VideoOverlay options)\r\n// Instantiates an image overlay object given the URL of the video (or array of URLs, or even a video element) and the\r\n// geographical bounds it is tied to.\r\n\r\nexport function videoOverlay(video, bounds, options) {\r\n\treturn new VideoOverlay(video, bounds, options);\r\n}\r\n","import {ImageOverlay} from './ImageOverlay';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as Util from '../core/Util';\n\n/*\n * @class SVGOverlay\n * @aka L.SVGOverlay\n * @inherits ImageOverlay\n *\n * Used to load, display and provide DOM access to an SVG file over specific bounds of the map. Extends `ImageOverlay`.\n *\n * An SVG overlay uses the [`<svg>`](https://developer.mozilla.org/docs/Web/SVG/Element/svg) element.\n *\n * @example\n *\n * ```js\n * var svgElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n * svgElement.setAttribute('xmlns', \"http://www.w3.org/2000/svg\");\n * svgElement.setAttribute('viewBox', \"0 0 200 200\");\n * svgElement.innerHTML = '<rect width=\"200\" height=\"200\"/><rect x=\"75\" y=\"23\" width=\"50\" height=\"50\" style=\"fill:red\"/><rect x=\"75\" y=\"123\" width=\"50\" height=\"50\" style=\"fill:#0013ff\"/>';\n * var svgElementBounds = [ [ 32, -130 ], [ 13, -100 ] ];\n * L.svgOverlay(svgElement, svgElementBounds).addTo(map);\n * ```\n */\n\nexport var SVGOverlay = ImageOverlay.extend({\n\t_initImage: function () {\n\t\tvar el = this._image = this._url;\n\n\t\tDomUtil.addClass(el, 'leaflet-image-layer');\n\t\tif (this._zoomAnimated) { DomUtil.addClass(el, 'leaflet-zoom-animated'); }\n\t\tif (this.options.className) { DomUtil.addClass(el, this.options.className); }\n\n\t\tel.onselectstart = Util.falseFn;\n\t\tel.onmousemove = Util.falseFn;\n\t}\n\n\t// @method getElement(): SVGElement\n\t// Returns the instance of [`SVGElement`](https://developer.mozilla.org/docs/Web/API/SVGElement)\n\t// used by this overlay.\n});\n\n\n// @factory L.svgOverlay(svg: String|SVGElement, bounds: LatLngBounds, options?: SVGOverlay options)\n// Instantiates an image overlay object given an SVG element and the geographical bounds it is tied to.\n// A viewBox attribute is required on the SVG element to zoom in and out properly.\n\nexport function svgOverlay(el, bounds, options) {\n\treturn new SVGOverlay(el, bounds, options);\n}\n","import {Map} from '../map/Map';\r\nimport {Layer} from './Layer';\r\nimport {FeatureGroup} from './FeatureGroup';\r\nimport * as Util from '../core/Util';\r\nimport {toLatLng, LatLng} from '../geo/LatLng';\r\nimport {toPoint} from '../geometry/Point';\r\nimport * as DomUtil from '../dom/DomUtil';\r\n\r\n/*\r\n * @class DivOverlay\r\n * @inherits Interactive layer\r\n * @aka L.DivOverlay\r\n * Base model for L.Popup and L.Tooltip. Inherit from it for custom overlays like plugins.\r\n */\r\n\r\n// @namespace DivOverlay\r\nexport var DivOverlay = Layer.extend({\r\n\r\n\t// @section\r\n\t// @aka DivOverlay options\r\n\toptions: {\r\n\t\t// @option interactive: Boolean = false\r\n\t\t// If true, the popup/tooltip will listen to the mouse events.\r\n\t\tinteractive: false,\r\n\r\n\t\t// @option offset: Point = Point(0, 0)\r\n\t\t// The offset of the overlay position.\r\n\t\toffset: [0, 0],\r\n\r\n\t\t// @option className: String = ''\r\n\t\t// A custom CSS class name to assign to the overlay.\r\n\t\tclassName: '',\r\n\r\n\t\t// @option pane: String = undefined\r\n\t\t// `Map pane` where the overlay will be added.\r\n\t\tpane: undefined,\r\n\r\n\t\t// @option content: String|HTMLElement|Function = ''\r\n\t\t// Sets the HTML content of the overlay while initializing. If a function is passed the source layer will be\r\n\t\t// passed to the function. The function should return a `String` or `HTMLElement` to be used in the overlay.\r\n\t\tcontent: ''\r\n\t},\r\n\r\n\tinitialize: function (options, source) {\r\n\t\tif (options && (options instanceof LatLng || Util.isArray(options))) {\r\n\t\t\tthis._latlng = toLatLng(options);\r\n\t\t\tUtil.setOptions(this, source);\r\n\t\t} else {\r\n\t\t\tUtil.setOptions(this, options);\r\n\t\t\tthis._source = source;\r\n\t\t}\r\n\t\tif (this.options.content) {\r\n\t\t\tthis._content = this.options.content;\r\n\t\t}\r\n\t},\r\n\r\n\t// @method openOn(map: Map): this\r\n\t// Adds the overlay to the map.\r\n\t// Alternative to `map.openPopup(popup)`/`.openTooltip(tooltip)`.\r\n\topenOn: function (map) {\r\n\t\tmap = arguments.length ? map : this._source._map; // experimental, not the part of public api\r\n\t\tif (!map.hasLayer(this)) {\r\n\t\t\tmap.addLayer(this);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method close(): this\r\n\t// Closes the overlay.\r\n\t// Alternative to `map.closePopup(popup)`/`.closeTooltip(tooltip)`\r\n\t// and `layer.closePopup()`/`.closeTooltip()`.\r\n\tclose: function () {\r\n\t\tif (this._map) {\r\n\t\t\tthis._map.removeLayer(this);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method toggle(layer?: Layer): this\r\n\t// Opens or closes the overlay bound to layer depending on its current state.\r\n\t// Argument may be omitted only for overlay bound to layer.\r\n\t// Alternative to `layer.togglePopup()`/`.toggleTooltip()`.\r\n\ttoggle: function (layer) {\r\n\t\tif (this._map) {\r\n\t\t\tthis.close();\r\n\t\t} else {\r\n\t\t\tif (arguments.length) {\r\n\t\t\t\tthis._source = layer;\r\n\t\t\t} else {\r\n\t\t\t\tlayer = this._source;\r\n\t\t\t}\r\n\t\t\tthis._prepareOpen();\r\n\r\n\t\t\t// open the overlay on the map\r\n\t\t\tthis.openOn(layer._map);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._zoomAnimated = map._zoomAnimated;\r\n\r\n\t\tif (!this._container) {\r\n\t\t\tthis._initLayout();\r\n\t\t}\r\n\r\n\t\tif (map._fadeAnimated) {\r\n\t\t\tDomUtil.setOpacity(this._container, 0);\r\n\t\t}\r\n\r\n\t\tclearTimeout(this._removeTimeout);\r\n\t\tthis.getPane().appendChild(this._container);\r\n\t\tthis.update();\r\n\r\n\t\tif (map._fadeAnimated) {\r\n\t\t\tDomUtil.setOpacity(this._container, 1);\r\n\t\t}\r\n\r\n\t\tthis.bringToFront();\r\n\r\n\t\tif (this.options.interactive) {\r\n\t\t\tDomUtil.addClass(this._container, 'leaflet-interactive');\r\n\t\t\tthis.addInteractiveTarget(this._container);\r\n\t\t}\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tif (map._fadeAnimated) {\r\n\t\t\tDomUtil.setOpacity(this._container, 0);\r\n\t\t\tthis._removeTimeout = setTimeout(Util.bind(DomUtil.remove, undefined, this._container), 200);\r\n\t\t} else {\r\n\t\t\tDomUtil.remove(this._container);\r\n\t\t}\r\n\r\n\t\tif (this.options.interactive) {\r\n\t\t\tDomUtil.removeClass(this._container, 'leaflet-interactive');\r\n\t\t\tthis.removeInteractiveTarget(this._container);\r\n\t\t}\r\n\t},\r\n\r\n\t// @namespace DivOverlay\r\n\t// @method getLatLng: LatLng\r\n\t// Returns the geographical point of the overlay.\r\n\tgetLatLng: function () {\r\n\t\treturn this._latlng;\r\n\t},\r\n\r\n\t// @method setLatLng(latlng: LatLng): this\r\n\t// Sets the geographical point where the overlay will open.\r\n\tsetLatLng: function (latlng) {\r\n\t\tthis._latlng = toLatLng(latlng);\r\n\t\tif (this._map) {\r\n\t\t\tthis._updatePosition();\r\n\t\t\tthis._adjustPan();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method getContent: String|HTMLElement\r\n\t// Returns the content of the overlay.\r\n\tgetContent: function () {\r\n\t\treturn this._content;\r\n\t},\r\n\r\n\t// @method setContent(htmlContent: String|HTMLElement|Function): this\r\n\t// Sets the HTML content of the overlay. If a function is passed the source layer will be passed to the function.\r\n\t// The function should return a `String` or `HTMLElement` to be used in the overlay.\r\n\tsetContent: function (content) {\r\n\t\tthis._content = content;\r\n\t\tthis.update();\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method getElement: String|HTMLElement\r\n\t// Returns the HTML container of the overlay.\r\n\tgetElement: function () {\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\t// @method update: null\r\n\t// Updates the overlay content, layout and position. Useful for updating the overlay after something inside changed, e.g. image loaded.\r\n\tupdate: function () {\r\n\t\tif (!this._map) { return; }\r\n\r\n\t\tthis._container.style.visibility = 'hidden';\r\n\r\n\t\tthis._updateContent();\r\n\t\tthis._updateLayout();\r\n\t\tthis._updatePosition();\r\n\r\n\t\tthis._container.style.visibility = '';\r\n\r\n\t\tthis._adjustPan();\r\n\t},\r\n\r\n\tgetEvents: function () {\r\n\t\tvar events = {\r\n\t\t\tzoom: this._updatePosition,\r\n\t\t\tviewreset: this._updatePosition\r\n\t\t};\r\n\r\n\t\tif (this._zoomAnimated) {\r\n\t\t\tevents.zoomanim = this._animateZoom;\r\n\t\t}\r\n\t\treturn events;\r\n\t},\r\n\r\n\t// @method isOpen: Boolean\r\n\t// Returns `true` when the overlay is visible on the map.\r\n\tisOpen: function () {\r\n\t\treturn !!this._map && this._map.hasLayer(this);\r\n\t},\r\n\r\n\t// @method bringToFront: this\r\n\t// Brings this overlay in front of other overlays (in the same map pane).\r\n\tbringToFront: function () {\r\n\t\tif (this._map) {\r\n\t\t\tDomUtil.toFront(this._container);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method bringToBack: this\r\n\t// Brings this overlay to the back of other overlays (in the same map pane).\r\n\tbringToBack: function () {\r\n\t\tif (this._map) {\r\n\t\t\tDomUtil.toBack(this._container);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// prepare bound overlay to open: update latlng pos / content source (for FeatureGroup)\r\n\t_prepareOpen: function (latlng) {\r\n\t\tvar source = this._source;\r\n\t\tif (!source._map) { return false; }\r\n\r\n\t\tif (source instanceof FeatureGroup) {\r\n\t\t\tsource = null;\r\n\t\t\tvar layers = this._source._layers;\r\n\t\t\tfor (var id in layers) {\r\n\t\t\t\tif (layers[id]._map) {\r\n\t\t\t\t\tsource = layers[id];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!source) { return false; } // Unable to get source layer.\r\n\r\n\t\t\t// set overlay source to this layer\r\n\t\t\tthis._source = source;\r\n\t\t}\r\n\r\n\t\tif (!latlng) {\r\n\t\t\tif (source.getCenter) {\r\n\t\t\t\tlatlng = source.getCenter();\r\n\t\t\t} else if (source.getLatLng) {\r\n\t\t\t\tlatlng = source.getLatLng();\r\n\t\t\t} else if (source.getBounds) {\r\n\t\t\t\tlatlng = source.getBounds().getCenter();\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error('Unable to get source layer LatLng.');\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setLatLng(latlng);\r\n\r\n\t\tif (this._map) {\r\n\t\t\t// update the overlay (content, layout, etc...)\r\n\t\t\tthis.update();\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t_updateContent: function () {\r\n\t\tif (!this._content) { return; }\r\n\r\n\t\tvar node = this._contentNode;\r\n\t\tvar content = (typeof this._content === 'function') ? this._content(this._source || this) : this._content;\r\n\r\n\t\tif (typeof content === 'string') {\r\n\t\t\tnode.innerHTML = content;\r\n\t\t} else {\r\n\t\t\twhile (node.hasChildNodes()) {\r\n\t\t\t\tnode.removeChild(node.firstChild);\r\n\t\t\t}\r\n\t\t\tnode.appendChild(content);\r\n\t\t}\r\n\r\n\t\t// @namespace DivOverlay\r\n\t\t// @section DivOverlay events\r\n\t\t// @event contentupdate: Event\r\n\t\t// Fired when the content of the overlay is updated\r\n\t\tthis.fire('contentupdate');\r\n\t},\r\n\r\n\t_updatePosition: function () {\r\n\t\tif (!this._map) { return; }\r\n\r\n\t\tvar pos = this._map.latLngToLayerPoint(this._latlng),\r\n\t\t    offset = toPoint(this.options.offset),\r\n\t\t    anchor = this._getAnchor();\r\n\r\n\t\tif (this._zoomAnimated) {\r\n\t\t\tDomUtil.setPosition(this._container, pos.add(anchor));\r\n\t\t} else {\r\n\t\t\toffset = offset.add(pos).add(anchor);\r\n\t\t}\r\n\r\n\t\tvar bottom = this._containerBottom = -offset.y,\r\n\t\t    left = this._containerLeft = -Math.round(this._containerWidth / 2) + offset.x;\r\n\r\n\t\t// bottom position the overlay in case the height of the overlay changes (images loading etc)\r\n\t\tthis._container.style.bottom = bottom + 'px';\r\n\t\tthis._container.style.left = left + 'px';\r\n\t},\r\n\r\n\t_getAnchor: function () {\r\n\t\treturn [0, 0];\r\n\t}\r\n\r\n});\r\n\r\nMap.include({\r\n\t_initOverlay: function (OverlayClass, content, latlng, options) {\r\n\t\tvar overlay = content;\r\n\t\tif (!(overlay instanceof OverlayClass)) {\r\n\t\t\toverlay = new OverlayClass(options).setContent(content);\r\n\t\t}\r\n\t\tif (latlng) {\r\n\t\t\toverlay.setLatLng(latlng);\r\n\t\t}\r\n\t\treturn overlay;\r\n\t}\r\n});\r\n\r\n\r\nLayer.include({\r\n\t_initOverlay: function (OverlayClass, old, content, options) {\r\n\t\tvar overlay = content;\r\n\t\tif (overlay instanceof OverlayClass) {\r\n\t\t\tUtil.setOptions(overlay, options);\r\n\t\t\toverlay._source = this;\r\n\t\t} else {\r\n\t\t\toverlay = (old && !options) ? old : new OverlayClass(options, this);\r\n\t\t\toverlay.setContent(content);\r\n\t\t}\r\n\t\treturn overlay;\r\n\t}\r\n});\r\n","import {DivOverlay} from './DivOverlay';\r\nimport * as DomEvent from '../dom/DomEvent';\r\nimport * as DomUtil from '../dom/DomUtil';\r\nimport {Point, toPoint} from '../geometry/Point';\r\nimport {Map} from '../map/Map';\r\nimport {Layer} from './Layer';\r\nimport {Path} from './vector/Path';\r\nimport {FeatureGroup} from './FeatureGroup';\r\n\r\n/*\r\n * @class Popup\r\n * @inherits DivOverlay\r\n * @aka L.Popup\r\n * Used to open popups in certain places of the map. Use [Map.openPopup](#map-openpopup) to\r\n * open popups while making sure that only one popup is open at one time\r\n * (recommended for usability), or use [Map.addLayer](#map-addlayer) to open as many as you want.\r\n *\r\n * @example\r\n *\r\n * If you want to just bind a popup to marker click and then open it, it's really easy:\r\n *\r\n * ```js\r\n * marker.bindPopup(popupContent).openPopup();\r\n * ```\r\n * Path overlays like polylines also have a `bindPopup` method.\r\n *\r\n * A popup can be also standalone:\r\n *\r\n * ```js\r\n * var popup = L.popup()\r\n * \t.setLatLng(latlng)\r\n * \t.setContent('<p>Hello world!<br />This is a nice popup.</p>')\r\n * \t.openOn(map);\r\n * ```\r\n * or\r\n * ```js\r\n * var popup = L.popup(latlng, {content: '<p>Hello world!<br />This is a nice popup.</p>')\r\n * \t.openOn(map);\r\n * ```\r\n */\r\n\r\n\r\n// @namespace Popup\r\nexport var Popup = DivOverlay.extend({\r\n\r\n\t// @section\r\n\t// @aka Popup options\r\n\toptions: {\r\n\t\t// @option pane: String = 'popupPane'\r\n\t\t// `Map pane` where the popup will be added.\r\n\t\tpane: 'popupPane',\r\n\r\n\t\t// @option offset: Point = Point(0, 7)\r\n\t\t// The offset of the popup position.\r\n\t\toffset: [0, 7],\r\n\r\n\t\t// @option maxWidth: Number = 300\r\n\t\t// Max width of the popup, in pixels.\r\n\t\tmaxWidth: 300,\r\n\r\n\t\t// @option minWidth: Number = 50\r\n\t\t// Min width of the popup, in pixels.\r\n\t\tminWidth: 50,\r\n\r\n\t\t// @option maxHeight: Number = null\r\n\t\t// If set, creates a scrollable container of the given height\r\n\t\t// inside a popup if its content exceeds it.\r\n\t\t// The scrollable container can be styled using the\r\n\t\t// `leaflet-popup-scrolled` CSS class selector.\r\n\t\tmaxHeight: null,\r\n\r\n\t\t// @option autoPan: Boolean = true\r\n\t\t// Set it to `false` if you don't want the map to do panning animation\r\n\t\t// to fit the opened popup.\r\n\t\tautoPan: true,\r\n\r\n\t\t// @option autoPanPaddingTopLeft: Point = null\r\n\t\t// The margin between the popup and the top left corner of the map\r\n\t\t// view after autopanning was performed.\r\n\t\tautoPanPaddingTopLeft: null,\r\n\r\n\t\t// @option autoPanPaddingBottomRight: Point = null\r\n\t\t// The margin between the popup and the bottom right corner of the map\r\n\t\t// view after autopanning was performed.\r\n\t\tautoPanPaddingBottomRight: null,\r\n\r\n\t\t// @option autoPanPadding: Point = Point(5, 5)\r\n\t\t// Equivalent of setting both top left and bottom right autopan padding to the same value.\r\n\t\tautoPanPadding: [5, 5],\r\n\r\n\t\t// @option keepInView: Boolean = false\r\n\t\t// Set it to `true` if you want to prevent users from panning the popup\r\n\t\t// off of the screen while it is open.\r\n\t\tkeepInView: false,\r\n\r\n\t\t// @option closeButton: Boolean = true\r\n\t\t// Controls the presence of a close button in the popup.\r\n\t\tcloseButton: true,\r\n\r\n\t\t// @option autoClose: Boolean = true\r\n\t\t// Set it to `false` if you want to override the default behavior of\r\n\t\t// the popup closing when another popup is opened.\r\n\t\tautoClose: true,\r\n\r\n\t\t// @option closeOnEscapeKey: Boolean = true\r\n\t\t// Set it to `false` if you want to override the default behavior of\r\n\t\t// the ESC key for closing of the popup.\r\n\t\tcloseOnEscapeKey: true,\r\n\r\n\t\t// @option closeOnClick: Boolean = *\r\n\t\t// Set it if you want to override the default behavior of the popup closing when user clicks\r\n\t\t// on the map. Defaults to the map's [`closePopupOnClick`](#map-closepopuponclick) option.\r\n\r\n\t\t// @option className: String = ''\r\n\t\t// A custom CSS class name to assign to the popup.\r\n\t\tclassName: ''\r\n\t},\r\n\r\n\t// @namespace Popup\r\n\t// @method openOn(map: Map): this\r\n\t// Alternative to `map.openPopup(popup)`.\r\n\t// Adds the popup to the map and closes the previous one.\r\n\topenOn: function (map) {\r\n\t\tmap = arguments.length ? map : this._source._map; // experimental, not the part of public api\r\n\r\n\t\tif (!map.hasLayer(this) && map._popup && map._popup.options.autoClose) {\r\n\t\t\tmap.removeLayer(map._popup);\r\n\t\t}\r\n\t\tmap._popup = this;\r\n\r\n\t\treturn DivOverlay.prototype.openOn.call(this, map);\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tDivOverlay.prototype.onAdd.call(this, map);\r\n\r\n\t\t// @namespace Map\r\n\t\t// @section Popup events\r\n\t\t// @event popupopen: PopupEvent\r\n\t\t// Fired when a popup is opened in the map\r\n\t\tmap.fire('popupopen', {popup: this});\r\n\r\n\t\tif (this._source) {\r\n\t\t\t// @namespace Layer\r\n\t\t\t// @section Popup events\r\n\t\t\t// @event popupopen: PopupEvent\r\n\t\t\t// Fired when a popup bound to this layer is opened\r\n\t\t\tthis._source.fire('popupopen', {popup: this}, true);\r\n\t\t\t// For non-path layers, we toggle the popup when clicking\r\n\t\t\t// again the layer, so prevent the map to reopen it.\r\n\t\t\tif (!(this._source instanceof Path)) {\r\n\t\t\t\tthis._source.on('preclick', DomEvent.stopPropagation);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tDivOverlay.prototype.onRemove.call(this, map);\r\n\r\n\t\t// @namespace Map\r\n\t\t// @section Popup events\r\n\t\t// @event popupclose: PopupEvent\r\n\t\t// Fired when a popup in the map is closed\r\n\t\tmap.fire('popupclose', {popup: this});\r\n\r\n\t\tif (this._source) {\r\n\t\t\t// @namespace Layer\r\n\t\t\t// @section Popup events\r\n\t\t\t// @event popupclose: PopupEvent\r\n\t\t\t// Fired when a popup bound to this layer is closed\r\n\t\t\tthis._source.fire('popupclose', {popup: this}, true);\r\n\t\t\tif (!(this._source instanceof Path)) {\r\n\t\t\t\tthis._source.off('preclick', DomEvent.stopPropagation);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tgetEvents: function () {\r\n\t\tvar events = DivOverlay.prototype.getEvents.call(this);\r\n\r\n\t\tif (this.options.closeOnClick !== undefined ? this.options.closeOnClick : this._map.options.closePopupOnClick) {\r\n\t\t\tevents.preclick = this.close;\r\n\t\t}\r\n\r\n\t\tif (this.options.keepInView) {\r\n\t\t\tevents.moveend = this._adjustPan;\r\n\t\t}\r\n\r\n\t\treturn events;\r\n\t},\r\n\r\n\t_initLayout: function () {\r\n\t\tvar prefix = 'leaflet-popup',\r\n\t\t    container = this._container = DomUtil.create('div',\r\n\t\t\tprefix + ' ' + (this.options.className || '') +\r\n\t\t\t' leaflet-zoom-animated');\r\n\r\n\t\tvar wrapper = this._wrapper = DomUtil.create('div', prefix + '-content-wrapper', container);\r\n\t\tthis._contentNode = DomUtil.create('div', prefix + '-content', wrapper);\r\n\r\n\t\tDomEvent.disableClickPropagation(container);\r\n\t\tDomEvent.disableScrollPropagation(this._contentNode);\r\n\t\tDomEvent.on(container, 'contextmenu', DomEvent.stopPropagation);\r\n\r\n\t\tthis._tipContainer = DomUtil.create('div', prefix + '-tip-container', container);\r\n\t\tthis._tip = DomUtil.create('div', prefix + '-tip', this._tipContainer);\r\n\r\n\t\tif (this.options.closeButton) {\r\n\t\t\tvar closeButton = this._closeButton = DomUtil.create('a', prefix + '-close-button', container);\r\n\t\t\tcloseButton.setAttribute('role', 'button'); // overrides the implicit role=link of <a> elements #7399\r\n\t\t\tcloseButton.setAttribute('aria-label', 'Close popup');\r\n\t\t\tcloseButton.href = '#close';\r\n\t\t\tcloseButton.innerHTML = '<span aria-hidden=\"true\">&#215;</span>';\r\n\r\n\t\t\tDomEvent.on(closeButton, 'click', function (ev) {\r\n\t\t\t\tDomEvent.preventDefault(ev);\r\n\t\t\t\tthis.close();\r\n\t\t\t}, this);\r\n\t\t}\r\n\t},\r\n\r\n\t_updateLayout: function () {\r\n\t\tvar container = this._contentNode,\r\n\t\t    style = container.style;\r\n\r\n\t\tstyle.width = '';\r\n\t\tstyle.whiteSpace = 'nowrap';\r\n\r\n\t\tvar width = container.offsetWidth;\r\n\t\twidth = Math.min(width, this.options.maxWidth);\r\n\t\twidth = Math.max(width, this.options.minWidth);\r\n\r\n\t\tstyle.width = (width + 1) + 'px';\r\n\t\tstyle.whiteSpace = '';\r\n\r\n\t\tstyle.height = '';\r\n\r\n\t\tvar height = container.offsetHeight,\r\n\t\t    maxHeight = this.options.maxHeight,\r\n\t\t    scrolledClass = 'leaflet-popup-scrolled';\r\n\r\n\t\tif (maxHeight && height > maxHeight) {\r\n\t\t\tstyle.height = maxHeight + 'px';\r\n\t\t\tDomUtil.addClass(container, scrolledClass);\r\n\t\t} else {\r\n\t\t\tDomUtil.removeClass(container, scrolledClass);\r\n\t\t}\r\n\r\n\t\tthis._containerWidth = this._container.offsetWidth;\r\n\t},\r\n\r\n\t_animateZoom: function (e) {\r\n\t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center),\r\n\t\t    anchor = this._getAnchor();\r\n\t\tDomUtil.setPosition(this._container, pos.add(anchor));\r\n\t},\r\n\r\n\t_adjustPan: function () {\r\n\t\tif (!this.options.autoPan) { return; }\r\n\t\tif (this._map._panAnim) { this._map._panAnim.stop(); }\r\n\r\n\t\t// We can endlessly recurse if keepInView is set and the view resets.\r\n\t\t// Let's guard against that by exiting early if we're responding to our own autopan.\r\n\t\tif (this._autopanning) {\r\n\t\t\tthis._autopanning = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar map = this._map,\r\n\t\t    marginBottom = parseInt(DomUtil.getStyle(this._container, 'marginBottom'), 10) || 0,\r\n\t\t    containerHeight = this._container.offsetHeight + marginBottom,\r\n\t\t    containerWidth = this._containerWidth,\r\n\t\t    layerPos = new Point(this._containerLeft, -containerHeight - this._containerBottom);\r\n\r\n\t\tlayerPos._add(DomUtil.getPosition(this._container));\r\n\r\n\t\tvar containerPos = map.layerPointToContainerPoint(layerPos),\r\n\t\t    padding = toPoint(this.options.autoPanPadding),\r\n\t\t    paddingTL = toPoint(this.options.autoPanPaddingTopLeft || padding),\r\n\t\t    paddingBR = toPoint(this.options.autoPanPaddingBottomRight || padding),\r\n\t\t    size = map.getSize(),\r\n\t\t    dx = 0,\r\n\t\t    dy = 0;\r\n\r\n\t\tif (containerPos.x + containerWidth + paddingBR.x > size.x) { // right\r\n\t\t\tdx = containerPos.x + containerWidth - size.x + paddingBR.x;\r\n\t\t}\r\n\t\tif (containerPos.x - dx - paddingTL.x < 0) { // left\r\n\t\t\tdx = containerPos.x - paddingTL.x;\r\n\t\t}\r\n\t\tif (containerPos.y + containerHeight + paddingBR.y > size.y) { // bottom\r\n\t\t\tdy = containerPos.y + containerHeight - size.y + paddingBR.y;\r\n\t\t}\r\n\t\tif (containerPos.y - dy - paddingTL.y < 0) { // top\r\n\t\t\tdy = containerPos.y - paddingTL.y;\r\n\t\t}\r\n\r\n\t\t// @namespace Map\r\n\t\t// @section Popup events\r\n\t\t// @event autopanstart: Event\r\n\t\t// Fired when the map starts autopanning when opening a popup.\r\n\t\tif (dx || dy) {\r\n\t\t\t// Track that we're autopanning, as this function will be re-ran on moveend\r\n\t\t\tif (this.options.keepInView) {\r\n\t\t\t\tthis._autopanning = true;\r\n\t\t\t}\r\n\r\n\t\t\tmap\r\n\t\t\t    .fire('autopanstart')\r\n\t\t\t    .panBy([dx, dy]);\r\n\t\t}\r\n\t},\r\n\r\n\t_getAnchor: function () {\r\n\t\t// Where should we anchor the popup on the source layer?\r\n\t\treturn toPoint(this._source && this._source._getPopupAnchor ? this._source._getPopupAnchor() : [0, 0]);\r\n\t}\r\n\r\n});\r\n\r\n// @namespace Popup\r\n// @factory L.popup(options?: Popup options, source?: Layer)\r\n// Instantiates a `Popup` object given an optional `options` object that describes its appearance and location and an optional `source` object that is used to tag the popup with a reference to the Layer to which it refers.\r\n// @alternative\r\n// @factory L.popup(latlng: LatLng, options?: Popup options)\r\n// Instantiates a `Popup` object given `latlng` where the popup will open and an optional `options` object that describes its appearance and location.\r\nexport var popup = function (options, source) {\r\n\treturn new Popup(options, source);\r\n};\r\n\r\n\r\n/* @namespace Map\r\n * @section Interaction Options\r\n * @option closePopupOnClick: Boolean = true\r\n * Set it to `false` if you don't want popups to close when user clicks the map.\r\n */\r\nMap.mergeOptions({\r\n\tclosePopupOnClick: true\r\n});\r\n\r\n\r\n// @namespace Map\r\n// @section Methods for Layers and Controls\r\nMap.include({\r\n\t// @method openPopup(popup: Popup): this\r\n\t// Opens the specified popup while closing the previously opened (to make sure only one is opened at one time for usability).\r\n\t// @alternative\r\n\t// @method openPopup(content: String|HTMLElement, latlng: LatLng, options?: Popup options): this\r\n\t// Creates a popup with the specified content and options and opens it in the given point on a map.\r\n\topenPopup: function (popup, latlng, options) {\r\n\t\tthis._initOverlay(Popup, popup, latlng, options)\r\n\t\t  .openOn(this);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method closePopup(popup?: Popup): this\r\n\t// Closes the popup previously opened with [openPopup](#map-openpopup) (or the given one).\r\n\tclosePopup: function (popup) {\r\n\t\tpopup = arguments.length ? popup : this._popup;\r\n\t\tif (popup) {\r\n\t\t\tpopup.close();\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\n/*\r\n * @namespace Layer\r\n * @section Popup methods example\r\n *\r\n * All layers share a set of methods convenient for binding popups to it.\r\n *\r\n * ```js\r\n * var layer = L.Polygon(latlngs).bindPopup('Hi There!').addTo(map);\r\n * layer.openPopup();\r\n * layer.closePopup();\r\n * ```\r\n *\r\n * Popups will also be automatically opened when the layer is clicked on and closed when the layer is removed from the map or another popup is opened.\r\n */\r\n\r\n// @section Popup methods\r\nLayer.include({\r\n\r\n\t// @method bindPopup(content: String|HTMLElement|Function|Popup, options?: Popup options): this\r\n\t// Binds a popup to the layer with the passed `content` and sets up the\r\n\t// necessary event listeners. If a `Function` is passed it will receive\r\n\t// the layer as the first argument and should return a `String` or `HTMLElement`.\r\n\tbindPopup: function (content, options) {\r\n\t\tthis._popup = this._initOverlay(Popup, this._popup, content, options);\r\n\t\tif (!this._popupHandlersAdded) {\r\n\t\t\tthis.on({\r\n\t\t\t\tclick: this._openPopup,\r\n\t\t\t\tkeypress: this._onKeyPress,\r\n\t\t\t\tremove: this.closePopup,\r\n\t\t\t\tmove: this._movePopup\r\n\t\t\t});\r\n\t\t\tthis._popupHandlersAdded = true;\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method unbindPopup(): this\r\n\t// Removes the popup previously bound with `bindPopup`.\r\n\tunbindPopup: function () {\r\n\t\tif (this._popup) {\r\n\t\t\tthis.off({\r\n\t\t\t\tclick: this._openPopup,\r\n\t\t\t\tkeypress: this._onKeyPress,\r\n\t\t\t\tremove: this.closePopup,\r\n\t\t\t\tmove: this._movePopup\r\n\t\t\t});\r\n\t\t\tthis._popupHandlersAdded = false;\r\n\t\t\tthis._popup = null;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method openPopup(latlng?: LatLng): this\r\n\t// Opens the bound popup at the specified `latlng` or at the default popup anchor if no `latlng` is passed.\r\n\topenPopup: function (latlng) {\r\n\t\tif (this._popup) {\r\n\t\t\tif (!(this instanceof FeatureGroup)) {\r\n\t\t\t\tthis._popup._source = this;\r\n\t\t\t}\r\n\t\t\tif (this._popup._prepareOpen(latlng || this._latlng)) {\r\n\t\t\t\t// open the popup on the map\r\n\t\t\t\tthis._popup.openOn(this._map);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method closePopup(): this\r\n\t// Closes the popup bound to this layer if it is open.\r\n\tclosePopup: function () {\r\n\t\tif (this._popup) {\r\n\t\t\tthis._popup.close();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method togglePopup(): this\r\n\t// Opens or closes the popup bound to this layer depending on its current state.\r\n\ttogglePopup: function () {\r\n\t\tif (this._popup) {\r\n\t\t\tthis._popup.toggle(this);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method isPopupOpen(): boolean\r\n\t// Returns `true` if the popup bound to this layer is currently open.\r\n\tisPopupOpen: function () {\r\n\t\treturn (this._popup ? this._popup.isOpen() : false);\r\n\t},\r\n\r\n\t// @method setPopupContent(content: String|HTMLElement|Popup): this\r\n\t// Sets the content of the popup bound to this layer.\r\n\tsetPopupContent: function (content) {\r\n\t\tif (this._popup) {\r\n\t\t\tthis._popup.setContent(content);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method getPopup(): Popup\r\n\t// Returns the popup bound to this layer.\r\n\tgetPopup: function () {\r\n\t\treturn this._popup;\r\n\t},\r\n\r\n\t_openPopup: function (e) {\r\n\t\tif (!this._popup || !this._map) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// prevent map click\r\n\t\tDomEvent.stop(e);\r\n\r\n\t\tvar target = e.layer || e.target;\r\n\t\tif (this._popup._source === target && !(target instanceof Path)) {\r\n\t\t\t// treat it like a marker and figure out\r\n\t\t\t// if we should toggle it open/closed\r\n\t\t\tif (this._map.hasLayer(this._popup)) {\r\n\t\t\t\tthis.closePopup();\r\n\t\t\t} else {\r\n\t\t\t\tthis.openPopup(e.latlng);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._popup._source = target;\r\n\t\tthis.openPopup(e.latlng);\r\n\t},\r\n\r\n\t_movePopup: function (e) {\r\n\t\tthis._popup.setLatLng(e.latlng);\r\n\t},\r\n\r\n\t_onKeyPress: function (e) {\r\n\t\tif (e.originalEvent.keyCode === 13) {\r\n\t\t\tthis._openPopup(e);\r\n\t\t}\r\n\t}\r\n});\r\n","import {DivOverlay} from './DivOverlay';\nimport {toPoint} from '../geometry/Point';\nimport {Map} from '../map/Map';\nimport {Layer} from './Layer';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\nimport * as Util from '../core/Util';\nimport {FeatureGroup} from './FeatureGroup';\n\n/*\n * @class Tooltip\n * @inherits DivOverlay\n * @aka L.Tooltip\n * Used to display small texts on top of map layers.\n *\n * @example\n * If you want to just bind a tooltip to marker:\n *\n * ```js\n * marker.bindTooltip(\"my tooltip text\").openTooltip();\n * ```\n * Path overlays like polylines also have a `bindTooltip` method.\n *\n * A tooltip can be also standalone:\n *\n * ```js\n * var tooltip = L.tooltip()\n * \t.setLatLng(latlng)\n * \t.setContent('Hello world!<br />This is a nice tooltip.')\n * \t.addTo(map);\n * ```\n * or\n * ```js\n * var tooltip = L.tooltip(latlng, {content: 'Hello world!<br />This is a nice tooltip.'})\n * \t.addTo(map);\n * ```\n *\n *\n * Note about tooltip offset. Leaflet takes two options in consideration\n * for computing tooltip offsetting:\n * - the `offset` Tooltip option: it defaults to [0, 0], and it's specific to one tooltip.\n *   Add a positive x offset to move the tooltip to the right, and a positive y offset to\n *   move it to the bottom. Negatives will move to the left and top.\n * - the `tooltipAnchor` Icon option: this will only be considered for Marker. You\n *   should adapt this value if you use a custom icon.\n */\n\n\n// @namespace Tooltip\nexport var Tooltip = DivOverlay.extend({\n\n\t// @section\n\t// @aka Tooltip options\n\toptions: {\n\t\t// @option pane: String = 'tooltipPane'\n\t\t// `Map pane` where the tooltip will be added.\n\t\tpane: 'tooltipPane',\n\n\t\t// @option offset: Point = Point(0, 0)\n\t\t// Optional offset of the tooltip position.\n\t\toffset: [0, 0],\n\n\t\t// @option direction: String = 'auto'\n\t\t// Direction where to open the tooltip. Possible values are: `right`, `left`,\n\t\t// `top`, `bottom`, `center`, `auto`.\n\t\t// `auto` will dynamically switch between `right` and `left` according to the tooltip\n\t\t// position on the map.\n\t\tdirection: 'auto',\n\n\t\t// @option permanent: Boolean = false\n\t\t// Whether to open the tooltip permanently or only on mouseover.\n\t\tpermanent: false,\n\n\t\t// @option sticky: Boolean = false\n\t\t// If true, the tooltip will follow the mouse instead of being fixed at the feature center.\n\t\tsticky: false,\n\n\t\t// @option opacity: Number = 0.9\n\t\t// Tooltip container opacity.\n\t\topacity: 0.9\n\t},\n\n\tonAdd: function (map) {\n\t\tDivOverlay.prototype.onAdd.call(this, map);\n\t\tthis.setOpacity(this.options.opacity);\n\n\t\t// @namespace Map\n\t\t// @section Tooltip events\n\t\t// @event tooltipopen: TooltipEvent\n\t\t// Fired when a tooltip is opened in the map.\n\t\tmap.fire('tooltipopen', {tooltip: this});\n\n\t\tif (this._source) {\n\t\t\tthis.addEventParent(this._source);\n\n\t\t\t// @namespace Layer\n\t\t\t// @section Tooltip events\n\t\t\t// @event tooltipopen: TooltipEvent\n\t\t\t// Fired when a tooltip bound to this layer is opened.\n\t\t\tthis._source.fire('tooltipopen', {tooltip: this}, true);\n\t\t}\n\t},\n\n\tonRemove: function (map) {\n\t\tDivOverlay.prototype.onRemove.call(this, map);\n\n\t\t// @namespace Map\n\t\t// @section Tooltip events\n\t\t// @event tooltipclose: TooltipEvent\n\t\t// Fired when a tooltip in the map is closed.\n\t\tmap.fire('tooltipclose', {tooltip: this});\n\n\t\tif (this._source) {\n\t\t\tthis.removeEventParent(this._source);\n\n\t\t\t// @namespace Layer\n\t\t\t// @section Tooltip events\n\t\t\t// @event tooltipclose: TooltipEvent\n\t\t\t// Fired when a tooltip bound to this layer is closed.\n\t\t\tthis._source.fire('tooltipclose', {tooltip: this}, true);\n\t\t}\n\t},\n\n\tgetEvents: function () {\n\t\tvar events = DivOverlay.prototype.getEvents.call(this);\n\n\t\tif (!this.options.permanent) {\n\t\t\tevents.preclick = this.close;\n\t\t}\n\n\t\treturn events;\n\t},\n\n\t_initLayout: function () {\n\t\tvar prefix = 'leaflet-tooltip',\n\t\t    className = prefix + ' ' + (this.options.className || '') + ' leaflet-zoom-' + (this._zoomAnimated ? 'animated' : 'hide');\n\n\t\tthis._contentNode = this._container = DomUtil.create('div', className);\n\n\t\tthis._container.setAttribute('role', 'tooltip');\n\t\tthis._container.setAttribute('id', 'leaflet-tooltip-' + Util.stamp(this));\n\t},\n\n\t_updateLayout: function () {},\n\n\t_adjustPan: function () {},\n\n\t_setPosition: function (pos) {\n\t\tvar subX, subY,\n\t\t    map = this._map,\n\t\t    container = this._container,\n\t\t    centerPoint = map.latLngToContainerPoint(map.getCenter()),\n\t\t    tooltipPoint = map.layerPointToContainerPoint(pos),\n\t\t    direction = this.options.direction,\n\t\t    tooltipWidth = container.offsetWidth,\n\t\t    tooltipHeight = container.offsetHeight,\n\t\t    offset = toPoint(this.options.offset),\n\t\t    anchor = this._getAnchor();\n\n\t\tif (direction === 'top') {\n\t\t\tsubX = tooltipWidth / 2;\n\t\t\tsubY = tooltipHeight;\n\t\t} else if (direction === 'bottom') {\n\t\t\tsubX = tooltipWidth / 2;\n\t\t\tsubY = 0;\n\t\t} else if (direction === 'center') {\n\t\t\tsubX = tooltipWidth / 2;\n\t\t\tsubY = tooltipHeight / 2;\n\t\t} else if (direction === 'right') {\n\t\t\tsubX = 0;\n\t\t\tsubY = tooltipHeight / 2;\n\t\t} else if (direction === 'left') {\n\t\t\tsubX = tooltipWidth;\n\t\t\tsubY = tooltipHeight / 2;\n\t\t} else if (tooltipPoint.x < centerPoint.x) {\n\t\t\tdirection = 'right';\n\t\t\tsubX = 0;\n\t\t\tsubY = tooltipHeight / 2;\n\t\t} else {\n\t\t\tdirection = 'left';\n\t\t\tsubX = tooltipWidth + (offset.x + anchor.x) * 2;\n\t\t\tsubY = tooltipHeight / 2;\n\t\t}\n\n\t\tpos = pos.subtract(toPoint(subX, subY, true)).add(offset).add(anchor);\n\n\t\tDomUtil.removeClass(container, 'leaflet-tooltip-right');\n\t\tDomUtil.removeClass(container, 'leaflet-tooltip-left');\n\t\tDomUtil.removeClass(container, 'leaflet-tooltip-top');\n\t\tDomUtil.removeClass(container, 'leaflet-tooltip-bottom');\n\t\tDomUtil.addClass(container, 'leaflet-tooltip-' + direction);\n\t\tDomUtil.setPosition(container, pos);\n\t},\n\n\t_updatePosition: function () {\n\t\tvar pos = this._map.latLngToLayerPoint(this._latlng);\n\t\tthis._setPosition(pos);\n\t},\n\n\tsetOpacity: function (opacity) {\n\t\tthis.options.opacity = opacity;\n\n\t\tif (this._container) {\n\t\t\tDomUtil.setOpacity(this._container, opacity);\n\t\t}\n\t},\n\n\t_animateZoom: function (e) {\n\t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center);\n\t\tthis._setPosition(pos);\n\t},\n\n\t_getAnchor: function () {\n\t\t// Where should we anchor the tooltip on the source layer?\n\t\treturn toPoint(this._source && this._source._getTooltipAnchor && !this.options.sticky ? this._source._getTooltipAnchor() : [0, 0]);\n\t}\n\n});\n\n// @namespace Tooltip\n// @factory L.tooltip(options?: Tooltip options, source?: Layer)\n// Instantiates a `Tooltip` object given an optional `options` object that describes its appearance and location and an optional `source` object that is used to tag the tooltip with a reference to the Layer to which it refers.\n// @alternative\n// @factory L.tooltip(latlng: LatLng, options?: Tooltip options)\n// Instantiates a `Tooltip` object given `latlng` where the tooltip will open and an optional `options` object that describes its appearance and location.\nexport var tooltip = function (options, source) {\n\treturn new Tooltip(options, source);\n};\n\n// @namespace Map\n// @section Methods for Layers and Controls\nMap.include({\n\n\t// @method openTooltip(tooltip: Tooltip): this\n\t// Opens the specified tooltip.\n\t// @alternative\n\t// @method openTooltip(content: String|HTMLElement, latlng: LatLng, options?: Tooltip options): this\n\t// Creates a tooltip with the specified content and options and open it.\n\topenTooltip: function (tooltip, latlng, options) {\n\t\tthis._initOverlay(Tooltip, tooltip, latlng, options)\n\t\t  .openOn(this);\n\n\t\treturn this;\n\t},\n\n\t// @method closeTooltip(tooltip: Tooltip): this\n\t// Closes the tooltip given as parameter.\n\tcloseTooltip: function (tooltip) {\n\t\ttooltip.close();\n\t\treturn this;\n\t}\n\n});\n\n/*\n * @namespace Layer\n * @section Tooltip methods example\n *\n * All layers share a set of methods convenient for binding tooltips to it.\n *\n * ```js\n * var layer = L.Polygon(latlngs).bindTooltip('Hi There!').addTo(map);\n * layer.openTooltip();\n * layer.closeTooltip();\n * ```\n */\n\n// @section Tooltip methods\nLayer.include({\n\n\t// @method bindTooltip(content: String|HTMLElement|Function|Tooltip, options?: Tooltip options): this\n\t// Binds a tooltip to the layer with the passed `content` and sets up the\n\t// necessary event listeners. If a `Function` is passed it will receive\n\t// the layer as the first argument and should return a `String` or `HTMLElement`.\n\tbindTooltip: function (content, options) {\n\n\t\tif (this._tooltip && this.isTooltipOpen()) {\n\t\t\tthis.unbindTooltip();\n\t\t}\n\n\t\tthis._tooltip = this._initOverlay(Tooltip, this._tooltip, content, options);\n\t\tthis._initTooltipInteractions();\n\n\t\tif (this._tooltip.options.permanent && this._map && this._map.hasLayer(this)) {\n\t\t\tthis.openTooltip();\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// @method unbindTooltip(): this\n\t// Removes the tooltip previously bound with `bindTooltip`.\n\tunbindTooltip: function () {\n\t\tif (this._tooltip) {\n\t\t\tthis._initTooltipInteractions(true);\n\t\t\tthis.closeTooltip();\n\t\t\tthis._tooltip = null;\n\t\t}\n\t\treturn this;\n\t},\n\n\t_initTooltipInteractions: function (remove) {\n\t\tif (!remove && this._tooltipHandlersAdded) { return; }\n\t\tvar onOff = remove ? 'off' : 'on',\n\t\t    events = {\n\t\t\tremove: this.closeTooltip,\n\t\t\tmove: this._moveTooltip\n\t\t    };\n\t\tif (!this._tooltip.options.permanent) {\n\t\t\tevents.mouseover = this._openTooltip;\n\t\t\tevents.mouseout = this.closeTooltip;\n\t\t\tevents.click = this._openTooltip;\n\t\t\tif (this._map) {\n\t\t\t\tthis._addFocusListeners();\n\t\t\t} else {\n\t\t\t\tevents.add = this._addFocusListeners;\n\t\t\t}\n\t\t} else {\n\t\t\tevents.add = this._openTooltip;\n\t\t}\n\t\tif (this._tooltip.options.sticky) {\n\t\t\tevents.mousemove = this._moveTooltip;\n\t\t}\n\t\tthis[onOff](events);\n\t\tthis._tooltipHandlersAdded = !remove;\n\t},\n\n\t// @method openTooltip(latlng?: LatLng): this\n\t// Opens the bound tooltip at the specified `latlng` or at the default tooltip anchor if no `latlng` is passed.\n\topenTooltip: function (latlng) {\n\t\tif (this._tooltip) {\n\t\t\tif (!(this instanceof FeatureGroup)) {\n\t\t\t\tthis._tooltip._source = this;\n\t\t\t}\n\t\t\tif (this._tooltip._prepareOpen(latlng)) {\n\t\t\t\t// open the tooltip on the map\n\t\t\t\tthis._tooltip.openOn(this._map);\n\n\t\t\t\tif (this.getElement) {\n\t\t\t\t\tthis._setAriaDescribedByOnLayer(this);\n\t\t\t\t} else if (this.eachLayer) {\n\t\t\t\t\tthis.eachLayer(this._setAriaDescribedByOnLayer, this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\t// @method closeTooltip(): this\n\t// Closes the tooltip bound to this layer if it is open.\n\tcloseTooltip: function () {\n\t\tif (this._tooltip) {\n\t\t\treturn this._tooltip.close();\n\t\t}\n\t},\n\n\t// @method toggleTooltip(): this\n\t// Opens or closes the tooltip bound to this layer depending on its current state.\n\ttoggleTooltip: function () {\n\t\tif (this._tooltip) {\n\t\t\tthis._tooltip.toggle(this);\n\t\t}\n\t\treturn this;\n\t},\n\n\t// @method isTooltipOpen(): boolean\n\t// Returns `true` if the tooltip bound to this layer is currently open.\n\tisTooltipOpen: function () {\n\t\treturn this._tooltip.isOpen();\n\t},\n\n\t// @method setTooltipContent(content: String|HTMLElement|Tooltip): this\n\t// Sets the content of the tooltip bound to this layer.\n\tsetTooltipContent: function (content) {\n\t\tif (this._tooltip) {\n\t\t\tthis._tooltip.setContent(content);\n\t\t}\n\t\treturn this;\n\t},\n\n\t// @method getTooltip(): Tooltip\n\t// Returns the tooltip bound to this layer.\n\tgetTooltip: function () {\n\t\treturn this._tooltip;\n\t},\n\n\t_addFocusListeners: function () {\n\t\tif (this.getElement) {\n\t\t\tthis._addFocusListenersOnLayer(this);\n\t\t} else if (this.eachLayer) {\n\t\t\tthis.eachLayer(this._addFocusListenersOnLayer, this);\n\t\t}\n\t},\n\n\t_addFocusListenersOnLayer: function (layer) {\n\t\tvar el = typeof layer.getElement === 'function' && layer.getElement();\n\t\tif (el) {\n\t\t\tDomEvent.on(el, 'focus', function () {\n\t\t\t\tthis._tooltip._source = layer;\n\t\t\t\tthis.openTooltip();\n\t\t\t}, this);\n\t\t\tDomEvent.on(el, 'blur', this.closeTooltip, this);\n\t\t}\n\t},\n\n\t_setAriaDescribedByOnLayer: function (layer) {\n\t\tvar el = typeof layer.getElement === 'function' && layer.getElement();\n\t\tif (el) {\n\t\t\tel.setAttribute('aria-describedby', this._tooltip._container.id);\n\t\t}\n\t},\n\n\n\t_openTooltip: function (e) {\n\t\tif (!this._tooltip || !this._map) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If the map is moving, we will show the tooltip after it's done.\n\t\tif (this._map.dragging && this._map.dragging.moving() && !this._openOnceFlag) {\n\t\t\tthis._openOnceFlag = true;\n\t\t\tvar that = this;\n\t\t\tthis._map.once('moveend', function () {\n\t\t\t\tthat._openOnceFlag = false;\n\t\t\t\tthat._openTooltip(e);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tthis._tooltip._source = e.layer || e.target;\n\n\t\tthis.openTooltip(this._tooltip.options.sticky ? e.latlng : undefined);\n\t},\n\n\t_moveTooltip: function (e) {\n\t\tvar latlng = e.latlng, containerPoint, layerPoint;\n\t\tif (this._tooltip.options.sticky && e.originalEvent) {\n\t\t\tcontainerPoint = this._map.mouseEventToContainerPoint(e.originalEvent);\n\t\t\tlayerPoint = this._map.containerPointToLayerPoint(containerPoint);\n\t\t\tlatlng = this._map.layerPointToLatLng(layerPoint);\n\t\t}\n\t\tthis._tooltip.setLatLng(latlng);\n\t}\n});\n","import {Icon} from './Icon';\nimport {toPoint as point} from '../../geometry/Point';\nimport {empty} from '../../dom/DomUtil';\n\n/*\n * @class DivIcon\n * @aka L.DivIcon\n * @inherits Icon\n *\n * Represents a lightweight icon for markers that uses a simple `<div>`\n * element instead of an image. Inherits from `Icon` but ignores the `iconUrl` and shadow options.\n *\n * @example\n * ```js\n * var myIcon = L.divIcon({className: 'my-div-icon'});\n * // you can set .my-div-icon styles in CSS\n *\n * L.marker([50.505, 30.57], {icon: myIcon}).addTo(map);\n * ```\n *\n * By default, it has a 'leaflet-div-icon' CSS class and is styled as a little white square with a shadow.\n */\n\nexport var DivIcon = Icon.extend({\n\toptions: {\n\t\t// @section\n\t\t// @aka DivIcon options\n\t\ticonSize: [12, 12], // also can be set through CSS\n\n\t\t// iconAnchor: (Point),\n\t\t// popupAnchor: (Point),\n\n\t\t// @option html: String|HTMLElement = ''\n\t\t// Custom HTML code to put inside the div element, empty by default. Alternatively,\n\t\t// an instance of `HTMLElement`.\n\t\thtml: false,\n\n\t\t// @option bgPos: Point = [0, 0]\n\t\t// Optional relative position of the background, in pixels\n\t\tbgPos: null,\n\n\t\tclassName: 'leaflet-div-icon'\n\t},\n\n\tcreateIcon: function (oldIcon) {\n\t\tvar div = (oldIcon && oldIcon.tagName === 'DIV') ? oldIcon : document.createElement('div'),\n\t\t    options = this.options;\n\n\t\tif (options.html instanceof Element) {\n\t\t\tempty(div);\n\t\t\tdiv.appendChild(options.html);\n\t\t} else {\n\t\t\tdiv.innerHTML = options.html !== false ? options.html : '';\n\t\t}\n\n\t\tif (options.bgPos) {\n\t\t\tvar bgPos = point(options.bgPos);\n\t\t\tdiv.style.backgroundPosition = (-bgPos.x) + 'px ' + (-bgPos.y) + 'px';\n\t\t}\n\t\tthis._setIconStyles(div, 'icon');\n\n\t\treturn div;\n\t},\n\n\tcreateShadow: function () {\n\t\treturn null;\n\t}\n});\n\n// @factory L.divIcon(options: DivIcon options)\n// Creates a `DivIcon` instance with the given options.\nexport function divIcon(options) {\n\treturn new DivIcon(options);\n}\n","import {Icon} from './Icon';\nexport {icon} from './Icon';\nimport {IconDefault} from './Icon.Default';\nIcon.Default = IconDefault;\nexport {Icon};\n\nexport {DivIcon, divIcon} from './DivIcon';\nexport {Marker, marker} from './Marker';\n","import {Layer} from '../Layer';\nimport Browser from '../../core/Browser';\nimport * as Util from '../../core/Util';\nimport * as DomUtil from '../../dom/DomUtil';\nimport {Point} from '../../geometry/Point';\nimport {Bounds} from '../../geometry/Bounds';\nimport {LatLngBounds, toLatLngBounds as latLngBounds} from '../../geo/LatLngBounds';\n\n/*\n * @class GridLayer\n * @inherits Layer\n * @aka L.GridLayer\n *\n * Generic class for handling a tiled grid of HTML elements. This is the base class for all tile layers and replaces `TileLayer.Canvas`.\n * GridLayer can be extended to create a tiled grid of HTML elements like `<canvas>`, `<img>` or `<div>`. GridLayer will handle creating and animating these DOM elements for you.\n *\n *\n * @section Synchronous usage\n * @example\n *\n * To create a custom layer, extend GridLayer and implement the `createTile()` method, which will be passed a `Point` object with the `x`, `y`, and `z` (zoom level) coordinates to draw your tile.\n *\n * ```js\n * var CanvasLayer = L.GridLayer.extend({\n *     createTile: function(coords){\n *         // create a <canvas> element for drawing\n *         var tile = L.DomUtil.create('canvas', 'leaflet-tile');\n *\n *         // setup tile width and height according to the options\n *         var size = this.getTileSize();\n *         tile.width = size.x;\n *         tile.height = size.y;\n *\n *         // get a canvas context and draw something on it using coords.x, coords.y and coords.z\n *         var ctx = tile.getContext('2d');\n *\n *         // return the tile so it can be rendered on screen\n *         return tile;\n *     }\n * });\n * ```\n *\n * @section Asynchronous usage\n * @example\n *\n * Tile creation can also be asynchronous, this is useful when using a third-party drawing library. Once the tile is finished drawing it can be passed to the `done()` callback.\n *\n * ```js\n * var CanvasLayer = L.GridLayer.extend({\n *     createTile: function(coords, done){\n *         var error;\n *\n *         // create a <canvas> element for drawing\n *         var tile = L.DomUtil.create('canvas', 'leaflet-tile');\n *\n *         // setup tile width and height according to the options\n *         var size = this.getTileSize();\n *         tile.width = size.x;\n *         tile.height = size.y;\n *\n *         // draw something asynchronously and pass the tile to the done() callback\n *         setTimeout(function() {\n *             done(error, tile);\n *         }, 1000);\n *\n *         return tile;\n *     }\n * });\n * ```\n *\n * @section\n */\n\n\nexport var GridLayer = Layer.extend({\n\n\t// @section\n\t// @aka GridLayer options\n\toptions: {\n\t\t// @option tileSize: Number|Point = 256\n\t\t// Width and height of tiles in the grid. Use a number if width and height are equal, or `L.point(width, height)` otherwise.\n\t\ttileSize: 256,\n\n\t\t// @option opacity: Number = 1.0\n\t\t// Opacity of the tiles. Can be used in the `createTile()` function.\n\t\topacity: 1,\n\n\t\t// @option updateWhenIdle: Boolean = (depends)\n\t\t// Load new tiles only when panning ends.\n\t\t// `true` by default on mobile browsers, in order to avoid too many requests and keep smooth navigation.\n\t\t// `false` otherwise in order to display new tiles _during_ panning, since it is easy to pan outside the\n\t\t// [`keepBuffer`](#gridlayer-keepbuffer) option in desktop browsers.\n\t\tupdateWhenIdle: Browser.mobile,\n\n\t\t// @option updateWhenZooming: Boolean = true\n\t\t// By default, a smooth zoom animation (during a [touch zoom](#map-touchzoom) or a [`flyTo()`](#map-flyto)) will update grid layers every integer zoom level. Setting this option to `false` will update the grid layer only when the smooth animation ends.\n\t\tupdateWhenZooming: true,\n\n\t\t// @option updateInterval: Number = 200\n\t\t// Tiles will not update more than once every `updateInterval` milliseconds when panning.\n\t\tupdateInterval: 200,\n\n\t\t// @option zIndex: Number = 1\n\t\t// The explicit zIndex of the tile layer.\n\t\tzIndex: 1,\n\n\t\t// @option bounds: LatLngBounds = undefined\n\t\t// If set, tiles will only be loaded inside the set `LatLngBounds`.\n\t\tbounds: null,\n\n\t\t// @option minZoom: Number = 0\n\t\t// The minimum zoom level down to which this layer will be displayed (inclusive).\n\t\tminZoom: 0,\n\n\t\t// @option maxZoom: Number = undefined\n\t\t// The maximum zoom level up to which this layer will be displayed (inclusive).\n\t\tmaxZoom: undefined,\n\n\t\t// @option maxNativeZoom: Number = undefined\n\t\t// Maximum zoom number the tile source has available. If it is specified,\n\t\t// the tiles on all zoom levels higher than `maxNativeZoom` will be loaded\n\t\t// from `maxNativeZoom` level and auto-scaled.\n\t\tmaxNativeZoom: undefined,\n\n\t\t// @option minNativeZoom: Number = undefined\n\t\t// Minimum zoom number the tile source has available. If it is specified,\n\t\t// the tiles on all zoom levels lower than `minNativeZoom` will be loaded\n\t\t// from `minNativeZoom` level and auto-scaled.\n\t\tminNativeZoom: undefined,\n\n\t\t// @option noWrap: Boolean = false\n\t\t// Whether the layer is wrapped around the antimeridian. If `true`, the\n\t\t// GridLayer will only be displayed once at low zoom levels. Has no\n\t\t// effect when the [map CRS](#map-crs) doesn't wrap around. Can be used\n\t\t// in combination with [`bounds`](#gridlayer-bounds) to prevent requesting\n\t\t// tiles outside the CRS limits.\n\t\tnoWrap: false,\n\n\t\t// @option pane: String = 'tilePane'\n\t\t// `Map pane` where the grid layer will be added.\n\t\tpane: 'tilePane',\n\n\t\t// @option className: String = ''\n\t\t// A custom class name to assign to the tile layer. Empty by default.\n\t\tclassName: '',\n\n\t\t// @option keepBuffer: Number = 2\n\t\t// When panning the map, keep this many rows and columns of tiles before unloading them.\n\t\tkeepBuffer: 2\n\t},\n\n\tinitialize: function (options) {\n\t\tUtil.setOptions(this, options);\n\t},\n\n\tonAdd: function () {\n\t\tthis._initContainer();\n\n\t\tthis._levels = {};\n\t\tthis._tiles = {};\n\n\t\tthis._resetView(); // implicit _update() call\n\t},\n\n\tbeforeAdd: function (map) {\n\t\tmap._addZoomLimit(this);\n\t},\n\n\tonRemove: function (map) {\n\t\tthis._removeAllTiles();\n\t\tDomUtil.remove(this._container);\n\t\tmap._removeZoomLimit(this);\n\t\tthis._container = null;\n\t\tthis._tileZoom = undefined;\n\t},\n\n\t// @method bringToFront: this\n\t// Brings the tile layer to the top of all tile layers.\n\tbringToFront: function () {\n\t\tif (this._map) {\n\t\t\tDomUtil.toFront(this._container);\n\t\t\tthis._setAutoZIndex(Math.max);\n\t\t}\n\t\treturn this;\n\t},\n\n\t// @method bringToBack: this\n\t// Brings the tile layer to the bottom of all tile layers.\n\tbringToBack: function () {\n\t\tif (this._map) {\n\t\t\tDomUtil.toBack(this._container);\n\t\t\tthis._setAutoZIndex(Math.min);\n\t\t}\n\t\treturn this;\n\t},\n\n\t// @method getContainer: HTMLElement\n\t// Returns the HTML element that contains the tiles for this layer.\n\tgetContainer: function () {\n\t\treturn this._container;\n\t},\n\n\t// @method setOpacity(opacity: Number): this\n\t// Changes the [opacity](#gridlayer-opacity) of the grid layer.\n\tsetOpacity: function (opacity) {\n\t\tthis.options.opacity = opacity;\n\t\tthis._updateOpacity();\n\t\treturn this;\n\t},\n\n\t// @method setZIndex(zIndex: Number): this\n\t// Changes the [zIndex](#gridlayer-zindex) of the grid layer.\n\tsetZIndex: function (zIndex) {\n\t\tthis.options.zIndex = zIndex;\n\t\tthis._updateZIndex();\n\n\t\treturn this;\n\t},\n\n\t// @method isLoading: Boolean\n\t// Returns `true` if any tile in the grid layer has not finished loading.\n\tisLoading: function () {\n\t\treturn this._loading;\n\t},\n\n\t// @method redraw: this\n\t// Causes the layer to clear all the tiles and request them again.\n\tredraw: function () {\n\t\tif (this._map) {\n\t\t\tthis._removeAllTiles();\n\t\t\tvar tileZoom = this._clampZoom(this._map.getZoom());\n\t\t\tif (tileZoom !== this._tileZoom) {\n\t\t\t\tthis._tileZoom = tileZoom;\n\t\t\t\tthis._updateLevels();\n\t\t\t}\n\t\t\tthis._update();\n\t\t}\n\t\treturn this;\n\t},\n\n\tgetEvents: function () {\n\t\tvar events = {\n\t\t\tviewprereset: this._invalidateAll,\n\t\t\tviewreset: this._resetView,\n\t\t\tzoom: this._resetView,\n\t\t\tmoveend: this._onMoveEnd\n\t\t};\n\n\t\tif (!this.options.updateWhenIdle) {\n\t\t\t// update tiles on move, but not more often than once per given interval\n\t\t\tif (!this._onMove) {\n\t\t\t\tthis._onMove = Util.throttle(this._onMoveEnd, this.options.updateInterval, this);\n\t\t\t}\n\n\t\t\tevents.move = this._onMove;\n\t\t}\n\n\t\tif (this._zoomAnimated) {\n\t\t\tevents.zoomanim = this._animateZoom;\n\t\t}\n\n\t\treturn events;\n\t},\n\n\t// @section Extension methods\n\t// Layers extending `GridLayer` shall reimplement the following method.\n\t// @method createTile(coords: Object, done?: Function): HTMLElement\n\t// Called only internally, must be overridden by classes extending `GridLayer`.\n\t// Returns the `HTMLElement` corresponding to the given `coords`. If the `done` callback\n\t// is specified, it must be called when the tile has finished loading and drawing.\n\tcreateTile: function () {\n\t\treturn document.createElement('div');\n\t},\n\n\t// @section\n\t// @method getTileSize: Point\n\t// Normalizes the [tileSize option](#gridlayer-tilesize) into a point. Used by the `createTile()` method.\n\tgetTileSize: function () {\n\t\tvar s = this.options.tileSize;\n\t\treturn s instanceof Point ? s : new Point(s, s);\n\t},\n\n\t_updateZIndex: function () {\n\t\tif (this._container && this.options.zIndex !== undefined && this.options.zIndex !== null) {\n\t\t\tthis._container.style.zIndex = this.options.zIndex;\n\t\t}\n\t},\n\n\t_setAutoZIndex: function (compare) {\n\t\t// go through all other layers of the same pane, set zIndex to max + 1 (front) or min - 1 (back)\n\n\t\tvar layers = this.getPane().children,\n\t\t    edgeZIndex = -compare(-Infinity, Infinity); // -Infinity for max, Infinity for min\n\n\t\tfor (var i = 0, len = layers.length, zIndex; i < len; i++) {\n\n\t\t\tzIndex = layers[i].style.zIndex;\n\n\t\t\tif (layers[i] !== this._container && zIndex) {\n\t\t\t\tedgeZIndex = compare(edgeZIndex, +zIndex);\n\t\t\t}\n\t\t}\n\n\t\tif (isFinite(edgeZIndex)) {\n\t\t\tthis.options.zIndex = edgeZIndex + compare(-1, 1);\n\t\t\tthis._updateZIndex();\n\t\t}\n\t},\n\n\t_updateOpacity: function () {\n\t\tif (!this._map) { return; }\n\n\t\t// IE doesn't inherit filter opacity properly, so we're forced to set it on tiles\n\t\tif (Browser.ielt9) { return; }\n\n\t\tDomUtil.setOpacity(this._container, this.options.opacity);\n\n\t\tvar now = +new Date(),\n\t\t    nextFrame = false,\n\t\t    willPrune = false;\n\n\t\tfor (var key in this._tiles) {\n\t\t\tvar tile = this._tiles[key];\n\t\t\tif (!tile.current || !tile.loaded) { continue; }\n\n\t\t\tvar fade = Math.min(1, (now - tile.loaded) / 200);\n\n\t\t\tDomUtil.setOpacity(tile.el, fade);\n\t\t\tif (fade < 1) {\n\t\t\t\tnextFrame = true;\n\t\t\t} else {\n\t\t\t\tif (tile.active) {\n\t\t\t\t\twillPrune = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis._onOpaqueTile(tile);\n\t\t\t\t}\n\t\t\t\ttile.active = true;\n\t\t\t}\n\t\t}\n\n\t\tif (willPrune && !this._noPrune) { this._pruneTiles(); }\n\n\t\tif (nextFrame) {\n\t\t\tUtil.cancelAnimFrame(this._fadeFrame);\n\t\t\tthis._fadeFrame = Util.requestAnimFrame(this._updateOpacity, this);\n\t\t}\n\t},\n\n\t_onOpaqueTile: Util.falseFn,\n\n\t_initContainer: function () {\n\t\tif (this._container) { return; }\n\n\t\tthis._container = DomUtil.create('div', 'leaflet-layer ' + (this.options.className || ''));\n\t\tthis._updateZIndex();\n\n\t\tif (this.options.opacity < 1) {\n\t\t\tthis._updateOpacity();\n\t\t}\n\n\t\tthis.getPane().appendChild(this._container);\n\t},\n\n\t_updateLevels: function () {\n\n\t\tvar zoom = this._tileZoom,\n\t\t    maxZoom = this.options.maxZoom;\n\n\t\tif (zoom === undefined) { return undefined; }\n\n\t\tfor (var z in this._levels) {\n\t\t\tz = Number(z);\n\t\t\tif (this._levels[z].el.children.length || z === zoom) {\n\t\t\t\tthis._levels[z].el.style.zIndex = maxZoom - Math.abs(zoom - z);\n\t\t\t\tthis._onUpdateLevel(z);\n\t\t\t} else {\n\t\t\t\tDomUtil.remove(this._levels[z].el);\n\t\t\t\tthis._removeTilesAtZoom(z);\n\t\t\t\tthis._onRemoveLevel(z);\n\t\t\t\tdelete this._levels[z];\n\t\t\t}\n\t\t}\n\n\t\tvar level = this._levels[zoom],\n\t\t    map = this._map;\n\n\t\tif (!level) {\n\t\t\tlevel = this._levels[zoom] = {};\n\n\t\t\tlevel.el = DomUtil.create('div', 'leaflet-tile-container leaflet-zoom-animated', this._container);\n\t\t\tlevel.el.style.zIndex = maxZoom;\n\n\t\t\tlevel.origin = map.project(map.unproject(map.getPixelOrigin()), zoom).round();\n\t\t\tlevel.zoom = zoom;\n\n\t\t\tthis._setZoomTransform(level, map.getCenter(), map.getZoom());\n\n\t\t\t// force the browser to consider the newly added element for transition\n\t\t\tUtil.falseFn(level.el.offsetWidth);\n\n\t\t\tthis._onCreateLevel(level);\n\t\t}\n\n\t\tthis._level = level;\n\n\t\treturn level;\n\t},\n\n\t_onUpdateLevel: Util.falseFn,\n\n\t_onRemoveLevel: Util.falseFn,\n\n\t_onCreateLevel: Util.falseFn,\n\n\t_pruneTiles: function () {\n\t\tif (!this._map) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar key, tile;\n\n\t\tvar zoom = this._map.getZoom();\n\t\tif (zoom > this.options.maxZoom ||\n\t\t\tzoom < this.options.minZoom) {\n\t\t\tthis._removeAllTiles();\n\t\t\treturn;\n\t\t}\n\n\t\tfor (key in this._tiles) {\n\t\t\ttile = this._tiles[key];\n\t\t\ttile.retain = tile.current;\n\t\t}\n\n\t\tfor (key in this._tiles) {\n\t\t\ttile = this._tiles[key];\n\t\t\tif (tile.current && !tile.active) {\n\t\t\t\tvar coords = tile.coords;\n\t\t\t\tif (!this._retainParent(coords.x, coords.y, coords.z, coords.z - 5)) {\n\t\t\t\t\tthis._retainChildren(coords.x, coords.y, coords.z, coords.z + 2);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (key in this._tiles) {\n\t\t\tif (!this._tiles[key].retain) {\n\t\t\t\tthis._removeTile(key);\n\t\t\t}\n\t\t}\n\t},\n\n\t_removeTilesAtZoom: function (zoom) {\n\t\tfor (var key in this._tiles) {\n\t\t\tif (this._tiles[key].coords.z !== zoom) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis._removeTile(key);\n\t\t}\n\t},\n\n\t_removeAllTiles: function () {\n\t\tfor (var key in this._tiles) {\n\t\t\tthis._removeTile(key);\n\t\t}\n\t},\n\n\t_invalidateAll: function () {\n\t\tfor (var z in this._levels) {\n\t\t\tDomUtil.remove(this._levels[z].el);\n\t\t\tthis._onRemoveLevel(Number(z));\n\t\t\tdelete this._levels[z];\n\t\t}\n\t\tthis._removeAllTiles();\n\n\t\tthis._tileZoom = undefined;\n\t},\n\n\t_retainParent: function (x, y, z, minZoom) {\n\t\tvar x2 = Math.floor(x / 2),\n\t\t    y2 = Math.floor(y / 2),\n\t\t    z2 = z - 1,\n\t\t    coords2 = new Point(+x2, +y2);\n\t\tcoords2.z = +z2;\n\n\t\tvar key = this._tileCoordsToKey(coords2),\n\t\t    tile = this._tiles[key];\n\n\t\tif (tile && tile.active) {\n\t\t\ttile.retain = true;\n\t\t\treturn true;\n\n\t\t} else if (tile && tile.loaded) {\n\t\t\ttile.retain = true;\n\t\t}\n\n\t\tif (z2 > minZoom) {\n\t\t\treturn this._retainParent(x2, y2, z2, minZoom);\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_retainChildren: function (x, y, z, maxZoom) {\n\n\t\tfor (var i = 2 * x; i < 2 * x + 2; i++) {\n\t\t\tfor (var j = 2 * y; j < 2 * y + 2; j++) {\n\n\t\t\t\tvar coords = new Point(i, j);\n\t\t\t\tcoords.z = z + 1;\n\n\t\t\t\tvar key = this._tileCoordsToKey(coords),\n\t\t\t\t    tile = this._tiles[key];\n\n\t\t\t\tif (tile && tile.active) {\n\t\t\t\t\ttile.retain = true;\n\t\t\t\t\tcontinue;\n\n\t\t\t\t} else if (tile && tile.loaded) {\n\t\t\t\t\ttile.retain = true;\n\t\t\t\t}\n\n\t\t\t\tif (z + 1 < maxZoom) {\n\t\t\t\t\tthis._retainChildren(i, j, z + 1, maxZoom);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_resetView: function (e) {\n\t\tvar animating = e && (e.pinch || e.flyTo);\n\t\tthis._setView(this._map.getCenter(), this._map.getZoom(), animating, animating);\n\t},\n\n\t_animateZoom: function (e) {\n\t\tthis._setView(e.center, e.zoom, true, e.noUpdate);\n\t},\n\n\t_clampZoom: function (zoom) {\n\t\tvar options = this.options;\n\n\t\tif (undefined !== options.minNativeZoom && zoom < options.minNativeZoom) {\n\t\t\treturn options.minNativeZoom;\n\t\t}\n\n\t\tif (undefined !== options.maxNativeZoom && options.maxNativeZoom < zoom) {\n\t\t\treturn options.maxNativeZoom;\n\t\t}\n\n\t\treturn zoom;\n\t},\n\n\t_setView: function (center, zoom, noPrune, noUpdate) {\n\t\tvar tileZoom = Math.round(zoom);\n\t\tif ((this.options.maxZoom !== undefined && tileZoom > this.options.maxZoom) ||\n\t\t    (this.options.minZoom !== undefined && tileZoom < this.options.minZoom)) {\n\t\t\ttileZoom = undefined;\n\t\t} else {\n\t\t\ttileZoom = this._clampZoom(tileZoom);\n\t\t}\n\n\t\tvar tileZoomChanged = this.options.updateWhenZooming && (tileZoom !== this._tileZoom);\n\n\t\tif (!noUpdate || tileZoomChanged) {\n\n\t\t\tthis._tileZoom = tileZoom;\n\n\t\t\tif (this._abortLoading) {\n\t\t\t\tthis._abortLoading();\n\t\t\t}\n\n\t\t\tthis._updateLevels();\n\t\t\tthis._resetGrid();\n\n\t\t\tif (tileZoom !== undefined) {\n\t\t\t\tthis._update(center);\n\t\t\t}\n\n\t\t\tif (!noPrune) {\n\t\t\t\tthis._pruneTiles();\n\t\t\t}\n\n\t\t\t// Flag to prevent _updateOpacity from pruning tiles during\n\t\t\t// a zoom anim or a pinch gesture\n\t\t\tthis._noPrune = !!noPrune;\n\t\t}\n\n\t\tthis._setZoomTransforms(center, zoom);\n\t},\n\n\t_setZoomTransforms: function (center, zoom) {\n\t\tfor (var i in this._levels) {\n\t\t\tthis._setZoomTransform(this._levels[i], center, zoom);\n\t\t}\n\t},\n\n\t_setZoomTransform: function (level, center, zoom) {\n\t\tvar scale = this._map.getZoomScale(zoom, level.zoom),\n\t\t    translate = level.origin.multiplyBy(scale)\n\t\t        .subtract(this._map._getNewPixelOrigin(center, zoom)).round();\n\n\t\tif (Browser.any3d) {\n\t\t\tDomUtil.setTransform(level.el, translate, scale);\n\t\t} else {\n\t\t\tDomUtil.setPosition(level.el, translate);\n\t\t}\n\t},\n\n\t_resetGrid: function () {\n\t\tvar map = this._map,\n\t\t    crs = map.options.crs,\n\t\t    tileSize = this._tileSize = this.getTileSize(),\n\t\t    tileZoom = this._tileZoom;\n\n\t\tvar bounds = this._map.getPixelWorldBounds(this._tileZoom);\n\t\tif (bounds) {\n\t\t\tthis._globalTileRange = this._pxBoundsToTileRange(bounds);\n\t\t}\n\n\t\tthis._wrapX = crs.wrapLng && !this.options.noWrap && [\n\t\t\tMath.floor(map.project([0, crs.wrapLng[0]], tileZoom).x / tileSize.x),\n\t\t\tMath.ceil(map.project([0, crs.wrapLng[1]], tileZoom).x / tileSize.y)\n\t\t];\n\t\tthis._wrapY = crs.wrapLat && !this.options.noWrap && [\n\t\t\tMath.floor(map.project([crs.wrapLat[0], 0], tileZoom).y / tileSize.x),\n\t\t\tMath.ceil(map.project([crs.wrapLat[1], 0], tileZoom).y / tileSize.y)\n\t\t];\n\t},\n\n\t_onMoveEnd: function () {\n\t\tif (!this._map || this._map._animatingZoom) { return; }\n\n\t\tthis._update();\n\t},\n\n\t_getTiledPixelBounds: function (center) {\n\t\tvar map = this._map,\n\t\t    mapZoom = map._animatingZoom ? Math.max(map._animateToZoom, map.getZoom()) : map.getZoom(),\n\t\t    scale = map.getZoomScale(mapZoom, this._tileZoom),\n\t\t    pixelCenter = map.project(center, this._tileZoom).floor(),\n\t\t    halfSize = map.getSize().divideBy(scale * 2);\n\n\t\treturn new Bounds(pixelCenter.subtract(halfSize), pixelCenter.add(halfSize));\n\t},\n\n\t// Private method to load tiles in the grid's active zoom level according to map bounds\n\t_update: function (center) {\n\t\tvar map = this._map;\n\t\tif (!map) { return; }\n\t\tvar zoom = this._clampZoom(map.getZoom());\n\n\t\tif (center === undefined) { center = map.getCenter(); }\n\t\tif (this._tileZoom === undefined) { return; }\t// if out of minzoom/maxzoom\n\n\t\tvar pixelBounds = this._getTiledPixelBounds(center),\n\t\t    tileRange = this._pxBoundsToTileRange(pixelBounds),\n\t\t    tileCenter = tileRange.getCenter(),\n\t\t    queue = [],\n\t\t    margin = this.options.keepBuffer,\n\t\t    noPruneRange = new Bounds(tileRange.getBottomLeft().subtract([margin, -margin]),\n\t\t                              tileRange.getTopRight().add([margin, -margin]));\n\n\t\t// Sanity check: panic if the tile range contains Infinity somewhere.\n\t\tif (!(isFinite(tileRange.min.x) &&\n\t\t      isFinite(tileRange.min.y) &&\n\t\t      isFinite(tileRange.max.x) &&\n\t\t      isFinite(tileRange.max.y))) { throw new Error('Attempted to load an infinite number of tiles'); }\n\n\t\tfor (var key in this._tiles) {\n\t\t\tvar c = this._tiles[key].coords;\n\t\t\tif (c.z !== this._tileZoom || !noPruneRange.contains(new Point(c.x, c.y))) {\n\t\t\t\tthis._tiles[key].current = false;\n\t\t\t}\n\t\t}\n\n\t\t// _update just loads more tiles. If the tile zoom level differs too much\n\t\t// from the map's, let _setView reset levels and prune old tiles.\n\t\tif (Math.abs(zoom - this._tileZoom) > 1) { this._setView(center, zoom); return; }\n\n\t\t// create a queue of coordinates to load tiles from\n\t\tfor (var j = tileRange.min.y; j <= tileRange.max.y; j++) {\n\t\t\tfor (var i = tileRange.min.x; i <= tileRange.max.x; i++) {\n\t\t\t\tvar coords = new Point(i, j);\n\t\t\t\tcoords.z = this._tileZoom;\n\n\t\t\t\tif (!this._isValidTile(coords)) { continue; }\n\n\t\t\t\tvar tile = this._tiles[this._tileCoordsToKey(coords)];\n\t\t\t\tif (tile) {\n\t\t\t\t\ttile.current = true;\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push(coords);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// sort tile queue to load tiles in order of their distance to center\n\t\tqueue.sort(function (a, b) {\n\t\t\treturn a.distanceTo(tileCenter) - b.distanceTo(tileCenter);\n\t\t});\n\n\t\tif (queue.length !== 0) {\n\t\t\t// if it's the first batch of tiles to load\n\t\t\tif (!this._loading) {\n\t\t\t\tthis._loading = true;\n\t\t\t\t// @event loading: Event\n\t\t\t\t// Fired when the grid layer starts loading tiles.\n\t\t\t\tthis.fire('loading');\n\t\t\t}\n\n\t\t\t// create DOM fragment to append tiles in one batch\n\t\t\tvar fragment = document.createDocumentFragment();\n\n\t\t\tfor (i = 0; i < queue.length; i++) {\n\t\t\t\tthis._addTile(queue[i], fragment);\n\t\t\t}\n\n\t\t\tthis._level.el.appendChild(fragment);\n\t\t}\n\t},\n\n\t_isValidTile: function (coords) {\n\t\tvar crs = this._map.options.crs;\n\n\t\tif (!crs.infinite) {\n\t\t\t// don't load tile if it's out of bounds and not wrapped\n\t\t\tvar bounds = this._globalTileRange;\n\t\t\tif ((!crs.wrapLng && (coords.x < bounds.min.x || coords.x > bounds.max.x)) ||\n\t\t\t    (!crs.wrapLat && (coords.y < bounds.min.y || coords.y > bounds.max.y))) { return false; }\n\t\t}\n\n\t\tif (!this.options.bounds) { return true; }\n\n\t\t// don't load tile if it doesn't intersect the bounds in options\n\t\tvar tileBounds = this._tileCoordsToBounds(coords);\n\t\treturn latLngBounds(this.options.bounds).overlaps(tileBounds);\n\t},\n\n\t_keyToBounds: function (key) {\n\t\treturn this._tileCoordsToBounds(this._keyToTileCoords(key));\n\t},\n\n\t_tileCoordsToNwSe: function (coords) {\n\t\tvar map = this._map,\n\t\t    tileSize = this.getTileSize(),\n\t\t    nwPoint = coords.scaleBy(tileSize),\n\t\t    sePoint = nwPoint.add(tileSize),\n\t\t    nw = map.unproject(nwPoint, coords.z),\n\t\t    se = map.unproject(sePoint, coords.z);\n\t\treturn [nw, se];\n\t},\n\n\t// converts tile coordinates to its geographical bounds\n\t_tileCoordsToBounds: function (coords) {\n\t\tvar bp = this._tileCoordsToNwSe(coords),\n\t\t    bounds = new LatLngBounds(bp[0], bp[1]);\n\n\t\tif (!this.options.noWrap) {\n\t\t\tbounds = this._map.wrapLatLngBounds(bounds);\n\t\t}\n\t\treturn bounds;\n\t},\n\t// converts tile coordinates to key for the tile cache\n\t_tileCoordsToKey: function (coords) {\n\t\treturn coords.x + ':' + coords.y + ':' + coords.z;\n\t},\n\n\t// converts tile cache key to coordinates\n\t_keyToTileCoords: function (key) {\n\t\tvar k = key.split(':'),\n\t\t    coords = new Point(+k[0], +k[1]);\n\t\tcoords.z = +k[2];\n\t\treturn coords;\n\t},\n\n\t_removeTile: function (key) {\n\t\tvar tile = this._tiles[key];\n\t\tif (!tile) { return; }\n\n\t\tDomUtil.remove(tile.el);\n\n\t\tdelete this._tiles[key];\n\n\t\t// @event tileunload: TileEvent\n\t\t// Fired when a tile is removed (e.g. when a tile goes off the screen).\n\t\tthis.fire('tileunload', {\n\t\t\ttile: tile.el,\n\t\t\tcoords: this._keyToTileCoords(key)\n\t\t});\n\t},\n\n\t_initTile: function (tile) {\n\t\tDomUtil.addClass(tile, 'leaflet-tile');\n\n\t\tvar tileSize = this.getTileSize();\n\t\ttile.style.width = tileSize.x + 'px';\n\t\ttile.style.height = tileSize.y + 'px';\n\n\t\ttile.onselectstart = Util.falseFn;\n\t\ttile.onmousemove = Util.falseFn;\n\n\t\t// update opacity on tiles in IE7-8 because of filter inheritance problems\n\t\tif (Browser.ielt9 && this.options.opacity < 1) {\n\t\t\tDomUtil.setOpacity(tile, this.options.opacity);\n\t\t}\n\t},\n\n\t_addTile: function (coords, container) {\n\t\tvar tilePos = this._getTilePos(coords),\n\t\t    key = this._tileCoordsToKey(coords);\n\n\t\tvar tile = this.createTile(this._wrapCoords(coords), Util.bind(this._tileReady, this, coords));\n\n\t\tthis._initTile(tile);\n\n\t\t// if createTile is defined with a second argument (\"done\" callback),\n\t\t// we know that tile is async and will be ready later; otherwise\n\t\tif (this.createTile.length < 2) {\n\t\t\t// mark tile as ready, but delay one frame for opacity animation to happen\n\t\t\tUtil.requestAnimFrame(Util.bind(this._tileReady, this, coords, null, tile));\n\t\t}\n\n\t\tDomUtil.setPosition(tile, tilePos);\n\n\t\t// save tile in cache\n\t\tthis._tiles[key] = {\n\t\t\tel: tile,\n\t\t\tcoords: coords,\n\t\t\tcurrent: true\n\t\t};\n\n\t\tcontainer.appendChild(tile);\n\t\t// @event tileloadstart: TileEvent\n\t\t// Fired when a tile is requested and starts loading.\n\t\tthis.fire('tileloadstart', {\n\t\t\ttile: tile,\n\t\t\tcoords: coords\n\t\t});\n\t},\n\n\t_tileReady: function (coords, err, tile) {\n\t\tif (err) {\n\t\t\t// @event tileerror: TileErrorEvent\n\t\t\t// Fired when there is an error loading a tile.\n\t\t\tthis.fire('tileerror', {\n\t\t\t\terror: err,\n\t\t\t\ttile: tile,\n\t\t\t\tcoords: coords\n\t\t\t});\n\t\t}\n\n\t\tvar key = this._tileCoordsToKey(coords);\n\n\t\ttile = this._tiles[key];\n\t\tif (!tile) { return; }\n\n\t\ttile.loaded = +new Date();\n\t\tif (this._map._fadeAnimated) {\n\t\t\tDomUtil.setOpacity(tile.el, 0);\n\t\t\tUtil.cancelAnimFrame(this._fadeFrame);\n\t\t\tthis._fadeFrame = Util.requestAnimFrame(this._updateOpacity, this);\n\t\t} else {\n\t\t\ttile.active = true;\n\t\t\tthis._pruneTiles();\n\t\t}\n\n\t\tif (!err) {\n\t\t\tDomUtil.addClass(tile.el, 'leaflet-tile-loaded');\n\n\t\t\t// @event tileload: TileEvent\n\t\t\t// Fired when a tile loads.\n\t\t\tthis.fire('tileload', {\n\t\t\t\ttile: tile.el,\n\t\t\t\tcoords: coords\n\t\t\t});\n\t\t}\n\n\t\tif (this._noTilesToLoad()) {\n\t\t\tthis._loading = false;\n\t\t\t// @event load: Event\n\t\t\t// Fired when the grid layer loaded all visible tiles.\n\t\t\tthis.fire('load');\n\n\t\t\tif (Browser.ielt9 || !this._map._fadeAnimated) {\n\t\t\t\tUtil.requestAnimFrame(this._pruneTiles, this);\n\t\t\t} else {\n\t\t\t\t// Wait a bit more than 0.2 secs (the duration of the tile fade-in)\n\t\t\t\t// to trigger a pruning.\n\t\t\t\tsetTimeout(Util.bind(this._pruneTiles, this), 250);\n\t\t\t}\n\t\t}\n\t},\n\n\t_getTilePos: function (coords) {\n\t\treturn coords.scaleBy(this.getTileSize()).subtract(this._level.origin);\n\t},\n\n\t_wrapCoords: function (coords) {\n\t\tvar newCoords = new Point(\n\t\t\tthis._wrapX ? Util.wrapNum(coords.x, this._wrapX) : coords.x,\n\t\t\tthis._wrapY ? Util.wrapNum(coords.y, this._wrapY) : coords.y);\n\t\tnewCoords.z = coords.z;\n\t\treturn newCoords;\n\t},\n\n\t_pxBoundsToTileRange: function (bounds) {\n\t\tvar tileSize = this.getTileSize();\n\t\treturn new Bounds(\n\t\t\tbounds.min.unscaleBy(tileSize).floor(),\n\t\t\tbounds.max.unscaleBy(tileSize).ceil().subtract([1, 1]));\n\t},\n\n\t_noTilesToLoad: function () {\n\t\tfor (var key in this._tiles) {\n\t\t\tif (!this._tiles[key].loaded) { return false; }\n\t\t}\n\t\treturn true;\n\t}\n});\n\n// @factory L.gridLayer(options?: GridLayer options)\n// Creates a new instance of GridLayer with the supplied options.\nexport function gridLayer(options) {\n\treturn new GridLayer(options);\n}\n","import {GridLayer} from './GridLayer';\r\nimport Browser from '../../core/Browser';\r\nimport * as Util from '../../core/Util';\r\nimport * as DomEvent from '../../dom/DomEvent';\r\nimport * as DomUtil from '../../dom/DomUtil';\r\n\r\n\r\n/*\r\n * @class TileLayer\r\n * @inherits GridLayer\r\n * @aka L.TileLayer\r\n * Used to load and display tile layers on the map. Note that most tile servers require attribution, which you can set under `Layer`. Extends `GridLayer`.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png?{foo}', {foo: 'bar', attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'}).addTo(map);\n * ```\r\n *\r\n * @section URL template\r\n * @example\r\n *\r\n * A string of the following form:\r\n *\r\n * ```\r\n * 'https://{s}.somedomain.com/blabla/{z}/{x}/{y}{r}.png'\r\n * ```\r\n *\r\n * `{s}` means one of the available subdomains (used sequentially to help with browser parallel requests per domain limitation; subdomain values are specified in options; `a`, `b` or `c` by default, can be omitted), `{z}`  zoom level, `{x}` and `{y}`  tile coordinates. `{r}` can be used to add \"&commat;2x\" to the URL to load retina tiles.\r\n *\r\n * You can use custom keys in the template, which will be [evaluated](#util-template) from TileLayer options, like this:\r\n *\r\n * ```\r\n * L.tileLayer('https://{s}.somedomain.com/{foo}/{z}/{x}/{y}.png', {foo: 'bar'});\r\n * ```\r\n */\r\n\r\n\r\nexport var TileLayer = GridLayer.extend({\r\n\r\n\t// @section\r\n\t// @aka TileLayer options\r\n\toptions: {\r\n\t\t// @option minZoom: Number = 0\r\n\t\t// The minimum zoom level down to which this layer will be displayed (inclusive).\r\n\t\tminZoom: 0,\r\n\r\n\t\t// @option maxZoom: Number = 18\r\n\t\t// The maximum zoom level up to which this layer will be displayed (inclusive).\r\n\t\tmaxZoom: 18,\r\n\r\n\t\t// @option subdomains: String|String[] = 'abc'\r\n\t\t// Subdomains of the tile service. Can be passed in the form of one string (where each letter is a subdomain name) or an array of strings.\r\n\t\tsubdomains: 'abc',\r\n\r\n\t\t// @option errorTileUrl: String = ''\r\n\t\t// URL to the tile image to show in place of the tile that failed to load.\r\n\t\terrorTileUrl: '',\r\n\r\n\t\t// @option zoomOffset: Number = 0\r\n\t\t// The zoom number used in tile URLs will be offset with this value.\r\n\t\tzoomOffset: 0,\r\n\r\n\t\t// @option tms: Boolean = false\r\n\t\t// If `true`, inverses Y axis numbering for tiles (turn this on for [TMS](https://en.wikipedia.org/wiki/Tile_Map_Service) services).\r\n\t\ttms: false,\r\n\r\n\t\t// @option zoomReverse: Boolean = false\r\n\t\t// If set to true, the zoom number used in tile URLs will be reversed (`maxZoom - zoom` instead of `zoom`)\r\n\t\tzoomReverse: false,\r\n\r\n\t\t// @option detectRetina: Boolean = false\r\n\t\t// If `true` and user is on a retina display, it will request four tiles of half the specified size and a bigger zoom level in place of one to utilize the high resolution.\r\n\t\tdetectRetina: false,\r\n\r\n\t\t// @option crossOrigin: Boolean|String = false\r\n\t\t// Whether the crossOrigin attribute will be added to the tiles.\r\n\t\t// If a String is provided, all tiles will have their crossOrigin attribute set to the String provided. This is needed if you want to access tile pixel data.\r\n\t\t// Refer to [CORS Settings](https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes) for valid String values.\r\n\t\tcrossOrigin: false,\r\n\r\n\t\t// @option referrerPolicy: Boolean|String = false\r\n\t\t// Whether the referrerPolicy attribute will be added to the tiles.\r\n\t\t// If a String is provided, all tiles will have their referrerPolicy attribute set to the String provided.\r\n\t\t// This may be needed if your map's rendering context has a strict default but your tile provider expects a valid referrer\r\n\t\t// (e.g. to validate an API token).\r\n\t\t// Refer to [HTMLImageElement.referrerPolicy](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/referrerPolicy) for valid String values.\r\n\t\treferrerPolicy: false\r\n\t},\r\n\r\n\tinitialize: function (url, options) {\r\n\r\n\t\tthis._url = url;\r\n\r\n\t\toptions = Util.setOptions(this, options);\r\n\r\n\t\t// detecting retina displays, adjusting tileSize and zoom levels\r\n\t\tif (options.detectRetina && Browser.retina && options.maxZoom > 0) {\r\n\r\n\t\t\toptions.tileSize = Math.floor(options.tileSize / 2);\r\n\r\n\t\t\tif (!options.zoomReverse) {\r\n\t\t\t\toptions.zoomOffset++;\r\n\t\t\t\toptions.maxZoom = Math.max(options.minZoom, options.maxZoom - 1);\r\n\t\t\t} else {\r\n\t\t\t\toptions.zoomOffset--;\r\n\t\t\t\toptions.minZoom = Math.min(options.maxZoom, options.minZoom + 1);\r\n\t\t\t}\r\n\r\n\t\t\toptions.minZoom = Math.max(0, options.minZoom);\r\n\t\t} else if (!options.zoomReverse) {\r\n\t\t\t// make sure maxZoom is gte minZoom\r\n\t\t\toptions.maxZoom = Math.max(options.minZoom, options.maxZoom);\r\n\t\t} else {\r\n\t\t\t// make sure minZoom is lte maxZoom\r\n\t\t\toptions.minZoom = Math.min(options.maxZoom, options.minZoom);\r\n\t\t}\r\n\r\n\t\tif (typeof options.subdomains === 'string') {\r\n\t\t\toptions.subdomains = options.subdomains.split('');\r\n\t\t}\r\n\r\n\t\tthis.on('tileunload', this._onTileRemove);\r\n\t},\r\n\r\n\t// @method setUrl(url: String, noRedraw?: Boolean): this\r\n\t// Updates the layer's URL template and redraws it (unless `noRedraw` is set to `true`).\r\n\t// If the URL does not change, the layer will not be redrawn unless\r\n\t// the noRedraw parameter is set to false.\r\n\tsetUrl: function (url, noRedraw) {\r\n\t\tif (this._url === url && noRedraw === undefined) {\r\n\t\t\tnoRedraw = true;\r\n\t\t}\r\n\r\n\t\tthis._url = url;\r\n\r\n\t\tif (!noRedraw) {\r\n\t\t\tthis.redraw();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method createTile(coords: Object, done?: Function): HTMLElement\r\n\t// Called only internally, overrides GridLayer's [`createTile()`](#gridlayer-createtile)\r\n\t// to return an `<img>` HTML element with the appropriate image URL given `coords`. The `done`\r\n\t// callback is called when the tile has been loaded.\r\n\tcreateTile: function (coords, done) {\r\n\t\tvar tile = document.createElement('img');\r\n\r\n\t\tDomEvent.on(tile, 'load', Util.bind(this._tileOnLoad, this, done, tile));\r\n\t\tDomEvent.on(tile, 'error', Util.bind(this._tileOnError, this, done, tile));\r\n\r\n\t\tif (this.options.crossOrigin || this.options.crossOrigin === '') {\r\n\t\t\ttile.crossOrigin = this.options.crossOrigin === true ? '' : this.options.crossOrigin;\r\n\t\t}\r\n\r\n\t\t// for this new option we follow the documented behavior\r\n\t\t// more closely by only setting the property when string\r\n\t\tif (typeof this.options.referrerPolicy === 'string') {\r\n\t\t\ttile.referrerPolicy = this.options.referrerPolicy;\r\n\t\t}\r\n\r\n\t\t// The alt attribute is set to the empty string,\r\n\t\t// allowing screen readers to ignore the decorative image tiles.\r\n\t\t// https://www.w3.org/WAI/tutorials/images/decorative/\r\n\t\t// https://www.w3.org/TR/html-aria/#el-img-empty-alt\r\n\t\ttile.alt = '';\r\n\r\n\t\ttile.src = this.getTileUrl(coords);\r\n\r\n\t\treturn tile;\r\n\t},\r\n\r\n\t// @section Extension methods\r\n\t// @uninheritable\r\n\t// Layers extending `TileLayer` might reimplement the following method.\r\n\t// @method getTileUrl(coords: Object): String\r\n\t// Called only internally, returns the URL for a tile given its coordinates.\r\n\t// Classes extending `TileLayer` can override this function to provide custom tile URL naming schemes.\r\n\tgetTileUrl: function (coords) {\r\n\t\tvar data = {\r\n\t\t\tr: Browser.retina ? '@2x' : '',\r\n\t\t\ts: this._getSubdomain(coords),\r\n\t\t\tx: coords.x,\r\n\t\t\ty: coords.y,\r\n\t\t\tz: this._getZoomForUrl()\r\n\t\t};\r\n\t\tif (this._map && !this._map.options.crs.infinite) {\r\n\t\t\tvar invertedY = this._globalTileRange.max.y - coords.y;\r\n\t\t\tif (this.options.tms) {\r\n\t\t\t\tdata['y'] = invertedY;\r\n\t\t\t}\r\n\t\t\tdata['-y'] = invertedY;\r\n\t\t}\r\n\r\n\t\treturn Util.template(this._url, Util.extend(data, this.options));\r\n\t},\r\n\r\n\t_tileOnLoad: function (done, tile) {\r\n\t\t// For https://github.com/Leaflet/Leaflet/issues/3332\r\n\t\tif (Browser.ielt9) {\r\n\t\t\tsetTimeout(Util.bind(done, this, null, tile), 0);\r\n\t\t} else {\r\n\t\t\tdone(null, tile);\r\n\t\t}\r\n\t},\r\n\r\n\t_tileOnError: function (done, tile, e) {\r\n\t\tvar errorUrl = this.options.errorTileUrl;\r\n\t\tif (errorUrl && tile.getAttribute('src') !== errorUrl) {\r\n\t\t\ttile.src = errorUrl;\r\n\t\t}\r\n\t\tdone(e, tile);\r\n\t},\r\n\r\n\t_onTileRemove: function (e) {\r\n\t\te.tile.onload = null;\r\n\t},\r\n\r\n\t_getZoomForUrl: function () {\r\n\t\tvar zoom = this._tileZoom,\r\n\t\tmaxZoom = this.options.maxZoom,\r\n\t\tzoomReverse = this.options.zoomReverse,\r\n\t\tzoomOffset = this.options.zoomOffset;\r\n\r\n\t\tif (zoomReverse) {\r\n\t\t\tzoom = maxZoom - zoom;\r\n\t\t}\r\n\r\n\t\treturn zoom + zoomOffset;\r\n\t},\r\n\r\n\t_getSubdomain: function (tilePoint) {\r\n\t\tvar index = Math.abs(tilePoint.x + tilePoint.y) % this.options.subdomains.length;\r\n\t\treturn this.options.subdomains[index];\r\n\t},\r\n\r\n\t// stops loading all tiles in the background layer\r\n\t_abortLoading: function () {\r\n\t\tvar i, tile;\r\n\t\tfor (i in this._tiles) {\r\n\t\t\tif (this._tiles[i].coords.z !== this._tileZoom) {\r\n\t\t\t\ttile = this._tiles[i].el;\r\n\r\n\t\t\t\ttile.onload = Util.falseFn;\r\n\t\t\t\ttile.onerror = Util.falseFn;\r\n\r\n\t\t\t\tif (!tile.complete) {\r\n\t\t\t\t\ttile.src = Util.emptyImageUrl;\r\n\t\t\t\t\tvar coords = this._tiles[i].coords;\r\n\t\t\t\t\tDomUtil.remove(tile);\r\n\t\t\t\t\tdelete this._tiles[i];\r\n\t\t\t\t\t// @event tileabort: TileEvent\r\n\t\t\t\t\t// Fired when a tile was loading but is now not wanted.\r\n\t\t\t\t\tthis.fire('tileabort', {\r\n\t\t\t\t\t\ttile: tile,\r\n\t\t\t\t\t\tcoords: coords\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_removeTile: function (key) {\r\n\t\tvar tile = this._tiles[key];\r\n\t\tif (!tile) { return; }\r\n\r\n\t\t// Cancels any pending http requests associated with the tile\r\n\t\ttile.el.setAttribute('src', Util.emptyImageUrl);\r\n\r\n\t\treturn GridLayer.prototype._removeTile.call(this, key);\r\n\t},\r\n\r\n\t_tileReady: function (coords, err, tile) {\r\n\t\tif (!this._map || (tile && tile.getAttribute('src') === Util.emptyImageUrl)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\treturn GridLayer.prototype._tileReady.call(this, coords, err, tile);\r\n\t}\r\n});\r\n\r\n\r\n// @factory L.tilelayer(urlTemplate: String, options?: TileLayer options)\r\n// Instantiates a tile layer object given a `URL template` and optionally an options object.\r\n\r\nexport function tileLayer(url, options) {\r\n\treturn new TileLayer(url, options);\r\n}\r\n","import {TileLayer} from './TileLayer';\r\nimport {extend, setOptions, getParamString} from '../../core/Util';\r\nimport Browser from '../../core/Browser';\r\nimport {EPSG4326} from '../../geo/crs/CRS.EPSG4326';\r\nimport {toBounds} from '../../geometry/Bounds';\r\n\r\n/*\r\n * @class TileLayer.WMS\r\n * @inherits TileLayer\r\n * @aka L.TileLayer.WMS\r\n * Used to display [WMS](https://en.wikipedia.org/wiki/Web_Map_Service) services as tile layers on the map. Extends `TileLayer`.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * var nexrad = L.tileLayer.wms(\"http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi\", {\r\n * \tlayers: 'nexrad-n0r-900913',\r\n * \tformat: 'image/png',\r\n * \ttransparent: true,\r\n * \tattribution: \"Weather data  2012 IEM Nexrad\"\r\n * });\r\n * ```\r\n */\r\n\r\nexport var TileLayerWMS = TileLayer.extend({\r\n\r\n\t// @section\r\n\t// @aka TileLayer.WMS options\r\n\t// If any custom options not documented here are used, they will be sent to the\r\n\t// WMS server as extra parameters in each request URL. This can be useful for\r\n\t// [non-standard vendor WMS parameters](https://docs.geoserver.org/stable/en/user/services/wms/vendor.html).\r\n\tdefaultWmsParams: {\r\n\t\tservice: 'WMS',\r\n\t\trequest: 'GetMap',\r\n\r\n\t\t// @option layers: String = ''\r\n\t\t// **(required)** Comma-separated list of WMS layers to show.\r\n\t\tlayers: '',\r\n\r\n\t\t// @option styles: String = ''\r\n\t\t// Comma-separated list of WMS styles.\r\n\t\tstyles: '',\r\n\r\n\t\t// @option format: String = 'image/jpeg'\r\n\t\t// WMS image format (use `'image/png'` for layers with transparency).\r\n\t\tformat: 'image/jpeg',\r\n\r\n\t\t// @option transparent: Boolean = false\r\n\t\t// If `true`, the WMS service will return images with transparency.\r\n\t\ttransparent: false,\r\n\r\n\t\t// @option version: String = '1.1.1'\r\n\t\t// Version of the WMS service to use\r\n\t\tversion: '1.1.1'\r\n\t},\r\n\r\n\toptions: {\r\n\t\t// @option crs: CRS = null\r\n\t\t// Coordinate Reference System to use for the WMS requests, defaults to\r\n\t\t// map CRS. Don't change this if you're not sure what it means.\r\n\t\tcrs: null,\r\n\r\n\t\t// @option uppercase: Boolean = false\r\n\t\t// If `true`, WMS request parameter keys will be uppercase.\r\n\t\tuppercase: false\r\n\t},\r\n\r\n\tinitialize: function (url, options) {\r\n\r\n\t\tthis._url = url;\r\n\r\n\t\tvar wmsParams = extend({}, this.defaultWmsParams);\r\n\r\n\t\t// all keys that are not TileLayer options go to WMS params\r\n\t\tfor (var i in options) {\r\n\t\t\tif (!(i in this.options)) {\r\n\t\t\t\twmsParams[i] = options[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\toptions = setOptions(this, options);\r\n\r\n\t\tvar realRetina = options.detectRetina && Browser.retina ? 2 : 1;\r\n\t\tvar tileSize = this.getTileSize();\r\n\t\twmsParams.width = tileSize.x * realRetina;\r\n\t\twmsParams.height = tileSize.y * realRetina;\r\n\r\n\t\tthis.wmsParams = wmsParams;\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\r\n\t\tthis._crs = this.options.crs || map.options.crs;\r\n\t\tthis._wmsVersion = parseFloat(this.wmsParams.version);\r\n\r\n\t\tvar projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';\r\n\t\tthis.wmsParams[projectionKey] = this._crs.code;\r\n\r\n\t\tTileLayer.prototype.onAdd.call(this, map);\r\n\t},\r\n\r\n\tgetTileUrl: function (coords) {\r\n\r\n\t\tvar tileBounds = this._tileCoordsToNwSe(coords),\r\n\t\t    crs = this._crs,\r\n\t\t    bounds = toBounds(crs.project(tileBounds[0]), crs.project(tileBounds[1])),\r\n\t\t    min = bounds.min,\r\n\t\t    max = bounds.max,\r\n\t\t    bbox = (this._wmsVersion >= 1.3 && this._crs === EPSG4326 ?\r\n\t\t    [min.y, min.x, max.y, max.x] :\r\n\t\t    [min.x, min.y, max.x, max.y]).join(','),\r\n\t\t    url = TileLayer.prototype.getTileUrl.call(this, coords);\r\n\t\treturn url +\r\n\t\t\tgetParamString(this.wmsParams, url, this.options.uppercase) +\r\n\t\t\t(this.options.uppercase ? '&BBOX=' : '&bbox=') + bbox;\r\n\t},\r\n\r\n\t// @method setParams(params: Object, noRedraw?: Boolean): this\r\n\t// Merges an object with the new parameters and re-requests tiles on the current screen (unless `noRedraw` was set to true).\r\n\tsetParams: function (params, noRedraw) {\r\n\r\n\t\textend(this.wmsParams, params);\r\n\r\n\t\tif (!noRedraw) {\r\n\t\t\tthis.redraw();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\n\r\n// @factory L.tileLayer.wms(baseUrl: String, options: TileLayer.WMS options)\r\n// Instantiates a WMS tile layer object given a base URL of the WMS service and a WMS parameters/options object.\r\nexport function tileLayerWMS(url, options) {\r\n\treturn new TileLayerWMS(url, options);\r\n}\r\n","export {GridLayer, gridLayer} from './GridLayer';\nimport {TileLayer, tileLayer} from './TileLayer';\nimport {TileLayerWMS, tileLayerWMS} from './TileLayer.WMS';\nTileLayer.WMS = TileLayerWMS;\ntileLayer.wms = tileLayerWMS;\nexport {TileLayer, tileLayer};\n","import {Layer} from '../Layer';\nimport * as DomUtil from '../../dom/DomUtil';\nimport * as Util from '../../core/Util';\nimport Browser from '../../core/Browser';\nimport {Bounds} from '../../geometry/Bounds';\n\n\n\n/*\n * @class Renderer\n * @inherits Layer\n * @aka L.Renderer\n *\n * Base class for vector renderer implementations (`SVG`, `Canvas`). Handles the\n * DOM container of the renderer, its bounds, and its zoom animation.\n *\n * A `Renderer` works as an implicit layer group for all `Path`s - the renderer\n * itself can be added or removed to the map. All paths use a renderer, which can\n * be implicit (the map will decide the type of renderer and use it automatically)\n * or explicit (using the [`renderer`](#path-renderer) option of the path).\n *\n * Do not use this class directly, use `SVG` and `Canvas` instead.\n *\n * @event update: Event\n * Fired when the renderer updates its bounds, center and zoom, for example when\n * its map has moved\n */\n\nexport var Renderer = Layer.extend({\n\n\t// @section\n\t// @aka Renderer options\n\toptions: {\n\t\t// @option padding: Number = 0.1\n\t\t// How much to extend the clip area around the map view (relative to its size)\n\t\t// e.g. 0.1 would be 10% of map view in each direction\n\t\tpadding: 0.1\n\t},\n\n\tinitialize: function (options) {\n\t\tUtil.setOptions(this, options);\n\t\tUtil.stamp(this);\n\t\tthis._layers = this._layers || {};\n\t},\n\n\tonAdd: function () {\n\t\tif (!this._container) {\n\t\t\tthis._initContainer(); // defined by renderer implementations\n\n\t\t\t// always keep transform-origin as 0 0\n\t\t\tDomUtil.addClass(this._container, 'leaflet-zoom-animated');\n\t\t}\n\n\t\tthis.getPane().appendChild(this._container);\n\t\tthis._update();\n\t\tthis.on('update', this._updatePaths, this);\n\t},\n\n\tonRemove: function () {\n\t\tthis.off('update', this._updatePaths, this);\n\t\tthis._destroyContainer();\n\t},\n\n\tgetEvents: function () {\n\t\tvar events = {\n\t\t\tviewreset: this._reset,\n\t\t\tzoom: this._onZoom,\n\t\t\tmoveend: this._update,\n\t\t\tzoomend: this._onZoomEnd\n\t\t};\n\t\tif (this._zoomAnimated) {\n\t\t\tevents.zoomanim = this._onAnimZoom;\n\t\t}\n\t\treturn events;\n\t},\n\n\t_onAnimZoom: function (ev) {\n\t\tthis._updateTransform(ev.center, ev.zoom);\n\t},\n\n\t_onZoom: function () {\n\t\tthis._updateTransform(this._map.getCenter(), this._map.getZoom());\n\t},\n\n\t_updateTransform: function (center, zoom) {\n\t\tvar scale = this._map.getZoomScale(zoom, this._zoom),\n\t\t    viewHalf = this._map.getSize().multiplyBy(0.5 + this.options.padding),\n\t\t    currentCenterPoint = this._map.project(this._center, zoom),\n\n\t\t    topLeftOffset = viewHalf.multiplyBy(-scale).add(currentCenterPoint)\n\t\t\t\t  .subtract(this._map._getNewPixelOrigin(center, zoom));\n\n\t\tif (Browser.any3d) {\n\t\t\tDomUtil.setTransform(this._container, topLeftOffset, scale);\n\t\t} else {\n\t\t\tDomUtil.setPosition(this._container, topLeftOffset);\n\t\t}\n\t},\n\n\t_reset: function () {\n\t\tthis._update();\n\t\tthis._updateTransform(this._center, this._zoom);\n\n\t\tfor (var id in this._layers) {\n\t\t\tthis._layers[id]._reset();\n\t\t}\n\t},\n\n\t_onZoomEnd: function () {\n\t\tfor (var id in this._layers) {\n\t\t\tthis._layers[id]._project();\n\t\t}\n\t},\n\n\t_updatePaths: function () {\n\t\tfor (var id in this._layers) {\n\t\t\tthis._layers[id]._update();\n\t\t}\n\t},\n\n\t_update: function () {\n\t\t// Update pixel bounds of renderer container (for positioning/sizing/clipping later)\n\t\t// Subclasses are responsible of firing the 'update' event.\n\t\tvar p = this.options.padding,\n\t\t    size = this._map.getSize(),\n\t\t    min = this._map.containerPointToLayerPoint(size.multiplyBy(-p)).round();\n\n\t\tthis._bounds = new Bounds(min, min.add(size.multiplyBy(1 + p * 2)).round());\n\n\t\tthis._center = this._map.getCenter();\n\t\tthis._zoom = this._map.getZoom();\n\t}\n});\n","import {Renderer} from './Renderer';\nimport * as DomUtil from '../../dom/DomUtil';\nimport * as DomEvent from '../../dom/DomEvent';\nimport Browser from '../../core/Browser';\nimport * as Util from '../../core/Util';\nimport {Bounds} from '../../geometry/Bounds';\n\n/*\n * @class Canvas\n * @inherits Renderer\n * @aka L.Canvas\n *\n * Allows vector layers to be displayed with [`<canvas>`](https://developer.mozilla.org/docs/Web/API/Canvas_API).\n * Inherits `Renderer`.\n *\n * Due to [technical limitations](https://caniuse.com/canvas), Canvas is not\n * available in all web browsers, notably IE8, and overlapping geometries might\n * not display properly in some edge cases.\n *\n * @example\n *\n * Use Canvas by default for all paths in the map:\n *\n * ```js\n * var map = L.map('map', {\n * \trenderer: L.canvas()\n * });\n * ```\n *\n * Use a Canvas renderer with extra padding for specific vector geometries:\n *\n * ```js\n * var map = L.map('map');\n * var myRenderer = L.canvas({ padding: 0.5 });\n * var line = L.polyline( coordinates, { renderer: myRenderer } );\n * var circle = L.circle( center, { renderer: myRenderer } );\n * ```\n */\n\nexport var Canvas = Renderer.extend({\n\n\t// @section\n\t// @aka Canvas options\n\toptions: {\n\t\t// @option tolerance: Number = 0\n\t\t// How much to extend the click tolerance around a path/object on the map.\n\t\ttolerance: 0\n\t},\n\n\tgetEvents: function () {\n\t\tvar events = Renderer.prototype.getEvents.call(this);\n\t\tevents.viewprereset = this._onViewPreReset;\n\t\treturn events;\n\t},\n\n\t_onViewPreReset: function () {\n\t\t// Set a flag so that a viewprereset+moveend+viewreset only updates&redraws once\n\t\tthis._postponeUpdatePaths = true;\n\t},\n\n\tonAdd: function () {\n\t\tRenderer.prototype.onAdd.call(this);\n\n\t\t// Redraw vectors since canvas is cleared upon removal,\n\t\t// in case of removing the renderer itself from the map.\n\t\tthis._draw();\n\t},\n\n\t_initContainer: function () {\n\t\tvar container = this._container = document.createElement('canvas');\n\n\t\tDomEvent.on(container, 'mousemove', this._onMouseMove, this);\n\t\tDomEvent.on(container, 'click dblclick mousedown mouseup contextmenu', this._onClick, this);\n\t\tDomEvent.on(container, 'mouseout', this._handleMouseOut, this);\n\t\tcontainer['_leaflet_disable_events'] = true;\n\n\t\tthis._ctx = container.getContext('2d');\n\t},\n\n\t_destroyContainer: function () {\n\t\tUtil.cancelAnimFrame(this._redrawRequest);\n\t\tdelete this._ctx;\n\t\tDomUtil.remove(this._container);\n\t\tDomEvent.off(this._container);\n\t\tdelete this._container;\n\t},\n\n\t_updatePaths: function () {\n\t\tif (this._postponeUpdatePaths) { return; }\n\n\t\tvar layer;\n\t\tthis._redrawBounds = null;\n\t\tfor (var id in this._layers) {\n\t\t\tlayer = this._layers[id];\n\t\t\tlayer._update();\n\t\t}\n\t\tthis._redraw();\n\t},\n\n\t_update: function () {\n\t\tif (this._map._animatingZoom && this._bounds) { return; }\n\n\t\tRenderer.prototype._update.call(this);\n\n\t\tvar b = this._bounds,\n\t\t    container = this._container,\n\t\t    size = b.getSize(),\n\t\t    m = Browser.retina ? 2 : 1;\n\n\t\tDomUtil.setPosition(container, b.min);\n\n\t\t// set canvas size (also clearing it); use double size on retina\n\t\tcontainer.width = m * size.x;\n\t\tcontainer.height = m * size.y;\n\t\tcontainer.style.width = size.x + 'px';\n\t\tcontainer.style.height = size.y + 'px';\n\n\t\tif (Browser.retina) {\n\t\t\tthis._ctx.scale(2, 2);\n\t\t}\n\n\t\t// translate so we use the same path coordinates after canvas element moves\n\t\tthis._ctx.translate(-b.min.x, -b.min.y);\n\n\t\t// Tell paths to redraw themselves\n\t\tthis.fire('update');\n\t},\n\n\t_reset: function () {\n\t\tRenderer.prototype._reset.call(this);\n\n\t\tif (this._postponeUpdatePaths) {\n\t\t\tthis._postponeUpdatePaths = false;\n\t\t\tthis._updatePaths();\n\t\t}\n\t},\n\n\t_initPath: function (layer) {\n\t\tthis._updateDashArray(layer);\n\t\tthis._layers[Util.stamp(layer)] = layer;\n\n\t\tvar order = layer._order = {\n\t\t\tlayer: layer,\n\t\t\tprev: this._drawLast,\n\t\t\tnext: null\n\t\t};\n\t\tif (this._drawLast) { this._drawLast.next = order; }\n\t\tthis._drawLast = order;\n\t\tthis._drawFirst = this._drawFirst || this._drawLast;\n\t},\n\n\t_addPath: function (layer) {\n\t\tthis._requestRedraw(layer);\n\t},\n\n\t_removePath: function (layer) {\n\t\tvar order = layer._order;\n\t\tvar next = order.next;\n\t\tvar prev = order.prev;\n\n\t\tif (next) {\n\t\t\tnext.prev = prev;\n\t\t} else {\n\t\t\tthis._drawLast = prev;\n\t\t}\n\t\tif (prev) {\n\t\t\tprev.next = next;\n\t\t} else {\n\t\t\tthis._drawFirst = next;\n\t\t}\n\n\t\tdelete layer._order;\n\n\t\tdelete this._layers[Util.stamp(layer)];\n\n\t\tthis._requestRedraw(layer);\n\t},\n\n\t_updatePath: function (layer) {\n\t\t// Redraw the union of the layer's old pixel\n\t\t// bounds and the new pixel bounds.\n\t\tthis._extendRedrawBounds(layer);\n\t\tlayer._project();\n\t\tlayer._update();\n\t\t// The redraw will extend the redraw bounds\n\t\t// with the new pixel bounds.\n\t\tthis._requestRedraw(layer);\n\t},\n\n\t_updateStyle: function (layer) {\n\t\tthis._updateDashArray(layer);\n\t\tthis._requestRedraw(layer);\n\t},\n\n\t_updateDashArray: function (layer) {\n\t\tif (typeof layer.options.dashArray === 'string') {\n\t\t\tvar parts = layer.options.dashArray.split(/[, ]+/),\n\t\t\t    dashArray = [],\n\t\t\t    dashValue,\n\t\t\t    i;\n\t\t\tfor (i = 0; i < parts.length; i++) {\n\t\t\t\tdashValue = Number(parts[i]);\n\t\t\t\t// Ignore dash array containing invalid lengths\n\t\t\t\tif (isNaN(dashValue)) { return; }\n\t\t\t\tdashArray.push(dashValue);\n\t\t\t}\n\t\t\tlayer.options._dashArray = dashArray;\n\t\t} else {\n\t\t\tlayer.options._dashArray = layer.options.dashArray;\n\t\t}\n\t},\n\n\t_requestRedraw: function (layer) {\n\t\tif (!this._map) { return; }\n\n\t\tthis._extendRedrawBounds(layer);\n\t\tthis._redrawRequest = this._redrawRequest || Util.requestAnimFrame(this._redraw, this);\n\t},\n\n\t_extendRedrawBounds: function (layer) {\n\t\tif (layer._pxBounds) {\n\t\t\tvar padding = (layer.options.weight || 0) + 1;\n\t\t\tthis._redrawBounds = this._redrawBounds || new Bounds();\n\t\t\tthis._redrawBounds.extend(layer._pxBounds.min.subtract([padding, padding]));\n\t\t\tthis._redrawBounds.extend(layer._pxBounds.max.add([padding, padding]));\n\t\t}\n\t},\n\n\t_redraw: function () {\n\t\tthis._redrawRequest = null;\n\n\t\tif (this._redrawBounds) {\n\t\t\tthis._redrawBounds.min._floor();\n\t\t\tthis._redrawBounds.max._ceil();\n\t\t}\n\n\t\tthis._clear(); // clear layers in redraw bounds\n\t\tthis._draw(); // draw layers\n\n\t\tthis._redrawBounds = null;\n\t},\n\n\t_clear: function () {\n\t\tvar bounds = this._redrawBounds;\n\t\tif (bounds) {\n\t\t\tvar size = bounds.getSize();\n\t\t\tthis._ctx.clearRect(bounds.min.x, bounds.min.y, size.x, size.y);\n\t\t} else {\n\t\t\tthis._ctx.save();\n\t\t\tthis._ctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\tthis._ctx.clearRect(0, 0, this._container.width, this._container.height);\n\t\t\tthis._ctx.restore();\n\t\t}\n\t},\n\n\t_draw: function () {\n\t\tvar layer, bounds = this._redrawBounds;\n\t\tthis._ctx.save();\n\t\tif (bounds) {\n\t\t\tvar size = bounds.getSize();\n\t\t\tthis._ctx.beginPath();\n\t\t\tthis._ctx.rect(bounds.min.x, bounds.min.y, size.x, size.y);\n\t\t\tthis._ctx.clip();\n\t\t}\n\n\t\tthis._drawing = true;\n\n\t\tfor (var order = this._drawFirst; order; order = order.next) {\n\t\t\tlayer = order.layer;\n\t\t\tif (!bounds || (layer._pxBounds && layer._pxBounds.intersects(bounds))) {\n\t\t\t\tlayer._updatePath();\n\t\t\t}\n\t\t}\n\n\t\tthis._drawing = false;\n\n\t\tthis._ctx.restore();  // Restore state before clipping.\n\t},\n\n\t_updatePoly: function (layer, closed) {\n\t\tif (!this._drawing) { return; }\n\n\t\tvar i, j, len2, p,\n\t\t    parts = layer._parts,\n\t\t    len = parts.length,\n\t\t    ctx = this._ctx;\n\n\t\tif (!len) { return; }\n\n\t\tctx.beginPath();\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tfor (j = 0, len2 = parts[i].length; j < len2; j++) {\n\t\t\t\tp = parts[i][j];\n\t\t\t\tctx[j ? 'lineTo' : 'moveTo'](p.x, p.y);\n\t\t\t}\n\t\t\tif (closed) {\n\t\t\t\tctx.closePath();\n\t\t\t}\n\t\t}\n\n\t\tthis._fillStroke(ctx, layer);\n\n\t\t// TODO optimization: 1 fill/stroke for all features with equal style instead of 1 for each feature\n\t},\n\n\t_updateCircle: function (layer) {\n\n\t\tif (!this._drawing || layer._empty()) { return; }\n\n\t\tvar p = layer._point,\n\t\t    ctx = this._ctx,\n\t\t    r = Math.max(Math.round(layer._radius), 1),\n\t\t    s = (Math.max(Math.round(layer._radiusY), 1) || r) / r;\n\n\t\tif (s !== 1) {\n\t\t\tctx.save();\n\t\t\tctx.scale(1, s);\n\t\t}\n\n\t\tctx.beginPath();\n\t\tctx.arc(p.x, p.y / s, r, 0, Math.PI * 2, false);\n\n\t\tif (s !== 1) {\n\t\t\tctx.restore();\n\t\t}\n\n\t\tthis._fillStroke(ctx, layer);\n\t},\n\n\t_fillStroke: function (ctx, layer) {\n\t\tvar options = layer.options;\n\n\t\tif (options.fill) {\n\t\t\tctx.globalAlpha = options.fillOpacity;\n\t\t\tctx.fillStyle = options.fillColor || options.color;\n\t\t\tctx.fill(options.fillRule || 'evenodd');\n\t\t}\n\n\t\tif (options.stroke && options.weight !== 0) {\n\t\t\tif (ctx.setLineDash) {\n\t\t\t\tctx.setLineDash(layer.options && layer.options._dashArray || []);\n\t\t\t}\n\t\t\tctx.globalAlpha = options.opacity;\n\t\t\tctx.lineWidth = options.weight;\n\t\t\tctx.strokeStyle = options.color;\n\t\t\tctx.lineCap = options.lineCap;\n\t\t\tctx.lineJoin = options.lineJoin;\n\t\t\tctx.stroke();\n\t\t}\n\t},\n\n\t// Canvas obviously doesn't have mouse events for individual drawn objects,\n\t// so we emulate that by calculating what's under the mouse on mousemove/click manually\n\n\t_onClick: function (e) {\n\t\tvar point = this._map.mouseEventToLayerPoint(e), layer, clickedLayer;\n\n\t\tfor (var order = this._drawFirst; order; order = order.next) {\n\t\t\tlayer = order.layer;\n\t\t\tif (layer.options.interactive && layer._containsPoint(point)) {\n\t\t\t\tif (!(e.type === 'click' || e.type === 'preclick') || !this._map._draggableMoved(layer)) {\n\t\t\t\t\tclickedLayer = layer;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._fireEvent(clickedLayer ? [clickedLayer] : false, e);\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tif (!this._map || this._map.dragging.moving() || this._map._animatingZoom) { return; }\n\n\t\tvar point = this._map.mouseEventToLayerPoint(e);\n\t\tthis._handleMouseHover(e, point);\n\t},\n\n\n\t_handleMouseOut: function (e) {\n\t\tvar layer = this._hoveredLayer;\n\t\tif (layer) {\n\t\t\t// if we're leaving the layer, fire mouseout\n\t\t\tDomUtil.removeClass(this._container, 'leaflet-interactive');\n\t\t\tthis._fireEvent([layer], e, 'mouseout');\n\t\t\tthis._hoveredLayer = null;\n\t\t\tthis._mouseHoverThrottled = false;\n\t\t}\n\t},\n\n\t_handleMouseHover: function (e, point) {\n\t\tif (this._mouseHoverThrottled) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar layer, candidateHoveredLayer;\n\n\t\tfor (var order = this._drawFirst; order; order = order.next) {\n\t\t\tlayer = order.layer;\n\t\t\tif (layer.options.interactive && layer._containsPoint(point)) {\n\t\t\t\tcandidateHoveredLayer = layer;\n\t\t\t}\n\t\t}\n\n\t\tif (candidateHoveredLayer !== this._hoveredLayer) {\n\t\t\tthis._handleMouseOut(e);\n\n\t\t\tif (candidateHoveredLayer) {\n\t\t\t\tDomUtil.addClass(this._container, 'leaflet-interactive'); // change cursor\n\t\t\t\tthis._fireEvent([candidateHoveredLayer], e, 'mouseover');\n\t\t\t\tthis._hoveredLayer = candidateHoveredLayer;\n\t\t\t}\n\t\t}\n\n\t\tthis._fireEvent(this._hoveredLayer ? [this._hoveredLayer] : false, e);\n\n\t\tthis._mouseHoverThrottled = true;\n\t\tsetTimeout(Util.bind(function () {\n\t\t\tthis._mouseHoverThrottled = false;\n\t\t}, this), 32);\n\t},\n\n\t_fireEvent: function (layers, e, type) {\n\t\tthis._map._fireDOMEvent(e, type || e.type, layers);\n\t},\n\n\t_bringToFront: function (layer) {\n\t\tvar order = layer._order;\n\n\t\tif (!order) { return; }\n\n\t\tvar next = order.next;\n\t\tvar prev = order.prev;\n\n\t\tif (next) {\n\t\t\tnext.prev = prev;\n\t\t} else {\n\t\t\t// Already last\n\t\t\treturn;\n\t\t}\n\t\tif (prev) {\n\t\t\tprev.next = next;\n\t\t} else if (next) {\n\t\t\t// Update first entry unless this is the\n\t\t\t// single entry\n\t\t\tthis._drawFirst = next;\n\t\t}\n\n\t\torder.prev = this._drawLast;\n\t\tthis._drawLast.next = order;\n\n\t\torder.next = null;\n\t\tthis._drawLast = order;\n\n\t\tthis._requestRedraw(layer);\n\t},\n\n\t_bringToBack: function (layer) {\n\t\tvar order = layer._order;\n\n\t\tif (!order) { return; }\n\n\t\tvar next = order.next;\n\t\tvar prev = order.prev;\n\n\t\tif (prev) {\n\t\t\tprev.next = next;\n\t\t} else {\n\t\t\t// Already first\n\t\t\treturn;\n\t\t}\n\t\tif (next) {\n\t\t\tnext.prev = prev;\n\t\t} else if (prev) {\n\t\t\t// Update last entry unless this is the\n\t\t\t// single entry\n\t\t\tthis._drawLast = prev;\n\t\t}\n\n\t\torder.prev = null;\n\n\t\torder.next = this._drawFirst;\n\t\tthis._drawFirst.prev = order;\n\t\tthis._drawFirst = order;\n\n\t\tthis._requestRedraw(layer);\n\t}\n});\n\n// @factory L.canvas(options?: Renderer options)\n// Creates a Canvas renderer with the given options.\nexport function canvas(options) {\n\treturn Browser.canvas ? new Canvas(options) : null;\n}\n","import * as DomUtil from '../../dom/DomUtil';\nimport * as Util from '../../core/Util';\nimport {Renderer} from './Renderer';\n\n/*\n * Thanks to Dmitry Baranovsky and his Raphael library for inspiration!\n */\n\n\nexport var vmlCreate = (function () {\n\ttry {\n\t\tdocument.namespaces.add('lvml', 'urn:schemas-microsoft-com:vml');\n\t\treturn function (name) {\n\t\t\treturn document.createElement('<lvml:' + name + ' class=\"lvml\">');\n\t\t};\n\t} catch (e) {\n\t\t// Do not return fn from catch block so `e` can be garbage collected\n\t\t// See https://github.com/Leaflet/Leaflet/pull/7279\n\t}\n\treturn function (name) {\n\t\treturn document.createElement('<' + name + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"lvml\">');\n\t};\n})();\n\n\n/*\n * @class SVG\n *\n *\n * VML was deprecated in 2012, which means VML functionality exists only for backwards compatibility\n * with old versions of Internet Explorer.\n */\n\n// mixin to redefine some SVG methods to handle VML syntax which is similar but with some differences\nexport var vmlMixin = {\n\n\t_initContainer: function () {\n\t\tthis._container = DomUtil.create('div', 'leaflet-vml-container');\n\t},\n\n\t_update: function () {\n\t\tif (this._map._animatingZoom) { return; }\n\t\tRenderer.prototype._update.call(this);\n\t\tthis.fire('update');\n\t},\n\n\t_initPath: function (layer) {\n\t\tvar container = layer._container = vmlCreate('shape');\n\n\t\tDomUtil.addClass(container, 'leaflet-vml-shape ' + (this.options.className || ''));\n\n\t\tcontainer.coordsize = '1 1';\n\n\t\tlayer._path = vmlCreate('path');\n\t\tcontainer.appendChild(layer._path);\n\n\t\tthis._updateStyle(layer);\n\t\tthis._layers[Util.stamp(layer)] = layer;\n\t},\n\n\t_addPath: function (layer) {\n\t\tvar container = layer._container;\n\t\tthis._container.appendChild(container);\n\n\t\tif (layer.options.interactive) {\n\t\t\tlayer.addInteractiveTarget(container);\n\t\t}\n\t},\n\n\t_removePath: function (layer) {\n\t\tvar container = layer._container;\n\t\tDomUtil.remove(container);\n\t\tlayer.removeInteractiveTarget(container);\n\t\tdelete this._layers[Util.stamp(layer)];\n\t},\n\n\t_updateStyle: function (layer) {\n\t\tvar stroke = layer._stroke,\n\t\t    fill = layer._fill,\n\t\t    options = layer.options,\n\t\t    container = layer._container;\n\n\t\tcontainer.stroked = !!options.stroke;\n\t\tcontainer.filled = !!options.fill;\n\n\t\tif (options.stroke) {\n\t\t\tif (!stroke) {\n\t\t\t\tstroke = layer._stroke = vmlCreate('stroke');\n\t\t\t}\n\t\t\tcontainer.appendChild(stroke);\n\t\t\tstroke.weight = options.weight + 'px';\n\t\t\tstroke.color = options.color;\n\t\t\tstroke.opacity = options.opacity;\n\n\t\t\tif (options.dashArray) {\n\t\t\t\tstroke.dashStyle = Util.isArray(options.dashArray) ?\n\t\t\t\t    options.dashArray.join(' ') :\n\t\t\t\t    options.dashArray.replace(/( *, *)/g, ' ');\n\t\t\t} else {\n\t\t\t\tstroke.dashStyle = '';\n\t\t\t}\n\t\t\tstroke.endcap = options.lineCap.replace('butt', 'flat');\n\t\t\tstroke.joinstyle = options.lineJoin;\n\n\t\t} else if (stroke) {\n\t\t\tcontainer.removeChild(stroke);\n\t\t\tlayer._stroke = null;\n\t\t}\n\n\t\tif (options.fill) {\n\t\t\tif (!fill) {\n\t\t\t\tfill = layer._fill = vmlCreate('fill');\n\t\t\t}\n\t\t\tcontainer.appendChild(fill);\n\t\t\tfill.color = options.fillColor || options.color;\n\t\t\tfill.opacity = options.fillOpacity;\n\n\t\t} else if (fill) {\n\t\t\tcontainer.removeChild(fill);\n\t\t\tlayer._fill = null;\n\t\t}\n\t},\n\n\t_updateCircle: function (layer) {\n\t\tvar p = layer._point.round(),\n\t\t    r = Math.round(layer._radius),\n\t\t    r2 = Math.round(layer._radiusY || r);\n\n\t\tthis._setPath(layer, layer._empty() ? 'M0 0' :\n\t\t\t'AL ' + p.x + ',' + p.y + ' ' + r + ',' + r2 + ' 0,' + (65535 * 360));\n\t},\n\n\t_setPath: function (layer, path) {\n\t\tlayer._path.v = path;\n\t},\n\n\t_bringToFront: function (layer) {\n\t\tDomUtil.toFront(layer._container);\n\t},\n\n\t_bringToBack: function (layer) {\n\t\tDomUtil.toBack(layer._container);\n\t}\n};\n","import {Renderer} from './Renderer';\nimport * as DomUtil from '../../dom/DomUtil';\nimport * as DomEvent from '../../dom/DomEvent';\nimport Browser from '../../core/Browser';\nimport {stamp} from '../../core/Util';\nimport {svgCreate, pointsToPath} from './SVG.Util';\nexport {pointsToPath};\nimport {vmlMixin, vmlCreate} from './SVG.VML';\n\nexport var create = Browser.vml ? vmlCreate : svgCreate;\n\n/*\n * @class SVG\n * @inherits Renderer\n * @aka L.SVG\n *\n * Allows vector layers to be displayed with [SVG](https://developer.mozilla.org/docs/Web/SVG).\n * Inherits `Renderer`.\n *\n * Due to [technical limitations](https://caniuse.com/svg), SVG is not\n * available in all web browsers, notably Android 2.x and 3.x.\n *\n * Although SVG is not available on IE7 and IE8, these browsers support\n * [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language)\n * (a now deprecated technology), and the SVG renderer will fall back to VML in\n * this case.\n *\n * @example\n *\n * Use SVG by default for all paths in the map:\n *\n * ```js\n * var map = L.map('map', {\n * \trenderer: L.svg()\n * });\n * ```\n *\n * Use a SVG renderer with extra padding for specific vector geometries:\n *\n * ```js\n * var map = L.map('map');\n * var myRenderer = L.svg({ padding: 0.5 });\n * var line = L.polyline( coordinates, { renderer: myRenderer } );\n * var circle = L.circle( center, { renderer: myRenderer } );\n * ```\n */\n\nexport var SVG = Renderer.extend({\n\n\t_initContainer: function () {\n\t\tthis._container = create('svg');\n\n\t\t// makes it possible to click through svg root; we'll reset it back in individual paths\n\t\tthis._container.setAttribute('pointer-events', 'none');\n\n\t\tthis._rootGroup = create('g');\n\t\tthis._container.appendChild(this._rootGroup);\n\t},\n\n\t_destroyContainer: function () {\n\t\tDomUtil.remove(this._container);\n\t\tDomEvent.off(this._container);\n\t\tdelete this._container;\n\t\tdelete this._rootGroup;\n\t\tdelete this._svgSize;\n\t},\n\n\t_update: function () {\n\t\tif (this._map._animatingZoom && this._bounds) { return; }\n\n\t\tRenderer.prototype._update.call(this);\n\n\t\tvar b = this._bounds,\n\t\t    size = b.getSize(),\n\t\t    container = this._container;\n\n\t\t// set size of svg-container if changed\n\t\tif (!this._svgSize || !this._svgSize.equals(size)) {\n\t\t\tthis._svgSize = size;\n\t\t\tcontainer.setAttribute('width', size.x);\n\t\t\tcontainer.setAttribute('height', size.y);\n\t\t}\n\n\t\t// movement: update container viewBox so that we don't have to change coordinates of individual layers\n\t\tDomUtil.setPosition(container, b.min);\n\t\tcontainer.setAttribute('viewBox', [b.min.x, b.min.y, size.x, size.y].join(' '));\n\n\t\tthis.fire('update');\n\t},\n\n\t// methods below are called by vector layers implementations\n\n\t_initPath: function (layer) {\n\t\tvar path = layer._path = create('path');\n\n\t\t// @namespace Path\n\t\t// @option className: String = null\n\t\t// Custom class name set on an element. Only for SVG renderer.\n\t\tif (layer.options.className) {\n\t\t\tDomUtil.addClass(path, layer.options.className);\n\t\t}\n\n\t\tif (layer.options.interactive) {\n\t\t\tDomUtil.addClass(path, 'leaflet-interactive');\n\t\t}\n\n\t\tthis._updateStyle(layer);\n\t\tthis._layers[stamp(layer)] = layer;\n\t},\n\n\t_addPath: function (layer) {\n\t\tif (!this._rootGroup) { this._initContainer(); }\n\t\tthis._rootGroup.appendChild(layer._path);\n\t\tlayer.addInteractiveTarget(layer._path);\n\t},\n\n\t_removePath: function (layer) {\n\t\tDomUtil.remove(layer._path);\n\t\tlayer.removeInteractiveTarget(layer._path);\n\t\tdelete this._layers[stamp(layer)];\n\t},\n\n\t_updatePath: function (layer) {\n\t\tlayer._project();\n\t\tlayer._update();\n\t},\n\n\t_updateStyle: function (layer) {\n\t\tvar path = layer._path,\n\t\t    options = layer.options;\n\n\t\tif (!path) { return; }\n\n\t\tif (options.stroke) {\n\t\t\tpath.setAttribute('stroke', options.color);\n\t\t\tpath.setAttribute('stroke-opacity', options.opacity);\n\t\t\tpath.setAttribute('stroke-width', options.weight);\n\t\t\tpath.setAttribute('stroke-linecap', options.lineCap);\n\t\t\tpath.setAttribute('stroke-linejoin', options.lineJoin);\n\n\t\t\tif (options.dashArray) {\n\t\t\t\tpath.setAttribute('stroke-dasharray', options.dashArray);\n\t\t\t} else {\n\t\t\t\tpath.removeAttribute('stroke-dasharray');\n\t\t\t}\n\n\t\t\tif (options.dashOffset) {\n\t\t\t\tpath.setAttribute('stroke-dashoffset', options.dashOffset);\n\t\t\t} else {\n\t\t\t\tpath.removeAttribute('stroke-dashoffset');\n\t\t\t}\n\t\t} else {\n\t\t\tpath.setAttribute('stroke', 'none');\n\t\t}\n\n\t\tif (options.fill) {\n\t\t\tpath.setAttribute('fill', options.fillColor || options.color);\n\t\t\tpath.setAttribute('fill-opacity', options.fillOpacity);\n\t\t\tpath.setAttribute('fill-rule', options.fillRule || 'evenodd');\n\t\t} else {\n\t\t\tpath.setAttribute('fill', 'none');\n\t\t}\n\t},\n\n\t_updatePoly: function (layer, closed) {\n\t\tthis._setPath(layer, pointsToPath(layer._parts, closed));\n\t},\n\n\t_updateCircle: function (layer) {\n\t\tvar p = layer._point,\n\t\t    r = Math.max(Math.round(layer._radius), 1),\n\t\t    r2 = Math.max(Math.round(layer._radiusY), 1) || r,\n\t\t    arc = 'a' + r + ',' + r2 + ' 0 1,0 ';\n\n\t\t// drawing a circle with two half-arcs\n\t\tvar d = layer._empty() ? 'M0 0' :\n\t\t\t'M' + (p.x - r) + ',' + p.y +\n\t\t\tarc + (r * 2) + ',0 ' +\n\t\t\tarc + (-r * 2) + ',0 ';\n\n\t\tthis._setPath(layer, d);\n\t},\n\n\t_setPath: function (layer, path) {\n\t\tlayer._path.setAttribute('d', path);\n\t},\n\n\t// SVG does not have the concept of zIndex so we resort to changing the DOM order of elements\n\t_bringToFront: function (layer) {\n\t\tDomUtil.toFront(layer._path);\n\t},\n\n\t_bringToBack: function (layer) {\n\t\tDomUtil.toBack(layer._path);\n\t}\n});\n\nif (Browser.vml) {\n\tSVG.include(vmlMixin);\n}\n\n// @namespace SVG\n// @factory L.svg(options?: Renderer options)\n// Creates a SVG renderer with the given options.\nexport function svg(options) {\n\treturn Browser.svg || Browser.vml ? new SVG(options) : null;\n}\n","import {Map} from '../../map/Map';\nimport {canvas} from './Canvas';\nimport {svg} from './SVG';\n\nMap.include({\n\t// @namespace Map; @method getRenderer(layer: Path): Renderer\n\t// Returns the instance of `Renderer` that should be used to render the given\n\t// `Path`. It will ensure that the `renderer` options of the map and paths\n\t// are respected, and that the renderers do exist on the map.\n\tgetRenderer: function (layer) {\n\t\t// @namespace Path; @option renderer: Renderer\n\t\t// Use this specific instance of `Renderer` for this path. Takes\n\t\t// precedence over the map's [default renderer](#map-renderer).\n\t\tvar renderer = layer.options.renderer || this._getPaneRenderer(layer.options.pane) || this.options.renderer || this._renderer;\n\n\t\tif (!renderer) {\n\t\t\trenderer = this._renderer = this._createRenderer();\n\t\t}\n\n\t\tif (!this.hasLayer(renderer)) {\n\t\t\tthis.addLayer(renderer);\n\t\t}\n\t\treturn renderer;\n\t},\n\n\t_getPaneRenderer: function (name) {\n\t\tif (name === 'overlayPane' || name === undefined) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar renderer = this._paneRenderers[name];\n\t\tif (renderer === undefined) {\n\t\t\trenderer = this._createRenderer({pane: name});\n\t\t\tthis._paneRenderers[name] = renderer;\n\t\t}\n\t\treturn renderer;\n\t},\n\n\t_createRenderer: function (options) {\n\t\t// @namespace Map; @option preferCanvas: Boolean = false\n\t\t// Whether `Path`s should be rendered on a `Canvas` renderer.\n\t\t// By default, all `Path`s are rendered in a `SVG` renderer.\n\t\treturn (this.options.preferCanvas && canvas(options)) || svg(options);\n\t}\n});\n","import {Polygon} from './Polygon';\nimport {toLatLngBounds} from '../../geo/LatLngBounds';\n\n/*\n * L.Rectangle extends Polygon and creates a rectangle when passed a LatLngBounds object.\n */\n\n/*\n * @class Rectangle\n * @aka L.Rectangle\n * @inherits Polygon\n *\n * A class for drawing rectangle overlays on a map. Extends `Polygon`.\n *\n * @example\n *\n * ```js\n * // define rectangle geographical bounds\n * var bounds = [[54.559322, -5.767822], [56.1210604, -3.021240]];\n *\n * // create an orange rectangle\n * L.rectangle(bounds, {color: \"#ff7800\", weight: 1}).addTo(map);\n *\n * // zoom the map to the rectangle bounds\n * map.fitBounds(bounds);\n * ```\n *\n */\n\n\nexport var Rectangle = Polygon.extend({\n\tinitialize: function (latLngBounds, options) {\n\t\tPolygon.prototype.initialize.call(this, this._boundsToLatLngs(latLngBounds), options);\n\t},\n\n\t// @method setBounds(latLngBounds: LatLngBounds): this\n\t// Redraws the rectangle with the passed bounds.\n\tsetBounds: function (latLngBounds) {\n\t\treturn this.setLatLngs(this._boundsToLatLngs(latLngBounds));\n\t},\n\n\t_boundsToLatLngs: function (latLngBounds) {\n\t\tlatLngBounds = toLatLngBounds(latLngBounds);\n\t\treturn [\n\t\t\tlatLngBounds.getSouthWest(),\n\t\t\tlatLngBounds.getNorthWest(),\n\t\t\tlatLngBounds.getNorthEast(),\n\t\t\tlatLngBounds.getSouthEast()\n\t\t];\n\t}\n});\n\n\n// @factory L.rectangle(latLngBounds: LatLngBounds, options?: Polyline options)\nexport function rectangle(latLngBounds, options) {\n\treturn new Rectangle(latLngBounds, options);\n}\n","export {Renderer} from './Renderer';\nexport {Canvas, canvas} from './Canvas';\nimport {SVG, create, pointsToPath, svg} from './SVG';\nSVG.create = create;\nSVG.pointsToPath = pointsToPath;\nexport {SVG, svg};\nimport './Renderer.getRenderer';\t// This is a bit of a hack, but needed because circular dependencies\n\nexport {Path} from './Path';\nexport {CircleMarker, circleMarker} from './CircleMarker';\nexport {Circle, circle} from './Circle';\nexport {Polyline, polyline} from './Polyline';\nexport {Polygon, polygon} from './Polygon';\nexport {Rectangle, rectangle} from './Rectangle';\n","export {Layer} from './Layer';\nexport {LayerGroup, layerGroup} from './LayerGroup';\nexport {FeatureGroup, featureGroup} from './FeatureGroup';\nimport {GeoJSON, geoJSON, geoJson, geometryToLayer, coordsToLatLng, coordsToLatLngs, latLngToCoords, latLngsToCoords, getFeature, asFeature} from './GeoJSON';\nGeoJSON.geometryToLayer = geometryToLayer;\nGeoJSON.coordsToLatLng = coordsToLatLng;\nGeoJSON.coordsToLatLngs = coordsToLatLngs;\nGeoJSON.latLngToCoords = latLngToCoords;\nGeoJSON.latLngsToCoords = latLngsToCoords;\nGeoJSON.getFeature = getFeature;\nGeoJSON.asFeature = asFeature;\nexport {GeoJSON, geoJSON, geoJson};\n\nexport {ImageOverlay, imageOverlay} from './ImageOverlay';\nexport {VideoOverlay, videoOverlay} from './VideoOverlay';\nexport {SVGOverlay, svgOverlay} from './SVGOverlay';\n\nexport {DivOverlay} from './DivOverlay';\nexport {Popup, popup} from './Popup';\nexport {Tooltip, tooltip} from './Tooltip';\n\nexport * from './marker/index';\nexport * from './tile/index';\nexport * from './vector/index';\n","import {Map} from '../Map';\nimport {Handler} from '../../core/Handler';\nimport * as Util from '../../core/Util';\nimport * as DomUtil from '../../dom/DomUtil';\nimport * as DomEvent from '../../dom/DomEvent';\nimport {LatLngBounds} from '../../geo/LatLngBounds';\nimport {Bounds} from '../../geometry/Bounds';\n\n/*\n * L.Handler.BoxZoom is used to add shift-drag zoom interaction to the map\n * (zoom to a selected bounding box), enabled by default.\n */\n\n// @namespace Map\n// @section Interaction Options\nMap.mergeOptions({\n\t// @option boxZoom: Boolean = true\n\t// Whether the map can be zoomed to a rectangular area specified by\n\t// dragging the mouse while pressing the shift key.\n\tboxZoom: true\n});\n\nexport var BoxZoom = Handler.extend({\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\t\tthis._container = map._container;\n\t\tthis._pane = map._panes.overlayPane;\n\t\tthis._resetStateTimeout = 0;\n\t\tmap.on('unload', this._destroy, this);\n\t},\n\n\taddHooks: function () {\n\t\tDomEvent.on(this._container, 'mousedown', this._onMouseDown, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tDomEvent.off(this._container, 'mousedown', this._onMouseDown, this);\n\t},\n\n\tmoved: function () {\n\t\treturn this._moved;\n\t},\n\n\t_destroy: function () {\n\t\tDomUtil.remove(this._pane);\n\t\tdelete this._pane;\n\t},\n\n\t_resetState: function () {\n\t\tthis._resetStateTimeout = 0;\n\t\tthis._moved = false;\n\t},\n\n\t_clearDeferredResetState: function () {\n\t\tif (this._resetStateTimeout !== 0) {\n\t\t\tclearTimeout(this._resetStateTimeout);\n\t\t\tthis._resetStateTimeout = 0;\n\t\t}\n\t},\n\n\t_onMouseDown: function (e) {\n\t\tif (!e.shiftKey || ((e.which !== 1) && (e.button !== 1))) { return false; }\n\n\t\t// Clear the deferred resetState if it hasn't executed yet, otherwise it\n\t\t// will interrupt the interaction and orphan a box element in the container.\n\t\tthis._clearDeferredResetState();\n\t\tthis._resetState();\n\n\t\tDomUtil.disableTextSelection();\n\t\tDomUtil.disableImageDrag();\n\n\t\tthis._startPoint = this._map.mouseEventToContainerPoint(e);\n\n\t\tDomEvent.on(document, {\n\t\t\tcontextmenu: DomEvent.stop,\n\t\t\tmousemove: this._onMouseMove,\n\t\t\tmouseup: this._onMouseUp,\n\t\t\tkeydown: this._onKeyDown\n\t\t}, this);\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tif (!this._moved) {\n\t\t\tthis._moved = true;\n\n\t\t\tthis._box = DomUtil.create('div', 'leaflet-zoom-box', this._container);\n\t\t\tDomUtil.addClass(this._container, 'leaflet-crosshair');\n\n\t\t\tthis._map.fire('boxzoomstart');\n\t\t}\n\n\t\tthis._point = this._map.mouseEventToContainerPoint(e);\n\n\t\tvar bounds = new Bounds(this._point, this._startPoint),\n\t\t    size = bounds.getSize();\n\n\t\tDomUtil.setPosition(this._box, bounds.min);\n\n\t\tthis._box.style.width  = size.x + 'px';\n\t\tthis._box.style.height = size.y + 'px';\n\t},\n\n\t_finish: function () {\n\t\tif (this._moved) {\n\t\t\tDomUtil.remove(this._box);\n\t\t\tDomUtil.removeClass(this._container, 'leaflet-crosshair');\n\t\t}\n\n\t\tDomUtil.enableTextSelection();\n\t\tDomUtil.enableImageDrag();\n\n\t\tDomEvent.off(document, {\n\t\t\tcontextmenu: DomEvent.stop,\n\t\t\tmousemove: this._onMouseMove,\n\t\t\tmouseup: this._onMouseUp,\n\t\t\tkeydown: this._onKeyDown\n\t\t}, this);\n\t},\n\n\t_onMouseUp: function (e) {\n\t\tif ((e.which !== 1) && (e.button !== 1)) { return; }\n\n\t\tthis._finish();\n\n\t\tif (!this._moved) { return; }\n\t\t// Postpone to next JS tick so internal click event handling\n\t\t// still see it as \"moved\".\n\t\tthis._clearDeferredResetState();\n\t\tthis._resetStateTimeout = setTimeout(Util.bind(this._resetState, this), 0);\n\n\t\tvar bounds = new LatLngBounds(\n\t\t        this._map.containerPointToLatLng(this._startPoint),\n\t\t        this._map.containerPointToLatLng(this._point));\n\n\t\tthis._map\n\t\t\t.fitBounds(bounds)\n\t\t\t.fire('boxzoomend', {boxZoomBounds: bounds});\n\t},\n\n\t_onKeyDown: function (e) {\n\t\tif (e.keyCode === 27) {\n\t\t\tthis._finish();\n\t\t\tthis._clearDeferredResetState();\n\t\t\tthis._resetState();\n\t\t}\n\t}\n});\n\n// @section Handlers\n// @property boxZoom: Handler\n// Box (shift-drag with mouse) zoom handler.\nMap.addInitHook('addHandler', 'boxZoom', BoxZoom);\n","import {Map} from '../Map';\nimport {Handler} from '../../core/Handler';\n\n/*\n * L.Handler.DoubleClickZoom is used to handle double-click zoom on the map, enabled by default.\n */\n\n// @namespace Map\n// @section Interaction Options\n\nMap.mergeOptions({\n\t// @option doubleClickZoom: Boolean|String = true\n\t// Whether the map can be zoomed in by double clicking on it and\n\t// zoomed out by double clicking while holding shift. If passed\n\t// `'center'`, double-click zoom will zoom to the center of the\n\t//  view regardless of where the mouse was.\n\tdoubleClickZoom: true\n});\n\nexport var DoubleClickZoom = Handler.extend({\n\taddHooks: function () {\n\t\tthis._map.on('dblclick', this._onDoubleClick, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._map.off('dblclick', this._onDoubleClick, this);\n\t},\n\n\t_onDoubleClick: function (e) {\n\t\tvar map = this._map,\n\t\t    oldZoom = map.getZoom(),\n\t\t    delta = map.options.zoomDelta,\n\t\t    zoom = e.originalEvent.shiftKey ? oldZoom - delta : oldZoom + delta;\n\n\t\tif (map.options.doubleClickZoom === 'center') {\n\t\t\tmap.setZoom(zoom);\n\t\t} else {\n\t\t\tmap.setZoomAround(e.containerPoint, zoom);\n\t\t}\n\t}\n});\n\n// @section Handlers\n//\n// Map properties include interaction handlers that allow you to control\n// interaction behavior in runtime, enabling or disabling certain features such\n// as dragging or touch zoom (see `Handler` methods). For example:\n//\n// ```js\n// map.doubleClickZoom.disable();\n// ```\n//\n// @property doubleClickZoom: Handler\n// Double click zoom handler.\nMap.addInitHook('addHandler', 'doubleClickZoom', DoubleClickZoom);\n","import {Map} from '../Map';\nimport {Handler} from '../../core/Handler';\nimport {Draggable} from '../../dom/Draggable';\nimport * as Util from '../../core/Util';\nimport * as DomUtil from '../../dom/DomUtil';\nimport {toLatLngBounds as latLngBounds} from '../../geo/LatLngBounds';\nimport {toBounds} from '../../geometry/Bounds';\n\n/*\n * L.Handler.MapDrag is used to make the map draggable (with panning inertia), enabled by default.\n */\n\n// @namespace Map\n// @section Interaction Options\nMap.mergeOptions({\n\t// @option dragging: Boolean = true\n\t// Whether the map is draggable with mouse/touch or not.\n\tdragging: true,\n\n\t// @section Panning Inertia Options\n\t// @option inertia: Boolean = *\n\t// If enabled, panning of the map will have an inertia effect where\n\t// the map builds momentum while dragging and continues moving in\n\t// the same direction for some time. Feels especially nice on touch\n\t// devices. Enabled by default.\n\tinertia: true,\n\n\t// @option inertiaDeceleration: Number = 3000\n\t// The rate with which the inertial movement slows down, in pixels/second.\n\tinertiaDeceleration: 3400, // px/s^2\n\n\t// @option inertiaMaxSpeed: Number = Infinity\n\t// Max speed of the inertial movement, in pixels/second.\n\tinertiaMaxSpeed: Infinity, // px/s\n\n\t// @option easeLinearity: Number = 0.2\n\teaseLinearity: 0.2,\n\n\t// TODO refactor, move to CRS\n\t// @option worldCopyJump: Boolean = false\n\t// With this option enabled, the map tracks when you pan to another \"copy\"\n\t// of the world and seamlessly jumps to the original one so that all overlays\n\t// like markers and vector layers are still visible.\n\tworldCopyJump: false,\n\n\t// @option maxBoundsViscosity: Number = 0.0\n\t// If `maxBounds` is set, this option will control how solid the bounds\n\t// are when dragging the map around. The default value of `0.0` allows the\n\t// user to drag outside the bounds at normal speed, higher values will\n\t// slow down map dragging outside bounds, and `1.0` makes the bounds fully\n\t// solid, preventing the user from dragging outside the bounds.\n\tmaxBoundsViscosity: 0.0\n});\n\nexport var Drag = Handler.extend({\n\taddHooks: function () {\n\t\tif (!this._draggable) {\n\t\t\tvar map = this._map;\n\n\t\t\tthis._draggable = new Draggable(map._mapPane, map._container);\n\n\t\t\tthis._draggable.on({\n\t\t\t\tdragstart: this._onDragStart,\n\t\t\t\tdrag: this._onDrag,\n\t\t\t\tdragend: this._onDragEnd\n\t\t\t}, this);\n\n\t\t\tthis._draggable.on('predrag', this._onPreDragLimit, this);\n\t\t\tif (map.options.worldCopyJump) {\n\t\t\t\tthis._draggable.on('predrag', this._onPreDragWrap, this);\n\t\t\t\tmap.on('zoomend', this._onZoomEnd, this);\n\n\t\t\t\tmap.whenReady(this._onZoomEnd, this);\n\t\t\t}\n\t\t}\n\t\tDomUtil.addClass(this._map._container, 'leaflet-grab leaflet-touch-drag');\n\t\tthis._draggable.enable();\n\t\tthis._positions = [];\n\t\tthis._times = [];\n\t},\n\n\tremoveHooks: function () {\n\t\tDomUtil.removeClass(this._map._container, 'leaflet-grab');\n\t\tDomUtil.removeClass(this._map._container, 'leaflet-touch-drag');\n\t\tthis._draggable.disable();\n\t},\n\n\tmoved: function () {\n\t\treturn this._draggable && this._draggable._moved;\n\t},\n\n\tmoving: function () {\n\t\treturn this._draggable && this._draggable._moving;\n\t},\n\n\t_onDragStart: function () {\n\t\tvar map = this._map;\n\n\t\tmap._stop();\n\t\tif (this._map.options.maxBounds && this._map.options.maxBoundsViscosity) {\n\t\t\tvar bounds = latLngBounds(this._map.options.maxBounds);\n\n\t\t\tthis._offsetLimit = toBounds(\n\t\t\t\tthis._map.latLngToContainerPoint(bounds.getNorthWest()).multiplyBy(-1),\n\t\t\t\tthis._map.latLngToContainerPoint(bounds.getSouthEast()).multiplyBy(-1)\n\t\t\t\t\t.add(this._map.getSize()));\n\n\t\t\tthis._viscosity = Math.min(1.0, Math.max(0.0, this._map.options.maxBoundsViscosity));\n\t\t} else {\n\t\t\tthis._offsetLimit = null;\n\t\t}\n\n\t\tmap\n\t\t    .fire('movestart')\n\t\t    .fire('dragstart');\n\n\t\tif (map.options.inertia) {\n\t\t\tthis._positions = [];\n\t\t\tthis._times = [];\n\t\t}\n\t},\n\n\t_onDrag: function (e) {\n\t\tif (this._map.options.inertia) {\n\t\t\tvar time = this._lastTime = +new Date(),\n\t\t\t    pos = this._lastPos = this._draggable._absPos || this._draggable._newPos;\n\n\t\t\tthis._positions.push(pos);\n\t\t\tthis._times.push(time);\n\n\t\t\tthis._prunePositions(time);\n\t\t}\n\n\t\tthis._map\n\t\t    .fire('move', e)\n\t\t    .fire('drag', e);\n\t},\n\n\t_prunePositions: function (time) {\n\t\twhile (this._positions.length > 1 && time - this._times[0] > 50) {\n\t\t\tthis._positions.shift();\n\t\t\tthis._times.shift();\n\t\t}\n\t},\n\n\t_onZoomEnd: function () {\n\t\tvar pxCenter = this._map.getSize().divideBy(2),\n\t\t    pxWorldCenter = this._map.latLngToLayerPoint([0, 0]);\n\n\t\tthis._initialWorldOffset = pxWorldCenter.subtract(pxCenter).x;\n\t\tthis._worldWidth = this._map.getPixelWorldBounds().getSize().x;\n\t},\n\n\t_viscousLimit: function (value, threshold) {\n\t\treturn value - (value - threshold) * this._viscosity;\n\t},\n\n\t_onPreDragLimit: function () {\n\t\tif (!this._viscosity || !this._offsetLimit) { return; }\n\n\t\tvar offset = this._draggable._newPos.subtract(this._draggable._startPos);\n\n\t\tvar limit = this._offsetLimit;\n\t\tif (offset.x < limit.min.x) { offset.x = this._viscousLimit(offset.x, limit.min.x); }\n\t\tif (offset.y < limit.min.y) { offset.y = this._viscousLimit(offset.y, limit.min.y); }\n\t\tif (offset.x > limit.max.x) { offset.x = this._viscousLimit(offset.x, limit.max.x); }\n\t\tif (offset.y > limit.max.y) { offset.y = this._viscousLimit(offset.y, limit.max.y); }\n\n\t\tthis._draggable._newPos = this._draggable._startPos.add(offset);\n\t},\n\n\t_onPreDragWrap: function () {\n\t\t// TODO refactor to be able to adjust map pane position after zoom\n\t\tvar worldWidth = this._worldWidth,\n\t\t    halfWidth = Math.round(worldWidth / 2),\n\t\t    dx = this._initialWorldOffset,\n\t\t    x = this._draggable._newPos.x,\n\t\t    newX1 = (x - halfWidth + dx) % worldWidth + halfWidth - dx,\n\t\t    newX2 = (x + halfWidth + dx) % worldWidth - halfWidth - dx,\n\t\t    newX = Math.abs(newX1 + dx) < Math.abs(newX2 + dx) ? newX1 : newX2;\n\n\t\tthis._draggable._absPos = this._draggable._newPos.clone();\n\t\tthis._draggable._newPos.x = newX;\n\t},\n\n\t_onDragEnd: function (e) {\n\t\tvar map = this._map,\n\t\t    options = map.options,\n\n\t\t    noInertia = !options.inertia || e.noInertia || this._times.length < 2;\n\n\t\tmap.fire('dragend', e);\n\n\t\tif (noInertia) {\n\t\t\tmap.fire('moveend');\n\n\t\t} else {\n\t\t\tthis._prunePositions(+new Date());\n\n\t\t\tvar direction = this._lastPos.subtract(this._positions[0]),\n\t\t\t    duration = (this._lastTime - this._times[0]) / 1000,\n\t\t\t    ease = options.easeLinearity,\n\n\t\t\t    speedVector = direction.multiplyBy(ease / duration),\n\t\t\t    speed = speedVector.distanceTo([0, 0]),\n\n\t\t\t    limitedSpeed = Math.min(options.inertiaMaxSpeed, speed),\n\t\t\t    limitedSpeedVector = speedVector.multiplyBy(limitedSpeed / speed),\n\n\t\t\t    decelerationDuration = limitedSpeed / (options.inertiaDeceleration * ease),\n\t\t\t    offset = limitedSpeedVector.multiplyBy(-decelerationDuration / 2).round();\n\n\t\t\tif (!offset.x && !offset.y) {\n\t\t\t\tmap.fire('moveend');\n\n\t\t\t} else {\n\t\t\t\toffset = map._limitOffset(offset, map.options.maxBounds);\n\n\t\t\t\tUtil.requestAnimFrame(function () {\n\t\t\t\t\tmap.panBy(offset, {\n\t\t\t\t\t\tduration: decelerationDuration,\n\t\t\t\t\t\teaseLinearity: ease,\n\t\t\t\t\t\tnoMoveStart: true,\n\t\t\t\t\t\tanimate: true\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n});\n\n// @section Handlers\n// @property dragging: Handler\n// Map dragging handler (by both mouse and touch).\nMap.addInitHook('addHandler', 'dragging', Drag);\n","import {Map} from '../Map';\nimport {Handler} from '../../core/Handler';\nimport {on, off, stop} from '../../dom/DomEvent';\nimport {toPoint} from '../../geometry/Point';\n\n\n/*\n * L.Map.Keyboard is handling keyboard interaction with the map, enabled by default.\n */\n\n// @namespace Map\n// @section Keyboard Navigation Options\nMap.mergeOptions({\n\t// @option keyboard: Boolean = true\n\t// Makes the map focusable and allows users to navigate the map with keyboard\n\t// arrows and `+`/`-` keys.\n\tkeyboard: true,\n\n\t// @option keyboardPanDelta: Number = 80\n\t// Amount of pixels to pan when pressing an arrow key.\n\tkeyboardPanDelta: 80\n});\n\nexport var Keyboard = Handler.extend({\n\n\tkeyCodes: {\n\t\tleft:    [37],\n\t\tright:   [39],\n\t\tdown:    [40],\n\t\tup:      [38],\n\t\tzoomIn:  [187, 107, 61, 171],\n\t\tzoomOut: [189, 109, 54, 173]\n\t},\n\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\n\t\tthis._setPanDelta(map.options.keyboardPanDelta);\n\t\tthis._setZoomDelta(map.options.zoomDelta);\n\t},\n\n\taddHooks: function () {\n\t\tvar container = this._map._container;\n\n\t\t// make the container focusable by tabbing\n\t\tif (container.tabIndex <= 0) {\n\t\t\tcontainer.tabIndex = '0';\n\t\t}\n\n\t\ton(container, {\n\t\t\tfocus: this._onFocus,\n\t\t\tblur: this._onBlur,\n\t\t\tmousedown: this._onMouseDown\n\t\t}, this);\n\n\t\tthis._map.on({\n\t\t\tfocus: this._addHooks,\n\t\t\tblur: this._removeHooks\n\t\t}, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._removeHooks();\n\n\t\toff(this._map._container, {\n\t\t\tfocus: this._onFocus,\n\t\t\tblur: this._onBlur,\n\t\t\tmousedown: this._onMouseDown\n\t\t}, this);\n\n\t\tthis._map.off({\n\t\t\tfocus: this._addHooks,\n\t\t\tblur: this._removeHooks\n\t\t}, this);\n\t},\n\n\t_onMouseDown: function () {\n\t\tif (this._focused) { return; }\n\n\t\tvar body = document.body,\n\t\t    docEl = document.documentElement,\n\t\t    top = body.scrollTop || docEl.scrollTop,\n\t\t    left = body.scrollLeft || docEl.scrollLeft;\n\n\t\tthis._map._container.focus();\n\n\t\twindow.scrollTo(left, top);\n\t},\n\n\t_onFocus: function () {\n\t\tthis._focused = true;\n\t\tthis._map.fire('focus');\n\t},\n\n\t_onBlur: function () {\n\t\tthis._focused = false;\n\t\tthis._map.fire('blur');\n\t},\n\n\t_setPanDelta: function (panDelta) {\n\t\tvar keys = this._panKeys = {},\n\t\t    codes = this.keyCodes,\n\t\t    i, len;\n\n\t\tfor (i = 0, len = codes.left.length; i < len; i++) {\n\t\t\tkeys[codes.left[i]] = [-1 * panDelta, 0];\n\t\t}\n\t\tfor (i = 0, len = codes.right.length; i < len; i++) {\n\t\t\tkeys[codes.right[i]] = [panDelta, 0];\n\t\t}\n\t\tfor (i = 0, len = codes.down.length; i < len; i++) {\n\t\t\tkeys[codes.down[i]] = [0, panDelta];\n\t\t}\n\t\tfor (i = 0, len = codes.up.length; i < len; i++) {\n\t\t\tkeys[codes.up[i]] = [0, -1 * panDelta];\n\t\t}\n\t},\n\n\t_setZoomDelta: function (zoomDelta) {\n\t\tvar keys = this._zoomKeys = {},\n\t\t    codes = this.keyCodes,\n\t\t    i, len;\n\n\t\tfor (i = 0, len = codes.zoomIn.length; i < len; i++) {\n\t\t\tkeys[codes.zoomIn[i]] = zoomDelta;\n\t\t}\n\t\tfor (i = 0, len = codes.zoomOut.length; i < len; i++) {\n\t\t\tkeys[codes.zoomOut[i]] = -zoomDelta;\n\t\t}\n\t},\n\n\t_addHooks: function () {\n\t\ton(document, 'keydown', this._onKeyDown, this);\n\t},\n\n\t_removeHooks: function () {\n\t\toff(document, 'keydown', this._onKeyDown, this);\n\t},\n\n\t_onKeyDown: function (e) {\n\t\tif (e.altKey || e.ctrlKey || e.metaKey) { return; }\n\n\t\tvar key = e.keyCode,\n\t\t    map = this._map,\n\t\t    offset;\n\n\t\tif (key in this._panKeys) {\n\t\t\tif (!map._panAnim || !map._panAnim._inProgress) {\n\t\t\t\toffset = this._panKeys[key];\n\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\toffset = toPoint(offset).multiplyBy(3);\n\t\t\t\t}\n\n\t\t\t\tif (map.options.maxBounds) {\n\t\t\t\t\toffset = map._limitOffset(toPoint(offset), map.options.maxBounds);\n\t\t\t\t}\n\n\t\t\t\tif (map.options.worldCopyJump) {\n\t\t\t\t\tvar newLatLng = map.wrapLatLng(map.unproject(map.project(map.getCenter()).add(offset)));\n\t\t\t\t\tmap.panTo(newLatLng);\n\t\t\t\t} else {\n\t\t\t\t\tmap.panBy(offset);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (key in this._zoomKeys) {\n\t\t\tmap.setZoom(map.getZoom() + (e.shiftKey ? 3 : 1) * this._zoomKeys[key]);\n\n\t\t} else if (key === 27 && map._popup && map._popup.options.closeOnEscapeKey) {\n\t\t\tmap.closePopup();\n\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tstop(e);\n\t}\n});\n\n// @section Handlers\n// @section Handlers\n// @property keyboard: Handler\n// Keyboard navigation handler.\nMap.addInitHook('addHandler', 'keyboard', Keyboard);\n","import {Map} from '../Map';\nimport {Handler} from '../../core/Handler';\nimport * as DomEvent from '../../dom/DomEvent';\nimport * as Util from '../../core/Util';\n\n/*\n * L.Handler.ScrollWheelZoom is used by L.Map to enable mouse scroll wheel zoom on the map.\n */\n\n// @namespace Map\n// @section Interaction Options\nMap.mergeOptions({\n\t// @section Mouse wheel options\n\t// @option scrollWheelZoom: Boolean|String = true\n\t// Whether the map can be zoomed by using the mouse wheel. If passed `'center'`,\n\t// it will zoom to the center of the view regardless of where the mouse was.\n\tscrollWheelZoom: true,\n\n\t// @option wheelDebounceTime: Number = 40\n\t// Limits the rate at which a wheel can fire (in milliseconds). By default\n\t// user can't zoom via wheel more often than once per 40 ms.\n\twheelDebounceTime: 40,\n\n\t// @option wheelPxPerZoomLevel: Number = 60\n\t// How many scroll pixels (as reported by [L.DomEvent.getWheelDelta](#domevent-getwheeldelta))\n\t// mean a change of one full zoom level. Smaller values will make wheel-zooming\n\t// faster (and vice versa).\n\twheelPxPerZoomLevel: 60\n});\n\nexport var ScrollWheelZoom = Handler.extend({\n\taddHooks: function () {\n\t\tDomEvent.on(this._map._container, 'wheel', this._onWheelScroll, this);\n\n\t\tthis._delta = 0;\n\t},\n\n\tremoveHooks: function () {\n\t\tDomEvent.off(this._map._container, 'wheel', this._onWheelScroll, this);\n\t},\n\n\t_onWheelScroll: function (e) {\n\t\tvar delta = DomEvent.getWheelDelta(e);\n\n\t\tvar debounce = this._map.options.wheelDebounceTime;\n\n\t\tthis._delta += delta;\n\t\tthis._lastMousePos = this._map.mouseEventToContainerPoint(e);\n\n\t\tif (!this._startTime) {\n\t\t\tthis._startTime = +new Date();\n\t\t}\n\n\t\tvar left = Math.max(debounce - (+new Date() - this._startTime), 0);\n\n\t\tclearTimeout(this._timer);\n\t\tthis._timer = setTimeout(Util.bind(this._performZoom, this), left);\n\n\t\tDomEvent.stop(e);\n\t},\n\n\t_performZoom: function () {\n\t\tvar map = this._map,\n\t\t    zoom = map.getZoom(),\n\t\t    snap = this._map.options.zoomSnap || 0;\n\n\t\tmap._stop(); // stop panning and fly animations if any\n\n\t\t// map the delta with a sigmoid function to -4..4 range leaning on -1..1\n\t\tvar d2 = this._delta / (this._map.options.wheelPxPerZoomLevel * 4),\n\t\t    d3 = 4 * Math.log(2 / (1 + Math.exp(-Math.abs(d2)))) / Math.LN2,\n\t\t    d4 = snap ? Math.ceil(d3 / snap) * snap : d3,\n\t\t    delta = map._limitZoom(zoom + (this._delta > 0 ? d4 : -d4)) - zoom;\n\n\t\tthis._delta = 0;\n\t\tthis._startTime = null;\n\n\t\tif (!delta) { return; }\n\n\t\tif (map.options.scrollWheelZoom === 'center') {\n\t\t\tmap.setZoom(zoom + delta);\n\t\t} else {\n\t\t\tmap.setZoomAround(this._lastMousePos, zoom + delta);\n\t\t}\n\t}\n});\n\n// @section Handlers\n// @property scrollWheelZoom: Handler\n// Scroll wheel zoom handler.\nMap.addInitHook('addHandler', 'scrollWheelZoom', ScrollWheelZoom);\n","import {Map} from '../Map';\nimport {Handler} from '../../core/Handler';\nimport * as DomEvent from '../../dom/DomEvent';\nimport {Point} from '../../geometry/Point';\nimport * as Util from '../../core/Util';\nimport Browser from '../../core/Browser';\n\n/*\n * L.Map.TapHold is used to simulate `contextmenu` event on long hold,\n * which otherwise is not fired by mobile Safari.\n */\n\nvar tapHoldDelay = 600;\n\n// @namespace Map\n// @section Interaction Options\nMap.mergeOptions({\n\t// @section Touch interaction options\n\t// @option tapHold: Boolean\n\t// Enables simulation of `contextmenu` event, default is `true` for mobile Safari.\n\ttapHold: Browser.touchNative && Browser.safari && Browser.mobile,\n\n\t// @option tapTolerance: Number = 15\n\t// The max number of pixels a user can shift his finger during touch\n\t// for it to be considered a valid tap.\n\ttapTolerance: 15\n});\n\nexport var TapHold = Handler.extend({\n\taddHooks: function () {\n\t\tDomEvent.on(this._map._container, 'touchstart', this._onDown, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tDomEvent.off(this._map._container, 'touchstart', this._onDown, this);\n\t},\n\n\t_onDown: function (e) {\n\t\tclearTimeout(this._holdTimeout);\n\t\tif (e.touches.length !== 1) { return; }\n\n\t\tvar first = e.touches[0];\n\t\tthis._startPos = this._newPos = new Point(first.clientX, first.clientY);\n\n\t\tthis._holdTimeout = setTimeout(Util.bind(function () {\n\t\t\tthis._cancel();\n\t\t\tif (!this._isTapValid()) { return; }\n\n\t\t\t// prevent simulated mouse events https://w3c.github.io/touch-events/#mouse-events\n\t\t\tDomEvent.on(document, 'touchend', DomEvent.preventDefault);\n\t\t\tDomEvent.on(document, 'touchend touchcancel', this._cancelClickPrevent);\n\t\t\tthis._simulateEvent('contextmenu', first);\n\t\t}, this), tapHoldDelay);\n\n\t\tDomEvent.on(document, 'touchend touchcancel contextmenu', this._cancel, this);\n\t\tDomEvent.on(document, 'touchmove', this._onMove, this);\n\t},\n\n\t_cancelClickPrevent: function cancelClickPrevent() {\n\t\tDomEvent.off(document, 'touchend', DomEvent.preventDefault);\n\t\tDomEvent.off(document, 'touchend touchcancel', cancelClickPrevent);\n\t},\n\n\t_cancel: function () {\n\t\tclearTimeout(this._holdTimeout);\n\t\tDomEvent.off(document, 'touchend touchcancel contextmenu', this._cancel, this);\n\t\tDomEvent.off(document, 'touchmove', this._onMove, this);\n\t},\n\n\t_onMove: function (e) {\n\t\tvar first = e.touches[0];\n\t\tthis._newPos = new Point(first.clientX, first.clientY);\n\t},\n\n\t_isTapValid: function () {\n\t\treturn this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance;\n\t},\n\n\t_simulateEvent: function (type, e) {\n\t\tvar simulatedEvent = new MouseEvent(type, {\n\t\t\tbubbles: true,\n\t\t\tcancelable: true,\n\t\t\tview: window,\n\t\t\t// detail: 1,\n\t\t\tscreenX: e.screenX,\n\t\t\tscreenY: e.screenY,\n\t\t\tclientX: e.clientX,\n\t\t\tclientY: e.clientY,\n\t\t\t// button: 2,\n\t\t\t// buttons: 2\n\t\t});\n\n\t\tsimulatedEvent._simulated = true;\n\n\t\te.target.dispatchEvent(simulatedEvent);\n\t}\n});\n\n// @section Handlers\n// @property tapHold: Handler\n// Long tap handler to simulate `contextmenu` event (useful in mobile Safari).\nMap.addInitHook('addHandler', 'tapHold', TapHold);\n","import {Map} from '../Map';\nimport {Handler} from '../../core/Handler';\nimport * as DomEvent from '../../dom/DomEvent';\nimport * as Util from '../../core/Util';\nimport * as DomUtil from '../../dom/DomUtil';\nimport Browser from '../../core/Browser';\n\n/*\n * L.Handler.TouchZoom is used by L.Map to add pinch zoom on supported mobile browsers.\n */\n\n// @namespace Map\n// @section Interaction Options\nMap.mergeOptions({\n\t// @section Touch interaction options\n\t// @option touchZoom: Boolean|String = *\n\t// Whether the map can be zoomed by touch-dragging with two fingers. If\n\t// passed `'center'`, it will zoom to the center of the view regardless of\n\t// where the touch events (fingers) were. Enabled for touch-capable web\n\t// browsers.\n\ttouchZoom: Browser.touch,\n\n\t// @option bounceAtZoomLimits: Boolean = true\n\t// Set it to false if you don't want the map to zoom beyond min/max zoom\n\t// and then bounce back when pinch-zooming.\n\tbounceAtZoomLimits: true\n});\n\nexport var TouchZoom = Handler.extend({\n\taddHooks: function () {\n\t\tDomUtil.addClass(this._map._container, 'leaflet-touch-zoom');\n\t\tDomEvent.on(this._map._container, 'touchstart', this._onTouchStart, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tDomUtil.removeClass(this._map._container, 'leaflet-touch-zoom');\n\t\tDomEvent.off(this._map._container, 'touchstart', this._onTouchStart, this);\n\t},\n\n\t_onTouchStart: function (e) {\n\t\tvar map = this._map;\n\t\tif (!e.touches || e.touches.length !== 2 || map._animatingZoom || this._zooming) { return; }\n\n\t\tvar p1 = map.mouseEventToContainerPoint(e.touches[0]),\n\t\t    p2 = map.mouseEventToContainerPoint(e.touches[1]);\n\n\t\tthis._centerPoint = map.getSize()._divideBy(2);\n\t\tthis._startLatLng = map.containerPointToLatLng(this._centerPoint);\n\t\tif (map.options.touchZoom !== 'center') {\n\t\t\tthis._pinchStartLatLng = map.containerPointToLatLng(p1.add(p2)._divideBy(2));\n\t\t}\n\n\t\tthis._startDist = p1.distanceTo(p2);\n\t\tthis._startZoom = map.getZoom();\n\n\t\tthis._moved = false;\n\t\tthis._zooming = true;\n\n\t\tmap._stop();\n\n\t\tDomEvent.on(document, 'touchmove', this._onTouchMove, this);\n\t\tDomEvent.on(document, 'touchend touchcancel', this._onTouchEnd, this);\n\n\t\tDomEvent.preventDefault(e);\n\t},\n\n\t_onTouchMove: function (e) {\n\t\tif (!e.touches || e.touches.length !== 2 || !this._zooming) { return; }\n\n\t\tvar map = this._map,\n\t\t    p1 = map.mouseEventToContainerPoint(e.touches[0]),\n\t\t    p2 = map.mouseEventToContainerPoint(e.touches[1]),\n\t\t    scale = p1.distanceTo(p2) / this._startDist;\n\n\t\tthis._zoom = map.getScaleZoom(scale, this._startZoom);\n\n\t\tif (!map.options.bounceAtZoomLimits && (\n\t\t\t(this._zoom < map.getMinZoom() && scale < 1) ||\n\t\t\t(this._zoom > map.getMaxZoom() && scale > 1))) {\n\t\t\tthis._zoom = map._limitZoom(this._zoom);\n\t\t}\n\n\t\tif (map.options.touchZoom === 'center') {\n\t\t\tthis._center = this._startLatLng;\n\t\t\tif (scale === 1) { return; }\n\t\t} else {\n\t\t\t// Get delta from pinch to center, so centerLatLng is delta applied to initial pinchLatLng\n\t\t\tvar delta = p1._add(p2)._divideBy(2)._subtract(this._centerPoint);\n\t\t\tif (scale === 1 && delta.x === 0 && delta.y === 0) { return; }\n\t\t\tthis._center = map.unproject(map.project(this._pinchStartLatLng, this._zoom).subtract(delta), this._zoom);\n\t\t}\n\n\t\tif (!this._moved) {\n\t\t\tmap._moveStart(true, false);\n\t\t\tthis._moved = true;\n\t\t}\n\n\t\tUtil.cancelAnimFrame(this._animRequest);\n\n\t\tvar moveFn = Util.bind(map._move, map, this._center, this._zoom, {pinch: true, round: false}, undefined);\n\t\tthis._animRequest = Util.requestAnimFrame(moveFn, this, true);\n\n\t\tDomEvent.preventDefault(e);\n\t},\n\n\t_onTouchEnd: function () {\n\t\tif (!this._moved || !this._zooming) {\n\t\t\tthis._zooming = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis._zooming = false;\n\t\tUtil.cancelAnimFrame(this._animRequest);\n\n\t\tDomEvent.off(document, 'touchmove', this._onTouchMove, this);\n\t\tDomEvent.off(document, 'touchend touchcancel', this._onTouchEnd, this);\n\n\t\t// Pinch updates GridLayers' levels only when zoomSnap is off, so zoomSnap becomes noUpdate.\n\t\tif (this._map.options.zoomAnimation) {\n\t\t\tthis._map._animateZoom(this._center, this._map._limitZoom(this._zoom), true, this._map.options.zoomSnap);\n\t\t} else {\n\t\t\tthis._map._resetView(this._center, this._map._limitZoom(this._zoom));\n\t\t}\n\t}\n});\n\n// @section Handlers\n// @property touchZoom: Handler\n// Touch zoom handler.\nMap.addInitHook('addHandler', 'touchZoom', TouchZoom);\n","import {Map} from './Map';\nimport {BoxZoom} from './handler/Map.BoxZoom';\nMap.BoxZoom = BoxZoom;\nimport {DoubleClickZoom} from './handler/Map.DoubleClickZoom';\nMap.DoubleClickZoom = DoubleClickZoom;\nimport {Drag} from './handler/Map.Drag';\nMap.Drag = Drag;\nimport {Keyboard} from './handler/Map.Keyboard';\nMap.Keyboard = Keyboard;\nimport {ScrollWheelZoom} from './handler/Map.ScrollWheelZoom';\nMap.ScrollWheelZoom = ScrollWheelZoom;\nimport {TapHold} from './handler/Map.TapHold';\nMap.TapHold = TapHold;\nimport {TouchZoom} from './handler/Map.TouchZoom';\nMap.TouchZoom = TouchZoom;\n\nexport {Map, createMap as map} from './Map';\n","/**\n * @license React\n * react-dom-client.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n\"use strict\";\nvar Scheduler = require(\"scheduler\"),\n  React = require(\"react\"),\n  ReactDOM = require(\"react-dom\");\nfunction formatProdErrorMessage(code) {\n  var url = \"https://react.dev/errors/\" + code;\n  if (1 < arguments.length) {\n    url += \"?args[]=\" + encodeURIComponent(arguments[1]);\n    for (var i = 2; i < arguments.length; i++)\n      url += \"&args[]=\" + encodeURIComponent(arguments[i]);\n  }\n  return (\n    \"Minified React error #\" +\n    code +\n    \"; visit \" +\n    url +\n    \" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"\n  );\n}\nfunction isValidContainer(node) {\n  return !(\n    !node ||\n    (1 !== node.nodeType && 9 !== node.nodeType && 11 !== node.nodeType)\n  );\n}\nfunction getNearestMountedFiber(fiber) {\n  var node = fiber,\n    nearestMounted = fiber;\n  if (fiber.alternate) for (; node.return; ) node = node.return;\n  else {\n    fiber = node;\n    do\n      (node = fiber),\n        0 !== (node.flags & 4098) && (nearestMounted = node.return),\n        (fiber = node.return);\n    while (fiber);\n  }\n  return 3 === node.tag ? nearestMounted : null;\n}\nfunction getSuspenseInstanceFromFiber(fiber) {\n  if (13 === fiber.tag) {\n    var suspenseState = fiber.memoizedState;\n    null === suspenseState &&\n      ((fiber = fiber.alternate),\n      null !== fiber && (suspenseState = fiber.memoizedState));\n    if (null !== suspenseState) return suspenseState.dehydrated;\n  }\n  return null;\n}\nfunction getActivityInstanceFromFiber(fiber) {\n  if (31 === fiber.tag) {\n    var activityState = fiber.memoizedState;\n    null === activityState &&\n      ((fiber = fiber.alternate),\n      null !== fiber && (activityState = fiber.memoizedState));\n    if (null !== activityState) return activityState.dehydrated;\n  }\n  return null;\n}\nfunction assertIsMounted(fiber) {\n  if (getNearestMountedFiber(fiber) !== fiber)\n    throw Error(formatProdErrorMessage(188));\n}\nfunction findCurrentFiberUsingSlowPath(fiber) {\n  var alternate = fiber.alternate;\n  if (!alternate) {\n    alternate = getNearestMountedFiber(fiber);\n    if (null === alternate) throw Error(formatProdErrorMessage(188));\n    return alternate !== fiber ? null : fiber;\n  }\n  for (var a = fiber, b = alternate; ; ) {\n    var parentA = a.return;\n    if (null === parentA) break;\n    var parentB = parentA.alternate;\n    if (null === parentB) {\n      b = parentA.return;\n      if (null !== b) {\n        a = b;\n        continue;\n      }\n      break;\n    }\n    if (parentA.child === parentB.child) {\n      for (parentB = parentA.child; parentB; ) {\n        if (parentB === a) return assertIsMounted(parentA), fiber;\n        if (parentB === b) return assertIsMounted(parentA), alternate;\n        parentB = parentB.sibling;\n      }\n      throw Error(formatProdErrorMessage(188));\n    }\n    if (a.return !== b.return) (a = parentA), (b = parentB);\n    else {\n      for (var didFindChild = !1, child$0 = parentA.child; child$0; ) {\n        if (child$0 === a) {\n          didFindChild = !0;\n          a = parentA;\n          b = parentB;\n          break;\n        }\n        if (child$0 === b) {\n          didFindChild = !0;\n          b = parentA;\n          a = parentB;\n          break;\n        }\n        child$0 = child$0.sibling;\n      }\n      if (!didFindChild) {\n        for (child$0 = parentB.child; child$0; ) {\n          if (child$0 === a) {\n            didFindChild = !0;\n            a = parentB;\n            b = parentA;\n            break;\n          }\n          if (child$0 === b) {\n            didFindChild = !0;\n            b = parentB;\n            a = parentA;\n            break;\n          }\n          child$0 = child$0.sibling;\n        }\n        if (!didFindChild) throw Error(formatProdErrorMessage(189));\n      }\n    }\n    if (a.alternate !== b) throw Error(formatProdErrorMessage(190));\n  }\n  if (3 !== a.tag) throw Error(formatProdErrorMessage(188));\n  return a.stateNode.current === a ? fiber : alternate;\n}\nfunction findCurrentHostFiberImpl(node) {\n  var tag = node.tag;\n  if (5 === tag || 26 === tag || 27 === tag || 6 === tag) return node;\n  for (node = node.child; null !== node; ) {\n    tag = findCurrentHostFiberImpl(node);\n    if (null !== tag) return tag;\n    node = node.sibling;\n  }\n  return null;\n}\nvar assign = Object.assign,\n  REACT_LEGACY_ELEMENT_TYPE = Symbol.for(\"react.element\"),\n  REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n  REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n  REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n  REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n  REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n  REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n  REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n  REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n  REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n  REACT_LAZY_TYPE = Symbol.for(\"react.lazy\");\nSymbol.for(\"react.scope\");\nvar REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\");\nSymbol.for(\"react.legacy_hidden\");\nSymbol.for(\"react.tracing_marker\");\nvar REACT_MEMO_CACHE_SENTINEL = Symbol.for(\"react.memo_cache_sentinel\");\nSymbol.for(\"react.view_transition\");\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nfunction getIteratorFn(maybeIterable) {\n  if (null === maybeIterable || \"object\" !== typeof maybeIterable) return null;\n  maybeIterable =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[\"@@iterator\"];\n  return \"function\" === typeof maybeIterable ? maybeIterable : null;\n}\nvar REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\");\nfunction getComponentNameFromType(type) {\n  if (null == type) return null;\n  if (\"function\" === typeof type)\n    return type.$$typeof === REACT_CLIENT_REFERENCE\n      ? null\n      : type.displayName || type.name || null;\n  if (\"string\" === typeof type) return type;\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return \"Fragment\";\n    case REACT_PROFILER_TYPE:\n      return \"Profiler\";\n    case REACT_STRICT_MODE_TYPE:\n      return \"StrictMode\";\n    case REACT_SUSPENSE_TYPE:\n      return \"Suspense\";\n    case REACT_SUSPENSE_LIST_TYPE:\n      return \"SuspenseList\";\n    case REACT_ACTIVITY_TYPE:\n      return \"Activity\";\n  }\n  if (\"object\" === typeof type)\n    switch (type.$$typeof) {\n      case REACT_PORTAL_TYPE:\n        return \"Portal\";\n      case REACT_CONTEXT_TYPE:\n        return type.displayName || \"Context\";\n      case REACT_CONSUMER_TYPE:\n        return (type._context.displayName || \"Context\") + \".Consumer\";\n      case REACT_FORWARD_REF_TYPE:\n        var innerType = type.render;\n        type = type.displayName;\n        type ||\n          ((type = innerType.displayName || innerType.name || \"\"),\n          (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n        return type;\n      case REACT_MEMO_TYPE:\n        return (\n          (innerType = type.displayName || null),\n          null !== innerType\n            ? innerType\n            : getComponentNameFromType(type.type) || \"Memo\"\n        );\n      case REACT_LAZY_TYPE:\n        innerType = type._payload;\n        type = type._init;\n        try {\n          return getComponentNameFromType(type(innerType));\n        } catch (x) {}\n    }\n  return null;\n}\nvar isArrayImpl = Array.isArray,\n  ReactSharedInternals =\n    React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n  ReactDOMSharedInternals =\n    ReactDOM.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n  sharedNotPendingObject = {\n    pending: !1,\n    data: null,\n    method: null,\n    action: null\n  },\n  valueStack = [],\n  index = -1;\nfunction createCursor(defaultValue) {\n  return { current: defaultValue };\n}\nfunction pop(cursor) {\n  0 > index ||\n    ((cursor.current = valueStack[index]), (valueStack[index] = null), index--);\n}\nfunction push(cursor, value) {\n  index++;\n  valueStack[index] = cursor.current;\n  cursor.current = value;\n}\nvar contextStackCursor = createCursor(null),\n  contextFiberStackCursor = createCursor(null),\n  rootInstanceStackCursor = createCursor(null),\n  hostTransitionProviderCursor = createCursor(null);\nfunction pushHostContainer(fiber, nextRootInstance) {\n  push(rootInstanceStackCursor, nextRootInstance);\n  push(contextFiberStackCursor, fiber);\n  push(contextStackCursor, null);\n  switch (nextRootInstance.nodeType) {\n    case 9:\n    case 11:\n      fiber = (fiber = nextRootInstance.documentElement)\n        ? (fiber = fiber.namespaceURI)\n          ? getOwnHostContext(fiber)\n          : 0\n        : 0;\n      break;\n    default:\n      if (\n        ((fiber = nextRootInstance.tagName),\n        (nextRootInstance = nextRootInstance.namespaceURI))\n      )\n        (nextRootInstance = getOwnHostContext(nextRootInstance)),\n          (fiber = getChildHostContextProd(nextRootInstance, fiber));\n      else\n        switch (fiber) {\n          case \"svg\":\n            fiber = 1;\n            break;\n          case \"math\":\n            fiber = 2;\n            break;\n          default:\n            fiber = 0;\n        }\n  }\n  pop(contextStackCursor);\n  push(contextStackCursor, fiber);\n}\nfunction popHostContainer() {\n  pop(contextStackCursor);\n  pop(contextFiberStackCursor);\n  pop(rootInstanceStackCursor);\n}\nfunction pushHostContext(fiber) {\n  null !== fiber.memoizedState && push(hostTransitionProviderCursor, fiber);\n  var context = contextStackCursor.current;\n  var JSCompiler_inline_result = getChildHostContextProd(context, fiber.type);\n  context !== JSCompiler_inline_result &&\n    (push(contextFiberStackCursor, fiber),\n    push(contextStackCursor, JSCompiler_inline_result));\n}\nfunction popHostContext(fiber) {\n  contextFiberStackCursor.current === fiber &&\n    (pop(contextStackCursor), pop(contextFiberStackCursor));\n  hostTransitionProviderCursor.current === fiber &&\n    (pop(hostTransitionProviderCursor),\n    (HostTransitionContext._currentValue = sharedNotPendingObject));\n}\nvar prefix, suffix;\nfunction describeBuiltInComponentFrame(name) {\n  if (void 0 === prefix)\n    try {\n      throw Error();\n    } catch (x) {\n      var match = x.stack.trim().match(/\\n( *(at )?)/);\n      prefix = (match && match[1]) || \"\";\n      suffix =\n        -1 < x.stack.indexOf(\"\\n    at\")\n          ? \" (<anonymous>)\"\n          : -1 < x.stack.indexOf(\"@\")\n            ? \"@unknown:0:0\"\n            : \"\";\n    }\n  return \"\\n\" + prefix + name + suffix;\n}\nvar reentry = !1;\nfunction describeNativeComponentFrame(fn, construct) {\n  if (!fn || reentry) return \"\";\n  reentry = !0;\n  var previousPrepareStackTrace = Error.prepareStackTrace;\n  Error.prepareStackTrace = void 0;\n  try {\n    var RunInRootFrame = {\n      DetermineComponentFrameRoot: function () {\n        try {\n          if (construct) {\n            var Fake = function () {\n              throw Error();\n            };\n            Object.defineProperty(Fake.prototype, \"props\", {\n              set: function () {\n                throw Error();\n              }\n            });\n            if (\"object\" === typeof Reflect && Reflect.construct) {\n              try {\n                Reflect.construct(Fake, []);\n              } catch (x) {\n                var control = x;\n              }\n              Reflect.construct(fn, [], Fake);\n            } else {\n              try {\n                Fake.call();\n              } catch (x$1) {\n                control = x$1;\n              }\n              fn.call(Fake.prototype);\n            }\n          } else {\n            try {\n              throw Error();\n            } catch (x$2) {\n              control = x$2;\n            }\n            (Fake = fn()) &&\n              \"function\" === typeof Fake.catch &&\n              Fake.catch(function () {});\n          }\n        } catch (sample) {\n          if (sample && control && \"string\" === typeof sample.stack)\n            return [sample.stack, control.stack];\n        }\n        return [null, null];\n      }\n    };\n    RunInRootFrame.DetermineComponentFrameRoot.displayName =\n      \"DetermineComponentFrameRoot\";\n    var namePropDescriptor = Object.getOwnPropertyDescriptor(\n      RunInRootFrame.DetermineComponentFrameRoot,\n      \"name\"\n    );\n    namePropDescriptor &&\n      namePropDescriptor.configurable &&\n      Object.defineProperty(\n        RunInRootFrame.DetermineComponentFrameRoot,\n        \"name\",\n        { value: \"DetermineComponentFrameRoot\" }\n      );\n    var _RunInRootFrame$Deter = RunInRootFrame.DetermineComponentFrameRoot(),\n      sampleStack = _RunInRootFrame$Deter[0],\n      controlStack = _RunInRootFrame$Deter[1];\n    if (sampleStack && controlStack) {\n      var sampleLines = sampleStack.split(\"\\n\"),\n        controlLines = controlStack.split(\"\\n\");\n      for (\n        namePropDescriptor = RunInRootFrame = 0;\n        RunInRootFrame < sampleLines.length &&\n        !sampleLines[RunInRootFrame].includes(\"DetermineComponentFrameRoot\");\n\n      )\n        RunInRootFrame++;\n      for (\n        ;\n        namePropDescriptor < controlLines.length &&\n        !controlLines[namePropDescriptor].includes(\n          \"DetermineComponentFrameRoot\"\n        );\n\n      )\n        namePropDescriptor++;\n      if (\n        RunInRootFrame === sampleLines.length ||\n        namePropDescriptor === controlLines.length\n      )\n        for (\n          RunInRootFrame = sampleLines.length - 1,\n            namePropDescriptor = controlLines.length - 1;\n          1 <= RunInRootFrame &&\n          0 <= namePropDescriptor &&\n          sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor];\n\n        )\n          namePropDescriptor--;\n      for (\n        ;\n        1 <= RunInRootFrame && 0 <= namePropDescriptor;\n        RunInRootFrame--, namePropDescriptor--\n      )\n        if (sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor]) {\n          if (1 !== RunInRootFrame || 1 !== namePropDescriptor) {\n            do\n              if (\n                (RunInRootFrame--,\n                namePropDescriptor--,\n                0 > namePropDescriptor ||\n                  sampleLines[RunInRootFrame] !==\n                    controlLines[namePropDescriptor])\n              ) {\n                var frame =\n                  \"\\n\" +\n                  sampleLines[RunInRootFrame].replace(\" at new \", \" at \");\n                fn.displayName &&\n                  frame.includes(\"<anonymous>\") &&\n                  (frame = frame.replace(\"<anonymous>\", fn.displayName));\n                return frame;\n              }\n            while (1 <= RunInRootFrame && 0 <= namePropDescriptor);\n          }\n          break;\n        }\n    }\n  } finally {\n    (reentry = !1), (Error.prepareStackTrace = previousPrepareStackTrace);\n  }\n  return (previousPrepareStackTrace = fn ? fn.displayName || fn.name : \"\")\n    ? describeBuiltInComponentFrame(previousPrepareStackTrace)\n    : \"\";\n}\nfunction describeFiber(fiber, childFiber) {\n  switch (fiber.tag) {\n    case 26:\n    case 27:\n    case 5:\n      return describeBuiltInComponentFrame(fiber.type);\n    case 16:\n      return describeBuiltInComponentFrame(\"Lazy\");\n    case 13:\n      return fiber.child !== childFiber && null !== childFiber\n        ? describeBuiltInComponentFrame(\"Suspense Fallback\")\n        : describeBuiltInComponentFrame(\"Suspense\");\n    case 19:\n      return describeBuiltInComponentFrame(\"SuspenseList\");\n    case 0:\n    case 15:\n      return describeNativeComponentFrame(fiber.type, !1);\n    case 11:\n      return describeNativeComponentFrame(fiber.type.render, !1);\n    case 1:\n      return describeNativeComponentFrame(fiber.type, !0);\n    case 31:\n      return describeBuiltInComponentFrame(\"Activity\");\n    default:\n      return \"\";\n  }\n}\nfunction getStackByFiberInDevAndProd(workInProgress) {\n  try {\n    var info = \"\",\n      previous = null;\n    do\n      (info += describeFiber(workInProgress, previous)),\n        (previous = workInProgress),\n        (workInProgress = workInProgress.return);\n    while (workInProgress);\n    return info;\n  } catch (x) {\n    return \"\\nError generating stack: \" + x.message + \"\\n\" + x.stack;\n  }\n}\nvar hasOwnProperty = Object.prototype.hasOwnProperty,\n  scheduleCallback$3 = Scheduler.unstable_scheduleCallback,\n  cancelCallback$1 = Scheduler.unstable_cancelCallback,\n  shouldYield = Scheduler.unstable_shouldYield,\n  requestPaint = Scheduler.unstable_requestPaint,\n  now = Scheduler.unstable_now,\n  getCurrentPriorityLevel = Scheduler.unstable_getCurrentPriorityLevel,\n  ImmediatePriority = Scheduler.unstable_ImmediatePriority,\n  UserBlockingPriority = Scheduler.unstable_UserBlockingPriority,\n  NormalPriority$1 = Scheduler.unstable_NormalPriority,\n  LowPriority = Scheduler.unstable_LowPriority,\n  IdlePriority = Scheduler.unstable_IdlePriority,\n  log$1 = Scheduler.log,\n  unstable_setDisableYieldValue = Scheduler.unstable_setDisableYieldValue,\n  rendererID = null,\n  injectedHook = null;\nfunction setIsStrictModeForDevtools(newIsStrictMode) {\n  \"function\" === typeof log$1 && unstable_setDisableYieldValue(newIsStrictMode);\n  if (injectedHook && \"function\" === typeof injectedHook.setStrictMode)\n    try {\n      injectedHook.setStrictMode(rendererID, newIsStrictMode);\n    } catch (err) {}\n}\nvar clz32 = Math.clz32 ? Math.clz32 : clz32Fallback,\n  log = Math.log,\n  LN2 = Math.LN2;\nfunction clz32Fallback(x) {\n  x >>>= 0;\n  return 0 === x ? 32 : (31 - ((log(x) / LN2) | 0)) | 0;\n}\nvar nextTransitionUpdateLane = 256,\n  nextTransitionDeferredLane = 262144,\n  nextRetryLane = 4194304;\nfunction getHighestPriorityLanes(lanes) {\n  var pendingSyncLanes = lanes & 42;\n  if (0 !== pendingSyncLanes) return pendingSyncLanes;\n  switch (lanes & -lanes) {\n    case 1:\n      return 1;\n    case 2:\n      return 2;\n    case 4:\n      return 4;\n    case 8:\n      return 8;\n    case 16:\n      return 16;\n    case 32:\n      return 32;\n    case 64:\n      return 64;\n    case 128:\n      return 128;\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n      return lanes & 261888;\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n      return lanes & 3932160;\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      return lanes & 62914560;\n    case 67108864:\n      return 67108864;\n    case 134217728:\n      return 134217728;\n    case 268435456:\n      return 268435456;\n    case 536870912:\n      return 536870912;\n    case 1073741824:\n      return 0;\n    default:\n      return lanes;\n  }\n}\nfunction getNextLanes(root, wipLanes, rootHasPendingCommit) {\n  var pendingLanes = root.pendingLanes;\n  if (0 === pendingLanes) return 0;\n  var nextLanes = 0,\n    suspendedLanes = root.suspendedLanes,\n    pingedLanes = root.pingedLanes;\n  root = root.warmLanes;\n  var nonIdlePendingLanes = pendingLanes & 134217727;\n  0 !== nonIdlePendingLanes\n    ? ((pendingLanes = nonIdlePendingLanes & ~suspendedLanes),\n      0 !== pendingLanes\n        ? (nextLanes = getHighestPriorityLanes(pendingLanes))\n        : ((pingedLanes &= nonIdlePendingLanes),\n          0 !== pingedLanes\n            ? (nextLanes = getHighestPriorityLanes(pingedLanes))\n            : rootHasPendingCommit ||\n              ((rootHasPendingCommit = nonIdlePendingLanes & ~root),\n              0 !== rootHasPendingCommit &&\n                (nextLanes = getHighestPriorityLanes(rootHasPendingCommit)))))\n    : ((nonIdlePendingLanes = pendingLanes & ~suspendedLanes),\n      0 !== nonIdlePendingLanes\n        ? (nextLanes = getHighestPriorityLanes(nonIdlePendingLanes))\n        : 0 !== pingedLanes\n          ? (nextLanes = getHighestPriorityLanes(pingedLanes))\n          : rootHasPendingCommit ||\n            ((rootHasPendingCommit = pendingLanes & ~root),\n            0 !== rootHasPendingCommit &&\n              (nextLanes = getHighestPriorityLanes(rootHasPendingCommit))));\n  return 0 === nextLanes\n    ? 0\n    : 0 !== wipLanes &&\n        wipLanes !== nextLanes &&\n        0 === (wipLanes & suspendedLanes) &&\n        ((suspendedLanes = nextLanes & -nextLanes),\n        (rootHasPendingCommit = wipLanes & -wipLanes),\n        suspendedLanes >= rootHasPendingCommit ||\n          (32 === suspendedLanes && 0 !== (rootHasPendingCommit & 4194048)))\n      ? wipLanes\n      : nextLanes;\n}\nfunction checkIfRootIsPrerendering(root, renderLanes) {\n  return (\n    0 ===\n    (root.pendingLanes &\n      ~(root.suspendedLanes & ~root.pingedLanes) &\n      renderLanes)\n  );\n}\nfunction computeExpirationTime(lane, currentTime) {\n  switch (lane) {\n    case 1:\n    case 2:\n    case 4:\n    case 8:\n    case 64:\n      return currentTime + 250;\n    case 16:\n    case 32:\n    case 128:\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n      return currentTime + 5e3;\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      return -1;\n    case 67108864:\n    case 134217728:\n    case 268435456:\n    case 536870912:\n    case 1073741824:\n      return -1;\n    default:\n      return -1;\n  }\n}\nfunction claimNextRetryLane() {\n  var lane = nextRetryLane;\n  nextRetryLane <<= 1;\n  0 === (nextRetryLane & 62914560) && (nextRetryLane = 4194304);\n  return lane;\n}\nfunction createLaneMap(initial) {\n  for (var laneMap = [], i = 0; 31 > i; i++) laneMap.push(initial);\n  return laneMap;\n}\nfunction markRootUpdated$1(root, updateLane) {\n  root.pendingLanes |= updateLane;\n  268435456 !== updateLane &&\n    ((root.suspendedLanes = 0), (root.pingedLanes = 0), (root.warmLanes = 0));\n}\nfunction markRootFinished(\n  root,\n  finishedLanes,\n  remainingLanes,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes\n) {\n  var previouslyPendingLanes = root.pendingLanes;\n  root.pendingLanes = remainingLanes;\n  root.suspendedLanes = 0;\n  root.pingedLanes = 0;\n  root.warmLanes = 0;\n  root.expiredLanes &= remainingLanes;\n  root.entangledLanes &= remainingLanes;\n  root.errorRecoveryDisabledLanes &= remainingLanes;\n  root.shellSuspendCounter = 0;\n  var entanglements = root.entanglements,\n    expirationTimes = root.expirationTimes,\n    hiddenUpdates = root.hiddenUpdates;\n  for (\n    remainingLanes = previouslyPendingLanes & ~remainingLanes;\n    0 < remainingLanes;\n\n  ) {\n    var index$7 = 31 - clz32(remainingLanes),\n      lane = 1 << index$7;\n    entanglements[index$7] = 0;\n    expirationTimes[index$7] = -1;\n    var hiddenUpdatesForLane = hiddenUpdates[index$7];\n    if (null !== hiddenUpdatesForLane)\n      for (\n        hiddenUpdates[index$7] = null, index$7 = 0;\n        index$7 < hiddenUpdatesForLane.length;\n        index$7++\n      ) {\n        var update = hiddenUpdatesForLane[index$7];\n        null !== update && (update.lane &= -536870913);\n      }\n    remainingLanes &= ~lane;\n  }\n  0 !== spawnedLane && markSpawnedDeferredLane(root, spawnedLane, 0);\n  0 !== suspendedRetryLanes &&\n    0 === updatedLanes &&\n    0 !== root.tag &&\n    (root.suspendedLanes |=\n      suspendedRetryLanes & ~(previouslyPendingLanes & ~finishedLanes));\n}\nfunction markSpawnedDeferredLane(root, spawnedLane, entangledLanes) {\n  root.pendingLanes |= spawnedLane;\n  root.suspendedLanes &= ~spawnedLane;\n  var spawnedLaneIndex = 31 - clz32(spawnedLane);\n  root.entangledLanes |= spawnedLane;\n  root.entanglements[spawnedLaneIndex] =\n    root.entanglements[spawnedLaneIndex] |\n    1073741824 |\n    (entangledLanes & 261930);\n}\nfunction markRootEntangled(root, entangledLanes) {\n  var rootEntangledLanes = (root.entangledLanes |= entangledLanes);\n  for (root = root.entanglements; rootEntangledLanes; ) {\n    var index$8 = 31 - clz32(rootEntangledLanes),\n      lane = 1 << index$8;\n    (lane & entangledLanes) | (root[index$8] & entangledLanes) &&\n      (root[index$8] |= entangledLanes);\n    rootEntangledLanes &= ~lane;\n  }\n}\nfunction getBumpedLaneForHydration(root, renderLanes) {\n  var renderLane = renderLanes & -renderLanes;\n  renderLane =\n    0 !== (renderLane & 42) ? 1 : getBumpedLaneForHydrationByLane(renderLane);\n  return 0 !== (renderLane & (root.suspendedLanes | renderLanes))\n    ? 0\n    : renderLane;\n}\nfunction getBumpedLaneForHydrationByLane(lane) {\n  switch (lane) {\n    case 2:\n      lane = 1;\n      break;\n    case 8:\n      lane = 4;\n      break;\n    case 32:\n      lane = 16;\n      break;\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      lane = 128;\n      break;\n    case 268435456:\n      lane = 134217728;\n      break;\n    default:\n      lane = 0;\n  }\n  return lane;\n}\nfunction lanesToEventPriority(lanes) {\n  lanes &= -lanes;\n  return 2 < lanes\n    ? 8 < lanes\n      ? 0 !== (lanes & 134217727)\n        ? 32\n        : 268435456\n      : 8\n    : 2;\n}\nfunction resolveUpdatePriority() {\n  var updatePriority = ReactDOMSharedInternals.p;\n  if (0 !== updatePriority) return updatePriority;\n  updatePriority = window.event;\n  return void 0 === updatePriority ? 32 : getEventPriority(updatePriority.type);\n}\nfunction runWithPriority(priority, fn) {\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    return (ReactDOMSharedInternals.p = priority), fn();\n  } finally {\n    ReactDOMSharedInternals.p = previousPriority;\n  }\n}\nvar randomKey = Math.random().toString(36).slice(2),\n  internalInstanceKey = \"__reactFiber$\" + randomKey,\n  internalPropsKey = \"__reactProps$\" + randomKey,\n  internalContainerInstanceKey = \"__reactContainer$\" + randomKey,\n  internalEventHandlersKey = \"__reactEvents$\" + randomKey,\n  internalEventHandlerListenersKey = \"__reactListeners$\" + randomKey,\n  internalEventHandlesSetKey = \"__reactHandles$\" + randomKey,\n  internalRootNodeResourcesKey = \"__reactResources$\" + randomKey,\n  internalHoistableMarker = \"__reactMarker$\" + randomKey;\nfunction detachDeletedInstance(node) {\n  delete node[internalInstanceKey];\n  delete node[internalPropsKey];\n  delete node[internalEventHandlersKey];\n  delete node[internalEventHandlerListenersKey];\n  delete node[internalEventHandlesSetKey];\n}\nfunction getClosestInstanceFromNode(targetNode) {\n  var targetInst = targetNode[internalInstanceKey];\n  if (targetInst) return targetInst;\n  for (var parentNode = targetNode.parentNode; parentNode; ) {\n    if (\n      (targetInst =\n        parentNode[internalContainerInstanceKey] ||\n        parentNode[internalInstanceKey])\n    ) {\n      parentNode = targetInst.alternate;\n      if (\n        null !== targetInst.child ||\n        (null !== parentNode && null !== parentNode.child)\n      )\n        for (\n          targetNode = getParentHydrationBoundary(targetNode);\n          null !== targetNode;\n\n        ) {\n          if ((parentNode = targetNode[internalInstanceKey])) return parentNode;\n          targetNode = getParentHydrationBoundary(targetNode);\n        }\n      return targetInst;\n    }\n    targetNode = parentNode;\n    parentNode = targetNode.parentNode;\n  }\n  return null;\n}\nfunction getInstanceFromNode(node) {\n  if (\n    (node = node[internalInstanceKey] || node[internalContainerInstanceKey])\n  ) {\n    var tag = node.tag;\n    if (\n      5 === tag ||\n      6 === tag ||\n      13 === tag ||\n      31 === tag ||\n      26 === tag ||\n      27 === tag ||\n      3 === tag\n    )\n      return node;\n  }\n  return null;\n}\nfunction getNodeFromInstance(inst) {\n  var tag = inst.tag;\n  if (5 === tag || 26 === tag || 27 === tag || 6 === tag) return inst.stateNode;\n  throw Error(formatProdErrorMessage(33));\n}\nfunction getResourcesFromRoot(root) {\n  var resources = root[internalRootNodeResourcesKey];\n  resources ||\n    (resources = root[internalRootNodeResourcesKey] =\n      { hoistableStyles: new Map(), hoistableScripts: new Map() });\n  return resources;\n}\nfunction markNodeAsHoistable(node) {\n  node[internalHoistableMarker] = !0;\n}\nvar allNativeEvents = new Set(),\n  registrationNameDependencies = {};\nfunction registerTwoPhaseEvent(registrationName, dependencies) {\n  registerDirectEvent(registrationName, dependencies);\n  registerDirectEvent(registrationName + \"Capture\", dependencies);\n}\nfunction registerDirectEvent(registrationName, dependencies) {\n  registrationNameDependencies[registrationName] = dependencies;\n  for (\n    registrationName = 0;\n    registrationName < dependencies.length;\n    registrationName++\n  )\n    allNativeEvents.add(dependencies[registrationName]);\n}\nvar VALID_ATTRIBUTE_NAME_REGEX = RegExp(\n    \"^[:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD][:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\\\\-.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]*$\"\n  ),\n  illegalAttributeNameCache = {},\n  validatedAttributeNameCache = {};\nfunction isAttributeNameSafe(attributeName) {\n  if (hasOwnProperty.call(validatedAttributeNameCache, attributeName))\n    return !0;\n  if (hasOwnProperty.call(illegalAttributeNameCache, attributeName)) return !1;\n  if (VALID_ATTRIBUTE_NAME_REGEX.test(attributeName))\n    return (validatedAttributeNameCache[attributeName] = !0);\n  illegalAttributeNameCache[attributeName] = !0;\n  return !1;\n}\nfunction setValueForAttribute(node, name, value) {\n  if (isAttributeNameSafe(name))\n    if (null === value) node.removeAttribute(name);\n    else {\n      switch (typeof value) {\n        case \"undefined\":\n        case \"function\":\n        case \"symbol\":\n          node.removeAttribute(name);\n          return;\n        case \"boolean\":\n          var prefix$10 = name.toLowerCase().slice(0, 5);\n          if (\"data-\" !== prefix$10 && \"aria-\" !== prefix$10) {\n            node.removeAttribute(name);\n            return;\n          }\n      }\n      node.setAttribute(name, \"\" + value);\n    }\n}\nfunction setValueForKnownAttribute(node, name, value) {\n  if (null === value) node.removeAttribute(name);\n  else {\n    switch (typeof value) {\n      case \"undefined\":\n      case \"function\":\n      case \"symbol\":\n      case \"boolean\":\n        node.removeAttribute(name);\n        return;\n    }\n    node.setAttribute(name, \"\" + value);\n  }\n}\nfunction setValueForNamespacedAttribute(node, namespace, name, value) {\n  if (null === value) node.removeAttribute(name);\n  else {\n    switch (typeof value) {\n      case \"undefined\":\n      case \"function\":\n      case \"symbol\":\n      case \"boolean\":\n        node.removeAttribute(name);\n        return;\n    }\n    node.setAttributeNS(namespace, name, \"\" + value);\n  }\n}\nfunction getToStringValue(value) {\n  switch (typeof value) {\n    case \"bigint\":\n    case \"boolean\":\n    case \"number\":\n    case \"string\":\n    case \"undefined\":\n      return value;\n    case \"object\":\n      return value;\n    default:\n      return \"\";\n  }\n}\nfunction isCheckable(elem) {\n  var type = elem.type;\n  return (\n    (elem = elem.nodeName) &&\n    \"input\" === elem.toLowerCase() &&\n    (\"checkbox\" === type || \"radio\" === type)\n  );\n}\nfunction trackValueOnNode(node, valueField, currentValue) {\n  var descriptor = Object.getOwnPropertyDescriptor(\n    node.constructor.prototype,\n    valueField\n  );\n  if (\n    !node.hasOwnProperty(valueField) &&\n    \"undefined\" !== typeof descriptor &&\n    \"function\" === typeof descriptor.get &&\n    \"function\" === typeof descriptor.set\n  ) {\n    var get = descriptor.get,\n      set = descriptor.set;\n    Object.defineProperty(node, valueField, {\n      configurable: !0,\n      get: function () {\n        return get.call(this);\n      },\n      set: function (value) {\n        currentValue = \"\" + value;\n        set.call(this, value);\n      }\n    });\n    Object.defineProperty(node, valueField, {\n      enumerable: descriptor.enumerable\n    });\n    return {\n      getValue: function () {\n        return currentValue;\n      },\n      setValue: function (value) {\n        currentValue = \"\" + value;\n      },\n      stopTracking: function () {\n        node._valueTracker = null;\n        delete node[valueField];\n      }\n    };\n  }\n}\nfunction track(node) {\n  if (!node._valueTracker) {\n    var valueField = isCheckable(node) ? \"checked\" : \"value\";\n    node._valueTracker = trackValueOnNode(\n      node,\n      valueField,\n      \"\" + node[valueField]\n    );\n  }\n}\nfunction updateValueIfChanged(node) {\n  if (!node) return !1;\n  var tracker = node._valueTracker;\n  if (!tracker) return !0;\n  var lastValue = tracker.getValue();\n  var value = \"\";\n  node &&\n    (value = isCheckable(node)\n      ? node.checked\n        ? \"true\"\n        : \"false\"\n      : node.value);\n  node = value;\n  return node !== lastValue ? (tracker.setValue(node), !0) : !1;\n}\nfunction getActiveElement(doc) {\n  doc = doc || (\"undefined\" !== typeof document ? document : void 0);\n  if (\"undefined\" === typeof doc) return null;\n  try {\n    return doc.activeElement || doc.body;\n  } catch (e) {\n    return doc.body;\n  }\n}\nvar escapeSelectorAttributeValueInsideDoubleQuotesRegex = /[\\n\"\\\\]/g;\nfunction escapeSelectorAttributeValueInsideDoubleQuotes(value) {\n  return value.replace(\n    escapeSelectorAttributeValueInsideDoubleQuotesRegex,\n    function (ch) {\n      return \"\\\\\" + ch.charCodeAt(0).toString(16) + \" \";\n    }\n  );\n}\nfunction updateInput(\n  element,\n  value,\n  defaultValue,\n  lastDefaultValue,\n  checked,\n  defaultChecked,\n  type,\n  name\n) {\n  element.name = \"\";\n  null != type &&\n  \"function\" !== typeof type &&\n  \"symbol\" !== typeof type &&\n  \"boolean\" !== typeof type\n    ? (element.type = type)\n    : element.removeAttribute(\"type\");\n  if (null != value)\n    if (\"number\" === type) {\n      if ((0 === value && \"\" === element.value) || element.value != value)\n        element.value = \"\" + getToStringValue(value);\n    } else\n      element.value !== \"\" + getToStringValue(value) &&\n        (element.value = \"\" + getToStringValue(value));\n  else\n    (\"submit\" !== type && \"reset\" !== type) || element.removeAttribute(\"value\");\n  null != value\n    ? setDefaultValue(element, type, getToStringValue(value))\n    : null != defaultValue\n      ? setDefaultValue(element, type, getToStringValue(defaultValue))\n      : null != lastDefaultValue && element.removeAttribute(\"value\");\n  null == checked &&\n    null != defaultChecked &&\n    (element.defaultChecked = !!defaultChecked);\n  null != checked &&\n    (element.checked =\n      checked && \"function\" !== typeof checked && \"symbol\" !== typeof checked);\n  null != name &&\n  \"function\" !== typeof name &&\n  \"symbol\" !== typeof name &&\n  \"boolean\" !== typeof name\n    ? (element.name = \"\" + getToStringValue(name))\n    : element.removeAttribute(\"name\");\n}\nfunction initInput(\n  element,\n  value,\n  defaultValue,\n  checked,\n  defaultChecked,\n  type,\n  name,\n  isHydrating\n) {\n  null != type &&\n    \"function\" !== typeof type &&\n    \"symbol\" !== typeof type &&\n    \"boolean\" !== typeof type &&\n    (element.type = type);\n  if (null != value || null != defaultValue) {\n    if (\n      !(\n        (\"submit\" !== type && \"reset\" !== type) ||\n        (void 0 !== value && null !== value)\n      )\n    ) {\n      track(element);\n      return;\n    }\n    defaultValue =\n      null != defaultValue ? \"\" + getToStringValue(defaultValue) : \"\";\n    value = null != value ? \"\" + getToStringValue(value) : defaultValue;\n    isHydrating || value === element.value || (element.value = value);\n    element.defaultValue = value;\n  }\n  checked = null != checked ? checked : defaultChecked;\n  checked =\n    \"function\" !== typeof checked && \"symbol\" !== typeof checked && !!checked;\n  element.checked = isHydrating ? element.checked : !!checked;\n  element.defaultChecked = !!checked;\n  null != name &&\n    \"function\" !== typeof name &&\n    \"symbol\" !== typeof name &&\n    \"boolean\" !== typeof name &&\n    (element.name = name);\n  track(element);\n}\nfunction setDefaultValue(node, type, value) {\n  (\"number\" === type && getActiveElement(node.ownerDocument) === node) ||\n    node.defaultValue === \"\" + value ||\n    (node.defaultValue = \"\" + value);\n}\nfunction updateOptions(node, multiple, propValue, setDefaultSelected) {\n  node = node.options;\n  if (multiple) {\n    multiple = {};\n    for (var i = 0; i < propValue.length; i++)\n      multiple[\"$\" + propValue[i]] = !0;\n    for (propValue = 0; propValue < node.length; propValue++)\n      (i = multiple.hasOwnProperty(\"$\" + node[propValue].value)),\n        node[propValue].selected !== i && (node[propValue].selected = i),\n        i && setDefaultSelected && (node[propValue].defaultSelected = !0);\n  } else {\n    propValue = \"\" + getToStringValue(propValue);\n    multiple = null;\n    for (i = 0; i < node.length; i++) {\n      if (node[i].value === propValue) {\n        node[i].selected = !0;\n        setDefaultSelected && (node[i].defaultSelected = !0);\n        return;\n      }\n      null !== multiple || node[i].disabled || (multiple = node[i]);\n    }\n    null !== multiple && (multiple.selected = !0);\n  }\n}\nfunction updateTextarea(element, value, defaultValue) {\n  if (\n    null != value &&\n    ((value = \"\" + getToStringValue(value)),\n    value !== element.value && (element.value = value),\n    null == defaultValue)\n  ) {\n    element.defaultValue !== value && (element.defaultValue = value);\n    return;\n  }\n  element.defaultValue =\n    null != defaultValue ? \"\" + getToStringValue(defaultValue) : \"\";\n}\nfunction initTextarea(element, value, defaultValue, children) {\n  if (null == value) {\n    if (null != children) {\n      if (null != defaultValue) throw Error(formatProdErrorMessage(92));\n      if (isArrayImpl(children)) {\n        if (1 < children.length) throw Error(formatProdErrorMessage(93));\n        children = children[0];\n      }\n      defaultValue = children;\n    }\n    null == defaultValue && (defaultValue = \"\");\n    value = defaultValue;\n  }\n  defaultValue = getToStringValue(value);\n  element.defaultValue = defaultValue;\n  children = element.textContent;\n  children === defaultValue &&\n    \"\" !== children &&\n    null !== children &&\n    (element.value = children);\n  track(element);\n}\nfunction setTextContent(node, text) {\n  if (text) {\n    var firstChild = node.firstChild;\n    if (\n      firstChild &&\n      firstChild === node.lastChild &&\n      3 === firstChild.nodeType\n    ) {\n      firstChild.nodeValue = text;\n      return;\n    }\n  }\n  node.textContent = text;\n}\nvar unitlessNumbers = new Set(\n  \"animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp\".split(\n    \" \"\n  )\n);\nfunction setValueForStyle(style, styleName, value) {\n  var isCustomProperty = 0 === styleName.indexOf(\"--\");\n  null == value || \"boolean\" === typeof value || \"\" === value\n    ? isCustomProperty\n      ? style.setProperty(styleName, \"\")\n      : \"float\" === styleName\n        ? (style.cssFloat = \"\")\n        : (style[styleName] = \"\")\n    : isCustomProperty\n      ? style.setProperty(styleName, value)\n      : \"number\" !== typeof value ||\n          0 === value ||\n          unitlessNumbers.has(styleName)\n        ? \"float\" === styleName\n          ? (style.cssFloat = value)\n          : (style[styleName] = (\"\" + value).trim())\n        : (style[styleName] = value + \"px\");\n}\nfunction setValueForStyles(node, styles, prevStyles) {\n  if (null != styles && \"object\" !== typeof styles)\n    throw Error(formatProdErrorMessage(62));\n  node = node.style;\n  if (null != prevStyles) {\n    for (var styleName in prevStyles)\n      !prevStyles.hasOwnProperty(styleName) ||\n        (null != styles && styles.hasOwnProperty(styleName)) ||\n        (0 === styleName.indexOf(\"--\")\n          ? node.setProperty(styleName, \"\")\n          : \"float\" === styleName\n            ? (node.cssFloat = \"\")\n            : (node[styleName] = \"\"));\n    for (var styleName$16 in styles)\n      (styleName = styles[styleName$16]),\n        styles.hasOwnProperty(styleName$16) &&\n          prevStyles[styleName$16] !== styleName &&\n          setValueForStyle(node, styleName$16, styleName);\n  } else\n    for (var styleName$17 in styles)\n      styles.hasOwnProperty(styleName$17) &&\n        setValueForStyle(node, styleName$17, styles[styleName$17]);\n}\nfunction isCustomElement(tagName) {\n  if (-1 === tagName.indexOf(\"-\")) return !1;\n  switch (tagName) {\n    case \"annotation-xml\":\n    case \"color-profile\":\n    case \"font-face\":\n    case \"font-face-src\":\n    case \"font-face-uri\":\n    case \"font-face-format\":\n    case \"font-face-name\":\n    case \"missing-glyph\":\n      return !1;\n    default:\n      return !0;\n  }\n}\nvar aliases = new Map([\n    [\"acceptCharset\", \"accept-charset\"],\n    [\"htmlFor\", \"for\"],\n    [\"httpEquiv\", \"http-equiv\"],\n    [\"crossOrigin\", \"crossorigin\"],\n    [\"accentHeight\", \"accent-height\"],\n    [\"alignmentBaseline\", \"alignment-baseline\"],\n    [\"arabicForm\", \"arabic-form\"],\n    [\"baselineShift\", \"baseline-shift\"],\n    [\"capHeight\", \"cap-height\"],\n    [\"clipPath\", \"clip-path\"],\n    [\"clipRule\", \"clip-rule\"],\n    [\"colorInterpolation\", \"color-interpolation\"],\n    [\"colorInterpolationFilters\", \"color-interpolation-filters\"],\n    [\"colorProfile\", \"color-profile\"],\n    [\"colorRendering\", \"color-rendering\"],\n    [\"dominantBaseline\", \"dominant-baseline\"],\n    [\"enableBackground\", \"enable-background\"],\n    [\"fillOpacity\", \"fill-opacity\"],\n    [\"fillRule\", \"fill-rule\"],\n    [\"floodColor\", \"flood-color\"],\n    [\"floodOpacity\", \"flood-opacity\"],\n    [\"fontFamily\", \"font-family\"],\n    [\"fontSize\", \"font-size\"],\n    [\"fontSizeAdjust\", \"font-size-adjust\"],\n    [\"fontStretch\", \"font-stretch\"],\n    [\"fontStyle\", \"font-style\"],\n    [\"fontVariant\", \"font-variant\"],\n    [\"fontWeight\", \"font-weight\"],\n    [\"glyphName\", \"glyph-name\"],\n    [\"glyphOrientationHorizontal\", \"glyph-orientation-horizontal\"],\n    [\"glyphOrientationVertical\", \"glyph-orientation-vertical\"],\n    [\"horizAdvX\", \"horiz-adv-x\"],\n    [\"horizOriginX\", \"horiz-origin-x\"],\n    [\"imageRendering\", \"image-rendering\"],\n    [\"letterSpacing\", \"letter-spacing\"],\n    [\"lightingColor\", \"lighting-color\"],\n    [\"markerEnd\", \"marker-end\"],\n    [\"markerMid\", \"marker-mid\"],\n    [\"markerStart\", \"marker-start\"],\n    [\"overlinePosition\", \"overline-position\"],\n    [\"overlineThickness\", \"overline-thickness\"],\n    [\"paintOrder\", \"paint-order\"],\n    [\"panose-1\", \"panose-1\"],\n    [\"pointerEvents\", \"pointer-events\"],\n    [\"renderingIntent\", \"rendering-intent\"],\n    [\"shapeRendering\", \"shape-rendering\"],\n    [\"stopColor\", \"stop-color\"],\n    [\"stopOpacity\", \"stop-opacity\"],\n    [\"strikethroughPosition\", \"strikethrough-position\"],\n    [\"strikethroughThickness\", \"strikethrough-thickness\"],\n    [\"strokeDasharray\", \"stroke-dasharray\"],\n    [\"strokeDashoffset\", \"stroke-dashoffset\"],\n    [\"strokeLinecap\", \"stroke-linecap\"],\n    [\"strokeLinejoin\", \"stroke-linejoin\"],\n    [\"strokeMiterlimit\", \"stroke-miterlimit\"],\n    [\"strokeOpacity\", \"stroke-opacity\"],\n    [\"strokeWidth\", \"stroke-width\"],\n    [\"textAnchor\", \"text-anchor\"],\n    [\"textDecoration\", \"text-decoration\"],\n    [\"textRendering\", \"text-rendering\"],\n    [\"transformOrigin\", \"transform-origin\"],\n    [\"underlinePosition\", \"underline-position\"],\n    [\"underlineThickness\", \"underline-thickness\"],\n    [\"unicodeBidi\", \"unicode-bidi\"],\n    [\"unicodeRange\", \"unicode-range\"],\n    [\"unitsPerEm\", \"units-per-em\"],\n    [\"vAlphabetic\", \"v-alphabetic\"],\n    [\"vHanging\", \"v-hanging\"],\n    [\"vIdeographic\", \"v-ideographic\"],\n    [\"vMathematical\", \"v-mathematical\"],\n    [\"vectorEffect\", \"vector-effect\"],\n    [\"vertAdvY\", \"vert-adv-y\"],\n    [\"vertOriginX\", \"vert-origin-x\"],\n    [\"vertOriginY\", \"vert-origin-y\"],\n    [\"wordSpacing\", \"word-spacing\"],\n    [\"writingMode\", \"writing-mode\"],\n    [\"xmlnsXlink\", \"xmlns:xlink\"],\n    [\"xHeight\", \"x-height\"]\n  ]),\n  isJavaScriptProtocol =\n    /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*:/i;\nfunction sanitizeURL(url) {\n  return isJavaScriptProtocol.test(\"\" + url)\n    ? \"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')\"\n    : url;\n}\nfunction noop$1() {}\nvar currentReplayingEvent = null;\nfunction getEventTarget(nativeEvent) {\n  nativeEvent = nativeEvent.target || nativeEvent.srcElement || window;\n  nativeEvent.correspondingUseElement &&\n    (nativeEvent = nativeEvent.correspondingUseElement);\n  return 3 === nativeEvent.nodeType ? nativeEvent.parentNode : nativeEvent;\n}\nvar restoreTarget = null,\n  restoreQueue = null;\nfunction restoreStateOfTarget(target) {\n  var internalInstance = getInstanceFromNode(target);\n  if (internalInstance && (target = internalInstance.stateNode)) {\n    var props = target[internalPropsKey] || null;\n    a: switch (((target = internalInstance.stateNode), internalInstance.type)) {\n      case \"input\":\n        updateInput(\n          target,\n          props.value,\n          props.defaultValue,\n          props.defaultValue,\n          props.checked,\n          props.defaultChecked,\n          props.type,\n          props.name\n        );\n        internalInstance = props.name;\n        if (\"radio\" === props.type && null != internalInstance) {\n          for (props = target; props.parentNode; ) props = props.parentNode;\n          props = props.querySelectorAll(\n            'input[name=\"' +\n              escapeSelectorAttributeValueInsideDoubleQuotes(\n                \"\" + internalInstance\n              ) +\n              '\"][type=\"radio\"]'\n          );\n          for (\n            internalInstance = 0;\n            internalInstance < props.length;\n            internalInstance++\n          ) {\n            var otherNode = props[internalInstance];\n            if (otherNode !== target && otherNode.form === target.form) {\n              var otherProps = otherNode[internalPropsKey] || null;\n              if (!otherProps) throw Error(formatProdErrorMessage(90));\n              updateInput(\n                otherNode,\n                otherProps.value,\n                otherProps.defaultValue,\n                otherProps.defaultValue,\n                otherProps.checked,\n                otherProps.defaultChecked,\n                otherProps.type,\n                otherProps.name\n              );\n            }\n          }\n          for (\n            internalInstance = 0;\n            internalInstance < props.length;\n            internalInstance++\n          )\n            (otherNode = props[internalInstance]),\n              otherNode.form === target.form && updateValueIfChanged(otherNode);\n        }\n        break a;\n      case \"textarea\":\n        updateTextarea(target, props.value, props.defaultValue);\n        break a;\n      case \"select\":\n        (internalInstance = props.value),\n          null != internalInstance &&\n            updateOptions(target, !!props.multiple, internalInstance, !1);\n    }\n  }\n}\nvar isInsideEventHandler = !1;\nfunction batchedUpdates$1(fn, a, b) {\n  if (isInsideEventHandler) return fn(a, b);\n  isInsideEventHandler = !0;\n  try {\n    var JSCompiler_inline_result = fn(a);\n    return JSCompiler_inline_result;\n  } finally {\n    if (\n      ((isInsideEventHandler = !1),\n      null !== restoreTarget || null !== restoreQueue)\n    )\n      if (\n        (flushSyncWork$1(),\n        restoreTarget &&\n          ((a = restoreTarget),\n          (fn = restoreQueue),\n          (restoreQueue = restoreTarget = null),\n          restoreStateOfTarget(a),\n          fn))\n      )\n        for (a = 0; a < fn.length; a++) restoreStateOfTarget(fn[a]);\n  }\n}\nfunction getListener(inst, registrationName) {\n  var stateNode = inst.stateNode;\n  if (null === stateNode) return null;\n  var props = stateNode[internalPropsKey] || null;\n  if (null === props) return null;\n  stateNode = props[registrationName];\n  a: switch (registrationName) {\n    case \"onClick\":\n    case \"onClickCapture\":\n    case \"onDoubleClick\":\n    case \"onDoubleClickCapture\":\n    case \"onMouseDown\":\n    case \"onMouseDownCapture\":\n    case \"onMouseMove\":\n    case \"onMouseMoveCapture\":\n    case \"onMouseUp\":\n    case \"onMouseUpCapture\":\n    case \"onMouseEnter\":\n      (props = !props.disabled) ||\n        ((inst = inst.type),\n        (props = !(\n          \"button\" === inst ||\n          \"input\" === inst ||\n          \"select\" === inst ||\n          \"textarea\" === inst\n        )));\n      inst = !props;\n      break a;\n    default:\n      inst = !1;\n  }\n  if (inst) return null;\n  if (stateNode && \"function\" !== typeof stateNode)\n    throw Error(\n      formatProdErrorMessage(231, registrationName, typeof stateNode)\n    );\n  return stateNode;\n}\nvar canUseDOM = !(\n    \"undefined\" === typeof window ||\n    \"undefined\" === typeof window.document ||\n    \"undefined\" === typeof window.document.createElement\n  ),\n  passiveBrowserEventsSupported = !1;\nif (canUseDOM)\n  try {\n    var options = {};\n    Object.defineProperty(options, \"passive\", {\n      get: function () {\n        passiveBrowserEventsSupported = !0;\n      }\n    });\n    window.addEventListener(\"test\", options, options);\n    window.removeEventListener(\"test\", options, options);\n  } catch (e) {\n    passiveBrowserEventsSupported = !1;\n  }\nvar root = null,\n  startText = null,\n  fallbackText = null;\nfunction getData() {\n  if (fallbackText) return fallbackText;\n  var start,\n    startValue = startText,\n    startLength = startValue.length,\n    end,\n    endValue = \"value\" in root ? root.value : root.textContent,\n    endLength = endValue.length;\n  for (\n    start = 0;\n    start < startLength && startValue[start] === endValue[start];\n    start++\n  );\n  var minEnd = startLength - start;\n  for (\n    end = 1;\n    end <= minEnd &&\n    startValue[startLength - end] === endValue[endLength - end];\n    end++\n  );\n  return (fallbackText = endValue.slice(start, 1 < end ? 1 - end : void 0));\n}\nfunction getEventCharCode(nativeEvent) {\n  var keyCode = nativeEvent.keyCode;\n  \"charCode\" in nativeEvent\n    ? ((nativeEvent = nativeEvent.charCode),\n      0 === nativeEvent && 13 === keyCode && (nativeEvent = 13))\n    : (nativeEvent = keyCode);\n  10 === nativeEvent && (nativeEvent = 13);\n  return 32 <= nativeEvent || 13 === nativeEvent ? nativeEvent : 0;\n}\nfunction functionThatReturnsTrue() {\n  return !0;\n}\nfunction functionThatReturnsFalse() {\n  return !1;\n}\nfunction createSyntheticEvent(Interface) {\n  function SyntheticBaseEvent(\n    reactName,\n    reactEventType,\n    targetInst,\n    nativeEvent,\n    nativeEventTarget\n  ) {\n    this._reactName = reactName;\n    this._targetInst = targetInst;\n    this.type = reactEventType;\n    this.nativeEvent = nativeEvent;\n    this.target = nativeEventTarget;\n    this.currentTarget = null;\n    for (var propName in Interface)\n      Interface.hasOwnProperty(propName) &&\n        ((reactName = Interface[propName]),\n        (this[propName] = reactName\n          ? reactName(nativeEvent)\n          : nativeEvent[propName]));\n    this.isDefaultPrevented = (\n      null != nativeEvent.defaultPrevented\n        ? nativeEvent.defaultPrevented\n        : !1 === nativeEvent.returnValue\n    )\n      ? functionThatReturnsTrue\n      : functionThatReturnsFalse;\n    this.isPropagationStopped = functionThatReturnsFalse;\n    return this;\n  }\n  assign(SyntheticBaseEvent.prototype, {\n    preventDefault: function () {\n      this.defaultPrevented = !0;\n      var event = this.nativeEvent;\n      event &&\n        (event.preventDefault\n          ? event.preventDefault()\n          : \"unknown\" !== typeof event.returnValue && (event.returnValue = !1),\n        (this.isDefaultPrevented = functionThatReturnsTrue));\n    },\n    stopPropagation: function () {\n      var event = this.nativeEvent;\n      event &&\n        (event.stopPropagation\n          ? event.stopPropagation()\n          : \"unknown\" !== typeof event.cancelBubble &&\n            (event.cancelBubble = !0),\n        (this.isPropagationStopped = functionThatReturnsTrue));\n    },\n    persist: function () {},\n    isPersistent: functionThatReturnsTrue\n  });\n  return SyntheticBaseEvent;\n}\nvar EventInterface = {\n    eventPhase: 0,\n    bubbles: 0,\n    cancelable: 0,\n    timeStamp: function (event) {\n      return event.timeStamp || Date.now();\n    },\n    defaultPrevented: 0,\n    isTrusted: 0\n  },\n  SyntheticEvent = createSyntheticEvent(EventInterface),\n  UIEventInterface = assign({}, EventInterface, { view: 0, detail: 0 }),\n  SyntheticUIEvent = createSyntheticEvent(UIEventInterface),\n  lastMovementX,\n  lastMovementY,\n  lastMouseEvent,\n  MouseEventInterface = assign({}, UIEventInterface, {\n    screenX: 0,\n    screenY: 0,\n    clientX: 0,\n    clientY: 0,\n    pageX: 0,\n    pageY: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    altKey: 0,\n    metaKey: 0,\n    getModifierState: getEventModifierState,\n    button: 0,\n    buttons: 0,\n    relatedTarget: function (event) {\n      return void 0 === event.relatedTarget\n        ? event.fromElement === event.srcElement\n          ? event.toElement\n          : event.fromElement\n        : event.relatedTarget;\n    },\n    movementX: function (event) {\n      if (\"movementX\" in event) return event.movementX;\n      event !== lastMouseEvent &&\n        (lastMouseEvent && \"mousemove\" === event.type\n          ? ((lastMovementX = event.screenX - lastMouseEvent.screenX),\n            (lastMovementY = event.screenY - lastMouseEvent.screenY))\n          : (lastMovementY = lastMovementX = 0),\n        (lastMouseEvent = event));\n      return lastMovementX;\n    },\n    movementY: function (event) {\n      return \"movementY\" in event ? event.movementY : lastMovementY;\n    }\n  }),\n  SyntheticMouseEvent = createSyntheticEvent(MouseEventInterface),\n  DragEventInterface = assign({}, MouseEventInterface, { dataTransfer: 0 }),\n  SyntheticDragEvent = createSyntheticEvent(DragEventInterface),\n  FocusEventInterface = assign({}, UIEventInterface, { relatedTarget: 0 }),\n  SyntheticFocusEvent = createSyntheticEvent(FocusEventInterface),\n  AnimationEventInterface = assign({}, EventInterface, {\n    animationName: 0,\n    elapsedTime: 0,\n    pseudoElement: 0\n  }),\n  SyntheticAnimationEvent = createSyntheticEvent(AnimationEventInterface),\n  ClipboardEventInterface = assign({}, EventInterface, {\n    clipboardData: function (event) {\n      return \"clipboardData\" in event\n        ? event.clipboardData\n        : window.clipboardData;\n    }\n  }),\n  SyntheticClipboardEvent = createSyntheticEvent(ClipboardEventInterface),\n  CompositionEventInterface = assign({}, EventInterface, { data: 0 }),\n  SyntheticCompositionEvent = createSyntheticEvent(CompositionEventInterface),\n  normalizeKey = {\n    Esc: \"Escape\",\n    Spacebar: \" \",\n    Left: \"ArrowLeft\",\n    Up: \"ArrowUp\",\n    Right: \"ArrowRight\",\n    Down: \"ArrowDown\",\n    Del: \"Delete\",\n    Win: \"OS\",\n    Menu: \"ContextMenu\",\n    Apps: \"ContextMenu\",\n    Scroll: \"ScrollLock\",\n    MozPrintableKey: \"Unidentified\"\n  },\n  translateToKey = {\n    8: \"Backspace\",\n    9: \"Tab\",\n    12: \"Clear\",\n    13: \"Enter\",\n    16: \"Shift\",\n    17: \"Control\",\n    18: \"Alt\",\n    19: \"Pause\",\n    20: \"CapsLock\",\n    27: \"Escape\",\n    32: \" \",\n    33: \"PageUp\",\n    34: \"PageDown\",\n    35: \"End\",\n    36: \"Home\",\n    37: \"ArrowLeft\",\n    38: \"ArrowUp\",\n    39: \"ArrowRight\",\n    40: \"ArrowDown\",\n    45: \"Insert\",\n    46: \"Delete\",\n    112: \"F1\",\n    113: \"F2\",\n    114: \"F3\",\n    115: \"F4\",\n    116: \"F5\",\n    117: \"F6\",\n    118: \"F7\",\n    119: \"F8\",\n    120: \"F9\",\n    121: \"F10\",\n    122: \"F11\",\n    123: \"F12\",\n    144: \"NumLock\",\n    145: \"ScrollLock\",\n    224: \"Meta\"\n  },\n  modifierKeyToProp = {\n    Alt: \"altKey\",\n    Control: \"ctrlKey\",\n    Meta: \"metaKey\",\n    Shift: \"shiftKey\"\n  };\nfunction modifierStateGetter(keyArg) {\n  var nativeEvent = this.nativeEvent;\n  return nativeEvent.getModifierState\n    ? nativeEvent.getModifierState(keyArg)\n    : (keyArg = modifierKeyToProp[keyArg])\n      ? !!nativeEvent[keyArg]\n      : !1;\n}\nfunction getEventModifierState() {\n  return modifierStateGetter;\n}\nvar KeyboardEventInterface = assign({}, UIEventInterface, {\n    key: function (nativeEvent) {\n      if (nativeEvent.key) {\n        var key = normalizeKey[nativeEvent.key] || nativeEvent.key;\n        if (\"Unidentified\" !== key) return key;\n      }\n      return \"keypress\" === nativeEvent.type\n        ? ((nativeEvent = getEventCharCode(nativeEvent)),\n          13 === nativeEvent ? \"Enter\" : String.fromCharCode(nativeEvent))\n        : \"keydown\" === nativeEvent.type || \"keyup\" === nativeEvent.type\n          ? translateToKey[nativeEvent.keyCode] || \"Unidentified\"\n          : \"\";\n    },\n    code: 0,\n    location: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    altKey: 0,\n    metaKey: 0,\n    repeat: 0,\n    locale: 0,\n    getModifierState: getEventModifierState,\n    charCode: function (event) {\n      return \"keypress\" === event.type ? getEventCharCode(event) : 0;\n    },\n    keyCode: function (event) {\n      return \"keydown\" === event.type || \"keyup\" === event.type\n        ? event.keyCode\n        : 0;\n    },\n    which: function (event) {\n      return \"keypress\" === event.type\n        ? getEventCharCode(event)\n        : \"keydown\" === event.type || \"keyup\" === event.type\n          ? event.keyCode\n          : 0;\n    }\n  }),\n  SyntheticKeyboardEvent = createSyntheticEvent(KeyboardEventInterface),\n  PointerEventInterface = assign({}, MouseEventInterface, {\n    pointerId: 0,\n    width: 0,\n    height: 0,\n    pressure: 0,\n    tangentialPressure: 0,\n    tiltX: 0,\n    tiltY: 0,\n    twist: 0,\n    pointerType: 0,\n    isPrimary: 0\n  }),\n  SyntheticPointerEvent = createSyntheticEvent(PointerEventInterface),\n  TouchEventInterface = assign({}, UIEventInterface, {\n    touches: 0,\n    targetTouches: 0,\n    changedTouches: 0,\n    altKey: 0,\n    metaKey: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    getModifierState: getEventModifierState\n  }),\n  SyntheticTouchEvent = createSyntheticEvent(TouchEventInterface),\n  TransitionEventInterface = assign({}, EventInterface, {\n    propertyName: 0,\n    elapsedTime: 0,\n    pseudoElement: 0\n  }),\n  SyntheticTransitionEvent = createSyntheticEvent(TransitionEventInterface),\n  WheelEventInterface = assign({}, MouseEventInterface, {\n    deltaX: function (event) {\n      return \"deltaX\" in event\n        ? event.deltaX\n        : \"wheelDeltaX\" in event\n          ? -event.wheelDeltaX\n          : 0;\n    },\n    deltaY: function (event) {\n      return \"deltaY\" in event\n        ? event.deltaY\n        : \"wheelDeltaY\" in event\n          ? -event.wheelDeltaY\n          : \"wheelDelta\" in event\n            ? -event.wheelDelta\n            : 0;\n    },\n    deltaZ: 0,\n    deltaMode: 0\n  }),\n  SyntheticWheelEvent = createSyntheticEvent(WheelEventInterface),\n  ToggleEventInterface = assign({}, EventInterface, {\n    newState: 0,\n    oldState: 0\n  }),\n  SyntheticToggleEvent = createSyntheticEvent(ToggleEventInterface),\n  END_KEYCODES = [9, 13, 27, 32],\n  canUseCompositionEvent = canUseDOM && \"CompositionEvent\" in window,\n  documentMode = null;\ncanUseDOM &&\n  \"documentMode\" in document &&\n  (documentMode = document.documentMode);\nvar canUseTextInputEvent = canUseDOM && \"TextEvent\" in window && !documentMode,\n  useFallbackCompositionData =\n    canUseDOM &&\n    (!canUseCompositionEvent ||\n      (documentMode && 8 < documentMode && 11 >= documentMode)),\n  SPACEBAR_CHAR = String.fromCharCode(32),\n  hasSpaceKeypress = !1;\nfunction isFallbackCompositionEnd(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"keyup\":\n      return -1 !== END_KEYCODES.indexOf(nativeEvent.keyCode);\n    case \"keydown\":\n      return 229 !== nativeEvent.keyCode;\n    case \"keypress\":\n    case \"mousedown\":\n    case \"focusout\":\n      return !0;\n    default:\n      return !1;\n  }\n}\nfunction getDataFromCustomEvent(nativeEvent) {\n  nativeEvent = nativeEvent.detail;\n  return \"object\" === typeof nativeEvent && \"data\" in nativeEvent\n    ? nativeEvent.data\n    : null;\n}\nvar isComposing = !1;\nfunction getNativeBeforeInputChars(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"compositionend\":\n      return getDataFromCustomEvent(nativeEvent);\n    case \"keypress\":\n      if (32 !== nativeEvent.which) return null;\n      hasSpaceKeypress = !0;\n      return SPACEBAR_CHAR;\n    case \"textInput\":\n      return (\n        (domEventName = nativeEvent.data),\n        domEventName === SPACEBAR_CHAR && hasSpaceKeypress ? null : domEventName\n      );\n    default:\n      return null;\n  }\n}\nfunction getFallbackBeforeInputChars(domEventName, nativeEvent) {\n  if (isComposing)\n    return \"compositionend\" === domEventName ||\n      (!canUseCompositionEvent &&\n        isFallbackCompositionEnd(domEventName, nativeEvent))\n      ? ((domEventName = getData()),\n        (fallbackText = startText = root = null),\n        (isComposing = !1),\n        domEventName)\n      : null;\n  switch (domEventName) {\n    case \"paste\":\n      return null;\n    case \"keypress\":\n      if (\n        !(nativeEvent.ctrlKey || nativeEvent.altKey || nativeEvent.metaKey) ||\n        (nativeEvent.ctrlKey && nativeEvent.altKey)\n      ) {\n        if (nativeEvent.char && 1 < nativeEvent.char.length)\n          return nativeEvent.char;\n        if (nativeEvent.which) return String.fromCharCode(nativeEvent.which);\n      }\n      return null;\n    case \"compositionend\":\n      return useFallbackCompositionData && \"ko\" !== nativeEvent.locale\n        ? null\n        : nativeEvent.data;\n    default:\n      return null;\n  }\n}\nvar supportedInputTypes = {\n  color: !0,\n  date: !0,\n  datetime: !0,\n  \"datetime-local\": !0,\n  email: !0,\n  month: !0,\n  number: !0,\n  password: !0,\n  range: !0,\n  search: !0,\n  tel: !0,\n  text: !0,\n  time: !0,\n  url: !0,\n  week: !0\n};\nfunction isTextInputElement(elem) {\n  var nodeName = elem && elem.nodeName && elem.nodeName.toLowerCase();\n  return \"input\" === nodeName\n    ? !!supportedInputTypes[elem.type]\n    : \"textarea\" === nodeName\n      ? !0\n      : !1;\n}\nfunction createAndAccumulateChangeEvent(\n  dispatchQueue,\n  inst,\n  nativeEvent,\n  target\n) {\n  restoreTarget\n    ? restoreQueue\n      ? restoreQueue.push(target)\n      : (restoreQueue = [target])\n    : (restoreTarget = target);\n  inst = accumulateTwoPhaseListeners(inst, \"onChange\");\n  0 < inst.length &&\n    ((nativeEvent = new SyntheticEvent(\n      \"onChange\",\n      \"change\",\n      null,\n      nativeEvent,\n      target\n    )),\n    dispatchQueue.push({ event: nativeEvent, listeners: inst }));\n}\nvar activeElement$1 = null,\n  activeElementInst$1 = null;\nfunction runEventInBatch(dispatchQueue) {\n  processDispatchQueue(dispatchQueue, 0);\n}\nfunction getInstIfValueChanged(targetInst) {\n  var targetNode = getNodeFromInstance(targetInst);\n  if (updateValueIfChanged(targetNode)) return targetInst;\n}\nfunction getTargetInstForChangeEvent(domEventName, targetInst) {\n  if (\"change\" === domEventName) return targetInst;\n}\nvar isInputEventSupported = !1;\nif (canUseDOM) {\n  var JSCompiler_inline_result$jscomp$286;\n  if (canUseDOM) {\n    var isSupported$jscomp$inline_427 = \"oninput\" in document;\n    if (!isSupported$jscomp$inline_427) {\n      var element$jscomp$inline_428 = document.createElement(\"div\");\n      element$jscomp$inline_428.setAttribute(\"oninput\", \"return;\");\n      isSupported$jscomp$inline_427 =\n        \"function\" === typeof element$jscomp$inline_428.oninput;\n    }\n    JSCompiler_inline_result$jscomp$286 = isSupported$jscomp$inline_427;\n  } else JSCompiler_inline_result$jscomp$286 = !1;\n  isInputEventSupported =\n    JSCompiler_inline_result$jscomp$286 &&\n    (!document.documentMode || 9 < document.documentMode);\n}\nfunction stopWatchingForValueChange() {\n  activeElement$1 &&\n    (activeElement$1.detachEvent(\"onpropertychange\", handlePropertyChange),\n    (activeElementInst$1 = activeElement$1 = null));\n}\nfunction handlePropertyChange(nativeEvent) {\n  if (\n    \"value\" === nativeEvent.propertyName &&\n    getInstIfValueChanged(activeElementInst$1)\n  ) {\n    var dispatchQueue = [];\n    createAndAccumulateChangeEvent(\n      dispatchQueue,\n      activeElementInst$1,\n      nativeEvent,\n      getEventTarget(nativeEvent)\n    );\n    batchedUpdates$1(runEventInBatch, dispatchQueue);\n  }\n}\nfunction handleEventsForInputEventPolyfill(domEventName, target, targetInst) {\n  \"focusin\" === domEventName\n    ? (stopWatchingForValueChange(),\n      (activeElement$1 = target),\n      (activeElementInst$1 = targetInst),\n      activeElement$1.attachEvent(\"onpropertychange\", handlePropertyChange))\n    : \"focusout\" === domEventName && stopWatchingForValueChange();\n}\nfunction getTargetInstForInputEventPolyfill(domEventName) {\n  if (\n    \"selectionchange\" === domEventName ||\n    \"keyup\" === domEventName ||\n    \"keydown\" === domEventName\n  )\n    return getInstIfValueChanged(activeElementInst$1);\n}\nfunction getTargetInstForClickEvent(domEventName, targetInst) {\n  if (\"click\" === domEventName) return getInstIfValueChanged(targetInst);\n}\nfunction getTargetInstForInputOrChangeEvent(domEventName, targetInst) {\n  if (\"input\" === domEventName || \"change\" === domEventName)\n    return getInstIfValueChanged(targetInst);\n}\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is;\nfunction shallowEqual(objA, objB) {\n  if (objectIs(objA, objB)) return !0;\n  if (\n    \"object\" !== typeof objA ||\n    null === objA ||\n    \"object\" !== typeof objB ||\n    null === objB\n  )\n    return !1;\n  var keysA = Object.keys(objA),\n    keysB = Object.keys(objB);\n  if (keysA.length !== keysB.length) return !1;\n  for (keysB = 0; keysB < keysA.length; keysB++) {\n    var currentKey = keysA[keysB];\n    if (\n      !hasOwnProperty.call(objB, currentKey) ||\n      !objectIs(objA[currentKey], objB[currentKey])\n    )\n      return !1;\n  }\n  return !0;\n}\nfunction getLeafNode(node) {\n  for (; node && node.firstChild; ) node = node.firstChild;\n  return node;\n}\nfunction getNodeForCharacterOffset(root, offset) {\n  var node = getLeafNode(root);\n  root = 0;\n  for (var nodeEnd; node; ) {\n    if (3 === node.nodeType) {\n      nodeEnd = root + node.textContent.length;\n      if (root <= offset && nodeEnd >= offset)\n        return { node: node, offset: offset - root };\n      root = nodeEnd;\n    }\n    a: {\n      for (; node; ) {\n        if (node.nextSibling) {\n          node = node.nextSibling;\n          break a;\n        }\n        node = node.parentNode;\n      }\n      node = void 0;\n    }\n    node = getLeafNode(node);\n  }\n}\nfunction containsNode(outerNode, innerNode) {\n  return outerNode && innerNode\n    ? outerNode === innerNode\n      ? !0\n      : outerNode && 3 === outerNode.nodeType\n        ? !1\n        : innerNode && 3 === innerNode.nodeType\n          ? containsNode(outerNode, innerNode.parentNode)\n          : \"contains\" in outerNode\n            ? outerNode.contains(innerNode)\n            : outerNode.compareDocumentPosition\n              ? !!(outerNode.compareDocumentPosition(innerNode) & 16)\n              : !1\n    : !1;\n}\nfunction getActiveElementDeep(containerInfo) {\n  containerInfo =\n    null != containerInfo &&\n    null != containerInfo.ownerDocument &&\n    null != containerInfo.ownerDocument.defaultView\n      ? containerInfo.ownerDocument.defaultView\n      : window;\n  for (\n    var element = getActiveElement(containerInfo.document);\n    element instanceof containerInfo.HTMLIFrameElement;\n\n  ) {\n    try {\n      var JSCompiler_inline_result =\n        \"string\" === typeof element.contentWindow.location.href;\n    } catch (err) {\n      JSCompiler_inline_result = !1;\n    }\n    if (JSCompiler_inline_result) containerInfo = element.contentWindow;\n    else break;\n    element = getActiveElement(containerInfo.document);\n  }\n  return element;\n}\nfunction hasSelectionCapabilities(elem) {\n  var nodeName = elem && elem.nodeName && elem.nodeName.toLowerCase();\n  return (\n    nodeName &&\n    ((\"input\" === nodeName &&\n      (\"text\" === elem.type ||\n        \"search\" === elem.type ||\n        \"tel\" === elem.type ||\n        \"url\" === elem.type ||\n        \"password\" === elem.type)) ||\n      \"textarea\" === nodeName ||\n      \"true\" === elem.contentEditable)\n  );\n}\nvar skipSelectionChangeEvent =\n    canUseDOM && \"documentMode\" in document && 11 >= document.documentMode,\n  activeElement = null,\n  activeElementInst = null,\n  lastSelection = null,\n  mouseDown = !1;\nfunction constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget) {\n  var doc =\n    nativeEventTarget.window === nativeEventTarget\n      ? nativeEventTarget.document\n      : 9 === nativeEventTarget.nodeType\n        ? nativeEventTarget\n        : nativeEventTarget.ownerDocument;\n  mouseDown ||\n    null == activeElement ||\n    activeElement !== getActiveElement(doc) ||\n    ((doc = activeElement),\n    \"selectionStart\" in doc && hasSelectionCapabilities(doc)\n      ? (doc = { start: doc.selectionStart, end: doc.selectionEnd })\n      : ((doc = (\n          (doc.ownerDocument && doc.ownerDocument.defaultView) ||\n          window\n        ).getSelection()),\n        (doc = {\n          anchorNode: doc.anchorNode,\n          anchorOffset: doc.anchorOffset,\n          focusNode: doc.focusNode,\n          focusOffset: doc.focusOffset\n        })),\n    (lastSelection && shallowEqual(lastSelection, doc)) ||\n      ((lastSelection = doc),\n      (doc = accumulateTwoPhaseListeners(activeElementInst, \"onSelect\")),\n      0 < doc.length &&\n        ((nativeEvent = new SyntheticEvent(\n          \"onSelect\",\n          \"select\",\n          null,\n          nativeEvent,\n          nativeEventTarget\n        )),\n        dispatchQueue.push({ event: nativeEvent, listeners: doc }),\n        (nativeEvent.target = activeElement))));\n}\nfunction makePrefixMap(styleProp, eventName) {\n  var prefixes = {};\n  prefixes[styleProp.toLowerCase()] = eventName.toLowerCase();\n  prefixes[\"Webkit\" + styleProp] = \"webkit\" + eventName;\n  prefixes[\"Moz\" + styleProp] = \"moz\" + eventName;\n  return prefixes;\n}\nvar vendorPrefixes = {\n    animationend: makePrefixMap(\"Animation\", \"AnimationEnd\"),\n    animationiteration: makePrefixMap(\"Animation\", \"AnimationIteration\"),\n    animationstart: makePrefixMap(\"Animation\", \"AnimationStart\"),\n    transitionrun: makePrefixMap(\"Transition\", \"TransitionRun\"),\n    transitionstart: makePrefixMap(\"Transition\", \"TransitionStart\"),\n    transitioncancel: makePrefixMap(\"Transition\", \"TransitionCancel\"),\n    transitionend: makePrefixMap(\"Transition\", \"TransitionEnd\")\n  },\n  prefixedEventNames = {},\n  style = {};\ncanUseDOM &&\n  ((style = document.createElement(\"div\").style),\n  \"AnimationEvent\" in window ||\n    (delete vendorPrefixes.animationend.animation,\n    delete vendorPrefixes.animationiteration.animation,\n    delete vendorPrefixes.animationstart.animation),\n  \"TransitionEvent\" in window ||\n    delete vendorPrefixes.transitionend.transition);\nfunction getVendorPrefixedEventName(eventName) {\n  if (prefixedEventNames[eventName]) return prefixedEventNames[eventName];\n  if (!vendorPrefixes[eventName]) return eventName;\n  var prefixMap = vendorPrefixes[eventName],\n    styleProp;\n  for (styleProp in prefixMap)\n    if (prefixMap.hasOwnProperty(styleProp) && styleProp in style)\n      return (prefixedEventNames[eventName] = prefixMap[styleProp]);\n  return eventName;\n}\nvar ANIMATION_END = getVendorPrefixedEventName(\"animationend\"),\n  ANIMATION_ITERATION = getVendorPrefixedEventName(\"animationiteration\"),\n  ANIMATION_START = getVendorPrefixedEventName(\"animationstart\"),\n  TRANSITION_RUN = getVendorPrefixedEventName(\"transitionrun\"),\n  TRANSITION_START = getVendorPrefixedEventName(\"transitionstart\"),\n  TRANSITION_CANCEL = getVendorPrefixedEventName(\"transitioncancel\"),\n  TRANSITION_END = getVendorPrefixedEventName(\"transitionend\"),\n  topLevelEventsToReactNames = new Map(),\n  simpleEventPluginEvents =\n    \"abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\n      \" \"\n    );\nsimpleEventPluginEvents.push(\"scrollEnd\");\nfunction registerSimpleEvent(domEventName, reactName) {\n  topLevelEventsToReactNames.set(domEventName, reactName);\n  registerTwoPhaseEvent(reactName, [domEventName]);\n}\nvar reportGlobalError =\n    \"function\" === typeof reportError\n      ? reportError\n      : function (error) {\n          if (\n            \"object\" === typeof window &&\n            \"function\" === typeof window.ErrorEvent\n          ) {\n            var event = new window.ErrorEvent(\"error\", {\n              bubbles: !0,\n              cancelable: !0,\n              message:\n                \"object\" === typeof error &&\n                null !== error &&\n                \"string\" === typeof error.message\n                  ? String(error.message)\n                  : String(error),\n              error: error\n            });\n            if (!window.dispatchEvent(event)) return;\n          } else if (\n            \"object\" === typeof process &&\n            \"function\" === typeof process.emit\n          ) {\n            process.emit(\"uncaughtException\", error);\n            return;\n          }\n          console.error(error);\n        },\n  concurrentQueues = [],\n  concurrentQueuesIndex = 0,\n  concurrentlyUpdatedLanes = 0;\nfunction finishQueueingConcurrentUpdates() {\n  for (\n    var endIndex = concurrentQueuesIndex,\n      i = (concurrentlyUpdatedLanes = concurrentQueuesIndex = 0);\n    i < endIndex;\n\n  ) {\n    var fiber = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var queue = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var update = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var lane = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    if (null !== queue && null !== update) {\n      var pending = queue.pending;\n      null === pending\n        ? (update.next = update)\n        : ((update.next = pending.next), (pending.next = update));\n      queue.pending = update;\n    }\n    0 !== lane && markUpdateLaneFromFiberToRoot(fiber, update, lane);\n  }\n}\nfunction enqueueUpdate$1(fiber, queue, update, lane) {\n  concurrentQueues[concurrentQueuesIndex++] = fiber;\n  concurrentQueues[concurrentQueuesIndex++] = queue;\n  concurrentQueues[concurrentQueuesIndex++] = update;\n  concurrentQueues[concurrentQueuesIndex++] = lane;\n  concurrentlyUpdatedLanes |= lane;\n  fiber.lanes |= lane;\n  fiber = fiber.alternate;\n  null !== fiber && (fiber.lanes |= lane);\n}\nfunction enqueueConcurrentHookUpdate(fiber, queue, update, lane) {\n  enqueueUpdate$1(fiber, queue, update, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction enqueueConcurrentRenderForLane(fiber, lane) {\n  enqueueUpdate$1(fiber, null, null, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction markUpdateLaneFromFiberToRoot(sourceFiber, update, lane) {\n  sourceFiber.lanes |= lane;\n  var alternate = sourceFiber.alternate;\n  null !== alternate && (alternate.lanes |= lane);\n  for (var isHidden = !1, parent = sourceFiber.return; null !== parent; )\n    (parent.childLanes |= lane),\n      (alternate = parent.alternate),\n      null !== alternate && (alternate.childLanes |= lane),\n      22 === parent.tag &&\n        ((sourceFiber = parent.stateNode),\n        null === sourceFiber || sourceFiber._visibility & 1 || (isHidden = !0)),\n      (sourceFiber = parent),\n      (parent = parent.return);\n  return 3 === sourceFiber.tag\n    ? ((parent = sourceFiber.stateNode),\n      isHidden &&\n        null !== update &&\n        ((isHidden = 31 - clz32(lane)),\n        (sourceFiber = parent.hiddenUpdates),\n        (alternate = sourceFiber[isHidden]),\n        null === alternate\n          ? (sourceFiber[isHidden] = [update])\n          : alternate.push(update),\n        (update.lane = lane | 536870912)),\n      parent)\n    : null;\n}\nfunction getRootForUpdatedFiber(sourceFiber) {\n  if (50 < nestedUpdateCount)\n    throw (\n      ((nestedUpdateCount = 0),\n      (rootWithNestedUpdates = null),\n      Error(formatProdErrorMessage(185)))\n    );\n  for (var parent = sourceFiber.return; null !== parent; )\n    (sourceFiber = parent), (parent = sourceFiber.return);\n  return 3 === sourceFiber.tag ? sourceFiber.stateNode : null;\n}\nvar emptyContextObject = {};\nfunction FiberNode(tag, pendingProps, key, mode) {\n  this.tag = tag;\n  this.key = key;\n  this.sibling =\n    this.child =\n    this.return =\n    this.stateNode =\n    this.type =\n    this.elementType =\n      null;\n  this.index = 0;\n  this.refCleanup = this.ref = null;\n  this.pendingProps = pendingProps;\n  this.dependencies =\n    this.memoizedState =\n    this.updateQueue =\n    this.memoizedProps =\n      null;\n  this.mode = mode;\n  this.subtreeFlags = this.flags = 0;\n  this.deletions = null;\n  this.childLanes = this.lanes = 0;\n  this.alternate = null;\n}\nfunction createFiberImplClass(tag, pendingProps, key, mode) {\n  return new FiberNode(tag, pendingProps, key, mode);\n}\nfunction shouldConstruct(Component) {\n  Component = Component.prototype;\n  return !(!Component || !Component.isReactComponent);\n}\nfunction createWorkInProgress(current, pendingProps) {\n  var workInProgress = current.alternate;\n  null === workInProgress\n    ? ((workInProgress = createFiberImplClass(\n        current.tag,\n        pendingProps,\n        current.key,\n        current.mode\n      )),\n      (workInProgress.elementType = current.elementType),\n      (workInProgress.type = current.type),\n      (workInProgress.stateNode = current.stateNode),\n      (workInProgress.alternate = current),\n      (current.alternate = workInProgress))\n    : ((workInProgress.pendingProps = pendingProps),\n      (workInProgress.type = current.type),\n      (workInProgress.flags = 0),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.deletions = null));\n  workInProgress.flags = current.flags & 65011712;\n  workInProgress.childLanes = current.childLanes;\n  workInProgress.lanes = current.lanes;\n  workInProgress.child = current.child;\n  workInProgress.memoizedProps = current.memoizedProps;\n  workInProgress.memoizedState = current.memoizedState;\n  workInProgress.updateQueue = current.updateQueue;\n  pendingProps = current.dependencies;\n  workInProgress.dependencies =\n    null === pendingProps\n      ? null\n      : { lanes: pendingProps.lanes, firstContext: pendingProps.firstContext };\n  workInProgress.sibling = current.sibling;\n  workInProgress.index = current.index;\n  workInProgress.ref = current.ref;\n  workInProgress.refCleanup = current.refCleanup;\n  return workInProgress;\n}\nfunction resetWorkInProgress(workInProgress, renderLanes) {\n  workInProgress.flags &= 65011714;\n  var current = workInProgress.alternate;\n  null === current\n    ? ((workInProgress.childLanes = 0),\n      (workInProgress.lanes = renderLanes),\n      (workInProgress.child = null),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.memoizedProps = null),\n      (workInProgress.memoizedState = null),\n      (workInProgress.updateQueue = null),\n      (workInProgress.dependencies = null),\n      (workInProgress.stateNode = null))\n    : ((workInProgress.childLanes = current.childLanes),\n      (workInProgress.lanes = current.lanes),\n      (workInProgress.child = current.child),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.deletions = null),\n      (workInProgress.memoizedProps = current.memoizedProps),\n      (workInProgress.memoizedState = current.memoizedState),\n      (workInProgress.updateQueue = current.updateQueue),\n      (workInProgress.type = current.type),\n      (renderLanes = current.dependencies),\n      (workInProgress.dependencies =\n        null === renderLanes\n          ? null\n          : {\n              lanes: renderLanes.lanes,\n              firstContext: renderLanes.firstContext\n            }));\n  return workInProgress;\n}\nfunction createFiberFromTypeAndProps(\n  type,\n  key,\n  pendingProps,\n  owner,\n  mode,\n  lanes\n) {\n  var fiberTag = 0;\n  owner = type;\n  if (\"function\" === typeof type) shouldConstruct(type) && (fiberTag = 1);\n  else if (\"string\" === typeof type)\n    fiberTag = isHostHoistableType(\n      type,\n      pendingProps,\n      contextStackCursor.current\n    )\n      ? 26\n      : \"html\" === type || \"head\" === type || \"body\" === type\n        ? 27\n        : 5;\n  else\n    a: switch (type) {\n      case REACT_ACTIVITY_TYPE:\n        return (\n          (type = createFiberImplClass(31, pendingProps, key, mode)),\n          (type.elementType = REACT_ACTIVITY_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_FRAGMENT_TYPE:\n        return createFiberFromFragment(pendingProps.children, mode, lanes, key);\n      case REACT_STRICT_MODE_TYPE:\n        fiberTag = 8;\n        mode |= 24;\n        break;\n      case REACT_PROFILER_TYPE:\n        return (\n          (type = createFiberImplClass(12, pendingProps, key, mode | 2)),\n          (type.elementType = REACT_PROFILER_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_SUSPENSE_TYPE:\n        return (\n          (type = createFiberImplClass(13, pendingProps, key, mode)),\n          (type.elementType = REACT_SUSPENSE_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_SUSPENSE_LIST_TYPE:\n        return (\n          (type = createFiberImplClass(19, pendingProps, key, mode)),\n          (type.elementType = REACT_SUSPENSE_LIST_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      default:\n        if (\"object\" === typeof type && null !== type)\n          switch (type.$$typeof) {\n            case REACT_CONTEXT_TYPE:\n              fiberTag = 10;\n              break a;\n            case REACT_CONSUMER_TYPE:\n              fiberTag = 9;\n              break a;\n            case REACT_FORWARD_REF_TYPE:\n              fiberTag = 11;\n              break a;\n            case REACT_MEMO_TYPE:\n              fiberTag = 14;\n              break a;\n            case REACT_LAZY_TYPE:\n              fiberTag = 16;\n              owner = null;\n              break a;\n          }\n        fiberTag = 29;\n        pendingProps = Error(\n          formatProdErrorMessage(130, null === type ? \"null\" : typeof type, \"\")\n        );\n        owner = null;\n    }\n  key = createFiberImplClass(fiberTag, pendingProps, key, mode);\n  key.elementType = type;\n  key.type = owner;\n  key.lanes = lanes;\n  return key;\n}\nfunction createFiberFromFragment(elements, mode, lanes, key) {\n  elements = createFiberImplClass(7, elements, key, mode);\n  elements.lanes = lanes;\n  return elements;\n}\nfunction createFiberFromText(content, mode, lanes) {\n  content = createFiberImplClass(6, content, null, mode);\n  content.lanes = lanes;\n  return content;\n}\nfunction createFiberFromDehydratedFragment(dehydratedNode) {\n  var fiber = createFiberImplClass(18, null, null, 0);\n  fiber.stateNode = dehydratedNode;\n  return fiber;\n}\nfunction createFiberFromPortal(portal, mode, lanes) {\n  mode = createFiberImplClass(\n    4,\n    null !== portal.children ? portal.children : [],\n    portal.key,\n    mode\n  );\n  mode.lanes = lanes;\n  mode.stateNode = {\n    containerInfo: portal.containerInfo,\n    pendingChildren: null,\n    implementation: portal.implementation\n  };\n  return mode;\n}\nvar CapturedStacks = new WeakMap();\nfunction createCapturedValueAtFiber(value, source) {\n  if (\"object\" === typeof value && null !== value) {\n    var existing = CapturedStacks.get(value);\n    if (void 0 !== existing) return existing;\n    source = {\n      value: value,\n      source: source,\n      stack: getStackByFiberInDevAndProd(source)\n    };\n    CapturedStacks.set(value, source);\n    return source;\n  }\n  return {\n    value: value,\n    source: source,\n    stack: getStackByFiberInDevAndProd(source)\n  };\n}\nvar forkStack = [],\n  forkStackIndex = 0,\n  treeForkProvider = null,\n  treeForkCount = 0,\n  idStack = [],\n  idStackIndex = 0,\n  treeContextProvider = null,\n  treeContextId = 1,\n  treeContextOverflow = \"\";\nfunction pushTreeFork(workInProgress, totalChildren) {\n  forkStack[forkStackIndex++] = treeForkCount;\n  forkStack[forkStackIndex++] = treeForkProvider;\n  treeForkProvider = workInProgress;\n  treeForkCount = totalChildren;\n}\nfunction pushTreeId(workInProgress, totalChildren, index) {\n  idStack[idStackIndex++] = treeContextId;\n  idStack[idStackIndex++] = treeContextOverflow;\n  idStack[idStackIndex++] = treeContextProvider;\n  treeContextProvider = workInProgress;\n  var baseIdWithLeadingBit = treeContextId;\n  workInProgress = treeContextOverflow;\n  var baseLength = 32 - clz32(baseIdWithLeadingBit) - 1;\n  baseIdWithLeadingBit &= ~(1 << baseLength);\n  index += 1;\n  var length = 32 - clz32(totalChildren) + baseLength;\n  if (30 < length) {\n    var numberOfOverflowBits = baseLength - (baseLength % 5);\n    length = (\n      baseIdWithLeadingBit &\n      ((1 << numberOfOverflowBits) - 1)\n    ).toString(32);\n    baseIdWithLeadingBit >>= numberOfOverflowBits;\n    baseLength -= numberOfOverflowBits;\n    treeContextId =\n      (1 << (32 - clz32(totalChildren) + baseLength)) |\n      (index << baseLength) |\n      baseIdWithLeadingBit;\n    treeContextOverflow = length + workInProgress;\n  } else\n    (treeContextId =\n      (1 << length) | (index << baseLength) | baseIdWithLeadingBit),\n      (treeContextOverflow = workInProgress);\n}\nfunction pushMaterializedTreeId(workInProgress) {\n  null !== workInProgress.return &&\n    (pushTreeFork(workInProgress, 1), pushTreeId(workInProgress, 1, 0));\n}\nfunction popTreeContext(workInProgress) {\n  for (; workInProgress === treeForkProvider; )\n    (treeForkProvider = forkStack[--forkStackIndex]),\n      (forkStack[forkStackIndex] = null),\n      (treeForkCount = forkStack[--forkStackIndex]),\n      (forkStack[forkStackIndex] = null);\n  for (; workInProgress === treeContextProvider; )\n    (treeContextProvider = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null),\n      (treeContextOverflow = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null),\n      (treeContextId = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null);\n}\nfunction restoreSuspendedTreeContext(workInProgress, suspendedContext) {\n  idStack[idStackIndex++] = treeContextId;\n  idStack[idStackIndex++] = treeContextOverflow;\n  idStack[idStackIndex++] = treeContextProvider;\n  treeContextId = suspendedContext.id;\n  treeContextOverflow = suspendedContext.overflow;\n  treeContextProvider = workInProgress;\n}\nvar hydrationParentFiber = null,\n  nextHydratableInstance = null,\n  isHydrating = !1,\n  hydrationErrors = null,\n  rootOrSingletonContext = !1,\n  HydrationMismatchException = Error(formatProdErrorMessage(519));\nfunction throwOnHydrationMismatch(fiber) {\n  var error = Error(\n    formatProdErrorMessage(\n      418,\n      1 < arguments.length && void 0 !== arguments[1] && arguments[1]\n        ? \"text\"\n        : \"HTML\",\n      \"\"\n    )\n  );\n  queueHydrationError(createCapturedValueAtFiber(error, fiber));\n  throw HydrationMismatchException;\n}\nfunction prepareToHydrateHostInstance(fiber) {\n  var instance = fiber.stateNode,\n    type = fiber.type,\n    props = fiber.memoizedProps;\n  instance[internalInstanceKey] = fiber;\n  instance[internalPropsKey] = props;\n  switch (type) {\n    case \"dialog\":\n      listenToNonDelegatedEvent(\"cancel\", instance);\n      listenToNonDelegatedEvent(\"close\", instance);\n      break;\n    case \"iframe\":\n    case \"object\":\n    case \"embed\":\n      listenToNonDelegatedEvent(\"load\", instance);\n      break;\n    case \"video\":\n    case \"audio\":\n      for (type = 0; type < mediaEventTypes.length; type++)\n        listenToNonDelegatedEvent(mediaEventTypes[type], instance);\n      break;\n    case \"source\":\n      listenToNonDelegatedEvent(\"error\", instance);\n      break;\n    case \"img\":\n    case \"image\":\n    case \"link\":\n      listenToNonDelegatedEvent(\"error\", instance);\n      listenToNonDelegatedEvent(\"load\", instance);\n      break;\n    case \"details\":\n      listenToNonDelegatedEvent(\"toggle\", instance);\n      break;\n    case \"input\":\n      listenToNonDelegatedEvent(\"invalid\", instance);\n      initInput(\n        instance,\n        props.value,\n        props.defaultValue,\n        props.checked,\n        props.defaultChecked,\n        props.type,\n        props.name,\n        !0\n      );\n      break;\n    case \"select\":\n      listenToNonDelegatedEvent(\"invalid\", instance);\n      break;\n    case \"textarea\":\n      listenToNonDelegatedEvent(\"invalid\", instance),\n        initTextarea(instance, props.value, props.defaultValue, props.children);\n  }\n  type = props.children;\n  (\"string\" !== typeof type &&\n    \"number\" !== typeof type &&\n    \"bigint\" !== typeof type) ||\n  instance.textContent === \"\" + type ||\n  !0 === props.suppressHydrationWarning ||\n  checkForUnmatchedText(instance.textContent, type)\n    ? (null != props.popover &&\n        (listenToNonDelegatedEvent(\"beforetoggle\", instance),\n        listenToNonDelegatedEvent(\"toggle\", instance)),\n      null != props.onScroll && listenToNonDelegatedEvent(\"scroll\", instance),\n      null != props.onScrollEnd &&\n        listenToNonDelegatedEvent(\"scrollend\", instance),\n      null != props.onClick && (instance.onclick = noop$1),\n      (instance = !0))\n    : (instance = !1);\n  instance || throwOnHydrationMismatch(fiber, !0);\n}\nfunction popToNextHostParent(fiber) {\n  for (hydrationParentFiber = fiber.return; hydrationParentFiber; )\n    switch (hydrationParentFiber.tag) {\n      case 5:\n      case 31:\n      case 13:\n        rootOrSingletonContext = !1;\n        return;\n      case 27:\n      case 3:\n        rootOrSingletonContext = !0;\n        return;\n      default:\n        hydrationParentFiber = hydrationParentFiber.return;\n    }\n}\nfunction popHydrationState(fiber) {\n  if (fiber !== hydrationParentFiber) return !1;\n  if (!isHydrating) return popToNextHostParent(fiber), (isHydrating = !0), !1;\n  var tag = fiber.tag,\n    JSCompiler_temp;\n  if ((JSCompiler_temp = 3 !== tag && 27 !== tag)) {\n    if ((JSCompiler_temp = 5 === tag))\n      (JSCompiler_temp = fiber.type),\n        (JSCompiler_temp =\n          !(\"form\" !== JSCompiler_temp && \"button\" !== JSCompiler_temp) ||\n          shouldSetTextContent(fiber.type, fiber.memoizedProps));\n    JSCompiler_temp = !JSCompiler_temp;\n  }\n  JSCompiler_temp && nextHydratableInstance && throwOnHydrationMismatch(fiber);\n  popToNextHostParent(fiber);\n  if (13 === tag) {\n    fiber = fiber.memoizedState;\n    fiber = null !== fiber ? fiber.dehydrated : null;\n    if (!fiber) throw Error(formatProdErrorMessage(317));\n    nextHydratableInstance =\n      getNextHydratableInstanceAfterHydrationBoundary(fiber);\n  } else if (31 === tag) {\n    fiber = fiber.memoizedState;\n    fiber = null !== fiber ? fiber.dehydrated : null;\n    if (!fiber) throw Error(formatProdErrorMessage(317));\n    nextHydratableInstance =\n      getNextHydratableInstanceAfterHydrationBoundary(fiber);\n  } else\n    27 === tag\n      ? ((tag = nextHydratableInstance),\n        isSingletonScope(fiber.type)\n          ? ((fiber = previousHydratableOnEnteringScopedSingleton),\n            (previousHydratableOnEnteringScopedSingleton = null),\n            (nextHydratableInstance = fiber))\n          : (nextHydratableInstance = tag))\n      : (nextHydratableInstance = hydrationParentFiber\n          ? getNextHydratable(fiber.stateNode.nextSibling)\n          : null);\n  return !0;\n}\nfunction resetHydrationState() {\n  nextHydratableInstance = hydrationParentFiber = null;\n  isHydrating = !1;\n}\nfunction upgradeHydrationErrorsToRecoverable() {\n  var queuedErrors = hydrationErrors;\n  null !== queuedErrors &&\n    (null === workInProgressRootRecoverableErrors\n      ? (workInProgressRootRecoverableErrors = queuedErrors)\n      : workInProgressRootRecoverableErrors.push.apply(\n          workInProgressRootRecoverableErrors,\n          queuedErrors\n        ),\n    (hydrationErrors = null));\n  return queuedErrors;\n}\nfunction queueHydrationError(error) {\n  null === hydrationErrors\n    ? (hydrationErrors = [error])\n    : hydrationErrors.push(error);\n}\nvar valueCursor = createCursor(null),\n  currentlyRenderingFiber$1 = null,\n  lastContextDependency = null;\nfunction pushProvider(providerFiber, context, nextValue) {\n  push(valueCursor, context._currentValue);\n  context._currentValue = nextValue;\n}\nfunction popProvider(context) {\n  context._currentValue = valueCursor.current;\n  pop(valueCursor);\n}\nfunction scheduleContextWorkOnParentPath(parent, renderLanes, propagationRoot) {\n  for (; null !== parent; ) {\n    var alternate = parent.alternate;\n    (parent.childLanes & renderLanes) !== renderLanes\n      ? ((parent.childLanes |= renderLanes),\n        null !== alternate && (alternate.childLanes |= renderLanes))\n      : null !== alternate &&\n        (alternate.childLanes & renderLanes) !== renderLanes &&\n        (alternate.childLanes |= renderLanes);\n    if (parent === propagationRoot) break;\n    parent = parent.return;\n  }\n}\nfunction propagateContextChanges(\n  workInProgress,\n  contexts,\n  renderLanes,\n  forcePropagateEntireTree\n) {\n  var fiber = workInProgress.child;\n  null !== fiber && (fiber.return = workInProgress);\n  for (; null !== fiber; ) {\n    var list = fiber.dependencies;\n    if (null !== list) {\n      var nextFiber = fiber.child;\n      list = list.firstContext;\n      a: for (; null !== list; ) {\n        var dependency = list;\n        list = fiber;\n        for (var i = 0; i < contexts.length; i++)\n          if (dependency.context === contexts[i]) {\n            list.lanes |= renderLanes;\n            dependency = list.alternate;\n            null !== dependency && (dependency.lanes |= renderLanes);\n            scheduleContextWorkOnParentPath(\n              list.return,\n              renderLanes,\n              workInProgress\n            );\n            forcePropagateEntireTree || (nextFiber = null);\n            break a;\n          }\n        list = dependency.next;\n      }\n    } else if (18 === fiber.tag) {\n      nextFiber = fiber.return;\n      if (null === nextFiber) throw Error(formatProdErrorMessage(341));\n      nextFiber.lanes |= renderLanes;\n      list = nextFiber.alternate;\n      null !== list && (list.lanes |= renderLanes);\n      scheduleContextWorkOnParentPath(nextFiber, renderLanes, workInProgress);\n      nextFiber = null;\n    } else nextFiber = fiber.child;\n    if (null !== nextFiber) nextFiber.return = fiber;\n    else\n      for (nextFiber = fiber; null !== nextFiber; ) {\n        if (nextFiber === workInProgress) {\n          nextFiber = null;\n          break;\n        }\n        fiber = nextFiber.sibling;\n        if (null !== fiber) {\n          fiber.return = nextFiber.return;\n          nextFiber = fiber;\n          break;\n        }\n        nextFiber = nextFiber.return;\n      }\n    fiber = nextFiber;\n  }\n}\nfunction propagateParentContextChanges(\n  current,\n  workInProgress,\n  renderLanes,\n  forcePropagateEntireTree\n) {\n  current = null;\n  for (\n    var parent = workInProgress, isInsidePropagationBailout = !1;\n    null !== parent;\n\n  ) {\n    if (!isInsidePropagationBailout)\n      if (0 !== (parent.flags & 524288)) isInsidePropagationBailout = !0;\n      else if (0 !== (parent.flags & 262144)) break;\n    if (10 === parent.tag) {\n      var currentParent = parent.alternate;\n      if (null === currentParent) throw Error(formatProdErrorMessage(387));\n      currentParent = currentParent.memoizedProps;\n      if (null !== currentParent) {\n        var context = parent.type;\n        objectIs(parent.pendingProps.value, currentParent.value) ||\n          (null !== current ? current.push(context) : (current = [context]));\n      }\n    } else if (parent === hostTransitionProviderCursor.current) {\n      currentParent = parent.alternate;\n      if (null === currentParent) throw Error(formatProdErrorMessage(387));\n      currentParent.memoizedState.memoizedState !==\n        parent.memoizedState.memoizedState &&\n        (null !== current\n          ? current.push(HostTransitionContext)\n          : (current = [HostTransitionContext]));\n    }\n    parent = parent.return;\n  }\n  null !== current &&\n    propagateContextChanges(\n      workInProgress,\n      current,\n      renderLanes,\n      forcePropagateEntireTree\n    );\n  workInProgress.flags |= 262144;\n}\nfunction checkIfContextChanged(currentDependencies) {\n  for (\n    currentDependencies = currentDependencies.firstContext;\n    null !== currentDependencies;\n\n  ) {\n    if (\n      !objectIs(\n        currentDependencies.context._currentValue,\n        currentDependencies.memoizedValue\n      )\n    )\n      return !0;\n    currentDependencies = currentDependencies.next;\n  }\n  return !1;\n}\nfunction prepareToReadContext(workInProgress) {\n  currentlyRenderingFiber$1 = workInProgress;\n  lastContextDependency = null;\n  workInProgress = workInProgress.dependencies;\n  null !== workInProgress && (workInProgress.firstContext = null);\n}\nfunction readContext(context) {\n  return readContextForConsumer(currentlyRenderingFiber$1, context);\n}\nfunction readContextDuringReconciliation(consumer, context) {\n  null === currentlyRenderingFiber$1 && prepareToReadContext(consumer);\n  return readContextForConsumer(consumer, context);\n}\nfunction readContextForConsumer(consumer, context) {\n  var value = context._currentValue;\n  context = { context: context, memoizedValue: value, next: null };\n  if (null === lastContextDependency) {\n    if (null === consumer) throw Error(formatProdErrorMessage(308));\n    lastContextDependency = context;\n    consumer.dependencies = { lanes: 0, firstContext: context };\n    consumer.flags |= 524288;\n  } else lastContextDependency = lastContextDependency.next = context;\n  return value;\n}\nvar AbortControllerLocal =\n    \"undefined\" !== typeof AbortController\n      ? AbortController\n      : function () {\n          var listeners = [],\n            signal = (this.signal = {\n              aborted: !1,\n              addEventListener: function (type, listener) {\n                listeners.push(listener);\n              }\n            });\n          this.abort = function () {\n            signal.aborted = !0;\n            listeners.forEach(function (listener) {\n              return listener();\n            });\n          };\n        },\n  scheduleCallback$2 = Scheduler.unstable_scheduleCallback,\n  NormalPriority = Scheduler.unstable_NormalPriority,\n  CacheContext = {\n    $$typeof: REACT_CONTEXT_TYPE,\n    Consumer: null,\n    Provider: null,\n    _currentValue: null,\n    _currentValue2: null,\n    _threadCount: 0\n  };\nfunction createCache() {\n  return {\n    controller: new AbortControllerLocal(),\n    data: new Map(),\n    refCount: 0\n  };\n}\nfunction releaseCache(cache) {\n  cache.refCount--;\n  0 === cache.refCount &&\n    scheduleCallback$2(NormalPriority, function () {\n      cache.controller.abort();\n    });\n}\nvar currentEntangledListeners = null,\n  currentEntangledPendingCount = 0,\n  currentEntangledLane = 0,\n  currentEntangledActionThenable = null;\nfunction entangleAsyncAction(transition, thenable) {\n  if (null === currentEntangledListeners) {\n    var entangledListeners = (currentEntangledListeners = []);\n    currentEntangledPendingCount = 0;\n    currentEntangledLane = requestTransitionLane();\n    currentEntangledActionThenable = {\n      status: \"pending\",\n      value: void 0,\n      then: function (resolve) {\n        entangledListeners.push(resolve);\n      }\n    };\n  }\n  currentEntangledPendingCount++;\n  thenable.then(pingEngtangledActionScope, pingEngtangledActionScope);\n  return thenable;\n}\nfunction pingEngtangledActionScope() {\n  if (\n    0 === --currentEntangledPendingCount &&\n    null !== currentEntangledListeners\n  ) {\n    null !== currentEntangledActionThenable &&\n      (currentEntangledActionThenable.status = \"fulfilled\");\n    var listeners = currentEntangledListeners;\n    currentEntangledListeners = null;\n    currentEntangledLane = 0;\n    currentEntangledActionThenable = null;\n    for (var i = 0; i < listeners.length; i++) (0, listeners[i])();\n  }\n}\nfunction chainThenableValue(thenable, result) {\n  var listeners = [],\n    thenableWithOverride = {\n      status: \"pending\",\n      value: null,\n      reason: null,\n      then: function (resolve) {\n        listeners.push(resolve);\n      }\n    };\n  thenable.then(\n    function () {\n      thenableWithOverride.status = \"fulfilled\";\n      thenableWithOverride.value = result;\n      for (var i = 0; i < listeners.length; i++) (0, listeners[i])(result);\n    },\n    function (error) {\n      thenableWithOverride.status = \"rejected\";\n      thenableWithOverride.reason = error;\n      for (error = 0; error < listeners.length; error++)\n        (0, listeners[error])(void 0);\n    }\n  );\n  return thenableWithOverride;\n}\nvar prevOnStartTransitionFinish = ReactSharedInternals.S;\nReactSharedInternals.S = function (transition, returnValue) {\n  globalMostRecentTransitionTime = now();\n  \"object\" === typeof returnValue &&\n    null !== returnValue &&\n    \"function\" === typeof returnValue.then &&\n    entangleAsyncAction(transition, returnValue);\n  null !== prevOnStartTransitionFinish &&\n    prevOnStartTransitionFinish(transition, returnValue);\n};\nvar resumedCache = createCursor(null);\nfunction peekCacheFromPool() {\n  var cacheResumedFromPreviousRender = resumedCache.current;\n  return null !== cacheResumedFromPreviousRender\n    ? cacheResumedFromPreviousRender\n    : workInProgressRoot.pooledCache;\n}\nfunction pushTransition(offscreenWorkInProgress, prevCachePool) {\n  null === prevCachePool\n    ? push(resumedCache, resumedCache.current)\n    : push(resumedCache, prevCachePool.pool);\n}\nfunction getSuspendedCache() {\n  var cacheFromPool = peekCacheFromPool();\n  return null === cacheFromPool\n    ? null\n    : { parent: CacheContext._currentValue, pool: cacheFromPool };\n}\nvar SuspenseException = Error(formatProdErrorMessage(460)),\n  SuspenseyCommitException = Error(formatProdErrorMessage(474)),\n  SuspenseActionException = Error(formatProdErrorMessage(542)),\n  noopSuspenseyCommitThenable = { then: function () {} };\nfunction isThenableResolved(thenable) {\n  thenable = thenable.status;\n  return \"fulfilled\" === thenable || \"rejected\" === thenable;\n}\nfunction trackUsedThenable(thenableState, thenable, index) {\n  index = thenableState[index];\n  void 0 === index\n    ? thenableState.push(thenable)\n    : index !== thenable && (thenable.then(noop$1, noop$1), (thenable = index));\n  switch (thenable.status) {\n    case \"fulfilled\":\n      return thenable.value;\n    case \"rejected\":\n      throw (\n        ((thenableState = thenable.reason),\n        checkIfUseWrappedInAsyncCatch(thenableState),\n        thenableState)\n      );\n    default:\n      if (\"string\" === typeof thenable.status) thenable.then(noop$1, noop$1);\n      else {\n        thenableState = workInProgressRoot;\n        if (null !== thenableState && 100 < thenableState.shellSuspendCounter)\n          throw Error(formatProdErrorMessage(482));\n        thenableState = thenable;\n        thenableState.status = \"pending\";\n        thenableState.then(\n          function (fulfilledValue) {\n            if (\"pending\" === thenable.status) {\n              var fulfilledThenable = thenable;\n              fulfilledThenable.status = \"fulfilled\";\n              fulfilledThenable.value = fulfilledValue;\n            }\n          },\n          function (error) {\n            if (\"pending\" === thenable.status) {\n              var rejectedThenable = thenable;\n              rejectedThenable.status = \"rejected\";\n              rejectedThenable.reason = error;\n            }\n          }\n        );\n      }\n      switch (thenable.status) {\n        case \"fulfilled\":\n          return thenable.value;\n        case \"rejected\":\n          throw (\n            ((thenableState = thenable.reason),\n            checkIfUseWrappedInAsyncCatch(thenableState),\n            thenableState)\n          );\n      }\n      suspendedThenable = thenable;\n      throw SuspenseException;\n  }\n}\nfunction resolveLazy(lazyType) {\n  try {\n    var init = lazyType._init;\n    return init(lazyType._payload);\n  } catch (x) {\n    if (null !== x && \"object\" === typeof x && \"function\" === typeof x.then)\n      throw ((suspendedThenable = x), SuspenseException);\n    throw x;\n  }\n}\nvar suspendedThenable = null;\nfunction getSuspendedThenable() {\n  if (null === suspendedThenable) throw Error(formatProdErrorMessage(459));\n  var thenable = suspendedThenable;\n  suspendedThenable = null;\n  return thenable;\n}\nfunction checkIfUseWrappedInAsyncCatch(rejectedReason) {\n  if (\n    rejectedReason === SuspenseException ||\n    rejectedReason === SuspenseActionException\n  )\n    throw Error(formatProdErrorMessage(483));\n}\nvar thenableState$1 = null,\n  thenableIndexCounter$1 = 0;\nfunction unwrapThenable(thenable) {\n  var index = thenableIndexCounter$1;\n  thenableIndexCounter$1 += 1;\n  null === thenableState$1 && (thenableState$1 = []);\n  return trackUsedThenable(thenableState$1, thenable, index);\n}\nfunction coerceRef(workInProgress, element) {\n  element = element.props.ref;\n  workInProgress.ref = void 0 !== element ? element : null;\n}\nfunction throwOnInvalidObjectTypeImpl(returnFiber, newChild) {\n  if (newChild.$$typeof === REACT_LEGACY_ELEMENT_TYPE)\n    throw Error(formatProdErrorMessage(525));\n  returnFiber = Object.prototype.toString.call(newChild);\n  throw Error(\n    formatProdErrorMessage(\n      31,\n      \"[object Object]\" === returnFiber\n        ? \"object with keys {\" + Object.keys(newChild).join(\", \") + \"}\"\n        : returnFiber\n    )\n  );\n}\nfunction createChildReconciler(shouldTrackSideEffects) {\n  function deleteChild(returnFiber, childToDelete) {\n    if (shouldTrackSideEffects) {\n      var deletions = returnFiber.deletions;\n      null === deletions\n        ? ((returnFiber.deletions = [childToDelete]), (returnFiber.flags |= 16))\n        : deletions.push(childToDelete);\n    }\n  }\n  function deleteRemainingChildren(returnFiber, currentFirstChild) {\n    if (!shouldTrackSideEffects) return null;\n    for (; null !== currentFirstChild; )\n      deleteChild(returnFiber, currentFirstChild),\n        (currentFirstChild = currentFirstChild.sibling);\n    return null;\n  }\n  function mapRemainingChildren(currentFirstChild) {\n    for (var existingChildren = new Map(); null !== currentFirstChild; )\n      null !== currentFirstChild.key\n        ? existingChildren.set(currentFirstChild.key, currentFirstChild)\n        : existingChildren.set(currentFirstChild.index, currentFirstChild),\n        (currentFirstChild = currentFirstChild.sibling);\n    return existingChildren;\n  }\n  function useFiber(fiber, pendingProps) {\n    fiber = createWorkInProgress(fiber, pendingProps);\n    fiber.index = 0;\n    fiber.sibling = null;\n    return fiber;\n  }\n  function placeChild(newFiber, lastPlacedIndex, newIndex) {\n    newFiber.index = newIndex;\n    if (!shouldTrackSideEffects)\n      return (newFiber.flags |= 1048576), lastPlacedIndex;\n    newIndex = newFiber.alternate;\n    if (null !== newIndex)\n      return (\n        (newIndex = newIndex.index),\n        newIndex < lastPlacedIndex\n          ? ((newFiber.flags |= 67108866), lastPlacedIndex)\n          : newIndex\n      );\n    newFiber.flags |= 67108866;\n    return lastPlacedIndex;\n  }\n  function placeSingleChild(newFiber) {\n    shouldTrackSideEffects &&\n      null === newFiber.alternate &&\n      (newFiber.flags |= 67108866);\n    return newFiber;\n  }\n  function updateTextNode(returnFiber, current, textContent, lanes) {\n    if (null === current || 6 !== current.tag)\n      return (\n        (current = createFiberFromText(textContent, returnFiber.mode, lanes)),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, textContent);\n    current.return = returnFiber;\n    return current;\n  }\n  function updateElement(returnFiber, current, element, lanes) {\n    var elementType = element.type;\n    if (elementType === REACT_FRAGMENT_TYPE)\n      return updateFragment(\n        returnFiber,\n        current,\n        element.props.children,\n        lanes,\n        element.key\n      );\n    if (\n      null !== current &&\n      (current.elementType === elementType ||\n        (\"object\" === typeof elementType &&\n          null !== elementType &&\n          elementType.$$typeof === REACT_LAZY_TYPE &&\n          resolveLazy(elementType) === current.type))\n    )\n      return (\n        (current = useFiber(current, element.props)),\n        coerceRef(current, element),\n        (current.return = returnFiber),\n        current\n      );\n    current = createFiberFromTypeAndProps(\n      element.type,\n      element.key,\n      element.props,\n      null,\n      returnFiber.mode,\n      lanes\n    );\n    coerceRef(current, element);\n    current.return = returnFiber;\n    return current;\n  }\n  function updatePortal(returnFiber, current, portal, lanes) {\n    if (\n      null === current ||\n      4 !== current.tag ||\n      current.stateNode.containerInfo !== portal.containerInfo ||\n      current.stateNode.implementation !== portal.implementation\n    )\n      return (\n        (current = createFiberFromPortal(portal, returnFiber.mode, lanes)),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, portal.children || []);\n    current.return = returnFiber;\n    return current;\n  }\n  function updateFragment(returnFiber, current, fragment, lanes, key) {\n    if (null === current || 7 !== current.tag)\n      return (\n        (current = createFiberFromFragment(\n          fragment,\n          returnFiber.mode,\n          lanes,\n          key\n        )),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, fragment);\n    current.return = returnFiber;\n    return current;\n  }\n  function createChild(returnFiber, newChild, lanes) {\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return (\n        (newChild = createFiberFromText(\n          \"\" + newChild,\n          returnFiber.mode,\n          lanes\n        )),\n        (newChild.return = returnFiber),\n        newChild\n      );\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return (\n            (lanes = createFiberFromTypeAndProps(\n              newChild.type,\n              newChild.key,\n              newChild.props,\n              null,\n              returnFiber.mode,\n              lanes\n            )),\n            coerceRef(lanes, newChild),\n            (lanes.return = returnFiber),\n            lanes\n          );\n        case REACT_PORTAL_TYPE:\n          return (\n            (newChild = createFiberFromPortal(\n              newChild,\n              returnFiber.mode,\n              lanes\n            )),\n            (newChild.return = returnFiber),\n            newChild\n          );\n        case REACT_LAZY_TYPE:\n          return (\n            (newChild = resolveLazy(newChild)),\n            createChild(returnFiber, newChild, lanes)\n          );\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return (\n          (newChild = createFiberFromFragment(\n            newChild,\n            returnFiber.mode,\n            lanes,\n            null\n          )),\n          (newChild.return = returnFiber),\n          newChild\n        );\n      if (\"function\" === typeof newChild.then)\n        return createChild(returnFiber, unwrapThenable(newChild), lanes);\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return createChild(\n          returnFiber,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectTypeImpl(returnFiber, newChild);\n    }\n    return null;\n  }\n  function updateSlot(returnFiber, oldFiber, newChild, lanes) {\n    var key = null !== oldFiber ? oldFiber.key : null;\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return null !== key\n        ? null\n        : updateTextNode(returnFiber, oldFiber, \"\" + newChild, lanes);\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return newChild.key === key\n            ? updateElement(returnFiber, oldFiber, newChild, lanes)\n            : null;\n        case REACT_PORTAL_TYPE:\n          return newChild.key === key\n            ? updatePortal(returnFiber, oldFiber, newChild, lanes)\n            : null;\n        case REACT_LAZY_TYPE:\n          return (\n            (newChild = resolveLazy(newChild)),\n            updateSlot(returnFiber, oldFiber, newChild, lanes)\n          );\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return null !== key\n          ? null\n          : updateFragment(returnFiber, oldFiber, newChild, lanes, null);\n      if (\"function\" === typeof newChild.then)\n        return updateSlot(\n          returnFiber,\n          oldFiber,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return updateSlot(\n          returnFiber,\n          oldFiber,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectTypeImpl(returnFiber, newChild);\n    }\n    return null;\n  }\n  function updateFromMap(\n    existingChildren,\n    returnFiber,\n    newIdx,\n    newChild,\n    lanes\n  ) {\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return (\n        (existingChildren = existingChildren.get(newIdx) || null),\n        updateTextNode(returnFiber, existingChildren, \"\" + newChild, lanes)\n      );\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return (\n            (existingChildren =\n              existingChildren.get(\n                null === newChild.key ? newIdx : newChild.key\n              ) || null),\n            updateElement(returnFiber, existingChildren, newChild, lanes)\n          );\n        case REACT_PORTAL_TYPE:\n          return (\n            (existingChildren =\n              existingChildren.get(\n                null === newChild.key ? newIdx : newChild.key\n              ) || null),\n            updatePortal(returnFiber, existingChildren, newChild, lanes)\n          );\n        case REACT_LAZY_TYPE:\n          return (\n            (newChild = resolveLazy(newChild)),\n            updateFromMap(\n              existingChildren,\n              returnFiber,\n              newIdx,\n              newChild,\n              lanes\n            )\n          );\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return (\n          (existingChildren = existingChildren.get(newIdx) || null),\n          updateFragment(returnFiber, existingChildren, newChild, lanes, null)\n        );\n      if (\"function\" === typeof newChild.then)\n        return updateFromMap(\n          existingChildren,\n          returnFiber,\n          newIdx,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return updateFromMap(\n          existingChildren,\n          returnFiber,\n          newIdx,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectTypeImpl(returnFiber, newChild);\n    }\n    return null;\n  }\n  function reconcileChildrenArray(\n    returnFiber,\n    currentFirstChild,\n    newChildren,\n    lanes\n  ) {\n    for (\n      var resultingFirstChild = null,\n        previousNewFiber = null,\n        oldFiber = currentFirstChild,\n        newIdx = (currentFirstChild = 0),\n        nextOldFiber = null;\n      null !== oldFiber && newIdx < newChildren.length;\n      newIdx++\n    ) {\n      oldFiber.index > newIdx\n        ? ((nextOldFiber = oldFiber), (oldFiber = null))\n        : (nextOldFiber = oldFiber.sibling);\n      var newFiber = updateSlot(\n        returnFiber,\n        oldFiber,\n        newChildren[newIdx],\n        lanes\n      );\n      if (null === newFiber) {\n        null === oldFiber && (oldFiber = nextOldFiber);\n        break;\n      }\n      shouldTrackSideEffects &&\n        oldFiber &&\n        null === newFiber.alternate &&\n        deleteChild(returnFiber, oldFiber);\n      currentFirstChild = placeChild(newFiber, currentFirstChild, newIdx);\n      null === previousNewFiber\n        ? (resultingFirstChild = newFiber)\n        : (previousNewFiber.sibling = newFiber);\n      previousNewFiber = newFiber;\n      oldFiber = nextOldFiber;\n    }\n    if (newIdx === newChildren.length)\n      return (\n        deleteRemainingChildren(returnFiber, oldFiber),\n        isHydrating && pushTreeFork(returnFiber, newIdx),\n        resultingFirstChild\n      );\n    if (null === oldFiber) {\n      for (; newIdx < newChildren.length; newIdx++)\n        (oldFiber = createChild(returnFiber, newChildren[newIdx], lanes)),\n          null !== oldFiber &&\n            ((currentFirstChild = placeChild(\n              oldFiber,\n              currentFirstChild,\n              newIdx\n            )),\n            null === previousNewFiber\n              ? (resultingFirstChild = oldFiber)\n              : (previousNewFiber.sibling = oldFiber),\n            (previousNewFiber = oldFiber));\n      isHydrating && pushTreeFork(returnFiber, newIdx);\n      return resultingFirstChild;\n    }\n    for (\n      oldFiber = mapRemainingChildren(oldFiber);\n      newIdx < newChildren.length;\n      newIdx++\n    )\n      (nextOldFiber = updateFromMap(\n        oldFiber,\n        returnFiber,\n        newIdx,\n        newChildren[newIdx],\n        lanes\n      )),\n        null !== nextOldFiber &&\n          (shouldTrackSideEffects &&\n            null !== nextOldFiber.alternate &&\n            oldFiber.delete(\n              null === nextOldFiber.key ? newIdx : nextOldFiber.key\n            ),\n          (currentFirstChild = placeChild(\n            nextOldFiber,\n            currentFirstChild,\n            newIdx\n          )),\n          null === previousNewFiber\n            ? (resultingFirstChild = nextOldFiber)\n            : (previousNewFiber.sibling = nextOldFiber),\n          (previousNewFiber = nextOldFiber));\n    shouldTrackSideEffects &&\n      oldFiber.forEach(function (child) {\n        return deleteChild(returnFiber, child);\n      });\n    isHydrating && pushTreeFork(returnFiber, newIdx);\n    return resultingFirstChild;\n  }\n  function reconcileChildrenIterator(\n    returnFiber,\n    currentFirstChild,\n    newChildren,\n    lanes\n  ) {\n    if (null == newChildren) throw Error(formatProdErrorMessage(151));\n    for (\n      var resultingFirstChild = null,\n        previousNewFiber = null,\n        oldFiber = currentFirstChild,\n        newIdx = (currentFirstChild = 0),\n        nextOldFiber = null,\n        step = newChildren.next();\n      null !== oldFiber && !step.done;\n      newIdx++, step = newChildren.next()\n    ) {\n      oldFiber.index > newIdx\n        ? ((nextOldFiber = oldFiber), (oldFiber = null))\n        : (nextOldFiber = oldFiber.sibling);\n      var newFiber = updateSlot(returnFiber, oldFiber, step.value, lanes);\n      if (null === newFiber) {\n        null === oldFiber && (oldFiber = nextOldFiber);\n        break;\n      }\n      shouldTrackSideEffects &&\n        oldFiber &&\n        null === newFiber.alternate &&\n        deleteChild(returnFiber, oldFiber);\n      currentFirstChild = placeChild(newFiber, currentFirstChild, newIdx);\n      null === previousNewFiber\n        ? (resultingFirstChild = newFiber)\n        : (previousNewFiber.sibling = newFiber);\n      previousNewFiber = newFiber;\n      oldFiber = nextOldFiber;\n    }\n    if (step.done)\n      return (\n        deleteRemainingChildren(returnFiber, oldFiber),\n        isHydrating && pushTreeFork(returnFiber, newIdx),\n        resultingFirstChild\n      );\n    if (null === oldFiber) {\n      for (; !step.done; newIdx++, step = newChildren.next())\n        (step = createChild(returnFiber, step.value, lanes)),\n          null !== step &&\n            ((currentFirstChild = placeChild(step, currentFirstChild, newIdx)),\n            null === previousNewFiber\n              ? (resultingFirstChild = step)\n              : (previousNewFiber.sibling = step),\n            (previousNewFiber = step));\n      isHydrating && pushTreeFork(returnFiber, newIdx);\n      return resultingFirstChild;\n    }\n    for (\n      oldFiber = mapRemainingChildren(oldFiber);\n      !step.done;\n      newIdx++, step = newChildren.next()\n    )\n      (step = updateFromMap(oldFiber, returnFiber, newIdx, step.value, lanes)),\n        null !== step &&\n          (shouldTrackSideEffects &&\n            null !== step.alternate &&\n            oldFiber.delete(null === step.key ? newIdx : step.key),\n          (currentFirstChild = placeChild(step, currentFirstChild, newIdx)),\n          null === previousNewFiber\n            ? (resultingFirstChild = step)\n            : (previousNewFiber.sibling = step),\n          (previousNewFiber = step));\n    shouldTrackSideEffects &&\n      oldFiber.forEach(function (child) {\n        return deleteChild(returnFiber, child);\n      });\n    isHydrating && pushTreeFork(returnFiber, newIdx);\n    return resultingFirstChild;\n  }\n  function reconcileChildFibersImpl(\n    returnFiber,\n    currentFirstChild,\n    newChild,\n    lanes\n  ) {\n    \"object\" === typeof newChild &&\n      null !== newChild &&\n      newChild.type === REACT_FRAGMENT_TYPE &&\n      null === newChild.key &&\n      (newChild = newChild.props.children);\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          a: {\n            for (var key = newChild.key; null !== currentFirstChild; ) {\n              if (currentFirstChild.key === key) {\n                key = newChild.type;\n                if (key === REACT_FRAGMENT_TYPE) {\n                  if (7 === currentFirstChild.tag) {\n                    deleteRemainingChildren(\n                      returnFiber,\n                      currentFirstChild.sibling\n                    );\n                    lanes = useFiber(\n                      currentFirstChild,\n                      newChild.props.children\n                    );\n                    lanes.return = returnFiber;\n                    returnFiber = lanes;\n                    break a;\n                  }\n                } else if (\n                  currentFirstChild.elementType === key ||\n                  (\"object\" === typeof key &&\n                    null !== key &&\n                    key.$$typeof === REACT_LAZY_TYPE &&\n                    resolveLazy(key) === currentFirstChild.type)\n                ) {\n                  deleteRemainingChildren(\n                    returnFiber,\n                    currentFirstChild.sibling\n                  );\n                  lanes = useFiber(currentFirstChild, newChild.props);\n                  coerceRef(lanes, newChild);\n                  lanes.return = returnFiber;\n                  returnFiber = lanes;\n                  break a;\n                }\n                deleteRemainingChildren(returnFiber, currentFirstChild);\n                break;\n              } else deleteChild(returnFiber, currentFirstChild);\n              currentFirstChild = currentFirstChild.sibling;\n            }\n            newChild.type === REACT_FRAGMENT_TYPE\n              ? ((lanes = createFiberFromFragment(\n                  newChild.props.children,\n                  returnFiber.mode,\n                  lanes,\n                  newChild.key\n                )),\n                (lanes.return = returnFiber),\n                (returnFiber = lanes))\n              : ((lanes = createFiberFromTypeAndProps(\n                  newChild.type,\n                  newChild.key,\n                  newChild.props,\n                  null,\n                  returnFiber.mode,\n                  lanes\n                )),\n                coerceRef(lanes, newChild),\n                (lanes.return = returnFiber),\n                (returnFiber = lanes));\n          }\n          return placeSingleChild(returnFiber);\n        case REACT_PORTAL_TYPE:\n          a: {\n            for (key = newChild.key; null !== currentFirstChild; ) {\n              if (currentFirstChild.key === key)\n                if (\n                  4 === currentFirstChild.tag &&\n                  currentFirstChild.stateNode.containerInfo ===\n                    newChild.containerInfo &&\n                  currentFirstChild.stateNode.implementation ===\n                    newChild.implementation\n                ) {\n                  deleteRemainingChildren(\n                    returnFiber,\n                    currentFirstChild.sibling\n                  );\n                  lanes = useFiber(currentFirstChild, newChild.children || []);\n                  lanes.return = returnFiber;\n                  returnFiber = lanes;\n                  break a;\n                } else {\n                  deleteRemainingChildren(returnFiber, currentFirstChild);\n                  break;\n                }\n              else deleteChild(returnFiber, currentFirstChild);\n              currentFirstChild = currentFirstChild.sibling;\n            }\n            lanes = createFiberFromPortal(newChild, returnFiber.mode, lanes);\n            lanes.return = returnFiber;\n            returnFiber = lanes;\n          }\n          return placeSingleChild(returnFiber);\n        case REACT_LAZY_TYPE:\n          return (\n            (newChild = resolveLazy(newChild)),\n            reconcileChildFibersImpl(\n              returnFiber,\n              currentFirstChild,\n              newChild,\n              lanes\n            )\n          );\n      }\n      if (isArrayImpl(newChild))\n        return reconcileChildrenArray(\n          returnFiber,\n          currentFirstChild,\n          newChild,\n          lanes\n        );\n      if (getIteratorFn(newChild)) {\n        key = getIteratorFn(newChild);\n        if (\"function\" !== typeof key) throw Error(formatProdErrorMessage(150));\n        newChild = key.call(newChild);\n        return reconcileChildrenIterator(\n          returnFiber,\n          currentFirstChild,\n          newChild,\n          lanes\n        );\n      }\n      if (\"function\" === typeof newChild.then)\n        return reconcileChildFibersImpl(\n          returnFiber,\n          currentFirstChild,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return reconcileChildFibersImpl(\n          returnFiber,\n          currentFirstChild,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectTypeImpl(returnFiber, newChild);\n    }\n    return (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n      ? ((newChild = \"\" + newChild),\n        null !== currentFirstChild && 6 === currentFirstChild.tag\n          ? (deleteRemainingChildren(returnFiber, currentFirstChild.sibling),\n            (lanes = useFiber(currentFirstChild, newChild)),\n            (lanes.return = returnFiber),\n            (returnFiber = lanes))\n          : (deleteRemainingChildren(returnFiber, currentFirstChild),\n            (lanes = createFiberFromText(newChild, returnFiber.mode, lanes)),\n            (lanes.return = returnFiber),\n            (returnFiber = lanes)),\n        placeSingleChild(returnFiber))\n      : deleteRemainingChildren(returnFiber, currentFirstChild);\n  }\n  return function (returnFiber, currentFirstChild, newChild, lanes) {\n    try {\n      thenableIndexCounter$1 = 0;\n      var firstChildFiber = reconcileChildFibersImpl(\n        returnFiber,\n        currentFirstChild,\n        newChild,\n        lanes\n      );\n      thenableState$1 = null;\n      return firstChildFiber;\n    } catch (x) {\n      if (x === SuspenseException || x === SuspenseActionException) throw x;\n      var fiber = createFiberImplClass(29, x, null, returnFiber.mode);\n      fiber.lanes = lanes;\n      fiber.return = returnFiber;\n      return fiber;\n    } finally {\n    }\n  };\n}\nvar reconcileChildFibers = createChildReconciler(!0),\n  mountChildFibers = createChildReconciler(!1),\n  hasForceUpdate = !1;\nfunction initializeUpdateQueue(fiber) {\n  fiber.updateQueue = {\n    baseState: fiber.memoizedState,\n    firstBaseUpdate: null,\n    lastBaseUpdate: null,\n    shared: { pending: null, lanes: 0, hiddenCallbacks: null },\n    callbacks: null\n  };\n}\nfunction cloneUpdateQueue(current, workInProgress) {\n  current = current.updateQueue;\n  workInProgress.updateQueue === current &&\n    (workInProgress.updateQueue = {\n      baseState: current.baseState,\n      firstBaseUpdate: current.firstBaseUpdate,\n      lastBaseUpdate: current.lastBaseUpdate,\n      shared: current.shared,\n      callbacks: null\n    });\n}\nfunction createUpdate(lane) {\n  return { lane: lane, tag: 0, payload: null, callback: null, next: null };\n}\nfunction enqueueUpdate(fiber, update, lane) {\n  var updateQueue = fiber.updateQueue;\n  if (null === updateQueue) return null;\n  updateQueue = updateQueue.shared;\n  if (0 !== (executionContext & 2)) {\n    var pending = updateQueue.pending;\n    null === pending\n      ? (update.next = update)\n      : ((update.next = pending.next), (pending.next = update));\n    updateQueue.pending = update;\n    update = getRootForUpdatedFiber(fiber);\n    markUpdateLaneFromFiberToRoot(fiber, null, lane);\n    return update;\n  }\n  enqueueUpdate$1(fiber, updateQueue, update, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction entangleTransitions(root, fiber, lane) {\n  fiber = fiber.updateQueue;\n  if (null !== fiber && ((fiber = fiber.shared), 0 !== (lane & 4194048))) {\n    var queueLanes = fiber.lanes;\n    queueLanes &= root.pendingLanes;\n    lane |= queueLanes;\n    fiber.lanes = lane;\n    markRootEntangled(root, lane);\n  }\n}\nfunction enqueueCapturedUpdate(workInProgress, capturedUpdate) {\n  var queue = workInProgress.updateQueue,\n    current = workInProgress.alternate;\n  if (\n    null !== current &&\n    ((current = current.updateQueue), queue === current)\n  ) {\n    var newFirst = null,\n      newLast = null;\n    queue = queue.firstBaseUpdate;\n    if (null !== queue) {\n      do {\n        var clone = {\n          lane: queue.lane,\n          tag: queue.tag,\n          payload: queue.payload,\n          callback: null,\n          next: null\n        };\n        null === newLast\n          ? (newFirst = newLast = clone)\n          : (newLast = newLast.next = clone);\n        queue = queue.next;\n      } while (null !== queue);\n      null === newLast\n        ? (newFirst = newLast = capturedUpdate)\n        : (newLast = newLast.next = capturedUpdate);\n    } else newFirst = newLast = capturedUpdate;\n    queue = {\n      baseState: current.baseState,\n      firstBaseUpdate: newFirst,\n      lastBaseUpdate: newLast,\n      shared: current.shared,\n      callbacks: current.callbacks\n    };\n    workInProgress.updateQueue = queue;\n    return;\n  }\n  workInProgress = queue.lastBaseUpdate;\n  null === workInProgress\n    ? (queue.firstBaseUpdate = capturedUpdate)\n    : (workInProgress.next = capturedUpdate);\n  queue.lastBaseUpdate = capturedUpdate;\n}\nvar didReadFromEntangledAsyncAction = !1;\nfunction suspendIfUpdateReadFromEntangledAsyncAction() {\n  if (didReadFromEntangledAsyncAction) {\n    var entangledActionThenable = currentEntangledActionThenable;\n    if (null !== entangledActionThenable) throw entangledActionThenable;\n  }\n}\nfunction processUpdateQueue(\n  workInProgress$jscomp$0,\n  props,\n  instance$jscomp$0,\n  renderLanes\n) {\n  didReadFromEntangledAsyncAction = !1;\n  var queue = workInProgress$jscomp$0.updateQueue;\n  hasForceUpdate = !1;\n  var firstBaseUpdate = queue.firstBaseUpdate,\n    lastBaseUpdate = queue.lastBaseUpdate,\n    pendingQueue = queue.shared.pending;\n  if (null !== pendingQueue) {\n    queue.shared.pending = null;\n    var lastPendingUpdate = pendingQueue,\n      firstPendingUpdate = lastPendingUpdate.next;\n    lastPendingUpdate.next = null;\n    null === lastBaseUpdate\n      ? (firstBaseUpdate = firstPendingUpdate)\n      : (lastBaseUpdate.next = firstPendingUpdate);\n    lastBaseUpdate = lastPendingUpdate;\n    var current = workInProgress$jscomp$0.alternate;\n    null !== current &&\n      ((current = current.updateQueue),\n      (pendingQueue = current.lastBaseUpdate),\n      pendingQueue !== lastBaseUpdate &&\n        (null === pendingQueue\n          ? (current.firstBaseUpdate = firstPendingUpdate)\n          : (pendingQueue.next = firstPendingUpdate),\n        (current.lastBaseUpdate = lastPendingUpdate)));\n  }\n  if (null !== firstBaseUpdate) {\n    var newState = queue.baseState;\n    lastBaseUpdate = 0;\n    current = firstPendingUpdate = lastPendingUpdate = null;\n    pendingQueue = firstBaseUpdate;\n    do {\n      var updateLane = pendingQueue.lane & -536870913,\n        isHiddenUpdate = updateLane !== pendingQueue.lane;\n      if (\n        isHiddenUpdate\n          ? (workInProgressRootRenderLanes & updateLane) === updateLane\n          : (renderLanes & updateLane) === updateLane\n      ) {\n        0 !== updateLane &&\n          updateLane === currentEntangledLane &&\n          (didReadFromEntangledAsyncAction = !0);\n        null !== current &&\n          (current = current.next =\n            {\n              lane: 0,\n              tag: pendingQueue.tag,\n              payload: pendingQueue.payload,\n              callback: null,\n              next: null\n            });\n        a: {\n          var workInProgress = workInProgress$jscomp$0,\n            update = pendingQueue;\n          updateLane = props;\n          var instance = instance$jscomp$0;\n          switch (update.tag) {\n            case 1:\n              workInProgress = update.payload;\n              if (\"function\" === typeof workInProgress) {\n                newState = workInProgress.call(instance, newState, updateLane);\n                break a;\n              }\n              newState = workInProgress;\n              break a;\n            case 3:\n              workInProgress.flags = (workInProgress.flags & -65537) | 128;\n            case 0:\n              workInProgress = update.payload;\n              updateLane =\n                \"function\" === typeof workInProgress\n                  ? workInProgress.call(instance, newState, updateLane)\n                  : workInProgress;\n              if (null === updateLane || void 0 === updateLane) break a;\n              newState = assign({}, newState, updateLane);\n              break a;\n            case 2:\n              hasForceUpdate = !0;\n          }\n        }\n        updateLane = pendingQueue.callback;\n        null !== updateLane &&\n          ((workInProgress$jscomp$0.flags |= 64),\n          isHiddenUpdate && (workInProgress$jscomp$0.flags |= 8192),\n          (isHiddenUpdate = queue.callbacks),\n          null === isHiddenUpdate\n            ? (queue.callbacks = [updateLane])\n            : isHiddenUpdate.push(updateLane));\n      } else\n        (isHiddenUpdate = {\n          lane: updateLane,\n          tag: pendingQueue.tag,\n          payload: pendingQueue.payload,\n          callback: pendingQueue.callback,\n          next: null\n        }),\n          null === current\n            ? ((firstPendingUpdate = current = isHiddenUpdate),\n              (lastPendingUpdate = newState))\n            : (current = current.next = isHiddenUpdate),\n          (lastBaseUpdate |= updateLane);\n      pendingQueue = pendingQueue.next;\n      if (null === pendingQueue)\n        if (((pendingQueue = queue.shared.pending), null === pendingQueue))\n          break;\n        else\n          (isHiddenUpdate = pendingQueue),\n            (pendingQueue = isHiddenUpdate.next),\n            (isHiddenUpdate.next = null),\n            (queue.lastBaseUpdate = isHiddenUpdate),\n            (queue.shared.pending = null);\n    } while (1);\n    null === current && (lastPendingUpdate = newState);\n    queue.baseState = lastPendingUpdate;\n    queue.firstBaseUpdate = firstPendingUpdate;\n    queue.lastBaseUpdate = current;\n    null === firstBaseUpdate && (queue.shared.lanes = 0);\n    workInProgressRootSkippedLanes |= lastBaseUpdate;\n    workInProgress$jscomp$0.lanes = lastBaseUpdate;\n    workInProgress$jscomp$0.memoizedState = newState;\n  }\n}\nfunction callCallback(callback, context) {\n  if (\"function\" !== typeof callback)\n    throw Error(formatProdErrorMessage(191, callback));\n  callback.call(context);\n}\nfunction commitCallbacks(updateQueue, context) {\n  var callbacks = updateQueue.callbacks;\n  if (null !== callbacks)\n    for (\n      updateQueue.callbacks = null, updateQueue = 0;\n      updateQueue < callbacks.length;\n      updateQueue++\n    )\n      callCallback(callbacks[updateQueue], context);\n}\nvar currentTreeHiddenStackCursor = createCursor(null),\n  prevEntangledRenderLanesCursor = createCursor(0);\nfunction pushHiddenContext(fiber, context) {\n  fiber = entangledRenderLanes;\n  push(prevEntangledRenderLanesCursor, fiber);\n  push(currentTreeHiddenStackCursor, context);\n  entangledRenderLanes = fiber | context.baseLanes;\n}\nfunction reuseHiddenContextOnStack() {\n  push(prevEntangledRenderLanesCursor, entangledRenderLanes);\n  push(currentTreeHiddenStackCursor, currentTreeHiddenStackCursor.current);\n}\nfunction popHiddenContext() {\n  entangledRenderLanes = prevEntangledRenderLanesCursor.current;\n  pop(currentTreeHiddenStackCursor);\n  pop(prevEntangledRenderLanesCursor);\n}\nvar suspenseHandlerStackCursor = createCursor(null),\n  shellBoundary = null;\nfunction pushPrimaryTreeSuspenseHandler(handler) {\n  var current = handler.alternate;\n  push(suspenseStackCursor, suspenseStackCursor.current & 1);\n  push(suspenseHandlerStackCursor, handler);\n  null === shellBoundary &&\n    (null === current || null !== currentTreeHiddenStackCursor.current\n      ? (shellBoundary = handler)\n      : null !== current.memoizedState && (shellBoundary = handler));\n}\nfunction pushDehydratedActivitySuspenseHandler(fiber) {\n  push(suspenseStackCursor, suspenseStackCursor.current);\n  push(suspenseHandlerStackCursor, fiber);\n  null === shellBoundary && (shellBoundary = fiber);\n}\nfunction pushOffscreenSuspenseHandler(fiber) {\n  22 === fiber.tag\n    ? (push(suspenseStackCursor, suspenseStackCursor.current),\n      push(suspenseHandlerStackCursor, fiber),\n      null === shellBoundary && (shellBoundary = fiber))\n    : reuseSuspenseHandlerOnStack(fiber);\n}\nfunction reuseSuspenseHandlerOnStack() {\n  push(suspenseStackCursor, suspenseStackCursor.current);\n  push(suspenseHandlerStackCursor, suspenseHandlerStackCursor.current);\n}\nfunction popSuspenseHandler(fiber) {\n  pop(suspenseHandlerStackCursor);\n  shellBoundary === fiber && (shellBoundary = null);\n  pop(suspenseStackCursor);\n}\nvar suspenseStackCursor = createCursor(0);\nfunction findFirstSuspended(row) {\n  for (var node = row; null !== node; ) {\n    if (13 === node.tag) {\n      var state = node.memoizedState;\n      if (\n        null !== state &&\n        ((state = state.dehydrated),\n        null === state ||\n          isSuspenseInstancePending(state) ||\n          isSuspenseInstanceFallback(state))\n      )\n        return node;\n    } else if (\n      19 === node.tag &&\n      (\"forwards\" === node.memoizedProps.revealOrder ||\n        \"backwards\" === node.memoizedProps.revealOrder ||\n        \"unstable_legacy-backwards\" === node.memoizedProps.revealOrder ||\n        \"together\" === node.memoizedProps.revealOrder)\n    ) {\n      if (0 !== (node.flags & 128)) return node;\n    } else if (null !== node.child) {\n      node.child.return = node;\n      node = node.child;\n      continue;\n    }\n    if (node === row) break;\n    for (; null === node.sibling; ) {\n      if (null === node.return || node.return === row) return null;\n      node = node.return;\n    }\n    node.sibling.return = node.return;\n    node = node.sibling;\n  }\n  return null;\n}\nvar renderLanes = 0,\n  currentlyRenderingFiber = null,\n  currentHook = null,\n  workInProgressHook = null,\n  didScheduleRenderPhaseUpdate = !1,\n  didScheduleRenderPhaseUpdateDuringThisPass = !1,\n  shouldDoubleInvokeUserFnsInHooksDEV = !1,\n  localIdCounter = 0,\n  thenableIndexCounter = 0,\n  thenableState = null,\n  globalClientIdCounter = 0;\nfunction throwInvalidHookError() {\n  throw Error(formatProdErrorMessage(321));\n}\nfunction areHookInputsEqual(nextDeps, prevDeps) {\n  if (null === prevDeps) return !1;\n  for (var i = 0; i < prevDeps.length && i < nextDeps.length; i++)\n    if (!objectIs(nextDeps[i], prevDeps[i])) return !1;\n  return !0;\n}\nfunction renderWithHooks(\n  current,\n  workInProgress,\n  Component,\n  props,\n  secondArg,\n  nextRenderLanes\n) {\n  renderLanes = nextRenderLanes;\n  currentlyRenderingFiber = workInProgress;\n  workInProgress.memoizedState = null;\n  workInProgress.updateQueue = null;\n  workInProgress.lanes = 0;\n  ReactSharedInternals.H =\n    null === current || null === current.memoizedState\n      ? HooksDispatcherOnMount\n      : HooksDispatcherOnUpdate;\n  shouldDoubleInvokeUserFnsInHooksDEV = !1;\n  nextRenderLanes = Component(props, secondArg);\n  shouldDoubleInvokeUserFnsInHooksDEV = !1;\n  didScheduleRenderPhaseUpdateDuringThisPass &&\n    (nextRenderLanes = renderWithHooksAgain(\n      workInProgress,\n      Component,\n      props,\n      secondArg\n    ));\n  finishRenderingHooks(current);\n  return nextRenderLanes;\n}\nfunction finishRenderingHooks(current) {\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  var didRenderTooFewHooks = null !== currentHook && null !== currentHook.next;\n  renderLanes = 0;\n  workInProgressHook = currentHook = currentlyRenderingFiber = null;\n  didScheduleRenderPhaseUpdate = !1;\n  thenableIndexCounter = 0;\n  thenableState = null;\n  if (didRenderTooFewHooks) throw Error(formatProdErrorMessage(300));\n  null === current ||\n    didReceiveUpdate ||\n    ((current = current.dependencies),\n    null !== current &&\n      checkIfContextChanged(current) &&\n      (didReceiveUpdate = !0));\n}\nfunction renderWithHooksAgain(workInProgress, Component, props, secondArg) {\n  currentlyRenderingFiber = workInProgress;\n  var numberOfReRenders = 0;\n  do {\n    didScheduleRenderPhaseUpdateDuringThisPass && (thenableState = null);\n    thenableIndexCounter = 0;\n    didScheduleRenderPhaseUpdateDuringThisPass = !1;\n    if (25 <= numberOfReRenders) throw Error(formatProdErrorMessage(301));\n    numberOfReRenders += 1;\n    workInProgressHook = currentHook = null;\n    if (null != workInProgress.updateQueue) {\n      var children = workInProgress.updateQueue;\n      children.lastEffect = null;\n      children.events = null;\n      children.stores = null;\n      null != children.memoCache && (children.memoCache.index = 0);\n    }\n    ReactSharedInternals.H = HooksDispatcherOnRerender;\n    children = Component(props, secondArg);\n  } while (didScheduleRenderPhaseUpdateDuringThisPass);\n  return children;\n}\nfunction TransitionAwareHostComponent() {\n  var dispatcher = ReactSharedInternals.H,\n    maybeThenable = dispatcher.useState()[0];\n  maybeThenable =\n    \"function\" === typeof maybeThenable.then\n      ? useThenable(maybeThenable)\n      : maybeThenable;\n  dispatcher = dispatcher.useState()[0];\n  (null !== currentHook ? currentHook.memoizedState : null) !== dispatcher &&\n    (currentlyRenderingFiber.flags |= 1024);\n  return maybeThenable;\n}\nfunction checkDidRenderIdHook() {\n  var didRenderIdHook = 0 !== localIdCounter;\n  localIdCounter = 0;\n  return didRenderIdHook;\n}\nfunction bailoutHooks(current, workInProgress, lanes) {\n  workInProgress.updateQueue = current.updateQueue;\n  workInProgress.flags &= -2053;\n  current.lanes &= ~lanes;\n}\nfunction resetHooksOnUnwind(workInProgress) {\n  if (didScheduleRenderPhaseUpdate) {\n    for (\n      workInProgress = workInProgress.memoizedState;\n      null !== workInProgress;\n\n    ) {\n      var queue = workInProgress.queue;\n      null !== queue && (queue.pending = null);\n      workInProgress = workInProgress.next;\n    }\n    didScheduleRenderPhaseUpdate = !1;\n  }\n  renderLanes = 0;\n  workInProgressHook = currentHook = currentlyRenderingFiber = null;\n  didScheduleRenderPhaseUpdateDuringThisPass = !1;\n  thenableIndexCounter = localIdCounter = 0;\n  thenableState = null;\n}\nfunction mountWorkInProgressHook() {\n  var hook = {\n    memoizedState: null,\n    baseState: null,\n    baseQueue: null,\n    queue: null,\n    next: null\n  };\n  null === workInProgressHook\n    ? (currentlyRenderingFiber.memoizedState = workInProgressHook = hook)\n    : (workInProgressHook = workInProgressHook.next = hook);\n  return workInProgressHook;\n}\nfunction updateWorkInProgressHook() {\n  if (null === currentHook) {\n    var nextCurrentHook = currentlyRenderingFiber.alternate;\n    nextCurrentHook =\n      null !== nextCurrentHook ? nextCurrentHook.memoizedState : null;\n  } else nextCurrentHook = currentHook.next;\n  var nextWorkInProgressHook =\n    null === workInProgressHook\n      ? currentlyRenderingFiber.memoizedState\n      : workInProgressHook.next;\n  if (null !== nextWorkInProgressHook)\n    (workInProgressHook = nextWorkInProgressHook),\n      (currentHook = nextCurrentHook);\n  else {\n    if (null === nextCurrentHook) {\n      if (null === currentlyRenderingFiber.alternate)\n        throw Error(formatProdErrorMessage(467));\n      throw Error(formatProdErrorMessage(310));\n    }\n    currentHook = nextCurrentHook;\n    nextCurrentHook = {\n      memoizedState: currentHook.memoizedState,\n      baseState: currentHook.baseState,\n      baseQueue: currentHook.baseQueue,\n      queue: currentHook.queue,\n      next: null\n    };\n    null === workInProgressHook\n      ? (currentlyRenderingFiber.memoizedState = workInProgressHook =\n          nextCurrentHook)\n      : (workInProgressHook = workInProgressHook.next = nextCurrentHook);\n  }\n  return workInProgressHook;\n}\nfunction createFunctionComponentUpdateQueue() {\n  return { lastEffect: null, events: null, stores: null, memoCache: null };\n}\nfunction useThenable(thenable) {\n  var index = thenableIndexCounter;\n  thenableIndexCounter += 1;\n  null === thenableState && (thenableState = []);\n  thenable = trackUsedThenable(thenableState, thenable, index);\n  index = currentlyRenderingFiber;\n  null ===\n    (null === workInProgressHook\n      ? index.memoizedState\n      : workInProgressHook.next) &&\n    ((index = index.alternate),\n    (ReactSharedInternals.H =\n      null === index || null === index.memoizedState\n        ? HooksDispatcherOnMount\n        : HooksDispatcherOnUpdate));\n  return thenable;\n}\nfunction use(usable) {\n  if (null !== usable && \"object\" === typeof usable) {\n    if (\"function\" === typeof usable.then) return useThenable(usable);\n    if (usable.$$typeof === REACT_CONTEXT_TYPE) return readContext(usable);\n  }\n  throw Error(formatProdErrorMessage(438, String(usable)));\n}\nfunction useMemoCache(size) {\n  var memoCache = null,\n    updateQueue = currentlyRenderingFiber.updateQueue;\n  null !== updateQueue && (memoCache = updateQueue.memoCache);\n  if (null == memoCache) {\n    var current = currentlyRenderingFiber.alternate;\n    null !== current &&\n      ((current = current.updateQueue),\n      null !== current &&\n        ((current = current.memoCache),\n        null != current &&\n          (memoCache = {\n            data: current.data.map(function (array) {\n              return array.slice();\n            }),\n            index: 0\n          })));\n  }\n  null == memoCache && (memoCache = { data: [], index: 0 });\n  null === updateQueue &&\n    ((updateQueue = createFunctionComponentUpdateQueue()),\n    (currentlyRenderingFiber.updateQueue = updateQueue));\n  updateQueue.memoCache = memoCache;\n  updateQueue = memoCache.data[memoCache.index];\n  if (void 0 === updateQueue)\n    for (\n      updateQueue = memoCache.data[memoCache.index] = Array(size), current = 0;\n      current < size;\n      current++\n    )\n      updateQueue[current] = REACT_MEMO_CACHE_SENTINEL;\n  memoCache.index++;\n  return updateQueue;\n}\nfunction basicStateReducer(state, action) {\n  return \"function\" === typeof action ? action(state) : action;\n}\nfunction updateReducer(reducer) {\n  var hook = updateWorkInProgressHook();\n  return updateReducerImpl(hook, currentHook, reducer);\n}\nfunction updateReducerImpl(hook, current, reducer) {\n  var queue = hook.queue;\n  if (null === queue) throw Error(formatProdErrorMessage(311));\n  queue.lastRenderedReducer = reducer;\n  var baseQueue = hook.baseQueue,\n    pendingQueue = queue.pending;\n  if (null !== pendingQueue) {\n    if (null !== baseQueue) {\n      var baseFirst = baseQueue.next;\n      baseQueue.next = pendingQueue.next;\n      pendingQueue.next = baseFirst;\n    }\n    current.baseQueue = baseQueue = pendingQueue;\n    queue.pending = null;\n  }\n  pendingQueue = hook.baseState;\n  if (null === baseQueue) hook.memoizedState = pendingQueue;\n  else {\n    current = baseQueue.next;\n    var newBaseQueueFirst = (baseFirst = null),\n      newBaseQueueLast = null,\n      update = current,\n      didReadFromEntangledAsyncAction$60 = !1;\n    do {\n      var updateLane = update.lane & -536870913;\n      if (\n        updateLane !== update.lane\n          ? (workInProgressRootRenderLanes & updateLane) === updateLane\n          : (renderLanes & updateLane) === updateLane\n      ) {\n        var revertLane = update.revertLane;\n        if (0 === revertLane)\n          null !== newBaseQueueLast &&\n            (newBaseQueueLast = newBaseQueueLast.next =\n              {\n                lane: 0,\n                revertLane: 0,\n                gesture: null,\n                action: update.action,\n                hasEagerState: update.hasEagerState,\n                eagerState: update.eagerState,\n                next: null\n              }),\n            updateLane === currentEntangledLane &&\n              (didReadFromEntangledAsyncAction$60 = !0);\n        else if ((renderLanes & revertLane) === revertLane) {\n          update = update.next;\n          revertLane === currentEntangledLane &&\n            (didReadFromEntangledAsyncAction$60 = !0);\n          continue;\n        } else\n          (updateLane = {\n            lane: 0,\n            revertLane: update.revertLane,\n            gesture: null,\n            action: update.action,\n            hasEagerState: update.hasEagerState,\n            eagerState: update.eagerState,\n            next: null\n          }),\n            null === newBaseQueueLast\n              ? ((newBaseQueueFirst = newBaseQueueLast = updateLane),\n                (baseFirst = pendingQueue))\n              : (newBaseQueueLast = newBaseQueueLast.next = updateLane),\n            (currentlyRenderingFiber.lanes |= revertLane),\n            (workInProgressRootSkippedLanes |= revertLane);\n        updateLane = update.action;\n        shouldDoubleInvokeUserFnsInHooksDEV &&\n          reducer(pendingQueue, updateLane);\n        pendingQueue = update.hasEagerState\n          ? update.eagerState\n          : reducer(pendingQueue, updateLane);\n      } else\n        (revertLane = {\n          lane: updateLane,\n          revertLane: update.revertLane,\n          gesture: update.gesture,\n          action: update.action,\n          hasEagerState: update.hasEagerState,\n          eagerState: update.eagerState,\n          next: null\n        }),\n          null === newBaseQueueLast\n            ? ((newBaseQueueFirst = newBaseQueueLast = revertLane),\n              (baseFirst = pendingQueue))\n            : (newBaseQueueLast = newBaseQueueLast.next = revertLane),\n          (currentlyRenderingFiber.lanes |= updateLane),\n          (workInProgressRootSkippedLanes |= updateLane);\n      update = update.next;\n    } while (null !== update && update !== current);\n    null === newBaseQueueLast\n      ? (baseFirst = pendingQueue)\n      : (newBaseQueueLast.next = newBaseQueueFirst);\n    if (\n      !objectIs(pendingQueue, hook.memoizedState) &&\n      ((didReceiveUpdate = !0),\n      didReadFromEntangledAsyncAction$60 &&\n        ((reducer = currentEntangledActionThenable), null !== reducer))\n    )\n      throw reducer;\n    hook.memoizedState = pendingQueue;\n    hook.baseState = baseFirst;\n    hook.baseQueue = newBaseQueueLast;\n    queue.lastRenderedState = pendingQueue;\n  }\n  null === baseQueue && (queue.lanes = 0);\n  return [hook.memoizedState, queue.dispatch];\n}\nfunction rerenderReducer(reducer) {\n  var hook = updateWorkInProgressHook(),\n    queue = hook.queue;\n  if (null === queue) throw Error(formatProdErrorMessage(311));\n  queue.lastRenderedReducer = reducer;\n  var dispatch = queue.dispatch,\n    lastRenderPhaseUpdate = queue.pending,\n    newState = hook.memoizedState;\n  if (null !== lastRenderPhaseUpdate) {\n    queue.pending = null;\n    var update = (lastRenderPhaseUpdate = lastRenderPhaseUpdate.next);\n    do (newState = reducer(newState, update.action)), (update = update.next);\n    while (update !== lastRenderPhaseUpdate);\n    objectIs(newState, hook.memoizedState) || (didReceiveUpdate = !0);\n    hook.memoizedState = newState;\n    null === hook.baseQueue && (hook.baseState = newState);\n    queue.lastRenderedState = newState;\n  }\n  return [newState, dispatch];\n}\nfunction updateSyncExternalStore(subscribe, getSnapshot, getServerSnapshot) {\n  var fiber = currentlyRenderingFiber,\n    hook = updateWorkInProgressHook(),\n    isHydrating$jscomp$0 = isHydrating;\n  if (isHydrating$jscomp$0) {\n    if (void 0 === getServerSnapshot) throw Error(formatProdErrorMessage(407));\n    getServerSnapshot = getServerSnapshot();\n  } else getServerSnapshot = getSnapshot();\n  var snapshotChanged = !objectIs(\n    (currentHook || hook).memoizedState,\n    getServerSnapshot\n  );\n  snapshotChanged &&\n    ((hook.memoizedState = getServerSnapshot), (didReceiveUpdate = !0));\n  hook = hook.queue;\n  updateEffect(subscribeToStore.bind(null, fiber, hook, subscribe), [\n    subscribe\n  ]);\n  if (\n    hook.getSnapshot !== getSnapshot ||\n    snapshotChanged ||\n    (null !== workInProgressHook && workInProgressHook.memoizedState.tag & 1)\n  ) {\n    fiber.flags |= 2048;\n    pushSimpleEffect(\n      9,\n      { destroy: void 0 },\n      updateStoreInstance.bind(\n        null,\n        fiber,\n        hook,\n        getServerSnapshot,\n        getSnapshot\n      ),\n      null\n    );\n    if (null === workInProgressRoot) throw Error(formatProdErrorMessage(349));\n    isHydrating$jscomp$0 ||\n      0 !== (renderLanes & 127) ||\n      pushStoreConsistencyCheck(fiber, getSnapshot, getServerSnapshot);\n  }\n  return getServerSnapshot;\n}\nfunction pushStoreConsistencyCheck(fiber, getSnapshot, renderedSnapshot) {\n  fiber.flags |= 16384;\n  fiber = { getSnapshot: getSnapshot, value: renderedSnapshot };\n  getSnapshot = currentlyRenderingFiber.updateQueue;\n  null === getSnapshot\n    ? ((getSnapshot = createFunctionComponentUpdateQueue()),\n      (currentlyRenderingFiber.updateQueue = getSnapshot),\n      (getSnapshot.stores = [fiber]))\n    : ((renderedSnapshot = getSnapshot.stores),\n      null === renderedSnapshot\n        ? (getSnapshot.stores = [fiber])\n        : renderedSnapshot.push(fiber));\n}\nfunction updateStoreInstance(fiber, inst, nextSnapshot, getSnapshot) {\n  inst.value = nextSnapshot;\n  inst.getSnapshot = getSnapshot;\n  checkIfSnapshotChanged(inst) && forceStoreRerender(fiber);\n}\nfunction subscribeToStore(fiber, inst, subscribe) {\n  return subscribe(function () {\n    checkIfSnapshotChanged(inst) && forceStoreRerender(fiber);\n  });\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction forceStoreRerender(fiber) {\n  var root = enqueueConcurrentRenderForLane(fiber, 2);\n  null !== root && scheduleUpdateOnFiber(root, fiber, 2);\n}\nfunction mountStateImpl(initialState) {\n  var hook = mountWorkInProgressHook();\n  if (\"function\" === typeof initialState) {\n    var initialStateInitializer = initialState;\n    initialState = initialStateInitializer();\n    if (shouldDoubleInvokeUserFnsInHooksDEV) {\n      setIsStrictModeForDevtools(!0);\n      try {\n        initialStateInitializer();\n      } finally {\n        setIsStrictModeForDevtools(!1);\n      }\n    }\n  }\n  hook.memoizedState = hook.baseState = initialState;\n  hook.queue = {\n    pending: null,\n    lanes: 0,\n    dispatch: null,\n    lastRenderedReducer: basicStateReducer,\n    lastRenderedState: initialState\n  };\n  return hook;\n}\nfunction updateOptimisticImpl(hook, current, passthrough, reducer) {\n  hook.baseState = passthrough;\n  return updateReducerImpl(\n    hook,\n    currentHook,\n    \"function\" === typeof reducer ? reducer : basicStateReducer\n  );\n}\nfunction dispatchActionState(\n  fiber,\n  actionQueue,\n  setPendingState,\n  setState,\n  payload\n) {\n  if (isRenderPhaseUpdate(fiber)) throw Error(formatProdErrorMessage(485));\n  fiber = actionQueue.action;\n  if (null !== fiber) {\n    var actionNode = {\n      payload: payload,\n      action: fiber,\n      next: null,\n      isTransition: !0,\n      status: \"pending\",\n      value: null,\n      reason: null,\n      listeners: [],\n      then: function (listener) {\n        actionNode.listeners.push(listener);\n      }\n    };\n    null !== ReactSharedInternals.T\n      ? setPendingState(!0)\n      : (actionNode.isTransition = !1);\n    setState(actionNode);\n    setPendingState = actionQueue.pending;\n    null === setPendingState\n      ? ((actionNode.next = actionQueue.pending = actionNode),\n        runActionStateAction(actionQueue, actionNode))\n      : ((actionNode.next = setPendingState.next),\n        (actionQueue.pending = setPendingState.next = actionNode));\n  }\n}\nfunction runActionStateAction(actionQueue, node) {\n  var action = node.action,\n    payload = node.payload,\n    prevState = actionQueue.state;\n  if (node.isTransition) {\n    var prevTransition = ReactSharedInternals.T,\n      currentTransition = {};\n    ReactSharedInternals.T = currentTransition;\n    try {\n      var returnValue = action(prevState, payload),\n        onStartTransitionFinish = ReactSharedInternals.S;\n      null !== onStartTransitionFinish &&\n        onStartTransitionFinish(currentTransition, returnValue);\n      handleActionReturnValue(actionQueue, node, returnValue);\n    } catch (error) {\n      onActionError(actionQueue, node, error);\n    } finally {\n      null !== prevTransition &&\n        null !== currentTransition.types &&\n        (prevTransition.types = currentTransition.types),\n        (ReactSharedInternals.T = prevTransition);\n    }\n  } else\n    try {\n      (prevTransition = action(prevState, payload)),\n        handleActionReturnValue(actionQueue, node, prevTransition);\n    } catch (error$66) {\n      onActionError(actionQueue, node, error$66);\n    }\n}\nfunction handleActionReturnValue(actionQueue, node, returnValue) {\n  null !== returnValue &&\n  \"object\" === typeof returnValue &&\n  \"function\" === typeof returnValue.then\n    ? returnValue.then(\n        function (nextState) {\n          onActionSuccess(actionQueue, node, nextState);\n        },\n        function (error) {\n          return onActionError(actionQueue, node, error);\n        }\n      )\n    : onActionSuccess(actionQueue, node, returnValue);\n}\nfunction onActionSuccess(actionQueue, actionNode, nextState) {\n  actionNode.status = \"fulfilled\";\n  actionNode.value = nextState;\n  notifyActionListeners(actionNode);\n  actionQueue.state = nextState;\n  actionNode = actionQueue.pending;\n  null !== actionNode &&\n    ((nextState = actionNode.next),\n    nextState === actionNode\n      ? (actionQueue.pending = null)\n      : ((nextState = nextState.next),\n        (actionNode.next = nextState),\n        runActionStateAction(actionQueue, nextState)));\n}\nfunction onActionError(actionQueue, actionNode, error) {\n  var last = actionQueue.pending;\n  actionQueue.pending = null;\n  if (null !== last) {\n    last = last.next;\n    do\n      (actionNode.status = \"rejected\"),\n        (actionNode.reason = error),\n        notifyActionListeners(actionNode),\n        (actionNode = actionNode.next);\n    while (actionNode !== last);\n  }\n  actionQueue.action = null;\n}\nfunction notifyActionListeners(actionNode) {\n  actionNode = actionNode.listeners;\n  for (var i = 0; i < actionNode.length; i++) (0, actionNode[i])();\n}\nfunction actionStateReducer(oldState, newState) {\n  return newState;\n}\nfunction mountActionState(action, initialStateProp) {\n  if (isHydrating) {\n    var ssrFormState = workInProgressRoot.formState;\n    if (null !== ssrFormState) {\n      a: {\n        var JSCompiler_inline_result = currentlyRenderingFiber;\n        if (isHydrating) {\n          if (nextHydratableInstance) {\n            b: {\n              var JSCompiler_inline_result$jscomp$0 = nextHydratableInstance;\n              for (\n                var inRootOrSingleton = rootOrSingletonContext;\n                8 !== JSCompiler_inline_result$jscomp$0.nodeType;\n\n              ) {\n                if (!inRootOrSingleton) {\n                  JSCompiler_inline_result$jscomp$0 = null;\n                  break b;\n                }\n                JSCompiler_inline_result$jscomp$0 = getNextHydratable(\n                  JSCompiler_inline_result$jscomp$0.nextSibling\n                );\n                if (null === JSCompiler_inline_result$jscomp$0) {\n                  JSCompiler_inline_result$jscomp$0 = null;\n                  break b;\n                }\n              }\n              inRootOrSingleton = JSCompiler_inline_result$jscomp$0.data;\n              JSCompiler_inline_result$jscomp$0 =\n                \"F!\" === inRootOrSingleton || \"F\" === inRootOrSingleton\n                  ? JSCompiler_inline_result$jscomp$0\n                  : null;\n            }\n            if (JSCompiler_inline_result$jscomp$0) {\n              nextHydratableInstance = getNextHydratable(\n                JSCompiler_inline_result$jscomp$0.nextSibling\n              );\n              JSCompiler_inline_result =\n                \"F!\" === JSCompiler_inline_result$jscomp$0.data;\n              break a;\n            }\n          }\n          throwOnHydrationMismatch(JSCompiler_inline_result);\n        }\n        JSCompiler_inline_result = !1;\n      }\n      JSCompiler_inline_result && (initialStateProp = ssrFormState[0]);\n    }\n  }\n  ssrFormState = mountWorkInProgressHook();\n  ssrFormState.memoizedState = ssrFormState.baseState = initialStateProp;\n  JSCompiler_inline_result = {\n    pending: null,\n    lanes: 0,\n    dispatch: null,\n    lastRenderedReducer: actionStateReducer,\n    lastRenderedState: initialStateProp\n  };\n  ssrFormState.queue = JSCompiler_inline_result;\n  ssrFormState = dispatchSetState.bind(\n    null,\n    currentlyRenderingFiber,\n    JSCompiler_inline_result\n  );\n  JSCompiler_inline_result.dispatch = ssrFormState;\n  JSCompiler_inline_result = mountStateImpl(!1);\n  inRootOrSingleton = dispatchOptimisticSetState.bind(\n    null,\n    currentlyRenderingFiber,\n    !1,\n    JSCompiler_inline_result.queue\n  );\n  JSCompiler_inline_result = mountWorkInProgressHook();\n  JSCompiler_inline_result$jscomp$0 = {\n    state: initialStateProp,\n    dispatch: null,\n    action: action,\n    pending: null\n  };\n  JSCompiler_inline_result.queue = JSCompiler_inline_result$jscomp$0;\n  ssrFormState = dispatchActionState.bind(\n    null,\n    currentlyRenderingFiber,\n    JSCompiler_inline_result$jscomp$0,\n    inRootOrSingleton,\n    ssrFormState\n  );\n  JSCompiler_inline_result$jscomp$0.dispatch = ssrFormState;\n  JSCompiler_inline_result.memoizedState = action;\n  return [initialStateProp, ssrFormState, !1];\n}\nfunction updateActionState(action) {\n  var stateHook = updateWorkInProgressHook();\n  return updateActionStateImpl(stateHook, currentHook, action);\n}\nfunction updateActionStateImpl(stateHook, currentStateHook, action) {\n  currentStateHook = updateReducerImpl(\n    stateHook,\n    currentStateHook,\n    actionStateReducer\n  )[0];\n  stateHook = updateReducer(basicStateReducer)[0];\n  if (\n    \"object\" === typeof currentStateHook &&\n    null !== currentStateHook &&\n    \"function\" === typeof currentStateHook.then\n  )\n    try {\n      var state = useThenable(currentStateHook);\n    } catch (x) {\n      if (x === SuspenseException) throw SuspenseActionException;\n      throw x;\n    }\n  else state = currentStateHook;\n  currentStateHook = updateWorkInProgressHook();\n  var actionQueue = currentStateHook.queue,\n    dispatch = actionQueue.dispatch;\n  action !== currentStateHook.memoizedState &&\n    ((currentlyRenderingFiber.flags |= 2048),\n    pushSimpleEffect(\n      9,\n      { destroy: void 0 },\n      actionStateActionEffect.bind(null, actionQueue, action),\n      null\n    ));\n  return [state, dispatch, stateHook];\n}\nfunction actionStateActionEffect(actionQueue, action) {\n  actionQueue.action = action;\n}\nfunction rerenderActionState(action) {\n  var stateHook = updateWorkInProgressHook(),\n    currentStateHook = currentHook;\n  if (null !== currentStateHook)\n    return updateActionStateImpl(stateHook, currentStateHook, action);\n  updateWorkInProgressHook();\n  stateHook = stateHook.memoizedState;\n  currentStateHook = updateWorkInProgressHook();\n  var dispatch = currentStateHook.queue.dispatch;\n  currentStateHook.memoizedState = action;\n  return [stateHook, dispatch, !1];\n}\nfunction pushSimpleEffect(tag, inst, create, deps) {\n  tag = { tag: tag, create: create, deps: deps, inst: inst, next: null };\n  inst = currentlyRenderingFiber.updateQueue;\n  null === inst &&\n    ((inst = createFunctionComponentUpdateQueue()),\n    (currentlyRenderingFiber.updateQueue = inst));\n  create = inst.lastEffect;\n  null === create\n    ? (inst.lastEffect = tag.next = tag)\n    : ((deps = create.next),\n      (create.next = tag),\n      (tag.next = deps),\n      (inst.lastEffect = tag));\n  return tag;\n}\nfunction updateRef() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction mountEffectImpl(fiberFlags, hookFlags, create, deps) {\n  var hook = mountWorkInProgressHook();\n  currentlyRenderingFiber.flags |= fiberFlags;\n  hook.memoizedState = pushSimpleEffect(\n    1 | hookFlags,\n    { destroy: void 0 },\n    create,\n    void 0 === deps ? null : deps\n  );\n}\nfunction updateEffectImpl(fiberFlags, hookFlags, create, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var inst = hook.memoizedState.inst;\n  null !== currentHook &&\n  null !== deps &&\n  areHookInputsEqual(deps, currentHook.memoizedState.deps)\n    ? (hook.memoizedState = pushSimpleEffect(hookFlags, inst, create, deps))\n    : ((currentlyRenderingFiber.flags |= fiberFlags),\n      (hook.memoizedState = pushSimpleEffect(\n        1 | hookFlags,\n        inst,\n        create,\n        deps\n      )));\n}\nfunction mountEffect(create, deps) {\n  mountEffectImpl(8390656, 8, create, deps);\n}\nfunction updateEffect(create, deps) {\n  updateEffectImpl(2048, 8, create, deps);\n}\nfunction useEffectEventImpl(payload) {\n  currentlyRenderingFiber.flags |= 4;\n  var componentUpdateQueue = currentlyRenderingFiber.updateQueue;\n  if (null === componentUpdateQueue)\n    (componentUpdateQueue = createFunctionComponentUpdateQueue()),\n      (currentlyRenderingFiber.updateQueue = componentUpdateQueue),\n      (componentUpdateQueue.events = [payload]);\n  else {\n    var events = componentUpdateQueue.events;\n    null === events\n      ? (componentUpdateQueue.events = [payload])\n      : events.push(payload);\n  }\n}\nfunction updateEvent(callback) {\n  var ref = updateWorkInProgressHook().memoizedState;\n  useEffectEventImpl({ ref: ref, nextImpl: callback });\n  return function () {\n    if (0 !== (executionContext & 2)) throw Error(formatProdErrorMessage(440));\n    return ref.impl.apply(void 0, arguments);\n  };\n}\nfunction updateInsertionEffect(create, deps) {\n  return updateEffectImpl(4, 2, create, deps);\n}\nfunction updateLayoutEffect(create, deps) {\n  return updateEffectImpl(4, 4, create, deps);\n}\nfunction imperativeHandleEffect(create, ref) {\n  if (\"function\" === typeof ref) {\n    create = create();\n    var refCleanup = ref(create);\n    return function () {\n      \"function\" === typeof refCleanup ? refCleanup() : ref(null);\n    };\n  }\n  if (null !== ref && void 0 !== ref)\n    return (\n      (create = create()),\n      (ref.current = create),\n      function () {\n        ref.current = null;\n      }\n    );\n}\nfunction updateImperativeHandle(ref, create, deps) {\n  deps = null !== deps && void 0 !== deps ? deps.concat([ref]) : null;\n  updateEffectImpl(4, 4, imperativeHandleEffect.bind(null, create, ref), deps);\n}\nfunction mountDebugValue() {}\nfunction updateCallback(callback, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var prevState = hook.memoizedState;\n  if (null !== deps && areHookInputsEqual(deps, prevState[1]))\n    return prevState[0];\n  hook.memoizedState = [callback, deps];\n  return callback;\n}\nfunction updateMemo(nextCreate, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var prevState = hook.memoizedState;\n  if (null !== deps && areHookInputsEqual(deps, prevState[1]))\n    return prevState[0];\n  prevState = nextCreate();\n  if (shouldDoubleInvokeUserFnsInHooksDEV) {\n    setIsStrictModeForDevtools(!0);\n    try {\n      nextCreate();\n    } finally {\n      setIsStrictModeForDevtools(!1);\n    }\n  }\n  hook.memoizedState = [prevState, deps];\n  return prevState;\n}\nfunction mountDeferredValueImpl(hook, value, initialValue) {\n  if (\n    void 0 === initialValue ||\n    (0 !== (renderLanes & 1073741824) &&\n      0 === (workInProgressRootRenderLanes & 261930))\n  )\n    return (hook.memoizedState = value);\n  hook.memoizedState = initialValue;\n  hook = requestDeferredLane();\n  currentlyRenderingFiber.lanes |= hook;\n  workInProgressRootSkippedLanes |= hook;\n  return initialValue;\n}\nfunction updateDeferredValueImpl(hook, prevValue, value, initialValue) {\n  if (objectIs(value, prevValue)) return value;\n  if (null !== currentTreeHiddenStackCursor.current)\n    return (\n      (hook = mountDeferredValueImpl(hook, value, initialValue)),\n      objectIs(hook, prevValue) || (didReceiveUpdate = !0),\n      hook\n    );\n  if (\n    0 === (renderLanes & 42) ||\n    (0 !== (renderLanes & 1073741824) &&\n      0 === (workInProgressRootRenderLanes & 261930))\n  )\n    return (didReceiveUpdate = !0), (hook.memoizedState = value);\n  hook = requestDeferredLane();\n  currentlyRenderingFiber.lanes |= hook;\n  workInProgressRootSkippedLanes |= hook;\n  return prevValue;\n}\nfunction startTransition(fiber, queue, pendingState, finishedState, callback) {\n  var previousPriority = ReactDOMSharedInternals.p;\n  ReactDOMSharedInternals.p =\n    0 !== previousPriority && 8 > previousPriority ? previousPriority : 8;\n  var prevTransition = ReactSharedInternals.T,\n    currentTransition = {};\n  ReactSharedInternals.T = currentTransition;\n  dispatchOptimisticSetState(fiber, !1, queue, pendingState);\n  try {\n    var returnValue = callback(),\n      onStartTransitionFinish = ReactSharedInternals.S;\n    null !== onStartTransitionFinish &&\n      onStartTransitionFinish(currentTransition, returnValue);\n    if (\n      null !== returnValue &&\n      \"object\" === typeof returnValue &&\n      \"function\" === typeof returnValue.then\n    ) {\n      var thenableForFinishedState = chainThenableValue(\n        returnValue,\n        finishedState\n      );\n      dispatchSetStateInternal(\n        fiber,\n        queue,\n        thenableForFinishedState,\n        requestUpdateLane(fiber)\n      );\n    } else\n      dispatchSetStateInternal(\n        fiber,\n        queue,\n        finishedState,\n        requestUpdateLane(fiber)\n      );\n  } catch (error) {\n    dispatchSetStateInternal(\n      fiber,\n      queue,\n      { then: function () {}, status: \"rejected\", reason: error },\n      requestUpdateLane()\n    );\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      null !== prevTransition &&\n        null !== currentTransition.types &&\n        (prevTransition.types = currentTransition.types),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction noop() {}\nfunction startHostTransition(formFiber, pendingState, action, formData) {\n  if (5 !== formFiber.tag) throw Error(formatProdErrorMessage(476));\n  var queue = ensureFormComponentIsStateful(formFiber).queue;\n  startTransition(\n    formFiber,\n    queue,\n    pendingState,\n    sharedNotPendingObject,\n    null === action\n      ? noop\n      : function () {\n          requestFormReset$1(formFiber);\n          return action(formData);\n        }\n  );\n}\nfunction ensureFormComponentIsStateful(formFiber) {\n  var existingStateHook = formFiber.memoizedState;\n  if (null !== existingStateHook) return existingStateHook;\n  existingStateHook = {\n    memoizedState: sharedNotPendingObject,\n    baseState: sharedNotPendingObject,\n    baseQueue: null,\n    queue: {\n      pending: null,\n      lanes: 0,\n      dispatch: null,\n      lastRenderedReducer: basicStateReducer,\n      lastRenderedState: sharedNotPendingObject\n    },\n    next: null\n  };\n  var initialResetState = {};\n  existingStateHook.next = {\n    memoizedState: initialResetState,\n    baseState: initialResetState,\n    baseQueue: null,\n    queue: {\n      pending: null,\n      lanes: 0,\n      dispatch: null,\n      lastRenderedReducer: basicStateReducer,\n      lastRenderedState: initialResetState\n    },\n    next: null\n  };\n  formFiber.memoizedState = existingStateHook;\n  formFiber = formFiber.alternate;\n  null !== formFiber && (formFiber.memoizedState = existingStateHook);\n  return existingStateHook;\n}\nfunction requestFormReset$1(formFiber) {\n  var stateHook = ensureFormComponentIsStateful(formFiber);\n  null === stateHook.next && (stateHook = formFiber.alternate.memoizedState);\n  dispatchSetStateInternal(\n    formFiber,\n    stateHook.next.queue,\n    {},\n    requestUpdateLane()\n  );\n}\nfunction useHostTransitionStatus() {\n  return readContext(HostTransitionContext);\n}\nfunction updateId() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction updateRefresh() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction refreshCache(fiber) {\n  for (var provider = fiber.return; null !== provider; ) {\n    switch (provider.tag) {\n      case 24:\n      case 3:\n        var lane = requestUpdateLane();\n        fiber = createUpdate(lane);\n        var root$69 = enqueueUpdate(provider, fiber, lane);\n        null !== root$69 &&\n          (scheduleUpdateOnFiber(root$69, provider, lane),\n          entangleTransitions(root$69, provider, lane));\n        provider = { cache: createCache() };\n        fiber.payload = provider;\n        return;\n    }\n    provider = provider.return;\n  }\n}\nfunction dispatchReducerAction(fiber, queue, action) {\n  var lane = requestUpdateLane();\n  action = {\n    lane: lane,\n    revertLane: 0,\n    gesture: null,\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  isRenderPhaseUpdate(fiber)\n    ? enqueueRenderPhaseUpdate(queue, action)\n    : ((action = enqueueConcurrentHookUpdate(fiber, queue, action, lane)),\n      null !== action &&\n        (scheduleUpdateOnFiber(action, fiber, lane),\n        entangleTransitionUpdate(action, queue, lane)));\n}\nfunction dispatchSetState(fiber, queue, action) {\n  var lane = requestUpdateLane();\n  dispatchSetStateInternal(fiber, queue, action, lane);\n}\nfunction dispatchSetStateInternal(fiber, queue, action, lane) {\n  var update = {\n    lane: lane,\n    revertLane: 0,\n    gesture: null,\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  if (isRenderPhaseUpdate(fiber)) enqueueRenderPhaseUpdate(queue, update);\n  else {\n    var alternate = fiber.alternate;\n    if (\n      0 === fiber.lanes &&\n      (null === alternate || 0 === alternate.lanes) &&\n      ((alternate = queue.lastRenderedReducer), null !== alternate)\n    )\n      try {\n        var currentState = queue.lastRenderedState,\n          eagerState = alternate(currentState, action);\n        update.hasEagerState = !0;\n        update.eagerState = eagerState;\n        if (objectIs(eagerState, currentState))\n          return (\n            enqueueUpdate$1(fiber, queue, update, 0),\n            null === workInProgressRoot && finishQueueingConcurrentUpdates(),\n            !1\n          );\n      } catch (error) {\n      } finally {\n      }\n    action = enqueueConcurrentHookUpdate(fiber, queue, update, lane);\n    if (null !== action)\n      return (\n        scheduleUpdateOnFiber(action, fiber, lane),\n        entangleTransitionUpdate(action, queue, lane),\n        !0\n      );\n  }\n  return !1;\n}\nfunction dispatchOptimisticSetState(fiber, throwIfDuringRender, queue, action) {\n  action = {\n    lane: 2,\n    revertLane: requestTransitionLane(),\n    gesture: null,\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  if (isRenderPhaseUpdate(fiber)) {\n    if (throwIfDuringRender) throw Error(formatProdErrorMessage(479));\n  } else\n    (throwIfDuringRender = enqueueConcurrentHookUpdate(\n      fiber,\n      queue,\n      action,\n      2\n    )),\n      null !== throwIfDuringRender &&\n        scheduleUpdateOnFiber(throwIfDuringRender, fiber, 2);\n}\nfunction isRenderPhaseUpdate(fiber) {\n  var alternate = fiber.alternate;\n  return (\n    fiber === currentlyRenderingFiber ||\n    (null !== alternate && alternate === currentlyRenderingFiber)\n  );\n}\nfunction enqueueRenderPhaseUpdate(queue, update) {\n  didScheduleRenderPhaseUpdateDuringThisPass = didScheduleRenderPhaseUpdate =\n    !0;\n  var pending = queue.pending;\n  null === pending\n    ? (update.next = update)\n    : ((update.next = pending.next), (pending.next = update));\n  queue.pending = update;\n}\nfunction entangleTransitionUpdate(root, queue, lane) {\n  if (0 !== (lane & 4194048)) {\n    var queueLanes = queue.lanes;\n    queueLanes &= root.pendingLanes;\n    lane |= queueLanes;\n    queue.lanes = lane;\n    markRootEntangled(root, lane);\n  }\n}\nvar ContextOnlyDispatcher = {\n  readContext: readContext,\n  use: use,\n  useCallback: throwInvalidHookError,\n  useContext: throwInvalidHookError,\n  useEffect: throwInvalidHookError,\n  useImperativeHandle: throwInvalidHookError,\n  useLayoutEffect: throwInvalidHookError,\n  useInsertionEffect: throwInvalidHookError,\n  useMemo: throwInvalidHookError,\n  useReducer: throwInvalidHookError,\n  useRef: throwInvalidHookError,\n  useState: throwInvalidHookError,\n  useDebugValue: throwInvalidHookError,\n  useDeferredValue: throwInvalidHookError,\n  useTransition: throwInvalidHookError,\n  useSyncExternalStore: throwInvalidHookError,\n  useId: throwInvalidHookError,\n  useHostTransitionStatus: throwInvalidHookError,\n  useFormState: throwInvalidHookError,\n  useActionState: throwInvalidHookError,\n  useOptimistic: throwInvalidHookError,\n  useMemoCache: throwInvalidHookError,\n  useCacheRefresh: throwInvalidHookError\n};\nContextOnlyDispatcher.useEffectEvent = throwInvalidHookError;\nvar HooksDispatcherOnMount = {\n    readContext: readContext,\n    use: use,\n    useCallback: function (callback, deps) {\n      mountWorkInProgressHook().memoizedState = [\n        callback,\n        void 0 === deps ? null : deps\n      ];\n      return callback;\n    },\n    useContext: readContext,\n    useEffect: mountEffect,\n    useImperativeHandle: function (ref, create, deps) {\n      deps = null !== deps && void 0 !== deps ? deps.concat([ref]) : null;\n      mountEffectImpl(\n        4194308,\n        4,\n        imperativeHandleEffect.bind(null, create, ref),\n        deps\n      );\n    },\n    useLayoutEffect: function (create, deps) {\n      return mountEffectImpl(4194308, 4, create, deps);\n    },\n    useInsertionEffect: function (create, deps) {\n      mountEffectImpl(4, 2, create, deps);\n    },\n    useMemo: function (nextCreate, deps) {\n      var hook = mountWorkInProgressHook();\n      deps = void 0 === deps ? null : deps;\n      var nextValue = nextCreate();\n      if (shouldDoubleInvokeUserFnsInHooksDEV) {\n        setIsStrictModeForDevtools(!0);\n        try {\n          nextCreate();\n        } finally {\n          setIsStrictModeForDevtools(!1);\n        }\n      }\n      hook.memoizedState = [nextValue, deps];\n      return nextValue;\n    },\n    useReducer: function (reducer, initialArg, init) {\n      var hook = mountWorkInProgressHook();\n      if (void 0 !== init) {\n        var initialState = init(initialArg);\n        if (shouldDoubleInvokeUserFnsInHooksDEV) {\n          setIsStrictModeForDevtools(!0);\n          try {\n            init(initialArg);\n          } finally {\n            setIsStrictModeForDevtools(!1);\n          }\n        }\n      } else initialState = initialArg;\n      hook.memoizedState = hook.baseState = initialState;\n      reducer = {\n        pending: null,\n        lanes: 0,\n        dispatch: null,\n        lastRenderedReducer: reducer,\n        lastRenderedState: initialState\n      };\n      hook.queue = reducer;\n      reducer = reducer.dispatch = dispatchReducerAction.bind(\n        null,\n        currentlyRenderingFiber,\n        reducer\n      );\n      return [hook.memoizedState, reducer];\n    },\n    useRef: function (initialValue) {\n      var hook = mountWorkInProgressHook();\n      initialValue = { current: initialValue };\n      return (hook.memoizedState = initialValue);\n    },\n    useState: function (initialState) {\n      initialState = mountStateImpl(initialState);\n      var queue = initialState.queue,\n        dispatch = dispatchSetState.bind(null, currentlyRenderingFiber, queue);\n      queue.dispatch = dispatch;\n      return [initialState.memoizedState, dispatch];\n    },\n    useDebugValue: mountDebugValue,\n    useDeferredValue: function (value, initialValue) {\n      var hook = mountWorkInProgressHook();\n      return mountDeferredValueImpl(hook, value, initialValue);\n    },\n    useTransition: function () {\n      var stateHook = mountStateImpl(!1);\n      stateHook = startTransition.bind(\n        null,\n        currentlyRenderingFiber,\n        stateHook.queue,\n        !0,\n        !1\n      );\n      mountWorkInProgressHook().memoizedState = stateHook;\n      return [!1, stateHook];\n    },\n    useSyncExternalStore: function (subscribe, getSnapshot, getServerSnapshot) {\n      var fiber = currentlyRenderingFiber,\n        hook = mountWorkInProgressHook();\n      if (isHydrating) {\n        if (void 0 === getServerSnapshot)\n          throw Error(formatProdErrorMessage(407));\n        getServerSnapshot = getServerSnapshot();\n      } else {\n        getServerSnapshot = getSnapshot();\n        if (null === workInProgressRoot)\n          throw Error(formatProdErrorMessage(349));\n        0 !== (workInProgressRootRenderLanes & 127) ||\n          pushStoreConsistencyCheck(fiber, getSnapshot, getServerSnapshot);\n      }\n      hook.memoizedState = getServerSnapshot;\n      var inst = { value: getServerSnapshot, getSnapshot: getSnapshot };\n      hook.queue = inst;\n      mountEffect(subscribeToStore.bind(null, fiber, inst, subscribe), [\n        subscribe\n      ]);\n      fiber.flags |= 2048;\n      pushSimpleEffect(\n        9,\n        { destroy: void 0 },\n        updateStoreInstance.bind(\n          null,\n          fiber,\n          inst,\n          getServerSnapshot,\n          getSnapshot\n        ),\n        null\n      );\n      return getServerSnapshot;\n    },\n    useId: function () {\n      var hook = mountWorkInProgressHook(),\n        identifierPrefix = workInProgressRoot.identifierPrefix;\n      if (isHydrating) {\n        var JSCompiler_inline_result = treeContextOverflow;\n        var idWithLeadingBit = treeContextId;\n        JSCompiler_inline_result =\n          (\n            idWithLeadingBit & ~(1 << (32 - clz32(idWithLeadingBit) - 1))\n          ).toString(32) + JSCompiler_inline_result;\n        identifierPrefix =\n          \"_\" + identifierPrefix + \"R_\" + JSCompiler_inline_result;\n        JSCompiler_inline_result = localIdCounter++;\n        0 < JSCompiler_inline_result &&\n          (identifierPrefix += \"H\" + JSCompiler_inline_result.toString(32));\n        identifierPrefix += \"_\";\n      } else\n        (JSCompiler_inline_result = globalClientIdCounter++),\n          (identifierPrefix =\n            \"_\" +\n            identifierPrefix +\n            \"r_\" +\n            JSCompiler_inline_result.toString(32) +\n            \"_\");\n      return (hook.memoizedState = identifierPrefix);\n    },\n    useHostTransitionStatus: useHostTransitionStatus,\n    useFormState: mountActionState,\n    useActionState: mountActionState,\n    useOptimistic: function (passthrough) {\n      var hook = mountWorkInProgressHook();\n      hook.memoizedState = hook.baseState = passthrough;\n      var queue = {\n        pending: null,\n        lanes: 0,\n        dispatch: null,\n        lastRenderedReducer: null,\n        lastRenderedState: null\n      };\n      hook.queue = queue;\n      hook = dispatchOptimisticSetState.bind(\n        null,\n        currentlyRenderingFiber,\n        !0,\n        queue\n      );\n      queue.dispatch = hook;\n      return [passthrough, hook];\n    },\n    useMemoCache: useMemoCache,\n    useCacheRefresh: function () {\n      return (mountWorkInProgressHook().memoizedState = refreshCache.bind(\n        null,\n        currentlyRenderingFiber\n      ));\n    },\n    useEffectEvent: function (callback) {\n      var hook = mountWorkInProgressHook(),\n        ref = { impl: callback };\n      hook.memoizedState = ref;\n      return function () {\n        if (0 !== (executionContext & 2))\n          throw Error(formatProdErrorMessage(440));\n        return ref.impl.apply(void 0, arguments);\n      };\n    }\n  },\n  HooksDispatcherOnUpdate = {\n    readContext: readContext,\n    use: use,\n    useCallback: updateCallback,\n    useContext: readContext,\n    useEffect: updateEffect,\n    useImperativeHandle: updateImperativeHandle,\n    useInsertionEffect: updateInsertionEffect,\n    useLayoutEffect: updateLayoutEffect,\n    useMemo: updateMemo,\n    useReducer: updateReducer,\n    useRef: updateRef,\n    useState: function () {\n      return updateReducer(basicStateReducer);\n    },\n    useDebugValue: mountDebugValue,\n    useDeferredValue: function (value, initialValue) {\n      var hook = updateWorkInProgressHook();\n      return updateDeferredValueImpl(\n        hook,\n        currentHook.memoizedState,\n        value,\n        initialValue\n      );\n    },\n    useTransition: function () {\n      var booleanOrThenable = updateReducer(basicStateReducer)[0],\n        start = updateWorkInProgressHook().memoizedState;\n      return [\n        \"boolean\" === typeof booleanOrThenable\n          ? booleanOrThenable\n          : useThenable(booleanOrThenable),\n        start\n      ];\n    },\n    useSyncExternalStore: updateSyncExternalStore,\n    useId: updateId,\n    useHostTransitionStatus: useHostTransitionStatus,\n    useFormState: updateActionState,\n    useActionState: updateActionState,\n    useOptimistic: function (passthrough, reducer) {\n      var hook = updateWorkInProgressHook();\n      return updateOptimisticImpl(hook, currentHook, passthrough, reducer);\n    },\n    useMemoCache: useMemoCache,\n    useCacheRefresh: updateRefresh\n  };\nHooksDispatcherOnUpdate.useEffectEvent = updateEvent;\nvar HooksDispatcherOnRerender = {\n  readContext: readContext,\n  use: use,\n  useCallback: updateCallback,\n  useContext: readContext,\n  useEffect: updateEffect,\n  useImperativeHandle: updateImperativeHandle,\n  useInsertionEffect: updateInsertionEffect,\n  useLayoutEffect: updateLayoutEffect,\n  useMemo: updateMemo,\n  useReducer: rerenderReducer,\n  useRef: updateRef,\n  useState: function () {\n    return rerenderReducer(basicStateReducer);\n  },\n  useDebugValue: mountDebugValue,\n  useDeferredValue: function (value, initialValue) {\n    var hook = updateWorkInProgressHook();\n    return null === currentHook\n      ? mountDeferredValueImpl(hook, value, initialValue)\n      : updateDeferredValueImpl(\n          hook,\n          currentHook.memoizedState,\n          value,\n          initialValue\n        );\n  },\n  useTransition: function () {\n    var booleanOrThenable = rerenderReducer(basicStateReducer)[0],\n      start = updateWorkInProgressHook().memoizedState;\n    return [\n      \"boolean\" === typeof booleanOrThenable\n        ? booleanOrThenable\n        : useThenable(booleanOrThenable),\n      start\n    ];\n  },\n  useSyncExternalStore: updateSyncExternalStore,\n  useId: updateId,\n  useHostTransitionStatus: useHostTransitionStatus,\n  useFormState: rerenderActionState,\n  useActionState: rerenderActionState,\n  useOptimistic: function (passthrough, reducer) {\n    var hook = updateWorkInProgressHook();\n    if (null !== currentHook)\n      return updateOptimisticImpl(hook, currentHook, passthrough, reducer);\n    hook.baseState = passthrough;\n    return [passthrough, hook.queue.dispatch];\n  },\n  useMemoCache: useMemoCache,\n  useCacheRefresh: updateRefresh\n};\nHooksDispatcherOnRerender.useEffectEvent = updateEvent;\nfunction applyDerivedStateFromProps(\n  workInProgress,\n  ctor,\n  getDerivedStateFromProps,\n  nextProps\n) {\n  ctor = workInProgress.memoizedState;\n  getDerivedStateFromProps = getDerivedStateFromProps(nextProps, ctor);\n  getDerivedStateFromProps =\n    null === getDerivedStateFromProps || void 0 === getDerivedStateFromProps\n      ? ctor\n      : assign({}, ctor, getDerivedStateFromProps);\n  workInProgress.memoizedState = getDerivedStateFromProps;\n  0 === workInProgress.lanes &&\n    (workInProgress.updateQueue.baseState = getDerivedStateFromProps);\n}\nvar classComponentUpdater = {\n  enqueueSetState: function (inst, payload, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.payload = payload;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    payload = enqueueUpdate(inst, update, lane);\n    null !== payload &&\n      (scheduleUpdateOnFiber(payload, inst, lane),\n      entangleTransitions(payload, inst, lane));\n  },\n  enqueueReplaceState: function (inst, payload, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.tag = 1;\n    update.payload = payload;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    payload = enqueueUpdate(inst, update, lane);\n    null !== payload &&\n      (scheduleUpdateOnFiber(payload, inst, lane),\n      entangleTransitions(payload, inst, lane));\n  },\n  enqueueForceUpdate: function (inst, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.tag = 2;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    callback = enqueueUpdate(inst, update, lane);\n    null !== callback &&\n      (scheduleUpdateOnFiber(callback, inst, lane),\n      entangleTransitions(callback, inst, lane));\n  }\n};\nfunction checkShouldComponentUpdate(\n  workInProgress,\n  ctor,\n  oldProps,\n  newProps,\n  oldState,\n  newState,\n  nextContext\n) {\n  workInProgress = workInProgress.stateNode;\n  return \"function\" === typeof workInProgress.shouldComponentUpdate\n    ? workInProgress.shouldComponentUpdate(newProps, newState, nextContext)\n    : ctor.prototype && ctor.prototype.isPureReactComponent\n      ? !shallowEqual(oldProps, newProps) || !shallowEqual(oldState, newState)\n      : !0;\n}\nfunction callComponentWillReceiveProps(\n  workInProgress,\n  instance,\n  newProps,\n  nextContext\n) {\n  workInProgress = instance.state;\n  \"function\" === typeof instance.componentWillReceiveProps &&\n    instance.componentWillReceiveProps(newProps, nextContext);\n  \"function\" === typeof instance.UNSAFE_componentWillReceiveProps &&\n    instance.UNSAFE_componentWillReceiveProps(newProps, nextContext);\n  instance.state !== workInProgress &&\n    classComponentUpdater.enqueueReplaceState(instance, instance.state, null);\n}\nfunction resolveClassComponentProps(Component, baseProps) {\n  var newProps = baseProps;\n  if (\"ref\" in baseProps) {\n    newProps = {};\n    for (var propName in baseProps)\n      \"ref\" !== propName && (newProps[propName] = baseProps[propName]);\n  }\n  if ((Component = Component.defaultProps)) {\n    newProps === baseProps && (newProps = assign({}, newProps));\n    for (var propName$73 in Component)\n      void 0 === newProps[propName$73] &&\n        (newProps[propName$73] = Component[propName$73]);\n  }\n  return newProps;\n}\nfunction defaultOnUncaughtError(error) {\n  reportGlobalError(error);\n}\nfunction defaultOnCaughtError(error) {\n  console.error(error);\n}\nfunction defaultOnRecoverableError(error) {\n  reportGlobalError(error);\n}\nfunction logUncaughtError(root, errorInfo) {\n  try {\n    var onUncaughtError = root.onUncaughtError;\n    onUncaughtError(errorInfo.value, { componentStack: errorInfo.stack });\n  } catch (e$74) {\n    setTimeout(function () {\n      throw e$74;\n    });\n  }\n}\nfunction logCaughtError(root, boundary, errorInfo) {\n  try {\n    var onCaughtError = root.onCaughtError;\n    onCaughtError(errorInfo.value, {\n      componentStack: errorInfo.stack,\n      errorBoundary: 1 === boundary.tag ? boundary.stateNode : null\n    });\n  } catch (e$75) {\n    setTimeout(function () {\n      throw e$75;\n    });\n  }\n}\nfunction createRootErrorUpdate(root, errorInfo, lane) {\n  lane = createUpdate(lane);\n  lane.tag = 3;\n  lane.payload = { element: null };\n  lane.callback = function () {\n    logUncaughtError(root, errorInfo);\n  };\n  return lane;\n}\nfunction createClassErrorUpdate(lane) {\n  lane = createUpdate(lane);\n  lane.tag = 3;\n  return lane;\n}\nfunction initializeClassErrorUpdate(update, root, fiber, errorInfo) {\n  var getDerivedStateFromError = fiber.type.getDerivedStateFromError;\n  if (\"function\" === typeof getDerivedStateFromError) {\n    var error = errorInfo.value;\n    update.payload = function () {\n      return getDerivedStateFromError(error);\n    };\n    update.callback = function () {\n      logCaughtError(root, fiber, errorInfo);\n    };\n  }\n  var inst = fiber.stateNode;\n  null !== inst &&\n    \"function\" === typeof inst.componentDidCatch &&\n    (update.callback = function () {\n      logCaughtError(root, fiber, errorInfo);\n      \"function\" !== typeof getDerivedStateFromError &&\n        (null === legacyErrorBoundariesThatAlreadyFailed\n          ? (legacyErrorBoundariesThatAlreadyFailed = new Set([this]))\n          : legacyErrorBoundariesThatAlreadyFailed.add(this));\n      var stack = errorInfo.stack;\n      this.componentDidCatch(errorInfo.value, {\n        componentStack: null !== stack ? stack : \"\"\n      });\n    });\n}\nfunction throwException(\n  root,\n  returnFiber,\n  sourceFiber,\n  value,\n  rootRenderLanes\n) {\n  sourceFiber.flags |= 32768;\n  if (\n    null !== value &&\n    \"object\" === typeof value &&\n    \"function\" === typeof value.then\n  ) {\n    returnFiber = sourceFiber.alternate;\n    null !== returnFiber &&\n      propagateParentContextChanges(\n        returnFiber,\n        sourceFiber,\n        rootRenderLanes,\n        !0\n      );\n    sourceFiber = suspenseHandlerStackCursor.current;\n    if (null !== sourceFiber) {\n      switch (sourceFiber.tag) {\n        case 31:\n        case 13:\n          return (\n            null === shellBoundary\n              ? renderDidSuspendDelayIfPossible()\n              : null === sourceFiber.alternate &&\n                0 === workInProgressRootExitStatus &&\n                (workInProgressRootExitStatus = 3),\n            (sourceFiber.flags &= -257),\n            (sourceFiber.flags |= 65536),\n            (sourceFiber.lanes = rootRenderLanes),\n            value === noopSuspenseyCommitThenable\n              ? (sourceFiber.flags |= 16384)\n              : ((returnFiber = sourceFiber.updateQueue),\n                null === returnFiber\n                  ? (sourceFiber.updateQueue = new Set([value]))\n                  : returnFiber.add(value),\n                attachPingListener(root, value, rootRenderLanes)),\n            !1\n          );\n        case 22:\n          return (\n            (sourceFiber.flags |= 65536),\n            value === noopSuspenseyCommitThenable\n              ? (sourceFiber.flags |= 16384)\n              : ((returnFiber = sourceFiber.updateQueue),\n                null === returnFiber\n                  ? ((returnFiber = {\n                      transitions: null,\n                      markerInstances: null,\n                      retryQueue: new Set([value])\n                    }),\n                    (sourceFiber.updateQueue = returnFiber))\n                  : ((sourceFiber = returnFiber.retryQueue),\n                    null === sourceFiber\n                      ? (returnFiber.retryQueue = new Set([value]))\n                      : sourceFiber.add(value)),\n                attachPingListener(root, value, rootRenderLanes)),\n            !1\n          );\n      }\n      throw Error(formatProdErrorMessage(435, sourceFiber.tag));\n    }\n    attachPingListener(root, value, rootRenderLanes);\n    renderDidSuspendDelayIfPossible();\n    return !1;\n  }\n  if (isHydrating)\n    return (\n      (returnFiber = suspenseHandlerStackCursor.current),\n      null !== returnFiber\n        ? (0 === (returnFiber.flags & 65536) && (returnFiber.flags |= 256),\n          (returnFiber.flags |= 65536),\n          (returnFiber.lanes = rootRenderLanes),\n          value !== HydrationMismatchException &&\n            ((root = Error(formatProdErrorMessage(422), { cause: value })),\n            queueHydrationError(createCapturedValueAtFiber(root, sourceFiber))))\n        : (value !== HydrationMismatchException &&\n            ((returnFiber = Error(formatProdErrorMessage(423), {\n              cause: value\n            })),\n            queueHydrationError(\n              createCapturedValueAtFiber(returnFiber, sourceFiber)\n            )),\n          (root = root.current.alternate),\n          (root.flags |= 65536),\n          (rootRenderLanes &= -rootRenderLanes),\n          (root.lanes |= rootRenderLanes),\n          (value = createCapturedValueAtFiber(value, sourceFiber)),\n          (rootRenderLanes = createRootErrorUpdate(\n            root.stateNode,\n            value,\n            rootRenderLanes\n          )),\n          enqueueCapturedUpdate(root, rootRenderLanes),\n          4 !== workInProgressRootExitStatus &&\n            (workInProgressRootExitStatus = 2)),\n      !1\n    );\n  var wrapperError = Error(formatProdErrorMessage(520), { cause: value });\n  wrapperError = createCapturedValueAtFiber(wrapperError, sourceFiber);\n  null === workInProgressRootConcurrentErrors\n    ? (workInProgressRootConcurrentErrors = [wrapperError])\n    : workInProgressRootConcurrentErrors.push(wrapperError);\n  4 !== workInProgressRootExitStatus && (workInProgressRootExitStatus = 2);\n  if (null === returnFiber) return !0;\n  value = createCapturedValueAtFiber(value, sourceFiber);\n  sourceFiber = returnFiber;\n  do {\n    switch (sourceFiber.tag) {\n      case 3:\n        return (\n          (sourceFiber.flags |= 65536),\n          (root = rootRenderLanes & -rootRenderLanes),\n          (sourceFiber.lanes |= root),\n          (root = createRootErrorUpdate(sourceFiber.stateNode, value, root)),\n          enqueueCapturedUpdate(sourceFiber, root),\n          !1\n        );\n      case 1:\n        if (\n          ((returnFiber = sourceFiber.type),\n          (wrapperError = sourceFiber.stateNode),\n          0 === (sourceFiber.flags & 128) &&\n            (\"function\" === typeof returnFiber.getDerivedStateFromError ||\n              (null !== wrapperError &&\n                \"function\" === typeof wrapperError.componentDidCatch &&\n                (null === legacyErrorBoundariesThatAlreadyFailed ||\n                  !legacyErrorBoundariesThatAlreadyFailed.has(wrapperError)))))\n        )\n          return (\n            (sourceFiber.flags |= 65536),\n            (rootRenderLanes &= -rootRenderLanes),\n            (sourceFiber.lanes |= rootRenderLanes),\n            (rootRenderLanes = createClassErrorUpdate(rootRenderLanes)),\n            initializeClassErrorUpdate(\n              rootRenderLanes,\n              root,\n              sourceFiber,\n              value\n            ),\n            enqueueCapturedUpdate(sourceFiber, rootRenderLanes),\n            !1\n          );\n    }\n    sourceFiber = sourceFiber.return;\n  } while (null !== sourceFiber);\n  return !1;\n}\nvar SelectiveHydrationException = Error(formatProdErrorMessage(461)),\n  didReceiveUpdate = !1;\nfunction reconcileChildren(current, workInProgress, nextChildren, renderLanes) {\n  workInProgress.child =\n    null === current\n      ? mountChildFibers(workInProgress, null, nextChildren, renderLanes)\n      : reconcileChildFibers(\n          workInProgress,\n          current.child,\n          nextChildren,\n          renderLanes\n        );\n}\nfunction updateForwardRef(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  Component = Component.render;\n  var ref = workInProgress.ref;\n  if (\"ref\" in nextProps) {\n    var propsWithoutRef = {};\n    for (var key in nextProps)\n      \"ref\" !== key && (propsWithoutRef[key] = nextProps[key]);\n  } else propsWithoutRef = nextProps;\n  prepareToReadContext(workInProgress);\n  nextProps = renderWithHooks(\n    current,\n    workInProgress,\n    Component,\n    propsWithoutRef,\n    ref,\n    renderLanes\n  );\n  key = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && key && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, nextProps, renderLanes);\n  return workInProgress.child;\n}\nfunction updateMemoComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  if (null === current) {\n    var type = Component.type;\n    if (\n      \"function\" === typeof type &&\n      !shouldConstruct(type) &&\n      void 0 === type.defaultProps &&\n      null === Component.compare\n    )\n      return (\n        (workInProgress.tag = 15),\n        (workInProgress.type = type),\n        updateSimpleMemoComponent(\n          current,\n          workInProgress,\n          type,\n          nextProps,\n          renderLanes\n        )\n      );\n    current = createFiberFromTypeAndProps(\n      Component.type,\n      null,\n      nextProps,\n      workInProgress,\n      workInProgress.mode,\n      renderLanes\n    );\n    current.ref = workInProgress.ref;\n    current.return = workInProgress;\n    return (workInProgress.child = current);\n  }\n  type = current.child;\n  if (!checkScheduledUpdateOrContext(current, renderLanes)) {\n    var prevProps = type.memoizedProps;\n    Component = Component.compare;\n    Component = null !== Component ? Component : shallowEqual;\n    if (Component(prevProps, nextProps) && current.ref === workInProgress.ref)\n      return bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes);\n  }\n  workInProgress.flags |= 1;\n  current = createWorkInProgress(type, nextProps);\n  current.ref = workInProgress.ref;\n  current.return = workInProgress;\n  return (workInProgress.child = current);\n}\nfunction updateSimpleMemoComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  if (null !== current) {\n    var prevProps = current.memoizedProps;\n    if (\n      shallowEqual(prevProps, nextProps) &&\n      current.ref === workInProgress.ref\n    )\n      if (\n        ((didReceiveUpdate = !1),\n        (workInProgress.pendingProps = nextProps = prevProps),\n        checkScheduledUpdateOrContext(current, renderLanes))\n      )\n        0 !== (current.flags & 131072) && (didReceiveUpdate = !0);\n      else\n        return (\n          (workInProgress.lanes = current.lanes),\n          bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n        );\n  }\n  return updateFunctionComponent(\n    current,\n    workInProgress,\n    Component,\n    nextProps,\n    renderLanes\n  );\n}\nfunction updateOffscreenComponent(\n  current,\n  workInProgress,\n  renderLanes,\n  nextProps\n) {\n  var nextChildren = nextProps.children,\n    prevState = null !== current ? current.memoizedState : null;\n  null === current &&\n    null === workInProgress.stateNode &&\n    (workInProgress.stateNode = {\n      _visibility: 1,\n      _pendingMarkers: null,\n      _retryCache: null,\n      _transitions: null\n    });\n  if (\"hidden\" === nextProps.mode) {\n    if (0 !== (workInProgress.flags & 128)) {\n      prevState =\n        null !== prevState ? prevState.baseLanes | renderLanes : renderLanes;\n      if (null !== current) {\n        nextProps = workInProgress.child = current.child;\n        for (nextChildren = 0; null !== nextProps; )\n          (nextChildren =\n            nextChildren | nextProps.lanes | nextProps.childLanes),\n            (nextProps = nextProps.sibling);\n        nextProps = nextChildren & ~prevState;\n      } else (nextProps = 0), (workInProgress.child = null);\n      return deferHiddenOffscreenComponent(\n        current,\n        workInProgress,\n        prevState,\n        renderLanes,\n        nextProps\n      );\n    }\n    if (0 !== (renderLanes & 536870912))\n      (workInProgress.memoizedState = { baseLanes: 0, cachePool: null }),\n        null !== current &&\n          pushTransition(\n            workInProgress,\n            null !== prevState ? prevState.cachePool : null\n          ),\n        null !== prevState\n          ? pushHiddenContext(workInProgress, prevState)\n          : reuseHiddenContextOnStack(),\n        pushOffscreenSuspenseHandler(workInProgress);\n    else\n      return (\n        (nextProps = workInProgress.lanes = 536870912),\n        deferHiddenOffscreenComponent(\n          current,\n          workInProgress,\n          null !== prevState ? prevState.baseLanes | renderLanes : renderLanes,\n          renderLanes,\n          nextProps\n        )\n      );\n  } else\n    null !== prevState\n      ? (pushTransition(workInProgress, prevState.cachePool),\n        pushHiddenContext(workInProgress, prevState),\n        reuseSuspenseHandlerOnStack(workInProgress),\n        (workInProgress.memoizedState = null))\n      : (null !== current && pushTransition(workInProgress, null),\n        reuseHiddenContextOnStack(),\n        reuseSuspenseHandlerOnStack(workInProgress));\n  reconcileChildren(current, workInProgress, nextChildren, renderLanes);\n  return workInProgress.child;\n}\nfunction bailoutOffscreenComponent(current, workInProgress) {\n  (null !== current && 22 === current.tag) ||\n    null !== workInProgress.stateNode ||\n    (workInProgress.stateNode = {\n      _visibility: 1,\n      _pendingMarkers: null,\n      _retryCache: null,\n      _transitions: null\n    });\n  return workInProgress.sibling;\n}\nfunction deferHiddenOffscreenComponent(\n  current,\n  workInProgress,\n  nextBaseLanes,\n  renderLanes,\n  remainingChildLanes\n) {\n  var JSCompiler_inline_result = peekCacheFromPool();\n  JSCompiler_inline_result =\n    null === JSCompiler_inline_result\n      ? null\n      : { parent: CacheContext._currentValue, pool: JSCompiler_inline_result };\n  workInProgress.memoizedState = {\n    baseLanes: nextBaseLanes,\n    cachePool: JSCompiler_inline_result\n  };\n  null !== current && pushTransition(workInProgress, null);\n  reuseHiddenContextOnStack();\n  pushOffscreenSuspenseHandler(workInProgress);\n  null !== current &&\n    propagateParentContextChanges(current, workInProgress, renderLanes, !0);\n  workInProgress.childLanes = remainingChildLanes;\n  return null;\n}\nfunction mountActivityChildren(workInProgress, nextProps) {\n  nextProps = mountWorkInProgressOffscreenFiber(\n    { mode: nextProps.mode, children: nextProps.children },\n    workInProgress.mode\n  );\n  nextProps.ref = workInProgress.ref;\n  workInProgress.child = nextProps;\n  nextProps.return = workInProgress;\n  return nextProps;\n}\nfunction retryActivityComponentWithoutHydrating(\n  current,\n  workInProgress,\n  renderLanes\n) {\n  reconcileChildFibers(workInProgress, current.child, null, renderLanes);\n  current = mountActivityChildren(workInProgress, workInProgress.pendingProps);\n  current.flags |= 2;\n  popSuspenseHandler(workInProgress);\n  workInProgress.memoizedState = null;\n  return current;\n}\nfunction updateActivityComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    didSuspend = 0 !== (workInProgress.flags & 128);\n  workInProgress.flags &= -129;\n  if (null === current) {\n    if (isHydrating) {\n      if (\"hidden\" === nextProps.mode)\n        return (\n          (current = mountActivityChildren(workInProgress, nextProps)),\n          (workInProgress.lanes = 536870912),\n          bailoutOffscreenComponent(null, current)\n        );\n      pushDehydratedActivitySuspenseHandler(workInProgress);\n      (current = nextHydratableInstance)\n        ? ((current = canHydrateHydrationBoundary(\n            current,\n            rootOrSingletonContext\n          )),\n          (current = null !== current && \"&\" === current.data ? current : null),\n          null !== current &&\n            ((workInProgress.memoizedState = {\n              dehydrated: current,\n              treeContext:\n                null !== treeContextProvider\n                  ? { id: treeContextId, overflow: treeContextOverflow }\n                  : null,\n              retryLane: 536870912,\n              hydrationErrors: null\n            }),\n            (renderLanes = createFiberFromDehydratedFragment(current)),\n            (renderLanes.return = workInProgress),\n            (workInProgress.child = renderLanes),\n            (hydrationParentFiber = workInProgress),\n            (nextHydratableInstance = null)))\n        : (current = null);\n      if (null === current) throw throwOnHydrationMismatch(workInProgress);\n      workInProgress.lanes = 536870912;\n      return null;\n    }\n    return mountActivityChildren(workInProgress, nextProps);\n  }\n  var prevState = current.memoizedState;\n  if (null !== prevState) {\n    var dehydrated = prevState.dehydrated;\n    pushDehydratedActivitySuspenseHandler(workInProgress);\n    if (didSuspend)\n      if (workInProgress.flags & 256)\n        (workInProgress.flags &= -257),\n          (workInProgress = retryActivityComponentWithoutHydrating(\n            current,\n            workInProgress,\n            renderLanes\n          ));\n      else if (null !== workInProgress.memoizedState)\n        (workInProgress.child = current.child),\n          (workInProgress.flags |= 128),\n          (workInProgress = null);\n      else throw Error(formatProdErrorMessage(558));\n    else if (\n      (didReceiveUpdate ||\n        propagateParentContextChanges(current, workInProgress, renderLanes, !1),\n      (didSuspend = 0 !== (renderLanes & current.childLanes)),\n      didReceiveUpdate || didSuspend)\n    ) {\n      nextProps = workInProgressRoot;\n      if (\n        null !== nextProps &&\n        ((dehydrated = getBumpedLaneForHydration(nextProps, renderLanes)),\n        0 !== dehydrated && dehydrated !== prevState.retryLane)\n      )\n        throw (\n          ((prevState.retryLane = dehydrated),\n          enqueueConcurrentRenderForLane(current, dehydrated),\n          scheduleUpdateOnFiber(nextProps, current, dehydrated),\n          SelectiveHydrationException)\n        );\n      renderDidSuspendDelayIfPossible();\n      workInProgress = retryActivityComponentWithoutHydrating(\n        current,\n        workInProgress,\n        renderLanes\n      );\n    } else\n      (current = prevState.treeContext),\n        (nextHydratableInstance = getNextHydratable(dehydrated.nextSibling)),\n        (hydrationParentFiber = workInProgress),\n        (isHydrating = !0),\n        (hydrationErrors = null),\n        (rootOrSingletonContext = !1),\n        null !== current &&\n          restoreSuspendedTreeContext(workInProgress, current),\n        (workInProgress = mountActivityChildren(workInProgress, nextProps)),\n        (workInProgress.flags |= 4096);\n    return workInProgress;\n  }\n  current = createWorkInProgress(current.child, {\n    mode: nextProps.mode,\n    children: nextProps.children\n  });\n  current.ref = workInProgress.ref;\n  workInProgress.child = current;\n  current.return = workInProgress;\n  return current;\n}\nfunction markRef(current, workInProgress) {\n  var ref = workInProgress.ref;\n  if (null === ref)\n    null !== current &&\n      null !== current.ref &&\n      (workInProgress.flags |= 4194816);\n  else {\n    if (\"function\" !== typeof ref && \"object\" !== typeof ref)\n      throw Error(formatProdErrorMessage(284));\n    if (null === current || current.ref !== ref)\n      workInProgress.flags |= 4194816;\n  }\n}\nfunction updateFunctionComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  Component = renderWithHooks(\n    current,\n    workInProgress,\n    Component,\n    nextProps,\n    void 0,\n    renderLanes\n  );\n  nextProps = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && nextProps && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, Component, renderLanes);\n  return workInProgress.child;\n}\nfunction replayFunctionComponent(\n  current,\n  workInProgress,\n  nextProps,\n  Component,\n  secondArg,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  workInProgress.updateQueue = null;\n  nextProps = renderWithHooksAgain(\n    workInProgress,\n    Component,\n    nextProps,\n    secondArg\n  );\n  finishRenderingHooks(current);\n  Component = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && Component && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, nextProps, renderLanes);\n  return workInProgress.child;\n}\nfunction updateClassComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  if (null === workInProgress.stateNode) {\n    var context = emptyContextObject,\n      contextType = Component.contextType;\n    \"object\" === typeof contextType &&\n      null !== contextType &&\n      (context = readContext(contextType));\n    context = new Component(nextProps, context);\n    workInProgress.memoizedState =\n      null !== context.state && void 0 !== context.state ? context.state : null;\n    context.updater = classComponentUpdater;\n    workInProgress.stateNode = context;\n    context._reactInternals = workInProgress;\n    context = workInProgress.stateNode;\n    context.props = nextProps;\n    context.state = workInProgress.memoizedState;\n    context.refs = {};\n    initializeUpdateQueue(workInProgress);\n    contextType = Component.contextType;\n    context.context =\n      \"object\" === typeof contextType && null !== contextType\n        ? readContext(contextType)\n        : emptyContextObject;\n    context.state = workInProgress.memoizedState;\n    contextType = Component.getDerivedStateFromProps;\n    \"function\" === typeof contextType &&\n      (applyDerivedStateFromProps(\n        workInProgress,\n        Component,\n        contextType,\n        nextProps\n      ),\n      (context.state = workInProgress.memoizedState));\n    \"function\" === typeof Component.getDerivedStateFromProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate ||\n      (\"function\" !== typeof context.UNSAFE_componentWillMount &&\n        \"function\" !== typeof context.componentWillMount) ||\n      ((contextType = context.state),\n      \"function\" === typeof context.componentWillMount &&\n        context.componentWillMount(),\n      \"function\" === typeof context.UNSAFE_componentWillMount &&\n        context.UNSAFE_componentWillMount(),\n      contextType !== context.state &&\n        classComponentUpdater.enqueueReplaceState(context, context.state, null),\n      processUpdateQueue(workInProgress, nextProps, context, renderLanes),\n      suspendIfUpdateReadFromEntangledAsyncAction(),\n      (context.state = workInProgress.memoizedState));\n    \"function\" === typeof context.componentDidMount &&\n      (workInProgress.flags |= 4194308);\n    nextProps = !0;\n  } else if (null === current) {\n    context = workInProgress.stateNode;\n    var unresolvedOldProps = workInProgress.memoizedProps,\n      oldProps = resolveClassComponentProps(Component, unresolvedOldProps);\n    context.props = oldProps;\n    var oldContext = context.context,\n      contextType$jscomp$0 = Component.contextType;\n    contextType = emptyContextObject;\n    \"object\" === typeof contextType$jscomp$0 &&\n      null !== contextType$jscomp$0 &&\n      (contextType = readContext(contextType$jscomp$0));\n    var getDerivedStateFromProps = Component.getDerivedStateFromProps;\n    contextType$jscomp$0 =\n      \"function\" === typeof getDerivedStateFromProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate;\n    unresolvedOldProps = workInProgress.pendingProps !== unresolvedOldProps;\n    contextType$jscomp$0 ||\n      (\"function\" !== typeof context.UNSAFE_componentWillReceiveProps &&\n        \"function\" !== typeof context.componentWillReceiveProps) ||\n      ((unresolvedOldProps || oldContext !== contextType) &&\n        callComponentWillReceiveProps(\n          workInProgress,\n          context,\n          nextProps,\n          contextType\n        ));\n    hasForceUpdate = !1;\n    var oldState = workInProgress.memoizedState;\n    context.state = oldState;\n    processUpdateQueue(workInProgress, nextProps, context, renderLanes);\n    suspendIfUpdateReadFromEntangledAsyncAction();\n    oldContext = workInProgress.memoizedState;\n    unresolvedOldProps || oldState !== oldContext || hasForceUpdate\n      ? (\"function\" === typeof getDerivedStateFromProps &&\n          (applyDerivedStateFromProps(\n            workInProgress,\n            Component,\n            getDerivedStateFromProps,\n            nextProps\n          ),\n          (oldContext = workInProgress.memoizedState)),\n        (oldProps =\n          hasForceUpdate ||\n          checkShouldComponentUpdate(\n            workInProgress,\n            Component,\n            oldProps,\n            nextProps,\n            oldState,\n            oldContext,\n            contextType\n          ))\n          ? (contextType$jscomp$0 ||\n              (\"function\" !== typeof context.UNSAFE_componentWillMount &&\n                \"function\" !== typeof context.componentWillMount) ||\n              (\"function\" === typeof context.componentWillMount &&\n                context.componentWillMount(),\n              \"function\" === typeof context.UNSAFE_componentWillMount &&\n                context.UNSAFE_componentWillMount()),\n            \"function\" === typeof context.componentDidMount &&\n              (workInProgress.flags |= 4194308))\n          : (\"function\" === typeof context.componentDidMount &&\n              (workInProgress.flags |= 4194308),\n            (workInProgress.memoizedProps = nextProps),\n            (workInProgress.memoizedState = oldContext)),\n        (context.props = nextProps),\n        (context.state = oldContext),\n        (context.context = contextType),\n        (nextProps = oldProps))\n      : (\"function\" === typeof context.componentDidMount &&\n          (workInProgress.flags |= 4194308),\n        (nextProps = !1));\n  } else {\n    context = workInProgress.stateNode;\n    cloneUpdateQueue(current, workInProgress);\n    contextType = workInProgress.memoizedProps;\n    contextType$jscomp$0 = resolveClassComponentProps(Component, contextType);\n    context.props = contextType$jscomp$0;\n    getDerivedStateFromProps = workInProgress.pendingProps;\n    oldState = context.context;\n    oldContext = Component.contextType;\n    oldProps = emptyContextObject;\n    \"object\" === typeof oldContext &&\n      null !== oldContext &&\n      (oldProps = readContext(oldContext));\n    unresolvedOldProps = Component.getDerivedStateFromProps;\n    (oldContext =\n      \"function\" === typeof unresolvedOldProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate) ||\n      (\"function\" !== typeof context.UNSAFE_componentWillReceiveProps &&\n        \"function\" !== typeof context.componentWillReceiveProps) ||\n      ((contextType !== getDerivedStateFromProps || oldState !== oldProps) &&\n        callComponentWillReceiveProps(\n          workInProgress,\n          context,\n          nextProps,\n          oldProps\n        ));\n    hasForceUpdate = !1;\n    oldState = workInProgress.memoizedState;\n    context.state = oldState;\n    processUpdateQueue(workInProgress, nextProps, context, renderLanes);\n    suspendIfUpdateReadFromEntangledAsyncAction();\n    var newState = workInProgress.memoizedState;\n    contextType !== getDerivedStateFromProps ||\n    oldState !== newState ||\n    hasForceUpdate ||\n    (null !== current &&\n      null !== current.dependencies &&\n      checkIfContextChanged(current.dependencies))\n      ? (\"function\" === typeof unresolvedOldProps &&\n          (applyDerivedStateFromProps(\n            workInProgress,\n            Component,\n            unresolvedOldProps,\n            nextProps\n          ),\n          (newState = workInProgress.memoizedState)),\n        (contextType$jscomp$0 =\n          hasForceUpdate ||\n          checkShouldComponentUpdate(\n            workInProgress,\n            Component,\n            contextType$jscomp$0,\n            nextProps,\n            oldState,\n            newState,\n            oldProps\n          ) ||\n          (null !== current &&\n            null !== current.dependencies &&\n            checkIfContextChanged(current.dependencies)))\n          ? (oldContext ||\n              (\"function\" !== typeof context.UNSAFE_componentWillUpdate &&\n                \"function\" !== typeof context.componentWillUpdate) ||\n              (\"function\" === typeof context.componentWillUpdate &&\n                context.componentWillUpdate(nextProps, newState, oldProps),\n              \"function\" === typeof context.UNSAFE_componentWillUpdate &&\n                context.UNSAFE_componentWillUpdate(\n                  nextProps,\n                  newState,\n                  oldProps\n                )),\n            \"function\" === typeof context.componentDidUpdate &&\n              (workInProgress.flags |= 4),\n            \"function\" === typeof context.getSnapshotBeforeUpdate &&\n              (workInProgress.flags |= 1024))\n          : (\"function\" !== typeof context.componentDidUpdate ||\n              (contextType === current.memoizedProps &&\n                oldState === current.memoizedState) ||\n              (workInProgress.flags |= 4),\n            \"function\" !== typeof context.getSnapshotBeforeUpdate ||\n              (contextType === current.memoizedProps &&\n                oldState === current.memoizedState) ||\n              (workInProgress.flags |= 1024),\n            (workInProgress.memoizedProps = nextProps),\n            (workInProgress.memoizedState = newState)),\n        (context.props = nextProps),\n        (context.state = newState),\n        (context.context = oldProps),\n        (nextProps = contextType$jscomp$0))\n      : (\"function\" !== typeof context.componentDidUpdate ||\n          (contextType === current.memoizedProps &&\n            oldState === current.memoizedState) ||\n          (workInProgress.flags |= 4),\n        \"function\" !== typeof context.getSnapshotBeforeUpdate ||\n          (contextType === current.memoizedProps &&\n            oldState === current.memoizedState) ||\n          (workInProgress.flags |= 1024),\n        (nextProps = !1));\n  }\n  context = nextProps;\n  markRef(current, workInProgress);\n  nextProps = 0 !== (workInProgress.flags & 128);\n  context || nextProps\n    ? ((context = workInProgress.stateNode),\n      (Component =\n        nextProps && \"function\" !== typeof Component.getDerivedStateFromError\n          ? null\n          : context.render()),\n      (workInProgress.flags |= 1),\n      null !== current && nextProps\n        ? ((workInProgress.child = reconcileChildFibers(\n            workInProgress,\n            current.child,\n            null,\n            renderLanes\n          )),\n          (workInProgress.child = reconcileChildFibers(\n            workInProgress,\n            null,\n            Component,\n            renderLanes\n          )))\n        : reconcileChildren(current, workInProgress, Component, renderLanes),\n      (workInProgress.memoizedState = context.state),\n      (current = workInProgress.child))\n    : (current = bailoutOnAlreadyFinishedWork(\n        current,\n        workInProgress,\n        renderLanes\n      ));\n  return current;\n}\nfunction mountHostRootWithoutHydrating(\n  current,\n  workInProgress,\n  nextChildren,\n  renderLanes\n) {\n  resetHydrationState();\n  workInProgress.flags |= 256;\n  reconcileChildren(current, workInProgress, nextChildren, renderLanes);\n  return workInProgress.child;\n}\nvar SUSPENDED_MARKER = {\n  dehydrated: null,\n  treeContext: null,\n  retryLane: 0,\n  hydrationErrors: null\n};\nfunction mountSuspenseOffscreenState(renderLanes) {\n  return { baseLanes: renderLanes, cachePool: getSuspendedCache() };\n}\nfunction getRemainingWorkInPrimaryTree(\n  current,\n  primaryTreeDidDefer,\n  renderLanes\n) {\n  current = null !== current ? current.childLanes & ~renderLanes : 0;\n  primaryTreeDidDefer && (current |= workInProgressDeferredLane);\n  return current;\n}\nfunction updateSuspenseComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    showFallback = !1,\n    didSuspend = 0 !== (workInProgress.flags & 128),\n    JSCompiler_temp;\n  (JSCompiler_temp = didSuspend) ||\n    (JSCompiler_temp =\n      null !== current && null === current.memoizedState\n        ? !1\n        : 0 !== (suspenseStackCursor.current & 2));\n  JSCompiler_temp && ((showFallback = !0), (workInProgress.flags &= -129));\n  JSCompiler_temp = 0 !== (workInProgress.flags & 32);\n  workInProgress.flags &= -33;\n  if (null === current) {\n    if (isHydrating) {\n      showFallback\n        ? pushPrimaryTreeSuspenseHandler(workInProgress)\n        : reuseSuspenseHandlerOnStack(workInProgress);\n      (current = nextHydratableInstance)\n        ? ((current = canHydrateHydrationBoundary(\n            current,\n            rootOrSingletonContext\n          )),\n          (current = null !== current && \"&\" !== current.data ? current : null),\n          null !== current &&\n            ((workInProgress.memoizedState = {\n              dehydrated: current,\n              treeContext:\n                null !== treeContextProvider\n                  ? { id: treeContextId, overflow: treeContextOverflow }\n                  : null,\n              retryLane: 536870912,\n              hydrationErrors: null\n            }),\n            (renderLanes = createFiberFromDehydratedFragment(current)),\n            (renderLanes.return = workInProgress),\n            (workInProgress.child = renderLanes),\n            (hydrationParentFiber = workInProgress),\n            (nextHydratableInstance = null)))\n        : (current = null);\n      if (null === current) throw throwOnHydrationMismatch(workInProgress);\n      isSuspenseInstanceFallback(current)\n        ? (workInProgress.lanes = 32)\n        : (workInProgress.lanes = 536870912);\n      return null;\n    }\n    var nextPrimaryChildren = nextProps.children;\n    nextProps = nextProps.fallback;\n    if (showFallback)\n      return (\n        reuseSuspenseHandlerOnStack(workInProgress),\n        (showFallback = workInProgress.mode),\n        (nextPrimaryChildren = mountWorkInProgressOffscreenFiber(\n          { mode: \"hidden\", children: nextPrimaryChildren },\n          showFallback\n        )),\n        (nextProps = createFiberFromFragment(\n          nextProps,\n          showFallback,\n          renderLanes,\n          null\n        )),\n        (nextPrimaryChildren.return = workInProgress),\n        (nextProps.return = workInProgress),\n        (nextPrimaryChildren.sibling = nextProps),\n        (workInProgress.child = nextPrimaryChildren),\n        (nextProps = workInProgress.child),\n        (nextProps.memoizedState = mountSuspenseOffscreenState(renderLanes)),\n        (nextProps.childLanes = getRemainingWorkInPrimaryTree(\n          current,\n          JSCompiler_temp,\n          renderLanes\n        )),\n        (workInProgress.memoizedState = SUSPENDED_MARKER),\n        bailoutOffscreenComponent(null, nextProps)\n      );\n    pushPrimaryTreeSuspenseHandler(workInProgress);\n    return mountSuspensePrimaryChildren(workInProgress, nextPrimaryChildren);\n  }\n  var prevState = current.memoizedState;\n  if (\n    null !== prevState &&\n    ((nextPrimaryChildren = prevState.dehydrated), null !== nextPrimaryChildren)\n  ) {\n    if (didSuspend)\n      workInProgress.flags & 256\n        ? (pushPrimaryTreeSuspenseHandler(workInProgress),\n          (workInProgress.flags &= -257),\n          (workInProgress = retrySuspenseComponentWithoutHydrating(\n            current,\n            workInProgress,\n            renderLanes\n          )))\n        : null !== workInProgress.memoizedState\n          ? (reuseSuspenseHandlerOnStack(workInProgress),\n            (workInProgress.child = current.child),\n            (workInProgress.flags |= 128),\n            (workInProgress = null))\n          : (reuseSuspenseHandlerOnStack(workInProgress),\n            (nextPrimaryChildren = nextProps.fallback),\n            (showFallback = workInProgress.mode),\n            (nextProps = mountWorkInProgressOffscreenFiber(\n              { mode: \"visible\", children: nextProps.children },\n              showFallback\n            )),\n            (nextPrimaryChildren = createFiberFromFragment(\n              nextPrimaryChildren,\n              showFallback,\n              renderLanes,\n              null\n            )),\n            (nextPrimaryChildren.flags |= 2),\n            (nextProps.return = workInProgress),\n            (nextPrimaryChildren.return = workInProgress),\n            (nextProps.sibling = nextPrimaryChildren),\n            (workInProgress.child = nextProps),\n            reconcileChildFibers(\n              workInProgress,\n              current.child,\n              null,\n              renderLanes\n            ),\n            (nextProps = workInProgress.child),\n            (nextProps.memoizedState =\n              mountSuspenseOffscreenState(renderLanes)),\n            (nextProps.childLanes = getRemainingWorkInPrimaryTree(\n              current,\n              JSCompiler_temp,\n              renderLanes\n            )),\n            (workInProgress.memoizedState = SUSPENDED_MARKER),\n            (workInProgress = bailoutOffscreenComponent(null, nextProps)));\n    else if (\n      (pushPrimaryTreeSuspenseHandler(workInProgress),\n      isSuspenseInstanceFallback(nextPrimaryChildren))\n    ) {\n      JSCompiler_temp =\n        nextPrimaryChildren.nextSibling &&\n        nextPrimaryChildren.nextSibling.dataset;\n      if (JSCompiler_temp) var digest = JSCompiler_temp.dgst;\n      JSCompiler_temp = digest;\n      nextProps = Error(formatProdErrorMessage(419));\n      nextProps.stack = \"\";\n      nextProps.digest = JSCompiler_temp;\n      queueHydrationError({ value: nextProps, source: null, stack: null });\n      workInProgress = retrySuspenseComponentWithoutHydrating(\n        current,\n        workInProgress,\n        renderLanes\n      );\n    } else if (\n      (didReceiveUpdate ||\n        propagateParentContextChanges(current, workInProgress, renderLanes, !1),\n      (JSCompiler_temp = 0 !== (renderLanes & current.childLanes)),\n      didReceiveUpdate || JSCompiler_temp)\n    ) {\n      JSCompiler_temp = workInProgressRoot;\n      if (\n        null !== JSCompiler_temp &&\n        ((nextProps = getBumpedLaneForHydration(JSCompiler_temp, renderLanes)),\n        0 !== nextProps && nextProps !== prevState.retryLane)\n      )\n        throw (\n          ((prevState.retryLane = nextProps),\n          enqueueConcurrentRenderForLane(current, nextProps),\n          scheduleUpdateOnFiber(JSCompiler_temp, current, nextProps),\n          SelectiveHydrationException)\n        );\n      isSuspenseInstancePending(nextPrimaryChildren) ||\n        renderDidSuspendDelayIfPossible();\n      workInProgress = retrySuspenseComponentWithoutHydrating(\n        current,\n        workInProgress,\n        renderLanes\n      );\n    } else\n      isSuspenseInstancePending(nextPrimaryChildren)\n        ? ((workInProgress.flags |= 192),\n          (workInProgress.child = current.child),\n          (workInProgress = null))\n        : ((current = prevState.treeContext),\n          (nextHydratableInstance = getNextHydratable(\n            nextPrimaryChildren.nextSibling\n          )),\n          (hydrationParentFiber = workInProgress),\n          (isHydrating = !0),\n          (hydrationErrors = null),\n          (rootOrSingletonContext = !1),\n          null !== current &&\n            restoreSuspendedTreeContext(workInProgress, current),\n          (workInProgress = mountSuspensePrimaryChildren(\n            workInProgress,\n            nextProps.children\n          )),\n          (workInProgress.flags |= 4096));\n    return workInProgress;\n  }\n  if (showFallback)\n    return (\n      reuseSuspenseHandlerOnStack(workInProgress),\n      (nextPrimaryChildren = nextProps.fallback),\n      (showFallback = workInProgress.mode),\n      (prevState = current.child),\n      (digest = prevState.sibling),\n      (nextProps = createWorkInProgress(prevState, {\n        mode: \"hidden\",\n        children: nextProps.children\n      })),\n      (nextProps.subtreeFlags = prevState.subtreeFlags & 65011712),\n      null !== digest\n        ? (nextPrimaryChildren = createWorkInProgress(\n            digest,\n            nextPrimaryChildren\n          ))\n        : ((nextPrimaryChildren = createFiberFromFragment(\n            nextPrimaryChildren,\n            showFallback,\n            renderLanes,\n            null\n          )),\n          (nextPrimaryChildren.flags |= 2)),\n      (nextPrimaryChildren.return = workInProgress),\n      (nextProps.return = workInProgress),\n      (nextProps.sibling = nextPrimaryChildren),\n      (workInProgress.child = nextProps),\n      bailoutOffscreenComponent(null, nextProps),\n      (nextProps = workInProgress.child),\n      (nextPrimaryChildren = current.child.memoizedState),\n      null === nextPrimaryChildren\n        ? (nextPrimaryChildren = mountSuspenseOffscreenState(renderLanes))\n        : ((showFallback = nextPrimaryChildren.cachePool),\n          null !== showFallback\n            ? ((prevState = CacheContext._currentValue),\n              (showFallback =\n                showFallback.parent !== prevState\n                  ? { parent: prevState, pool: prevState }\n                  : showFallback))\n            : (showFallback = getSuspendedCache()),\n          (nextPrimaryChildren = {\n            baseLanes: nextPrimaryChildren.baseLanes | renderLanes,\n            cachePool: showFallback\n          })),\n      (nextProps.memoizedState = nextPrimaryChildren),\n      (nextProps.childLanes = getRemainingWorkInPrimaryTree(\n        current,\n        JSCompiler_temp,\n        renderLanes\n      )),\n      (workInProgress.memoizedState = SUSPENDED_MARKER),\n      bailoutOffscreenComponent(current.child, nextProps)\n    );\n  pushPrimaryTreeSuspenseHandler(workInProgress);\n  renderLanes = current.child;\n  current = renderLanes.sibling;\n  renderLanes = createWorkInProgress(renderLanes, {\n    mode: \"visible\",\n    children: nextProps.children\n  });\n  renderLanes.return = workInProgress;\n  renderLanes.sibling = null;\n  null !== current &&\n    ((JSCompiler_temp = workInProgress.deletions),\n    null === JSCompiler_temp\n      ? ((workInProgress.deletions = [current]), (workInProgress.flags |= 16))\n      : JSCompiler_temp.push(current));\n  workInProgress.child = renderLanes;\n  workInProgress.memoizedState = null;\n  return renderLanes;\n}\nfunction mountSuspensePrimaryChildren(workInProgress, primaryChildren) {\n  primaryChildren = mountWorkInProgressOffscreenFiber(\n    { mode: \"visible\", children: primaryChildren },\n    workInProgress.mode\n  );\n  primaryChildren.return = workInProgress;\n  return (workInProgress.child = primaryChildren);\n}\nfunction mountWorkInProgressOffscreenFiber(offscreenProps, mode) {\n  offscreenProps = createFiberImplClass(22, offscreenProps, null, mode);\n  offscreenProps.lanes = 0;\n  return offscreenProps;\n}\nfunction retrySuspenseComponentWithoutHydrating(\n  current,\n  workInProgress,\n  renderLanes\n) {\n  reconcileChildFibers(workInProgress, current.child, null, renderLanes);\n  current = mountSuspensePrimaryChildren(\n    workInProgress,\n    workInProgress.pendingProps.children\n  );\n  current.flags |= 2;\n  workInProgress.memoizedState = null;\n  return current;\n}\nfunction scheduleSuspenseWorkOnFiber(fiber, renderLanes, propagationRoot) {\n  fiber.lanes |= renderLanes;\n  var alternate = fiber.alternate;\n  null !== alternate && (alternate.lanes |= renderLanes);\n  scheduleContextWorkOnParentPath(fiber.return, renderLanes, propagationRoot);\n}\nfunction initSuspenseListRenderState(\n  workInProgress,\n  isBackwards,\n  tail,\n  lastContentRow,\n  tailMode,\n  treeForkCount\n) {\n  var renderState = workInProgress.memoizedState;\n  null === renderState\n    ? (workInProgress.memoizedState = {\n        isBackwards: isBackwards,\n        rendering: null,\n        renderingStartTime: 0,\n        last: lastContentRow,\n        tail: tail,\n        tailMode: tailMode,\n        treeForkCount: treeForkCount\n      })\n    : ((renderState.isBackwards = isBackwards),\n      (renderState.rendering = null),\n      (renderState.renderingStartTime = 0),\n      (renderState.last = lastContentRow),\n      (renderState.tail = tail),\n      (renderState.tailMode = tailMode),\n      (renderState.treeForkCount = treeForkCount));\n}\nfunction updateSuspenseListComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    revealOrder = nextProps.revealOrder,\n    tailMode = nextProps.tail;\n  nextProps = nextProps.children;\n  var suspenseContext = suspenseStackCursor.current,\n    shouldForceFallback = 0 !== (suspenseContext & 2);\n  shouldForceFallback\n    ? ((suspenseContext = (suspenseContext & 1) | 2),\n      (workInProgress.flags |= 128))\n    : (suspenseContext &= 1);\n  push(suspenseStackCursor, suspenseContext);\n  reconcileChildren(current, workInProgress, nextProps, renderLanes);\n  nextProps = isHydrating ? treeForkCount : 0;\n  if (!shouldForceFallback && null !== current && 0 !== (current.flags & 128))\n    a: for (current = workInProgress.child; null !== current; ) {\n      if (13 === current.tag)\n        null !== current.memoizedState &&\n          scheduleSuspenseWorkOnFiber(current, renderLanes, workInProgress);\n      else if (19 === current.tag)\n        scheduleSuspenseWorkOnFiber(current, renderLanes, workInProgress);\n      else if (null !== current.child) {\n        current.child.return = current;\n        current = current.child;\n        continue;\n      }\n      if (current === workInProgress) break a;\n      for (; null === current.sibling; ) {\n        if (null === current.return || current.return === workInProgress)\n          break a;\n        current = current.return;\n      }\n      current.sibling.return = current.return;\n      current = current.sibling;\n    }\n  switch (revealOrder) {\n    case \"forwards\":\n      renderLanes = workInProgress.child;\n      for (revealOrder = null; null !== renderLanes; )\n        (current = renderLanes.alternate),\n          null !== current &&\n            null === findFirstSuspended(current) &&\n            (revealOrder = renderLanes),\n          (renderLanes = renderLanes.sibling);\n      renderLanes = revealOrder;\n      null === renderLanes\n        ? ((revealOrder = workInProgress.child), (workInProgress.child = null))\n        : ((revealOrder = renderLanes.sibling), (renderLanes.sibling = null));\n      initSuspenseListRenderState(\n        workInProgress,\n        !1,\n        revealOrder,\n        renderLanes,\n        tailMode,\n        nextProps\n      );\n      break;\n    case \"backwards\":\n    case \"unstable_legacy-backwards\":\n      renderLanes = null;\n      revealOrder = workInProgress.child;\n      for (workInProgress.child = null; null !== revealOrder; ) {\n        current = revealOrder.alternate;\n        if (null !== current && null === findFirstSuspended(current)) {\n          workInProgress.child = revealOrder;\n          break;\n        }\n        current = revealOrder.sibling;\n        revealOrder.sibling = renderLanes;\n        renderLanes = revealOrder;\n        revealOrder = current;\n      }\n      initSuspenseListRenderState(\n        workInProgress,\n        !0,\n        renderLanes,\n        null,\n        tailMode,\n        nextProps\n      );\n      break;\n    case \"together\":\n      initSuspenseListRenderState(\n        workInProgress,\n        !1,\n        null,\n        null,\n        void 0,\n        nextProps\n      );\n      break;\n    default:\n      workInProgress.memoizedState = null;\n  }\n  return workInProgress.child;\n}\nfunction bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes) {\n  null !== current && (workInProgress.dependencies = current.dependencies);\n  workInProgressRootSkippedLanes |= workInProgress.lanes;\n  if (0 === (renderLanes & workInProgress.childLanes))\n    if (null !== current) {\n      if (\n        (propagateParentContextChanges(\n          current,\n          workInProgress,\n          renderLanes,\n          !1\n        ),\n        0 === (renderLanes & workInProgress.childLanes))\n      )\n        return null;\n    } else return null;\n  if (null !== current && workInProgress.child !== current.child)\n    throw Error(formatProdErrorMessage(153));\n  if (null !== workInProgress.child) {\n    current = workInProgress.child;\n    renderLanes = createWorkInProgress(current, current.pendingProps);\n    workInProgress.child = renderLanes;\n    for (renderLanes.return = workInProgress; null !== current.sibling; )\n      (current = current.sibling),\n        (renderLanes = renderLanes.sibling =\n          createWorkInProgress(current, current.pendingProps)),\n        (renderLanes.return = workInProgress);\n    renderLanes.sibling = null;\n  }\n  return workInProgress.child;\n}\nfunction checkScheduledUpdateOrContext(current, renderLanes) {\n  if (0 !== (current.lanes & renderLanes)) return !0;\n  current = current.dependencies;\n  return null !== current && checkIfContextChanged(current) ? !0 : !1;\n}\nfunction attemptEarlyBailoutIfNoScheduledUpdate(\n  current,\n  workInProgress,\n  renderLanes\n) {\n  switch (workInProgress.tag) {\n    case 3:\n      pushHostContainer(workInProgress, workInProgress.stateNode.containerInfo);\n      pushProvider(workInProgress, CacheContext, current.memoizedState.cache);\n      resetHydrationState();\n      break;\n    case 27:\n    case 5:\n      pushHostContext(workInProgress);\n      break;\n    case 4:\n      pushHostContainer(workInProgress, workInProgress.stateNode.containerInfo);\n      break;\n    case 10:\n      pushProvider(\n        workInProgress,\n        workInProgress.type,\n        workInProgress.memoizedProps.value\n      );\n      break;\n    case 31:\n      if (null !== workInProgress.memoizedState)\n        return (\n          (workInProgress.flags |= 128),\n          pushDehydratedActivitySuspenseHandler(workInProgress),\n          null\n        );\n      break;\n    case 13:\n      var state$102 = workInProgress.memoizedState;\n      if (null !== state$102) {\n        if (null !== state$102.dehydrated)\n          return (\n            pushPrimaryTreeSuspenseHandler(workInProgress),\n            (workInProgress.flags |= 128),\n            null\n          );\n        if (0 !== (renderLanes & workInProgress.child.childLanes))\n          return updateSuspenseComponent(current, workInProgress, renderLanes);\n        pushPrimaryTreeSuspenseHandler(workInProgress);\n        current = bailoutOnAlreadyFinishedWork(\n          current,\n          workInProgress,\n          renderLanes\n        );\n        return null !== current ? current.sibling : null;\n      }\n      pushPrimaryTreeSuspenseHandler(workInProgress);\n      break;\n    case 19:\n      var didSuspendBefore = 0 !== (current.flags & 128);\n      state$102 = 0 !== (renderLanes & workInProgress.childLanes);\n      state$102 ||\n        (propagateParentContextChanges(\n          current,\n          workInProgress,\n          renderLanes,\n          !1\n        ),\n        (state$102 = 0 !== (renderLanes & workInProgress.childLanes)));\n      if (didSuspendBefore) {\n        if (state$102)\n          return updateSuspenseListComponent(\n            current,\n            workInProgress,\n            renderLanes\n          );\n        workInProgress.flags |= 128;\n      }\n      didSuspendBefore = workInProgress.memoizedState;\n      null !== didSuspendBefore &&\n        ((didSuspendBefore.rendering = null),\n        (didSuspendBefore.tail = null),\n        (didSuspendBefore.lastEffect = null));\n      push(suspenseStackCursor, suspenseStackCursor.current);\n      if (state$102) break;\n      else return null;\n    case 22:\n      return (\n        (workInProgress.lanes = 0),\n        updateOffscreenComponent(\n          current,\n          workInProgress,\n          renderLanes,\n          workInProgress.pendingProps\n        )\n      );\n    case 24:\n      pushProvider(workInProgress, CacheContext, current.memoizedState.cache);\n  }\n  return bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes);\n}\nfunction beginWork(current, workInProgress, renderLanes) {\n  if (null !== current)\n    if (current.memoizedProps !== workInProgress.pendingProps)\n      didReceiveUpdate = !0;\n    else {\n      if (\n        !checkScheduledUpdateOrContext(current, renderLanes) &&\n        0 === (workInProgress.flags & 128)\n      )\n        return (\n          (didReceiveUpdate = !1),\n          attemptEarlyBailoutIfNoScheduledUpdate(\n            current,\n            workInProgress,\n            renderLanes\n          )\n        );\n      didReceiveUpdate = 0 !== (current.flags & 131072) ? !0 : !1;\n    }\n  else\n    (didReceiveUpdate = !1),\n      isHydrating &&\n        0 !== (workInProgress.flags & 1048576) &&\n        pushTreeId(workInProgress, treeForkCount, workInProgress.index);\n  workInProgress.lanes = 0;\n  switch (workInProgress.tag) {\n    case 16:\n      a: {\n        var props = workInProgress.pendingProps;\n        current = resolveLazy(workInProgress.elementType);\n        workInProgress.type = current;\n        if (\"function\" === typeof current)\n          shouldConstruct(current)\n            ? ((props = resolveClassComponentProps(current, props)),\n              (workInProgress.tag = 1),\n              (workInProgress = updateClassComponent(\n                null,\n                workInProgress,\n                current,\n                props,\n                renderLanes\n              )))\n            : ((workInProgress.tag = 0),\n              (workInProgress = updateFunctionComponent(\n                null,\n                workInProgress,\n                current,\n                props,\n                renderLanes\n              )));\n        else {\n          if (void 0 !== current && null !== current) {\n            var $$typeof = current.$$typeof;\n            if ($$typeof === REACT_FORWARD_REF_TYPE) {\n              workInProgress.tag = 11;\n              workInProgress = updateForwardRef(\n                null,\n                workInProgress,\n                current,\n                props,\n                renderLanes\n              );\n              break a;\n            } else if ($$typeof === REACT_MEMO_TYPE) {\n              workInProgress.tag = 14;\n              workInProgress = updateMemoComponent(\n                null,\n                workInProgress,\n                current,\n                props,\n                renderLanes\n              );\n              break a;\n            }\n          }\n          workInProgress = getComponentNameFromType(current) || current;\n          throw Error(formatProdErrorMessage(306, workInProgress, \"\"));\n        }\n      }\n      return workInProgress;\n    case 0:\n      return updateFunctionComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 1:\n      return (\n        (props = workInProgress.type),\n        ($$typeof = resolveClassComponentProps(\n          props,\n          workInProgress.pendingProps\n        )),\n        updateClassComponent(\n          current,\n          workInProgress,\n          props,\n          $$typeof,\n          renderLanes\n        )\n      );\n    case 3:\n      a: {\n        pushHostContainer(\n          workInProgress,\n          workInProgress.stateNode.containerInfo\n        );\n        if (null === current) throw Error(formatProdErrorMessage(387));\n        props = workInProgress.pendingProps;\n        var prevState = workInProgress.memoizedState;\n        $$typeof = prevState.element;\n        cloneUpdateQueue(current, workInProgress);\n        processUpdateQueue(workInProgress, props, null, renderLanes);\n        var nextState = workInProgress.memoizedState;\n        props = nextState.cache;\n        pushProvider(workInProgress, CacheContext, props);\n        props !== prevState.cache &&\n          propagateContextChanges(\n            workInProgress,\n            [CacheContext],\n            renderLanes,\n            !0\n          );\n        suspendIfUpdateReadFromEntangledAsyncAction();\n        props = nextState.element;\n        if (prevState.isDehydrated)\n          if (\n            ((prevState = {\n              element: props,\n              isDehydrated: !1,\n              cache: nextState.cache\n            }),\n            (workInProgress.updateQueue.baseState = prevState),\n            (workInProgress.memoizedState = prevState),\n            workInProgress.flags & 256)\n          ) {\n            workInProgress = mountHostRootWithoutHydrating(\n              current,\n              workInProgress,\n              props,\n              renderLanes\n            );\n            break a;\n          } else if (props !== $$typeof) {\n            $$typeof = createCapturedValueAtFiber(\n              Error(formatProdErrorMessage(424)),\n              workInProgress\n            );\n            queueHydrationError($$typeof);\n            workInProgress = mountHostRootWithoutHydrating(\n              current,\n              workInProgress,\n              props,\n              renderLanes\n            );\n            break a;\n          } else {\n            current = workInProgress.stateNode.containerInfo;\n            switch (current.nodeType) {\n              case 9:\n                current = current.body;\n                break;\n              default:\n                current =\n                  \"HTML\" === current.nodeName\n                    ? current.ownerDocument.body\n                    : current;\n            }\n            nextHydratableInstance = getNextHydratable(current.firstChild);\n            hydrationParentFiber = workInProgress;\n            isHydrating = !0;\n            hydrationErrors = null;\n            rootOrSingletonContext = !0;\n            renderLanes = mountChildFibers(\n              workInProgress,\n              null,\n              props,\n              renderLanes\n            );\n            for (workInProgress.child = renderLanes; renderLanes; )\n              (renderLanes.flags = (renderLanes.flags & -3) | 4096),\n                (renderLanes = renderLanes.sibling);\n          }\n        else {\n          resetHydrationState();\n          if (props === $$typeof) {\n            workInProgress = bailoutOnAlreadyFinishedWork(\n              current,\n              workInProgress,\n              renderLanes\n            );\n            break a;\n          }\n          reconcileChildren(current, workInProgress, props, renderLanes);\n        }\n        workInProgress = workInProgress.child;\n      }\n      return workInProgress;\n    case 26:\n      return (\n        markRef(current, workInProgress),\n        null === current\n          ? (renderLanes = getResource(\n              workInProgress.type,\n              null,\n              workInProgress.pendingProps,\n              null\n            ))\n            ? (workInProgress.memoizedState = renderLanes)\n            : isHydrating ||\n              ((renderLanes = workInProgress.type),\n              (current = workInProgress.pendingProps),\n              (props = getOwnerDocumentFromRootContainer(\n                rootInstanceStackCursor.current\n              ).createElement(renderLanes)),\n              (props[internalInstanceKey] = workInProgress),\n              (props[internalPropsKey] = current),\n              setInitialProperties(props, renderLanes, current),\n              markNodeAsHoistable(props),\n              (workInProgress.stateNode = props))\n          : (workInProgress.memoizedState = getResource(\n              workInProgress.type,\n              current.memoizedProps,\n              workInProgress.pendingProps,\n              current.memoizedState\n            )),\n        null\n      );\n    case 27:\n      return (\n        pushHostContext(workInProgress),\n        null === current &&\n          isHydrating &&\n          ((props = workInProgress.stateNode =\n            resolveSingletonInstance(\n              workInProgress.type,\n              workInProgress.pendingProps,\n              rootInstanceStackCursor.current\n            )),\n          (hydrationParentFiber = workInProgress),\n          (rootOrSingletonContext = !0),\n          ($$typeof = nextHydratableInstance),\n          isSingletonScope(workInProgress.type)\n            ? ((previousHydratableOnEnteringScopedSingleton = $$typeof),\n              (nextHydratableInstance = getNextHydratable(props.firstChild)))\n            : (nextHydratableInstance = $$typeof)),\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        markRef(current, workInProgress),\n        null === current && (workInProgress.flags |= 4194304),\n        workInProgress.child\n      );\n    case 5:\n      if (null === current && isHydrating) {\n        if (($$typeof = props = nextHydratableInstance))\n          (props = canHydrateInstance(\n            props,\n            workInProgress.type,\n            workInProgress.pendingProps,\n            rootOrSingletonContext\n          )),\n            null !== props\n              ? ((workInProgress.stateNode = props),\n                (hydrationParentFiber = workInProgress),\n                (nextHydratableInstance = getNextHydratable(props.firstChild)),\n                (rootOrSingletonContext = !1),\n                ($$typeof = !0))\n              : ($$typeof = !1);\n        $$typeof || throwOnHydrationMismatch(workInProgress);\n      }\n      pushHostContext(workInProgress);\n      $$typeof = workInProgress.type;\n      prevState = workInProgress.pendingProps;\n      nextState = null !== current ? current.memoizedProps : null;\n      props = prevState.children;\n      shouldSetTextContent($$typeof, prevState)\n        ? (props = null)\n        : null !== nextState &&\n          shouldSetTextContent($$typeof, nextState) &&\n          (workInProgress.flags |= 32);\n      null !== workInProgress.memoizedState &&\n        (($$typeof = renderWithHooks(\n          current,\n          workInProgress,\n          TransitionAwareHostComponent,\n          null,\n          null,\n          renderLanes\n        )),\n        (HostTransitionContext._currentValue = $$typeof));\n      markRef(current, workInProgress);\n      reconcileChildren(current, workInProgress, props, renderLanes);\n      return workInProgress.child;\n    case 6:\n      if (null === current && isHydrating) {\n        if ((current = renderLanes = nextHydratableInstance))\n          (renderLanes = canHydrateTextInstance(\n            renderLanes,\n            workInProgress.pendingProps,\n            rootOrSingletonContext\n          )),\n            null !== renderLanes\n              ? ((workInProgress.stateNode = renderLanes),\n                (hydrationParentFiber = workInProgress),\n                (nextHydratableInstance = null),\n                (current = !0))\n              : (current = !1);\n        current || throwOnHydrationMismatch(workInProgress);\n      }\n      return null;\n    case 13:\n      return updateSuspenseComponent(current, workInProgress, renderLanes);\n    case 4:\n      return (\n        pushHostContainer(\n          workInProgress,\n          workInProgress.stateNode.containerInfo\n        ),\n        (props = workInProgress.pendingProps),\n        null === current\n          ? (workInProgress.child = reconcileChildFibers(\n              workInProgress,\n              null,\n              props,\n              renderLanes\n            ))\n          : reconcileChildren(current, workInProgress, props, renderLanes),\n        workInProgress.child\n      );\n    case 11:\n      return updateForwardRef(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 7:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 8:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 12:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 10:\n      return (\n        (props = workInProgress.pendingProps),\n        pushProvider(workInProgress, workInProgress.type, props.value),\n        reconcileChildren(current, workInProgress, props.children, renderLanes),\n        workInProgress.child\n      );\n    case 9:\n      return (\n        ($$typeof = workInProgress.type._context),\n        (props = workInProgress.pendingProps.children),\n        prepareToReadContext(workInProgress),\n        ($$typeof = readContext($$typeof)),\n        (props = props($$typeof)),\n        (workInProgress.flags |= 1),\n        reconcileChildren(current, workInProgress, props, renderLanes),\n        workInProgress.child\n      );\n    case 14:\n      return updateMemoComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 15:\n      return updateSimpleMemoComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 19:\n      return updateSuspenseListComponent(current, workInProgress, renderLanes);\n    case 31:\n      return updateActivityComponent(current, workInProgress, renderLanes);\n    case 22:\n      return updateOffscreenComponent(\n        current,\n        workInProgress,\n        renderLanes,\n        workInProgress.pendingProps\n      );\n    case 24:\n      return (\n        prepareToReadContext(workInProgress),\n        (props = readContext(CacheContext)),\n        null === current\n          ? (($$typeof = peekCacheFromPool()),\n            null === $$typeof &&\n              (($$typeof = workInProgressRoot),\n              (prevState = createCache()),\n              ($$typeof.pooledCache = prevState),\n              prevState.refCount++,\n              null !== prevState && ($$typeof.pooledCacheLanes |= renderLanes),\n              ($$typeof = prevState)),\n            (workInProgress.memoizedState = { parent: props, cache: $$typeof }),\n            initializeUpdateQueue(workInProgress),\n            pushProvider(workInProgress, CacheContext, $$typeof))\n          : (0 !== (current.lanes & renderLanes) &&\n              (cloneUpdateQueue(current, workInProgress),\n              processUpdateQueue(workInProgress, null, null, renderLanes),\n              suspendIfUpdateReadFromEntangledAsyncAction()),\n            ($$typeof = current.memoizedState),\n            (prevState = workInProgress.memoizedState),\n            $$typeof.parent !== props\n              ? (($$typeof = { parent: props, cache: props }),\n                (workInProgress.memoizedState = $$typeof),\n                0 === workInProgress.lanes &&\n                  (workInProgress.memoizedState =\n                    workInProgress.updateQueue.baseState =\n                      $$typeof),\n                pushProvider(workInProgress, CacheContext, props))\n              : ((props = prevState.cache),\n                pushProvider(workInProgress, CacheContext, props),\n                props !== $$typeof.cache &&\n                  propagateContextChanges(\n                    workInProgress,\n                    [CacheContext],\n                    renderLanes,\n                    !0\n                  ))),\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 29:\n      throw workInProgress.pendingProps;\n  }\n  throw Error(formatProdErrorMessage(156, workInProgress.tag));\n}\nfunction markUpdate(workInProgress) {\n  workInProgress.flags |= 4;\n}\nfunction preloadInstanceAndSuspendIfNeeded(\n  workInProgress,\n  type,\n  oldProps,\n  newProps,\n  renderLanes\n) {\n  if ((type = 0 !== (workInProgress.mode & 32))) type = !1;\n  if (type) {\n    if (\n      ((workInProgress.flags |= 16777216),\n      (renderLanes & 335544128) === renderLanes)\n    )\n      if (workInProgress.stateNode.complete) workInProgress.flags |= 8192;\n      else if (shouldRemainOnPreviousScreen()) workInProgress.flags |= 8192;\n      else\n        throw (\n          ((suspendedThenable = noopSuspenseyCommitThenable),\n          SuspenseyCommitException)\n        );\n  } else workInProgress.flags &= -16777217;\n}\nfunction preloadResourceAndSuspendIfNeeded(workInProgress, resource) {\n  if (\"stylesheet\" !== resource.type || 0 !== (resource.state.loading & 4))\n    workInProgress.flags &= -16777217;\n  else if (((workInProgress.flags |= 16777216), !preloadResource(resource)))\n    if (shouldRemainOnPreviousScreen()) workInProgress.flags |= 8192;\n    else\n      throw (\n        ((suspendedThenable = noopSuspenseyCommitThenable),\n        SuspenseyCommitException)\n      );\n}\nfunction scheduleRetryEffect(workInProgress, retryQueue) {\n  null !== retryQueue && (workInProgress.flags |= 4);\n  workInProgress.flags & 16384 &&\n    ((retryQueue =\n      22 !== workInProgress.tag ? claimNextRetryLane() : 536870912),\n    (workInProgress.lanes |= retryQueue),\n    (workInProgressSuspendedRetryLanes |= retryQueue));\n}\nfunction cutOffTailIfNeeded(renderState, hasRenderedATailFallback) {\n  if (!isHydrating)\n    switch (renderState.tailMode) {\n      case \"hidden\":\n        hasRenderedATailFallback = renderState.tail;\n        for (var lastTailNode = null; null !== hasRenderedATailFallback; )\n          null !== hasRenderedATailFallback.alternate &&\n            (lastTailNode = hasRenderedATailFallback),\n            (hasRenderedATailFallback = hasRenderedATailFallback.sibling);\n        null === lastTailNode\n          ? (renderState.tail = null)\n          : (lastTailNode.sibling = null);\n        break;\n      case \"collapsed\":\n        lastTailNode = renderState.tail;\n        for (var lastTailNode$106 = null; null !== lastTailNode; )\n          null !== lastTailNode.alternate && (lastTailNode$106 = lastTailNode),\n            (lastTailNode = lastTailNode.sibling);\n        null === lastTailNode$106\n          ? hasRenderedATailFallback || null === renderState.tail\n            ? (renderState.tail = null)\n            : (renderState.tail.sibling = null)\n          : (lastTailNode$106.sibling = null);\n    }\n}\nfunction bubbleProperties(completedWork) {\n  var didBailout =\n      null !== completedWork.alternate &&\n      completedWork.alternate.child === completedWork.child,\n    newChildLanes = 0,\n    subtreeFlags = 0;\n  if (didBailout)\n    for (var child$107 = completedWork.child; null !== child$107; )\n      (newChildLanes |= child$107.lanes | child$107.childLanes),\n        (subtreeFlags |= child$107.subtreeFlags & 65011712),\n        (subtreeFlags |= child$107.flags & 65011712),\n        (child$107.return = completedWork),\n        (child$107 = child$107.sibling);\n  else\n    for (child$107 = completedWork.child; null !== child$107; )\n      (newChildLanes |= child$107.lanes | child$107.childLanes),\n        (subtreeFlags |= child$107.subtreeFlags),\n        (subtreeFlags |= child$107.flags),\n        (child$107.return = completedWork),\n        (child$107 = child$107.sibling);\n  completedWork.subtreeFlags |= subtreeFlags;\n  completedWork.childLanes = newChildLanes;\n  return didBailout;\n}\nfunction completeWork(current, workInProgress, renderLanes) {\n  var newProps = workInProgress.pendingProps;\n  popTreeContext(workInProgress);\n  switch (workInProgress.tag) {\n    case 16:\n    case 15:\n    case 0:\n    case 11:\n    case 7:\n    case 8:\n    case 12:\n    case 9:\n    case 14:\n      return bubbleProperties(workInProgress), null;\n    case 1:\n      return bubbleProperties(workInProgress), null;\n    case 3:\n      renderLanes = workInProgress.stateNode;\n      newProps = null;\n      null !== current && (newProps = current.memoizedState.cache);\n      workInProgress.memoizedState.cache !== newProps &&\n        (workInProgress.flags |= 2048);\n      popProvider(CacheContext);\n      popHostContainer();\n      renderLanes.pendingContext &&\n        ((renderLanes.context = renderLanes.pendingContext),\n        (renderLanes.pendingContext = null));\n      if (null === current || null === current.child)\n        popHydrationState(workInProgress)\n          ? markUpdate(workInProgress)\n          : null === current ||\n            (current.memoizedState.isDehydrated &&\n              0 === (workInProgress.flags & 256)) ||\n            ((workInProgress.flags |= 1024),\n            upgradeHydrationErrorsToRecoverable());\n      bubbleProperties(workInProgress);\n      return null;\n    case 26:\n      var type = workInProgress.type,\n        nextResource = workInProgress.memoizedState;\n      null === current\n        ? (markUpdate(workInProgress),\n          null !== nextResource\n            ? (bubbleProperties(workInProgress),\n              preloadResourceAndSuspendIfNeeded(workInProgress, nextResource))\n            : (bubbleProperties(workInProgress),\n              preloadInstanceAndSuspendIfNeeded(\n                workInProgress,\n                type,\n                null,\n                newProps,\n                renderLanes\n              )))\n        : nextResource\n          ? nextResource !== current.memoizedState\n            ? (markUpdate(workInProgress),\n              bubbleProperties(workInProgress),\n              preloadResourceAndSuspendIfNeeded(workInProgress, nextResource))\n            : (bubbleProperties(workInProgress),\n              (workInProgress.flags &= -16777217))\n          : ((current = current.memoizedProps),\n            current !== newProps && markUpdate(workInProgress),\n            bubbleProperties(workInProgress),\n            preloadInstanceAndSuspendIfNeeded(\n              workInProgress,\n              type,\n              current,\n              newProps,\n              renderLanes\n            ));\n      return null;\n    case 27:\n      popHostContext(workInProgress);\n      renderLanes = rootInstanceStackCursor.current;\n      type = workInProgress.type;\n      if (null !== current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (!newProps) {\n          if (null === workInProgress.stateNode)\n            throw Error(formatProdErrorMessage(166));\n          bubbleProperties(workInProgress);\n          return null;\n        }\n        current = contextStackCursor.current;\n        popHydrationState(workInProgress)\n          ? prepareToHydrateHostInstance(workInProgress, current)\n          : ((current = resolveSingletonInstance(type, newProps, renderLanes)),\n            (workInProgress.stateNode = current),\n            markUpdate(workInProgress));\n      }\n      bubbleProperties(workInProgress);\n      return null;\n    case 5:\n      popHostContext(workInProgress);\n      type = workInProgress.type;\n      if (null !== current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (!newProps) {\n          if (null === workInProgress.stateNode)\n            throw Error(formatProdErrorMessage(166));\n          bubbleProperties(workInProgress);\n          return null;\n        }\n        nextResource = contextStackCursor.current;\n        if (popHydrationState(workInProgress))\n          prepareToHydrateHostInstance(workInProgress, nextResource);\n        else {\n          var ownerDocument = getOwnerDocumentFromRootContainer(\n            rootInstanceStackCursor.current\n          );\n          switch (nextResource) {\n            case 1:\n              nextResource = ownerDocument.createElementNS(\n                \"http://www.w3.org/2000/svg\",\n                type\n              );\n              break;\n            case 2:\n              nextResource = ownerDocument.createElementNS(\n                \"http://www.w3.org/1998/Math/MathML\",\n                type\n              );\n              break;\n            default:\n              switch (type) {\n                case \"svg\":\n                  nextResource = ownerDocument.createElementNS(\n                    \"http://www.w3.org/2000/svg\",\n                    type\n                  );\n                  break;\n                case \"math\":\n                  nextResource = ownerDocument.createElementNS(\n                    \"http://www.w3.org/1998/Math/MathML\",\n                    type\n                  );\n                  break;\n                case \"script\":\n                  nextResource = ownerDocument.createElement(\"div\");\n                  nextResource.innerHTML = \"<script>\\x3c/script>\";\n                  nextResource = nextResource.removeChild(\n                    nextResource.firstChild\n                  );\n                  break;\n                case \"select\":\n                  nextResource =\n                    \"string\" === typeof newProps.is\n                      ? ownerDocument.createElement(\"select\", {\n                          is: newProps.is\n                        })\n                      : ownerDocument.createElement(\"select\");\n                  newProps.multiple\n                    ? (nextResource.multiple = !0)\n                    : newProps.size && (nextResource.size = newProps.size);\n                  break;\n                default:\n                  nextResource =\n                    \"string\" === typeof newProps.is\n                      ? ownerDocument.createElement(type, { is: newProps.is })\n                      : ownerDocument.createElement(type);\n              }\n          }\n          nextResource[internalInstanceKey] = workInProgress;\n          nextResource[internalPropsKey] = newProps;\n          a: for (\n            ownerDocument = workInProgress.child;\n            null !== ownerDocument;\n\n          ) {\n            if (5 === ownerDocument.tag || 6 === ownerDocument.tag)\n              nextResource.appendChild(ownerDocument.stateNode);\n            else if (\n              4 !== ownerDocument.tag &&\n              27 !== ownerDocument.tag &&\n              null !== ownerDocument.child\n            ) {\n              ownerDocument.child.return = ownerDocument;\n              ownerDocument = ownerDocument.child;\n              continue;\n            }\n            if (ownerDocument === workInProgress) break a;\n            for (; null === ownerDocument.sibling; ) {\n              if (\n                null === ownerDocument.return ||\n                ownerDocument.return === workInProgress\n              )\n                break a;\n              ownerDocument = ownerDocument.return;\n            }\n            ownerDocument.sibling.return = ownerDocument.return;\n            ownerDocument = ownerDocument.sibling;\n          }\n          workInProgress.stateNode = nextResource;\n          a: switch (\n            (setInitialProperties(nextResource, type, newProps), type)\n          ) {\n            case \"button\":\n            case \"input\":\n            case \"select\":\n            case \"textarea\":\n              newProps = !!newProps.autoFocus;\n              break a;\n            case \"img\":\n              newProps = !0;\n              break a;\n            default:\n              newProps = !1;\n          }\n          newProps && markUpdate(workInProgress);\n        }\n      }\n      bubbleProperties(workInProgress);\n      preloadInstanceAndSuspendIfNeeded(\n        workInProgress,\n        workInProgress.type,\n        null === current ? null : current.memoizedProps,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n      return null;\n    case 6:\n      if (current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (\"string\" !== typeof newProps && null === workInProgress.stateNode)\n          throw Error(formatProdErrorMessage(166));\n        current = rootInstanceStackCursor.current;\n        if (popHydrationState(workInProgress)) {\n          current = workInProgress.stateNode;\n          renderLanes = workInProgress.memoizedProps;\n          newProps = null;\n          type = hydrationParentFiber;\n          if (null !== type)\n            switch (type.tag) {\n              case 27:\n              case 5:\n                newProps = type.memoizedProps;\n            }\n          current[internalInstanceKey] = workInProgress;\n          current =\n            current.nodeValue === renderLanes ||\n            (null !== newProps && !0 === newProps.suppressHydrationWarning) ||\n            checkForUnmatchedText(current.nodeValue, renderLanes)\n              ? !0\n              : !1;\n          current || throwOnHydrationMismatch(workInProgress, !0);\n        } else\n          (current =\n            getOwnerDocumentFromRootContainer(current).createTextNode(\n              newProps\n            )),\n            (current[internalInstanceKey] = workInProgress),\n            (workInProgress.stateNode = current);\n      }\n      bubbleProperties(workInProgress);\n      return null;\n    case 31:\n      renderLanes = workInProgress.memoizedState;\n      if (null === current || null !== current.memoizedState) {\n        newProps = popHydrationState(workInProgress);\n        if (null !== renderLanes) {\n          if (null === current) {\n            if (!newProps) throw Error(formatProdErrorMessage(318));\n            current = workInProgress.memoizedState;\n            current = null !== current ? current.dehydrated : null;\n            if (!current) throw Error(formatProdErrorMessage(557));\n            current[internalInstanceKey] = workInProgress;\n          } else\n            resetHydrationState(),\n              0 === (workInProgress.flags & 128) &&\n                (workInProgress.memoizedState = null),\n              (workInProgress.flags |= 4);\n          bubbleProperties(workInProgress);\n          current = !1;\n        } else\n          (renderLanes = upgradeHydrationErrorsToRecoverable()),\n            null !== current &&\n              null !== current.memoizedState &&\n              (current.memoizedState.hydrationErrors = renderLanes),\n            (current = !0);\n        if (!current) {\n          if (workInProgress.flags & 256)\n            return popSuspenseHandler(workInProgress), workInProgress;\n          popSuspenseHandler(workInProgress);\n          return null;\n        }\n        if (0 !== (workInProgress.flags & 128))\n          throw Error(formatProdErrorMessage(558));\n      }\n      bubbleProperties(workInProgress);\n      return null;\n    case 13:\n      newProps = workInProgress.memoizedState;\n      if (\n        null === current ||\n        (null !== current.memoizedState &&\n          null !== current.memoizedState.dehydrated)\n      ) {\n        type = popHydrationState(workInProgress);\n        if (null !== newProps && null !== newProps.dehydrated) {\n          if (null === current) {\n            if (!type) throw Error(formatProdErrorMessage(318));\n            type = workInProgress.memoizedState;\n            type = null !== type ? type.dehydrated : null;\n            if (!type) throw Error(formatProdErrorMessage(317));\n            type[internalInstanceKey] = workInProgress;\n          } else\n            resetHydrationState(),\n              0 === (workInProgress.flags & 128) &&\n                (workInProgress.memoizedState = null),\n              (workInProgress.flags |= 4);\n          bubbleProperties(workInProgress);\n          type = !1;\n        } else\n          (type = upgradeHydrationErrorsToRecoverable()),\n            null !== current &&\n              null !== current.memoizedState &&\n              (current.memoizedState.hydrationErrors = type),\n            (type = !0);\n        if (!type) {\n          if (workInProgress.flags & 256)\n            return popSuspenseHandler(workInProgress), workInProgress;\n          popSuspenseHandler(workInProgress);\n          return null;\n        }\n      }\n      popSuspenseHandler(workInProgress);\n      if (0 !== (workInProgress.flags & 128))\n        return (workInProgress.lanes = renderLanes), workInProgress;\n      renderLanes = null !== newProps;\n      current = null !== current && null !== current.memoizedState;\n      renderLanes &&\n        ((newProps = workInProgress.child),\n        (type = null),\n        null !== newProps.alternate &&\n          null !== newProps.alternate.memoizedState &&\n          null !== newProps.alternate.memoizedState.cachePool &&\n          (type = newProps.alternate.memoizedState.cachePool.pool),\n        (nextResource = null),\n        null !== newProps.memoizedState &&\n          null !== newProps.memoizedState.cachePool &&\n          (nextResource = newProps.memoizedState.cachePool.pool),\n        nextResource !== type && (newProps.flags |= 2048));\n      renderLanes !== current &&\n        renderLanes &&\n        (workInProgress.child.flags |= 8192);\n      scheduleRetryEffect(workInProgress, workInProgress.updateQueue);\n      bubbleProperties(workInProgress);\n      return null;\n    case 4:\n      return (\n        popHostContainer(),\n        null === current &&\n          listenToAllSupportedEvents(workInProgress.stateNode.containerInfo),\n        bubbleProperties(workInProgress),\n        null\n      );\n    case 10:\n      return (\n        popProvider(workInProgress.type), bubbleProperties(workInProgress), null\n      );\n    case 19:\n      pop(suspenseStackCursor);\n      newProps = workInProgress.memoizedState;\n      if (null === newProps) return bubbleProperties(workInProgress), null;\n      type = 0 !== (workInProgress.flags & 128);\n      nextResource = newProps.rendering;\n      if (null === nextResource)\n        if (type) cutOffTailIfNeeded(newProps, !1);\n        else {\n          if (\n            0 !== workInProgressRootExitStatus ||\n            (null !== current && 0 !== (current.flags & 128))\n          )\n            for (current = workInProgress.child; null !== current; ) {\n              nextResource = findFirstSuspended(current);\n              if (null !== nextResource) {\n                workInProgress.flags |= 128;\n                cutOffTailIfNeeded(newProps, !1);\n                current = nextResource.updateQueue;\n                workInProgress.updateQueue = current;\n                scheduleRetryEffect(workInProgress, current);\n                workInProgress.subtreeFlags = 0;\n                current = renderLanes;\n                for (renderLanes = workInProgress.child; null !== renderLanes; )\n                  resetWorkInProgress(renderLanes, current),\n                    (renderLanes = renderLanes.sibling);\n                push(\n                  suspenseStackCursor,\n                  (suspenseStackCursor.current & 1) | 2\n                );\n                isHydrating &&\n                  pushTreeFork(workInProgress, newProps.treeForkCount);\n                return workInProgress.child;\n              }\n              current = current.sibling;\n            }\n          null !== newProps.tail &&\n            now() > workInProgressRootRenderTargetTime &&\n            ((workInProgress.flags |= 128),\n            (type = !0),\n            cutOffTailIfNeeded(newProps, !1),\n            (workInProgress.lanes = 4194304));\n        }\n      else {\n        if (!type)\n          if (\n            ((current = findFirstSuspended(nextResource)), null !== current)\n          ) {\n            if (\n              ((workInProgress.flags |= 128),\n              (type = !0),\n              (current = current.updateQueue),\n              (workInProgress.updateQueue = current),\n              scheduleRetryEffect(workInProgress, current),\n              cutOffTailIfNeeded(newProps, !0),\n              null === newProps.tail &&\n                \"hidden\" === newProps.tailMode &&\n                !nextResource.alternate &&\n                !isHydrating)\n            )\n              return bubbleProperties(workInProgress), null;\n          } else\n            2 * now() - newProps.renderingStartTime >\n              workInProgressRootRenderTargetTime &&\n              536870912 !== renderLanes &&\n              ((workInProgress.flags |= 128),\n              (type = !0),\n              cutOffTailIfNeeded(newProps, !1),\n              (workInProgress.lanes = 4194304));\n        newProps.isBackwards\n          ? ((nextResource.sibling = workInProgress.child),\n            (workInProgress.child = nextResource))\n          : ((current = newProps.last),\n            null !== current\n              ? (current.sibling = nextResource)\n              : (workInProgress.child = nextResource),\n            (newProps.last = nextResource));\n      }\n      if (null !== newProps.tail)\n        return (\n          (current = newProps.tail),\n          (newProps.rendering = current),\n          (newProps.tail = current.sibling),\n          (newProps.renderingStartTime = now()),\n          (current.sibling = null),\n          (renderLanes = suspenseStackCursor.current),\n          push(\n            suspenseStackCursor,\n            type ? (renderLanes & 1) | 2 : renderLanes & 1\n          ),\n          isHydrating && pushTreeFork(workInProgress, newProps.treeForkCount),\n          current\n        );\n      bubbleProperties(workInProgress);\n      return null;\n    case 22:\n    case 23:\n      return (\n        popSuspenseHandler(workInProgress),\n        popHiddenContext(),\n        (newProps = null !== workInProgress.memoizedState),\n        null !== current\n          ? (null !== current.memoizedState) !== newProps &&\n            (workInProgress.flags |= 8192)\n          : newProps && (workInProgress.flags |= 8192),\n        newProps\n          ? 0 !== (renderLanes & 536870912) &&\n            0 === (workInProgress.flags & 128) &&\n            (bubbleProperties(workInProgress),\n            workInProgress.subtreeFlags & 6 && (workInProgress.flags |= 8192))\n          : bubbleProperties(workInProgress),\n        (renderLanes = workInProgress.updateQueue),\n        null !== renderLanes &&\n          scheduleRetryEffect(workInProgress, renderLanes.retryQueue),\n        (renderLanes = null),\n        null !== current &&\n          null !== current.memoizedState &&\n          null !== current.memoizedState.cachePool &&\n          (renderLanes = current.memoizedState.cachePool.pool),\n        (newProps = null),\n        null !== workInProgress.memoizedState &&\n          null !== workInProgress.memoizedState.cachePool &&\n          (newProps = workInProgress.memoizedState.cachePool.pool),\n        newProps !== renderLanes && (workInProgress.flags |= 2048),\n        null !== current && pop(resumedCache),\n        null\n      );\n    case 24:\n      return (\n        (renderLanes = null),\n        null !== current && (renderLanes = current.memoizedState.cache),\n        workInProgress.memoizedState.cache !== renderLanes &&\n          (workInProgress.flags |= 2048),\n        popProvider(CacheContext),\n        bubbleProperties(workInProgress),\n        null\n      );\n    case 25:\n      return null;\n    case 30:\n      return null;\n  }\n  throw Error(formatProdErrorMessage(156, workInProgress.tag));\n}\nfunction unwindWork(current, workInProgress) {\n  popTreeContext(workInProgress);\n  switch (workInProgress.tag) {\n    case 1:\n      return (\n        (current = workInProgress.flags),\n        current & 65536\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 3:\n      return (\n        popProvider(CacheContext),\n        popHostContainer(),\n        (current = workInProgress.flags),\n        0 !== (current & 65536) && 0 === (current & 128)\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 26:\n    case 27:\n    case 5:\n      return popHostContext(workInProgress), null;\n    case 31:\n      if (null !== workInProgress.memoizedState) {\n        popSuspenseHandler(workInProgress);\n        if (null === workInProgress.alternate)\n          throw Error(formatProdErrorMessage(340));\n        resetHydrationState();\n      }\n      current = workInProgress.flags;\n      return current & 65536\n        ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n        : null;\n    case 13:\n      popSuspenseHandler(workInProgress);\n      current = workInProgress.memoizedState;\n      if (null !== current && null !== current.dehydrated) {\n        if (null === workInProgress.alternate)\n          throw Error(formatProdErrorMessage(340));\n        resetHydrationState();\n      }\n      current = workInProgress.flags;\n      return current & 65536\n        ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n        : null;\n    case 19:\n      return pop(suspenseStackCursor), null;\n    case 4:\n      return popHostContainer(), null;\n    case 10:\n      return popProvider(workInProgress.type), null;\n    case 22:\n    case 23:\n      return (\n        popSuspenseHandler(workInProgress),\n        popHiddenContext(),\n        null !== current && pop(resumedCache),\n        (current = workInProgress.flags),\n        current & 65536\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 24:\n      return popProvider(CacheContext), null;\n    case 25:\n      return null;\n    default:\n      return null;\n  }\n}\nfunction unwindInterruptedWork(current, interruptedWork) {\n  popTreeContext(interruptedWork);\n  switch (interruptedWork.tag) {\n    case 3:\n      popProvider(CacheContext);\n      popHostContainer();\n      break;\n    case 26:\n    case 27:\n    case 5:\n      popHostContext(interruptedWork);\n      break;\n    case 4:\n      popHostContainer();\n      break;\n    case 31:\n      null !== interruptedWork.memoizedState &&\n        popSuspenseHandler(interruptedWork);\n      break;\n    case 13:\n      popSuspenseHandler(interruptedWork);\n      break;\n    case 19:\n      pop(suspenseStackCursor);\n      break;\n    case 10:\n      popProvider(interruptedWork.type);\n      break;\n    case 22:\n    case 23:\n      popSuspenseHandler(interruptedWork);\n      popHiddenContext();\n      null !== current && pop(resumedCache);\n      break;\n    case 24:\n      popProvider(CacheContext);\n  }\n}\nfunction commitHookEffectListMount(flags, finishedWork) {\n  try {\n    var updateQueue = finishedWork.updateQueue,\n      lastEffect = null !== updateQueue ? updateQueue.lastEffect : null;\n    if (null !== lastEffect) {\n      var firstEffect = lastEffect.next;\n      updateQueue = firstEffect;\n      do {\n        if ((updateQueue.tag & flags) === flags) {\n          lastEffect = void 0;\n          var create = updateQueue.create,\n            inst = updateQueue.inst;\n          lastEffect = create();\n          inst.destroy = lastEffect;\n        }\n        updateQueue = updateQueue.next;\n      } while (updateQueue !== firstEffect);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitHookEffectListUnmount(\n  flags,\n  finishedWork,\n  nearestMountedAncestor$jscomp$0\n) {\n  try {\n    var updateQueue = finishedWork.updateQueue,\n      lastEffect = null !== updateQueue ? updateQueue.lastEffect : null;\n    if (null !== lastEffect) {\n      var firstEffect = lastEffect.next;\n      updateQueue = firstEffect;\n      do {\n        if ((updateQueue.tag & flags) === flags) {\n          var inst = updateQueue.inst,\n            destroy = inst.destroy;\n          if (void 0 !== destroy) {\n            inst.destroy = void 0;\n            lastEffect = finishedWork;\n            var nearestMountedAncestor = nearestMountedAncestor$jscomp$0,\n              destroy_ = destroy;\n            try {\n              destroy_();\n            } catch (error) {\n              captureCommitPhaseError(\n                lastEffect,\n                nearestMountedAncestor,\n                error\n              );\n            }\n          }\n        }\n        updateQueue = updateQueue.next;\n      } while (updateQueue !== firstEffect);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitClassCallbacks(finishedWork) {\n  var updateQueue = finishedWork.updateQueue;\n  if (null !== updateQueue) {\n    var instance = finishedWork.stateNode;\n    try {\n      commitCallbacks(updateQueue, instance);\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n  }\n}\nfunction safelyCallComponentWillUnmount(\n  current,\n  nearestMountedAncestor,\n  instance\n) {\n  instance.props = resolveClassComponentProps(\n    current.type,\n    current.memoizedProps\n  );\n  instance.state = current.memoizedState;\n  try {\n    instance.componentWillUnmount();\n  } catch (error) {\n    captureCommitPhaseError(current, nearestMountedAncestor, error);\n  }\n}\nfunction safelyAttachRef(current, nearestMountedAncestor) {\n  try {\n    var ref = current.ref;\n    if (null !== ref) {\n      switch (current.tag) {\n        case 26:\n        case 27:\n        case 5:\n          var instanceToUse = current.stateNode;\n          break;\n        case 30:\n          instanceToUse = current.stateNode;\n          break;\n        default:\n          instanceToUse = current.stateNode;\n      }\n      \"function\" === typeof ref\n        ? (current.refCleanup = ref(instanceToUse))\n        : (ref.current = instanceToUse);\n    }\n  } catch (error) {\n    captureCommitPhaseError(current, nearestMountedAncestor, error);\n  }\n}\nfunction safelyDetachRef(current, nearestMountedAncestor) {\n  var ref = current.ref,\n    refCleanup = current.refCleanup;\n  if (null !== ref)\n    if (\"function\" === typeof refCleanup)\n      try {\n        refCleanup();\n      } catch (error) {\n        captureCommitPhaseError(current, nearestMountedAncestor, error);\n      } finally {\n        (current.refCleanup = null),\n          (current = current.alternate),\n          null != current && (current.refCleanup = null);\n      }\n    else if (\"function\" === typeof ref)\n      try {\n        ref(null);\n      } catch (error$140) {\n        captureCommitPhaseError(current, nearestMountedAncestor, error$140);\n      }\n    else ref.current = null;\n}\nfunction commitHostMount(finishedWork) {\n  var type = finishedWork.type,\n    props = finishedWork.memoizedProps,\n    instance = finishedWork.stateNode;\n  try {\n    a: switch (type) {\n      case \"button\":\n      case \"input\":\n      case \"select\":\n      case \"textarea\":\n        props.autoFocus && instance.focus();\n        break a;\n      case \"img\":\n        props.src\n          ? (instance.src = props.src)\n          : props.srcSet && (instance.srcset = props.srcSet);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitHostUpdate(finishedWork, newProps, oldProps) {\n  try {\n    var domElement = finishedWork.stateNode;\n    updateProperties(domElement, finishedWork.type, oldProps, newProps);\n    domElement[internalPropsKey] = newProps;\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction isHostParent(fiber) {\n  return (\n    5 === fiber.tag ||\n    3 === fiber.tag ||\n    26 === fiber.tag ||\n    (27 === fiber.tag && isSingletonScope(fiber.type)) ||\n    4 === fiber.tag\n  );\n}\nfunction getHostSibling(fiber) {\n  a: for (;;) {\n    for (; null === fiber.sibling; ) {\n      if (null === fiber.return || isHostParent(fiber.return)) return null;\n      fiber = fiber.return;\n    }\n    fiber.sibling.return = fiber.return;\n    for (\n      fiber = fiber.sibling;\n      5 !== fiber.tag && 6 !== fiber.tag && 18 !== fiber.tag;\n\n    ) {\n      if (27 === fiber.tag && isSingletonScope(fiber.type)) continue a;\n      if (fiber.flags & 2) continue a;\n      if (null === fiber.child || 4 === fiber.tag) continue a;\n      else (fiber.child.return = fiber), (fiber = fiber.child);\n    }\n    if (!(fiber.flags & 2)) return fiber.stateNode;\n  }\n}\nfunction insertOrAppendPlacementNodeIntoContainer(node, before, parent) {\n  var tag = node.tag;\n  if (5 === tag || 6 === tag)\n    (node = node.stateNode),\n      before\n        ? (9 === parent.nodeType\n            ? parent.body\n            : \"HTML\" === parent.nodeName\n              ? parent.ownerDocument.body\n              : parent\n          ).insertBefore(node, before)\n        : ((before =\n            9 === parent.nodeType\n              ? parent.body\n              : \"HTML\" === parent.nodeName\n                ? parent.ownerDocument.body\n                : parent),\n          before.appendChild(node),\n          (parent = parent._reactRootContainer),\n          (null !== parent && void 0 !== parent) ||\n            null !== before.onclick ||\n            (before.onclick = noop$1));\n  else if (\n    4 !== tag &&\n    (27 === tag &&\n      isSingletonScope(node.type) &&\n      ((parent = node.stateNode), (before = null)),\n    (node = node.child),\n    null !== node)\n  )\n    for (\n      insertOrAppendPlacementNodeIntoContainer(node, before, parent),\n        node = node.sibling;\n      null !== node;\n\n    )\n      insertOrAppendPlacementNodeIntoContainer(node, before, parent),\n        (node = node.sibling);\n}\nfunction insertOrAppendPlacementNode(node, before, parent) {\n  var tag = node.tag;\n  if (5 === tag || 6 === tag)\n    (node = node.stateNode),\n      before ? parent.insertBefore(node, before) : parent.appendChild(node);\n  else if (\n    4 !== tag &&\n    (27 === tag && isSingletonScope(node.type) && (parent = node.stateNode),\n    (node = node.child),\n    null !== node)\n  )\n    for (\n      insertOrAppendPlacementNode(node, before, parent), node = node.sibling;\n      null !== node;\n\n    )\n      insertOrAppendPlacementNode(node, before, parent), (node = node.sibling);\n}\nfunction commitHostSingletonAcquisition(finishedWork) {\n  var singleton = finishedWork.stateNode,\n    props = finishedWork.memoizedProps;\n  try {\n    for (\n      var type = finishedWork.type, attributes = singleton.attributes;\n      attributes.length;\n\n    )\n      singleton.removeAttributeNode(attributes[0]);\n    setInitialProperties(singleton, type, props);\n    singleton[internalInstanceKey] = finishedWork;\n    singleton[internalPropsKey] = props;\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nvar offscreenSubtreeIsHidden = !1,\n  offscreenSubtreeWasHidden = !1,\n  needsFormReset = !1,\n  PossiblyWeakSet = \"function\" === typeof WeakSet ? WeakSet : Set,\n  nextEffect = null;\nfunction commitBeforeMutationEffects(root, firstChild) {\n  root = root.containerInfo;\n  eventsEnabled = _enabled;\n  root = getActiveElementDeep(root);\n  if (hasSelectionCapabilities(root)) {\n    if (\"selectionStart\" in root)\n      var JSCompiler_temp = {\n        start: root.selectionStart,\n        end: root.selectionEnd\n      };\n    else\n      a: {\n        JSCompiler_temp =\n          ((JSCompiler_temp = root.ownerDocument) &&\n            JSCompiler_temp.defaultView) ||\n          window;\n        var selection =\n          JSCompiler_temp.getSelection && JSCompiler_temp.getSelection();\n        if (selection && 0 !== selection.rangeCount) {\n          JSCompiler_temp = selection.anchorNode;\n          var anchorOffset = selection.anchorOffset,\n            focusNode = selection.focusNode;\n          selection = selection.focusOffset;\n          try {\n            JSCompiler_temp.nodeType, focusNode.nodeType;\n          } catch (e$20) {\n            JSCompiler_temp = null;\n            break a;\n          }\n          var length = 0,\n            start = -1,\n            end = -1,\n            indexWithinAnchor = 0,\n            indexWithinFocus = 0,\n            node = root,\n            parentNode = null;\n          b: for (;;) {\n            for (var next; ; ) {\n              node !== JSCompiler_temp ||\n                (0 !== anchorOffset && 3 !== node.nodeType) ||\n                (start = length + anchorOffset);\n              node !== focusNode ||\n                (0 !== selection && 3 !== node.nodeType) ||\n                (end = length + selection);\n              3 === node.nodeType && (length += node.nodeValue.length);\n              if (null === (next = node.firstChild)) break;\n              parentNode = node;\n              node = next;\n            }\n            for (;;) {\n              if (node === root) break b;\n              parentNode === JSCompiler_temp &&\n                ++indexWithinAnchor === anchorOffset &&\n                (start = length);\n              parentNode === focusNode &&\n                ++indexWithinFocus === selection &&\n                (end = length);\n              if (null !== (next = node.nextSibling)) break;\n              node = parentNode;\n              parentNode = node.parentNode;\n            }\n            node = next;\n          }\n          JSCompiler_temp =\n            -1 === start || -1 === end ? null : { start: start, end: end };\n        } else JSCompiler_temp = null;\n      }\n    JSCompiler_temp = JSCompiler_temp || { start: 0, end: 0 };\n  } else JSCompiler_temp = null;\n  selectionInformation = { focusedElem: root, selectionRange: JSCompiler_temp };\n  _enabled = !1;\n  for (nextEffect = firstChild; null !== nextEffect; )\n    if (\n      ((firstChild = nextEffect),\n      (root = firstChild.child),\n      0 !== (firstChild.subtreeFlags & 1028) && null !== root)\n    )\n      (root.return = firstChild), (nextEffect = root);\n    else\n      for (; null !== nextEffect; ) {\n        firstChild = nextEffect;\n        focusNode = firstChild.alternate;\n        root = firstChild.flags;\n        switch (firstChild.tag) {\n          case 0:\n            if (\n              0 !== (root & 4) &&\n              ((root = firstChild.updateQueue),\n              (root = null !== root ? root.events : null),\n              null !== root)\n            )\n              for (\n                JSCompiler_temp = 0;\n                JSCompiler_temp < root.length;\n                JSCompiler_temp++\n              )\n                (anchorOffset = root[JSCompiler_temp]),\n                  (anchorOffset.ref.impl = anchorOffset.nextImpl);\n            break;\n          case 11:\n          case 15:\n            break;\n          case 1:\n            if (0 !== (root & 1024) && null !== focusNode) {\n              root = void 0;\n              JSCompiler_temp = firstChild;\n              anchorOffset = focusNode.memoizedProps;\n              focusNode = focusNode.memoizedState;\n              selection = JSCompiler_temp.stateNode;\n              try {\n                var resolvedPrevProps = resolveClassComponentProps(\n                  JSCompiler_temp.type,\n                  anchorOffset\n                );\n                root = selection.getSnapshotBeforeUpdate(\n                  resolvedPrevProps,\n                  focusNode\n                );\n                selection.__reactInternalSnapshotBeforeUpdate = root;\n              } catch (error) {\n                captureCommitPhaseError(\n                  JSCompiler_temp,\n                  JSCompiler_temp.return,\n                  error\n                );\n              }\n            }\n            break;\n          case 3:\n            if (0 !== (root & 1024))\n              if (\n                ((root = firstChild.stateNode.containerInfo),\n                (JSCompiler_temp = root.nodeType),\n                9 === JSCompiler_temp)\n              )\n                clearContainerSparingly(root);\n              else if (1 === JSCompiler_temp)\n                switch (root.nodeName) {\n                  case \"HEAD\":\n                  case \"HTML\":\n                  case \"BODY\":\n                    clearContainerSparingly(root);\n                    break;\n                  default:\n                    root.textContent = \"\";\n                }\n            break;\n          case 5:\n          case 26:\n          case 27:\n          case 6:\n          case 4:\n          case 17:\n            break;\n          default:\n            if (0 !== (root & 1024)) throw Error(formatProdErrorMessage(163));\n        }\n        root = firstChild.sibling;\n        if (null !== root) {\n          root.return = firstChild.return;\n          nextEffect = root;\n          break;\n        }\n        nextEffect = firstChild.return;\n      }\n}\nfunction commitLayoutEffectOnFiber(finishedRoot, current, finishedWork) {\n  var flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      flags & 4 && commitHookEffectListMount(5, finishedWork);\n      break;\n    case 1:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      if (flags & 4)\n        if (((finishedRoot = finishedWork.stateNode), null === current))\n          try {\n            finishedRoot.componentDidMount();\n          } catch (error) {\n            captureCommitPhaseError(finishedWork, finishedWork.return, error);\n          }\n        else {\n          var prevProps = resolveClassComponentProps(\n            finishedWork.type,\n            current.memoizedProps\n          );\n          current = current.memoizedState;\n          try {\n            finishedRoot.componentDidUpdate(\n              prevProps,\n              current,\n              finishedRoot.__reactInternalSnapshotBeforeUpdate\n            );\n          } catch (error$139) {\n            captureCommitPhaseError(\n              finishedWork,\n              finishedWork.return,\n              error$139\n            );\n          }\n        }\n      flags & 64 && commitClassCallbacks(finishedWork);\n      flags & 512 && safelyAttachRef(finishedWork, finishedWork.return);\n      break;\n    case 3:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      if (\n        flags & 64 &&\n        ((finishedRoot = finishedWork.updateQueue), null !== finishedRoot)\n      ) {\n        current = null;\n        if (null !== finishedWork.child)\n          switch (finishedWork.child.tag) {\n            case 27:\n            case 5:\n              current = finishedWork.child.stateNode;\n              break;\n            case 1:\n              current = finishedWork.child.stateNode;\n          }\n        try {\n          commitCallbacks(finishedRoot, current);\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      break;\n    case 27:\n      null === current &&\n        flags & 4 &&\n        commitHostSingletonAcquisition(finishedWork);\n    case 26:\n    case 5:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      null === current && flags & 4 && commitHostMount(finishedWork);\n      flags & 512 && safelyAttachRef(finishedWork, finishedWork.return);\n      break;\n    case 12:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      break;\n    case 31:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      flags & 4 && commitActivityHydrationCallbacks(finishedRoot, finishedWork);\n      break;\n    case 13:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      flags & 4 && commitSuspenseHydrationCallbacks(finishedRoot, finishedWork);\n      flags & 64 &&\n        ((finishedRoot = finishedWork.memoizedState),\n        null !== finishedRoot &&\n          ((finishedRoot = finishedRoot.dehydrated),\n          null !== finishedRoot &&\n            ((finishedWork = retryDehydratedSuspenseBoundary.bind(\n              null,\n              finishedWork\n            )),\n            registerSuspenseInstanceRetry(finishedRoot, finishedWork))));\n      break;\n    case 22:\n      flags = null !== finishedWork.memoizedState || offscreenSubtreeIsHidden;\n      if (!flags) {\n        current =\n          (null !== current && null !== current.memoizedState) ||\n          offscreenSubtreeWasHidden;\n        prevProps = offscreenSubtreeIsHidden;\n        var prevOffscreenSubtreeWasHidden = offscreenSubtreeWasHidden;\n        offscreenSubtreeIsHidden = flags;\n        (offscreenSubtreeWasHidden = current) && !prevOffscreenSubtreeWasHidden\n          ? recursivelyTraverseReappearLayoutEffects(\n              finishedRoot,\n              finishedWork,\n              0 !== (finishedWork.subtreeFlags & 8772)\n            )\n          : recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n        offscreenSubtreeIsHidden = prevProps;\n        offscreenSubtreeWasHidden = prevOffscreenSubtreeWasHidden;\n      }\n      break;\n    case 30:\n      break;\n    default:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n  }\n}\nfunction detachFiberAfterEffects(fiber) {\n  var alternate = fiber.alternate;\n  null !== alternate &&\n    ((fiber.alternate = null), detachFiberAfterEffects(alternate));\n  fiber.child = null;\n  fiber.deletions = null;\n  fiber.sibling = null;\n  5 === fiber.tag &&\n    ((alternate = fiber.stateNode),\n    null !== alternate && detachDeletedInstance(alternate));\n  fiber.stateNode = null;\n  fiber.return = null;\n  fiber.dependencies = null;\n  fiber.memoizedProps = null;\n  fiber.memoizedState = null;\n  fiber.pendingProps = null;\n  fiber.stateNode = null;\n  fiber.updateQueue = null;\n}\nvar hostParent = null,\n  hostParentIsContainer = !1;\nfunction recursivelyTraverseDeletionEffects(\n  finishedRoot,\n  nearestMountedAncestor,\n  parent\n) {\n  for (parent = parent.child; null !== parent; )\n    commitDeletionEffectsOnFiber(finishedRoot, nearestMountedAncestor, parent),\n      (parent = parent.sibling);\n}\nfunction commitDeletionEffectsOnFiber(\n  finishedRoot,\n  nearestMountedAncestor,\n  deletedFiber\n) {\n  if (injectedHook && \"function\" === typeof injectedHook.onCommitFiberUnmount)\n    try {\n      injectedHook.onCommitFiberUnmount(rendererID, deletedFiber);\n    } catch (err) {}\n  switch (deletedFiber.tag) {\n    case 26:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      deletedFiber.memoizedState\n        ? deletedFiber.memoizedState.count--\n        : deletedFiber.stateNode &&\n          ((deletedFiber = deletedFiber.stateNode),\n          deletedFiber.parentNode.removeChild(deletedFiber));\n      break;\n    case 27:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n      var prevHostParent = hostParent,\n        prevHostParentIsContainer = hostParentIsContainer;\n      isSingletonScope(deletedFiber.type) &&\n        ((hostParent = deletedFiber.stateNode), (hostParentIsContainer = !1));\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      releaseSingletonInstance(deletedFiber.stateNode);\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      break;\n    case 5:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n    case 6:\n      prevHostParent = hostParent;\n      prevHostParentIsContainer = hostParentIsContainer;\n      hostParent = null;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      if (null !== hostParent)\n        if (hostParentIsContainer)\n          try {\n            (9 === hostParent.nodeType\n              ? hostParent.body\n              : \"HTML\" === hostParent.nodeName\n                ? hostParent.ownerDocument.body\n                : hostParent\n            ).removeChild(deletedFiber.stateNode);\n          } catch (error) {\n            captureCommitPhaseError(\n              deletedFiber,\n              nearestMountedAncestor,\n              error\n            );\n          }\n        else\n          try {\n            hostParent.removeChild(deletedFiber.stateNode);\n          } catch (error) {\n            captureCommitPhaseError(\n              deletedFiber,\n              nearestMountedAncestor,\n              error\n            );\n          }\n      break;\n    case 18:\n      null !== hostParent &&\n        (hostParentIsContainer\n          ? ((finishedRoot = hostParent),\n            clearHydrationBoundary(\n              9 === finishedRoot.nodeType\n                ? finishedRoot.body\n                : \"HTML\" === finishedRoot.nodeName\n                  ? finishedRoot.ownerDocument.body\n                  : finishedRoot,\n              deletedFiber.stateNode\n            ),\n            retryIfBlockedOn(finishedRoot))\n          : clearHydrationBoundary(hostParent, deletedFiber.stateNode));\n      break;\n    case 4:\n      prevHostParent = hostParent;\n      prevHostParentIsContainer = hostParentIsContainer;\n      hostParent = deletedFiber.stateNode.containerInfo;\n      hostParentIsContainer = !0;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      break;\n    case 0:\n    case 11:\n    case 14:\n    case 15:\n      commitHookEffectListUnmount(2, deletedFiber, nearestMountedAncestor);\n      offscreenSubtreeWasHidden ||\n        commitHookEffectListUnmount(4, deletedFiber, nearestMountedAncestor);\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 1:\n      offscreenSubtreeWasHidden ||\n        (safelyDetachRef(deletedFiber, nearestMountedAncestor),\n        (prevHostParent = deletedFiber.stateNode),\n        \"function\" === typeof prevHostParent.componentWillUnmount &&\n          safelyCallComponentWillUnmount(\n            deletedFiber,\n            nearestMountedAncestor,\n            prevHostParent\n          ));\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 21:\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 22:\n      offscreenSubtreeWasHidden =\n        (prevHostParent = offscreenSubtreeWasHidden) ||\n        null !== deletedFiber.memoizedState;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      offscreenSubtreeWasHidden = prevHostParent;\n      break;\n    default:\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n  }\n}\nfunction commitActivityHydrationCallbacks(finishedRoot, finishedWork) {\n  if (\n    null === finishedWork.memoizedState &&\n    ((finishedRoot = finishedWork.alternate),\n    null !== finishedRoot &&\n      ((finishedRoot = finishedRoot.memoizedState), null !== finishedRoot))\n  ) {\n    finishedRoot = finishedRoot.dehydrated;\n    try {\n      retryIfBlockedOn(finishedRoot);\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n  }\n}\nfunction commitSuspenseHydrationCallbacks(finishedRoot, finishedWork) {\n  if (\n    null === finishedWork.memoizedState &&\n    ((finishedRoot = finishedWork.alternate),\n    null !== finishedRoot &&\n      ((finishedRoot = finishedRoot.memoizedState),\n      null !== finishedRoot &&\n        ((finishedRoot = finishedRoot.dehydrated), null !== finishedRoot)))\n  )\n    try {\n      retryIfBlockedOn(finishedRoot);\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n}\nfunction getRetryCache(finishedWork) {\n  switch (finishedWork.tag) {\n    case 31:\n    case 13:\n    case 19:\n      var retryCache = finishedWork.stateNode;\n      null === retryCache &&\n        (retryCache = finishedWork.stateNode = new PossiblyWeakSet());\n      return retryCache;\n    case 22:\n      return (\n        (finishedWork = finishedWork.stateNode),\n        (retryCache = finishedWork._retryCache),\n        null === retryCache &&\n          (retryCache = finishedWork._retryCache = new PossiblyWeakSet()),\n        retryCache\n      );\n    default:\n      throw Error(formatProdErrorMessage(435, finishedWork.tag));\n  }\n}\nfunction attachSuspenseRetryListeners(finishedWork, wakeables) {\n  var retryCache = getRetryCache(finishedWork);\n  wakeables.forEach(function (wakeable) {\n    if (!retryCache.has(wakeable)) {\n      retryCache.add(wakeable);\n      var retry = resolveRetryWakeable.bind(null, finishedWork, wakeable);\n      wakeable.then(retry, retry);\n    }\n  });\n}\nfunction recursivelyTraverseMutationEffects(root$jscomp$0, parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (null !== deletions)\n    for (var i = 0; i < deletions.length; i++) {\n      var childToDelete = deletions[i],\n        root = root$jscomp$0,\n        returnFiber = parentFiber,\n        parent = returnFiber;\n      a: for (; null !== parent; ) {\n        switch (parent.tag) {\n          case 27:\n            if (isSingletonScope(parent.type)) {\n              hostParent = parent.stateNode;\n              hostParentIsContainer = !1;\n              break a;\n            }\n            break;\n          case 5:\n            hostParent = parent.stateNode;\n            hostParentIsContainer = !1;\n            break a;\n          case 3:\n          case 4:\n            hostParent = parent.stateNode.containerInfo;\n            hostParentIsContainer = !0;\n            break a;\n        }\n        parent = parent.return;\n      }\n      if (null === hostParent) throw Error(formatProdErrorMessage(160));\n      commitDeletionEffectsOnFiber(root, returnFiber, childToDelete);\n      hostParent = null;\n      hostParentIsContainer = !1;\n      root = childToDelete.alternate;\n      null !== root && (root.return = null);\n      childToDelete.return = null;\n    }\n  if (parentFiber.subtreeFlags & 13886)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitMutationEffectsOnFiber(parentFiber, root$jscomp$0),\n        (parentFiber = parentFiber.sibling);\n}\nvar currentHoistableRoot = null;\nfunction commitMutationEffectsOnFiber(finishedWork, root) {\n  var current = finishedWork.alternate,\n    flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 14:\n    case 15:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 4 &&\n        (commitHookEffectListUnmount(3, finishedWork, finishedWork.return),\n        commitHookEffectListMount(3, finishedWork),\n        commitHookEffectListUnmount(5, finishedWork, finishedWork.return));\n      break;\n    case 1:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      flags & 64 &&\n        offscreenSubtreeIsHidden &&\n        ((finishedWork = finishedWork.updateQueue),\n        null !== finishedWork &&\n          ((flags = finishedWork.callbacks),\n          null !== flags &&\n            ((current = finishedWork.shared.hiddenCallbacks),\n            (finishedWork.shared.hiddenCallbacks =\n              null === current ? flags : current.concat(flags)))));\n      break;\n    case 26:\n      var hoistableRoot = currentHoistableRoot;\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      if (flags & 4) {\n        var currentResource = null !== current ? current.memoizedState : null;\n        flags = finishedWork.memoizedState;\n        if (null === current)\n          if (null === flags)\n            if (null === finishedWork.stateNode) {\n              a: {\n                flags = finishedWork.type;\n                current = finishedWork.memoizedProps;\n                hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n                b: switch (flags) {\n                  case \"title\":\n                    currentResource =\n                      hoistableRoot.getElementsByTagName(\"title\")[0];\n                    if (\n                      !currentResource ||\n                      currentResource[internalHoistableMarker] ||\n                      currentResource[internalInstanceKey] ||\n                      \"http://www.w3.org/2000/svg\" ===\n                        currentResource.namespaceURI ||\n                      currentResource.hasAttribute(\"itemprop\")\n                    )\n                      (currentResource = hoistableRoot.createElement(flags)),\n                        hoistableRoot.head.insertBefore(\n                          currentResource,\n                          hoistableRoot.querySelector(\"head > title\")\n                        );\n                    setInitialProperties(currentResource, flags, current);\n                    currentResource[internalInstanceKey] = finishedWork;\n                    markNodeAsHoistable(currentResource);\n                    flags = currentResource;\n                    break a;\n                  case \"link\":\n                    var maybeNodes = getHydratableHoistableCache(\n                      \"link\",\n                      \"href\",\n                      hoistableRoot\n                    ).get(flags + (current.href || \"\"));\n                    if (maybeNodes)\n                      for (var i = 0; i < maybeNodes.length; i++)\n                        if (\n                          ((currentResource = maybeNodes[i]),\n                          currentResource.getAttribute(\"href\") ===\n                            (null == current.href || \"\" === current.href\n                              ? null\n                              : current.href) &&\n                            currentResource.getAttribute(\"rel\") ===\n                              (null == current.rel ? null : current.rel) &&\n                            currentResource.getAttribute(\"title\") ===\n                              (null == current.title ? null : current.title) &&\n                            currentResource.getAttribute(\"crossorigin\") ===\n                              (null == current.crossOrigin\n                                ? null\n                                : current.crossOrigin))\n                        ) {\n                          maybeNodes.splice(i, 1);\n                          break b;\n                        }\n                    currentResource = hoistableRoot.createElement(flags);\n                    setInitialProperties(currentResource, flags, current);\n                    hoistableRoot.head.appendChild(currentResource);\n                    break;\n                  case \"meta\":\n                    if (\n                      (maybeNodes = getHydratableHoistableCache(\n                        \"meta\",\n                        \"content\",\n                        hoistableRoot\n                      ).get(flags + (current.content || \"\")))\n                    )\n                      for (i = 0; i < maybeNodes.length; i++)\n                        if (\n                          ((currentResource = maybeNodes[i]),\n                          currentResource.getAttribute(\"content\") ===\n                            (null == current.content\n                              ? null\n                              : \"\" + current.content) &&\n                            currentResource.getAttribute(\"name\") ===\n                              (null == current.name ? null : current.name) &&\n                            currentResource.getAttribute(\"property\") ===\n                              (null == current.property\n                                ? null\n                                : current.property) &&\n                            currentResource.getAttribute(\"http-equiv\") ===\n                              (null == current.httpEquiv\n                                ? null\n                                : current.httpEquiv) &&\n                            currentResource.getAttribute(\"charset\") ===\n                              (null == current.charSet\n                                ? null\n                                : current.charSet))\n                        ) {\n                          maybeNodes.splice(i, 1);\n                          break b;\n                        }\n                    currentResource = hoistableRoot.createElement(flags);\n                    setInitialProperties(currentResource, flags, current);\n                    hoistableRoot.head.appendChild(currentResource);\n                    break;\n                  default:\n                    throw Error(formatProdErrorMessage(468, flags));\n                }\n                currentResource[internalInstanceKey] = finishedWork;\n                markNodeAsHoistable(currentResource);\n                flags = currentResource;\n              }\n              finishedWork.stateNode = flags;\n            } else\n              mountHoistable(\n                hoistableRoot,\n                finishedWork.type,\n                finishedWork.stateNode\n              );\n          else\n            finishedWork.stateNode = acquireResource(\n              hoistableRoot,\n              flags,\n              finishedWork.memoizedProps\n            );\n        else\n          currentResource !== flags\n            ? (null === currentResource\n                ? null !== current.stateNode &&\n                  ((current = current.stateNode),\n                  current.parentNode.removeChild(current))\n                : currentResource.count--,\n              null === flags\n                ? mountHoistable(\n                    hoistableRoot,\n                    finishedWork.type,\n                    finishedWork.stateNode\n                  )\n                : acquireResource(\n                    hoistableRoot,\n                    flags,\n                    finishedWork.memoizedProps\n                  ))\n            : null === flags &&\n              null !== finishedWork.stateNode &&\n              commitHostUpdate(\n                finishedWork,\n                finishedWork.memoizedProps,\n                current.memoizedProps\n              );\n      }\n      break;\n    case 27:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      null !== current &&\n        flags & 4 &&\n        commitHostUpdate(\n          finishedWork,\n          finishedWork.memoizedProps,\n          current.memoizedProps\n        );\n      break;\n    case 5:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      if (finishedWork.flags & 32) {\n        hoistableRoot = finishedWork.stateNode;\n        try {\n          setTextContent(hoistableRoot, \"\");\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      flags & 4 &&\n        null != finishedWork.stateNode &&\n        ((hoistableRoot = finishedWork.memoizedProps),\n        commitHostUpdate(\n          finishedWork,\n          hoistableRoot,\n          null !== current ? current.memoizedProps : hoistableRoot\n        ));\n      flags & 1024 && (needsFormReset = !0);\n      break;\n    case 6:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      if (flags & 4) {\n        if (null === finishedWork.stateNode)\n          throw Error(formatProdErrorMessage(162));\n        flags = finishedWork.memoizedProps;\n        current = finishedWork.stateNode;\n        try {\n          current.nodeValue = flags;\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      break;\n    case 3:\n      tagCaches = null;\n      hoistableRoot = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(root.containerInfo);\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      currentHoistableRoot = hoistableRoot;\n      commitReconciliationEffects(finishedWork);\n      if (flags & 4 && null !== current && current.memoizedState.isDehydrated)\n        try {\n          retryIfBlockedOn(root.containerInfo);\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      needsFormReset &&\n        ((needsFormReset = !1), recursivelyResetForms(finishedWork));\n      break;\n    case 4:\n      flags = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(\n        finishedWork.stateNode.containerInfo\n      );\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      currentHoistableRoot = flags;\n      break;\n    case 12:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      break;\n    case 31:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((finishedWork.updateQueue = null),\n          attachSuspenseRetryListeners(finishedWork, flags)));\n      break;\n    case 13:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      finishedWork.child.flags & 8192 &&\n        (null !== finishedWork.memoizedState) !==\n          (null !== current && null !== current.memoizedState) &&\n        (globalMostRecentFallbackTime = now());\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((finishedWork.updateQueue = null),\n          attachSuspenseRetryListeners(finishedWork, flags)));\n      break;\n    case 22:\n      hoistableRoot = null !== finishedWork.memoizedState;\n      var wasHidden = null !== current && null !== current.memoizedState,\n        prevOffscreenSubtreeIsHidden = offscreenSubtreeIsHidden,\n        prevOffscreenSubtreeWasHidden = offscreenSubtreeWasHidden;\n      offscreenSubtreeIsHidden = prevOffscreenSubtreeIsHidden || hoistableRoot;\n      offscreenSubtreeWasHidden = prevOffscreenSubtreeWasHidden || wasHidden;\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      offscreenSubtreeWasHidden = prevOffscreenSubtreeWasHidden;\n      offscreenSubtreeIsHidden = prevOffscreenSubtreeIsHidden;\n      commitReconciliationEffects(finishedWork);\n      if (flags & 8192)\n        a: for (\n          root = finishedWork.stateNode,\n            root._visibility = hoistableRoot\n              ? root._visibility & -2\n              : root._visibility | 1,\n            hoistableRoot &&\n              (null === current ||\n                wasHidden ||\n                offscreenSubtreeIsHidden ||\n                offscreenSubtreeWasHidden ||\n                recursivelyTraverseDisappearLayoutEffects(finishedWork)),\n            current = null,\n            root = finishedWork;\n          ;\n\n        ) {\n          if (5 === root.tag || 26 === root.tag) {\n            if (null === current) {\n              wasHidden = current = root;\n              try {\n                if (((currentResource = wasHidden.stateNode), hoistableRoot))\n                  (maybeNodes = currentResource.style),\n                    \"function\" === typeof maybeNodes.setProperty\n                      ? maybeNodes.setProperty(\"display\", \"none\", \"important\")\n                      : (maybeNodes.display = \"none\");\n                else {\n                  i = wasHidden.stateNode;\n                  var styleProp = wasHidden.memoizedProps.style,\n                    display =\n                      void 0 !== styleProp &&\n                      null !== styleProp &&\n                      styleProp.hasOwnProperty(\"display\")\n                        ? styleProp.display\n                        : null;\n                  i.style.display =\n                    null == display || \"boolean\" === typeof display\n                      ? \"\"\n                      : (\"\" + display).trim();\n                }\n              } catch (error) {\n                captureCommitPhaseError(wasHidden, wasHidden.return, error);\n              }\n            }\n          } else if (6 === root.tag) {\n            if (null === current) {\n              wasHidden = root;\n              try {\n                wasHidden.stateNode.nodeValue = hoistableRoot\n                  ? \"\"\n                  : wasHidden.memoizedProps;\n              } catch (error) {\n                captureCommitPhaseError(wasHidden, wasHidden.return, error);\n              }\n            }\n          } else if (18 === root.tag) {\n            if (null === current) {\n              wasHidden = root;\n              try {\n                var instance = wasHidden.stateNode;\n                hoistableRoot\n                  ? hideOrUnhideDehydratedBoundary(instance, !0)\n                  : hideOrUnhideDehydratedBoundary(wasHidden.stateNode, !1);\n              } catch (error) {\n                captureCommitPhaseError(wasHidden, wasHidden.return, error);\n              }\n            }\n          } else if (\n            ((22 !== root.tag && 23 !== root.tag) ||\n              null === root.memoizedState ||\n              root === finishedWork) &&\n            null !== root.child\n          ) {\n            root.child.return = root;\n            root = root.child;\n            continue;\n          }\n          if (root === finishedWork) break a;\n          for (; null === root.sibling; ) {\n            if (null === root.return || root.return === finishedWork) break a;\n            current === root && (current = null);\n            root = root.return;\n          }\n          current === root && (current = null);\n          root.sibling.return = root.return;\n          root = root.sibling;\n        }\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((current = flags.retryQueue),\n          null !== current &&\n            ((flags.retryQueue = null),\n            attachSuspenseRetryListeners(finishedWork, current))));\n      break;\n    case 19:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((finishedWork.updateQueue = null),\n          attachSuspenseRetryListeners(finishedWork, flags)));\n      break;\n    case 30:\n      break;\n    case 21:\n      break;\n    default:\n      recursivelyTraverseMutationEffects(root, finishedWork),\n        commitReconciliationEffects(finishedWork);\n  }\n}\nfunction commitReconciliationEffects(finishedWork) {\n  var flags = finishedWork.flags;\n  if (flags & 2) {\n    try {\n      for (\n        var hostParentFiber, parentFiber = finishedWork.return;\n        null !== parentFiber;\n\n      ) {\n        if (isHostParent(parentFiber)) {\n          hostParentFiber = parentFiber;\n          break;\n        }\n        parentFiber = parentFiber.return;\n      }\n      if (null == hostParentFiber) throw Error(formatProdErrorMessage(160));\n      switch (hostParentFiber.tag) {\n        case 27:\n          var parent = hostParentFiber.stateNode,\n            before = getHostSibling(finishedWork);\n          insertOrAppendPlacementNode(finishedWork, before, parent);\n          break;\n        case 5:\n          var parent$141 = hostParentFiber.stateNode;\n          hostParentFiber.flags & 32 &&\n            (setTextContent(parent$141, \"\"), (hostParentFiber.flags &= -33));\n          var before$142 = getHostSibling(finishedWork);\n          insertOrAppendPlacementNode(finishedWork, before$142, parent$141);\n          break;\n        case 3:\n        case 4:\n          var parent$143 = hostParentFiber.stateNode.containerInfo,\n            before$144 = getHostSibling(finishedWork);\n          insertOrAppendPlacementNodeIntoContainer(\n            finishedWork,\n            before$144,\n            parent$143\n          );\n          break;\n        default:\n          throw Error(formatProdErrorMessage(161));\n      }\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n    finishedWork.flags &= -3;\n  }\n  flags & 4096 && (finishedWork.flags &= -4097);\n}\nfunction recursivelyResetForms(parentFiber) {\n  if (parentFiber.subtreeFlags & 1024)\n    for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n      var fiber = parentFiber;\n      recursivelyResetForms(fiber);\n      5 === fiber.tag && fiber.flags & 1024 && fiber.stateNode.reset();\n      parentFiber = parentFiber.sibling;\n    }\n}\nfunction recursivelyTraverseLayoutEffects(root, parentFiber) {\n  if (parentFiber.subtreeFlags & 8772)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitLayoutEffectOnFiber(root, parentFiber.alternate, parentFiber),\n        (parentFiber = parentFiber.sibling);\n}\nfunction recursivelyTraverseDisappearLayoutEffects(parentFiber) {\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var finishedWork = parentFiber;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 14:\n      case 15:\n        commitHookEffectListUnmount(4, finishedWork, finishedWork.return);\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 1:\n        safelyDetachRef(finishedWork, finishedWork.return);\n        var instance = finishedWork.stateNode;\n        \"function\" === typeof instance.componentWillUnmount &&\n          safelyCallComponentWillUnmount(\n            finishedWork,\n            finishedWork.return,\n            instance\n          );\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 27:\n        releaseSingletonInstance(finishedWork.stateNode);\n      case 26:\n      case 5:\n        safelyDetachRef(finishedWork, finishedWork.return);\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 22:\n        null === finishedWork.memoizedState &&\n          recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 30:\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      default:\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction recursivelyTraverseReappearLayoutEffects(\n  finishedRoot$jscomp$0,\n  parentFiber,\n  includeWorkInProgressEffects\n) {\n  includeWorkInProgressEffects =\n    includeWorkInProgressEffects && 0 !== (parentFiber.subtreeFlags & 8772);\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var current = parentFiber.alternate,\n      finishedRoot = finishedRoot$jscomp$0,\n      finishedWork = parentFiber,\n      flags = finishedWork.flags;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 15:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        commitHookEffectListMount(4, finishedWork);\n        break;\n      case 1:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        current = finishedWork;\n        finishedRoot = current.stateNode;\n        if (\"function\" === typeof finishedRoot.componentDidMount)\n          try {\n            finishedRoot.componentDidMount();\n          } catch (error) {\n            captureCommitPhaseError(current, current.return, error);\n          }\n        current = finishedWork;\n        finishedRoot = current.updateQueue;\n        if (null !== finishedRoot) {\n          var instance = current.stateNode;\n          try {\n            var hiddenCallbacks = finishedRoot.shared.hiddenCallbacks;\n            if (null !== hiddenCallbacks)\n              for (\n                finishedRoot.shared.hiddenCallbacks = null, finishedRoot = 0;\n                finishedRoot < hiddenCallbacks.length;\n                finishedRoot++\n              )\n                callCallback(hiddenCallbacks[finishedRoot], instance);\n          } catch (error) {\n            captureCommitPhaseError(current, current.return, error);\n          }\n        }\n        includeWorkInProgressEffects &&\n          flags & 64 &&\n          commitClassCallbacks(finishedWork);\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 27:\n        commitHostSingletonAcquisition(finishedWork);\n      case 26:\n      case 5:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          null === current &&\n          flags & 4 &&\n          commitHostMount(finishedWork);\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 12:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        break;\n      case 31:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          flags & 4 &&\n          commitActivityHydrationCallbacks(finishedRoot, finishedWork);\n        break;\n      case 13:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          flags & 4 &&\n          commitSuspenseHydrationCallbacks(finishedRoot, finishedWork);\n        break;\n      case 22:\n        null === finishedWork.memoizedState &&\n          recursivelyTraverseReappearLayoutEffects(\n            finishedRoot,\n            finishedWork,\n            includeWorkInProgressEffects\n          );\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 30:\n        break;\n      default:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction commitOffscreenPassiveMountEffects(current, finishedWork) {\n  var previousCache = null;\n  null !== current &&\n    null !== current.memoizedState &&\n    null !== current.memoizedState.cachePool &&\n    (previousCache = current.memoizedState.cachePool.pool);\n  current = null;\n  null !== finishedWork.memoizedState &&\n    null !== finishedWork.memoizedState.cachePool &&\n    (current = finishedWork.memoizedState.cachePool.pool);\n  current !== previousCache &&\n    (null != current && current.refCount++,\n    null != previousCache && releaseCache(previousCache));\n}\nfunction commitCachePassiveMountEffect(current, finishedWork) {\n  current = null;\n  null !== finishedWork.alternate &&\n    (current = finishedWork.alternate.memoizedState.cache);\n  finishedWork = finishedWork.memoizedState.cache;\n  finishedWork !== current &&\n    (finishedWork.refCount++, null != current && releaseCache(current));\n}\nfunction recursivelyTraversePassiveMountEffects(\n  root,\n  parentFiber,\n  committedLanes,\n  committedTransitions\n) {\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitPassiveMountOnFiber(\n        root,\n        parentFiber,\n        committedLanes,\n        committedTransitions\n      ),\n        (parentFiber = parentFiber.sibling);\n}\nfunction commitPassiveMountOnFiber(\n  finishedRoot,\n  finishedWork,\n  committedLanes,\n  committedTransitions\n) {\n  var flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 && commitHookEffectListMount(9, finishedWork);\n      break;\n    case 1:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      break;\n    case 3:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 &&\n        ((finishedRoot = null),\n        null !== finishedWork.alternate &&\n          (finishedRoot = finishedWork.alternate.memoizedState.cache),\n        (finishedWork = finishedWork.memoizedState.cache),\n        finishedWork !== finishedRoot &&\n          (finishedWork.refCount++,\n          null != finishedRoot && releaseCache(finishedRoot)));\n      break;\n    case 12:\n      if (flags & 2048) {\n        recursivelyTraversePassiveMountEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions\n        );\n        finishedRoot = finishedWork.stateNode;\n        try {\n          var _finishedWork$memoize2 = finishedWork.memoizedProps,\n            id = _finishedWork$memoize2.id,\n            onPostCommit = _finishedWork$memoize2.onPostCommit;\n          \"function\" === typeof onPostCommit &&\n            onPostCommit(\n              id,\n              null === finishedWork.alternate ? \"mount\" : \"update\",\n              finishedRoot.passiveEffectDuration,\n              -0\n            );\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      } else\n        recursivelyTraversePassiveMountEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions\n        );\n      break;\n    case 31:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      break;\n    case 13:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      break;\n    case 23:\n      break;\n    case 22:\n      _finishedWork$memoize2 = finishedWork.stateNode;\n      id = finishedWork.alternate;\n      null !== finishedWork.memoizedState\n        ? _finishedWork$memoize2._visibility & 2\n          ? recursivelyTraversePassiveMountEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions\n            )\n          : recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork)\n        : _finishedWork$memoize2._visibility & 2\n          ? recursivelyTraversePassiveMountEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions\n            )\n          : ((_finishedWork$memoize2._visibility |= 2),\n            recursivelyTraverseReconnectPassiveEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions,\n              0 !== (finishedWork.subtreeFlags & 10256) || !1\n            ));\n      flags & 2048 && commitOffscreenPassiveMountEffects(id, finishedWork);\n      break;\n    case 24:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 &&\n        commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n      break;\n    default:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n  }\n}\nfunction recursivelyTraverseReconnectPassiveEffects(\n  finishedRoot$jscomp$0,\n  parentFiber,\n  committedLanes$jscomp$0,\n  committedTransitions$jscomp$0,\n  includeWorkInProgressEffects\n) {\n  includeWorkInProgressEffects =\n    includeWorkInProgressEffects &&\n    (0 !== (parentFiber.subtreeFlags & 10256) || !1);\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var finishedRoot = finishedRoot$jscomp$0,\n      finishedWork = parentFiber,\n      committedLanes = committedLanes$jscomp$0,\n      committedTransitions = committedTransitions$jscomp$0,\n      flags = finishedWork.flags;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 15:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n        commitHookEffectListMount(8, finishedWork);\n        break;\n      case 23:\n        break;\n      case 22:\n        var instance = finishedWork.stateNode;\n        null !== finishedWork.memoizedState\n          ? instance._visibility & 2\n            ? recursivelyTraverseReconnectPassiveEffects(\n                finishedRoot,\n                finishedWork,\n                committedLanes,\n                committedTransitions,\n                includeWorkInProgressEffects\n              )\n            : recursivelyTraverseAtomicPassiveEffects(\n                finishedRoot,\n                finishedWork\n              )\n          : ((instance._visibility |= 2),\n            recursivelyTraverseReconnectPassiveEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions,\n              includeWorkInProgressEffects\n            ));\n        includeWorkInProgressEffects &&\n          flags & 2048 &&\n          commitOffscreenPassiveMountEffects(\n            finishedWork.alternate,\n            finishedWork\n          );\n        break;\n      case 24:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          flags & 2048 &&\n          commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n        break;\n      default:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction recursivelyTraverseAtomicPassiveEffects(\n  finishedRoot$jscomp$0,\n  parentFiber\n) {\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n      var finishedRoot = finishedRoot$jscomp$0,\n        finishedWork = parentFiber,\n        flags = finishedWork.flags;\n      switch (finishedWork.tag) {\n        case 22:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n          flags & 2048 &&\n            commitOffscreenPassiveMountEffects(\n              finishedWork.alternate,\n              finishedWork\n            );\n          break;\n        case 24:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n          flags & 2048 &&\n            commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n          break;\n        default:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n      }\n      parentFiber = parentFiber.sibling;\n    }\n}\nvar suspenseyCommitFlag = 8192;\nfunction recursivelyAccumulateSuspenseyCommit(\n  parentFiber,\n  committedLanes,\n  suspendedState\n) {\n  if (parentFiber.subtreeFlags & suspenseyCommitFlag)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      accumulateSuspenseyCommitOnFiber(\n        parentFiber,\n        committedLanes,\n        suspendedState\n      ),\n        (parentFiber = parentFiber.sibling);\n}\nfunction accumulateSuspenseyCommitOnFiber(\n  fiber,\n  committedLanes,\n  suspendedState\n) {\n  switch (fiber.tag) {\n    case 26:\n      recursivelyAccumulateSuspenseyCommit(\n        fiber,\n        committedLanes,\n        suspendedState\n      );\n      fiber.flags & suspenseyCommitFlag &&\n        null !== fiber.memoizedState &&\n        suspendResource(\n          suspendedState,\n          currentHoistableRoot,\n          fiber.memoizedState,\n          fiber.memoizedProps\n        );\n      break;\n    case 5:\n      recursivelyAccumulateSuspenseyCommit(\n        fiber,\n        committedLanes,\n        suspendedState\n      );\n      break;\n    case 3:\n    case 4:\n      var previousHoistableRoot = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(fiber.stateNode.containerInfo);\n      recursivelyAccumulateSuspenseyCommit(\n        fiber,\n        committedLanes,\n        suspendedState\n      );\n      currentHoistableRoot = previousHoistableRoot;\n      break;\n    case 22:\n      null === fiber.memoizedState &&\n        ((previousHoistableRoot = fiber.alternate),\n        null !== previousHoistableRoot &&\n        null !== previousHoistableRoot.memoizedState\n          ? ((previousHoistableRoot = suspenseyCommitFlag),\n            (suspenseyCommitFlag = 16777216),\n            recursivelyAccumulateSuspenseyCommit(\n              fiber,\n              committedLanes,\n              suspendedState\n            ),\n            (suspenseyCommitFlag = previousHoistableRoot))\n          : recursivelyAccumulateSuspenseyCommit(\n              fiber,\n              committedLanes,\n              suspendedState\n            ));\n      break;\n    default:\n      recursivelyAccumulateSuspenseyCommit(\n        fiber,\n        committedLanes,\n        suspendedState\n      );\n  }\n}\nfunction detachAlternateSiblings(parentFiber) {\n  var previousFiber = parentFiber.alternate;\n  if (\n    null !== previousFiber &&\n    ((parentFiber = previousFiber.child), null !== parentFiber)\n  ) {\n    previousFiber.child = null;\n    do\n      (previousFiber = parentFiber.sibling),\n        (parentFiber.sibling = null),\n        (parentFiber = previousFiber);\n    while (null !== parentFiber);\n  }\n}\nfunction recursivelyTraversePassiveUnmountEffects(parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (0 !== (parentFiber.flags & 16)) {\n    if (null !== deletions)\n      for (var i = 0; i < deletions.length; i++) {\n        var childToDelete = deletions[i];\n        nextEffect = childToDelete;\n        commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n          childToDelete,\n          parentFiber\n        );\n      }\n    detachAlternateSiblings(parentFiber);\n  }\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitPassiveUnmountOnFiber(parentFiber),\n        (parentFiber = parentFiber.sibling);\n}\nfunction commitPassiveUnmountOnFiber(finishedWork) {\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      finishedWork.flags & 2048 &&\n        commitHookEffectListUnmount(9, finishedWork, finishedWork.return);\n      break;\n    case 3:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    case 12:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    case 22:\n      var instance = finishedWork.stateNode;\n      null !== finishedWork.memoizedState &&\n      instance._visibility & 2 &&\n      (null === finishedWork.return || 13 !== finishedWork.return.tag)\n        ? ((instance._visibility &= -3),\n          recursivelyTraverseDisconnectPassiveEffects(finishedWork))\n        : recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    default:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n  }\n}\nfunction recursivelyTraverseDisconnectPassiveEffects(parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (0 !== (parentFiber.flags & 16)) {\n    if (null !== deletions)\n      for (var i = 0; i < deletions.length; i++) {\n        var childToDelete = deletions[i];\n        nextEffect = childToDelete;\n        commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n          childToDelete,\n          parentFiber\n        );\n      }\n    detachAlternateSiblings(parentFiber);\n  }\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    deletions = parentFiber;\n    switch (deletions.tag) {\n      case 0:\n      case 11:\n      case 15:\n        commitHookEffectListUnmount(8, deletions, deletions.return);\n        recursivelyTraverseDisconnectPassiveEffects(deletions);\n        break;\n      case 22:\n        i = deletions.stateNode;\n        i._visibility & 2 &&\n          ((i._visibility &= -3),\n          recursivelyTraverseDisconnectPassiveEffects(deletions));\n        break;\n      default:\n        recursivelyTraverseDisconnectPassiveEffects(deletions);\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n  deletedSubtreeRoot,\n  nearestMountedAncestor\n) {\n  for (; null !== nextEffect; ) {\n    var fiber = nextEffect;\n    switch (fiber.tag) {\n      case 0:\n      case 11:\n      case 15:\n        commitHookEffectListUnmount(8, fiber, nearestMountedAncestor);\n        break;\n      case 23:\n      case 22:\n        if (\n          null !== fiber.memoizedState &&\n          null !== fiber.memoizedState.cachePool\n        ) {\n          var cache = fiber.memoizedState.cachePool.pool;\n          null != cache && cache.refCount++;\n        }\n        break;\n      case 24:\n        releaseCache(fiber.memoizedState.cache);\n    }\n    cache = fiber.child;\n    if (null !== cache) (cache.return = fiber), (nextEffect = cache);\n    else\n      a: for (fiber = deletedSubtreeRoot; null !== nextEffect; ) {\n        cache = nextEffect;\n        var sibling = cache.sibling,\n          returnFiber = cache.return;\n        detachFiberAfterEffects(cache);\n        if (cache === fiber) {\n          nextEffect = null;\n          break a;\n        }\n        if (null !== sibling) {\n          sibling.return = returnFiber;\n          nextEffect = sibling;\n          break a;\n        }\n        nextEffect = returnFiber;\n      }\n  }\n}\nvar DefaultAsyncDispatcher = {\n    getCacheForType: function (resourceType) {\n      var cache = readContext(CacheContext),\n        cacheForType = cache.data.get(resourceType);\n      void 0 === cacheForType &&\n        ((cacheForType = resourceType()),\n        cache.data.set(resourceType, cacheForType));\n      return cacheForType;\n    },\n    cacheSignal: function () {\n      return readContext(CacheContext).controller.signal;\n    }\n  },\n  PossiblyWeakMap = \"function\" === typeof WeakMap ? WeakMap : Map,\n  executionContext = 0,\n  workInProgressRoot = null,\n  workInProgress = null,\n  workInProgressRootRenderLanes = 0,\n  workInProgressSuspendedReason = 0,\n  workInProgressThrownValue = null,\n  workInProgressRootDidSkipSuspendedSiblings = !1,\n  workInProgressRootIsPrerendering = !1,\n  workInProgressRootDidAttachPingListener = !1,\n  entangledRenderLanes = 0,\n  workInProgressRootExitStatus = 0,\n  workInProgressRootSkippedLanes = 0,\n  workInProgressRootInterleavedUpdatedLanes = 0,\n  workInProgressRootPingedLanes = 0,\n  workInProgressDeferredLane = 0,\n  workInProgressSuspendedRetryLanes = 0,\n  workInProgressRootConcurrentErrors = null,\n  workInProgressRootRecoverableErrors = null,\n  workInProgressRootDidIncludeRecursiveRenderUpdate = !1,\n  globalMostRecentFallbackTime = 0,\n  globalMostRecentTransitionTime = 0,\n  workInProgressRootRenderTargetTime = Infinity,\n  workInProgressTransitions = null,\n  legacyErrorBoundariesThatAlreadyFailed = null,\n  pendingEffectsStatus = 0,\n  pendingEffectsRoot = null,\n  pendingFinishedWork = null,\n  pendingEffectsLanes = 0,\n  pendingEffectsRemainingLanes = 0,\n  pendingPassiveTransitions = null,\n  pendingRecoverableErrors = null,\n  nestedUpdateCount = 0,\n  rootWithNestedUpdates = null;\nfunction requestUpdateLane() {\n  return 0 !== (executionContext & 2) && 0 !== workInProgressRootRenderLanes\n    ? workInProgressRootRenderLanes & -workInProgressRootRenderLanes\n    : null !== ReactSharedInternals.T\n      ? requestTransitionLane()\n      : resolveUpdatePriority();\n}\nfunction requestDeferredLane() {\n  if (0 === workInProgressDeferredLane)\n    if (0 === (workInProgressRootRenderLanes & 536870912) || isHydrating) {\n      var lane = nextTransitionDeferredLane;\n      nextTransitionDeferredLane <<= 1;\n      0 === (nextTransitionDeferredLane & 3932160) &&\n        (nextTransitionDeferredLane = 262144);\n      workInProgressDeferredLane = lane;\n    } else workInProgressDeferredLane = 536870912;\n  lane = suspenseHandlerStackCursor.current;\n  null !== lane && (lane.flags |= 32);\n  return workInProgressDeferredLane;\n}\nfunction scheduleUpdateOnFiber(root, fiber, lane) {\n  if (\n    (root === workInProgressRoot &&\n      (2 === workInProgressSuspendedReason ||\n        9 === workInProgressSuspendedReason)) ||\n    null !== root.cancelPendingCommit\n  )\n    prepareFreshStack(root, 0),\n      markRootSuspended(\n        root,\n        workInProgressRootRenderLanes,\n        workInProgressDeferredLane,\n        !1\n      );\n  markRootUpdated$1(root, lane);\n  if (0 === (executionContext & 2) || root !== workInProgressRoot)\n    root === workInProgressRoot &&\n      (0 === (executionContext & 2) &&\n        (workInProgressRootInterleavedUpdatedLanes |= lane),\n      4 === workInProgressRootExitStatus &&\n        markRootSuspended(\n          root,\n          workInProgressRootRenderLanes,\n          workInProgressDeferredLane,\n          !1\n        )),\n      ensureRootIsScheduled(root);\n}\nfunction performWorkOnRoot(root$jscomp$0, lanes, forceSync) {\n  if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(327));\n  var shouldTimeSlice =\n      (!forceSync &&\n        0 === (lanes & 127) &&\n        0 === (lanes & root$jscomp$0.expiredLanes)) ||\n      checkIfRootIsPrerendering(root$jscomp$0, lanes),\n    exitStatus = shouldTimeSlice\n      ? renderRootConcurrent(root$jscomp$0, lanes)\n      : renderRootSync(root$jscomp$0, lanes, !0),\n    renderWasConcurrent = shouldTimeSlice;\n  do {\n    if (0 === exitStatus) {\n      workInProgressRootIsPrerendering &&\n        !shouldTimeSlice &&\n        markRootSuspended(root$jscomp$0, lanes, 0, !1);\n      break;\n    } else {\n      forceSync = root$jscomp$0.current.alternate;\n      if (\n        renderWasConcurrent &&\n        !isRenderConsistentWithExternalStores(forceSync)\n      ) {\n        exitStatus = renderRootSync(root$jscomp$0, lanes, !1);\n        renderWasConcurrent = !1;\n        continue;\n      }\n      if (2 === exitStatus) {\n        renderWasConcurrent = lanes;\n        if (root$jscomp$0.errorRecoveryDisabledLanes & renderWasConcurrent)\n          var JSCompiler_inline_result = 0;\n        else\n          (JSCompiler_inline_result = root$jscomp$0.pendingLanes & -536870913),\n            (JSCompiler_inline_result =\n              0 !== JSCompiler_inline_result\n                ? JSCompiler_inline_result\n                : JSCompiler_inline_result & 536870912\n                  ? 536870912\n                  : 0);\n        if (0 !== JSCompiler_inline_result) {\n          lanes = JSCompiler_inline_result;\n          a: {\n            var root = root$jscomp$0;\n            exitStatus = workInProgressRootConcurrentErrors;\n            var wasRootDehydrated = root.current.memoizedState.isDehydrated;\n            wasRootDehydrated &&\n              (prepareFreshStack(root, JSCompiler_inline_result).flags |= 256);\n            JSCompiler_inline_result = renderRootSync(\n              root,\n              JSCompiler_inline_result,\n              !1\n            );\n            if (2 !== JSCompiler_inline_result) {\n              if (\n                workInProgressRootDidAttachPingListener &&\n                !wasRootDehydrated\n              ) {\n                root.errorRecoveryDisabledLanes |= renderWasConcurrent;\n                workInProgressRootInterleavedUpdatedLanes |=\n                  renderWasConcurrent;\n                exitStatus = 4;\n                break a;\n              }\n              renderWasConcurrent = workInProgressRootRecoverableErrors;\n              workInProgressRootRecoverableErrors = exitStatus;\n              null !== renderWasConcurrent &&\n                (null === workInProgressRootRecoverableErrors\n                  ? (workInProgressRootRecoverableErrors = renderWasConcurrent)\n                  : workInProgressRootRecoverableErrors.push.apply(\n                      workInProgressRootRecoverableErrors,\n                      renderWasConcurrent\n                    ));\n            }\n            exitStatus = JSCompiler_inline_result;\n          }\n          renderWasConcurrent = !1;\n          if (2 !== exitStatus) continue;\n        }\n      }\n      if (1 === exitStatus) {\n        prepareFreshStack(root$jscomp$0, 0);\n        markRootSuspended(root$jscomp$0, lanes, 0, !0);\n        break;\n      }\n      a: {\n        shouldTimeSlice = root$jscomp$0;\n        renderWasConcurrent = exitStatus;\n        switch (renderWasConcurrent) {\n          case 0:\n          case 1:\n            throw Error(formatProdErrorMessage(345));\n          case 4:\n            if ((lanes & 4194048) !== lanes) break;\n          case 6:\n            markRootSuspended(\n              shouldTimeSlice,\n              lanes,\n              workInProgressDeferredLane,\n              !workInProgressRootDidSkipSuspendedSiblings\n            );\n            break a;\n          case 2:\n            workInProgressRootRecoverableErrors = null;\n            break;\n          case 3:\n          case 5:\n            break;\n          default:\n            throw Error(formatProdErrorMessage(329));\n        }\n        if (\n          (lanes & 62914560) === lanes &&\n          ((exitStatus = globalMostRecentFallbackTime + 300 - now()),\n          10 < exitStatus)\n        ) {\n          markRootSuspended(\n            shouldTimeSlice,\n            lanes,\n            workInProgressDeferredLane,\n            !workInProgressRootDidSkipSuspendedSiblings\n          );\n          if (0 !== getNextLanes(shouldTimeSlice, 0, !0)) break a;\n          pendingEffectsLanes = lanes;\n          shouldTimeSlice.timeoutHandle = scheduleTimeout(\n            commitRootWhenReady.bind(\n              null,\n              shouldTimeSlice,\n              forceSync,\n              workInProgressRootRecoverableErrors,\n              workInProgressTransitions,\n              workInProgressRootDidIncludeRecursiveRenderUpdate,\n              lanes,\n              workInProgressDeferredLane,\n              workInProgressRootInterleavedUpdatedLanes,\n              workInProgressSuspendedRetryLanes,\n              workInProgressRootDidSkipSuspendedSiblings,\n              renderWasConcurrent,\n              \"Throttled\",\n              -0,\n              0\n            ),\n            exitStatus\n          );\n          break a;\n        }\n        commitRootWhenReady(\n          shouldTimeSlice,\n          forceSync,\n          workInProgressRootRecoverableErrors,\n          workInProgressTransitions,\n          workInProgressRootDidIncludeRecursiveRenderUpdate,\n          lanes,\n          workInProgressDeferredLane,\n          workInProgressRootInterleavedUpdatedLanes,\n          workInProgressSuspendedRetryLanes,\n          workInProgressRootDidSkipSuspendedSiblings,\n          renderWasConcurrent,\n          null,\n          -0,\n          0\n        );\n      }\n    }\n    break;\n  } while (1);\n  ensureRootIsScheduled(root$jscomp$0);\n}\nfunction commitRootWhenReady(\n  root,\n  finishedWork,\n  recoverableErrors,\n  transitions,\n  didIncludeRenderPhaseUpdate,\n  lanes,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes,\n  didSkipSuspendedSiblings,\n  exitStatus,\n  suspendedCommitReason,\n  completedRenderStartTime,\n  completedRenderEndTime\n) {\n  root.timeoutHandle = -1;\n  suspendedCommitReason = finishedWork.subtreeFlags;\n  if (\n    suspendedCommitReason & 8192 ||\n    16785408 === (suspendedCommitReason & 16785408)\n  ) {\n    suspendedCommitReason = {\n      stylesheets: null,\n      count: 0,\n      imgCount: 0,\n      imgBytes: 0,\n      suspenseyImages: [],\n      waitingForImages: !0,\n      waitingForViewTransition: !1,\n      unsuspend: noop$1\n    };\n    accumulateSuspenseyCommitOnFiber(\n      finishedWork,\n      lanes,\n      suspendedCommitReason\n    );\n    var timeoutOffset =\n      (lanes & 62914560) === lanes\n        ? globalMostRecentFallbackTime - now()\n        : (lanes & 4194048) === lanes\n          ? globalMostRecentTransitionTime - now()\n          : 0;\n    timeoutOffset = waitForCommitToBeReady(\n      suspendedCommitReason,\n      timeoutOffset\n    );\n    if (null !== timeoutOffset) {\n      pendingEffectsLanes = lanes;\n      root.cancelPendingCommit = timeoutOffset(\n        commitRoot.bind(\n          null,\n          root,\n          finishedWork,\n          lanes,\n          recoverableErrors,\n          transitions,\n          didIncludeRenderPhaseUpdate,\n          spawnedLane,\n          updatedLanes,\n          suspendedRetryLanes,\n          exitStatus,\n          suspendedCommitReason,\n          null,\n          completedRenderStartTime,\n          completedRenderEndTime\n        )\n      );\n      markRootSuspended(root, lanes, spawnedLane, !didSkipSuspendedSiblings);\n      return;\n    }\n  }\n  commitRoot(\n    root,\n    finishedWork,\n    lanes,\n    recoverableErrors,\n    transitions,\n    didIncludeRenderPhaseUpdate,\n    spawnedLane,\n    updatedLanes,\n    suspendedRetryLanes\n  );\n}\nfunction isRenderConsistentWithExternalStores(finishedWork) {\n  for (var node = finishedWork; ; ) {\n    var tag = node.tag;\n    if (\n      (0 === tag || 11 === tag || 15 === tag) &&\n      node.flags & 16384 &&\n      ((tag = node.updateQueue),\n      null !== tag && ((tag = tag.stores), null !== tag))\n    )\n      for (var i = 0; i < tag.length; i++) {\n        var check = tag[i],\n          getSnapshot = check.getSnapshot;\n        check = check.value;\n        try {\n          if (!objectIs(getSnapshot(), check)) return !1;\n        } catch (error) {\n          return !1;\n        }\n      }\n    tag = node.child;\n    if (node.subtreeFlags & 16384 && null !== tag)\n      (tag.return = node), (node = tag);\n    else {\n      if (node === finishedWork) break;\n      for (; null === node.sibling; ) {\n        if (null === node.return || node.return === finishedWork) return !0;\n        node = node.return;\n      }\n      node.sibling.return = node.return;\n      node = node.sibling;\n    }\n  }\n  return !0;\n}\nfunction markRootSuspended(\n  root,\n  suspendedLanes,\n  spawnedLane,\n  didAttemptEntireTree\n) {\n  suspendedLanes &= ~workInProgressRootPingedLanes;\n  suspendedLanes &= ~workInProgressRootInterleavedUpdatedLanes;\n  root.suspendedLanes |= suspendedLanes;\n  root.pingedLanes &= ~suspendedLanes;\n  didAttemptEntireTree && (root.warmLanes |= suspendedLanes);\n  didAttemptEntireTree = root.expirationTimes;\n  for (var lanes = suspendedLanes; 0 < lanes; ) {\n    var index$6 = 31 - clz32(lanes),\n      lane = 1 << index$6;\n    didAttemptEntireTree[index$6] = -1;\n    lanes &= ~lane;\n  }\n  0 !== spawnedLane &&\n    markSpawnedDeferredLane(root, spawnedLane, suspendedLanes);\n}\nfunction flushSyncWork$1() {\n  return 0 === (executionContext & 6)\n    ? (flushSyncWorkAcrossRoots_impl(0, !1), !1)\n    : !0;\n}\nfunction resetWorkInProgressStack() {\n  if (null !== workInProgress) {\n    if (0 === workInProgressSuspendedReason)\n      var interruptedWork = workInProgress.return;\n    else\n      (interruptedWork = workInProgress),\n        (lastContextDependency = currentlyRenderingFiber$1 = null),\n        resetHooksOnUnwind(interruptedWork),\n        (thenableState$1 = null),\n        (thenableIndexCounter$1 = 0),\n        (interruptedWork = workInProgress);\n    for (; null !== interruptedWork; )\n      unwindInterruptedWork(interruptedWork.alternate, interruptedWork),\n        (interruptedWork = interruptedWork.return);\n    workInProgress = null;\n  }\n}\nfunction prepareFreshStack(root, lanes) {\n  var timeoutHandle = root.timeoutHandle;\n  -1 !== timeoutHandle &&\n    ((root.timeoutHandle = -1), cancelTimeout(timeoutHandle));\n  timeoutHandle = root.cancelPendingCommit;\n  null !== timeoutHandle &&\n    ((root.cancelPendingCommit = null), timeoutHandle());\n  pendingEffectsLanes = 0;\n  resetWorkInProgressStack();\n  workInProgressRoot = root;\n  workInProgress = timeoutHandle = createWorkInProgress(root.current, null);\n  workInProgressRootRenderLanes = lanes;\n  workInProgressSuspendedReason = 0;\n  workInProgressThrownValue = null;\n  workInProgressRootDidSkipSuspendedSiblings = !1;\n  workInProgressRootIsPrerendering = checkIfRootIsPrerendering(root, lanes);\n  workInProgressRootDidAttachPingListener = !1;\n  workInProgressSuspendedRetryLanes =\n    workInProgressDeferredLane =\n    workInProgressRootPingedLanes =\n    workInProgressRootInterleavedUpdatedLanes =\n    workInProgressRootSkippedLanes =\n    workInProgressRootExitStatus =\n      0;\n  workInProgressRootRecoverableErrors = workInProgressRootConcurrentErrors =\n    null;\n  workInProgressRootDidIncludeRecursiveRenderUpdate = !1;\n  0 !== (lanes & 8) && (lanes |= lanes & 32);\n  var allEntangledLanes = root.entangledLanes;\n  if (0 !== allEntangledLanes)\n    for (\n      root = root.entanglements, allEntangledLanes &= lanes;\n      0 < allEntangledLanes;\n\n    ) {\n      var index$4 = 31 - clz32(allEntangledLanes),\n        lane = 1 << index$4;\n      lanes |= root[index$4];\n      allEntangledLanes &= ~lane;\n    }\n  entangledRenderLanes = lanes;\n  finishQueueingConcurrentUpdates();\n  return timeoutHandle;\n}\nfunction handleThrow(root, thrownValue) {\n  currentlyRenderingFiber = null;\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  thrownValue === SuspenseException || thrownValue === SuspenseActionException\n    ? ((thrownValue = getSuspendedThenable()),\n      (workInProgressSuspendedReason = 3))\n    : thrownValue === SuspenseyCommitException\n      ? ((thrownValue = getSuspendedThenable()),\n        (workInProgressSuspendedReason = 4))\n      : (workInProgressSuspendedReason =\n          thrownValue === SelectiveHydrationException\n            ? 8\n            : null !== thrownValue &&\n                \"object\" === typeof thrownValue &&\n                \"function\" === typeof thrownValue.then\n              ? 6\n              : 1);\n  workInProgressThrownValue = thrownValue;\n  null === workInProgress &&\n    ((workInProgressRootExitStatus = 1),\n    logUncaughtError(\n      root,\n      createCapturedValueAtFiber(thrownValue, root.current)\n    ));\n}\nfunction shouldRemainOnPreviousScreen() {\n  var handler = suspenseHandlerStackCursor.current;\n  return null === handler\n    ? !0\n    : (workInProgressRootRenderLanes & 4194048) ===\n        workInProgressRootRenderLanes\n      ? null === shellBoundary\n        ? !0\n        : !1\n      : (workInProgressRootRenderLanes & 62914560) ===\n            workInProgressRootRenderLanes ||\n          0 !== (workInProgressRootRenderLanes & 536870912)\n        ? handler === shellBoundary\n        : !1;\n}\nfunction pushDispatcher() {\n  var prevDispatcher = ReactSharedInternals.H;\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  return null === prevDispatcher ? ContextOnlyDispatcher : prevDispatcher;\n}\nfunction pushAsyncDispatcher() {\n  var prevAsyncDispatcher = ReactSharedInternals.A;\n  ReactSharedInternals.A = DefaultAsyncDispatcher;\n  return prevAsyncDispatcher;\n}\nfunction renderDidSuspendDelayIfPossible() {\n  workInProgressRootExitStatus = 4;\n  workInProgressRootDidSkipSuspendedSiblings ||\n    ((workInProgressRootRenderLanes & 4194048) !==\n      workInProgressRootRenderLanes &&\n      null !== suspenseHandlerStackCursor.current) ||\n    (workInProgressRootIsPrerendering = !0);\n  (0 === (workInProgressRootSkippedLanes & 134217727) &&\n    0 === (workInProgressRootInterleavedUpdatedLanes & 134217727)) ||\n    null === workInProgressRoot ||\n    markRootSuspended(\n      workInProgressRoot,\n      workInProgressRootRenderLanes,\n      workInProgressDeferredLane,\n      !1\n    );\n}\nfunction renderRootSync(root, lanes, shouldYieldForPrerendering) {\n  var prevExecutionContext = executionContext;\n  executionContext |= 2;\n  var prevDispatcher = pushDispatcher(),\n    prevAsyncDispatcher = pushAsyncDispatcher();\n  if (workInProgressRoot !== root || workInProgressRootRenderLanes !== lanes)\n    (workInProgressTransitions = null), prepareFreshStack(root, lanes);\n  lanes = !1;\n  var exitStatus = workInProgressRootExitStatus;\n  a: do\n    try {\n      if (0 !== workInProgressSuspendedReason && null !== workInProgress) {\n        var unitOfWork = workInProgress,\n          thrownValue = workInProgressThrownValue;\n        switch (workInProgressSuspendedReason) {\n          case 8:\n            resetWorkInProgressStack();\n            exitStatus = 6;\n            break a;\n          case 3:\n          case 2:\n          case 9:\n          case 6:\n            null === suspenseHandlerStackCursor.current && (lanes = !0);\n            var reason = workInProgressSuspendedReason;\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, unitOfWork, thrownValue, reason);\n            if (\n              shouldYieldForPrerendering &&\n              workInProgressRootIsPrerendering\n            ) {\n              exitStatus = 0;\n              break a;\n            }\n            break;\n          default:\n            (reason = workInProgressSuspendedReason),\n              (workInProgressSuspendedReason = 0),\n              (workInProgressThrownValue = null),\n              throwAndUnwindWorkLoop(root, unitOfWork, thrownValue, reason);\n        }\n      }\n      workLoopSync();\n      exitStatus = workInProgressRootExitStatus;\n      break;\n    } catch (thrownValue$165) {\n      handleThrow(root, thrownValue$165);\n    }\n  while (1);\n  lanes && root.shellSuspendCounter++;\n  lastContextDependency = currentlyRenderingFiber$1 = null;\n  executionContext = prevExecutionContext;\n  ReactSharedInternals.H = prevDispatcher;\n  ReactSharedInternals.A = prevAsyncDispatcher;\n  null === workInProgress &&\n    ((workInProgressRoot = null),\n    (workInProgressRootRenderLanes = 0),\n    finishQueueingConcurrentUpdates());\n  return exitStatus;\n}\nfunction workLoopSync() {\n  for (; null !== workInProgress; ) performUnitOfWork(workInProgress);\n}\nfunction renderRootConcurrent(root, lanes) {\n  var prevExecutionContext = executionContext;\n  executionContext |= 2;\n  var prevDispatcher = pushDispatcher(),\n    prevAsyncDispatcher = pushAsyncDispatcher();\n  workInProgressRoot !== root || workInProgressRootRenderLanes !== lanes\n    ? ((workInProgressTransitions = null),\n      (workInProgressRootRenderTargetTime = now() + 500),\n      prepareFreshStack(root, lanes))\n    : (workInProgressRootIsPrerendering = checkIfRootIsPrerendering(\n        root,\n        lanes\n      ));\n  a: do\n    try {\n      if (0 !== workInProgressSuspendedReason && null !== workInProgress) {\n        lanes = workInProgress;\n        var thrownValue = workInProgressThrownValue;\n        b: switch (workInProgressSuspendedReason) {\n          case 1:\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 1);\n            break;\n          case 2:\n          case 9:\n            if (isThenableResolved(thrownValue)) {\n              workInProgressSuspendedReason = 0;\n              workInProgressThrownValue = null;\n              replaySuspendedUnitOfWork(lanes);\n              break;\n            }\n            lanes = function () {\n              (2 !== workInProgressSuspendedReason &&\n                9 !== workInProgressSuspendedReason) ||\n                workInProgressRoot !== root ||\n                (workInProgressSuspendedReason = 7);\n              ensureRootIsScheduled(root);\n            };\n            thrownValue.then(lanes, lanes);\n            break a;\n          case 3:\n            workInProgressSuspendedReason = 7;\n            break a;\n          case 4:\n            workInProgressSuspendedReason = 5;\n            break a;\n          case 7:\n            isThenableResolved(thrownValue)\n              ? ((workInProgressSuspendedReason = 0),\n                (workInProgressThrownValue = null),\n                replaySuspendedUnitOfWork(lanes))\n              : ((workInProgressSuspendedReason = 0),\n                (workInProgressThrownValue = null),\n                throwAndUnwindWorkLoop(root, lanes, thrownValue, 7));\n            break;\n          case 5:\n            var resource = null;\n            switch (workInProgress.tag) {\n              case 26:\n                resource = workInProgress.memoizedState;\n              case 5:\n              case 27:\n                var hostFiber = workInProgress;\n                if (\n                  resource\n                    ? preloadResource(resource)\n                    : hostFiber.stateNode.complete\n                ) {\n                  workInProgressSuspendedReason = 0;\n                  workInProgressThrownValue = null;\n                  var sibling = hostFiber.sibling;\n                  if (null !== sibling) workInProgress = sibling;\n                  else {\n                    var returnFiber = hostFiber.return;\n                    null !== returnFiber\n                      ? ((workInProgress = returnFiber),\n                        completeUnitOfWork(returnFiber))\n                      : (workInProgress = null);\n                  }\n                  break b;\n                }\n            }\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 5);\n            break;\n          case 6:\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 6);\n            break;\n          case 8:\n            resetWorkInProgressStack();\n            workInProgressRootExitStatus = 6;\n            break a;\n          default:\n            throw Error(formatProdErrorMessage(462));\n        }\n      }\n      workLoopConcurrentByScheduler();\n      break;\n    } catch (thrownValue$167) {\n      handleThrow(root, thrownValue$167);\n    }\n  while (1);\n  lastContextDependency = currentlyRenderingFiber$1 = null;\n  ReactSharedInternals.H = prevDispatcher;\n  ReactSharedInternals.A = prevAsyncDispatcher;\n  executionContext = prevExecutionContext;\n  if (null !== workInProgress) return 0;\n  workInProgressRoot = null;\n  workInProgressRootRenderLanes = 0;\n  finishQueueingConcurrentUpdates();\n  return workInProgressRootExitStatus;\n}\nfunction workLoopConcurrentByScheduler() {\n  for (; null !== workInProgress && !shouldYield(); )\n    performUnitOfWork(workInProgress);\n}\nfunction performUnitOfWork(unitOfWork) {\n  var next = beginWork(unitOfWork.alternate, unitOfWork, entangledRenderLanes);\n  unitOfWork.memoizedProps = unitOfWork.pendingProps;\n  null === next ? completeUnitOfWork(unitOfWork) : (workInProgress = next);\n}\nfunction replaySuspendedUnitOfWork(unitOfWork) {\n  var next = unitOfWork;\n  var current = next.alternate;\n  switch (next.tag) {\n    case 15:\n    case 0:\n      next = replayFunctionComponent(\n        current,\n        next,\n        next.pendingProps,\n        next.type,\n        void 0,\n        workInProgressRootRenderLanes\n      );\n      break;\n    case 11:\n      next = replayFunctionComponent(\n        current,\n        next,\n        next.pendingProps,\n        next.type.render,\n        next.ref,\n        workInProgressRootRenderLanes\n      );\n      break;\n    case 5:\n      resetHooksOnUnwind(next);\n    default:\n      unwindInterruptedWork(current, next),\n        (next = workInProgress =\n          resetWorkInProgress(next, entangledRenderLanes)),\n        (next = beginWork(current, next, entangledRenderLanes));\n  }\n  unitOfWork.memoizedProps = unitOfWork.pendingProps;\n  null === next ? completeUnitOfWork(unitOfWork) : (workInProgress = next);\n}\nfunction throwAndUnwindWorkLoop(\n  root,\n  unitOfWork,\n  thrownValue,\n  suspendedReason\n) {\n  lastContextDependency = currentlyRenderingFiber$1 = null;\n  resetHooksOnUnwind(unitOfWork);\n  thenableState$1 = null;\n  thenableIndexCounter$1 = 0;\n  var returnFiber = unitOfWork.return;\n  try {\n    if (\n      throwException(\n        root,\n        returnFiber,\n        unitOfWork,\n        thrownValue,\n        workInProgressRootRenderLanes\n      )\n    ) {\n      workInProgressRootExitStatus = 1;\n      logUncaughtError(\n        root,\n        createCapturedValueAtFiber(thrownValue, root.current)\n      );\n      workInProgress = null;\n      return;\n    }\n  } catch (error) {\n    if (null !== returnFiber) throw ((workInProgress = returnFiber), error);\n    workInProgressRootExitStatus = 1;\n    logUncaughtError(\n      root,\n      createCapturedValueAtFiber(thrownValue, root.current)\n    );\n    workInProgress = null;\n    return;\n  }\n  if (unitOfWork.flags & 32768) {\n    if (isHydrating || 1 === suspendedReason) root = !0;\n    else if (\n      workInProgressRootIsPrerendering ||\n      0 !== (workInProgressRootRenderLanes & 536870912)\n    )\n      root = !1;\n    else if (\n      ((workInProgressRootDidSkipSuspendedSiblings = root = !0),\n      2 === suspendedReason ||\n        9 === suspendedReason ||\n        3 === suspendedReason ||\n        6 === suspendedReason)\n    )\n      (suspendedReason = suspenseHandlerStackCursor.current),\n        null !== suspendedReason &&\n          13 === suspendedReason.tag &&\n          (suspendedReason.flags |= 16384);\n    unwindUnitOfWork(unitOfWork, root);\n  } else completeUnitOfWork(unitOfWork);\n}\nfunction completeUnitOfWork(unitOfWork) {\n  var completedWork = unitOfWork;\n  do {\n    if (0 !== (completedWork.flags & 32768)) {\n      unwindUnitOfWork(\n        completedWork,\n        workInProgressRootDidSkipSuspendedSiblings\n      );\n      return;\n    }\n    unitOfWork = completedWork.return;\n    var next = completeWork(\n      completedWork.alternate,\n      completedWork,\n      entangledRenderLanes\n    );\n    if (null !== next) {\n      workInProgress = next;\n      return;\n    }\n    completedWork = completedWork.sibling;\n    if (null !== completedWork) {\n      workInProgress = completedWork;\n      return;\n    }\n    workInProgress = completedWork = unitOfWork;\n  } while (null !== completedWork);\n  0 === workInProgressRootExitStatus && (workInProgressRootExitStatus = 5);\n}\nfunction unwindUnitOfWork(unitOfWork, skipSiblings) {\n  do {\n    var next = unwindWork(unitOfWork.alternate, unitOfWork);\n    if (null !== next) {\n      next.flags &= 32767;\n      workInProgress = next;\n      return;\n    }\n    next = unitOfWork.return;\n    null !== next &&\n      ((next.flags |= 32768), (next.subtreeFlags = 0), (next.deletions = null));\n    if (\n      !skipSiblings &&\n      ((unitOfWork = unitOfWork.sibling), null !== unitOfWork)\n    ) {\n      workInProgress = unitOfWork;\n      return;\n    }\n    workInProgress = unitOfWork = next;\n  } while (null !== unitOfWork);\n  workInProgressRootExitStatus = 6;\n  workInProgress = null;\n}\nfunction commitRoot(\n  root,\n  finishedWork,\n  lanes,\n  recoverableErrors,\n  transitions,\n  didIncludeRenderPhaseUpdate,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes\n) {\n  root.cancelPendingCommit = null;\n  do flushPendingEffects();\n  while (0 !== pendingEffectsStatus);\n  if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(327));\n  if (null !== finishedWork) {\n    if (finishedWork === root.current) throw Error(formatProdErrorMessage(177));\n    didIncludeRenderPhaseUpdate = finishedWork.lanes | finishedWork.childLanes;\n    didIncludeRenderPhaseUpdate |= concurrentlyUpdatedLanes;\n    markRootFinished(\n      root,\n      lanes,\n      didIncludeRenderPhaseUpdate,\n      spawnedLane,\n      updatedLanes,\n      suspendedRetryLanes\n    );\n    root === workInProgressRoot &&\n      ((workInProgress = workInProgressRoot = null),\n      (workInProgressRootRenderLanes = 0));\n    pendingFinishedWork = finishedWork;\n    pendingEffectsRoot = root;\n    pendingEffectsLanes = lanes;\n    pendingEffectsRemainingLanes = didIncludeRenderPhaseUpdate;\n    pendingPassiveTransitions = transitions;\n    pendingRecoverableErrors = recoverableErrors;\n    0 !== (finishedWork.subtreeFlags & 10256) ||\n    0 !== (finishedWork.flags & 10256)\n      ? ((root.callbackNode = null),\n        (root.callbackPriority = 0),\n        scheduleCallback$1(NormalPriority$1, function () {\n          flushPassiveEffects();\n          return null;\n        }))\n      : ((root.callbackNode = null), (root.callbackPriority = 0));\n    recoverableErrors = 0 !== (finishedWork.flags & 13878);\n    if (0 !== (finishedWork.subtreeFlags & 13878) || recoverableErrors) {\n      recoverableErrors = ReactSharedInternals.T;\n      ReactSharedInternals.T = null;\n      transitions = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      spawnedLane = executionContext;\n      executionContext |= 4;\n      try {\n        commitBeforeMutationEffects(root, finishedWork, lanes);\n      } finally {\n        (executionContext = spawnedLane),\n          (ReactDOMSharedInternals.p = transitions),\n          (ReactSharedInternals.T = recoverableErrors);\n      }\n    }\n    pendingEffectsStatus = 1;\n    flushMutationEffects();\n    flushLayoutEffects();\n    flushSpawnedWork();\n  }\n}\nfunction flushMutationEffects() {\n  if (1 === pendingEffectsStatus) {\n    pendingEffectsStatus = 0;\n    var root = pendingEffectsRoot,\n      finishedWork = pendingFinishedWork,\n      rootMutationHasEffect = 0 !== (finishedWork.flags & 13878);\n    if (0 !== (finishedWork.subtreeFlags & 13878) || rootMutationHasEffect) {\n      rootMutationHasEffect = ReactSharedInternals.T;\n      ReactSharedInternals.T = null;\n      var previousPriority = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      var prevExecutionContext = executionContext;\n      executionContext |= 4;\n      try {\n        commitMutationEffectsOnFiber(finishedWork, root);\n        var priorSelectionInformation = selectionInformation,\n          curFocusedElem = getActiveElementDeep(root.containerInfo),\n          priorFocusedElem = priorSelectionInformation.focusedElem,\n          priorSelectionRange = priorSelectionInformation.selectionRange;\n        if (\n          curFocusedElem !== priorFocusedElem &&\n          priorFocusedElem &&\n          priorFocusedElem.ownerDocument &&\n          containsNode(\n            priorFocusedElem.ownerDocument.documentElement,\n            priorFocusedElem\n          )\n        ) {\n          if (\n            null !== priorSelectionRange &&\n            hasSelectionCapabilities(priorFocusedElem)\n          ) {\n            var start = priorSelectionRange.start,\n              end = priorSelectionRange.end;\n            void 0 === end && (end = start);\n            if (\"selectionStart\" in priorFocusedElem)\n              (priorFocusedElem.selectionStart = start),\n                (priorFocusedElem.selectionEnd = Math.min(\n                  end,\n                  priorFocusedElem.value.length\n                ));\n            else {\n              var doc = priorFocusedElem.ownerDocument || document,\n                win = (doc && doc.defaultView) || window;\n              if (win.getSelection) {\n                var selection = win.getSelection(),\n                  length = priorFocusedElem.textContent.length,\n                  start$jscomp$0 = Math.min(priorSelectionRange.start, length),\n                  end$jscomp$0 =\n                    void 0 === priorSelectionRange.end\n                      ? start$jscomp$0\n                      : Math.min(priorSelectionRange.end, length);\n                !selection.extend &&\n                  start$jscomp$0 > end$jscomp$0 &&\n                  ((curFocusedElem = end$jscomp$0),\n                  (end$jscomp$0 = start$jscomp$0),\n                  (start$jscomp$0 = curFocusedElem));\n                var startMarker = getNodeForCharacterOffset(\n                    priorFocusedElem,\n                    start$jscomp$0\n                  ),\n                  endMarker = getNodeForCharacterOffset(\n                    priorFocusedElem,\n                    end$jscomp$0\n                  );\n                if (\n                  startMarker &&\n                  endMarker &&\n                  (1 !== selection.rangeCount ||\n                    selection.anchorNode !== startMarker.node ||\n                    selection.anchorOffset !== startMarker.offset ||\n                    selection.focusNode !== endMarker.node ||\n                    selection.focusOffset !== endMarker.offset)\n                ) {\n                  var range = doc.createRange();\n                  range.setStart(startMarker.node, startMarker.offset);\n                  selection.removeAllRanges();\n                  start$jscomp$0 > end$jscomp$0\n                    ? (selection.addRange(range),\n                      selection.extend(endMarker.node, endMarker.offset))\n                    : (range.setEnd(endMarker.node, endMarker.offset),\n                      selection.addRange(range));\n                }\n              }\n            }\n          }\n          doc = [];\n          for (\n            selection = priorFocusedElem;\n            (selection = selection.parentNode);\n\n          )\n            1 === selection.nodeType &&\n              doc.push({\n                element: selection,\n                left: selection.scrollLeft,\n                top: selection.scrollTop\n              });\n          \"function\" === typeof priorFocusedElem.focus &&\n            priorFocusedElem.focus();\n          for (\n            priorFocusedElem = 0;\n            priorFocusedElem < doc.length;\n            priorFocusedElem++\n          ) {\n            var info = doc[priorFocusedElem];\n            info.element.scrollLeft = info.left;\n            info.element.scrollTop = info.top;\n          }\n        }\n        _enabled = !!eventsEnabled;\n        selectionInformation = eventsEnabled = null;\n      } finally {\n        (executionContext = prevExecutionContext),\n          (ReactDOMSharedInternals.p = previousPriority),\n          (ReactSharedInternals.T = rootMutationHasEffect);\n      }\n    }\n    root.current = finishedWork;\n    pendingEffectsStatus = 2;\n  }\n}\nfunction flushLayoutEffects() {\n  if (2 === pendingEffectsStatus) {\n    pendingEffectsStatus = 0;\n    var root = pendingEffectsRoot,\n      finishedWork = pendingFinishedWork,\n      rootHasLayoutEffect = 0 !== (finishedWork.flags & 8772);\n    if (0 !== (finishedWork.subtreeFlags & 8772) || rootHasLayoutEffect) {\n      rootHasLayoutEffect = ReactSharedInternals.T;\n      ReactSharedInternals.T = null;\n      var previousPriority = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      var prevExecutionContext = executionContext;\n      executionContext |= 4;\n      try {\n        commitLayoutEffectOnFiber(root, finishedWork.alternate, finishedWork);\n      } finally {\n        (executionContext = prevExecutionContext),\n          (ReactDOMSharedInternals.p = previousPriority),\n          (ReactSharedInternals.T = rootHasLayoutEffect);\n      }\n    }\n    pendingEffectsStatus = 3;\n  }\n}\nfunction flushSpawnedWork() {\n  if (4 === pendingEffectsStatus || 3 === pendingEffectsStatus) {\n    pendingEffectsStatus = 0;\n    requestPaint();\n    var root = pendingEffectsRoot,\n      finishedWork = pendingFinishedWork,\n      lanes = pendingEffectsLanes,\n      recoverableErrors = pendingRecoverableErrors;\n    0 !== (finishedWork.subtreeFlags & 10256) ||\n    0 !== (finishedWork.flags & 10256)\n      ? (pendingEffectsStatus = 5)\n      : ((pendingEffectsStatus = 0),\n        (pendingFinishedWork = pendingEffectsRoot = null),\n        releaseRootPooledCache(root, root.pendingLanes));\n    var remainingLanes = root.pendingLanes;\n    0 === remainingLanes && (legacyErrorBoundariesThatAlreadyFailed = null);\n    lanesToEventPriority(lanes);\n    finishedWork = finishedWork.stateNode;\n    if (injectedHook && \"function\" === typeof injectedHook.onCommitFiberRoot)\n      try {\n        injectedHook.onCommitFiberRoot(\n          rendererID,\n          finishedWork,\n          void 0,\n          128 === (finishedWork.current.flags & 128)\n        );\n      } catch (err) {}\n    if (null !== recoverableErrors) {\n      finishedWork = ReactSharedInternals.T;\n      remainingLanes = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      ReactSharedInternals.T = null;\n      try {\n        for (\n          var onRecoverableError = root.onRecoverableError, i = 0;\n          i < recoverableErrors.length;\n          i++\n        ) {\n          var recoverableError = recoverableErrors[i];\n          onRecoverableError(recoverableError.value, {\n            componentStack: recoverableError.stack\n          });\n        }\n      } finally {\n        (ReactSharedInternals.T = finishedWork),\n          (ReactDOMSharedInternals.p = remainingLanes);\n      }\n    }\n    0 !== (pendingEffectsLanes & 3) && flushPendingEffects();\n    ensureRootIsScheduled(root);\n    remainingLanes = root.pendingLanes;\n    0 !== (lanes & 261930) && 0 !== (remainingLanes & 42)\n      ? root === rootWithNestedUpdates\n        ? nestedUpdateCount++\n        : ((nestedUpdateCount = 0), (rootWithNestedUpdates = root))\n      : (nestedUpdateCount = 0);\n    flushSyncWorkAcrossRoots_impl(0, !1);\n  }\n}\nfunction releaseRootPooledCache(root, remainingLanes) {\n  0 === (root.pooledCacheLanes &= remainingLanes) &&\n    ((remainingLanes = root.pooledCache),\n    null != remainingLanes &&\n      ((root.pooledCache = null), releaseCache(remainingLanes)));\n}\nfunction flushPendingEffects() {\n  flushMutationEffects();\n  flushLayoutEffects();\n  flushSpawnedWork();\n  return flushPassiveEffects();\n}\nfunction flushPassiveEffects() {\n  if (5 !== pendingEffectsStatus) return !1;\n  var root = pendingEffectsRoot,\n    remainingLanes = pendingEffectsRemainingLanes;\n  pendingEffectsRemainingLanes = 0;\n  var renderPriority = lanesToEventPriority(pendingEffectsLanes),\n    prevTransition = ReactSharedInternals.T,\n    previousPriority = ReactDOMSharedInternals.p;\n  try {\n    ReactDOMSharedInternals.p = 32 > renderPriority ? 32 : renderPriority;\n    ReactSharedInternals.T = null;\n    renderPriority = pendingPassiveTransitions;\n    pendingPassiveTransitions = null;\n    var root$jscomp$0 = pendingEffectsRoot,\n      lanes = pendingEffectsLanes;\n    pendingEffectsStatus = 0;\n    pendingFinishedWork = pendingEffectsRoot = null;\n    pendingEffectsLanes = 0;\n    if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(331));\n    var prevExecutionContext = executionContext;\n    executionContext |= 4;\n    commitPassiveUnmountOnFiber(root$jscomp$0.current);\n    commitPassiveMountOnFiber(\n      root$jscomp$0,\n      root$jscomp$0.current,\n      lanes,\n      renderPriority\n    );\n    executionContext = prevExecutionContext;\n    flushSyncWorkAcrossRoots_impl(0, !1);\n    if (\n      injectedHook &&\n      \"function\" === typeof injectedHook.onPostCommitFiberRoot\n    )\n      try {\n        injectedHook.onPostCommitFiberRoot(rendererID, root$jscomp$0);\n      } catch (err) {}\n    return !0;\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition),\n      releaseRootPooledCache(root, remainingLanes);\n  }\n}\nfunction captureCommitPhaseErrorOnRoot(rootFiber, sourceFiber, error) {\n  sourceFiber = createCapturedValueAtFiber(error, sourceFiber);\n  sourceFiber = createRootErrorUpdate(rootFiber.stateNode, sourceFiber, 2);\n  rootFiber = enqueueUpdate(rootFiber, sourceFiber, 2);\n  null !== rootFiber &&\n    (markRootUpdated$1(rootFiber, 2), ensureRootIsScheduled(rootFiber));\n}\nfunction captureCommitPhaseError(sourceFiber, nearestMountedAncestor, error) {\n  if (3 === sourceFiber.tag)\n    captureCommitPhaseErrorOnRoot(sourceFiber, sourceFiber, error);\n  else\n    for (; null !== nearestMountedAncestor; ) {\n      if (3 === nearestMountedAncestor.tag) {\n        captureCommitPhaseErrorOnRoot(\n          nearestMountedAncestor,\n          sourceFiber,\n          error\n        );\n        break;\n      } else if (1 === nearestMountedAncestor.tag) {\n        var instance = nearestMountedAncestor.stateNode;\n        if (\n          \"function\" ===\n            typeof nearestMountedAncestor.type.getDerivedStateFromError ||\n          (\"function\" === typeof instance.componentDidCatch &&\n            (null === legacyErrorBoundariesThatAlreadyFailed ||\n              !legacyErrorBoundariesThatAlreadyFailed.has(instance)))\n        ) {\n          sourceFiber = createCapturedValueAtFiber(error, sourceFiber);\n          error = createClassErrorUpdate(2);\n          instance = enqueueUpdate(nearestMountedAncestor, error, 2);\n          null !== instance &&\n            (initializeClassErrorUpdate(\n              error,\n              instance,\n              nearestMountedAncestor,\n              sourceFiber\n            ),\n            markRootUpdated$1(instance, 2),\n            ensureRootIsScheduled(instance));\n          break;\n        }\n      }\n      nearestMountedAncestor = nearestMountedAncestor.return;\n    }\n}\nfunction attachPingListener(root, wakeable, lanes) {\n  var pingCache = root.pingCache;\n  if (null === pingCache) {\n    pingCache = root.pingCache = new PossiblyWeakMap();\n    var threadIDs = new Set();\n    pingCache.set(wakeable, threadIDs);\n  } else\n    (threadIDs = pingCache.get(wakeable)),\n      void 0 === threadIDs &&\n        ((threadIDs = new Set()), pingCache.set(wakeable, threadIDs));\n  threadIDs.has(lanes) ||\n    ((workInProgressRootDidAttachPingListener = !0),\n    threadIDs.add(lanes),\n    (root = pingSuspendedRoot.bind(null, root, wakeable, lanes)),\n    wakeable.then(root, root));\n}\nfunction pingSuspendedRoot(root, wakeable, pingedLanes) {\n  var pingCache = root.pingCache;\n  null !== pingCache && pingCache.delete(wakeable);\n  root.pingedLanes |= root.suspendedLanes & pingedLanes;\n  root.warmLanes &= ~pingedLanes;\n  workInProgressRoot === root &&\n    (workInProgressRootRenderLanes & pingedLanes) === pingedLanes &&\n    (4 === workInProgressRootExitStatus ||\n    (3 === workInProgressRootExitStatus &&\n      (workInProgressRootRenderLanes & 62914560) ===\n        workInProgressRootRenderLanes &&\n      300 > now() - globalMostRecentFallbackTime)\n      ? 0 === (executionContext & 2) && prepareFreshStack(root, 0)\n      : (workInProgressRootPingedLanes |= pingedLanes),\n    workInProgressSuspendedRetryLanes === workInProgressRootRenderLanes &&\n      (workInProgressSuspendedRetryLanes = 0));\n  ensureRootIsScheduled(root);\n}\nfunction retryTimedOutBoundary(boundaryFiber, retryLane) {\n  0 === retryLane && (retryLane = claimNextRetryLane());\n  boundaryFiber = enqueueConcurrentRenderForLane(boundaryFiber, retryLane);\n  null !== boundaryFiber &&\n    (markRootUpdated$1(boundaryFiber, retryLane),\n    ensureRootIsScheduled(boundaryFiber));\n}\nfunction retryDehydratedSuspenseBoundary(boundaryFiber) {\n  var suspenseState = boundaryFiber.memoizedState,\n    retryLane = 0;\n  null !== suspenseState && (retryLane = suspenseState.retryLane);\n  retryTimedOutBoundary(boundaryFiber, retryLane);\n}\nfunction resolveRetryWakeable(boundaryFiber, wakeable) {\n  var retryLane = 0;\n  switch (boundaryFiber.tag) {\n    case 31:\n    case 13:\n      var retryCache = boundaryFiber.stateNode;\n      var suspenseState = boundaryFiber.memoizedState;\n      null !== suspenseState && (retryLane = suspenseState.retryLane);\n      break;\n    case 19:\n      retryCache = boundaryFiber.stateNode;\n      break;\n    case 22:\n      retryCache = boundaryFiber.stateNode._retryCache;\n      break;\n    default:\n      throw Error(formatProdErrorMessage(314));\n  }\n  null !== retryCache && retryCache.delete(wakeable);\n  retryTimedOutBoundary(boundaryFiber, retryLane);\n}\nfunction scheduleCallback$1(priorityLevel, callback) {\n  return scheduleCallback$3(priorityLevel, callback);\n}\nvar firstScheduledRoot = null,\n  lastScheduledRoot = null,\n  didScheduleMicrotask = !1,\n  mightHavePendingSyncWork = !1,\n  isFlushingWork = !1,\n  currentEventTransitionLane = 0;\nfunction ensureRootIsScheduled(root) {\n  root !== lastScheduledRoot &&\n    null === root.next &&\n    (null === lastScheduledRoot\n      ? (firstScheduledRoot = lastScheduledRoot = root)\n      : (lastScheduledRoot = lastScheduledRoot.next = root));\n  mightHavePendingSyncWork = !0;\n  didScheduleMicrotask ||\n    ((didScheduleMicrotask = !0), scheduleImmediateRootScheduleTask());\n}\nfunction flushSyncWorkAcrossRoots_impl(syncTransitionLanes, onlyLegacy) {\n  if (!isFlushingWork && mightHavePendingSyncWork) {\n    isFlushingWork = !0;\n    do {\n      var didPerformSomeWork = !1;\n      for (var root$170 = firstScheduledRoot; null !== root$170; ) {\n        if (!onlyLegacy)\n          if (0 !== syncTransitionLanes) {\n            var pendingLanes = root$170.pendingLanes;\n            if (0 === pendingLanes) var JSCompiler_inline_result = 0;\n            else {\n              var suspendedLanes = root$170.suspendedLanes,\n                pingedLanes = root$170.pingedLanes;\n              JSCompiler_inline_result =\n                (1 << (31 - clz32(42 | syncTransitionLanes) + 1)) - 1;\n              JSCompiler_inline_result &=\n                pendingLanes & ~(suspendedLanes & ~pingedLanes);\n              JSCompiler_inline_result =\n                JSCompiler_inline_result & 201326741\n                  ? (JSCompiler_inline_result & 201326741) | 1\n                  : JSCompiler_inline_result\n                    ? JSCompiler_inline_result | 2\n                    : 0;\n            }\n            0 !== JSCompiler_inline_result &&\n              ((didPerformSomeWork = !0),\n              performSyncWorkOnRoot(root$170, JSCompiler_inline_result));\n          } else\n            (JSCompiler_inline_result = workInProgressRootRenderLanes),\n              (JSCompiler_inline_result = getNextLanes(\n                root$170,\n                root$170 === workInProgressRoot ? JSCompiler_inline_result : 0,\n                null !== root$170.cancelPendingCommit ||\n                  -1 !== root$170.timeoutHandle\n              )),\n              0 === (JSCompiler_inline_result & 3) ||\n                checkIfRootIsPrerendering(root$170, JSCompiler_inline_result) ||\n                ((didPerformSomeWork = !0),\n                performSyncWorkOnRoot(root$170, JSCompiler_inline_result));\n        root$170 = root$170.next;\n      }\n    } while (didPerformSomeWork);\n    isFlushingWork = !1;\n  }\n}\nfunction processRootScheduleInImmediateTask() {\n  processRootScheduleInMicrotask();\n}\nfunction processRootScheduleInMicrotask() {\n  mightHavePendingSyncWork = didScheduleMicrotask = !1;\n  var syncTransitionLanes = 0;\n  0 !== currentEventTransitionLane &&\n    shouldAttemptEagerTransition() &&\n    (syncTransitionLanes = currentEventTransitionLane);\n  for (\n    var currentTime = now(), prev = null, root = firstScheduledRoot;\n    null !== root;\n\n  ) {\n    var next = root.next,\n      nextLanes = scheduleTaskForRootDuringMicrotask(root, currentTime);\n    if (0 === nextLanes)\n      (root.next = null),\n        null === prev ? (firstScheduledRoot = next) : (prev.next = next),\n        null === next && (lastScheduledRoot = prev);\n    else if (\n      ((prev = root), 0 !== syncTransitionLanes || 0 !== (nextLanes & 3))\n    )\n      mightHavePendingSyncWork = !0;\n    root = next;\n  }\n  (0 !== pendingEffectsStatus && 5 !== pendingEffectsStatus) ||\n    flushSyncWorkAcrossRoots_impl(syncTransitionLanes, !1);\n  0 !== currentEventTransitionLane && (currentEventTransitionLane = 0);\n}\nfunction scheduleTaskForRootDuringMicrotask(root, currentTime) {\n  for (\n    var suspendedLanes = root.suspendedLanes,\n      pingedLanes = root.pingedLanes,\n      expirationTimes = root.expirationTimes,\n      lanes = root.pendingLanes & -62914561;\n    0 < lanes;\n\n  ) {\n    var index$5 = 31 - clz32(lanes),\n      lane = 1 << index$5,\n      expirationTime = expirationTimes[index$5];\n    if (-1 === expirationTime) {\n      if (0 === (lane & suspendedLanes) || 0 !== (lane & pingedLanes))\n        expirationTimes[index$5] = computeExpirationTime(lane, currentTime);\n    } else expirationTime <= currentTime && (root.expiredLanes |= lane);\n    lanes &= ~lane;\n  }\n  currentTime = workInProgressRoot;\n  suspendedLanes = workInProgressRootRenderLanes;\n  suspendedLanes = getNextLanes(\n    root,\n    root === currentTime ? suspendedLanes : 0,\n    null !== root.cancelPendingCommit || -1 !== root.timeoutHandle\n  );\n  pingedLanes = root.callbackNode;\n  if (\n    0 === suspendedLanes ||\n    (root === currentTime &&\n      (2 === workInProgressSuspendedReason ||\n        9 === workInProgressSuspendedReason)) ||\n    null !== root.cancelPendingCommit\n  )\n    return (\n      null !== pingedLanes &&\n        null !== pingedLanes &&\n        cancelCallback$1(pingedLanes),\n      (root.callbackNode = null),\n      (root.callbackPriority = 0)\n    );\n  if (\n    0 === (suspendedLanes & 3) ||\n    checkIfRootIsPrerendering(root, suspendedLanes)\n  ) {\n    currentTime = suspendedLanes & -suspendedLanes;\n    if (currentTime === root.callbackPriority) return currentTime;\n    null !== pingedLanes && cancelCallback$1(pingedLanes);\n    switch (lanesToEventPriority(suspendedLanes)) {\n      case 2:\n      case 8:\n        suspendedLanes = UserBlockingPriority;\n        break;\n      case 32:\n        suspendedLanes = NormalPriority$1;\n        break;\n      case 268435456:\n        suspendedLanes = IdlePriority;\n        break;\n      default:\n        suspendedLanes = NormalPriority$1;\n    }\n    pingedLanes = performWorkOnRootViaSchedulerTask.bind(null, root);\n    suspendedLanes = scheduleCallback$3(suspendedLanes, pingedLanes);\n    root.callbackPriority = currentTime;\n    root.callbackNode = suspendedLanes;\n    return currentTime;\n  }\n  null !== pingedLanes && null !== pingedLanes && cancelCallback$1(pingedLanes);\n  root.callbackPriority = 2;\n  root.callbackNode = null;\n  return 2;\n}\nfunction performWorkOnRootViaSchedulerTask(root, didTimeout) {\n  if (0 !== pendingEffectsStatus && 5 !== pendingEffectsStatus)\n    return (root.callbackNode = null), (root.callbackPriority = 0), null;\n  var originalCallbackNode = root.callbackNode;\n  if (flushPendingEffects() && root.callbackNode !== originalCallbackNode)\n    return null;\n  var workInProgressRootRenderLanes$jscomp$0 = workInProgressRootRenderLanes;\n  workInProgressRootRenderLanes$jscomp$0 = getNextLanes(\n    root,\n    root === workInProgressRoot ? workInProgressRootRenderLanes$jscomp$0 : 0,\n    null !== root.cancelPendingCommit || -1 !== root.timeoutHandle\n  );\n  if (0 === workInProgressRootRenderLanes$jscomp$0) return null;\n  performWorkOnRoot(root, workInProgressRootRenderLanes$jscomp$0, didTimeout);\n  scheduleTaskForRootDuringMicrotask(root, now());\n  return null != root.callbackNode && root.callbackNode === originalCallbackNode\n    ? performWorkOnRootViaSchedulerTask.bind(null, root)\n    : null;\n}\nfunction performSyncWorkOnRoot(root, lanes) {\n  if (flushPendingEffects()) return null;\n  performWorkOnRoot(root, lanes, !0);\n}\nfunction scheduleImmediateRootScheduleTask() {\n  scheduleMicrotask(function () {\n    0 !== (executionContext & 6)\n      ? scheduleCallback$3(\n          ImmediatePriority,\n          processRootScheduleInImmediateTask\n        )\n      : processRootScheduleInMicrotask();\n  });\n}\nfunction requestTransitionLane() {\n  if (0 === currentEventTransitionLane) {\n    var actionScopeLane = currentEntangledLane;\n    0 === actionScopeLane &&\n      ((actionScopeLane = nextTransitionUpdateLane),\n      (nextTransitionUpdateLane <<= 1),\n      0 === (nextTransitionUpdateLane & 261888) &&\n        (nextTransitionUpdateLane = 256));\n    currentEventTransitionLane = actionScopeLane;\n  }\n  return currentEventTransitionLane;\n}\nfunction coerceFormActionProp(actionProp) {\n  return null == actionProp ||\n    \"symbol\" === typeof actionProp ||\n    \"boolean\" === typeof actionProp\n    ? null\n    : \"function\" === typeof actionProp\n      ? actionProp\n      : sanitizeURL(\"\" + actionProp);\n}\nfunction createFormDataWithSubmitter(form, submitter) {\n  var temp = submitter.ownerDocument.createElement(\"input\");\n  temp.name = submitter.name;\n  temp.value = submitter.value;\n  form.id && temp.setAttribute(\"form\", form.id);\n  submitter.parentNode.insertBefore(temp, submitter);\n  form = new FormData(form);\n  temp.parentNode.removeChild(temp);\n  return form;\n}\nfunction extractEvents$1(\n  dispatchQueue,\n  domEventName,\n  maybeTargetInst,\n  nativeEvent,\n  nativeEventTarget\n) {\n  if (\n    \"submit\" === domEventName &&\n    maybeTargetInst &&\n    maybeTargetInst.stateNode === nativeEventTarget\n  ) {\n    var action = coerceFormActionProp(\n        (nativeEventTarget[internalPropsKey] || null).action\n      ),\n      submitter = nativeEvent.submitter;\n    submitter &&\n      ((domEventName = (domEventName = submitter[internalPropsKey] || null)\n        ? coerceFormActionProp(domEventName.formAction)\n        : submitter.getAttribute(\"formAction\")),\n      null !== domEventName && ((action = domEventName), (submitter = null)));\n    var event = new SyntheticEvent(\n      \"action\",\n      \"action\",\n      null,\n      nativeEvent,\n      nativeEventTarget\n    );\n    dispatchQueue.push({\n      event: event,\n      listeners: [\n        {\n          instance: null,\n          listener: function () {\n            if (nativeEvent.defaultPrevented) {\n              if (0 !== currentEventTransitionLane) {\n                var formData = submitter\n                  ? createFormDataWithSubmitter(nativeEventTarget, submitter)\n                  : new FormData(nativeEventTarget);\n                startHostTransition(\n                  maybeTargetInst,\n                  {\n                    pending: !0,\n                    data: formData,\n                    method: nativeEventTarget.method,\n                    action: action\n                  },\n                  null,\n                  formData\n                );\n              }\n            } else\n              \"function\" === typeof action &&\n                (event.preventDefault(),\n                (formData = submitter\n                  ? createFormDataWithSubmitter(nativeEventTarget, submitter)\n                  : new FormData(nativeEventTarget)),\n                startHostTransition(\n                  maybeTargetInst,\n                  {\n                    pending: !0,\n                    data: formData,\n                    method: nativeEventTarget.method,\n                    action: action\n                  },\n                  action,\n                  formData\n                ));\n          },\n          currentTarget: nativeEventTarget\n        }\n      ]\n    });\n  }\n}\nfor (\n  var i$jscomp$inline_1577 = 0;\n  i$jscomp$inline_1577 < simpleEventPluginEvents.length;\n  i$jscomp$inline_1577++\n) {\n  var eventName$jscomp$inline_1578 =\n      simpleEventPluginEvents[i$jscomp$inline_1577],\n    domEventName$jscomp$inline_1579 =\n      eventName$jscomp$inline_1578.toLowerCase(),\n    capitalizedEvent$jscomp$inline_1580 =\n      eventName$jscomp$inline_1578[0].toUpperCase() +\n      eventName$jscomp$inline_1578.slice(1);\n  registerSimpleEvent(\n    domEventName$jscomp$inline_1579,\n    \"on\" + capitalizedEvent$jscomp$inline_1580\n  );\n}\nregisterSimpleEvent(ANIMATION_END, \"onAnimationEnd\");\nregisterSimpleEvent(ANIMATION_ITERATION, \"onAnimationIteration\");\nregisterSimpleEvent(ANIMATION_START, \"onAnimationStart\");\nregisterSimpleEvent(\"dblclick\", \"onDoubleClick\");\nregisterSimpleEvent(\"focusin\", \"onFocus\");\nregisterSimpleEvent(\"focusout\", \"onBlur\");\nregisterSimpleEvent(TRANSITION_RUN, \"onTransitionRun\");\nregisterSimpleEvent(TRANSITION_START, \"onTransitionStart\");\nregisterSimpleEvent(TRANSITION_CANCEL, \"onTransitionCancel\");\nregisterSimpleEvent(TRANSITION_END, \"onTransitionEnd\");\nregisterDirectEvent(\"onMouseEnter\", [\"mouseout\", \"mouseover\"]);\nregisterDirectEvent(\"onMouseLeave\", [\"mouseout\", \"mouseover\"]);\nregisterDirectEvent(\"onPointerEnter\", [\"pointerout\", \"pointerover\"]);\nregisterDirectEvent(\"onPointerLeave\", [\"pointerout\", \"pointerover\"]);\nregisterTwoPhaseEvent(\n  \"onChange\",\n  \"change click focusin focusout input keydown keyup selectionchange\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onSelect\",\n  \"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\n    \" \"\n  )\n);\nregisterTwoPhaseEvent(\"onBeforeInput\", [\n  \"compositionend\",\n  \"keypress\",\n  \"textInput\",\n  \"paste\"\n]);\nregisterTwoPhaseEvent(\n  \"onCompositionEnd\",\n  \"compositionend focusout keydown keypress keyup mousedown\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onCompositionStart\",\n  \"compositionstart focusout keydown keypress keyup mousedown\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onCompositionUpdate\",\n  \"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \")\n);\nvar mediaEventTypes =\n    \"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\n      \" \"\n    ),\n  nonDelegatedEvents = new Set(\n    \"beforetoggle cancel close invalid load scroll scrollend toggle\"\n      .split(\" \")\n      .concat(mediaEventTypes)\n  );\nfunction processDispatchQueue(dispatchQueue, eventSystemFlags) {\n  eventSystemFlags = 0 !== (eventSystemFlags & 4);\n  for (var i = 0; i < dispatchQueue.length; i++) {\n    var _dispatchQueue$i = dispatchQueue[i],\n      event = _dispatchQueue$i.event;\n    _dispatchQueue$i = _dispatchQueue$i.listeners;\n    a: {\n      var previousInstance = void 0;\n      if (eventSystemFlags)\n        for (\n          var i$jscomp$0 = _dispatchQueue$i.length - 1;\n          0 <= i$jscomp$0;\n          i$jscomp$0--\n        ) {\n          var _dispatchListeners$i = _dispatchQueue$i[i$jscomp$0],\n            instance = _dispatchListeners$i.instance,\n            currentTarget = _dispatchListeners$i.currentTarget;\n          _dispatchListeners$i = _dispatchListeners$i.listener;\n          if (instance !== previousInstance && event.isPropagationStopped())\n            break a;\n          previousInstance = _dispatchListeners$i;\n          event.currentTarget = currentTarget;\n          try {\n            previousInstance(event);\n          } catch (error) {\n            reportGlobalError(error);\n          }\n          event.currentTarget = null;\n          previousInstance = instance;\n        }\n      else\n        for (\n          i$jscomp$0 = 0;\n          i$jscomp$0 < _dispatchQueue$i.length;\n          i$jscomp$0++\n        ) {\n          _dispatchListeners$i = _dispatchQueue$i[i$jscomp$0];\n          instance = _dispatchListeners$i.instance;\n          currentTarget = _dispatchListeners$i.currentTarget;\n          _dispatchListeners$i = _dispatchListeners$i.listener;\n          if (instance !== previousInstance && event.isPropagationStopped())\n            break a;\n          previousInstance = _dispatchListeners$i;\n          event.currentTarget = currentTarget;\n          try {\n            previousInstance(event);\n          } catch (error) {\n            reportGlobalError(error);\n          }\n          event.currentTarget = null;\n          previousInstance = instance;\n        }\n    }\n  }\n}\nfunction listenToNonDelegatedEvent(domEventName, targetElement) {\n  var JSCompiler_inline_result = targetElement[internalEventHandlersKey];\n  void 0 === JSCompiler_inline_result &&\n    (JSCompiler_inline_result = targetElement[internalEventHandlersKey] =\n      new Set());\n  var listenerSetKey = domEventName + \"__bubble\";\n  JSCompiler_inline_result.has(listenerSetKey) ||\n    (addTrappedEventListener(targetElement, domEventName, 2, !1),\n    JSCompiler_inline_result.add(listenerSetKey));\n}\nfunction listenToNativeEvent(domEventName, isCapturePhaseListener, target) {\n  var eventSystemFlags = 0;\n  isCapturePhaseListener && (eventSystemFlags |= 4);\n  addTrappedEventListener(\n    target,\n    domEventName,\n    eventSystemFlags,\n    isCapturePhaseListener\n  );\n}\nvar listeningMarker = \"_reactListening\" + Math.random().toString(36).slice(2);\nfunction listenToAllSupportedEvents(rootContainerElement) {\n  if (!rootContainerElement[listeningMarker]) {\n    rootContainerElement[listeningMarker] = !0;\n    allNativeEvents.forEach(function (domEventName) {\n      \"selectionchange\" !== domEventName &&\n        (nonDelegatedEvents.has(domEventName) ||\n          listenToNativeEvent(domEventName, !1, rootContainerElement),\n        listenToNativeEvent(domEventName, !0, rootContainerElement));\n    });\n    var ownerDocument =\n      9 === rootContainerElement.nodeType\n        ? rootContainerElement\n        : rootContainerElement.ownerDocument;\n    null === ownerDocument ||\n      ownerDocument[listeningMarker] ||\n      ((ownerDocument[listeningMarker] = !0),\n      listenToNativeEvent(\"selectionchange\", !1, ownerDocument));\n  }\n}\nfunction addTrappedEventListener(\n  targetContainer,\n  domEventName,\n  eventSystemFlags,\n  isCapturePhaseListener\n) {\n  switch (getEventPriority(domEventName)) {\n    case 2:\n      var listenerWrapper = dispatchDiscreteEvent;\n      break;\n    case 8:\n      listenerWrapper = dispatchContinuousEvent;\n      break;\n    default:\n      listenerWrapper = dispatchEvent;\n  }\n  eventSystemFlags = listenerWrapper.bind(\n    null,\n    domEventName,\n    eventSystemFlags,\n    targetContainer\n  );\n  listenerWrapper = void 0;\n  !passiveBrowserEventsSupported ||\n    (\"touchstart\" !== domEventName &&\n      \"touchmove\" !== domEventName &&\n      \"wheel\" !== domEventName) ||\n    (listenerWrapper = !0);\n  isCapturePhaseListener\n    ? void 0 !== listenerWrapper\n      ? targetContainer.addEventListener(domEventName, eventSystemFlags, {\n          capture: !0,\n          passive: listenerWrapper\n        })\n      : targetContainer.addEventListener(domEventName, eventSystemFlags, !0)\n    : void 0 !== listenerWrapper\n      ? targetContainer.addEventListener(domEventName, eventSystemFlags, {\n          passive: listenerWrapper\n        })\n      : targetContainer.addEventListener(domEventName, eventSystemFlags, !1);\n}\nfunction dispatchEventForPluginEventSystem(\n  domEventName,\n  eventSystemFlags,\n  nativeEvent,\n  targetInst$jscomp$0,\n  targetContainer\n) {\n  var ancestorInst = targetInst$jscomp$0;\n  if (\n    0 === (eventSystemFlags & 1) &&\n    0 === (eventSystemFlags & 2) &&\n    null !== targetInst$jscomp$0\n  )\n    a: for (;;) {\n      if (null === targetInst$jscomp$0) return;\n      var nodeTag = targetInst$jscomp$0.tag;\n      if (3 === nodeTag || 4 === nodeTag) {\n        var container = targetInst$jscomp$0.stateNode.containerInfo;\n        if (container === targetContainer) break;\n        if (4 === nodeTag)\n          for (nodeTag = targetInst$jscomp$0.return; null !== nodeTag; ) {\n            var grandTag = nodeTag.tag;\n            if (\n              (3 === grandTag || 4 === grandTag) &&\n              nodeTag.stateNode.containerInfo === targetContainer\n            )\n              return;\n            nodeTag = nodeTag.return;\n          }\n        for (; null !== container; ) {\n          nodeTag = getClosestInstanceFromNode(container);\n          if (null === nodeTag) return;\n          grandTag = nodeTag.tag;\n          if (\n            5 === grandTag ||\n            6 === grandTag ||\n            26 === grandTag ||\n            27 === grandTag\n          ) {\n            targetInst$jscomp$0 = ancestorInst = nodeTag;\n            continue a;\n          }\n          container = container.parentNode;\n        }\n      }\n      targetInst$jscomp$0 = targetInst$jscomp$0.return;\n    }\n  batchedUpdates$1(function () {\n    var targetInst = ancestorInst,\n      nativeEventTarget = getEventTarget(nativeEvent),\n      dispatchQueue = [];\n    a: {\n      var reactName = topLevelEventsToReactNames.get(domEventName);\n      if (void 0 !== reactName) {\n        var SyntheticEventCtor = SyntheticEvent,\n          reactEventType = domEventName;\n        switch (domEventName) {\n          case \"keypress\":\n            if (0 === getEventCharCode(nativeEvent)) break a;\n          case \"keydown\":\n          case \"keyup\":\n            SyntheticEventCtor = SyntheticKeyboardEvent;\n            break;\n          case \"focusin\":\n            reactEventType = \"focus\";\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"focusout\":\n            reactEventType = \"blur\";\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"beforeblur\":\n          case \"afterblur\":\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"click\":\n            if (2 === nativeEvent.button) break a;\n          case \"auxclick\":\n          case \"dblclick\":\n          case \"mousedown\":\n          case \"mousemove\":\n          case \"mouseup\":\n          case \"mouseout\":\n          case \"mouseover\":\n          case \"contextmenu\":\n            SyntheticEventCtor = SyntheticMouseEvent;\n            break;\n          case \"drag\":\n          case \"dragend\":\n          case \"dragenter\":\n          case \"dragexit\":\n          case \"dragleave\":\n          case \"dragover\":\n          case \"dragstart\":\n          case \"drop\":\n            SyntheticEventCtor = SyntheticDragEvent;\n            break;\n          case \"touchcancel\":\n          case \"touchend\":\n          case \"touchmove\":\n          case \"touchstart\":\n            SyntheticEventCtor = SyntheticTouchEvent;\n            break;\n          case ANIMATION_END:\n          case ANIMATION_ITERATION:\n          case ANIMATION_START:\n            SyntheticEventCtor = SyntheticAnimationEvent;\n            break;\n          case TRANSITION_END:\n            SyntheticEventCtor = SyntheticTransitionEvent;\n            break;\n          case \"scroll\":\n          case \"scrollend\":\n            SyntheticEventCtor = SyntheticUIEvent;\n            break;\n          case \"wheel\":\n            SyntheticEventCtor = SyntheticWheelEvent;\n            break;\n          case \"copy\":\n          case \"cut\":\n          case \"paste\":\n            SyntheticEventCtor = SyntheticClipboardEvent;\n            break;\n          case \"gotpointercapture\":\n          case \"lostpointercapture\":\n          case \"pointercancel\":\n          case \"pointerdown\":\n          case \"pointermove\":\n          case \"pointerout\":\n          case \"pointerover\":\n          case \"pointerup\":\n            SyntheticEventCtor = SyntheticPointerEvent;\n            break;\n          case \"toggle\":\n          case \"beforetoggle\":\n            SyntheticEventCtor = SyntheticToggleEvent;\n        }\n        var inCapturePhase = 0 !== (eventSystemFlags & 4),\n          accumulateTargetOnly =\n            !inCapturePhase &&\n            (\"scroll\" === domEventName || \"scrollend\" === domEventName),\n          reactEventName = inCapturePhase\n            ? null !== reactName\n              ? reactName + \"Capture\"\n              : null\n            : reactName;\n        inCapturePhase = [];\n        for (\n          var instance = targetInst, lastHostComponent;\n          null !== instance;\n\n        ) {\n          var _instance = instance;\n          lastHostComponent = _instance.stateNode;\n          _instance = _instance.tag;\n          (5 !== _instance && 26 !== _instance && 27 !== _instance) ||\n            null === lastHostComponent ||\n            null === reactEventName ||\n            ((_instance = getListener(instance, reactEventName)),\n            null != _instance &&\n              inCapturePhase.push(\n                createDispatchListener(instance, _instance, lastHostComponent)\n              ));\n          if (accumulateTargetOnly) break;\n          instance = instance.return;\n        }\n        0 < inCapturePhase.length &&\n          ((reactName = new SyntheticEventCtor(\n            reactName,\n            reactEventType,\n            null,\n            nativeEvent,\n            nativeEventTarget\n          )),\n          dispatchQueue.push({ event: reactName, listeners: inCapturePhase }));\n      }\n    }\n    if (0 === (eventSystemFlags & 7)) {\n      a: {\n        reactName =\n          \"mouseover\" === domEventName || \"pointerover\" === domEventName;\n        SyntheticEventCtor =\n          \"mouseout\" === domEventName || \"pointerout\" === domEventName;\n        if (\n          reactName &&\n          nativeEvent !== currentReplayingEvent &&\n          (reactEventType =\n            nativeEvent.relatedTarget || nativeEvent.fromElement) &&\n          (getClosestInstanceFromNode(reactEventType) ||\n            reactEventType[internalContainerInstanceKey])\n        )\n          break a;\n        if (SyntheticEventCtor || reactName) {\n          reactName =\n            nativeEventTarget.window === nativeEventTarget\n              ? nativeEventTarget\n              : (reactName = nativeEventTarget.ownerDocument)\n                ? reactName.defaultView || reactName.parentWindow\n                : window;\n          if (SyntheticEventCtor) {\n            if (\n              ((reactEventType =\n                nativeEvent.relatedTarget || nativeEvent.toElement),\n              (SyntheticEventCtor = targetInst),\n              (reactEventType = reactEventType\n                ? getClosestInstanceFromNode(reactEventType)\n                : null),\n              null !== reactEventType &&\n                ((accumulateTargetOnly =\n                  getNearestMountedFiber(reactEventType)),\n                (inCapturePhase = reactEventType.tag),\n                reactEventType !== accumulateTargetOnly ||\n                  (5 !== inCapturePhase &&\n                    27 !== inCapturePhase &&\n                    6 !== inCapturePhase)))\n            )\n              reactEventType = null;\n          } else (SyntheticEventCtor = null), (reactEventType = targetInst);\n          if (SyntheticEventCtor !== reactEventType) {\n            inCapturePhase = SyntheticMouseEvent;\n            _instance = \"onMouseLeave\";\n            reactEventName = \"onMouseEnter\";\n            instance = \"mouse\";\n            if (\"pointerout\" === domEventName || \"pointerover\" === domEventName)\n              (inCapturePhase = SyntheticPointerEvent),\n                (_instance = \"onPointerLeave\"),\n                (reactEventName = \"onPointerEnter\"),\n                (instance = \"pointer\");\n            accumulateTargetOnly =\n              null == SyntheticEventCtor\n                ? reactName\n                : getNodeFromInstance(SyntheticEventCtor);\n            lastHostComponent =\n              null == reactEventType\n                ? reactName\n                : getNodeFromInstance(reactEventType);\n            reactName = new inCapturePhase(\n              _instance,\n              instance + \"leave\",\n              SyntheticEventCtor,\n              nativeEvent,\n              nativeEventTarget\n            );\n            reactName.target = accumulateTargetOnly;\n            reactName.relatedTarget = lastHostComponent;\n            _instance = null;\n            getClosestInstanceFromNode(nativeEventTarget) === targetInst &&\n              ((inCapturePhase = new inCapturePhase(\n                reactEventName,\n                instance + \"enter\",\n                reactEventType,\n                nativeEvent,\n                nativeEventTarget\n              )),\n              (inCapturePhase.target = lastHostComponent),\n              (inCapturePhase.relatedTarget = accumulateTargetOnly),\n              (_instance = inCapturePhase));\n            accumulateTargetOnly = _instance;\n            if (SyntheticEventCtor && reactEventType)\n              b: {\n                inCapturePhase = getParent;\n                reactEventName = SyntheticEventCtor;\n                instance = reactEventType;\n                lastHostComponent = 0;\n                for (\n                  _instance = reactEventName;\n                  _instance;\n                  _instance = inCapturePhase(_instance)\n                )\n                  lastHostComponent++;\n                _instance = 0;\n                for (var tempB = instance; tempB; tempB = inCapturePhase(tempB))\n                  _instance++;\n                for (; 0 < lastHostComponent - _instance; )\n                  (reactEventName = inCapturePhase(reactEventName)),\n                    lastHostComponent--;\n                for (; 0 < _instance - lastHostComponent; )\n                  (instance = inCapturePhase(instance)), _instance--;\n                for (; lastHostComponent--; ) {\n                  if (\n                    reactEventName === instance ||\n                    (null !== instance && reactEventName === instance.alternate)\n                  ) {\n                    inCapturePhase = reactEventName;\n                    break b;\n                  }\n                  reactEventName = inCapturePhase(reactEventName);\n                  instance = inCapturePhase(instance);\n                }\n                inCapturePhase = null;\n              }\n            else inCapturePhase = null;\n            null !== SyntheticEventCtor &&\n              accumulateEnterLeaveListenersForEvent(\n                dispatchQueue,\n                reactName,\n                SyntheticEventCtor,\n                inCapturePhase,\n                !1\n              );\n            null !== reactEventType &&\n              null !== accumulateTargetOnly &&\n              accumulateEnterLeaveListenersForEvent(\n                dispatchQueue,\n                accumulateTargetOnly,\n                reactEventType,\n                inCapturePhase,\n                !0\n              );\n          }\n        }\n      }\n      a: {\n        reactName = targetInst ? getNodeFromInstance(targetInst) : window;\n        SyntheticEventCtor =\n          reactName.nodeName && reactName.nodeName.toLowerCase();\n        if (\n          \"select\" === SyntheticEventCtor ||\n          (\"input\" === SyntheticEventCtor && \"file\" === reactName.type)\n        )\n          var getTargetInstFunc = getTargetInstForChangeEvent;\n        else if (isTextInputElement(reactName))\n          if (isInputEventSupported)\n            getTargetInstFunc = getTargetInstForInputOrChangeEvent;\n          else {\n            getTargetInstFunc = getTargetInstForInputEventPolyfill;\n            var handleEventFunc = handleEventsForInputEventPolyfill;\n          }\n        else\n          (SyntheticEventCtor = reactName.nodeName),\n            !SyntheticEventCtor ||\n            \"input\" !== SyntheticEventCtor.toLowerCase() ||\n            (\"checkbox\" !== reactName.type && \"radio\" !== reactName.type)\n              ? targetInst &&\n                isCustomElement(targetInst.elementType) &&\n                (getTargetInstFunc = getTargetInstForChangeEvent)\n              : (getTargetInstFunc = getTargetInstForClickEvent);\n        if (\n          getTargetInstFunc &&\n          (getTargetInstFunc = getTargetInstFunc(domEventName, targetInst))\n        ) {\n          createAndAccumulateChangeEvent(\n            dispatchQueue,\n            getTargetInstFunc,\n            nativeEvent,\n            nativeEventTarget\n          );\n          break a;\n        }\n        handleEventFunc && handleEventFunc(domEventName, reactName, targetInst);\n        \"focusout\" === domEventName &&\n          targetInst &&\n          \"number\" === reactName.type &&\n          null != targetInst.memoizedProps.value &&\n          setDefaultValue(reactName, \"number\", reactName.value);\n      }\n      handleEventFunc = targetInst ? getNodeFromInstance(targetInst) : window;\n      switch (domEventName) {\n        case \"focusin\":\n          if (\n            isTextInputElement(handleEventFunc) ||\n            \"true\" === handleEventFunc.contentEditable\n          )\n            (activeElement = handleEventFunc),\n              (activeElementInst = targetInst),\n              (lastSelection = null);\n          break;\n        case \"focusout\":\n          lastSelection = activeElementInst = activeElement = null;\n          break;\n        case \"mousedown\":\n          mouseDown = !0;\n          break;\n        case \"contextmenu\":\n        case \"mouseup\":\n        case \"dragend\":\n          mouseDown = !1;\n          constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget);\n          break;\n        case \"selectionchange\":\n          if (skipSelectionChangeEvent) break;\n        case \"keydown\":\n        case \"keyup\":\n          constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget);\n      }\n      var fallbackData;\n      if (canUseCompositionEvent)\n        b: {\n          switch (domEventName) {\n            case \"compositionstart\":\n              var eventType = \"onCompositionStart\";\n              break b;\n            case \"compositionend\":\n              eventType = \"onCompositionEnd\";\n              break b;\n            case \"compositionupdate\":\n              eventType = \"onCompositionUpdate\";\n              break b;\n          }\n          eventType = void 0;\n        }\n      else\n        isComposing\n          ? isFallbackCompositionEnd(domEventName, nativeEvent) &&\n            (eventType = \"onCompositionEnd\")\n          : \"keydown\" === domEventName &&\n            229 === nativeEvent.keyCode &&\n            (eventType = \"onCompositionStart\");\n      eventType &&\n        (useFallbackCompositionData &&\n          \"ko\" !== nativeEvent.locale &&\n          (isComposing || \"onCompositionStart\" !== eventType\n            ? \"onCompositionEnd\" === eventType &&\n              isComposing &&\n              (fallbackData = getData())\n            : ((root = nativeEventTarget),\n              (startText = \"value\" in root ? root.value : root.textContent),\n              (isComposing = !0))),\n        (handleEventFunc = accumulateTwoPhaseListeners(targetInst, eventType)),\n        0 < handleEventFunc.length &&\n          ((eventType = new SyntheticCompositionEvent(\n            eventType,\n            domEventName,\n            null,\n            nativeEvent,\n            nativeEventTarget\n          )),\n          dispatchQueue.push({ event: eventType, listeners: handleEventFunc }),\n          fallbackData\n            ? (eventType.data = fallbackData)\n            : ((fallbackData = getDataFromCustomEvent(nativeEvent)),\n              null !== fallbackData && (eventType.data = fallbackData))));\n      if (\n        (fallbackData = canUseTextInputEvent\n          ? getNativeBeforeInputChars(domEventName, nativeEvent)\n          : getFallbackBeforeInputChars(domEventName, nativeEvent))\n      )\n        (eventType = accumulateTwoPhaseListeners(targetInst, \"onBeforeInput\")),\n          0 < eventType.length &&\n            ((handleEventFunc = new SyntheticCompositionEvent(\n              \"onBeforeInput\",\n              \"beforeinput\",\n              null,\n              nativeEvent,\n              nativeEventTarget\n            )),\n            dispatchQueue.push({\n              event: handleEventFunc,\n              listeners: eventType\n            }),\n            (handleEventFunc.data = fallbackData));\n      extractEvents$1(\n        dispatchQueue,\n        domEventName,\n        targetInst,\n        nativeEvent,\n        nativeEventTarget\n      );\n    }\n    processDispatchQueue(dispatchQueue, eventSystemFlags);\n  });\n}\nfunction createDispatchListener(instance, listener, currentTarget) {\n  return {\n    instance: instance,\n    listener: listener,\n    currentTarget: currentTarget\n  };\n}\nfunction accumulateTwoPhaseListeners(targetFiber, reactName) {\n  for (\n    var captureName = reactName + \"Capture\", listeners = [];\n    null !== targetFiber;\n\n  ) {\n    var _instance2 = targetFiber,\n      stateNode = _instance2.stateNode;\n    _instance2 = _instance2.tag;\n    (5 !== _instance2 && 26 !== _instance2 && 27 !== _instance2) ||\n      null === stateNode ||\n      ((_instance2 = getListener(targetFiber, captureName)),\n      null != _instance2 &&\n        listeners.unshift(\n          createDispatchListener(targetFiber, _instance2, stateNode)\n        ),\n      (_instance2 = getListener(targetFiber, reactName)),\n      null != _instance2 &&\n        listeners.push(\n          createDispatchListener(targetFiber, _instance2, stateNode)\n        ));\n    if (3 === targetFiber.tag) return listeners;\n    targetFiber = targetFiber.return;\n  }\n  return [];\n}\nfunction getParent(inst) {\n  if (null === inst) return null;\n  do inst = inst.return;\n  while (inst && 5 !== inst.tag && 27 !== inst.tag);\n  return inst ? inst : null;\n}\nfunction accumulateEnterLeaveListenersForEvent(\n  dispatchQueue,\n  event,\n  target,\n  common,\n  inCapturePhase\n) {\n  for (\n    var registrationName = event._reactName, listeners = [];\n    null !== target && target !== common;\n\n  ) {\n    var _instance3 = target,\n      alternate = _instance3.alternate,\n      stateNode = _instance3.stateNode;\n    _instance3 = _instance3.tag;\n    if (null !== alternate && alternate === common) break;\n    (5 !== _instance3 && 26 !== _instance3 && 27 !== _instance3) ||\n      null === stateNode ||\n      ((alternate = stateNode),\n      inCapturePhase\n        ? ((stateNode = getListener(target, registrationName)),\n          null != stateNode &&\n            listeners.unshift(\n              createDispatchListener(target, stateNode, alternate)\n            ))\n        : inCapturePhase ||\n          ((stateNode = getListener(target, registrationName)),\n          null != stateNode &&\n            listeners.push(\n              createDispatchListener(target, stateNode, alternate)\n            )));\n    target = target.return;\n  }\n  0 !== listeners.length &&\n    dispatchQueue.push({ event: event, listeners: listeners });\n}\nvar NORMALIZE_NEWLINES_REGEX = /\\r\\n?/g,\n  NORMALIZE_NULL_AND_REPLACEMENT_REGEX = /\\u0000|\\uFFFD/g;\nfunction normalizeMarkupForTextOrAttribute(markup) {\n  return (\"string\" === typeof markup ? markup : \"\" + markup)\n    .replace(NORMALIZE_NEWLINES_REGEX, \"\\n\")\n    .replace(NORMALIZE_NULL_AND_REPLACEMENT_REGEX, \"\");\n}\nfunction checkForUnmatchedText(serverText, clientText) {\n  clientText = normalizeMarkupForTextOrAttribute(clientText);\n  return normalizeMarkupForTextOrAttribute(serverText) === clientText ? !0 : !1;\n}\nfunction setProp(domElement, tag, key, value, props, prevValue) {\n  switch (key) {\n    case \"children\":\n      \"string\" === typeof value\n        ? \"body\" === tag ||\n          (\"textarea\" === tag && \"\" === value) ||\n          setTextContent(domElement, value)\n        : (\"number\" === typeof value || \"bigint\" === typeof value) &&\n          \"body\" !== tag &&\n          setTextContent(domElement, \"\" + value);\n      break;\n    case \"className\":\n      setValueForKnownAttribute(domElement, \"class\", value);\n      break;\n    case \"tabIndex\":\n      setValueForKnownAttribute(domElement, \"tabindex\", value);\n      break;\n    case \"dir\":\n    case \"role\":\n    case \"viewBox\":\n    case \"width\":\n    case \"height\":\n      setValueForKnownAttribute(domElement, key, value);\n      break;\n    case \"style\":\n      setValueForStyles(domElement, value, prevValue);\n      break;\n    case \"data\":\n      if (\"object\" !== tag) {\n        setValueForKnownAttribute(domElement, \"data\", value);\n        break;\n      }\n    case \"src\":\n    case \"href\":\n      if (\"\" === value && (\"a\" !== tag || \"href\" !== key)) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      if (\n        null == value ||\n        \"function\" === typeof value ||\n        \"symbol\" === typeof value ||\n        \"boolean\" === typeof value\n      ) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      value = sanitizeURL(\"\" + value);\n      domElement.setAttribute(key, value);\n      break;\n    case \"action\":\n    case \"formAction\":\n      if (\"function\" === typeof value) {\n        domElement.setAttribute(\n          key,\n          \"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')\"\n        );\n        break;\n      } else\n        \"function\" === typeof prevValue &&\n          (\"formAction\" === key\n            ? (\"input\" !== tag &&\n                setProp(domElement, tag, \"name\", props.name, props, null),\n              setProp(\n                domElement,\n                tag,\n                \"formEncType\",\n                props.formEncType,\n                props,\n                null\n              ),\n              setProp(\n                domElement,\n                tag,\n                \"formMethod\",\n                props.formMethod,\n                props,\n                null\n              ),\n              setProp(\n                domElement,\n                tag,\n                \"formTarget\",\n                props.formTarget,\n                props,\n                null\n              ))\n            : (setProp(domElement, tag, \"encType\", props.encType, props, null),\n              setProp(domElement, tag, \"method\", props.method, props, null),\n              setProp(domElement, tag, \"target\", props.target, props, null)));\n      if (\n        null == value ||\n        \"symbol\" === typeof value ||\n        \"boolean\" === typeof value\n      ) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      value = sanitizeURL(\"\" + value);\n      domElement.setAttribute(key, value);\n      break;\n    case \"onClick\":\n      null != value && (domElement.onclick = noop$1);\n      break;\n    case \"onScroll\":\n      null != value && listenToNonDelegatedEvent(\"scroll\", domElement);\n      break;\n    case \"onScrollEnd\":\n      null != value && listenToNonDelegatedEvent(\"scrollend\", domElement);\n      break;\n    case \"dangerouslySetInnerHTML\":\n      if (null != value) {\n        if (\"object\" !== typeof value || !(\"__html\" in value))\n          throw Error(formatProdErrorMessage(61));\n        key = value.__html;\n        if (null != key) {\n          if (null != props.children) throw Error(formatProdErrorMessage(60));\n          domElement.innerHTML = key;\n        }\n      }\n      break;\n    case \"multiple\":\n      domElement.multiple =\n        value && \"function\" !== typeof value && \"symbol\" !== typeof value;\n      break;\n    case \"muted\":\n      domElement.muted =\n        value && \"function\" !== typeof value && \"symbol\" !== typeof value;\n      break;\n    case \"suppressContentEditableWarning\":\n    case \"suppressHydrationWarning\":\n    case \"defaultValue\":\n    case \"defaultChecked\":\n    case \"innerHTML\":\n    case \"ref\":\n      break;\n    case \"autoFocus\":\n      break;\n    case \"xlinkHref\":\n      if (\n        null == value ||\n        \"function\" === typeof value ||\n        \"boolean\" === typeof value ||\n        \"symbol\" === typeof value\n      ) {\n        domElement.removeAttribute(\"xlink:href\");\n        break;\n      }\n      key = sanitizeURL(\"\" + value);\n      domElement.setAttributeNS(\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:href\",\n        key\n      );\n      break;\n    case \"contentEditable\":\n    case \"spellCheck\":\n    case \"draggable\":\n    case \"value\":\n    case \"autoReverse\":\n    case \"externalResourcesRequired\":\n    case \"focusable\":\n    case \"preserveAlpha\":\n      null != value && \"function\" !== typeof value && \"symbol\" !== typeof value\n        ? domElement.setAttribute(key, \"\" + value)\n        : domElement.removeAttribute(key);\n      break;\n    case \"inert\":\n    case \"allowFullScreen\":\n    case \"async\":\n    case \"autoPlay\":\n    case \"controls\":\n    case \"default\":\n    case \"defer\":\n    case \"disabled\":\n    case \"disablePictureInPicture\":\n    case \"disableRemotePlayback\":\n    case \"formNoValidate\":\n    case \"hidden\":\n    case \"loop\":\n    case \"noModule\":\n    case \"noValidate\":\n    case \"open\":\n    case \"playsInline\":\n    case \"readOnly\":\n    case \"required\":\n    case \"reversed\":\n    case \"scoped\":\n    case \"seamless\":\n    case \"itemScope\":\n      value && \"function\" !== typeof value && \"symbol\" !== typeof value\n        ? domElement.setAttribute(key, \"\")\n        : domElement.removeAttribute(key);\n      break;\n    case \"capture\":\n    case \"download\":\n      !0 === value\n        ? domElement.setAttribute(key, \"\")\n        : !1 !== value &&\n            null != value &&\n            \"function\" !== typeof value &&\n            \"symbol\" !== typeof value\n          ? domElement.setAttribute(key, value)\n          : domElement.removeAttribute(key);\n      break;\n    case \"cols\":\n    case \"rows\":\n    case \"size\":\n    case \"span\":\n      null != value &&\n      \"function\" !== typeof value &&\n      \"symbol\" !== typeof value &&\n      !isNaN(value) &&\n      1 <= value\n        ? domElement.setAttribute(key, value)\n        : domElement.removeAttribute(key);\n      break;\n    case \"rowSpan\":\n    case \"start\":\n      null == value ||\n      \"function\" === typeof value ||\n      \"symbol\" === typeof value ||\n      isNaN(value)\n        ? domElement.removeAttribute(key)\n        : domElement.setAttribute(key, value);\n      break;\n    case \"popover\":\n      listenToNonDelegatedEvent(\"beforetoggle\", domElement);\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      setValueForAttribute(domElement, \"popover\", value);\n      break;\n    case \"xlinkActuate\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:actuate\",\n        value\n      );\n      break;\n    case \"xlinkArcrole\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:arcrole\",\n        value\n      );\n      break;\n    case \"xlinkRole\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:role\",\n        value\n      );\n      break;\n    case \"xlinkShow\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:show\",\n        value\n      );\n      break;\n    case \"xlinkTitle\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:title\",\n        value\n      );\n      break;\n    case \"xlinkType\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:type\",\n        value\n      );\n      break;\n    case \"xmlBase\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:base\",\n        value\n      );\n      break;\n    case \"xmlLang\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:lang\",\n        value\n      );\n      break;\n    case \"xmlSpace\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:space\",\n        value\n      );\n      break;\n    case \"is\":\n      setValueForAttribute(domElement, \"is\", value);\n      break;\n    case \"innerText\":\n    case \"textContent\":\n      break;\n    default:\n      if (\n        !(2 < key.length) ||\n        (\"o\" !== key[0] && \"O\" !== key[0]) ||\n        (\"n\" !== key[1] && \"N\" !== key[1])\n      )\n        (key = aliases.get(key) || key),\n          setValueForAttribute(domElement, key, value);\n  }\n}\nfunction setPropOnCustomElement(domElement, tag, key, value, props, prevValue) {\n  switch (key) {\n    case \"style\":\n      setValueForStyles(domElement, value, prevValue);\n      break;\n    case \"dangerouslySetInnerHTML\":\n      if (null != value) {\n        if (\"object\" !== typeof value || !(\"__html\" in value))\n          throw Error(formatProdErrorMessage(61));\n        key = value.__html;\n        if (null != key) {\n          if (null != props.children) throw Error(formatProdErrorMessage(60));\n          domElement.innerHTML = key;\n        }\n      }\n      break;\n    case \"children\":\n      \"string\" === typeof value\n        ? setTextContent(domElement, value)\n        : (\"number\" === typeof value || \"bigint\" === typeof value) &&\n          setTextContent(domElement, \"\" + value);\n      break;\n    case \"onScroll\":\n      null != value && listenToNonDelegatedEvent(\"scroll\", domElement);\n      break;\n    case \"onScrollEnd\":\n      null != value && listenToNonDelegatedEvent(\"scrollend\", domElement);\n      break;\n    case \"onClick\":\n      null != value && (domElement.onclick = noop$1);\n      break;\n    case \"suppressContentEditableWarning\":\n    case \"suppressHydrationWarning\":\n    case \"innerHTML\":\n    case \"ref\":\n      break;\n    case \"innerText\":\n    case \"textContent\":\n      break;\n    default:\n      if (!registrationNameDependencies.hasOwnProperty(key))\n        a: {\n          if (\n            \"o\" === key[0] &&\n            \"n\" === key[1] &&\n            ((props = key.endsWith(\"Capture\")),\n            (tag = key.slice(2, props ? key.length - 7 : void 0)),\n            (prevValue = domElement[internalPropsKey] || null),\n            (prevValue = null != prevValue ? prevValue[key] : null),\n            \"function\" === typeof prevValue &&\n              domElement.removeEventListener(tag, prevValue, props),\n            \"function\" === typeof value)\n          ) {\n            \"function\" !== typeof prevValue &&\n              null !== prevValue &&\n              (key in domElement\n                ? (domElement[key] = null)\n                : domElement.hasAttribute(key) &&\n                  domElement.removeAttribute(key));\n            domElement.addEventListener(tag, value, props);\n            break a;\n          }\n          key in domElement\n            ? (domElement[key] = value)\n            : !0 === value\n              ? domElement.setAttribute(key, \"\")\n              : setValueForAttribute(domElement, key, value);\n        }\n  }\n}\nfunction setInitialProperties(domElement, tag, props) {\n  switch (tag) {\n    case \"div\":\n    case \"span\":\n    case \"svg\":\n    case \"path\":\n    case \"a\":\n    case \"g\":\n    case \"p\":\n    case \"li\":\n      break;\n    case \"img\":\n      listenToNonDelegatedEvent(\"error\", domElement);\n      listenToNonDelegatedEvent(\"load\", domElement);\n      var hasSrc = !1,\n        hasSrcSet = !1,\n        propKey;\n      for (propKey in props)\n        if (props.hasOwnProperty(propKey)) {\n          var propValue = props[propKey];\n          if (null != propValue)\n            switch (propKey) {\n              case \"src\":\n                hasSrc = !0;\n                break;\n              case \"srcSet\":\n                hasSrcSet = !0;\n                break;\n              case \"children\":\n              case \"dangerouslySetInnerHTML\":\n                throw Error(formatProdErrorMessage(137, tag));\n              default:\n                setProp(domElement, tag, propKey, propValue, props, null);\n            }\n        }\n      hasSrcSet &&\n        setProp(domElement, tag, \"srcSet\", props.srcSet, props, null);\n      hasSrc && setProp(domElement, tag, \"src\", props.src, props, null);\n      return;\n    case \"input\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      var defaultValue = (propKey = propValue = hasSrcSet = null),\n        checked = null,\n        defaultChecked = null;\n      for (hasSrc in props)\n        if (props.hasOwnProperty(hasSrc)) {\n          var propValue$184 = props[hasSrc];\n          if (null != propValue$184)\n            switch (hasSrc) {\n              case \"name\":\n                hasSrcSet = propValue$184;\n                break;\n              case \"type\":\n                propValue = propValue$184;\n                break;\n              case \"checked\":\n                checked = propValue$184;\n                break;\n              case \"defaultChecked\":\n                defaultChecked = propValue$184;\n                break;\n              case \"value\":\n                propKey = propValue$184;\n                break;\n              case \"defaultValue\":\n                defaultValue = propValue$184;\n                break;\n              case \"children\":\n              case \"dangerouslySetInnerHTML\":\n                if (null != propValue$184)\n                  throw Error(formatProdErrorMessage(137, tag));\n                break;\n              default:\n                setProp(domElement, tag, hasSrc, propValue$184, props, null);\n            }\n        }\n      initInput(\n        domElement,\n        propKey,\n        defaultValue,\n        checked,\n        defaultChecked,\n        propValue,\n        hasSrcSet,\n        !1\n      );\n      return;\n    case \"select\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      hasSrc = propValue = propKey = null;\n      for (hasSrcSet in props)\n        if (\n          props.hasOwnProperty(hasSrcSet) &&\n          ((defaultValue = props[hasSrcSet]), null != defaultValue)\n        )\n          switch (hasSrcSet) {\n            case \"value\":\n              propKey = defaultValue;\n              break;\n            case \"defaultValue\":\n              propValue = defaultValue;\n              break;\n            case \"multiple\":\n              hasSrc = defaultValue;\n            default:\n              setProp(domElement, tag, hasSrcSet, defaultValue, props, null);\n          }\n      tag = propKey;\n      props = propValue;\n      domElement.multiple = !!hasSrc;\n      null != tag\n        ? updateOptions(domElement, !!hasSrc, tag, !1)\n        : null != props && updateOptions(domElement, !!hasSrc, props, !0);\n      return;\n    case \"textarea\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      propKey = hasSrcSet = hasSrc = null;\n      for (propValue in props)\n        if (\n          props.hasOwnProperty(propValue) &&\n          ((defaultValue = props[propValue]), null != defaultValue)\n        )\n          switch (propValue) {\n            case \"value\":\n              hasSrc = defaultValue;\n              break;\n            case \"defaultValue\":\n              hasSrcSet = defaultValue;\n              break;\n            case \"children\":\n              propKey = defaultValue;\n              break;\n            case \"dangerouslySetInnerHTML\":\n              if (null != defaultValue) throw Error(formatProdErrorMessage(91));\n              break;\n            default:\n              setProp(domElement, tag, propValue, defaultValue, props, null);\n          }\n      initTextarea(domElement, hasSrc, hasSrcSet, propKey);\n      return;\n    case \"option\":\n      for (checked in props)\n        if (\n          props.hasOwnProperty(checked) &&\n          ((hasSrc = props[checked]), null != hasSrc)\n        )\n          switch (checked) {\n            case \"selected\":\n              domElement.selected =\n                hasSrc &&\n                \"function\" !== typeof hasSrc &&\n                \"symbol\" !== typeof hasSrc;\n              break;\n            default:\n              setProp(domElement, tag, checked, hasSrc, props, null);\n          }\n      return;\n    case \"dialog\":\n      listenToNonDelegatedEvent(\"beforetoggle\", domElement);\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      listenToNonDelegatedEvent(\"cancel\", domElement);\n      listenToNonDelegatedEvent(\"close\", domElement);\n      break;\n    case \"iframe\":\n    case \"object\":\n      listenToNonDelegatedEvent(\"load\", domElement);\n      break;\n    case \"video\":\n    case \"audio\":\n      for (hasSrc = 0; hasSrc < mediaEventTypes.length; hasSrc++)\n        listenToNonDelegatedEvent(mediaEventTypes[hasSrc], domElement);\n      break;\n    case \"image\":\n      listenToNonDelegatedEvent(\"error\", domElement);\n      listenToNonDelegatedEvent(\"load\", domElement);\n      break;\n    case \"details\":\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      break;\n    case \"embed\":\n    case \"source\":\n    case \"link\":\n      listenToNonDelegatedEvent(\"error\", domElement),\n        listenToNonDelegatedEvent(\"load\", domElement);\n    case \"area\":\n    case \"base\":\n    case \"br\":\n    case \"col\":\n    case \"hr\":\n    case \"keygen\":\n    case \"meta\":\n    case \"param\":\n    case \"track\":\n    case \"wbr\":\n    case \"menuitem\":\n      for (defaultChecked in props)\n        if (\n          props.hasOwnProperty(defaultChecked) &&\n          ((hasSrc = props[defaultChecked]), null != hasSrc)\n        )\n          switch (defaultChecked) {\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              throw Error(formatProdErrorMessage(137, tag));\n            default:\n              setProp(domElement, tag, defaultChecked, hasSrc, props, null);\n          }\n      return;\n    default:\n      if (isCustomElement(tag)) {\n        for (propValue$184 in props)\n          props.hasOwnProperty(propValue$184) &&\n            ((hasSrc = props[propValue$184]),\n            void 0 !== hasSrc &&\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                propValue$184,\n                hasSrc,\n                props,\n                void 0\n              ));\n        return;\n      }\n  }\n  for (defaultValue in props)\n    props.hasOwnProperty(defaultValue) &&\n      ((hasSrc = props[defaultValue]),\n      null != hasSrc &&\n        setProp(domElement, tag, defaultValue, hasSrc, props, null));\n}\nfunction updateProperties(domElement, tag, lastProps, nextProps) {\n  switch (tag) {\n    case \"div\":\n    case \"span\":\n    case \"svg\":\n    case \"path\":\n    case \"a\":\n    case \"g\":\n    case \"p\":\n    case \"li\":\n      break;\n    case \"input\":\n      var name = null,\n        type = null,\n        value = null,\n        defaultValue = null,\n        lastDefaultValue = null,\n        checked = null,\n        defaultChecked = null;\n      for (propKey in lastProps) {\n        var lastProp = lastProps[propKey];\n        if (lastProps.hasOwnProperty(propKey) && null != lastProp)\n          switch (propKey) {\n            case \"checked\":\n              break;\n            case \"value\":\n              break;\n            case \"defaultValue\":\n              lastDefaultValue = lastProp;\n            default:\n              nextProps.hasOwnProperty(propKey) ||\n                setProp(domElement, tag, propKey, null, nextProps, lastProp);\n          }\n      }\n      for (var propKey$201 in nextProps) {\n        var propKey = nextProps[propKey$201];\n        lastProp = lastProps[propKey$201];\n        if (\n          nextProps.hasOwnProperty(propKey$201) &&\n          (null != propKey || null != lastProp)\n        )\n          switch (propKey$201) {\n            case \"type\":\n              type = propKey;\n              break;\n            case \"name\":\n              name = propKey;\n              break;\n            case \"checked\":\n              checked = propKey;\n              break;\n            case \"defaultChecked\":\n              defaultChecked = propKey;\n              break;\n            case \"value\":\n              value = propKey;\n              break;\n            case \"defaultValue\":\n              defaultValue = propKey;\n              break;\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              if (null != propKey)\n                throw Error(formatProdErrorMessage(137, tag));\n              break;\n            default:\n              propKey !== lastProp &&\n                setProp(\n                  domElement,\n                  tag,\n                  propKey$201,\n                  propKey,\n                  nextProps,\n                  lastProp\n                );\n          }\n      }\n      updateInput(\n        domElement,\n        value,\n        defaultValue,\n        lastDefaultValue,\n        checked,\n        defaultChecked,\n        type,\n        name\n      );\n      return;\n    case \"select\":\n      propKey = value = defaultValue = propKey$201 = null;\n      for (type in lastProps)\n        if (\n          ((lastDefaultValue = lastProps[type]),\n          lastProps.hasOwnProperty(type) && null != lastDefaultValue)\n        )\n          switch (type) {\n            case \"value\":\n              break;\n            case \"multiple\":\n              propKey = lastDefaultValue;\n            default:\n              nextProps.hasOwnProperty(type) ||\n                setProp(\n                  domElement,\n                  tag,\n                  type,\n                  null,\n                  nextProps,\n                  lastDefaultValue\n                );\n          }\n      for (name in nextProps)\n        if (\n          ((type = nextProps[name]),\n          (lastDefaultValue = lastProps[name]),\n          nextProps.hasOwnProperty(name) &&\n            (null != type || null != lastDefaultValue))\n        )\n          switch (name) {\n            case \"value\":\n              propKey$201 = type;\n              break;\n            case \"defaultValue\":\n              defaultValue = type;\n              break;\n            case \"multiple\":\n              value = type;\n            default:\n              type !== lastDefaultValue &&\n                setProp(\n                  domElement,\n                  tag,\n                  name,\n                  type,\n                  nextProps,\n                  lastDefaultValue\n                );\n          }\n      tag = defaultValue;\n      lastProps = value;\n      nextProps = propKey;\n      null != propKey$201\n        ? updateOptions(domElement, !!lastProps, propKey$201, !1)\n        : !!nextProps !== !!lastProps &&\n          (null != tag\n            ? updateOptions(domElement, !!lastProps, tag, !0)\n            : updateOptions(domElement, !!lastProps, lastProps ? [] : \"\", !1));\n      return;\n    case \"textarea\":\n      propKey = propKey$201 = null;\n      for (defaultValue in lastProps)\n        if (\n          ((name = lastProps[defaultValue]),\n          lastProps.hasOwnProperty(defaultValue) &&\n            null != name &&\n            !nextProps.hasOwnProperty(defaultValue))\n        )\n          switch (defaultValue) {\n            case \"value\":\n              break;\n            case \"children\":\n              break;\n            default:\n              setProp(domElement, tag, defaultValue, null, nextProps, name);\n          }\n      for (value in nextProps)\n        if (\n          ((name = nextProps[value]),\n          (type = lastProps[value]),\n          nextProps.hasOwnProperty(value) && (null != name || null != type))\n        )\n          switch (value) {\n            case \"value\":\n              propKey$201 = name;\n              break;\n            case \"defaultValue\":\n              propKey = name;\n              break;\n            case \"children\":\n              break;\n            case \"dangerouslySetInnerHTML\":\n              if (null != name) throw Error(formatProdErrorMessage(91));\n              break;\n            default:\n              name !== type &&\n                setProp(domElement, tag, value, name, nextProps, type);\n          }\n      updateTextarea(domElement, propKey$201, propKey);\n      return;\n    case \"option\":\n      for (var propKey$217 in lastProps)\n        if (\n          ((propKey$201 = lastProps[propKey$217]),\n          lastProps.hasOwnProperty(propKey$217) &&\n            null != propKey$201 &&\n            !nextProps.hasOwnProperty(propKey$217))\n        )\n          switch (propKey$217) {\n            case \"selected\":\n              domElement.selected = !1;\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                propKey$217,\n                null,\n                nextProps,\n                propKey$201\n              );\n          }\n      for (lastDefaultValue in nextProps)\n        if (\n          ((propKey$201 = nextProps[lastDefaultValue]),\n          (propKey = lastProps[lastDefaultValue]),\n          nextProps.hasOwnProperty(lastDefaultValue) &&\n            propKey$201 !== propKey &&\n            (null != propKey$201 || null != propKey))\n        )\n          switch (lastDefaultValue) {\n            case \"selected\":\n              domElement.selected =\n                propKey$201 &&\n                \"function\" !== typeof propKey$201 &&\n                \"symbol\" !== typeof propKey$201;\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                lastDefaultValue,\n                propKey$201,\n                nextProps,\n                propKey\n              );\n          }\n      return;\n    case \"img\":\n    case \"link\":\n    case \"area\":\n    case \"base\":\n    case \"br\":\n    case \"col\":\n    case \"embed\":\n    case \"hr\":\n    case \"keygen\":\n    case \"meta\":\n    case \"param\":\n    case \"source\":\n    case \"track\":\n    case \"wbr\":\n    case \"menuitem\":\n      for (var propKey$222 in lastProps)\n        (propKey$201 = lastProps[propKey$222]),\n          lastProps.hasOwnProperty(propKey$222) &&\n            null != propKey$201 &&\n            !nextProps.hasOwnProperty(propKey$222) &&\n            setProp(domElement, tag, propKey$222, null, nextProps, propKey$201);\n      for (checked in nextProps)\n        if (\n          ((propKey$201 = nextProps[checked]),\n          (propKey = lastProps[checked]),\n          nextProps.hasOwnProperty(checked) &&\n            propKey$201 !== propKey &&\n            (null != propKey$201 || null != propKey))\n        )\n          switch (checked) {\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              if (null != propKey$201)\n                throw Error(formatProdErrorMessage(137, tag));\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                checked,\n                propKey$201,\n                nextProps,\n                propKey\n              );\n          }\n      return;\n    default:\n      if (isCustomElement(tag)) {\n        for (var propKey$227 in lastProps)\n          (propKey$201 = lastProps[propKey$227]),\n            lastProps.hasOwnProperty(propKey$227) &&\n              void 0 !== propKey$201 &&\n              !nextProps.hasOwnProperty(propKey$227) &&\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                propKey$227,\n                void 0,\n                nextProps,\n                propKey$201\n              );\n        for (defaultChecked in nextProps)\n          (propKey$201 = nextProps[defaultChecked]),\n            (propKey = lastProps[defaultChecked]),\n            !nextProps.hasOwnProperty(defaultChecked) ||\n              propKey$201 === propKey ||\n              (void 0 === propKey$201 && void 0 === propKey) ||\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                defaultChecked,\n                propKey$201,\n                nextProps,\n                propKey\n              );\n        return;\n      }\n  }\n  for (var propKey$232 in lastProps)\n    (propKey$201 = lastProps[propKey$232]),\n      lastProps.hasOwnProperty(propKey$232) &&\n        null != propKey$201 &&\n        !nextProps.hasOwnProperty(propKey$232) &&\n        setProp(domElement, tag, propKey$232, null, nextProps, propKey$201);\n  for (lastProp in nextProps)\n    (propKey$201 = nextProps[lastProp]),\n      (propKey = lastProps[lastProp]),\n      !nextProps.hasOwnProperty(lastProp) ||\n        propKey$201 === propKey ||\n        (null == propKey$201 && null == propKey) ||\n        setProp(domElement, tag, lastProp, propKey$201, nextProps, propKey);\n}\nfunction isLikelyStaticResource(initiatorType) {\n  switch (initiatorType) {\n    case \"css\":\n    case \"script\":\n    case \"font\":\n    case \"img\":\n    case \"image\":\n    case \"input\":\n    case \"link\":\n      return !0;\n    default:\n      return !1;\n  }\n}\nfunction estimateBandwidth() {\n  if (\"function\" === typeof performance.getEntriesByType) {\n    for (\n      var count = 0,\n        bits = 0,\n        resourceEntries = performance.getEntriesByType(\"resource\"),\n        i = 0;\n      i < resourceEntries.length;\n      i++\n    ) {\n      var entry = resourceEntries[i],\n        transferSize = entry.transferSize,\n        initiatorType = entry.initiatorType,\n        duration = entry.duration;\n      if (transferSize && duration && isLikelyStaticResource(initiatorType)) {\n        initiatorType = 0;\n        duration = entry.responseEnd;\n        for (i += 1; i < resourceEntries.length; i++) {\n          var overlapEntry = resourceEntries[i],\n            overlapStartTime = overlapEntry.startTime;\n          if (overlapStartTime > duration) break;\n          var overlapTransferSize = overlapEntry.transferSize,\n            overlapInitiatorType = overlapEntry.initiatorType;\n          overlapTransferSize &&\n            isLikelyStaticResource(overlapInitiatorType) &&\n            ((overlapEntry = overlapEntry.responseEnd),\n            (initiatorType +=\n              overlapTransferSize *\n              (overlapEntry < duration\n                ? 1\n                : (duration - overlapStartTime) /\n                  (overlapEntry - overlapStartTime))));\n        }\n        --i;\n        bits += (8 * (transferSize + initiatorType)) / (entry.duration / 1e3);\n        count++;\n        if (10 < count) break;\n      }\n    }\n    if (0 < count) return bits / count / 1e6;\n  }\n  return navigator.connection &&\n    ((count = navigator.connection.downlink), \"number\" === typeof count)\n    ? count\n    : 5;\n}\nvar eventsEnabled = null,\n  selectionInformation = null;\nfunction getOwnerDocumentFromRootContainer(rootContainerElement) {\n  return 9 === rootContainerElement.nodeType\n    ? rootContainerElement\n    : rootContainerElement.ownerDocument;\n}\nfunction getOwnHostContext(namespaceURI) {\n  switch (namespaceURI) {\n    case \"http://www.w3.org/2000/svg\":\n      return 1;\n    case \"http://www.w3.org/1998/Math/MathML\":\n      return 2;\n    default:\n      return 0;\n  }\n}\nfunction getChildHostContextProd(parentNamespace, type) {\n  if (0 === parentNamespace)\n    switch (type) {\n      case \"svg\":\n        return 1;\n      case \"math\":\n        return 2;\n      default:\n        return 0;\n    }\n  return 1 === parentNamespace && \"foreignObject\" === type\n    ? 0\n    : parentNamespace;\n}\nfunction shouldSetTextContent(type, props) {\n  return (\n    \"textarea\" === type ||\n    \"noscript\" === type ||\n    \"string\" === typeof props.children ||\n    \"number\" === typeof props.children ||\n    \"bigint\" === typeof props.children ||\n    (\"object\" === typeof props.dangerouslySetInnerHTML &&\n      null !== props.dangerouslySetInnerHTML &&\n      null != props.dangerouslySetInnerHTML.__html)\n  );\n}\nvar currentPopstateTransitionEvent = null;\nfunction shouldAttemptEagerTransition() {\n  var event = window.event;\n  if (event && \"popstate\" === event.type) {\n    if (event === currentPopstateTransitionEvent) return !1;\n    currentPopstateTransitionEvent = event;\n    return !0;\n  }\n  currentPopstateTransitionEvent = null;\n  return !1;\n}\nvar scheduleTimeout = \"function\" === typeof setTimeout ? setTimeout : void 0,\n  cancelTimeout = \"function\" === typeof clearTimeout ? clearTimeout : void 0,\n  localPromise = \"function\" === typeof Promise ? Promise : void 0,\n  scheduleMicrotask =\n    \"function\" === typeof queueMicrotask\n      ? queueMicrotask\n      : \"undefined\" !== typeof localPromise\n        ? function (callback) {\n            return localPromise\n              .resolve(null)\n              .then(callback)\n              .catch(handleErrorInNextTick);\n          }\n        : scheduleTimeout;\nfunction handleErrorInNextTick(error) {\n  setTimeout(function () {\n    throw error;\n  });\n}\nfunction isSingletonScope(type) {\n  return \"head\" === type;\n}\nfunction clearHydrationBoundary(parentInstance, hydrationInstance) {\n  var node = hydrationInstance,\n    depth = 0;\n  do {\n    var nextNode = node.nextSibling;\n    parentInstance.removeChild(node);\n    if (nextNode && 8 === nextNode.nodeType)\n      if (((node = nextNode.data), \"/$\" === node || \"/&\" === node)) {\n        if (0 === depth) {\n          parentInstance.removeChild(nextNode);\n          retryIfBlockedOn(hydrationInstance);\n          return;\n        }\n        depth--;\n      } else if (\n        \"$\" === node ||\n        \"$?\" === node ||\n        \"$~\" === node ||\n        \"$!\" === node ||\n        \"&\" === node\n      )\n        depth++;\n      else if (\"html\" === node)\n        releaseSingletonInstance(parentInstance.ownerDocument.documentElement);\n      else if (\"head\" === node) {\n        node = parentInstance.ownerDocument.head;\n        releaseSingletonInstance(node);\n        for (var node$jscomp$0 = node.firstChild; node$jscomp$0; ) {\n          var nextNode$jscomp$0 = node$jscomp$0.nextSibling,\n            nodeName = node$jscomp$0.nodeName;\n          node$jscomp$0[internalHoistableMarker] ||\n            \"SCRIPT\" === nodeName ||\n            \"STYLE\" === nodeName ||\n            (\"LINK\" === nodeName &&\n              \"stylesheet\" === node$jscomp$0.rel.toLowerCase()) ||\n            node.removeChild(node$jscomp$0);\n          node$jscomp$0 = nextNode$jscomp$0;\n        }\n      } else\n        \"body\" === node &&\n          releaseSingletonInstance(parentInstance.ownerDocument.body);\n    node = nextNode;\n  } while (node);\n  retryIfBlockedOn(hydrationInstance);\n}\nfunction hideOrUnhideDehydratedBoundary(suspenseInstance, isHidden) {\n  var node = suspenseInstance;\n  suspenseInstance = 0;\n  do {\n    var nextNode = node.nextSibling;\n    1 === node.nodeType\n      ? isHidden\n        ? ((node._stashedDisplay = node.style.display),\n          (node.style.display = \"none\"))\n        : ((node.style.display = node._stashedDisplay || \"\"),\n          \"\" === node.getAttribute(\"style\") && node.removeAttribute(\"style\"))\n      : 3 === node.nodeType &&\n        (isHidden\n          ? ((node._stashedText = node.nodeValue), (node.nodeValue = \"\"))\n          : (node.nodeValue = node._stashedText || \"\"));\n    if (nextNode && 8 === nextNode.nodeType)\n      if (((node = nextNode.data), \"/$\" === node))\n        if (0 === suspenseInstance) break;\n        else suspenseInstance--;\n      else\n        (\"$\" !== node && \"$?\" !== node && \"$~\" !== node && \"$!\" !== node) ||\n          suspenseInstance++;\n    node = nextNode;\n  } while (node);\n}\nfunction clearContainerSparingly(container) {\n  var nextNode = container.firstChild;\n  nextNode && 10 === nextNode.nodeType && (nextNode = nextNode.nextSibling);\n  for (; nextNode; ) {\n    var node = nextNode;\n    nextNode = nextNode.nextSibling;\n    switch (node.nodeName) {\n      case \"HTML\":\n      case \"HEAD\":\n      case \"BODY\":\n        clearContainerSparingly(node);\n        detachDeletedInstance(node);\n        continue;\n      case \"SCRIPT\":\n      case \"STYLE\":\n        continue;\n      case \"LINK\":\n        if (\"stylesheet\" === node.rel.toLowerCase()) continue;\n    }\n    container.removeChild(node);\n  }\n}\nfunction canHydrateInstance(instance, type, props, inRootOrSingleton) {\n  for (; 1 === instance.nodeType; ) {\n    var anyProps = props;\n    if (instance.nodeName.toLowerCase() !== type.toLowerCase()) {\n      if (\n        !inRootOrSingleton &&\n        (\"INPUT\" !== instance.nodeName || \"hidden\" !== instance.type)\n      )\n        break;\n    } else if (!inRootOrSingleton)\n      if (\"input\" === type && \"hidden\" === instance.type) {\n        var name = null == anyProps.name ? null : \"\" + anyProps.name;\n        if (\n          \"hidden\" === anyProps.type &&\n          instance.getAttribute(\"name\") === name\n        )\n          return instance;\n      } else return instance;\n    else if (!instance[internalHoistableMarker])\n      switch (type) {\n        case \"meta\":\n          if (!instance.hasAttribute(\"itemprop\")) break;\n          return instance;\n        case \"link\":\n          name = instance.getAttribute(\"rel\");\n          if (\"stylesheet\" === name && instance.hasAttribute(\"data-precedence\"))\n            break;\n          else if (\n            name !== anyProps.rel ||\n            instance.getAttribute(\"href\") !==\n              (null == anyProps.href || \"\" === anyProps.href\n                ? null\n                : anyProps.href) ||\n            instance.getAttribute(\"crossorigin\") !==\n              (null == anyProps.crossOrigin ? null : anyProps.crossOrigin) ||\n            instance.getAttribute(\"title\") !==\n              (null == anyProps.title ? null : anyProps.title)\n          )\n            break;\n          return instance;\n        case \"style\":\n          if (instance.hasAttribute(\"data-precedence\")) break;\n          return instance;\n        case \"script\":\n          name = instance.getAttribute(\"src\");\n          if (\n            (name !== (null == anyProps.src ? null : anyProps.src) ||\n              instance.getAttribute(\"type\") !==\n                (null == anyProps.type ? null : anyProps.type) ||\n              instance.getAttribute(\"crossorigin\") !==\n                (null == anyProps.crossOrigin ? null : anyProps.crossOrigin)) &&\n            name &&\n            instance.hasAttribute(\"async\") &&\n            !instance.hasAttribute(\"itemprop\")\n          )\n            break;\n          return instance;\n        default:\n          return instance;\n      }\n    instance = getNextHydratable(instance.nextSibling);\n    if (null === instance) break;\n  }\n  return null;\n}\nfunction canHydrateTextInstance(instance, text, inRootOrSingleton) {\n  if (\"\" === text) return null;\n  for (; 3 !== instance.nodeType; ) {\n    if (\n      (1 !== instance.nodeType ||\n        \"INPUT\" !== instance.nodeName ||\n        \"hidden\" !== instance.type) &&\n      !inRootOrSingleton\n    )\n      return null;\n    instance = getNextHydratable(instance.nextSibling);\n    if (null === instance) return null;\n  }\n  return instance;\n}\nfunction canHydrateHydrationBoundary(instance, inRootOrSingleton) {\n  for (; 8 !== instance.nodeType; ) {\n    if (\n      (1 !== instance.nodeType ||\n        \"INPUT\" !== instance.nodeName ||\n        \"hidden\" !== instance.type) &&\n      !inRootOrSingleton\n    )\n      return null;\n    instance = getNextHydratable(instance.nextSibling);\n    if (null === instance) return null;\n  }\n  return instance;\n}\nfunction isSuspenseInstancePending(instance) {\n  return \"$?\" === instance.data || \"$~\" === instance.data;\n}\nfunction isSuspenseInstanceFallback(instance) {\n  return (\n    \"$!\" === instance.data ||\n    (\"$?\" === instance.data && \"loading\" !== instance.ownerDocument.readyState)\n  );\n}\nfunction registerSuspenseInstanceRetry(instance, callback) {\n  var ownerDocument = instance.ownerDocument;\n  if (\"$~\" === instance.data) instance._reactRetry = callback;\n  else if (\"$?\" !== instance.data || \"loading\" !== ownerDocument.readyState)\n    callback();\n  else {\n    var listener = function () {\n      callback();\n      ownerDocument.removeEventListener(\"DOMContentLoaded\", listener);\n    };\n    ownerDocument.addEventListener(\"DOMContentLoaded\", listener);\n    instance._reactRetry = listener;\n  }\n}\nfunction getNextHydratable(node) {\n  for (; null != node; node = node.nextSibling) {\n    var nodeType = node.nodeType;\n    if (1 === nodeType || 3 === nodeType) break;\n    if (8 === nodeType) {\n      nodeType = node.data;\n      if (\n        \"$\" === nodeType ||\n        \"$!\" === nodeType ||\n        \"$?\" === nodeType ||\n        \"$~\" === nodeType ||\n        \"&\" === nodeType ||\n        \"F!\" === nodeType ||\n        \"F\" === nodeType\n      )\n        break;\n      if (\"/$\" === nodeType || \"/&\" === nodeType) return null;\n    }\n  }\n  return node;\n}\nvar previousHydratableOnEnteringScopedSingleton = null;\nfunction getNextHydratableInstanceAfterHydrationBoundary(hydrationInstance) {\n  hydrationInstance = hydrationInstance.nextSibling;\n  for (var depth = 0; hydrationInstance; ) {\n    if (8 === hydrationInstance.nodeType) {\n      var data = hydrationInstance.data;\n      if (\"/$\" === data || \"/&\" === data) {\n        if (0 === depth)\n          return getNextHydratable(hydrationInstance.nextSibling);\n        depth--;\n      } else\n        (\"$\" !== data &&\n          \"$!\" !== data &&\n          \"$?\" !== data &&\n          \"$~\" !== data &&\n          \"&\" !== data) ||\n          depth++;\n    }\n    hydrationInstance = hydrationInstance.nextSibling;\n  }\n  return null;\n}\nfunction getParentHydrationBoundary(targetInstance) {\n  targetInstance = targetInstance.previousSibling;\n  for (var depth = 0; targetInstance; ) {\n    if (8 === targetInstance.nodeType) {\n      var data = targetInstance.data;\n      if (\n        \"$\" === data ||\n        \"$!\" === data ||\n        \"$?\" === data ||\n        \"$~\" === data ||\n        \"&\" === data\n      ) {\n        if (0 === depth) return targetInstance;\n        depth--;\n      } else (\"/$\" !== data && \"/&\" !== data) || depth++;\n    }\n    targetInstance = targetInstance.previousSibling;\n  }\n  return null;\n}\nfunction resolveSingletonInstance(type, props, rootContainerInstance) {\n  props = getOwnerDocumentFromRootContainer(rootContainerInstance);\n  switch (type) {\n    case \"html\":\n      type = props.documentElement;\n      if (!type) throw Error(formatProdErrorMessage(452));\n      return type;\n    case \"head\":\n      type = props.head;\n      if (!type) throw Error(formatProdErrorMessage(453));\n      return type;\n    case \"body\":\n      type = props.body;\n      if (!type) throw Error(formatProdErrorMessage(454));\n      return type;\n    default:\n      throw Error(formatProdErrorMessage(451));\n  }\n}\nfunction releaseSingletonInstance(instance) {\n  for (var attributes = instance.attributes; attributes.length; )\n    instance.removeAttributeNode(attributes[0]);\n  detachDeletedInstance(instance);\n}\nvar preloadPropsMap = new Map(),\n  preconnectsSet = new Set();\nfunction getHoistableRoot(container) {\n  return \"function\" === typeof container.getRootNode\n    ? container.getRootNode()\n    : 9 === container.nodeType\n      ? container\n      : container.ownerDocument;\n}\nvar previousDispatcher = ReactDOMSharedInternals.d;\nReactDOMSharedInternals.d = {\n  f: flushSyncWork,\n  r: requestFormReset,\n  D: prefetchDNS,\n  C: preconnect,\n  L: preload,\n  m: preloadModule,\n  X: preinitScript,\n  S: preinitStyle,\n  M: preinitModuleScript\n};\nfunction flushSyncWork() {\n  var previousWasRendering = previousDispatcher.f(),\n    wasRendering = flushSyncWork$1();\n  return previousWasRendering || wasRendering;\n}\nfunction requestFormReset(form) {\n  var formInst = getInstanceFromNode(form);\n  null !== formInst && 5 === formInst.tag && \"form\" === formInst.type\n    ? requestFormReset$1(formInst)\n    : previousDispatcher.r(form);\n}\nvar globalDocument = \"undefined\" === typeof document ? null : document;\nfunction preconnectAs(rel, href, crossOrigin) {\n  var ownerDocument = globalDocument;\n  if (ownerDocument && \"string\" === typeof href && href) {\n    var limitedEscapedHref =\n      escapeSelectorAttributeValueInsideDoubleQuotes(href);\n    limitedEscapedHref =\n      'link[rel=\"' + rel + '\"][href=\"' + limitedEscapedHref + '\"]';\n    \"string\" === typeof crossOrigin &&\n      (limitedEscapedHref += '[crossorigin=\"' + crossOrigin + '\"]');\n    preconnectsSet.has(limitedEscapedHref) ||\n      (preconnectsSet.add(limitedEscapedHref),\n      (rel = { rel: rel, crossOrigin: crossOrigin, href: href }),\n      null === ownerDocument.querySelector(limitedEscapedHref) &&\n        ((href = ownerDocument.createElement(\"link\")),\n        setInitialProperties(href, \"link\", rel),\n        markNodeAsHoistable(href),\n        ownerDocument.head.appendChild(href)));\n  }\n}\nfunction prefetchDNS(href) {\n  previousDispatcher.D(href);\n  preconnectAs(\"dns-prefetch\", href, null);\n}\nfunction preconnect(href, crossOrigin) {\n  previousDispatcher.C(href, crossOrigin);\n  preconnectAs(\"preconnect\", href, crossOrigin);\n}\nfunction preload(href, as, options) {\n  previousDispatcher.L(href, as, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href && as) {\n    var preloadSelector =\n      'link[rel=\"preload\"][as=\"' +\n      escapeSelectorAttributeValueInsideDoubleQuotes(as) +\n      '\"]';\n    \"image\" === as\n      ? options && options.imageSrcSet\n        ? ((preloadSelector +=\n            '[imagesrcset=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(\n              options.imageSrcSet\n            ) +\n            '\"]'),\n          \"string\" === typeof options.imageSizes &&\n            (preloadSelector +=\n              '[imagesizes=\"' +\n              escapeSelectorAttributeValueInsideDoubleQuotes(\n                options.imageSizes\n              ) +\n              '\"]'))\n        : (preloadSelector +=\n            '[href=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n            '\"]')\n      : (preloadSelector +=\n          '[href=\"' +\n          escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n          '\"]');\n    var key = preloadSelector;\n    switch (as) {\n      case \"style\":\n        key = getStyleKey(href);\n        break;\n      case \"script\":\n        key = getScriptKey(href);\n    }\n    preloadPropsMap.has(key) ||\n      ((href = assign(\n        {\n          rel: \"preload\",\n          href:\n            \"image\" === as && options && options.imageSrcSet ? void 0 : href,\n          as: as\n        },\n        options\n      )),\n      preloadPropsMap.set(key, href),\n      null !== ownerDocument.querySelector(preloadSelector) ||\n        (\"style\" === as &&\n          ownerDocument.querySelector(getStylesheetSelectorFromKey(key))) ||\n        (\"script\" === as &&\n          ownerDocument.querySelector(getScriptSelectorFromKey(key))) ||\n        ((as = ownerDocument.createElement(\"link\")),\n        setInitialProperties(as, \"link\", href),\n        markNodeAsHoistable(as),\n        ownerDocument.head.appendChild(as)));\n  }\n}\nfunction preloadModule(href, options) {\n  previousDispatcher.m(href, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href) {\n    var as = options && \"string\" === typeof options.as ? options.as : \"script\",\n      preloadSelector =\n        'link[rel=\"modulepreload\"][as=\"' +\n        escapeSelectorAttributeValueInsideDoubleQuotes(as) +\n        '\"][href=\"' +\n        escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n        '\"]',\n      key = preloadSelector;\n    switch (as) {\n      case \"audioworklet\":\n      case \"paintworklet\":\n      case \"serviceworker\":\n      case \"sharedworker\":\n      case \"worker\":\n      case \"script\":\n        key = getScriptKey(href);\n    }\n    if (\n      !preloadPropsMap.has(key) &&\n      ((href = assign({ rel: \"modulepreload\", href: href }, options)),\n      preloadPropsMap.set(key, href),\n      null === ownerDocument.querySelector(preloadSelector))\n    ) {\n      switch (as) {\n        case \"audioworklet\":\n        case \"paintworklet\":\n        case \"serviceworker\":\n        case \"sharedworker\":\n        case \"worker\":\n        case \"script\":\n          if (ownerDocument.querySelector(getScriptSelectorFromKey(key)))\n            return;\n      }\n      as = ownerDocument.createElement(\"link\");\n      setInitialProperties(as, \"link\", href);\n      markNodeAsHoistable(as);\n      ownerDocument.head.appendChild(as);\n    }\n  }\n}\nfunction preinitStyle(href, precedence, options) {\n  previousDispatcher.S(href, precedence, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href) {\n    var styles = getResourcesFromRoot(ownerDocument).hoistableStyles,\n      key = getStyleKey(href);\n    precedence = precedence || \"default\";\n    var resource = styles.get(key);\n    if (!resource) {\n      var state = { loading: 0, preload: null };\n      if (\n        (resource = ownerDocument.querySelector(\n          getStylesheetSelectorFromKey(key)\n        ))\n      )\n        state.loading = 5;\n      else {\n        href = assign(\n          { rel: \"stylesheet\", href: href, \"data-precedence\": precedence },\n          options\n        );\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForStylesheet(href, options);\n        var link = (resource = ownerDocument.createElement(\"link\"));\n        markNodeAsHoistable(link);\n        setInitialProperties(link, \"link\", href);\n        link._p = new Promise(function (resolve, reject) {\n          link.onload = resolve;\n          link.onerror = reject;\n        });\n        link.addEventListener(\"load\", function () {\n          state.loading |= 1;\n        });\n        link.addEventListener(\"error\", function () {\n          state.loading |= 2;\n        });\n        state.loading |= 4;\n        insertStylesheet(resource, precedence, ownerDocument);\n      }\n      resource = {\n        type: \"stylesheet\",\n        instance: resource,\n        count: 1,\n        state: state\n      };\n      styles.set(key, resource);\n    }\n  }\n}\nfunction preinitScript(src, options) {\n  previousDispatcher.X(src, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && src) {\n    var scripts = getResourcesFromRoot(ownerDocument).hoistableScripts,\n      key = getScriptKey(src),\n      resource = scripts.get(key);\n    resource ||\n      ((resource = ownerDocument.querySelector(getScriptSelectorFromKey(key))),\n      resource ||\n        ((src = assign({ src: src, async: !0 }, options)),\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForScript(src, options),\n        (resource = ownerDocument.createElement(\"script\")),\n        markNodeAsHoistable(resource),\n        setInitialProperties(resource, \"link\", src),\n        ownerDocument.head.appendChild(resource)),\n      (resource = {\n        type: \"script\",\n        instance: resource,\n        count: 1,\n        state: null\n      }),\n      scripts.set(key, resource));\n  }\n}\nfunction preinitModuleScript(src, options) {\n  previousDispatcher.M(src, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && src) {\n    var scripts = getResourcesFromRoot(ownerDocument).hoistableScripts,\n      key = getScriptKey(src),\n      resource = scripts.get(key);\n    resource ||\n      ((resource = ownerDocument.querySelector(getScriptSelectorFromKey(key))),\n      resource ||\n        ((src = assign({ src: src, async: !0, type: \"module\" }, options)),\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForScript(src, options),\n        (resource = ownerDocument.createElement(\"script\")),\n        markNodeAsHoistable(resource),\n        setInitialProperties(resource, \"link\", src),\n        ownerDocument.head.appendChild(resource)),\n      (resource = {\n        type: \"script\",\n        instance: resource,\n        count: 1,\n        state: null\n      }),\n      scripts.set(key, resource));\n  }\n}\nfunction getResource(type, currentProps, pendingProps, currentResource) {\n  var JSCompiler_inline_result = (JSCompiler_inline_result =\n    rootInstanceStackCursor.current)\n    ? getHoistableRoot(JSCompiler_inline_result)\n    : null;\n  if (!JSCompiler_inline_result) throw Error(formatProdErrorMessage(446));\n  switch (type) {\n    case \"meta\":\n    case \"title\":\n      return null;\n    case \"style\":\n      return \"string\" === typeof pendingProps.precedence &&\n        \"string\" === typeof pendingProps.href\n        ? ((currentProps = getStyleKey(pendingProps.href)),\n          (pendingProps = getResourcesFromRoot(\n            JSCompiler_inline_result\n          ).hoistableStyles),\n          (currentResource = pendingProps.get(currentProps)),\n          currentResource ||\n            ((currentResource = {\n              type: \"style\",\n              instance: null,\n              count: 0,\n              state: null\n            }),\n            pendingProps.set(currentProps, currentResource)),\n          currentResource)\n        : { type: \"void\", instance: null, count: 0, state: null };\n    case \"link\":\n      if (\n        \"stylesheet\" === pendingProps.rel &&\n        \"string\" === typeof pendingProps.href &&\n        \"string\" === typeof pendingProps.precedence\n      ) {\n        type = getStyleKey(pendingProps.href);\n        var styles$243 = getResourcesFromRoot(\n            JSCompiler_inline_result\n          ).hoistableStyles,\n          resource$244 = styles$243.get(type);\n        resource$244 ||\n          ((JSCompiler_inline_result =\n            JSCompiler_inline_result.ownerDocument || JSCompiler_inline_result),\n          (resource$244 = {\n            type: \"stylesheet\",\n            instance: null,\n            count: 0,\n            state: { loading: 0, preload: null }\n          }),\n          styles$243.set(type, resource$244),\n          (styles$243 = JSCompiler_inline_result.querySelector(\n            getStylesheetSelectorFromKey(type)\n          )) &&\n            !styles$243._p &&\n            ((resource$244.instance = styles$243),\n            (resource$244.state.loading = 5)),\n          preloadPropsMap.has(type) ||\n            ((pendingProps = {\n              rel: \"preload\",\n              as: \"style\",\n              href: pendingProps.href,\n              crossOrigin: pendingProps.crossOrigin,\n              integrity: pendingProps.integrity,\n              media: pendingProps.media,\n              hrefLang: pendingProps.hrefLang,\n              referrerPolicy: pendingProps.referrerPolicy\n            }),\n            preloadPropsMap.set(type, pendingProps),\n            styles$243 ||\n              preloadStylesheet(\n                JSCompiler_inline_result,\n                type,\n                pendingProps,\n                resource$244.state\n              )));\n        if (currentProps && null === currentResource)\n          throw Error(formatProdErrorMessage(528, \"\"));\n        return resource$244;\n      }\n      if (currentProps && null !== currentResource)\n        throw Error(formatProdErrorMessage(529, \"\"));\n      return null;\n    case \"script\":\n      return (\n        (currentProps = pendingProps.async),\n        (pendingProps = pendingProps.src),\n        \"string\" === typeof pendingProps &&\n        currentProps &&\n        \"function\" !== typeof currentProps &&\n        \"symbol\" !== typeof currentProps\n          ? ((currentProps = getScriptKey(pendingProps)),\n            (pendingProps = getResourcesFromRoot(\n              JSCompiler_inline_result\n            ).hoistableScripts),\n            (currentResource = pendingProps.get(currentProps)),\n            currentResource ||\n              ((currentResource = {\n                type: \"script\",\n                instance: null,\n                count: 0,\n                state: null\n              }),\n              pendingProps.set(currentProps, currentResource)),\n            currentResource)\n          : { type: \"void\", instance: null, count: 0, state: null }\n      );\n    default:\n      throw Error(formatProdErrorMessage(444, type));\n  }\n}\nfunction getStyleKey(href) {\n  return 'href=\"' + escapeSelectorAttributeValueInsideDoubleQuotes(href) + '\"';\n}\nfunction getStylesheetSelectorFromKey(key) {\n  return 'link[rel=\"stylesheet\"][' + key + \"]\";\n}\nfunction stylesheetPropsFromRawProps(rawProps) {\n  return assign({}, rawProps, {\n    \"data-precedence\": rawProps.precedence,\n    precedence: null\n  });\n}\nfunction preloadStylesheet(ownerDocument, key, preloadProps, state) {\n  ownerDocument.querySelector('link[rel=\"preload\"][as=\"style\"][' + key + \"]\")\n    ? (state.loading = 1)\n    : ((key = ownerDocument.createElement(\"link\")),\n      (state.preload = key),\n      key.addEventListener(\"load\", function () {\n        return (state.loading |= 1);\n      }),\n      key.addEventListener(\"error\", function () {\n        return (state.loading |= 2);\n      }),\n      setInitialProperties(key, \"link\", preloadProps),\n      markNodeAsHoistable(key),\n      ownerDocument.head.appendChild(key));\n}\nfunction getScriptKey(src) {\n  return '[src=\"' + escapeSelectorAttributeValueInsideDoubleQuotes(src) + '\"]';\n}\nfunction getScriptSelectorFromKey(key) {\n  return \"script[async]\" + key;\n}\nfunction acquireResource(hoistableRoot, resource, props) {\n  resource.count++;\n  if (null === resource.instance)\n    switch (resource.type) {\n      case \"style\":\n        var instance = hoistableRoot.querySelector(\n          'style[data-href~=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(props.href) +\n            '\"]'\n        );\n        if (instance)\n          return (\n            (resource.instance = instance),\n            markNodeAsHoistable(instance),\n            instance\n          );\n        var styleProps = assign({}, props, {\n          \"data-href\": props.href,\n          \"data-precedence\": props.precedence,\n          href: null,\n          precedence: null\n        });\n        instance = (hoistableRoot.ownerDocument || hoistableRoot).createElement(\n          \"style\"\n        );\n        markNodeAsHoistable(instance);\n        setInitialProperties(instance, \"style\", styleProps);\n        insertStylesheet(instance, props.precedence, hoistableRoot);\n        return (resource.instance = instance);\n      case \"stylesheet\":\n        styleProps = getStyleKey(props.href);\n        var instance$249 = hoistableRoot.querySelector(\n          getStylesheetSelectorFromKey(styleProps)\n        );\n        if (instance$249)\n          return (\n            (resource.state.loading |= 4),\n            (resource.instance = instance$249),\n            markNodeAsHoistable(instance$249),\n            instance$249\n          );\n        instance = stylesheetPropsFromRawProps(props);\n        (styleProps = preloadPropsMap.get(styleProps)) &&\n          adoptPreloadPropsForStylesheet(instance, styleProps);\n        instance$249 = (\n          hoistableRoot.ownerDocument || hoistableRoot\n        ).createElement(\"link\");\n        markNodeAsHoistable(instance$249);\n        var linkInstance = instance$249;\n        linkInstance._p = new Promise(function (resolve, reject) {\n          linkInstance.onload = resolve;\n          linkInstance.onerror = reject;\n        });\n        setInitialProperties(instance$249, \"link\", instance);\n        resource.state.loading |= 4;\n        insertStylesheet(instance$249, props.precedence, hoistableRoot);\n        return (resource.instance = instance$249);\n      case \"script\":\n        instance$249 = getScriptKey(props.src);\n        if (\n          (styleProps = hoistableRoot.querySelector(\n            getScriptSelectorFromKey(instance$249)\n          ))\n        )\n          return (\n            (resource.instance = styleProps),\n            markNodeAsHoistable(styleProps),\n            styleProps\n          );\n        instance = props;\n        if ((styleProps = preloadPropsMap.get(instance$249)))\n          (instance = assign({}, props)),\n            adoptPreloadPropsForScript(instance, styleProps);\n        hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n        styleProps = hoistableRoot.createElement(\"script\");\n        markNodeAsHoistable(styleProps);\n        setInitialProperties(styleProps, \"link\", instance);\n        hoistableRoot.head.appendChild(styleProps);\n        return (resource.instance = styleProps);\n      case \"void\":\n        return null;\n      default:\n        throw Error(formatProdErrorMessage(443, resource.type));\n    }\n  else\n    \"stylesheet\" === resource.type &&\n      0 === (resource.state.loading & 4) &&\n      ((instance = resource.instance),\n      (resource.state.loading |= 4),\n      insertStylesheet(instance, props.precedence, hoistableRoot));\n  return resource.instance;\n}\nfunction insertStylesheet(instance, precedence, root) {\n  for (\n    var nodes = root.querySelectorAll(\n        'link[rel=\"stylesheet\"][data-precedence],style[data-precedence]'\n      ),\n      last = nodes.length ? nodes[nodes.length - 1] : null,\n      prior = last,\n      i = 0;\n    i < nodes.length;\n    i++\n  ) {\n    var node = nodes[i];\n    if (node.dataset.precedence === precedence) prior = node;\n    else if (prior !== last) break;\n  }\n  prior\n    ? prior.parentNode.insertBefore(instance, prior.nextSibling)\n    : ((precedence = 9 === root.nodeType ? root.head : root),\n      precedence.insertBefore(instance, precedence.firstChild));\n}\nfunction adoptPreloadPropsForStylesheet(stylesheetProps, preloadProps) {\n  null == stylesheetProps.crossOrigin &&\n    (stylesheetProps.crossOrigin = preloadProps.crossOrigin);\n  null == stylesheetProps.referrerPolicy &&\n    (stylesheetProps.referrerPolicy = preloadProps.referrerPolicy);\n  null == stylesheetProps.title && (stylesheetProps.title = preloadProps.title);\n}\nfunction adoptPreloadPropsForScript(scriptProps, preloadProps) {\n  null == scriptProps.crossOrigin &&\n    (scriptProps.crossOrigin = preloadProps.crossOrigin);\n  null == scriptProps.referrerPolicy &&\n    (scriptProps.referrerPolicy = preloadProps.referrerPolicy);\n  null == scriptProps.integrity &&\n    (scriptProps.integrity = preloadProps.integrity);\n}\nvar tagCaches = null;\nfunction getHydratableHoistableCache(type, keyAttribute, ownerDocument) {\n  if (null === tagCaches) {\n    var cache = new Map();\n    var caches = (tagCaches = new Map());\n    caches.set(ownerDocument, cache);\n  } else\n    (caches = tagCaches),\n      (cache = caches.get(ownerDocument)),\n      cache || ((cache = new Map()), caches.set(ownerDocument, cache));\n  if (cache.has(type)) return cache;\n  cache.set(type, null);\n  ownerDocument = ownerDocument.getElementsByTagName(type);\n  for (caches = 0; caches < ownerDocument.length; caches++) {\n    var node = ownerDocument[caches];\n    if (\n      !(\n        node[internalHoistableMarker] ||\n        node[internalInstanceKey] ||\n        (\"link\" === type && \"stylesheet\" === node.getAttribute(\"rel\"))\n      ) &&\n      \"http://www.w3.org/2000/svg\" !== node.namespaceURI\n    ) {\n      var nodeKey = node.getAttribute(keyAttribute) || \"\";\n      nodeKey = type + nodeKey;\n      var existing = cache.get(nodeKey);\n      existing ? existing.push(node) : cache.set(nodeKey, [node]);\n    }\n  }\n  return cache;\n}\nfunction mountHoistable(hoistableRoot, type, instance) {\n  hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n  hoistableRoot.head.insertBefore(\n    instance,\n    \"title\" === type ? hoistableRoot.querySelector(\"head > title\") : null\n  );\n}\nfunction isHostHoistableType(type, props, hostContext) {\n  if (1 === hostContext || null != props.itemProp) return !1;\n  switch (type) {\n    case \"meta\":\n    case \"title\":\n      return !0;\n    case \"style\":\n      if (\n        \"string\" !== typeof props.precedence ||\n        \"string\" !== typeof props.href ||\n        \"\" === props.href\n      )\n        break;\n      return !0;\n    case \"link\":\n      if (\n        \"string\" !== typeof props.rel ||\n        \"string\" !== typeof props.href ||\n        \"\" === props.href ||\n        props.onLoad ||\n        props.onError\n      )\n        break;\n      switch (props.rel) {\n        case \"stylesheet\":\n          return (\n            (type = props.disabled),\n            \"string\" === typeof props.precedence && null == type\n          );\n        default:\n          return !0;\n      }\n    case \"script\":\n      if (\n        props.async &&\n        \"function\" !== typeof props.async &&\n        \"symbol\" !== typeof props.async &&\n        !props.onLoad &&\n        !props.onError &&\n        props.src &&\n        \"string\" === typeof props.src\n      )\n        return !0;\n  }\n  return !1;\n}\nfunction preloadResource(resource) {\n  return \"stylesheet\" === resource.type && 0 === (resource.state.loading & 3)\n    ? !1\n    : !0;\n}\nfunction suspendResource(state, hoistableRoot, resource, props) {\n  if (\n    \"stylesheet\" === resource.type &&\n    (\"string\" !== typeof props.media ||\n      !1 !== matchMedia(props.media).matches) &&\n    0 === (resource.state.loading & 4)\n  ) {\n    if (null === resource.instance) {\n      var key = getStyleKey(props.href),\n        instance = hoistableRoot.querySelector(\n          getStylesheetSelectorFromKey(key)\n        );\n      if (instance) {\n        hoistableRoot = instance._p;\n        null !== hoistableRoot &&\n          \"object\" === typeof hoistableRoot &&\n          \"function\" === typeof hoistableRoot.then &&\n          (state.count++,\n          (state = onUnsuspend.bind(state)),\n          hoistableRoot.then(state, state));\n        resource.state.loading |= 4;\n        resource.instance = instance;\n        markNodeAsHoistable(instance);\n        return;\n      }\n      instance = hoistableRoot.ownerDocument || hoistableRoot;\n      props = stylesheetPropsFromRawProps(props);\n      (key = preloadPropsMap.get(key)) &&\n        adoptPreloadPropsForStylesheet(props, key);\n      instance = instance.createElement(\"link\");\n      markNodeAsHoistable(instance);\n      var linkInstance = instance;\n      linkInstance._p = new Promise(function (resolve, reject) {\n        linkInstance.onload = resolve;\n        linkInstance.onerror = reject;\n      });\n      setInitialProperties(instance, \"link\", props);\n      resource.instance = instance;\n    }\n    null === state.stylesheets && (state.stylesheets = new Map());\n    state.stylesheets.set(resource, hoistableRoot);\n    (hoistableRoot = resource.state.preload) &&\n      0 === (resource.state.loading & 3) &&\n      (state.count++,\n      (resource = onUnsuspend.bind(state)),\n      hoistableRoot.addEventListener(\"load\", resource),\n      hoistableRoot.addEventListener(\"error\", resource));\n  }\n}\nvar estimatedBytesWithinLimit = 0;\nfunction waitForCommitToBeReady(state, timeoutOffset) {\n  state.stylesheets &&\n    0 === state.count &&\n    insertSuspendedStylesheets(state, state.stylesheets);\n  return 0 < state.count || 0 < state.imgCount\n    ? function (commit) {\n        var stylesheetTimer = setTimeout(function () {\n          state.stylesheets &&\n            insertSuspendedStylesheets(state, state.stylesheets);\n          if (state.unsuspend) {\n            var unsuspend = state.unsuspend;\n            state.unsuspend = null;\n            unsuspend();\n          }\n        }, 6e4 + timeoutOffset);\n        0 < state.imgBytes &&\n          0 === estimatedBytesWithinLimit &&\n          (estimatedBytesWithinLimit = 62500 * estimateBandwidth());\n        var imgTimer = setTimeout(\n          function () {\n            state.waitingForImages = !1;\n            if (\n              0 === state.count &&\n              (state.stylesheets &&\n                insertSuspendedStylesheets(state, state.stylesheets),\n              state.unsuspend)\n            ) {\n              var unsuspend = state.unsuspend;\n              state.unsuspend = null;\n              unsuspend();\n            }\n          },\n          (state.imgBytes > estimatedBytesWithinLimit ? 50 : 800) +\n            timeoutOffset\n        );\n        state.unsuspend = commit;\n        return function () {\n          state.unsuspend = null;\n          clearTimeout(stylesheetTimer);\n          clearTimeout(imgTimer);\n        };\n      }\n    : null;\n}\nfunction onUnsuspend() {\n  this.count--;\n  if (0 === this.count && (0 === this.imgCount || !this.waitingForImages))\n    if (this.stylesheets) insertSuspendedStylesheets(this, this.stylesheets);\n    else if (this.unsuspend) {\n      var unsuspend = this.unsuspend;\n      this.unsuspend = null;\n      unsuspend();\n    }\n}\nvar precedencesByRoot = null;\nfunction insertSuspendedStylesheets(state, resources) {\n  state.stylesheets = null;\n  null !== state.unsuspend &&\n    (state.count++,\n    (precedencesByRoot = new Map()),\n    resources.forEach(insertStylesheetIntoRoot, state),\n    (precedencesByRoot = null),\n    onUnsuspend.call(state));\n}\nfunction insertStylesheetIntoRoot(root, resource) {\n  if (!(resource.state.loading & 4)) {\n    var precedences = precedencesByRoot.get(root);\n    if (precedences) var last = precedences.get(null);\n    else {\n      precedences = new Map();\n      precedencesByRoot.set(root, precedences);\n      for (\n        var nodes = root.querySelectorAll(\n            \"link[data-precedence],style[data-precedence]\"\n          ),\n          i = 0;\n        i < nodes.length;\n        i++\n      ) {\n        var node = nodes[i];\n        if (\n          \"LINK\" === node.nodeName ||\n          \"not all\" !== node.getAttribute(\"media\")\n        )\n          precedences.set(node.dataset.precedence, node), (last = node);\n      }\n      last && precedences.set(null, last);\n    }\n    nodes = resource.instance;\n    node = nodes.getAttribute(\"data-precedence\");\n    i = precedences.get(node) || last;\n    i === last && precedences.set(null, nodes);\n    precedences.set(node, nodes);\n    this.count++;\n    last = onUnsuspend.bind(this);\n    nodes.addEventListener(\"load\", last);\n    nodes.addEventListener(\"error\", last);\n    i\n      ? i.parentNode.insertBefore(nodes, i.nextSibling)\n      : ((root = 9 === root.nodeType ? root.head : root),\n        root.insertBefore(nodes, root.firstChild));\n    resource.state.loading |= 4;\n  }\n}\nvar HostTransitionContext = {\n  $$typeof: REACT_CONTEXT_TYPE,\n  Provider: null,\n  Consumer: null,\n  _currentValue: sharedNotPendingObject,\n  _currentValue2: sharedNotPendingObject,\n  _threadCount: 0\n};\nfunction FiberRootNode(\n  containerInfo,\n  tag,\n  hydrate,\n  identifierPrefix,\n  onUncaughtError,\n  onCaughtError,\n  onRecoverableError,\n  onDefaultTransitionIndicator,\n  formState\n) {\n  this.tag = 1;\n  this.containerInfo = containerInfo;\n  this.pingCache = this.current = this.pendingChildren = null;\n  this.timeoutHandle = -1;\n  this.callbackNode =\n    this.next =\n    this.pendingContext =\n    this.context =\n    this.cancelPendingCommit =\n      null;\n  this.callbackPriority = 0;\n  this.expirationTimes = createLaneMap(-1);\n  this.entangledLanes =\n    this.shellSuspendCounter =\n    this.errorRecoveryDisabledLanes =\n    this.expiredLanes =\n    this.warmLanes =\n    this.pingedLanes =\n    this.suspendedLanes =\n    this.pendingLanes =\n      0;\n  this.entanglements = createLaneMap(0);\n  this.hiddenUpdates = createLaneMap(null);\n  this.identifierPrefix = identifierPrefix;\n  this.onUncaughtError = onUncaughtError;\n  this.onCaughtError = onCaughtError;\n  this.onRecoverableError = onRecoverableError;\n  this.pooledCache = null;\n  this.pooledCacheLanes = 0;\n  this.formState = formState;\n  this.incompleteTransitions = new Map();\n}\nfunction createFiberRoot(\n  containerInfo,\n  tag,\n  hydrate,\n  initialChildren,\n  hydrationCallbacks,\n  isStrictMode,\n  identifierPrefix,\n  formState,\n  onUncaughtError,\n  onCaughtError,\n  onRecoverableError,\n  onDefaultTransitionIndicator\n) {\n  containerInfo = new FiberRootNode(\n    containerInfo,\n    tag,\n    hydrate,\n    identifierPrefix,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    onDefaultTransitionIndicator,\n    formState\n  );\n  tag = 1;\n  !0 === isStrictMode && (tag |= 24);\n  isStrictMode = createFiberImplClass(3, null, null, tag);\n  containerInfo.current = isStrictMode;\n  isStrictMode.stateNode = containerInfo;\n  tag = createCache();\n  tag.refCount++;\n  containerInfo.pooledCache = tag;\n  tag.refCount++;\n  isStrictMode.memoizedState = {\n    element: initialChildren,\n    isDehydrated: hydrate,\n    cache: tag\n  };\n  initializeUpdateQueue(isStrictMode);\n  return containerInfo;\n}\nfunction getContextForSubtree(parentComponent) {\n  if (!parentComponent) return emptyContextObject;\n  parentComponent = emptyContextObject;\n  return parentComponent;\n}\nfunction updateContainerImpl(\n  rootFiber,\n  lane,\n  element,\n  container,\n  parentComponent,\n  callback\n) {\n  parentComponent = getContextForSubtree(parentComponent);\n  null === container.context\n    ? (container.context = parentComponent)\n    : (container.pendingContext = parentComponent);\n  container = createUpdate(lane);\n  container.payload = { element: element };\n  callback = void 0 === callback ? null : callback;\n  null !== callback && (container.callback = callback);\n  element = enqueueUpdate(rootFiber, container, lane);\n  null !== element &&\n    (scheduleUpdateOnFiber(element, rootFiber, lane),\n    entangleTransitions(element, rootFiber, lane));\n}\nfunction markRetryLaneImpl(fiber, retryLane) {\n  fiber = fiber.memoizedState;\n  if (null !== fiber && null !== fiber.dehydrated) {\n    var a = fiber.retryLane;\n    fiber.retryLane = 0 !== a && a < retryLane ? a : retryLane;\n  }\n}\nfunction markRetryLaneIfNotHydrated(fiber, retryLane) {\n  markRetryLaneImpl(fiber, retryLane);\n  (fiber = fiber.alternate) && markRetryLaneImpl(fiber, retryLane);\n}\nfunction attemptContinuousHydration(fiber) {\n  if (13 === fiber.tag || 31 === fiber.tag) {\n    var root = enqueueConcurrentRenderForLane(fiber, 67108864);\n    null !== root && scheduleUpdateOnFiber(root, fiber, 67108864);\n    markRetryLaneIfNotHydrated(fiber, 67108864);\n  }\n}\nfunction attemptHydrationAtCurrentPriority(fiber) {\n  if (13 === fiber.tag || 31 === fiber.tag) {\n    var lane = requestUpdateLane();\n    lane = getBumpedLaneForHydrationByLane(lane);\n    var root = enqueueConcurrentRenderForLane(fiber, lane);\n    null !== root && scheduleUpdateOnFiber(root, fiber, lane);\n    markRetryLaneIfNotHydrated(fiber, lane);\n  }\n}\nvar _enabled = !0;\nfunction dispatchDiscreteEvent(\n  domEventName,\n  eventSystemFlags,\n  container,\n  nativeEvent\n) {\n  var prevTransition = ReactSharedInternals.T;\n  ReactSharedInternals.T = null;\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    (ReactDOMSharedInternals.p = 2),\n      dispatchEvent(domEventName, eventSystemFlags, container, nativeEvent);\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction dispatchContinuousEvent(\n  domEventName,\n  eventSystemFlags,\n  container,\n  nativeEvent\n) {\n  var prevTransition = ReactSharedInternals.T;\n  ReactSharedInternals.T = null;\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    (ReactDOMSharedInternals.p = 8),\n      dispatchEvent(domEventName, eventSystemFlags, container, nativeEvent);\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction dispatchEvent(\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  if (_enabled) {\n    var blockedOn = findInstanceBlockingEvent(nativeEvent);\n    if (null === blockedOn)\n      dispatchEventForPluginEventSystem(\n        domEventName,\n        eventSystemFlags,\n        nativeEvent,\n        return_targetInst,\n        targetContainer\n      ),\n        clearIfContinuousEvent(domEventName, nativeEvent);\n    else if (\n      queueIfContinuousEvent(\n        blockedOn,\n        domEventName,\n        eventSystemFlags,\n        targetContainer,\n        nativeEvent\n      )\n    )\n      nativeEvent.stopPropagation();\n    else if (\n      (clearIfContinuousEvent(domEventName, nativeEvent),\n      eventSystemFlags & 4 &&\n        -1 < discreteReplayableEvents.indexOf(domEventName))\n    ) {\n      for (; null !== blockedOn; ) {\n        var fiber = getInstanceFromNode(blockedOn);\n        if (null !== fiber)\n          switch (fiber.tag) {\n            case 3:\n              fiber = fiber.stateNode;\n              if (fiber.current.memoizedState.isDehydrated) {\n                var lanes = getHighestPriorityLanes(fiber.pendingLanes);\n                if (0 !== lanes) {\n                  var root = fiber;\n                  root.pendingLanes |= 2;\n                  for (root.entangledLanes |= 2; lanes; ) {\n                    var lane = 1 << (31 - clz32(lanes));\n                    root.entanglements[1] |= lane;\n                    lanes &= ~lane;\n                  }\n                  ensureRootIsScheduled(fiber);\n                  0 === (executionContext & 6) &&\n                    ((workInProgressRootRenderTargetTime = now() + 500),\n                    flushSyncWorkAcrossRoots_impl(0, !1));\n                }\n              }\n              break;\n            case 31:\n            case 13:\n              (root = enqueueConcurrentRenderForLane(fiber, 2)),\n                null !== root && scheduleUpdateOnFiber(root, fiber, 2),\n                flushSyncWork$1(),\n                markRetryLaneIfNotHydrated(fiber, 2);\n          }\n        fiber = findInstanceBlockingEvent(nativeEvent);\n        null === fiber &&\n          dispatchEventForPluginEventSystem(\n            domEventName,\n            eventSystemFlags,\n            nativeEvent,\n            return_targetInst,\n            targetContainer\n          );\n        if (fiber === blockedOn) break;\n        blockedOn = fiber;\n      }\n      null !== blockedOn && nativeEvent.stopPropagation();\n    } else\n      dispatchEventForPluginEventSystem(\n        domEventName,\n        eventSystemFlags,\n        nativeEvent,\n        null,\n        targetContainer\n      );\n  }\n}\nfunction findInstanceBlockingEvent(nativeEvent) {\n  nativeEvent = getEventTarget(nativeEvent);\n  return findInstanceBlockingTarget(nativeEvent);\n}\nvar return_targetInst = null;\nfunction findInstanceBlockingTarget(targetNode) {\n  return_targetInst = null;\n  targetNode = getClosestInstanceFromNode(targetNode);\n  if (null !== targetNode) {\n    var nearestMounted = getNearestMountedFiber(targetNode);\n    if (null === nearestMounted) targetNode = null;\n    else {\n      var tag = nearestMounted.tag;\n      if (13 === tag) {\n        targetNode = getSuspenseInstanceFromFiber(nearestMounted);\n        if (null !== targetNode) return targetNode;\n        targetNode = null;\n      } else if (31 === tag) {\n        targetNode = getActivityInstanceFromFiber(nearestMounted);\n        if (null !== targetNode) return targetNode;\n        targetNode = null;\n      } else if (3 === tag) {\n        if (nearestMounted.stateNode.current.memoizedState.isDehydrated)\n          return 3 === nearestMounted.tag\n            ? nearestMounted.stateNode.containerInfo\n            : null;\n        targetNode = null;\n      } else nearestMounted !== targetNode && (targetNode = null);\n    }\n  }\n  return_targetInst = targetNode;\n  return null;\n}\nfunction getEventPriority(domEventName) {\n  switch (domEventName) {\n    case \"beforetoggle\":\n    case \"cancel\":\n    case \"click\":\n    case \"close\":\n    case \"contextmenu\":\n    case \"copy\":\n    case \"cut\":\n    case \"auxclick\":\n    case \"dblclick\":\n    case \"dragend\":\n    case \"dragstart\":\n    case \"drop\":\n    case \"focusin\":\n    case \"focusout\":\n    case \"input\":\n    case \"invalid\":\n    case \"keydown\":\n    case \"keypress\":\n    case \"keyup\":\n    case \"mousedown\":\n    case \"mouseup\":\n    case \"paste\":\n    case \"pause\":\n    case \"play\":\n    case \"pointercancel\":\n    case \"pointerdown\":\n    case \"pointerup\":\n    case \"ratechange\":\n    case \"reset\":\n    case \"resize\":\n    case \"seeked\":\n    case \"submit\":\n    case \"toggle\":\n    case \"touchcancel\":\n    case \"touchend\":\n    case \"touchstart\":\n    case \"volumechange\":\n    case \"change\":\n    case \"selectionchange\":\n    case \"textInput\":\n    case \"compositionstart\":\n    case \"compositionend\":\n    case \"compositionupdate\":\n    case \"beforeblur\":\n    case \"afterblur\":\n    case \"beforeinput\":\n    case \"blur\":\n    case \"fullscreenchange\":\n    case \"focus\":\n    case \"hashchange\":\n    case \"popstate\":\n    case \"select\":\n    case \"selectstart\":\n      return 2;\n    case \"drag\":\n    case \"dragenter\":\n    case \"dragexit\":\n    case \"dragleave\":\n    case \"dragover\":\n    case \"mousemove\":\n    case \"mouseout\":\n    case \"mouseover\":\n    case \"pointermove\":\n    case \"pointerout\":\n    case \"pointerover\":\n    case \"scroll\":\n    case \"touchmove\":\n    case \"wheel\":\n    case \"mouseenter\":\n    case \"mouseleave\":\n    case \"pointerenter\":\n    case \"pointerleave\":\n      return 8;\n    case \"message\":\n      switch (getCurrentPriorityLevel()) {\n        case ImmediatePriority:\n          return 2;\n        case UserBlockingPriority:\n          return 8;\n        case NormalPriority$1:\n        case LowPriority:\n          return 32;\n        case IdlePriority:\n          return 268435456;\n        default:\n          return 32;\n      }\n    default:\n      return 32;\n  }\n}\nvar hasScheduledReplayAttempt = !1,\n  queuedFocus = null,\n  queuedDrag = null,\n  queuedMouse = null,\n  queuedPointers = new Map(),\n  queuedPointerCaptures = new Map(),\n  queuedExplicitHydrationTargets = [],\n  discreteReplayableEvents =\n    \"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset\".split(\n      \" \"\n    );\nfunction clearIfContinuousEvent(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"focusin\":\n    case \"focusout\":\n      queuedFocus = null;\n      break;\n    case \"dragenter\":\n    case \"dragleave\":\n      queuedDrag = null;\n      break;\n    case \"mouseover\":\n    case \"mouseout\":\n      queuedMouse = null;\n      break;\n    case \"pointerover\":\n    case \"pointerout\":\n      queuedPointers.delete(nativeEvent.pointerId);\n      break;\n    case \"gotpointercapture\":\n    case \"lostpointercapture\":\n      queuedPointerCaptures.delete(nativeEvent.pointerId);\n  }\n}\nfunction accumulateOrCreateContinuousQueuedReplayableEvent(\n  existingQueuedEvent,\n  blockedOn,\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  if (\n    null === existingQueuedEvent ||\n    existingQueuedEvent.nativeEvent !== nativeEvent\n  )\n    return (\n      (existingQueuedEvent = {\n        blockedOn: blockedOn,\n        domEventName: domEventName,\n        eventSystemFlags: eventSystemFlags,\n        nativeEvent: nativeEvent,\n        targetContainers: [targetContainer]\n      }),\n      null !== blockedOn &&\n        ((blockedOn = getInstanceFromNode(blockedOn)),\n        null !== blockedOn && attemptContinuousHydration(blockedOn)),\n      existingQueuedEvent\n    );\n  existingQueuedEvent.eventSystemFlags |= eventSystemFlags;\n  blockedOn = existingQueuedEvent.targetContainers;\n  null !== targetContainer &&\n    -1 === blockedOn.indexOf(targetContainer) &&\n    blockedOn.push(targetContainer);\n  return existingQueuedEvent;\n}\nfunction queueIfContinuousEvent(\n  blockedOn,\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  switch (domEventName) {\n    case \"focusin\":\n      return (\n        (queuedFocus = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedFocus,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"dragenter\":\n      return (\n        (queuedDrag = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedDrag,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"mouseover\":\n      return (\n        (queuedMouse = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedMouse,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"pointerover\":\n      var pointerId = nativeEvent.pointerId;\n      queuedPointers.set(\n        pointerId,\n        accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedPointers.get(pointerId) || null,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )\n      );\n      return !0;\n    case \"gotpointercapture\":\n      return (\n        (pointerId = nativeEvent.pointerId),\n        queuedPointerCaptures.set(\n          pointerId,\n          accumulateOrCreateContinuousQueuedReplayableEvent(\n            queuedPointerCaptures.get(pointerId) || null,\n            blockedOn,\n            domEventName,\n            eventSystemFlags,\n            targetContainer,\n            nativeEvent\n          )\n        ),\n        !0\n      );\n  }\n  return !1;\n}\nfunction attemptExplicitHydrationTarget(queuedTarget) {\n  var targetInst = getClosestInstanceFromNode(queuedTarget.target);\n  if (null !== targetInst) {\n    var nearestMounted = getNearestMountedFiber(targetInst);\n    if (null !== nearestMounted)\n      if (((targetInst = nearestMounted.tag), 13 === targetInst)) {\n        if (\n          ((targetInst = getSuspenseInstanceFromFiber(nearestMounted)),\n          null !== targetInst)\n        ) {\n          queuedTarget.blockedOn = targetInst;\n          runWithPriority(queuedTarget.priority, function () {\n            attemptHydrationAtCurrentPriority(nearestMounted);\n          });\n          return;\n        }\n      } else if (31 === targetInst) {\n        if (\n          ((targetInst = getActivityInstanceFromFiber(nearestMounted)),\n          null !== targetInst)\n        ) {\n          queuedTarget.blockedOn = targetInst;\n          runWithPriority(queuedTarget.priority, function () {\n            attemptHydrationAtCurrentPriority(nearestMounted);\n          });\n          return;\n        }\n      } else if (\n        3 === targetInst &&\n        nearestMounted.stateNode.current.memoizedState.isDehydrated\n      ) {\n        queuedTarget.blockedOn =\n          3 === nearestMounted.tag\n            ? nearestMounted.stateNode.containerInfo\n            : null;\n        return;\n      }\n  }\n  queuedTarget.blockedOn = null;\n}\nfunction attemptReplayContinuousQueuedEvent(queuedEvent) {\n  if (null !== queuedEvent.blockedOn) return !1;\n  for (\n    var targetContainers = queuedEvent.targetContainers;\n    0 < targetContainers.length;\n\n  ) {\n    var nextBlockedOn = findInstanceBlockingEvent(queuedEvent.nativeEvent);\n    if (null === nextBlockedOn) {\n      nextBlockedOn = queuedEvent.nativeEvent;\n      var nativeEventClone = new nextBlockedOn.constructor(\n        nextBlockedOn.type,\n        nextBlockedOn\n      );\n      currentReplayingEvent = nativeEventClone;\n      nextBlockedOn.target.dispatchEvent(nativeEventClone);\n      currentReplayingEvent = null;\n    } else\n      return (\n        (targetContainers = getInstanceFromNode(nextBlockedOn)),\n        null !== targetContainers &&\n          attemptContinuousHydration(targetContainers),\n        (queuedEvent.blockedOn = nextBlockedOn),\n        !1\n      );\n    targetContainers.shift();\n  }\n  return !0;\n}\nfunction attemptReplayContinuousQueuedEventInMap(queuedEvent, key, map) {\n  attemptReplayContinuousQueuedEvent(queuedEvent) && map.delete(key);\n}\nfunction replayUnblockedEvents() {\n  hasScheduledReplayAttempt = !1;\n  null !== queuedFocus &&\n    attemptReplayContinuousQueuedEvent(queuedFocus) &&\n    (queuedFocus = null);\n  null !== queuedDrag &&\n    attemptReplayContinuousQueuedEvent(queuedDrag) &&\n    (queuedDrag = null);\n  null !== queuedMouse &&\n    attemptReplayContinuousQueuedEvent(queuedMouse) &&\n    (queuedMouse = null);\n  queuedPointers.forEach(attemptReplayContinuousQueuedEventInMap);\n  queuedPointerCaptures.forEach(attemptReplayContinuousQueuedEventInMap);\n}\nfunction scheduleCallbackIfUnblocked(queuedEvent, unblocked) {\n  queuedEvent.blockedOn === unblocked &&\n    ((queuedEvent.blockedOn = null),\n    hasScheduledReplayAttempt ||\n      ((hasScheduledReplayAttempt = !0),\n      Scheduler.unstable_scheduleCallback(\n        Scheduler.unstable_NormalPriority,\n        replayUnblockedEvents\n      )));\n}\nvar lastScheduledReplayQueue = null;\nfunction scheduleReplayQueueIfNeeded(formReplayingQueue) {\n  lastScheduledReplayQueue !== formReplayingQueue &&\n    ((lastScheduledReplayQueue = formReplayingQueue),\n    Scheduler.unstable_scheduleCallback(\n      Scheduler.unstable_NormalPriority,\n      function () {\n        lastScheduledReplayQueue === formReplayingQueue &&\n          (lastScheduledReplayQueue = null);\n        for (var i = 0; i < formReplayingQueue.length; i += 3) {\n          var form = formReplayingQueue[i],\n            submitterOrAction = formReplayingQueue[i + 1],\n            formData = formReplayingQueue[i + 2];\n          if (\"function\" !== typeof submitterOrAction)\n            if (null === findInstanceBlockingTarget(submitterOrAction || form))\n              continue;\n            else break;\n          var formInst = getInstanceFromNode(form);\n          null !== formInst &&\n            (formReplayingQueue.splice(i, 3),\n            (i -= 3),\n            startHostTransition(\n              formInst,\n              {\n                pending: !0,\n                data: formData,\n                method: form.method,\n                action: submitterOrAction\n              },\n              submitterOrAction,\n              formData\n            ));\n        }\n      }\n    ));\n}\nfunction retryIfBlockedOn(unblocked) {\n  function unblock(queuedEvent) {\n    return scheduleCallbackIfUnblocked(queuedEvent, unblocked);\n  }\n  null !== queuedFocus && scheduleCallbackIfUnblocked(queuedFocus, unblocked);\n  null !== queuedDrag && scheduleCallbackIfUnblocked(queuedDrag, unblocked);\n  null !== queuedMouse && scheduleCallbackIfUnblocked(queuedMouse, unblocked);\n  queuedPointers.forEach(unblock);\n  queuedPointerCaptures.forEach(unblock);\n  for (var i = 0; i < queuedExplicitHydrationTargets.length; i++) {\n    var queuedTarget = queuedExplicitHydrationTargets[i];\n    queuedTarget.blockedOn === unblocked && (queuedTarget.blockedOn = null);\n  }\n  for (\n    ;\n    0 < queuedExplicitHydrationTargets.length &&\n    ((i = queuedExplicitHydrationTargets[0]), null === i.blockedOn);\n\n  )\n    attemptExplicitHydrationTarget(i),\n      null === i.blockedOn && queuedExplicitHydrationTargets.shift();\n  i = (unblocked.ownerDocument || unblocked).$$reactFormReplay;\n  if (null != i)\n    for (queuedTarget = 0; queuedTarget < i.length; queuedTarget += 3) {\n      var form = i[queuedTarget],\n        submitterOrAction = i[queuedTarget + 1],\n        formProps = form[internalPropsKey] || null;\n      if (\"function\" === typeof submitterOrAction)\n        formProps || scheduleReplayQueueIfNeeded(i);\n      else if (formProps) {\n        var action = null;\n        if (submitterOrAction && submitterOrAction.hasAttribute(\"formAction\"))\n          if (\n            ((form = submitterOrAction),\n            (formProps = submitterOrAction[internalPropsKey] || null))\n          )\n            action = formProps.formAction;\n          else {\n            if (null !== findInstanceBlockingTarget(form)) continue;\n          }\n        else action = formProps.action;\n        \"function\" === typeof action\n          ? (i[queuedTarget + 1] = action)\n          : (i.splice(queuedTarget, 3), (queuedTarget -= 3));\n        scheduleReplayQueueIfNeeded(i);\n      }\n    }\n}\nfunction defaultOnDefaultTransitionIndicator() {\n  function handleNavigate(event) {\n    event.canIntercept &&\n      \"react-transition\" === event.info &&\n      event.intercept({\n        handler: function () {\n          return new Promise(function (resolve) {\n            return (pendingResolve = resolve);\n          });\n        },\n        focusReset: \"manual\",\n        scroll: \"manual\"\n      });\n  }\n  function handleNavigateComplete() {\n    null !== pendingResolve && (pendingResolve(), (pendingResolve = null));\n    isCancelled || setTimeout(startFakeNavigation, 20);\n  }\n  function startFakeNavigation() {\n    if (!isCancelled && !navigation.transition) {\n      var currentEntry = navigation.currentEntry;\n      currentEntry &&\n        null != currentEntry.url &&\n        navigation.navigate(currentEntry.url, {\n          state: currentEntry.getState(),\n          info: \"react-transition\",\n          history: \"replace\"\n        });\n    }\n  }\n  if (\"object\" === typeof navigation) {\n    var isCancelled = !1,\n      pendingResolve = null;\n    navigation.addEventListener(\"navigate\", handleNavigate);\n    navigation.addEventListener(\"navigatesuccess\", handleNavigateComplete);\n    navigation.addEventListener(\"navigateerror\", handleNavigateComplete);\n    setTimeout(startFakeNavigation, 100);\n    return function () {\n      isCancelled = !0;\n      navigation.removeEventListener(\"navigate\", handleNavigate);\n      navigation.removeEventListener(\"navigatesuccess\", handleNavigateComplete);\n      navigation.removeEventListener(\"navigateerror\", handleNavigateComplete);\n      null !== pendingResolve && (pendingResolve(), (pendingResolve = null));\n    };\n  }\n}\nfunction ReactDOMRoot(internalRoot) {\n  this._internalRoot = internalRoot;\n}\nReactDOMHydrationRoot.prototype.render = ReactDOMRoot.prototype.render =\n  function (children) {\n    var root = this._internalRoot;\n    if (null === root) throw Error(formatProdErrorMessage(409));\n    var current = root.current,\n      lane = requestUpdateLane();\n    updateContainerImpl(current, lane, children, root, null, null);\n  };\nReactDOMHydrationRoot.prototype.unmount = ReactDOMRoot.prototype.unmount =\n  function () {\n    var root = this._internalRoot;\n    if (null !== root) {\n      this._internalRoot = null;\n      var container = root.containerInfo;\n      updateContainerImpl(root.current, 2, null, root, null, null);\n      flushSyncWork$1();\n      container[internalContainerInstanceKey] = null;\n    }\n  };\nfunction ReactDOMHydrationRoot(internalRoot) {\n  this._internalRoot = internalRoot;\n}\nReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n  if (target) {\n    var updatePriority = resolveUpdatePriority();\n    target = { blockedOn: null, target: target, priority: updatePriority };\n    for (\n      var i = 0;\n      i < queuedExplicitHydrationTargets.length &&\n      0 !== updatePriority &&\n      updatePriority < queuedExplicitHydrationTargets[i].priority;\n      i++\n    );\n    queuedExplicitHydrationTargets.splice(i, 0, target);\n    0 === i && attemptExplicitHydrationTarget(target);\n  }\n};\nvar isomorphicReactPackageVersion$jscomp$inline_1840 = React.version;\nif (\n  \"19.2.4\" !==\n  isomorphicReactPackageVersion$jscomp$inline_1840\n)\n  throw Error(\n    formatProdErrorMessage(\n      527,\n      isomorphicReactPackageVersion$jscomp$inline_1840,\n      \"19.2.4\"\n    )\n  );\nReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n  var fiber = componentOrElement._reactInternals;\n  if (void 0 === fiber) {\n    if (\"function\" === typeof componentOrElement.render)\n      throw Error(formatProdErrorMessage(188));\n    componentOrElement = Object.keys(componentOrElement).join(\",\");\n    throw Error(formatProdErrorMessage(268, componentOrElement));\n  }\n  componentOrElement = findCurrentFiberUsingSlowPath(fiber);\n  componentOrElement =\n    null !== componentOrElement\n      ? findCurrentHostFiberImpl(componentOrElement)\n      : null;\n  componentOrElement =\n    null === componentOrElement ? null : componentOrElement.stateNode;\n  return componentOrElement;\n};\nvar internals$jscomp$inline_2347 = {\n  bundleType: 0,\n  version: \"19.2.4\",\n  rendererPackageName: \"react-dom\",\n  currentDispatcherRef: ReactSharedInternals,\n  reconcilerVersion: \"19.2.4\"\n};\nif (\"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {\n  var hook$jscomp$inline_2348 = __REACT_DEVTOOLS_GLOBAL_HOOK__;\n  if (\n    !hook$jscomp$inline_2348.isDisabled &&\n    hook$jscomp$inline_2348.supportsFiber\n  )\n    try {\n      (rendererID = hook$jscomp$inline_2348.inject(\n        internals$jscomp$inline_2347\n      )),\n        (injectedHook = hook$jscomp$inline_2348);\n    } catch (err) {}\n}\nexports.createRoot = function (container, options) {\n  if (!isValidContainer(container)) throw Error(formatProdErrorMessage(299));\n  var isStrictMode = !1,\n    identifierPrefix = \"\",\n    onUncaughtError = defaultOnUncaughtError,\n    onCaughtError = defaultOnCaughtError,\n    onRecoverableError = defaultOnRecoverableError;\n  null !== options &&\n    void 0 !== options &&\n    (!0 === options.unstable_strictMode && (isStrictMode = !0),\n    void 0 !== options.identifierPrefix &&\n      (identifierPrefix = options.identifierPrefix),\n    void 0 !== options.onUncaughtError &&\n      (onUncaughtError = options.onUncaughtError),\n    void 0 !== options.onCaughtError && (onCaughtError = options.onCaughtError),\n    void 0 !== options.onRecoverableError &&\n      (onRecoverableError = options.onRecoverableError));\n  options = createFiberRoot(\n    container,\n    1,\n    !1,\n    null,\n    null,\n    isStrictMode,\n    identifierPrefix,\n    null,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    defaultOnDefaultTransitionIndicator\n  );\n  container[internalContainerInstanceKey] = options.current;\n  listenToAllSupportedEvents(container);\n  return new ReactDOMRoot(options);\n};\nexports.hydrateRoot = function (container, initialChildren, options) {\n  if (!isValidContainer(container)) throw Error(formatProdErrorMessage(299));\n  var isStrictMode = !1,\n    identifierPrefix = \"\",\n    onUncaughtError = defaultOnUncaughtError,\n    onCaughtError = defaultOnCaughtError,\n    onRecoverableError = defaultOnRecoverableError,\n    formState = null;\n  null !== options &&\n    void 0 !== options &&\n    (!0 === options.unstable_strictMode && (isStrictMode = !0),\n    void 0 !== options.identifierPrefix &&\n      (identifierPrefix = options.identifierPrefix),\n    void 0 !== options.onUncaughtError &&\n      (onUncaughtError = options.onUncaughtError),\n    void 0 !== options.onCaughtError && (onCaughtError = options.onCaughtError),\n    void 0 !== options.onRecoverableError &&\n      (onRecoverableError = options.onRecoverableError),\n    void 0 !== options.formState && (formState = options.formState));\n  initialChildren = createFiberRoot(\n    container,\n    1,\n    !0,\n    initialChildren,\n    null != options ? options : null,\n    isStrictMode,\n    identifierPrefix,\n    formState,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    defaultOnDefaultTransitionIndicator\n  );\n  initialChildren.context = getContextForSubtree(null);\n  options = initialChildren.current;\n  isStrictMode = requestUpdateLane();\n  isStrictMode = getBumpedLaneForHydrationByLane(isStrictMode);\n  identifierPrefix = createUpdate(isStrictMode);\n  identifierPrefix.callback = null;\n  enqueueUpdate(options, identifierPrefix, isStrictMode);\n  options = isStrictMode;\n  initialChildren.current.lanes = options;\n  markRootUpdated$1(initialChildren, options);\n  ensureRootIsScheduled(initialChildren);\n  container[internalContainerInstanceKey] = initialChildren.current;\n  listenToAllSupportedEvents(container);\n  return new ReactDOMHydrationRoot(initialChildren);\n};\nexports.version = \"19.2.4\";\n","/**\n * @license React\n * react-dom.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction formatProdErrorMessage(code) {\n  var url = \"https://react.dev/errors/\" + code;\n  if (1 < arguments.length) {\n    url += \"?args[]=\" + encodeURIComponent(arguments[1]);\n    for (var i = 2; i < arguments.length; i++)\n      url += \"&args[]=\" + encodeURIComponent(arguments[i]);\n  }\n  return (\n    \"Minified React error #\" +\n    code +\n    \"; visit \" +\n    url +\n    \" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"\n  );\n}\nfunction noop() {}\nvar Internals = {\n    d: {\n      f: noop,\n      r: function () {\n        throw Error(formatProdErrorMessage(522));\n      },\n      D: noop,\n      C: noop,\n      L: noop,\n      m: noop,\n      X: noop,\n      S: noop,\n      M: noop\n    },\n    p: 0,\n    findDOMNode: null\n  },\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\");\nfunction createPortal$1(children, containerInfo, implementation) {\n  var key =\n    3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;\n  return {\n    $$typeof: REACT_PORTAL_TYPE,\n    key: null == key ? null : \"\" + key,\n    children: children,\n    containerInfo: containerInfo,\n    implementation: implementation\n  };\n}\nvar ReactSharedInternals =\n  React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;\nfunction getCrossOriginStringAs(as, input) {\n  if (\"font\" === as) return \"\";\n  if (\"string\" === typeof input)\n    return \"use-credentials\" === input ? input : \"\";\n}\nexports.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =\n  Internals;\nexports.createPortal = function (children, container) {\n  var key =\n    2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;\n  if (\n    !container ||\n    (1 !== container.nodeType &&\n      9 !== container.nodeType &&\n      11 !== container.nodeType)\n  )\n    throw Error(formatProdErrorMessage(299));\n  return createPortal$1(children, container, null, key);\n};\nexports.flushSync = function (fn) {\n  var previousTransition = ReactSharedInternals.T,\n    previousUpdatePriority = Internals.p;\n  try {\n    if (((ReactSharedInternals.T = null), (Internals.p = 2), fn)) return fn();\n  } finally {\n    (ReactSharedInternals.T = previousTransition),\n      (Internals.p = previousUpdatePriority),\n      Internals.d.f();\n  }\n};\nexports.preconnect = function (href, options) {\n  \"string\" === typeof href &&\n    (options\n      ? ((options = options.crossOrigin),\n        (options =\n          \"string\" === typeof options\n            ? \"use-credentials\" === options\n              ? options\n              : \"\"\n            : void 0))\n      : (options = null),\n    Internals.d.C(href, options));\n};\nexports.prefetchDNS = function (href) {\n  \"string\" === typeof href && Internals.d.D(href);\n};\nexports.preinit = function (href, options) {\n  if (\"string\" === typeof href && options && \"string\" === typeof options.as) {\n    var as = options.as,\n      crossOrigin = getCrossOriginStringAs(as, options.crossOrigin),\n      integrity =\n        \"string\" === typeof options.integrity ? options.integrity : void 0,\n      fetchPriority =\n        \"string\" === typeof options.fetchPriority\n          ? options.fetchPriority\n          : void 0;\n    \"style\" === as\n      ? Internals.d.S(\n          href,\n          \"string\" === typeof options.precedence ? options.precedence : void 0,\n          {\n            crossOrigin: crossOrigin,\n            integrity: integrity,\n            fetchPriority: fetchPriority\n          }\n        )\n      : \"script\" === as &&\n        Internals.d.X(href, {\n          crossOrigin: crossOrigin,\n          integrity: integrity,\n          fetchPriority: fetchPriority,\n          nonce: \"string\" === typeof options.nonce ? options.nonce : void 0\n        });\n  }\n};\nexports.preinitModule = function (href, options) {\n  if (\"string\" === typeof href)\n    if (\"object\" === typeof options && null !== options) {\n      if (null == options.as || \"script\" === options.as) {\n        var crossOrigin = getCrossOriginStringAs(\n          options.as,\n          options.crossOrigin\n        );\n        Internals.d.M(href, {\n          crossOrigin: crossOrigin,\n          integrity:\n            \"string\" === typeof options.integrity ? options.integrity : void 0,\n          nonce: \"string\" === typeof options.nonce ? options.nonce : void 0\n        });\n      }\n    } else null == options && Internals.d.M(href);\n};\nexports.preload = function (href, options) {\n  if (\n    \"string\" === typeof href &&\n    \"object\" === typeof options &&\n    null !== options &&\n    \"string\" === typeof options.as\n  ) {\n    var as = options.as,\n      crossOrigin = getCrossOriginStringAs(as, options.crossOrigin);\n    Internals.d.L(href, as, {\n      crossOrigin: crossOrigin,\n      integrity:\n        \"string\" === typeof options.integrity ? options.integrity : void 0,\n      nonce: \"string\" === typeof options.nonce ? options.nonce : void 0,\n      type: \"string\" === typeof options.type ? options.type : void 0,\n      fetchPriority:\n        \"string\" === typeof options.fetchPriority\n          ? options.fetchPriority\n          : void 0,\n      referrerPolicy:\n        \"string\" === typeof options.referrerPolicy\n          ? options.referrerPolicy\n          : void 0,\n      imageSrcSet:\n        \"string\" === typeof options.imageSrcSet ? options.imageSrcSet : void 0,\n      imageSizes:\n        \"string\" === typeof options.imageSizes ? options.imageSizes : void 0,\n      media: \"string\" === typeof options.media ? options.media : void 0\n    });\n  }\n};\nexports.preloadModule = function (href, options) {\n  if (\"string\" === typeof href)\n    if (options) {\n      var crossOrigin = getCrossOriginStringAs(options.as, options.crossOrigin);\n      Internals.d.m(href, {\n        as:\n          \"string\" === typeof options.as && \"script\" !== options.as\n            ? options.as\n            : void 0,\n        crossOrigin: crossOrigin,\n        integrity:\n          \"string\" === typeof options.integrity ? options.integrity : void 0\n      });\n    } else Internals.d.m(href);\n};\nexports.requestFormReset = function (form) {\n  Internals.d.r(form);\n};\nexports.unstable_batchedUpdates = function (fn, a) {\n  return fn(a);\n};\nexports.useFormState = function (action, initialState, permalink) {\n  return ReactSharedInternals.H.useFormState(action, initialState, permalink);\n};\nexports.useFormStatus = function () {\n  return ReactSharedInternals.H.useHostTransitionStatus();\n};\nexports.version = \"19.2.4\";\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom-client.production.js');\n} else {\n  module.exports = require('./cjs/react-dom-client.development.js');\n}\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\");\nfunction jsxProd(type, config, maybeKey) {\n  var key = null;\n  void 0 !== maybeKey && (key = \"\" + maybeKey);\n  void 0 !== config.key && (key = \"\" + config.key);\n  if (\"key\" in config) {\n    maybeKey = {};\n    for (var propName in config)\n      \"key\" !== propName && (maybeKey[propName] = config[propName]);\n  } else maybeKey = config;\n  config = maybeKey.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== config ? config : null,\n    props: maybeKey\n  };\n}\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsxProd;\nexports.jsxs = jsxProd;\n","/**\n * @license React\n * react.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n  REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n  REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n  REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n  REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n  REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n  REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n  REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n  REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n  REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n  MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nfunction getIteratorFn(maybeIterable) {\n  if (null === maybeIterable || \"object\" !== typeof maybeIterable) return null;\n  maybeIterable =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[\"@@iterator\"];\n  return \"function\" === typeof maybeIterable ? maybeIterable : null;\n}\nvar ReactNoopUpdateQueue = {\n    isMounted: function () {\n      return !1;\n    },\n    enqueueForceUpdate: function () {},\n    enqueueReplaceState: function () {},\n    enqueueSetState: function () {}\n  },\n  assign = Object.assign,\n  emptyObject = {};\nfunction Component(props, context, updater) {\n  this.props = props;\n  this.context = context;\n  this.refs = emptyObject;\n  this.updater = updater || ReactNoopUpdateQueue;\n}\nComponent.prototype.isReactComponent = {};\nComponent.prototype.setState = function (partialState, callback) {\n  if (\n    \"object\" !== typeof partialState &&\n    \"function\" !== typeof partialState &&\n    null != partialState\n  )\n    throw Error(\n      \"takes an object of state variables to update or a function which returns an object of state variables.\"\n    );\n  this.updater.enqueueSetState(this, partialState, callback, \"setState\");\n};\nComponent.prototype.forceUpdate = function (callback) {\n  this.updater.enqueueForceUpdate(this, callback, \"forceUpdate\");\n};\nfunction ComponentDummy() {}\nComponentDummy.prototype = Component.prototype;\nfunction PureComponent(props, context, updater) {\n  this.props = props;\n  this.context = context;\n  this.refs = emptyObject;\n  this.updater = updater || ReactNoopUpdateQueue;\n}\nvar pureComponentPrototype = (PureComponent.prototype = new ComponentDummy());\npureComponentPrototype.constructor = PureComponent;\nassign(pureComponentPrototype, Component.prototype);\npureComponentPrototype.isPureReactComponent = !0;\nvar isArrayImpl = Array.isArray;\nfunction noop() {}\nvar ReactSharedInternals = { H: null, A: null, T: null, S: null },\n  hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction ReactElement(type, key, props) {\n  var refProp = props.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== refProp ? refProp : null,\n    props: props\n  };\n}\nfunction cloneAndReplaceKey(oldElement, newKey) {\n  return ReactElement(oldElement.type, newKey, oldElement.props);\n}\nfunction isValidElement(object) {\n  return (\n    \"object\" === typeof object &&\n    null !== object &&\n    object.$$typeof === REACT_ELEMENT_TYPE\n  );\n}\nfunction escape(key) {\n  var escaperLookup = { \"=\": \"=0\", \":\": \"=2\" };\n  return (\n    \"$\" +\n    key.replace(/[=:]/g, function (match) {\n      return escaperLookup[match];\n    })\n  );\n}\nvar userProvidedKeyEscapeRegex = /\\/+/g;\nfunction getElementKey(element, index) {\n  return \"object\" === typeof element && null !== element && null != element.key\n    ? escape(\"\" + element.key)\n    : index.toString(36);\n}\nfunction resolveThenable(thenable) {\n  switch (thenable.status) {\n    case \"fulfilled\":\n      return thenable.value;\n    case \"rejected\":\n      throw thenable.reason;\n    default:\n      switch (\n        (\"string\" === typeof thenable.status\n          ? thenable.then(noop, noop)\n          : ((thenable.status = \"pending\"),\n            thenable.then(\n              function (fulfilledValue) {\n                \"pending\" === thenable.status &&\n                  ((thenable.status = \"fulfilled\"),\n                  (thenable.value = fulfilledValue));\n              },\n              function (error) {\n                \"pending\" === thenable.status &&\n                  ((thenable.status = \"rejected\"), (thenable.reason = error));\n              }\n            )),\n        thenable.status)\n      ) {\n        case \"fulfilled\":\n          return thenable.value;\n        case \"rejected\":\n          throw thenable.reason;\n      }\n  }\n  throw thenable;\n}\nfunction mapIntoArray(children, array, escapedPrefix, nameSoFar, callback) {\n  var type = typeof children;\n  if (\"undefined\" === type || \"boolean\" === type) children = null;\n  var invokeCallback = !1;\n  if (null === children) invokeCallback = !0;\n  else\n    switch (type) {\n      case \"bigint\":\n      case \"string\":\n      case \"number\":\n        invokeCallback = !0;\n        break;\n      case \"object\":\n        switch (children.$$typeof) {\n          case REACT_ELEMENT_TYPE:\n          case REACT_PORTAL_TYPE:\n            invokeCallback = !0;\n            break;\n          case REACT_LAZY_TYPE:\n            return (\n              (invokeCallback = children._init),\n              mapIntoArray(\n                invokeCallback(children._payload),\n                array,\n                escapedPrefix,\n                nameSoFar,\n                callback\n              )\n            );\n        }\n    }\n  if (invokeCallback)\n    return (\n      (callback = callback(children)),\n      (invokeCallback =\n        \"\" === nameSoFar ? \".\" + getElementKey(children, 0) : nameSoFar),\n      isArrayImpl(callback)\n        ? ((escapedPrefix = \"\"),\n          null != invokeCallback &&\n            (escapedPrefix =\n              invokeCallback.replace(userProvidedKeyEscapeRegex, \"$&/\") + \"/\"),\n          mapIntoArray(callback, array, escapedPrefix, \"\", function (c) {\n            return c;\n          }))\n        : null != callback &&\n          (isValidElement(callback) &&\n            (callback = cloneAndReplaceKey(\n              callback,\n              escapedPrefix +\n                (null == callback.key ||\n                (children && children.key === callback.key)\n                  ? \"\"\n                  : (\"\" + callback.key).replace(\n                      userProvidedKeyEscapeRegex,\n                      \"$&/\"\n                    ) + \"/\") +\n                invokeCallback\n            )),\n          array.push(callback)),\n      1\n    );\n  invokeCallback = 0;\n  var nextNamePrefix = \"\" === nameSoFar ? \".\" : nameSoFar + \":\";\n  if (isArrayImpl(children))\n    for (var i = 0; i < children.length; i++)\n      (nameSoFar = children[i]),\n        (type = nextNamePrefix + getElementKey(nameSoFar, i)),\n        (invokeCallback += mapIntoArray(\n          nameSoFar,\n          array,\n          escapedPrefix,\n          type,\n          callback\n        ));\n  else if (((i = getIteratorFn(children)), \"function\" === typeof i))\n    for (\n      children = i.call(children), i = 0;\n      !(nameSoFar = children.next()).done;\n\n    )\n      (nameSoFar = nameSoFar.value),\n        (type = nextNamePrefix + getElementKey(nameSoFar, i++)),\n        (invokeCallback += mapIntoArray(\n          nameSoFar,\n          array,\n          escapedPrefix,\n          type,\n          callback\n        ));\n  else if (\"object\" === type) {\n    if (\"function\" === typeof children.then)\n      return mapIntoArray(\n        resolveThenable(children),\n        array,\n        escapedPrefix,\n        nameSoFar,\n        callback\n      );\n    array = String(children);\n    throw Error(\n      \"Objects are not valid as a React child (found: \" +\n        (\"[object Object]\" === array\n          ? \"object with keys {\" + Object.keys(children).join(\", \") + \"}\"\n          : array) +\n        \"). If you meant to render a collection of children, use an array instead.\"\n    );\n  }\n  return invokeCallback;\n}\nfunction mapChildren(children, func, context) {\n  if (null == children) return children;\n  var result = [],\n    count = 0;\n  mapIntoArray(children, result, \"\", \"\", function (child) {\n    return func.call(context, child, count++);\n  });\n  return result;\n}\nfunction lazyInitializer(payload) {\n  if (-1 === payload._status) {\n    var ctor = payload._result;\n    ctor = ctor();\n    ctor.then(\n      function (moduleObject) {\n        if (0 === payload._status || -1 === payload._status)\n          (payload._status = 1), (payload._result = moduleObject);\n      },\n      function (error) {\n        if (0 === payload._status || -1 === payload._status)\n          (payload._status = 2), (payload._result = error);\n      }\n    );\n    -1 === payload._status && ((payload._status = 0), (payload._result = ctor));\n  }\n  if (1 === payload._status) return payload._result.default;\n  throw payload._result;\n}\nvar reportGlobalError =\n    \"function\" === typeof reportError\n      ? reportError\n      : function (error) {\n          if (\n            \"object\" === typeof window &&\n            \"function\" === typeof window.ErrorEvent\n          ) {\n            var event = new window.ErrorEvent(\"error\", {\n              bubbles: !0,\n              cancelable: !0,\n              message:\n                \"object\" === typeof error &&\n                null !== error &&\n                \"string\" === typeof error.message\n                  ? String(error.message)\n                  : String(error),\n              error: error\n            });\n            if (!window.dispatchEvent(event)) return;\n          } else if (\n            \"object\" === typeof process &&\n            \"function\" === typeof process.emit\n          ) {\n            process.emit(\"uncaughtException\", error);\n            return;\n          }\n          console.error(error);\n        },\n  Children = {\n    map: mapChildren,\n    forEach: function (children, forEachFunc, forEachContext) {\n      mapChildren(\n        children,\n        function () {\n          forEachFunc.apply(this, arguments);\n        },\n        forEachContext\n      );\n    },\n    count: function (children) {\n      var n = 0;\n      mapChildren(children, function () {\n        n++;\n      });\n      return n;\n    },\n    toArray: function (children) {\n      return (\n        mapChildren(children, function (child) {\n          return child;\n        }) || []\n      );\n    },\n    only: function (children) {\n      if (!isValidElement(children))\n        throw Error(\n          \"React.Children.only expected to receive a single React element child.\"\n        );\n      return children;\n    }\n  };\nexports.Activity = REACT_ACTIVITY_TYPE;\nexports.Children = Children;\nexports.Component = Component;\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.Profiler = REACT_PROFILER_TYPE;\nexports.PureComponent = PureComponent;\nexports.StrictMode = REACT_STRICT_MODE_TYPE;\nexports.Suspense = REACT_SUSPENSE_TYPE;\nexports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =\n  ReactSharedInternals;\nexports.__COMPILER_RUNTIME = {\n  __proto__: null,\n  c: function (size) {\n    return ReactSharedInternals.H.useMemoCache(size);\n  }\n};\nexports.cache = function (fn) {\n  return function () {\n    return fn.apply(null, arguments);\n  };\n};\nexports.cacheSignal = function () {\n  return null;\n};\nexports.cloneElement = function (element, config, children) {\n  if (null === element || void 0 === element)\n    throw Error(\n      \"The argument must be a React element, but you passed \" + element + \".\"\n    );\n  var props = assign({}, element.props),\n    key = element.key;\n  if (null != config)\n    for (propName in (void 0 !== config.key && (key = \"\" + config.key), config))\n      !hasOwnProperty.call(config, propName) ||\n        \"key\" === propName ||\n        \"__self\" === propName ||\n        \"__source\" === propName ||\n        (\"ref\" === propName && void 0 === config.ref) ||\n        (props[propName] = config[propName]);\n  var propName = arguments.length - 2;\n  if (1 === propName) props.children = children;\n  else if (1 < propName) {\n    for (var childArray = Array(propName), i = 0; i < propName; i++)\n      childArray[i] = arguments[i + 2];\n    props.children = childArray;\n  }\n  return ReactElement(element.type, key, props);\n};\nexports.createContext = function (defaultValue) {\n  defaultValue = {\n    $$typeof: REACT_CONTEXT_TYPE,\n    _currentValue: defaultValue,\n    _currentValue2: defaultValue,\n    _threadCount: 0,\n    Provider: null,\n    Consumer: null\n  };\n  defaultValue.Provider = defaultValue;\n  defaultValue.Consumer = {\n    $$typeof: REACT_CONSUMER_TYPE,\n    _context: defaultValue\n  };\n  return defaultValue;\n};\nexports.createElement = function (type, config, children) {\n  var propName,\n    props = {},\n    key = null;\n  if (null != config)\n    for (propName in (void 0 !== config.key && (key = \"\" + config.key), config))\n      hasOwnProperty.call(config, propName) &&\n        \"key\" !== propName &&\n        \"__self\" !== propName &&\n        \"__source\" !== propName &&\n        (props[propName] = config[propName]);\n  var childrenLength = arguments.length - 2;\n  if (1 === childrenLength) props.children = children;\n  else if (1 < childrenLength) {\n    for (var childArray = Array(childrenLength), i = 0; i < childrenLength; i++)\n      childArray[i] = arguments[i + 2];\n    props.children = childArray;\n  }\n  if (type && type.defaultProps)\n    for (propName in ((childrenLength = type.defaultProps), childrenLength))\n      void 0 === props[propName] &&\n        (props[propName] = childrenLength[propName]);\n  return ReactElement(type, key, props);\n};\nexports.createRef = function () {\n  return { current: null };\n};\nexports.forwardRef = function (render) {\n  return { $$typeof: REACT_FORWARD_REF_TYPE, render: render };\n};\nexports.isValidElement = isValidElement;\nexports.lazy = function (ctor) {\n  return {\n    $$typeof: REACT_LAZY_TYPE,\n    _payload: { _status: -1, _result: ctor },\n    _init: lazyInitializer\n  };\n};\nexports.memo = function (type, compare) {\n  return {\n    $$typeof: REACT_MEMO_TYPE,\n    type: type,\n    compare: void 0 === compare ? null : compare\n  };\n};\nexports.startTransition = function (scope) {\n  var prevTransition = ReactSharedInternals.T,\n    currentTransition = {};\n  ReactSharedInternals.T = currentTransition;\n  try {\n    var returnValue = scope(),\n      onStartTransitionFinish = ReactSharedInternals.S;\n    null !== onStartTransitionFinish &&\n      onStartTransitionFinish(currentTransition, returnValue);\n    \"object\" === typeof returnValue &&\n      null !== returnValue &&\n      \"function\" === typeof returnValue.then &&\n      returnValue.then(noop, reportGlobalError);\n  } catch (error) {\n    reportGlobalError(error);\n  } finally {\n    null !== prevTransition &&\n      null !== currentTransition.types &&\n      (prevTransition.types = currentTransition.types),\n      (ReactSharedInternals.T = prevTransition);\n  }\n};\nexports.unstable_useCacheRefresh = function () {\n  return ReactSharedInternals.H.useCacheRefresh();\n};\nexports.use = function (usable) {\n  return ReactSharedInternals.H.use(usable);\n};\nexports.useActionState = function (action, initialState, permalink) {\n  return ReactSharedInternals.H.useActionState(action, initialState, permalink);\n};\nexports.useCallback = function (callback, deps) {\n  return ReactSharedInternals.H.useCallback(callback, deps);\n};\nexports.useContext = function (Context) {\n  return ReactSharedInternals.H.useContext(Context);\n};\nexports.useDebugValue = function () {};\nexports.useDeferredValue = function (value, initialValue) {\n  return ReactSharedInternals.H.useDeferredValue(value, initialValue);\n};\nexports.useEffect = function (create, deps) {\n  return ReactSharedInternals.H.useEffect(create, deps);\n};\nexports.useEffectEvent = function (callback) {\n  return ReactSharedInternals.H.useEffectEvent(callback);\n};\nexports.useId = function () {\n  return ReactSharedInternals.H.useId();\n};\nexports.useImperativeHandle = function (ref, create, deps) {\n  return ReactSharedInternals.H.useImperativeHandle(ref, create, deps);\n};\nexports.useInsertionEffect = function (create, deps) {\n  return ReactSharedInternals.H.useInsertionEffect(create, deps);\n};\nexports.useLayoutEffect = function (create, deps) {\n  return ReactSharedInternals.H.useLayoutEffect(create, deps);\n};\nexports.useMemo = function (create, deps) {\n  return ReactSharedInternals.H.useMemo(create, deps);\n};\nexports.useOptimistic = function (passthrough, reducer) {\n  return ReactSharedInternals.H.useOptimistic(passthrough, reducer);\n};\nexports.useReducer = function (reducer, initialArg, init) {\n  return ReactSharedInternals.H.useReducer(reducer, initialArg, init);\n};\nexports.useRef = function (initialValue) {\n  return ReactSharedInternals.H.useRef(initialValue);\n};\nexports.useState = function (initialState) {\n  return ReactSharedInternals.H.useState(initialState);\n};\nexports.useSyncExternalStore = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot\n) {\n  return ReactSharedInternals.H.useSyncExternalStore(\n    subscribe,\n    getSnapshot,\n    getServerSnapshot\n  );\n};\nexports.useTransition = function () {\n  return ReactSharedInternals.H.useTransition();\n};\nexports.version = \"19.2.4\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * scheduler.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nfunction push(heap, node) {\n  var index = heap.length;\n  heap.push(node);\n  a: for (; 0 < index; ) {\n    var parentIndex = (index - 1) >>> 1,\n      parent = heap[parentIndex];\n    if (0 < compare(parent, node))\n      (heap[parentIndex] = node), (heap[index] = parent), (index = parentIndex);\n    else break a;\n  }\n}\nfunction peek(heap) {\n  return 0 === heap.length ? null : heap[0];\n}\nfunction pop(heap) {\n  if (0 === heap.length) return null;\n  var first = heap[0],\n    last = heap.pop();\n  if (last !== first) {\n    heap[0] = last;\n    a: for (\n      var index = 0, length = heap.length, halfLength = length >>> 1;\n      index < halfLength;\n\n    ) {\n      var leftIndex = 2 * (index + 1) - 1,\n        left = heap[leftIndex],\n        rightIndex = leftIndex + 1,\n        right = heap[rightIndex];\n      if (0 > compare(left, last))\n        rightIndex < length && 0 > compare(right, left)\n          ? ((heap[index] = right),\n            (heap[rightIndex] = last),\n            (index = rightIndex))\n          : ((heap[index] = left),\n            (heap[leftIndex] = last),\n            (index = leftIndex));\n      else if (rightIndex < length && 0 > compare(right, last))\n        (heap[index] = right), (heap[rightIndex] = last), (index = rightIndex);\n      else break a;\n    }\n  }\n  return first;\n}\nfunction compare(a, b) {\n  var diff = a.sortIndex - b.sortIndex;\n  return 0 !== diff ? diff : a.id - b.id;\n}\nexports.unstable_now = void 0;\nif (\"object\" === typeof performance && \"function\" === typeof performance.now) {\n  var localPerformance = performance;\n  exports.unstable_now = function () {\n    return localPerformance.now();\n  };\n} else {\n  var localDate = Date,\n    initialTime = localDate.now();\n  exports.unstable_now = function () {\n    return localDate.now() - initialTime;\n  };\n}\nvar taskQueue = [],\n  timerQueue = [],\n  taskIdCounter = 1,\n  currentTask = null,\n  currentPriorityLevel = 3,\n  isPerformingWork = !1,\n  isHostCallbackScheduled = !1,\n  isHostTimeoutScheduled = !1,\n  needsPaint = !1,\n  localSetTimeout = \"function\" === typeof setTimeout ? setTimeout : null,\n  localClearTimeout = \"function\" === typeof clearTimeout ? clearTimeout : null,\n  localSetImmediate = \"undefined\" !== typeof setImmediate ? setImmediate : null;\nfunction advanceTimers(currentTime) {\n  for (var timer = peek(timerQueue); null !== timer; ) {\n    if (null === timer.callback) pop(timerQueue);\n    else if (timer.startTime <= currentTime)\n      pop(timerQueue),\n        (timer.sortIndex = timer.expirationTime),\n        push(taskQueue, timer);\n    else break;\n    timer = peek(timerQueue);\n  }\n}\nfunction handleTimeout(currentTime) {\n  isHostTimeoutScheduled = !1;\n  advanceTimers(currentTime);\n  if (!isHostCallbackScheduled)\n    if (null !== peek(taskQueue))\n      (isHostCallbackScheduled = !0),\n        isMessageLoopRunning ||\n          ((isMessageLoopRunning = !0), schedulePerformWorkUntilDeadline());\n    else {\n      var firstTimer = peek(timerQueue);\n      null !== firstTimer &&\n        requestHostTimeout(handleTimeout, firstTimer.startTime - currentTime);\n    }\n}\nvar isMessageLoopRunning = !1,\n  taskTimeoutID = -1,\n  frameInterval = 5,\n  startTime = -1;\nfunction shouldYieldToHost() {\n  return needsPaint\n    ? !0\n    : exports.unstable_now() - startTime < frameInterval\n      ? !1\n      : !0;\n}\nfunction performWorkUntilDeadline() {\n  needsPaint = !1;\n  if (isMessageLoopRunning) {\n    var currentTime = exports.unstable_now();\n    startTime = currentTime;\n    var hasMoreWork = !0;\n    try {\n      a: {\n        isHostCallbackScheduled = !1;\n        isHostTimeoutScheduled &&\n          ((isHostTimeoutScheduled = !1),\n          localClearTimeout(taskTimeoutID),\n          (taskTimeoutID = -1));\n        isPerformingWork = !0;\n        var previousPriorityLevel = currentPriorityLevel;\n        try {\n          b: {\n            advanceTimers(currentTime);\n            for (\n              currentTask = peek(taskQueue);\n              null !== currentTask &&\n              !(\n                currentTask.expirationTime > currentTime && shouldYieldToHost()\n              );\n\n            ) {\n              var callback = currentTask.callback;\n              if (\"function\" === typeof callback) {\n                currentTask.callback = null;\n                currentPriorityLevel = currentTask.priorityLevel;\n                var continuationCallback = callback(\n                  currentTask.expirationTime <= currentTime\n                );\n                currentTime = exports.unstable_now();\n                if (\"function\" === typeof continuationCallback) {\n                  currentTask.callback = continuationCallback;\n                  advanceTimers(currentTime);\n                  hasMoreWork = !0;\n                  break b;\n                }\n                currentTask === peek(taskQueue) && pop(taskQueue);\n                advanceTimers(currentTime);\n              } else pop(taskQueue);\n              currentTask = peek(taskQueue);\n            }\n            if (null !== currentTask) hasMoreWork = !0;\n            else {\n              var firstTimer = peek(timerQueue);\n              null !== firstTimer &&\n                requestHostTimeout(\n                  handleTimeout,\n                  firstTimer.startTime - currentTime\n                );\n              hasMoreWork = !1;\n            }\n          }\n          break a;\n        } finally {\n          (currentTask = null),\n            (currentPriorityLevel = previousPriorityLevel),\n            (isPerformingWork = !1);\n        }\n        hasMoreWork = void 0;\n      }\n    } finally {\n      hasMoreWork\n        ? schedulePerformWorkUntilDeadline()\n        : (isMessageLoopRunning = !1);\n    }\n  }\n}\nvar schedulePerformWorkUntilDeadline;\nif (\"function\" === typeof localSetImmediate)\n  schedulePerformWorkUntilDeadline = function () {\n    localSetImmediate(performWorkUntilDeadline);\n  };\nelse if (\"undefined\" !== typeof MessageChannel) {\n  var channel = new MessageChannel(),\n    port = channel.port2;\n  channel.port1.onmessage = performWorkUntilDeadline;\n  schedulePerformWorkUntilDeadline = function () {\n    port.postMessage(null);\n  };\n} else\n  schedulePerformWorkUntilDeadline = function () {\n    localSetTimeout(performWorkUntilDeadline, 0);\n  };\nfunction requestHostTimeout(callback, ms) {\n  taskTimeoutID = localSetTimeout(function () {\n    callback(exports.unstable_now());\n  }, ms);\n}\nexports.unstable_IdlePriority = 5;\nexports.unstable_ImmediatePriority = 1;\nexports.unstable_LowPriority = 4;\nexports.unstable_NormalPriority = 3;\nexports.unstable_Profiling = null;\nexports.unstable_UserBlockingPriority = 2;\nexports.unstable_cancelCallback = function (task) {\n  task.callback = null;\n};\nexports.unstable_forceFrameRate = function (fps) {\n  0 > fps || 125 < fps\n    ? console.error(\n        \"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"\n      )\n    : (frameInterval = 0 < fps ? Math.floor(1e3 / fps) : 5);\n};\nexports.unstable_getCurrentPriorityLevel = function () {\n  return currentPriorityLevel;\n};\nexports.unstable_next = function (eventHandler) {\n  switch (currentPriorityLevel) {\n    case 1:\n    case 2:\n    case 3:\n      var priorityLevel = 3;\n      break;\n    default:\n      priorityLevel = currentPriorityLevel;\n  }\n  var previousPriorityLevel = currentPriorityLevel;\n  currentPriorityLevel = priorityLevel;\n  try {\n    return eventHandler();\n  } finally {\n    currentPriorityLevel = previousPriorityLevel;\n  }\n};\nexports.unstable_requestPaint = function () {\n  needsPaint = !0;\n};\nexports.unstable_runWithPriority = function (priorityLevel, eventHandler) {\n  switch (priorityLevel) {\n    case 1:\n    case 2:\n    case 3:\n    case 4:\n    case 5:\n      break;\n    default:\n      priorityLevel = 3;\n  }\n  var previousPriorityLevel = currentPriorityLevel;\n  currentPriorityLevel = priorityLevel;\n  try {\n    return eventHandler();\n  } finally {\n    currentPriorityLevel = previousPriorityLevel;\n  }\n};\nexports.unstable_scheduleCallback = function (\n  priorityLevel,\n  callback,\n  options\n) {\n  var currentTime = exports.unstable_now();\n  \"object\" === typeof options && null !== options\n    ? ((options = options.delay),\n      (options =\n        \"number\" === typeof options && 0 < options\n          ? currentTime + options\n          : currentTime))\n    : (options = currentTime);\n  switch (priorityLevel) {\n    case 1:\n      var timeout = -1;\n      break;\n    case 2:\n      timeout = 250;\n      break;\n    case 5:\n      timeout = 1073741823;\n      break;\n    case 4:\n      timeout = 1e4;\n      break;\n    default:\n      timeout = 5e3;\n  }\n  timeout = options + timeout;\n  priorityLevel = {\n    id: taskIdCounter++,\n    callback: callback,\n    priorityLevel: priorityLevel,\n    startTime: options,\n    expirationTime: timeout,\n    sortIndex: -1\n  };\n  options > currentTime\n    ? ((priorityLevel.sortIndex = options),\n      push(timerQueue, priorityLevel),\n      null === peek(taskQueue) &&\n        priorityLevel === peek(timerQueue) &&\n        (isHostTimeoutScheduled\n          ? (localClearTimeout(taskTimeoutID), (taskTimeoutID = -1))\n          : (isHostTimeoutScheduled = !0),\n        requestHostTimeout(handleTimeout, options - currentTime)))\n    : ((priorityLevel.sortIndex = timeout),\n      push(taskQueue, priorityLevel),\n      isHostCallbackScheduled ||\n        isPerformingWork ||\n        ((isHostCallbackScheduled = !0),\n        isMessageLoopRunning ||\n          ((isMessageLoopRunning = !0), schedulePerformWorkUntilDeadline())));\n  return priorityLevel;\n};\nexports.unstable_shouldYield = shouldYieldToHost;\nexports.unstable_wrapCallback = function (callback) {\n  var parentPriorityLevel = currentPriorityLevel;\n  return function () {\n    var previousPriorityLevel = currentPriorityLevel;\n    currentPriorityLevel = parentPriorityLevel;\n    try {\n      return callback.apply(this, arguments);\n    } finally {\n      currentPriorityLevel = previousPriorityLevel;\n    }\n  };\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nexport { _objectSpread2 as default };","/**\n * Version & Changelog for War of 1812: Rise of the Nation\n */\n\nexport const CURRENT_VERSION = '2.0.0';\n\nexport const changelog = [\n  {\n    version: '2.0.0',\n    date: '2026-02-25',\n    title: 'Class Code System',\n    changes: [\n      'Teacher accounts with Supabase Auth (magic link + password sign-in)',\n      'Teachers create classes with shareable 6-character codes',\n      'Students enter class code during onboarding or via direct link',\n      'Teacher Dashboard shows only their students\\' data (fully isolated)',\n      'Late join  students can enter class code at score submission',\n      'Quiz gate data and game scores linked to classes for teacher analytics',\n      'Global leaderboard unchanged  all students still appear',\n    ],\n  },\n  {\n    version: '1.7.0',\n    date: '2026-02-25',\n    title: 'Quiz Gate Analytics',\n    changes: [\n      'Pre-game quiz retry tracking  teachers can see which questions students struggle with',\n      'New Quiz Gate Analytics section on Teacher Dashboard with per-question breakdown',\n      'Expandable student detail view showing individual retry counts',\n      'Quiz Gate CSV export for offline analysis',\n      'Session ID linking quiz gate data to game scores (future-proofing for v2.0)',\n    ],\n  },\n  {\n    version: '1.6.0',\n    date: '2026-02-25',\n    title: 'Content Expansion',\n    changes: [\n      '25 new knowledge check questions covering Canadian defense, frontier warfare, economic impacts, and diverse perspectives',\n      '12 new event cards including Chateauguay, River Raisin, Beaver Dams, Colonial Marines, and more',\n      '2 new leaders: Charles de Salaberry (British) and Black Hawk (Native)  now 4 US / 5 British / 4 Native',\n      'New biographical profile for Charles de Salaberry with primary sources',\n      'Expanded round coverage for mid-war (rounds 4-8) and late-war (rounds 8-12) content gaps',\n    ],\n  },\n  {\n    version: '1.5.0',\n    date: '2026-02-25',\n    title: 'Onboarding Redesign & AI Difficulty',\n    changes: [\n      'New guided onboarding flow: Name  Difficulty  Learning  Quiz  Faction',\n      'AI difficulty levels: Learning (Easy), Balanced (Medium), Commander (Hard)',\n      'Pre-game quiz gate with 8 comprehension questions (retry until correct)',\n      'Explorer/Historian mode moved to difficulty selection screen',\n      'Teacher-controlled learning skip via ?skip=learning URL parameter',\n      'Difficulty tracked in Supabase and shown on Teacher Dashboard',\n    ],\n  },\n  {\n    version: '1.4.1',\n    date: '2026-02-24',\n    title: 'Reading Improvements',\n    changes: [\n      'Bold text (**markdown**) now renders properly instead of showing asterisks',\n      'Explorer Mode: larger text, more spacing, and max-width for readability on Chromebooks',\n      'Inline vocabulary terms with tap-to-reveal definitions in Explorer Mode',\n      'Key Idea callout box at top of each Learning Mode section (Explorer only)',\n      'Did You Know moved above Key Terms in Explorer Mode for better flow',\n      'Section 9 (Diverse Experiences) split into sub-sections with headers',\n      'IntroScreen shows simplified text in Explorer Mode',\n      'Tutorial shows simplified descriptions in Explorer Mode',\n    ],\n  },\n  {\n    version: '1.4.0',\n    date: '2026-02-24',\n    title: 'Accessibility & Inclusion',\n    changes: [\n      'Added Explorer Mode  simplified 3rd-grade reading level for IEP and multilingual learner students',\n      'Explorer Mode toggle on faction select screen (gameplay stays identical, only text changes)',\n      'Simplified text for all 43 knowledge check questions, 29 event cards, and 10 learning mode sections',\n      'Added OpenDyslexic font toggle for dyslexic-friendly reading (persists across sessions)',\n      'Font toggle available on both faction select and in-game header',\n    ],\n  },\n  {\n    version: '1.3.0',\n    date: '2026-02-24',\n    title: 'Pedagogical Improvements',\n    changes: [\n      'Added \"People of 1812\" profiles with biographies, primary sources, and diverse perspectives',\n      'Added \"What Came Next\" post-game section connecting the war to later American history',\n      'Enhanced Learning Mode with cause/effect analysis, primary source excerpts, and geographic context',\n      'Expanded required knowledge checks to ensure diverse perspectives (women, African Americans, Native peoples)',\n      'Added Teacher Guide page with standards alignment, facilitation tips, and assessment ideas',\n      'Expanded Teacher Dashboard with game guide summary',\n      'Added 3 new knowledge check questions on enslaved people, broken treaty promises, and Dolley Madison\\'s political role',\n      'Added 2 new Learning Mode sections: Diverse Experiences and Geography of the War',\n    ],\n  },\n  {\n    version: '1.2.0',\n    date: '2025-01-15',\n    title: 'War Room Cartography',\n    changes: [\n      'Complete visual redesign with War Room Cartography theme',\n      'AI Turn Replay panel with map highlighting',\n      'Leaderboard with Supabase backend and victory badges',\n      'Tutorial system with step-by-step guidance',\n      'Glossary panel with key vocabulary terms',\n      'Victory progress tracker',\n      'Sound effects and background music',\n    ],\n  },\n  {\n    version: '1.1.0',\n    date: '2024-11-01',\n    title: 'Knowledge & Assessment',\n    changes: [\n      'Knowledge check questions with historical explanations',\n      'Quiz review panel showing past answers',\n      'Score submission and leaderboard preview',\n      'Teacher Dashboard with class analytics',\n      'Save/load game system with export/import',\n    ],\n  },\n  {\n    version: '1.0.0',\n    date: '2024-09-01',\n    title: 'Initial Release',\n    changes: [\n      'Three playable factions: United States, British/Canada, Native Coalition',\n      'Interactive Leaflet map with 30 territories',\n      'Turn-based gameplay with 5 phases per round',\n      'AI opponent with strategic decision-making',\n      'Historical event cards tied to real war timeline',\n      'Leader abilities and combat system',\n      'Victory conditions: domination, elimination, treaty',\n    ],\n  },\n];\n","import React, { useState } from 'react';\nimport { CURRENT_VERSION, changelog } from '../data/changelog';\n\nconst factions = [\n  {\n    id: 'us',\n    name: 'United States',\n    icon: '\\u{1F985}',\n    gradient: 'from-[#0a1628] to-[#1a3a6e]',\n    accent: '#4a7ec7',\n    border: 'border-[#4a7ec7]',\n    ring: 'ring-[#4a7ec7]',\n    description: 'Expand territory, repel the British, and ignite American nationalism.',\n    simpleDescription: 'Fight for America! Push the British out and make your country stronger.',\n    leaders: 'Andrew Jackson, Oliver H. Perry, William H. Harrison',\n    bonus: 'Nationalism meter boosts your score multiplier',\n  },\n  {\n    id: 'british',\n    name: 'British / Canada',\n    icon: '\\u{1F341}',\n    gradient: 'from-[#1a0a0a] to-[#6b1a2a]',\n    accent: '#e63946',\n    border: 'border-[#e63946]',\n    ring: 'ring-[#e63946]',\n    description: 'Hold Canada, maintain naval superiority, and blockade American ports.',\n    simpleDescription: 'Defend Canada! Use your strong navy to block American ships.',\n    leaders: 'Isaac Brock, Gordon Drummond, Robert Ross',\n    bonus: 'Naval superiority: +1 die on coastal attacks',\n  },\n  {\n    id: 'native',\n    name: 'Native Coalition',\n    icon: '\\u{1F3F9}',\n    gradient: 'from-[#1a1208] to-[#5a3a1e]',\n    accent: '#d4a24e',\n    border: 'border-[#d4a24e]',\n    ring: 'ring-[#d4a24e]',\n    description: \"Forge alliances, defend homelands, and control the frontier.\",\n    simpleDescription: 'Unite the tribes! Protect your homeland from American settlers.',\n    leaders: 'Tecumseh, Tenskwatawa, Black Hawk',\n    bonus: 'Guerrilla tactics: first strike in forest territories',\n  },\n];\n\nexport default function FactionSelect({ onSelect, onOpenPeopleGallery, gameMode, fontMode, toggleFont }) {\n  const [hoveredFaction, setHoveredFaction] = useState(null);\n  const [selectedFaction, setSelectedFaction] = useState(null);\n  const [showChangelog, setShowChangelog] = useState(false);\n\n  const isExplorer = gameMode === 'explorer';\n\n  const handleStart = () => {\n    if (selectedFaction) {\n      onSelect(selectedFaction);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-war-ink flex flex-col items-center justify-center p-4 md:p-8 relative overflow-hidden\">\n      {/* Background texture */}\n      <div className=\"absolute inset-0 opacity-[0.03]\" style={{\n        backgroundImage: 'radial-gradient(circle at 25% 25%, rgba(201,162,39,0.15) 0%, transparent 50%), radial-gradient(circle at 75% 75%, rgba(184,115,51,0.1) 0%, transparent 50%)',\n      }} />\n      <div className=\"absolute inset-0 bg-noise opacity-30\" />\n\n      {/* Content */}\n      <div className=\"relative z-10 w-full max-w-5xl\">\n\n        {/* Title block */}\n        <div className=\"text-center mb-8 md:mb-12 animate-fadein\">\n          <div className=\"inline-block\">\n            <div className=\"flex items-center justify-center gap-3 mb-2\">\n              <div className=\"w-12 md:w-20 h-px bg-gradient-to-r from-transparent to-war-gold opacity-60\" />\n              <span className=\"text-war-copper text-xs md:text-sm tracking-[0.3em] uppercase font-body\">Choose Your Faction</span>\n              <div className=\"w-12 md:w-20 h-px bg-gradient-to-l from-transparent to-war-gold opacity-60\" />\n            </div>\n            <h1 className=\"text-5xl md:text-7xl font-display text-parchment tracking-wide leading-none mb-2\" style={{\n              textShadow: '0 2px 20px rgba(201,162,39,0.2)',\n            }}>\n              War of 1812\n            </h1>\n            <p className=\"text-xl md:text-2xl font-display italic text-war-gold tracking-wider\">\n              Rise of the Nation\n            </p>\n            <div className=\"mt-4 flex items-center justify-center gap-2\">\n              <div className=\"w-8 h-px bg-war-gold opacity-40\" />\n              <div className=\"w-1.5 h-1.5 rotate-45 border border-war-gold opacity-40\" />\n              <div className=\"w-24 h-px bg-war-gold opacity-40\" />\n              <div className=\"w-1.5 h-1.5 rotate-45 border border-war-gold opacity-40\" />\n              <div className=\"w-8 h-px bg-war-gold opacity-40\" />\n            </div>\n          </div>\n        </div>\n\n        {/* Faction cards */}\n        <div className=\"flex flex-col md:flex-row gap-4 md:gap-5 mb-8 w-full animate-slideup\" style={{ animationDelay: '0.2s' }}>\n          {factions.map((faction) => {\n            const isSelected = selectedFaction === faction.id;\n            const isHovered = hoveredFaction === faction.id;\n\n            return (\n              <button\n                key={faction.id}\n                onClick={() => setSelectedFaction(faction.id)}\n                onMouseEnter={() => setHoveredFaction(faction.id)}\n                onMouseLeave={() => setHoveredFaction(null)}\n                className={`\n                  flex-1 p-6 md:p-7 rounded-lg transition-all duration-300 text-left cursor-pointer\n                  bg-gradient-to-b ${faction.gradient}\n                  border-2 relative overflow-hidden group\n                  focus:outline-none focus:ring-2 ${faction.ring} focus:ring-offset-2 focus:ring-offset-war-ink\n                  ${isSelected ? `${faction.border} shadow-modal` : 'border-white/5 hover:border-white/15'}\n                  ${isHovered && !isSelected ? 'scale-[1.02]' : ''}\n                  ${isSelected ? 'scale-[1.03]' : ''}\n                `}\n              >\n                {/* Subtle glow on selected */}\n                {isSelected && (\n                  <div className=\"absolute inset-0 opacity-10\" style={{\n                    background: `radial-gradient(circle at 50% 0%, ${faction.accent}, transparent 70%)`,\n                  }} />\n                )}\n\n                <div className=\"relative z-10\">\n                  <div className=\"text-4xl mb-3 opacity-80 group-hover:opacity-100 transition-opacity\">{faction.icon}</div>\n                  <h2 className=\"text-xl md:text-2xl font-display text-parchment font-bold mb-2 tracking-wide\">\n                    {faction.name}\n                  </h2>\n                  <p className={`text-sm md:text-base text-parchment/80 mb-4 leading-relaxed font-body ${isExplorer ? 'text-base md:text-lg' : ''}`}>\n                    {isExplorer ? faction.simpleDescription : faction.description}\n                  </p>\n                  <div className=\"text-sm text-parchment/60 space-y-1 font-body\">\n                    <p><span className=\"text-war-gold font-semibold\">Leaders:</span> {faction.leaders}</p>\n                    <p><span className=\"text-war-gold font-semibold\">Bonus:</span> {faction.bonus}</p>\n                  </div>\n                </div>\n\n                {/* Selected indicator */}\n                {isSelected && (\n                  <div className=\"absolute top-3 right-3 w-6 h-6 rounded-full flex items-center justify-center\" style={{ background: faction.accent }}>\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\"><path d=\"M3 7l3 3 5-6\" stroke=\"#fff\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n                  </div>\n                )}\n              </button>\n            );\n          })}\n        </div>\n\n        {/* Action buttons */}\n        <div className=\"flex flex-col gap-4 items-center animate-slideup\" style={{ animationDelay: '0.3s' }}>\n          <div className=\"flex flex-wrap gap-3 justify-center\">\n            {onOpenPeopleGallery && (\n              <button\n                onClick={onOpenPeopleGallery}\n                className=\"px-8 py-3 rounded font-body text-base border border-war-copper/30 text-war-copper/80\n                           hover:bg-war-copper/10 hover:border-war-copper/50 transition-all cursor-pointer tracking-wide\n                           focus:outline-none focus:ring-2 focus:ring-war-copper/40 focus:ring-offset-2 focus:ring-offset-war-ink\"\n              >\n                Meet the People of 1812\n              </button>\n            )}\n          </div>\n\n          <button\n            onClick={handleStart}\n            disabled={!selectedFaction}\n            className={`\n              px-12 md:px-16 py-3.5 rounded font-display text-lg md:text-xl tracking-widest font-bold\n              transition-all duration-300 uppercase\n              focus:outline-none focus:ring-2 focus:ring-war-gold/50 focus:ring-offset-2 focus:ring-offset-war-ink\n              ${selectedFaction\n                ? 'bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer shadow-copper'\n                : 'bg-white/10 text-parchment-dark/40 border border-parchment-dark/20 cursor-not-allowed'}\n            `}\n          >\n            March to War\n          </button>\n        </div>\n\n        {/* Footer */}\n        <p className=\"text-center text-sm text-parchment/50 mt-10 max-w-lg mx-auto italic font-body leading-relaxed\">\n          June 18, 1812 &mdash; President Madison signs the declaration of war against Great Britain.\n          The young republic faces the world&apos;s greatest naval power.\n        </p>\n        <div className=\"text-center mt-4 space-y-2\">\n          <div className=\"flex items-center justify-center gap-3 text-xs font-body\">\n            <a\n              href=\"#guide\"\n              className=\"text-war-gold/50 hover:text-war-gold/80 transition-colors\"\n            >\n              Teacher Guide\n            </a>\n            <span className=\"text-parchment-dark/20\">|</span>\n            <button\n              onClick={() => setShowChangelog(!showChangelog)}\n              className=\"text-war-gold/50 hover:text-war-gold/80 transition-colors cursor-pointer\"\n            >\n              What&apos;s New\n            </button>\n            <span className=\"text-parchment-dark/20\">|</span>\n            <button\n              onClick={toggleFont}\n              className={`transition-colors cursor-pointer ${fontMode === 'dyslexic' ? 'text-war-gold/80' : 'text-war-gold/50 hover:text-war-gold/80'}`}\n            >\n              Aa {fontMode === 'dyslexic' ? 'Standard Font' : 'OpenDyslexic'}\n            </button>\n          </div>\n          <p className=\"text-xs text-parchment-dark/40 font-body\">\n            v{CURRENT_VERSION}\n          </p>\n        </div>\n\n        {/* Changelog */}\n        {showChangelog && (\n          <div className=\"w-full max-w-md mx-auto mt-4 bg-war-navy/60 backdrop-blur rounded-lg p-5 border border-war-gold/20 shadow-card animate-fadein\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"text-war-gold/90 font-display text-sm tracking-wide\">What&apos;s New</h3>\n              <button onClick={() => setShowChangelog(false)} className=\"text-parchment-dark/40 hover:text-parchment text-xs cursor-pointer\">&times;</button>\n            </div>\n            {changelog.slice(0, 2).map((entry) => (\n              <div key={entry.version} className=\"mb-4 last:mb-0\">\n                <p className=\"text-parchment/80 text-sm font-body font-bold\">\n                  v{entry.version} &mdash; {entry.title}\n                </p>\n                <p className=\"text-parchment-dark/40 text-xs font-body mb-1\">{entry.date}</p>\n                <ul className=\"space-y-0.5\">\n                  {entry.changes.map((change, i) => (\n                    <li key={i} className=\"text-parchment-dark/60 text-xs font-body pl-3 relative before:content-[''] before:absolute before:left-0 before:text-war-gold/40\">\n                      {change}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { createContext, use } from 'react';\nexport const CONTEXT_VERSION = 1;\nexport function createLeafletContext(map) {\n    return Object.freeze({\n        __version: CONTEXT_VERSION,\n        map\n    });\n}\nexport function extendContext(source, extra) {\n    return Object.freeze({\n        ...source,\n        ...extra\n    });\n}\nexport const LeafletContext = createContext(null);\nexport function useLeafletContext() {\n    const context = use(LeafletContext);\n    if (context == null) {\n        throw new Error('No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>');\n    }\n    return context;\n}\n","import { useLeafletContext } from '@react-leaflet/core';\nimport { useEffect } from 'react';\nexport function useMap() {\n    return useLeafletContext().map;\n}\nexport function useMapEvent(type, handler) {\n    const map = useMap();\n    useEffect(function addMapEventHandler() {\n        // @ts-ignore event type\n        map.on(type, handler);\n        return function removeMapEventHandler() {\n            // @ts-ignore event type\n            map.off(type, handler);\n        };\n    }, [\n        map,\n        type,\n        handler\n    ]);\n    return map;\n}\nexport function useMapEvents(handlers) {\n    const map = useMap();\n    useEffect(function addMapEventHandlers() {\n        map.on(handlers);\n        return function removeMapEventHandlers() {\n            map.off(handlers);\n        };\n    }, [\n        map,\n        handlers\n    ]);\n    return map;\n}\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\nexport { _objectWithoutProperties as default };","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };","import { LeafletContext, createLeafletContext } from '@react-leaflet/core';\nimport { Map as LeafletMap } from 'leaflet';\nimport React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef, useState } from 'react';\nfunction MapContainerComponent({ bounds, boundsOptions, center, children, className, id, placeholder, style, whenReady, zoom, ...options }, forwardedRef) {\n    const [props] = useState({\n        className,\n        id,\n        style\n    });\n    const [context, setContext] = useState(null);\n    const mapInstanceRef = useRef(undefined);\n    useImperativeHandle(forwardedRef, ()=>context?.map ?? null, [\n        context\n    ]);\n    // biome-ignore lint/correctness/useExhaustiveDependencies: ref callback\n    const mapRef = useCallback((node)=>{\n        if (node !== null && !mapInstanceRef.current) {\n            const map = new LeafletMap(node, options);\n            mapInstanceRef.current = map;\n            if (center != null && zoom != null) {\n                map.setView(center, zoom);\n            } else if (bounds != null) {\n                map.fitBounds(bounds, boundsOptions);\n            }\n            if (whenReady != null) {\n                map.whenReady(whenReady);\n            }\n            setContext(createLeafletContext(map));\n        }\n    }, []);\n    useEffect(()=>{\n        return ()=>{\n            context?.map.remove();\n        };\n    }, [\n        context\n    ]);\n    const contents = context ? /*#__PURE__*/ React.createElement(LeafletContext, {\n        value: context\n    }, children) : placeholder ?? null;\n    return /*#__PURE__*/ React.createElement(\"div\", {\n        ...props,\n        ref: mapRef\n    }, contents);\n}\nexport const MapContainer = /*#__PURE__*/ forwardRef(MapContainerComponent);\n","import { useEffect, useRef } from 'react';\nexport function createElementObject(instance, context, container) {\n    return Object.freeze({\n        instance,\n        context,\n        container\n    });\n}\nexport function createElementHook(createElement, updateElement) {\n    if (updateElement == null) {\n        return function useImmutableLeafletElement(props, context) {\n            const elementRef = useRef(undefined);\n            if (!elementRef.current) elementRef.current = createElement(props, context);\n            return elementRef;\n        };\n    }\n    return function useMutableLeafletElement(props, context) {\n        const elementRef = useRef(undefined);\n        if (!elementRef.current) elementRef.current = createElement(props, context);\n        const propsRef = useRef(props);\n        const { instance } = elementRef.current;\n        useEffect(function updateElementProps() {\n            if (propsRef.current !== props) {\n                updateElement(instance, props, propsRef.current);\n                propsRef.current = props;\n            }\n        }, [\n            instance,\n            props,\n            updateElement\n        ]);\n        return elementRef;\n    };\n}\n","import { useEffect, useRef } from 'react';\nexport function useEventHandlers(element, eventHandlers) {\n    const eventHandlersRef = useRef(undefined);\n    useEffect(function addEventHandlers() {\n        if (eventHandlers != null) {\n            element.instance.on(eventHandlers);\n        }\n        eventHandlersRef.current = eventHandlers;\n        return function removeEventHandlers() {\n            if (eventHandlersRef.current != null) {\n                element.instance.off(eventHandlersRef.current);\n            }\n            eventHandlersRef.current = null;\n        };\n    }, [\n        element,\n        eventHandlers\n    ]);\n}\n","export function withPane(props, context) {\n    const pane = props.pane ?? context.pane;\n    return pane ? {\n        ...props,\n        pane\n    } : props;\n}\n","import { useEffect } from 'react';\nimport { useAttribution } from './attribution.js';\nimport { useLeafletContext } from './context.js';\nimport { useEventHandlers } from './events.js';\nimport { withPane } from './pane.js';\nexport function useLayerLifecycle(element, context) {\n    useEffect(function addLayer() {\n        const container = context.layerContainer ?? context.map;\n        container.addLayer(element.instance);\n        return function removeLayer() {\n            context.layerContainer?.removeLayer(element.instance);\n            context.map.removeLayer(element.instance);\n        };\n    }, [\n        context,\n        element\n    ]);\n}\nexport function createLayerHook(useElement) {\n    return function useLayer(props) {\n        const context = useLeafletContext();\n        const elementRef = useElement(withPane(props, context), context);\n        useAttribution(context.map, props.attribution);\n        useEventHandlers(elementRef.current, props.eventHandlers);\n        useLayerLifecycle(elementRef.current, context);\n        return elementRef;\n    };\n}\n","import { useEffect, useRef } from 'react';\nexport function useAttribution(map, attribution) {\n    const attributionRef = useRef(attribution);\n    useEffect(function updateAttribution() {\n        if (attribution !== attributionRef.current && map.attributionControl != null) {\n            if (attributionRef.current != null) {\n                map.attributionControl.removeAttribution(attributionRef.current);\n            }\n            if (attribution != null) {\n                map.attributionControl.addAttribution(attribution);\n            }\n        }\n        attributionRef.current = attribution;\n    }, [\n        map,\n        attribution\n    ]);\n}\n","import { useEffect, useRef } from 'react';\nimport { useLeafletContext } from './context.js';\nimport { useEventHandlers } from './events.js';\nimport { useLayerLifecycle } from './layer.js';\nimport { withPane } from './pane.js';\nexport function usePathOptions(element, props) {\n    const optionsRef = useRef(undefined);\n    useEffect(function updatePathOptions() {\n        if (props.pathOptions !== optionsRef.current) {\n            const options = props.pathOptions ?? {};\n            element.instance.setStyle(options);\n            optionsRef.current = options;\n        }\n    }, [\n        element,\n        props\n    ]);\n}\nexport function createPathHook(useElement) {\n    return function usePath(props) {\n        const context = useLeafletContext();\n        const elementRef = useElement(withPane(props, context), context);\n        useEventHandlers(elementRef.current, props.eventHandlers);\n        useLayerLifecycle(elementRef.current, context);\n        usePathOptions(elementRef.current, props);\n        return elementRef;\n    };\n}\n","import { createElementObject, createTileLayerComponent, updateGridLayer, withPane } from '@react-leaflet/core';\nimport { TileLayer as LeafletTileLayer } from 'leaflet';\nexport const TileLayer = createTileLayerComponent(function createTileLayer({ url, ...options }, context) {\n    const layer = new LeafletTileLayer(url, withPane(options, context));\n    return createElementObject(layer, context);\n}, function updateTileLayer(layer, props, prevProps) {\n    updateGridLayer(layer, props, prevProps);\n    const { url } = props;\n    if (url != null && url !== prevProps.url) {\n        layer.setUrl(url);\n    }\n});\n","import React, { forwardRef, useEffect, useImperativeHandle, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { LeafletContext } from './context.js';\nexport function createContainerComponent(useElement) {\n    function ContainerComponent(props, forwardedRef) {\n        const { instance, context } = useElement(props).current;\n        useImperativeHandle(forwardedRef, ()=>instance);\n        const { children } = props;\n        return children == null ? null : /*#__PURE__*/ React.createElement(LeafletContext, {\n            value: context\n        }, children);\n    }\n    return /*#__PURE__*/ forwardRef(ContainerComponent);\n}\nexport function createDivOverlayComponent(useElement) {\n    function OverlayComponent(props, forwardedRef) {\n        const [isOpen, setOpen] = useState(false);\n        const { instance } = useElement(props, setOpen).current;\n        useImperativeHandle(forwardedRef, ()=>instance);\n        // biome-ignore lint/correctness/useExhaustiveDependencies: update overlay when children change\n        useEffect(function updateOverlay() {\n            if (isOpen) {\n                instance.update();\n            }\n        }, [\n            instance,\n            isOpen,\n            props.children\n        ]);\n        // @ts-ignore _contentNode missing in type definition\n        const contentNode = instance._contentNode;\n        return contentNode ? /*#__PURE__*/ createPortal(props.children, contentNode) : null;\n    }\n    return /*#__PURE__*/ forwardRef(OverlayComponent);\n}\nexport function createLeafComponent(useElement) {\n    function LeafComponent(props, forwardedRef) {\n        const { instance } = useElement(props).current;\n        useImperativeHandle(forwardedRef, ()=>instance);\n        return null;\n    }\n    return /*#__PURE__*/ forwardRef(LeafComponent);\n}\n","import { createContainerComponent, createDivOverlayComponent, createLeafComponent } from './component.js';\nimport { createControlHook } from './control.js';\nimport { createDivOverlayHook } from './div-overlay.js';\nimport { createElementHook, createElementObject } from './element.js';\nimport { createLayerHook } from './layer.js';\nimport { createPathHook } from './path.js';\nexport function createControlComponent(createInstance) {\n    function createElement(props, context) {\n        return createElementObject(createInstance(props), context);\n    }\n    const useElement = createElementHook(createElement);\n    const useControl = createControlHook(useElement);\n    return createLeafComponent(useControl);\n}\nexport function createLayerComponent(createElement, updateElement) {\n    const useElement = createElementHook(createElement, updateElement);\n    const useLayer = createLayerHook(useElement);\n    return createContainerComponent(useLayer);\n}\nexport function createOverlayComponent(createElement, useLifecycle) {\n    const useElement = createElementHook(createElement);\n    const useOverlay = createDivOverlayHook(useElement, useLifecycle);\n    return createDivOverlayComponent(useOverlay);\n}\nexport function createPathComponent(createElement, updateElement) {\n    const useElement = createElementHook(createElement, updateElement);\n    const usePath = createPathHook(useElement);\n    return createContainerComponent(usePath);\n}\nexport function createTileLayerComponent(createElement, updateElement) {\n    const useElement = createElementHook(createElement, updateElement);\n    const useLayer = createLayerHook(useElement);\n    return createLeafComponent(useLayer);\n}\n","export function updateGridLayer(layer, props, prevProps) {\n    const { opacity, zIndex } = props;\n    if (opacity != null && opacity !== prevProps.opacity) {\n        layer.setOpacity(opacity);\n    }\n    if (zIndex != null && zIndex !== prevProps.zIndex) {\n        layer.setZIndex(zIndex);\n    }\n}\n","import { createElementObject, createPathComponent, extendContext } from '@react-leaflet/core';\nimport { GeoJSON as LeafletGeoJSON } from 'leaflet';\nexport const GeoJSON = createPathComponent(function createGeoJSON({ data, ...options }, ctx) {\n    const geoJSON = new LeafletGeoJSON(data, options);\n    return createElementObject(geoJSON, extendContext(ctx, {\n        overlayContainer: geoJSON\n    }));\n}, function updateGeoJSON(layer, props, prevProps) {\n    if (props.style !== prevProps.style) {\n        if (props.style == null) {\n            layer.resetStyle();\n        } else {\n            layer.setStyle(props.style);\n        }\n    }\n});\n","/**\n * Territory definitions for War of 1812: Rise of the Nation\n *\n * Each territory has:\n * - id: unique key\n * - name: display name\n * - theater: Great Lakes | Chesapeake | Southern | Maritime\n * - startingOwner: 'us' | 'british' | 'native' | 'neutral'\n * - points: territory point value per round\n * - hasFort: whether a fort provides +1 die defense bonus\n * - adjacency: array of adjacent territory ids\n * - hexCells: array of {col, row} hex positions this territory occupies\n * - primaryCell: index into hexCells for the cell that shows name/troops/etc.\n */\n\n//  Hex Grid Constants \nexport const HEX_SIZE = 40; // flat-top hex \"radius\"\nexport const HEX_WIDTH = HEX_SIZE * 2; // 100px\nexport const HEX_HEIGHT = Math.round(HEX_SIZE * Math.sqrt(3)); // 87px\nexport const HEX_COL_SPACING = HEX_SIZE * 1.5; // 75px\nexport const HEX_ROW_SPACING = HEX_HEIGHT; // 87px\nexport const HEX_GRID_COLS = 15;\nexport const HEX_GRID_ROWS = 6;\n\n/**\n * Convert hex grid coordinates to pixel position.\n * Flat-top hex: odd columns are offset down by half a hex height.\n */\nexport function hexToPixel(col, row) {\n  const x = col * HEX_COL_SPACING;\n  const y = row * HEX_ROW_SPACING + (col % 2 === 1 ? HEX_HEIGHT / 2 : 0);\n  return { x, y };\n}\n\n// Legacy aliases for any code that still imports these\nexport const GRID_COLS = HEX_GRID_COLS;\nexport const GRID_ROWS = HEX_GRID_ROWS;\n\nconst territories = {\n  //  Great Lakes Theater \n  detroit: {\n    id: 'detroit',\n    name: 'Detroit',\n    theater: 'Great Lakes',\n    startingOwner: 'us',\n    points: 2,\n    hasFort: true,\n    adjacency: ['fort_dearborn', 'lake_erie', 'upper_canada', 'ohio_valley'],\n    hexCells: [{ col: 2, row: 1 }, { col: 3, row: 1 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 80,200 L 230,200 L 250,310 L 180,340 L 80,330 Z',\n    },\n    centroid: { x: 168, y: 270 },\n    labelPosition: { x: 168, y: 250 },\n    troopPosition: { x: 135, y: 310 },\n    pointsPosition: { x: 215, y: 220 },\n  },\n  fort_dearborn: {\n    id: 'fort_dearborn',\n    name: 'Fort Dearborn',\n    theater: 'Great Lakes',\n    startingOwner: 'us',\n    points: 1,\n    hasFort: true,\n    adjacency: ['detroit', 'ohio_valley', 'indiana_territory'],\n    hexCells: [{ col: 1, row: 1 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 80,360 L 230,360 L 250,470 L 180,500 L 80,490 Z',\n    },\n    centroid: { x: 164, y: 430 },\n    labelPosition: { x: 164, y: 410 },\n    troopPosition: { x: 130, y: 470 },\n    pointsPosition: { x: 215, y: 380 },\n  },\n  niagara: {\n    id: 'niagara',\n    name: 'Niagara',\n    theater: 'Great Lakes',\n    startingOwner: 'british',\n    points: 2,\n    hasFort: true,\n    adjacency: ['lake_erie', 'upper_canada', 'new_york', 'lake_ontario'],\n    hexCells: [{ col: 5, row: 1 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 280,200 L 430,200 L 450,310 L 380,340 L 280,330 Z',\n    },\n    centroid: { x: 368, y: 270 },\n    labelPosition: { x: 368, y: 250 },\n    troopPosition: { x: 335, y: 310 },\n    pointsPosition: { x: 415, y: 220 },\n  },\n  lake_erie: {\n    id: 'lake_erie',\n    name: 'Lake Erie',\n    theater: 'Great Lakes',\n    startingOwner: 'neutral',\n    points: 2,\n    hasFort: false,\n    adjacency: ['detroit', 'niagara', 'ohio_valley', 'upper_canada'],\n    hexCells: [{ col: 4, row: 1 }],\n    primaryCell: 0,\n    isNaval: true,\n    polygon: {\n      d: 'M 280,360 L 430,360 L 450,470 L 380,500 L 280,490 Z',\n    },\n    centroid: { x: 368, y: 430 },\n    labelPosition: { x: 368, y: 410 },\n    troopPosition: { x: 335, y: 470 },\n    pointsPosition: { x: 415, y: 380 },\n  },\n  lake_ontario: {\n    id: 'lake_ontario',\n    name: 'Lake Ontario',\n    theater: 'Great Lakes',\n    startingOwner: 'neutral',\n    points: 1,\n    hasFort: false,\n    adjacency: ['niagara', 'upper_canada', 'new_york', 'montreal'],\n    hexCells: [{ col: 6, row: 1 }],\n    primaryCell: 0,\n    isNaval: true,\n    polygon: {\n      d: 'M 480,200 L 630,200 L 650,310 L 580,340 L 480,330 Z',\n    },\n    centroid: { x: 568, y: 270 },\n    labelPosition: { x: 568, y: 250 },\n    troopPosition: { x: 535, y: 310 },\n    pointsPosition: { x: 615, y: 220 },\n  },\n  upper_canada: {\n    id: 'upper_canada',\n    name: 'Upper Canada',\n    theater: 'Great Lakes',\n    startingOwner: 'british',\n    points: 2,\n    hasFort: true,\n    adjacency: ['detroit', 'niagara', 'lake_erie', 'lake_ontario', 'montreal'],\n    hexCells: [{ col: 3, row: 0 }, { col: 4, row: 0 }, { col: 5, row: 0 }],\n    primaryCell: 1,\n    polygon: {\n      d: 'M 50,30 L 450,30 L 470,150 L 300,170 L 80,160 L 50,90 Z',\n    },\n    centroid: { x: 260, y: 100 },\n    labelPosition: { x: 260, y: 85 },\n    troopPosition: { x: 220, y: 135 },\n    pointsPosition: { x: 400, y: 55 },\n  },\n\n  //  Chesapeake Theater \n  washington_dc: {\n    id: 'washington_dc',\n    name: 'Washington D.C.',\n    theater: 'Chesapeake',\n    startingOwner: 'us',\n    points: 3,\n    hasFort: false,\n    adjacency: ['baltimore', 'virginia', 'bladensburg'],\n    hexCells: [{ col: 9, row: 2 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 680,360 L 830,360 L 850,470 L 780,500 L 680,490 Z',\n    },\n    centroid: { x: 768, y: 430 },\n    labelPosition: { x: 768, y: 410 },\n    troopPosition: { x: 735, y: 470 },\n    pointsPosition: { x: 815, y: 380 },\n  },\n  baltimore: {\n    id: 'baltimore',\n    name: 'Baltimore',\n    theater: 'Chesapeake',\n    startingOwner: 'us',\n    points: 2,\n    hasFort: true,\n    adjacency: ['washington_dc', 'bladensburg', 'new_york', 'chesapeake_bay'],\n    hexCells: [{ col: 10, row: 2 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 880,200 L 1030,200 L 1050,310 L 980,340 L 880,330 Z',\n    },\n    centroid: { x: 968, y: 270 },\n    labelPosition: { x: 968, y: 250 },\n    troopPosition: { x: 935, y: 310 },\n    pointsPosition: { x: 1015, y: 220 },\n  },\n  bladensburg: {\n    id: 'bladensburg',\n    name: 'Bladensburg',\n    theater: 'Chesapeake',\n    startingOwner: 'us',\n    points: 1,\n    hasFort: false,\n    adjacency: ['washington_dc', 'baltimore', 'virginia', 'chesapeake_bay'],\n    hexCells: [{ col: 11, row: 2 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 880,360 L 1030,360 L 1050,470 L 980,500 L 880,490 Z',\n    },\n    centroid: { x: 968, y: 430 },\n    labelPosition: { x: 968, y: 410 },\n    troopPosition: { x: 935, y: 470 },\n    pointsPosition: { x: 1015, y: 380 },\n  },\n  chesapeake_bay: {\n    id: 'chesapeake_bay',\n    name: 'Chesapeake Bay',\n    theater: 'Chesapeake',\n    startingOwner: 'neutral',\n    points: 1,\n    hasFort: false,\n    adjacency: ['baltimore', 'bladensburg', 'virginia', 'atlantic_sea_lanes'],\n    hexCells: [{ col: 12, row: 2 }],\n    primaryCell: 0,\n    isNaval: true,\n    polygon: {\n      d: 'M 1080,200 L 1230,200 L 1250,470 L 1180,500 L 1080,490 Z',\n    },\n    centroid: { x: 1168, y: 350 },\n    labelPosition: { x: 1168, y: 330 },\n    troopPosition: { x: 1135, y: 465 },\n    pointsPosition: { x: 1215, y: 220 },\n  },\n  virginia: {\n    id: 'virginia',\n    name: 'Virginia',\n    theater: 'Chesapeake',\n    startingOwner: 'us',\n    points: 1,\n    hasFort: false,\n    adjacency: ['washington_dc', 'bladensburg', 'chesapeake_bay', 'carolina', 'ohio_valley'],\n    hexCells: [{ col: 8, row: 2 }, { col: 8, row: 3 }, { col: 9, row: 3 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 680,520 L 830,520 L 850,630 L 780,660 L 680,650 Z',\n    },\n    centroid: { x: 768, y: 590 },\n    labelPosition: { x: 768, y: 570 },\n    troopPosition: { x: 735, y: 630 },\n    pointsPosition: { x: 815, y: 540 },\n  },\n\n  //  Southern Theater \n  new_orleans: {\n    id: 'new_orleans',\n    name: 'New Orleans',\n    theater: 'Southern',\n    startingOwner: 'us',\n    points: 3,\n    hasFort: true,\n    adjacency: ['mobile', 'mississippi_territory', 'gulf_of_mexico'],\n    hexCells: [{ col: 1, row: 4 }, { col: 2, row: 4 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 80,680 L 230,680 L 250,790 L 180,820 L 80,810 Z',\n    },\n    centroid: { x: 168, y: 750 },\n    labelPosition: { x: 168, y: 730 },\n    troopPosition: { x: 135, y: 790 },\n    pointsPosition: { x: 215, y: 700 },\n  },\n  mobile: {\n    id: 'mobile',\n    name: 'Mobile',\n    theater: 'Southern',\n    startingOwner: 'us',\n    points: 1,\n    hasFort: false,\n    adjacency: ['new_orleans', 'creek_nation', 'gulf_of_mexico', 'carolina'],\n    hexCells: [{ col: 3, row: 4 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 280,680 L 430,680 L 450,790 L 380,820 L 280,810 Z',\n    },\n    centroid: { x: 368, y: 750 },\n    labelPosition: { x: 368, y: 730 },\n    troopPosition: { x: 335, y: 790 },\n    pointsPosition: { x: 415, y: 700 },\n  },\n  creek_nation: {\n    id: 'creek_nation',\n    name: 'Creek Nation',\n    theater: 'Southern',\n    startingOwner: 'native',\n    points: 2,\n    hasFort: false,\n    startingTroops: 4,\n    adjacency: ['mobile', 'mississippi_territory', 'carolina'],\n    hexCells: [{ col: 4, row: 3 }, { col: 5, row: 3 }, { col: 4, row: 4 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 480,680 L 630,680 L 650,790 L 580,820 L 480,810 Z',\n    },\n    centroid: { x: 568, y: 750 },\n    labelPosition: { x: 568, y: 730 },\n    troopPosition: { x: 535, y: 790 },\n    pointsPosition: { x: 615, y: 700 },\n  },\n  mississippi_territory: {\n    id: 'mississippi_territory',\n    name: 'Mississippi Terr.',\n    theater: 'Southern',\n    startingOwner: 'us',\n    points: 1,\n    hasFort: false,\n    adjacency: ['new_orleans', 'creek_nation', 'indiana_territory'],\n    hexCells: [{ col: 2, row: 3 }, { col: 3, row: 3 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 80,520 L 230,520 L 250,630 L 180,660 L 80,650 Z',\n    },\n    centroid: { x: 168, y: 590 },\n    labelPosition: { x: 168, y: 570 },\n    troopPosition: { x: 135, y: 630 },\n    pointsPosition: { x: 215, y: 540 },\n  },\n  gulf_of_mexico: {\n    id: 'gulf_of_mexico',\n    name: 'Gulf of Mexico',\n    theater: 'Southern',\n    startingOwner: 'neutral',\n    points: 1,\n    hasFort: false,\n    adjacency: ['new_orleans', 'mobile', 'atlantic_sea_lanes'],\n    hexCells: [{ col: 1, row: 5 }, { col: 2, row: 5 }, { col: 3, row: 5 }],\n    primaryCell: 1,\n    isNaval: true,\n    polygon: {\n      d: 'M 80,840 L 430,840 L 450,870 L 180,870 L 80,865 Z',\n    },\n    centroid: { x: 244, y: 857 },\n    labelPosition: { x: 244, y: 850 },\n    troopPosition: { x: 210, y: 868 },\n    pointsPosition: { x: 400, y: 848 },\n  },\n\n  //  Maritime Theater \n  atlantic_sea_lanes: {\n    id: 'atlantic_sea_lanes',\n    name: 'Atlantic Sea Lanes',\n    theater: 'Maritime',\n    startingOwner: 'british',\n    points: 2,\n    hasFort: false,\n    adjacency: ['chesapeake_bay', 'gulf_of_mexico', 'halifax', 'new_york'],\n    hexCells: [{ col: 14, row: 2 }, { col: 14, row: 3 }],\n    primaryCell: 0,\n    isNaval: true,\n    polygon: {\n      d: 'M 1280,200 L 1360,200 L 1380,870 L 1320,870 L 1280,520 Z',\n    },\n    centroid: { x: 1324, y: 535 },\n    labelPosition: { x: 1324, y: 515 },\n    troopPosition: { x: 1295, y: 580 },\n    pointsPosition: { x: 1350, y: 230 },\n  },\n  halifax: {\n    id: 'halifax',\n    name: 'Halifax',\n    theater: 'Maritime',\n    startingOwner: 'british',\n    points: 2,\n    hasFort: true,\n    adjacency: ['atlantic_sea_lanes', 'montreal', 'new_york'],\n    hexCells: [{ col: 13, row: 0 }, { col: 13, row: 1 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 800,30 L 1050,30 L 1070,180 L 950,200 L 800,190 L 780,90 Z',\n    },\n    centroid: { x: 925, y: 115 },\n    labelPosition: { x: 925, y: 95 },\n    troopPosition: { x: 880, y: 155 },\n    pointsPosition: { x: 1010, y: 60 },\n  },\n\n  //  Connectors / Interior \n  new_york: {\n    id: 'new_york',\n    name: 'New York',\n    theater: 'Chesapeake',\n    startingOwner: 'us',\n    points: 2,\n    hasFort: false,\n    adjacency: ['niagara', 'lake_ontario', 'baltimore', 'atlantic_sea_lanes', 'halifax', 'montreal'],\n    hexCells: [{ col: 9, row: 1 }, { col: 10, row: 1 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 680,200 L 830,200 L 850,310 L 780,340 L 680,330 Z',\n    },\n    centroid: { x: 768, y: 270 },\n    labelPosition: { x: 768, y: 250 },\n    troopPosition: { x: 735, y: 310 },\n    pointsPosition: { x: 815, y: 220 },\n  },\n  montreal: {\n    id: 'montreal',\n    name: 'Montreal',\n    theater: 'Great Lakes',\n    startingOwner: 'british',\n    points: 2,\n    hasFort: true,\n    adjacency: ['upper_canada', 'lake_ontario', 'new_york', 'halifax'],\n    hexCells: [{ col: 7, row: 0 }, { col: 8, row: 0 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 500,30 L 750,30 L 770,150 L 650,170 L 500,160 L 480,90 Z',\n    },\n    centroid: { x: 625, y: 100 },\n    labelPosition: { x: 625, y: 85 },\n    troopPosition: { x: 585, y: 135 },\n    pointsPosition: { x: 720, y: 55 },\n  },\n  ohio_valley: {\n    id: 'ohio_valley',\n    name: 'Ohio Valley',\n    theater: 'Great Lakes',\n    startingOwner: 'us',\n    points: 1,\n    hasFort: false,\n    adjacency: ['detroit', 'fort_dearborn', 'lake_erie', 'indiana_territory', 'virginia'],\n    hexCells: [{ col: 4, row: 2 }, { col: 5, row: 2 }, { col: 6, row: 2 }],\n    primaryCell: 1,\n    polygon: {\n      d: 'M 480,360 L 630,360 L 650,470 L 580,500 L 480,490 Z',\n    },\n    centroid: { x: 568, y: 430 },\n    labelPosition: { x: 568, y: 410 },\n    troopPosition: { x: 535, y: 470 },\n    pointsPosition: { x: 615, y: 380 },\n  },\n  indiana_territory: {\n    id: 'indiana_territory',\n    name: 'Indiana Terr.',\n    theater: 'Great Lakes',\n    startingOwner: 'native',\n    points: 1,\n    hasFort: false,\n    startingTroops: 4,\n    adjacency: ['fort_dearborn', 'ohio_valley', 'mississippi_territory'],\n    hexCells: [{ col: 2, row: 2 }, { col: 3, row: 2 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 280,520 L 430,520 L 450,630 L 380,660 L 280,650 Z',\n    },\n    centroid: { x: 368, y: 590 },\n    labelPosition: { x: 368, y: 570 },\n    troopPosition: { x: 335, y: 630 },\n    pointsPosition: { x: 415, y: 540 },\n  },\n  carolina: {\n    id: 'carolina',\n    name: 'Carolina',\n    theater: 'Southern',\n    startingOwner: 'us',\n    points: 1,\n    hasFort: false,\n    adjacency: ['virginia', 'mobile', 'creek_nation'],\n    hexCells: [{ col: 6, row: 3 }, { col: 7, row: 3 }, { col: 10, row: 3 }],\n    primaryCell: 0,\n    polygon: {\n      d: 'M 880,520 L 1030,520 L 1050,790 L 980,820 L 880,810 Z',\n    },\n    centroid: { x: 968, y: 670 },\n    labelPosition: { x: 968, y: 650 },\n    troopPosition: { x: 935, y: 790 },\n    pointsPosition: { x: 1015, y: 540 },\n  },\n};\n\n// Theater configuration for visual grouping on the board\nexport const theaterConfig = {\n  'Great Lakes': { color: 'rgba(37, 99, 235, 0.08)' },\n  'Chesapeake': { color: 'rgba(220, 38, 38, 0.08)' },\n  'Southern': { color: 'rgba(161, 98, 7, 0.08)' },\n  'Maritime': { color: 'rgba(107, 114, 128, 0.08)' },\n};\n\n//  Decoration Hexes (non-interactive terrain) \nexport const decorationHexes = [\n  // Great Lakes water (Lake Huron, northwest)\n  { col: 1, row: 0, type: 'water', label: 'Lake' },\n  { col: 2, row: 0, type: 'water', label: 'Huron' },\n  { col: 0, row: 1, type: 'water', label: '' },\n  // Atlantic Ocean (eastern edge)\n  { col: 14, row: 0, type: 'water', label: 'Atlantic' },\n  { col: 14, row: 1, type: 'water', label: '' },\n  { col: 13, row: 2, type: 'water', label: 'Ocean' },\n  { col: 14, row: 4, type: 'water', label: '' },\n  { col: 14, row: 5, type: 'water', label: '' },\n  // Gulf of Mexico (southern coast)\n  { col: 0, row: 5, type: 'water', label: '' },\n  { col: 4, row: 5, type: 'water', label: '' },\n  { col: 5, row: 4, type: 'water', label: '' },\n  { col: 5, row: 5, type: 'water', label: '' },\n  // Appalachian Mountains (central-east)\n  { col: 7, row: 2, type: 'mountain', label: 'Appalachian' },\n  { col: 7, row: 1, type: 'mountain', label: '' },\n  // Forest / wilderness (western frontier)\n  { col: 0, row: 2, type: 'forest', label: '' },\n  { col: 1, row: 2, type: 'forest', label: '' },\n  { col: 0, row: 3, type: 'forest', label: '' },\n  { col: 1, row: 3, type: 'forest', label: '' },\n  { col: 0, row: 4, type: 'forest', label: '' },\n];\n\n// Helper: get all territory ids\nexport const getTerritoryIds = () => Object.keys(territories);\n\n// Helper: get territories by theater\nexport const getTheater = (theater) =>\n  Object.values(territories).filter((t) => t.theater === theater);\n\n// Helper: check adjacency\nexport const areAdjacent = (id1, id2) =>\n  territories[id1]?.adjacency.includes(id2) ?? false;\n\n// Helper: get starting territories for a faction\nexport const getStartingTerritories = (faction) =>\n  Object.values(territories).filter((t) => t.startingOwner === faction);\n\nexport default territories;\n","/**\n * GeoJSON-style territory polygon definitions for War of 1812.\n *\n * Each territory is defined by real-world approximate lat/lng coordinates\n * that tile together on a Leaflet map of eastern North America.\n * Coordinates form closed polygons (first point == last point).\n *\n * labelPos: [lat, lng] for the territory name label\n */\n\nconst territoryGeo = {\n  //  Great Lakes Theater \n\n  upper_canada: {\n    coords: [\n      [48.0, -80.0], [48.0, -76.0], [46.5, -74.5], [45.5, -75.5],\n      [44.5, -76.5], [44.0, -77.5], [43.8, -79.0], [43.5, -79.5],\n      [43.2, -80.0], [44.0, -81.5], [45.5, -82.0], [48.0, -84.0],\n      [48.0, -80.0]\n    ],\n    labelPos: [46.0, -78.5],\n  },\n\n  montreal: {\n    coords: [\n      [48.0, -76.0], [48.0, -72.0], [47.0, -70.0], [46.0, -71.5],\n      [45.5, -73.0], [45.0, -73.5], [45.0, -74.0], [45.5, -75.5],\n      [46.5, -74.5], [48.0, -76.0]\n    ],\n    labelPos: [46.8, -73.5],\n  },\n\n  lake_ontario: {\n    coords: [\n      [44.5, -76.5], [45.0, -74.0], [44.5, -74.0], [43.8, -75.5],\n      [43.5, -76.5], [43.3, -77.5], [44.0, -77.5], [44.5, -76.5]\n    ],\n    labelPos: [44.0, -76.0],\n  },\n\n  niagara: {\n    coords: [\n      [44.0, -77.5], [43.3, -77.5], [43.0, -78.0], [42.8, -79.0],\n      [43.2, -79.5], [43.5, -79.5], [43.8, -79.0], [44.0, -77.5]\n    ],\n    labelPos: [43.3, -78.5],\n  },\n\n  lake_erie: {\n    coords: [\n      [43.2, -80.0], [43.5, -79.5], [43.2, -79.5], [42.8, -79.0],\n      [42.5, -79.5], [42.2, -80.5], [41.8, -81.0], [41.5, -82.5],\n      [41.8, -83.0], [42.3, -82.5], [42.8, -81.0], [43.2, -80.0]\n    ],\n    labelPos: [42.3, -80.8],\n  },\n\n  detroit: {\n    coords: [\n      [44.0, -81.5], [43.2, -80.0], [42.8, -81.0], [42.3, -82.5],\n      [41.8, -83.0], [42.0, -84.0], [42.8, -84.5], [44.0, -84.5],\n      [45.0, -84.0], [45.5, -82.0], [44.0, -81.5]\n    ],\n    labelPos: [43.0, -83.0],\n  },\n\n  fort_dearborn: {\n    coords: [\n      [45.0, -84.0], [44.0, -84.5], [42.8, -84.5], [42.0, -84.0],\n      [41.8, -85.0], [41.5, -87.5], [42.5, -87.5], [44.0, -87.5],\n      [45.5, -87.0], [45.5, -85.0], [45.0, -84.0]\n    ],\n    labelPos: [43.5, -86.0],\n  },\n\n  //  Chesapeake Theater \n\n  new_york: {\n    coords: [\n      [44.5, -74.0], [45.0, -74.0], [45.0, -73.5], [44.5, -72.0],\n      [43.0, -72.0], [41.5, -72.0], [40.5, -74.0], [41.0, -75.0],\n      [42.0, -76.0], [43.0, -76.5], [43.5, -76.5], [43.8, -75.5],\n      [44.5, -74.0]\n    ],\n    labelPos: [42.8, -74.0],\n  },\n\n  baltimore: {\n    coords: [\n      [41.0, -75.0], [40.5, -74.0], [39.8, -74.5], [39.5, -75.5],\n      [39.5, -76.0], [39.8, -76.5], [40.5, -76.5], [41.0, -76.0],\n      [41.0, -75.0]\n    ],\n    labelPos: [40.2, -75.5],\n  },\n\n  washington_dc: {\n    coords: [\n      [39.8, -76.5], [39.5, -76.0], [39.0, -76.5], [38.5, -77.0],\n      [38.5, -77.8], [39.0, -78.0], [39.5, -77.5], [40.5, -76.5],\n      [39.8, -76.5]\n    ],\n    labelPos: [39.2, -77.0],\n  },\n\n  bladensburg: {\n    coords: [\n      [39.5, -76.0], [39.5, -75.5], [39.0, -75.0], [38.5, -75.5],\n      [38.0, -76.0], [38.5, -76.5], [39.0, -76.5], [39.5, -76.0]\n    ],\n    labelPos: [38.8, -75.8],\n  },\n\n  chesapeake_bay: {\n    coords: [\n      [38.5, -75.5], [39.0, -75.0], [39.5, -75.5], [39.8, -74.5],\n      [40.5, -74.0], [40.0, -73.0], [39.0, -73.0], [37.5, -74.0],\n      [37.0, -75.0], [37.5, -75.5], [38.0, -76.0], [38.5, -75.5]\n    ],\n    labelPos: [38.5, -74.2],\n  },\n\n  virginia: {\n    coords: [\n      [39.0, -78.0], [38.5, -77.8], [38.5, -77.0], [38.0, -76.0],\n      [37.5, -75.5], [37.0, -75.0], [36.5, -76.0], [36.5, -78.0],\n      [37.0, -80.0], [38.0, -80.0], [39.0, -78.0]\n    ],\n    labelPos: [37.5, -78.0],\n  },\n\n  //  Southern Theater \n\n  carolina: {\n    coords: [\n      [36.5, -78.0], [36.5, -76.0], [35.0, -75.5], [33.5, -77.5],\n      [33.0, -79.5], [33.0, -81.0], [34.0, -81.0], [35.5, -81.0],\n      [36.5, -78.0]\n    ],\n    labelPos: [35.0, -78.5],\n  },\n\n  creek_nation: {\n    coords: [\n      [35.5, -81.0], [34.0, -81.0], [33.0, -81.0], [33.0, -79.5],\n      [32.0, -81.0], [31.0, -82.5], [31.0, -85.0], [32.5, -86.0],\n      [34.0, -86.0], [35.0, -85.0], [35.5, -84.0], [35.5, -81.0]\n    ],\n    labelPos: [33.0, -83.5],\n  },\n\n  mississippi_territory: {\n    coords: [\n      [35.0, -85.0], [34.0, -86.0], [32.5, -86.0], [31.0, -85.0],\n      [31.0, -88.0], [31.5, -90.0], [33.0, -91.0], [35.0, -91.0],\n      [35.0, -88.0], [35.0, -85.0]\n    ],\n    labelPos: [33.0, -88.5],\n  },\n\n  mobile: {\n    coords: [\n      [31.0, -85.0], [31.0, -82.5], [30.0, -83.5], [29.5, -85.0],\n      [29.5, -87.5], [30.0, -88.5], [31.0, -88.0], [31.0, -85.0]\n    ],\n    labelPos: [30.3, -85.5],\n  },\n\n  new_orleans: {\n    coords: [\n      [31.5, -90.0], [31.0, -88.0], [30.0, -88.5], [29.5, -87.5],\n      [29.0, -89.0], [28.5, -90.5], [29.0, -91.5], [30.0, -92.0],\n      [31.5, -91.5], [31.5, -90.0]\n    ],\n    labelPos: [30.0, -90.0],\n  },\n\n  gulf_of_mexico: {\n    coords: [\n      [29.5, -87.5], [29.5, -85.0], [29.0, -83.5], [28.0, -83.0],\n      [27.0, -84.0], [26.5, -87.0], [27.0, -89.5], [28.5, -90.5],\n      [29.0, -89.0], [29.5, -87.5]\n    ],\n    labelPos: [27.8, -86.5],\n  },\n\n  //  Interior Connectors \n\n  ohio_valley: {\n    coords: [\n      [42.5, -79.5], [42.8, -79.0], [43.0, -78.0], [43.0, -76.5],\n      [42.0, -76.0], [41.0, -76.0], [41.0, -75.0], [40.5, -76.5],\n      [39.5, -77.5], [39.0, -78.0], [38.0, -80.0], [37.0, -80.0],\n      [37.0, -81.5], [38.5, -82.0], [39.5, -82.5], [40.5, -82.0],\n      [41.5, -81.0], [42.2, -80.5], [42.5, -79.5]\n    ],\n    labelPos: [40.0, -79.0],\n  },\n\n  indiana_territory: {\n    coords: [\n      [41.8, -85.0], [42.0, -84.0], [41.8, -83.0], [41.5, -82.5],\n      [40.5, -82.0], [39.5, -82.5], [38.5, -82.0], [37.0, -81.5],\n      [37.0, -83.0], [36.5, -84.0], [35.5, -84.0], [35.0, -85.0],\n      [35.0, -88.0], [35.0, -91.0], [38.5, -91.0],\n      [39.0, -88.0], [40.0, -87.5], [41.5, -87.5], [41.8, -85.0]\n    ],\n    labelPos: [38.0, -86.5],\n  },\n\n  //  Maritime Theater \n\n  halifax: {\n    coords: [\n      [48.0, -72.0], [49.0, -67.0], [47.5, -63.0], [46.0, -60.0],\n      [44.5, -63.5], [43.5, -65.5], [44.0, -67.0], [44.5, -68.0],\n      [44.5, -72.0], [46.0, -71.5], [47.0, -70.0], [48.0, -72.0]\n    ],\n    labelPos: [46.5, -65.0],\n  },\n\n  atlantic_sea_lanes: {\n    coords: [\n      [43.5, -65.5], [44.5, -63.5], [44.0, -60.0], [42.0, -58.0],\n      [38.0, -60.0], [34.0, -64.0], [32.0, -68.0], [33.5, -72.0],\n      [35.0, -75.5], [36.5, -76.0], [37.0, -75.0], [37.5, -74.0],\n      [39.0, -73.0], [40.0, -73.0], [41.5, -72.0], [43.0, -72.0],\n      [44.0, -67.0], [43.5, -65.5]\n    ],\n    labelPos: [37.0, -68.0],\n  },\n};\n\n/** Theater label positions [lat, lng] */\nexport const theaterLabels = [\n  { name: 'GREAT LAKES THEATER', pos: [47.0, -82.0] },\n  { name: 'CHESAPEAKE THEATER', pos: [41.5, -74.5] },\n  { name: 'SOUTHERN THEATER', pos: [32.0, -90.5] },\n  { name: 'MARITIME THEATER', pos: [41.0, -62.0] },\n];\n\nexport default territoryGeo;\n","import React, { useRef, useEffect, useMemo } from 'react';\nimport { MapContainer, TileLayer, GeoJSON, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport territories from '../data/territories';\nimport territoryGeo, { theaterLabels } from '../data/territoryGeo';\n\nconst ownerColors = {\n  us: { fill: '#2d6fd6', stroke: '#1a4fa0' },        // Brighter blue for accessibility\n  british: { fill: '#e63946', stroke: '#b82030' },   // Brighter red for accessibility\n  native: { fill: '#b8864e', stroke: '#7a5230' },    // Brighter brown for accessibility\n  neutral: { fill: '#607080', stroke: '#455565' },\n};\n\n/** Convert our territory coords [lat,lng] to GeoJSON [lng,lat] polygon. */\nfunction buildGeoJSON(territoryOwners, troops) {\n  const features = Object.entries(territoryGeo).map(([id, geo]) => {\n    const terr = territories[id];\n    const owner = territoryOwners?.[id] || terr?.startingOwner || 'neutral';\n    const troopCount = troops?.[id] || 0;\n    return {\n      type: 'Feature',\n      properties: {\n        id,\n        name: terr?.name || id,\n        owner,\n        troopCount,\n        points: terr?.points || 0,\n        hasFort: terr?.hasFort || false,\n        isNaval: terr?.isNaval || false,\n        theater: terr?.theater || '',\n        labelPos: geo.labelPos,\n      },\n      geometry: {\n        type: 'Polygon',\n        coordinates: [geo.coords.map(([lat, lng]) => [lng, lat])],\n      },\n    };\n  });\n  return { type: 'FeatureCollection', features };\n}\n\n/** Style each territory polygon based on owner and naval status. */\nfunction getStyle(feature) {\n  const { owner, isNaval } = feature.properties;\n  const colors = ownerColors[owner] || ownerColors.neutral;\n  return {\n    fillColor: colors.fill,\n    color: colors.stroke,\n    weight: 2,\n    opacity: 1,\n    fillOpacity: isNaval ? 0.45 : 0.7,\n    dashArray: isNaval ? '6 4' : undefined,\n  };\n}\n\n/** Theater labels rendered as Leaflet divIcon markers. */\nfunction TheaterLabels() {\n  const map = useMap();\n\n  useEffect(() => {\n    const markers = theaterLabels.map(({ name, pos }) => {\n      const icon = L.divIcon({\n        className: 'theater-label',\n        html: `<span>${name}</span>`,\n        iconSize: [200, 24],\n        iconAnchor: [100, 12],\n      });\n      return L.marker(pos, { icon, interactive: false, zIndexOffset: -1000 }).addTo(map);\n    });\n    return () => markers.forEach((m) => m.remove());\n  }, [map]);\n\n  return null;\n}\n\n/** Highlight the selected territory with a bright overlay. */\nfunction SelectionOverlay({ selectedTerritory }) {\n  const map = useMap();\n\n  useEffect(() => {\n    if (!selectedTerritory || !territoryGeo[selectedTerritory]) return;\n    const geo = territoryGeo[selectedTerritory];\n    const latlngs = geo.coords.map(([lat, lng]) => [lat, lng]);\n    const polygon = L.polygon(latlngs, {\n      color: '#ffd700',\n      weight: 4,\n      fillColor: '#ffd700',\n      fillOpacity: 0.2,\n      dashArray: undefined,\n      interactive: false,\n    }).addTo(map);\n    return () => polygon.remove();\n  }, [map, selectedTerritory]);\n\n  return null;\n}\n\n/** Highlight neighboring territories with green dashed outline. */\nfunction NeighborHighlight({ selectedTerritory }) {\n  const map = useMap();\n\n  useEffect(() => {\n    if (!selectedTerritory || !territories[selectedTerritory]) return;\n\n    const neighbors = territories[selectedTerritory].adjacency || [];\n    const polygons = neighbors\n      .map(neighborId => {\n        if (!territoryGeo[neighborId]) return null;\n\n        const geo = territoryGeo[neighborId];\n        const latlngs = geo.coords.map(([lat, lng]) => [lat, lng]);\n\n        return L.polygon(latlngs, {\n          color: '#4ade80',      // green-400\n          weight: 3,\n          fillColor: '#4ade80',\n          fillOpacity: 0.15,\n          dashArray: '5 5',      // dashed outline\n          interactive: false,\n        }).addTo(map);\n      })\n      .filter(Boolean);\n\n    return () => polygons.forEach(p => p.remove());\n  }, [map, selectedTerritory]);\n\n  return null;\n}\n\n/** Highlight AI-targeted territories with pulsing orange overlay. */\nfunction HighlightOverlay({ highlightedTerritories }) {\n  const map = useMap();\n\n  useEffect(() => {\n    if (!highlightedTerritories || highlightedTerritories.length === 0) return;\n\n    const polygons = highlightedTerritories\n      .map(id => {\n        if (!territoryGeo[id]) return null;\n        const geo = territoryGeo[id];\n        const latlngs = geo.coords.map(([lat, lng]) => [lat, lng]);\n        return L.polygon(latlngs, {\n          color: '#f97316',\n          weight: 3,\n          fillColor: '#f97316',\n          fillOpacity: 0.3,\n          className: 'ai-highlight-pulse',\n          interactive: false,\n        }).addTo(map);\n      })\n      .filter(Boolean);\n\n    return () => polygons.forEach(p => p.remove());\n  }, [map, highlightedTerritories]);\n\n  return null;\n}\n\n/** Troop count markers on each territory. */\nfunction TroopMarkers({ territoryOwners, troops }) {\n  const map = useMap();\n  const [zoom, setZoom] = React.useState(map.getZoom());\n\n  // Track zoom level changes\n  useEffect(() => {\n    const handleZoom = () => setZoom(map.getZoom());\n    map.on('zoomend', handleZoom);\n    return () => map.off('zoomend', handleZoom);\n  }, [map]);\n\n  useEffect(() => {\n    const markers = [];\n    const showNames = zoom > 5; // Show names at zoom 6+\n\n    // Zoom-based font scaling: smaller at low zoom, larger when zoomed in\n    const baseFontSize = zoom <= 4 ? 10 : zoom === 5 ? 11 : zoom === 6 ? 13 : 15;\n    const nameFontSize = baseFontSize + 1;\n    const countFontSize = baseFontSize + 4;\n    const ptsFontSize = baseFontSize - 1;\n\n    Object.entries(territoryGeo).forEach(([id, geo]) => {\n      const terr = territories[id];\n      const troopCount = troops?.[id] || 0;\n      const owner = territoryOwners?.[id] || terr?.startingOwner || 'neutral';\n      const colors = ownerColors[owner] || ownerColors.neutral;\n      const pts = terr?.points || 0;\n      const fort = terr?.hasFort ? '<span style=\"font-size:1.3em; margin-left:3px;\">&#9971;</span>' : '';\n\n      const html = `\n        <div class=\"troop-marker\" style=\"\n          border-color:${colors.stroke};\n          background:rgba(0,0,0,0.85);\n          padding:6px 8px;\n          border-radius:4px;\n          border:2px solid ${colors.stroke};\n          box-shadow:0 2px 8px rgba(0,0,0,0.5);\n          min-width:60px;\n          text-align:center;\n        \">\n          ${showNames ? `<div class=\"troop-name\" style=\"font-size:${nameFontSize}px; margin-bottom:3px; color:#f4e4c1; font-weight:600; line-height:1.2;\">${terr?.name || id}${fort}</div>` : ''}\n          ${troopCount > 0 ? `<div class=\"troop-count\" style=\"background:${colors.fill}; font-size:${countFontSize}px; font-weight:bold; padding:4px 8px; margin:3px 0; border-radius:3px; color:#fff;\">${troopCount}</div>` : ''}\n          ${pts > 0 ? `<div class=\"troop-pts\" style=\"font-size:${ptsFontSize}px; margin-top:3px; color:#d4af37; opacity:0.9;\">${pts}pt${pts > 1 ? 's' : ''}</div>` : ''}\n        </div>\n      `;\n\n      const icon = L.divIcon({\n        className: 'troop-icon-wrapper',\n        html,\n        iconSize: [90, 60],\n        iconAnchor: [45, 30],\n      });\n\n      markers.push(\n        L.marker(geo.labelPos, { icon, interactive: false, zIndexOffset: 1000 }).addTo(map)\n      );\n    });\n    return () => markers.forEach((m) => m.remove());\n  }, [map, territoryOwners, troops, zoom]);\n\n  return null;\n}\n\nexport default function Map({ territoryOwners, selectedTerritory, onTerritoryClick, troops, highlightedTerritories }) {\n  const geoJsonRef = useRef(null);\n  const onTerritoryClickRef = useRef(onTerritoryClick);\n  onTerritoryClickRef.current = onTerritoryClick;\n\n  const geoData = useMemo(() => buildGeoJSON(territoryOwners, troops), [territoryOwners, troops]);\n\n  // Force re-render of GeoJSON when data changes\n  const geoKey = useMemo(() => JSON.stringify(territoryOwners) + JSON.stringify(troops), [territoryOwners, troops]);\n\n  const onEachFeature = (feature, layer) => {\n    const { id } = feature.properties;\n\n    layer.on({\n      click: () => onTerritoryClickRef.current?.(id),\n      mouseover: (e) => {\n        const l = e.target;\n        l.setStyle({ weight: 3, fillOpacity: 0.9 });\n        l.bringToFront();\n      },\n      mouseout: (e) => {\n        const l = e.target;\n        const style = getStyle(feature);\n        l.setStyle(style);\n      },\n    });\n  };\n\n  // Center on eastern North America\n  const center = [39.0, -78.0];\n  const bounds = [[26.0, -94.0], [50.0, -56.0]];\n\n  return (\n    <MapContainer\n      center={center}\n      zoom={5}\n      minZoom={4}\n      maxZoom={7}\n      maxBounds={bounds}\n      maxBoundsViscosity={1.0}\n      style={{ width: '100%', height: '100%', minHeight: '500px', background: '#1a2744' }}\n      zoomControl={true}\n      attributionControl={false}\n    >\n      {/* Vintage / muted tile layer */}\n      <TileLayer\n        url=\"https://server.arcgisonline.com/ArcGIS/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}\"\n        opacity={0.4}\n      />\n      {/* Second layer for land features */}\n      <TileLayer\n        url=\"https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png\"\n        opacity={0.5}\n      />\n\n      {/* Territory polygons */}\n      <GeoJSON\n        key={geoKey}\n        ref={geoJsonRef}\n        data={geoData}\n        style={getStyle}\n        onEachFeature={onEachFeature}\n      />\n\n      {/* Selection highlight */}\n      <SelectionOverlay selectedTerritory={selectedTerritory} />\n\n      {/* Neighbor territory highlighting */}\n      <NeighborHighlight selectedTerritory={selectedTerritory} />\n\n      {/* AI action highlighting */}\n      <HighlightOverlay highlightedTerritories={highlightedTerritories} />\n\n      {/* Theater region labels */}\n      <TheaterLabels />\n\n      {/* Troop counts and territory names */}\n      <TroopMarkers territoryOwners={territoryOwners} troops={troops} />\n    </MapContainer>\n  );\n}\n","import React from 'react';\n\nconst factionLabels = {\n  us: 'United States',\n  british: 'British / Canada',\n  native: 'Native Coalition',\n};\n\nconst factionColors = {\n  us: '#4a7ec7',\n  british: '#e63946',\n  native: '#d4a24e',\n};\n\nexport default function Scoreboard({ scores, playerFaction, nationalismMeter, playerTerritoryCount, nativeResistance, navalDominance, factionMultiplier }) {\n  return (\n    <div className=\"bg-war-navy/50 rounded-lg p-3 space-y-3 border border-parchment-dark/8\" aria-live=\"polite\" aria-atomic=\"true\">\n      <h3 className=\"text-war-gold/90 font-display text-base tracking-wide border-b border-war-gold/15 pb-2\">\n        Scores\n      </h3>\n\n      {Object.entries(scores).map(([faction, score]) => (\n        <div key={faction} className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-3 h-3 rounded-sm\" style={{ background: factionColors[faction] }} />\n            <span className={`text-sm font-body ${faction === playerFaction ? 'text-war-gold font-bold' : 'text-parchment/70'}`}>\n              {factionLabels[faction]}\n              {faction === playerFaction && ' (You)'}\n            </span>\n          </div>\n          <span className=\"text-parchment font-bold text-base font-display\">{score}</span>\n        </div>\n      ))}\n\n      <div className=\"pt-2 border-t border-parchment-dark/10\">\n        <div className=\"flex justify-between text-sm\">\n          <span className=\"text-parchment-dark/50 font-body\">Your territories</span>\n          <span className=\"text-parchment/80 font-bold font-body\">{playerTerritoryCount}</span>\n        </div>\n      </div>\n\n      {/* Faction meter */}\n      {playerFaction === 'us' && (\n        <div className=\"pt-2 border-t border-parchment-dark/10\">\n          <div className=\"flex justify-between text-sm mb-1.5\">\n            <span className=\"text-parchment-dark/50 font-body\">Nationalism</span>\n            <span className=\"text-war-gold/80 font-bold font-body\">{nationalismMeter}%</span>\n          </div>\n          <div className=\"w-full bg-war-ink rounded-full h-2 overflow-hidden\">\n            <div className=\"h-full rounded-full transition-all duration-500\" style={{ width: `${nationalismMeter}%`, background: 'linear-gradient(to right, #1a3a6e, #c9a227)' }} />\n          </div>\n          <p className=\"text-sm text-parchment-dark/40 mt-1 font-body\">Multiplier: x{factionMultiplier.toFixed(2)}</p>\n        </div>\n      )}\n      {playerFaction === 'native' && (\n        <div className=\"pt-2 border-t border-parchment-dark/10\">\n          <div className=\"flex justify-between text-sm mb-1.5\">\n            <span className=\"text-parchment-dark/50 font-body\">Resistance</span>\n            <span className=\"text-war-gold/80 font-bold font-body\">{nativeResistance}/6</span>\n          </div>\n          <div className=\"w-full bg-war-ink rounded-full h-2 overflow-hidden\">\n            <div className=\"h-full rounded-full transition-all duration-500\" style={{ width: `${Math.round((Math.min(nativeResistance, 6) / 6) * 100)}%`, background: 'linear-gradient(to right, #5a3a1e, #c9a227)' }} />\n          </div>\n          <p className=\"text-sm text-parchment-dark/40 mt-1 font-body\">Multiplier: x{factionMultiplier.toFixed(2)}</p>\n        </div>\n      )}\n      {playerFaction === 'british' && (\n        <div className=\"pt-2 border-t border-parchment-dark/10\">\n          <div className=\"flex justify-between text-sm mb-1.5\">\n            <span className=\"text-parchment-dark/50 font-body\">Naval Dominance</span>\n            <span className=\"text-war-gold/80 font-bold font-body\">{navalDominance}/4</span>\n          </div>\n          <div className=\"w-full bg-war-ink rounded-full h-2 overflow-hidden\">\n            <div className=\"h-full rounded-full transition-all duration-500\" style={{ width: `${Math.round((Math.min(navalDominance, 4) / 4) * 100)}%`, background: 'linear-gradient(to right, #6b1a2a, #c9a227)' }} />\n          </div>\n          <p className=\"text-sm text-parchment-dark/40 mt-1 font-body\">Multiplier: x{factionMultiplier.toFixed(2)}</p>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport territories from '../data/territories';\n\nconst ownerLabels = {\n  us: 'United States',\n  british: 'British/Canada',\n  native: 'Native Coalition',\n  neutral: 'Neutral',\n};\n\nexport default function TerritoryInfo({ territoryId, territoryOwners, troops }) {\n  if (!territoryId || !territories[territoryId]) {\n    return (\n      <div className=\"bg-war-navy/50 rounded-lg p-4 border border-parchment-dark/8\">\n        <p className=\"text-parchment-dark/40 text-sm italic font-body\">\n          Click a territory on the map to view details.\n        </p>\n      </div>\n    );\n  }\n\n  const terr = territories[territoryId];\n  const owner = territoryOwners[territoryId] || terr.startingOwner;\n  const troopCount = troops[territoryId] || 0;\n\n  return (\n    <div className=\"bg-war-navy/50 rounded-lg p-4 space-y-2 border border-parchment-dark/8\">\n      <h3 className=\"text-war-gold/90 font-display text-base tracking-wide\">{terr.name}</h3>\n      <div className=\"text-sm space-y-1.5 text-parchment/70 font-body\">\n        <p><span className=\"text-parchment-dark/50\">Theater:</span> {terr.theater}</p>\n        <p><span className=\"text-parchment-dark/50\">Controlled by:</span> {ownerLabels[owner]}</p>\n        <p><span className=\"text-parchment-dark/50\">Troops:</span> {troopCount}</p>\n        <p><span className=\"text-parchment-dark/50\">Point value:</span> {terr.points} per round</p>\n        {terr.hasFort && (\n          <p className=\"text-war-gold/70 text-sm\">&#9971; Fortified &mdash; defenders get +1 die bonus</p>\n        )}\n        {terr.isNaval && (\n          <p className=\"text-[#4a7ec7] text-sm\">~ Naval zone &mdash; requires naval superiority</p>\n        )}\n      </div>\n      {terr.adjacency && (\n        <div className=\"pt-2 border-t border-parchment-dark/10\">\n          <p className=\"text-sm text-parchment-dark/40 font-body\">\n            Adjacent: {terr.adjacency.map((id) => territories[id]?.name).filter(Boolean).join(', ')}\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function IntroScreen({ playerFaction, onContinue, gameMode }) {\n  const isExplorer = gameMode === 'explorer';\n\n  const factionIntros = {\n    us: {\n      title: 'Welcome to the War of 1812',\n      subtitle: 'You are commanding the United States forces',\n      context: `The year is 1812. The United States, still a young nation, is tired of British interference with American shipping and the impressment of American sailors into the Royal Navy. Britain is also supporting Native American resistance to U.S. expansion in the Northwest Territory.`,\n      simpleContext: `It is the year 1812. America is a young country. Britain keeps stopping American ships and taking American sailors. Britain is also helping Native Americans fight against American settlers moving west.`,\n      yourRole: `As the American commander, your goal is to defend U.S. territory and expand into British-held Canada. You'll need to build public support (nationalism) while managing your military forces across multiple theaters of war.`,\n      simpleYourRole: `You are the American leader. Your job is to protect American land and try to take over parts of Canada. You need to keep your people happy and lead your soldiers to victory.`,\n      objectives: [\n        'Control key strategic territories worth victory points',\n        'Build nationalism through military victories and smart decisions',\n        'Reach 50 victory points to win the war',\n        'Answer historical questions correctly for bonuses',\n      ],\n      simpleObjectives: [\n        'Take control of important territories to earn points',\n        'Win battles to make your people proud',\n        'Get to 50 points to win the game',\n        'Answer history questions to get extra help',\n      ],\n      historicalNote: 'This conflict would later be called \"The Second War of Independence\" and would help establish the United States as a truly independent nation.',\n      simpleHistoricalNote: 'This war helped America show the world it was a real, strong country that could stand on its own.',\n      howToPlay: null,\n      simpleHowToPlay: [\n        'Each turn you will see a historical event, then place troops, fight battles, and move your army.',\n        'Read the events carefully  they have quiz questions that give you bonuses!',\n        'Click on territories to place troops, attack enemies, or move your army.',\n        'Use the \"?\" button if you need help.',\n      ],\n    },\n    british: {\n      title: 'Welcome to the War of 1812',\n      subtitle: 'You are commanding the British/Canadian forces',\n      context: `The year is 1812. Britain is locked in a life-or-death struggle with Napoleon in Europe, but the upstart Americans have declared war! They seek to conquer Canada while Britain's attention is divided across the Atlantic.`,\n      simpleContext: `It is the year 1812. Britain is busy fighting a big war in Europe against Napoleon. Now America has also declared war on Britain! Americans want to take over Canada.`,\n      yourRole: `As the British commander, your goal is to defend Canada and protect your naval superiority. The Royal Navy rules the waves, and you must use this advantage while coordinating with Native allies to hold the line against American expansion.`,\n      simpleYourRole: `You are the British leader. Your job is to protect Canada from American invaders. You have the strongest navy in the world. Work with Native allies to stop America from growing.`,\n      objectives: [\n        'Defend Canadian territories from American invasion',\n        'Use naval superiority to control coastal and Great Lakes territories',\n        'Reach 50 victory points to win the war',\n        'Answer historical questions correctly for bonuses',\n      ],\n      simpleObjectives: [\n        'Protect Canada from American attacks',\n        'Use your strong navy to control the waters',\n        'Get to 50 points to win the game',\n        'Answer history questions to get extra help',\n      ],\n      historicalNote: 'Britain successfully defended Canada despite fighting a two-front war, proving that even a young nation\\'s ambitions could be checked by experienced military might.',\n      simpleHistoricalNote: 'Britain kept Canada safe even while fighting another war in Europe. This showed how powerful Britain\\'s army and navy really were.',\n      howToPlay: null,\n      simpleHowToPlay: [\n        'Each turn you will see a historical event, then place troops, fight battles, and move your army.',\n        'Read the events carefully  they have quiz questions that give you bonuses!',\n        'Click on territories to place troops, attack enemies, or move your army.',\n        'Use the \"?\" button if you need help.',\n      ],\n    },\n    native: {\n      title: 'Welcome to the War of 1812',\n      subtitle: 'You are commanding the Native Coalition',\n      context: `The year is 1812. For decades, American settlers have pushed westward into Native lands. Tecumseh has forged a powerful confederacy of tribes to resist this expansion, and the British-American conflict offers a chance to halt American aggression permanently.`,\n      simpleContext: `It is the year 1812. For many years, American settlers have been moving onto Native lands. A leader named Tecumseh has brought many tribes together to fight back. Now that Britain and America are at war, the tribes have a chance to protect their homeland.`,\n      yourRole: `As the Native commander, your goal is to protect tribal lands and stop American expansion. You'll use guerrilla tactics and knowledge of the frontier to fight for your people's survival and sovereignty.`,\n      simpleYourRole: `You are the Native leader. Your job is to protect your people's land from American settlers. You know the forests and rivers better than anyone. Use that knowledge to win.`,\n      objectives: [\n        'Hold and expand control of frontier territories',\n        'Maintain tribal resistance across multiple regions',\n        'Reach 50 victory points to preserve Native sovereignty',\n        'Answer historical questions correctly for bonuses',\n      ],\n      simpleObjectives: [\n        'Hold onto your land and take back what you can',\n        'Keep your tribes strong across the frontier',\n        'Get to 50 points to protect your homeland',\n        'Answer history questions to get extra help',\n      ],\n      historicalNote: 'The Native coalition fought valiantly, but ultimately the war would mark the beginning of the end for organized Native resistance east of the Mississippi River.',\n      simpleHistoricalNote: 'The Native tribes fought bravely, but sadly the war made it harder for them to keep their lands east of the Mississippi River.',\n      howToPlay: null,\n      simpleHowToPlay: [\n        'Each turn you will see a historical event, then place troops, fight battles, and move your army.',\n        'Read the events carefully  they have quiz questions that give you bonuses!',\n        'Click on territories to place troops, attack enemies, or move your army.',\n        'Use the \"?\" button if you need help.',\n      ],\n    },\n  };\n\n  const intro = factionIntros[playerFaction] || factionIntros.us;\n  const context = isExplorer && intro.simpleContext ? intro.simpleContext : intro.context;\n  const yourRole = isExplorer && intro.simpleYourRole ? intro.simpleYourRole : intro.yourRole;\n  const objectives = isExplorer && intro.simpleObjectives ? intro.simpleObjectives : intro.objectives;\n  const historicalNote = isExplorer && intro.simpleHistoricalNote ? intro.simpleHistoricalNote : intro.historicalNote;\n  const howToPlayItems = isExplorer && intro.simpleHowToPlay ? intro.simpleHowToPlay : null;\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center p-4\" style={{ zIndex: 1000, background: 'radial-gradient(ellipse at center, rgba(20,30,48,0.95) 0%, rgba(10,10,8,0.98) 100%)' }} role=\"presentation\">\n      <div className=\"w-full max-w-4xl max-h-full overflow-y-auto bg-war-navy border border-war-gold/30 shadow-modal rounded-lg animate-fadein\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Campaign briefing\">\n        {/* Header */}\n        <div className=\"px-8 py-6 border-b border-war-gold/20\" style={{\n          background: 'linear-gradient(135deg, rgba(139,26,26,0.3) 0%, rgba(20,30,48,0.95) 100%)',\n        }}>\n          <div className=\"flex items-center gap-2 mb-2\">\n            <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n            <p className=\"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold\">Campaign Briefing</p>\n          </div>\n          <h1 className=\"text-3xl md:text-4xl font-display text-war-gold tracking-wide mb-1\">\n            {intro.title}\n          </h1>\n          <p className={`text-parchment/80 font-body italic ${isExplorer ? 'text-xl leading-relaxed' : 'text-lg'}`}>{intro.subtitle}</p>\n        </div>\n\n        {/* Content */}\n        <div className={`px-8 space-y-6 ${isExplorer ? 'py-10' : 'py-8'}`}>\n          {/* Historical Context */}\n          <section>\n            <h2 className=\"text-war-gold/80 font-display text-xl mb-3 border-b border-war-gold/15 pb-2 tracking-wide\">\n              Historical Context\n            </h2>\n            <p className={`text-parchment/80 font-body ${isExplorer ? 'text-lg leading-loose' : 'text-base leading-relaxed'}`}>\n              {context}\n            </p>\n          </section>\n\n          {/* Your Role */}\n          <section className=\"bg-black/20 rounded-lg p-6 border-l-2 border-war-copper/50\">\n            <p className=\"text-xs text-war-copper/80 uppercase tracking-wider mb-2 font-body font-bold\">Your Role</p>\n            <p className={`text-parchment/80 font-body ${isExplorer ? 'text-lg leading-loose' : 'text-base leading-relaxed'}`}>\n              {yourRole}\n            </p>\n          </section>\n\n          {/* Objectives */}\n          <section>\n            <h2 className=\"text-war-gold/80 font-display text-xl mb-3 border-b border-war-gold/15 pb-2 tracking-wide\">\n              Your Objectives\n            </h2>\n            <ul className={`${isExplorer ? 'space-y-4' : 'space-y-3'}`}>\n              {objectives.map((objective, i) => (\n                <li key={i} className={`flex items-start text-parchment/80 font-body ${isExplorer ? 'text-lg' : 'text-base'}`}>\n                  <span className=\"text-war-gold font-bold mr-3 text-lg font-display\">{i + 1}.</span>\n                  <span className={isExplorer ? 'leading-loose' : 'leading-relaxed'}>{objective}</span>\n                </li>\n              ))}\n            </ul>\n          </section>\n\n          {/* Historical Note */}\n          <section className=\"bg-war-red/10 rounded-lg p-5 border-l-2 border-war-red/40\">\n            <p className=\"text-xs text-war-copper/80 uppercase tracking-wider mb-2 font-body font-bold\">Historical Note</p>\n            <p className={`text-parchment/70 font-body italic ${isExplorer ? 'text-lg leading-loose' : 'text-base leading-relaxed'}`}>\n              {historicalNote}\n            </p>\n          </section>\n\n          {/* Game Tips */}\n          <section className=\"bg-war-gold/5 rounded-lg p-5 border border-war-gold/15\">\n            <p className=\"text-xs text-war-gold/80 uppercase tracking-wider mb-3 font-body font-bold\">How to Play</p>\n            {howToPlayItems ? (\n              <ul className={`space-y-3 text-parchment-dark/70 font-body ${isExplorer ? 'text-lg leading-loose' : 'text-sm'}`}>\n                {howToPlayItems.map((item, i) => (\n                  <li key={i} className=\"flex items-start gap-2\">\n                    <span className=\"text-war-gold/60 font-bold flex-shrink-0\">&bull;</span>\n                    <span>{item}</span>\n                  </li>\n                ))}\n              </ul>\n            ) : (\n              <div className=\"space-y-2 text-parchment-dark/70 text-sm font-body\">\n                <p><span className=\"text-parchment/80\">Each turn</span> has phases: Event &rarr; Allocate troops &rarr; Battle &rarr; Maneuver &rarr; Score</p>\n                <p><span className=\"text-parchment/80\">Read historical events</span> carefully &mdash; they include knowledge questions with bonuses</p>\n                <p><span className=\"text-parchment/80\">Click territories</span> during your turn to place troops, attack, or move forces</p>\n                <p><span className=\"text-parchment/80\">Use the tutorial</span> button if you need help understanding the game mechanics</p>\n              </div>\n            )}\n          </section>\n        </div>\n\n        {/* Continue Button */}\n        <div className=\"px-8 pb-8 sticky bottom-0 bg-war-navy pt-4\">\n          <button\n            onClick={onContinue}\n            className={`w-full font-display rounded-lg font-bold tracking-wider\n                       bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer transition-colors\n                       shadow-copper ${isExplorer ? 'py-5 text-xl' : 'py-4 text-lg'}`}\n          >\n            Begin Your Campaign\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect, useMemo } from 'react';\n\nfunction shuffleChoices(choices, correctIndex) {\n  const indices = choices.map((_, i) => i);\n  for (let i = indices.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [indices[i], indices[j]] = [indices[j], indices[i]];\n  }\n  return {\n    choices: indices.map((i) => choices[i]),\n    correctIndex: indices.indexOf(correctIndex),\n    indices,\n  };\n}\n\nexport default function EventCard({ event, onDismiss, gameMode }) {\n  const [countdown, setCountdown] = useState(4);\n  const [phase, setPhase] = useState('reading');\n  const [selectedAnswer, setSelectedAnswer] = useState(null);\n\n  const shuffledQuiz = useMemo(() => {\n    if (!event?.quiz) return null;\n    return shuffleChoices(event.quiz.choices, event.quiz.correctIndex);\n  }, [event]);\n\n  useEffect(() => {\n    setCountdown(4);\n    setPhase('reading');\n    setSelectedAnswer(null);\n    if (!event) return;\n    const timer = setInterval(() => {\n      setCountdown((prev) => {\n        if (prev <= 1) { clearInterval(timer); return 0; }\n        return prev - 1;\n      });\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [event]);\n\n  useEffect(() => {\n    if (countdown === 0 && phase === 'reading') {\n      setPhase(event?.quiz && shuffledQuiz ? 'quiz' : 'result');\n    }\n  }, [countdown, phase, event, shuffledQuiz]);\n\n  if (!event) return null;\n\n  const isExplorer = gameMode === 'explorer';\n  const isCorrect = selectedAnswer !== null && shuffledQuiz && selectedAnswer === shuffledQuiz.correctIndex;\n\n  const handleAnswerSelect = (index) => {\n    setSelectedAnswer(index);\n    setPhase('result');\n  };\n\n  const handleDismiss = () => {\n    const quizResult = selectedAnswer !== null && shuffledQuiz\n      ? { answered: true, correct: selectedAnswer === shuffledQuiz.correctIndex }\n      : { answered: false };\n    onDismiss(quizResult);\n  };\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center p-4\" style={{ zIndex: 1000, background: 'radial-gradient(ellipse at center, rgba(20,30,48,0.95) 0%, rgba(10,10,8,0.98) 100%)' }} role=\"presentation\">\n      <div className=\"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-war-navy border border-war-gold/30 shadow-modal rounded-lg animate-fadein\" role=\"dialog\" aria-modal=\"true\" aria-label={`Historical event: ${event.title}`}>\n\n        {/* Header */}\n        <div className=\"sticky top-0 z-10 px-6 py-4 border-b border-war-gold/20\" style={{\n          background: 'linear-gradient(135deg, rgba(139,26,26,0.4) 0%, rgba(20,30,48,0.95) 100%)',\n        }}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"flex items-center gap-2 mb-1\">\n                <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n                <p className=\"text-war-copper text-sm tracking-[0.2em] uppercase font-body font-bold\">Historical Event</p>\n              </div>\n              <p className=\"text-parchment-dark/50 text-sm font-body\">{event.year}</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Body */}\n        <div className=\"px-6 py-5\">\n          <h2 className=\"text-2xl font-display text-parchment mb-4 tracking-wide\">{event.title}</h2>\n\n          <p className=\"text-parchment/80 text-base leading-relaxed mb-5 font-body italic border-l-2 border-war-gold/20 pl-4\">\n            &ldquo;{isExplorer && event.simpleDescription ? event.simpleDescription : event.description}&rdquo;\n          </p>\n\n          {event.primarySource && !isExplorer && (\n            <div className=\"bg-war-ink/40 rounded px-5 py-4 mb-5 border border-parchment-dark/10 relative\">\n              <span className=\"absolute -top-2 left-4 text-war-gold/30 text-3xl font-serif leading-none\" aria-hidden=\"true\">&ldquo;</span>\n              <p className=\"text-parchment/90 text-base leading-relaxed font-serif italic pl-3\">\n                {event.primarySource.quote}\n              </p>\n              <p className=\"text-war-copper/70 text-sm font-body mt-2 pl-3\">\n                &mdash; {event.primarySource.attribution}\n              </p>\n            </div>\n          )}\n\n          {event.didYouKnow && (\n            <div className=\"bg-war-gold/5 rounded px-5 py-4 mb-5 border border-war-gold/15\">\n              <p className=\"text-sm text-war-gold/80 uppercase tracking-wider mb-1 font-body font-bold\">Did You Know?</p>\n              <p className=\"text-parchment/80 text-base leading-relaxed font-body\">{isExplorer && event.simpleDidYouKnow ? event.simpleDidYouKnow : event.didYouKnow}</p>\n            </div>\n          )}\n\n          <div className=\"bg-black/20 rounded px-5 py-4 border-l-2 border-war-copper/50\">\n            <p className=\"text-sm text-war-copper/80 uppercase tracking-wider mb-1 font-body font-bold\">Effect</p>\n            <p className=\"text-parchment/90 text-base font-body\">{isExplorer && event.simpleEffect ? event.simpleEffect : event.effect}</p>\n          </div>\n        </div>\n\n        {/* Quiz */}\n        {phase === 'quiz' && shuffledQuiz && (\n          <div className=\"px-6 pb-5\">\n            <div className=\"border-t border-war-gold/15 pt-5\">\n              <p className=\"text-war-gold/80 text-sm tracking-[0.15em] uppercase font-body font-bold mb-3\">Knowledge Check</p>\n              <p className=\"text-parchment/90 text-base leading-relaxed mb-5 font-body\">{isExplorer && event.quiz.simpleQuestion ? event.quiz.simpleQuestion : event.quiz.question}</p>\n              <div className=\"space-y-2.5\">\n                {shuffledQuiz.choices.map((choice, i) => {\n                  const origIdx = shuffledQuiz.indices[i];\n                  const displayChoice = isExplorer && event.quiz.simpleChoices ? (event.quiz.simpleChoices[origIdx] || choice) : choice;\n                  return (\n                  <button\n                    key={i}\n                    onClick={() => handleAnswerSelect(i)}\n                    className=\"w-full text-left px-4 py-3 rounded border border-parchment-dark/15\n                               hover:border-war-gold/40 hover:bg-war-gold/5 transition-all\n                               text-parchment/85 text-base font-body cursor-pointer group\"\n                  >\n                    <span className=\"text-war-gold/70 font-bold mr-2 group-hover:text-war-gold\">{String.fromCharCode(65 + i)}.</span>\n                    {displayChoice}\n                  </button>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Result feedback */}\n        {phase === 'result' && selectedAnswer !== null && shuffledQuiz && (\n          <div className=\"px-6 pb-2\">\n            <div className=\"border-t border-war-gold/15 pt-5\">\n              <div className={`p-4 rounded border-l-2 mb-4 ${\n                isCorrect ? 'bg-green-900/20 border-green-500/60' : 'bg-red-900/15 border-red-500/50'\n              }`}>\n                <p className={`text-lg font-bold mb-2 font-display ${isCorrect ? 'text-green-400' : 'text-red-400'}`}>\n                  {isCorrect ? 'Correct!' : 'Not quite.'}\n                </p>\n                <p className=\"text-parchment/80 text-sm leading-relaxed font-body mb-1\">\n                  <span className=\"text-war-gold/80 font-bold\">Answer: </span>\n                  {isExplorer && event.quiz.simpleChoices ? (event.quiz.simpleChoices[event.quiz.correctIndex] || event.quiz.choices[event.quiz.correctIndex]) : event.quiz.choices[event.quiz.correctIndex]}\n                </p>\n                <p className=\"text-parchment/70 text-sm leading-relaxed font-body\">{isExplorer && event.quiz.simpleExplanation ? event.quiz.simpleExplanation : event.quiz.explanation}</p>\n                {isCorrect && event.quiz.reward && (\n                  <p className=\"text-war-gold text-sm font-bold mt-3 font-body\">\n                    Bonus: {event.quiz.reward.troops ? `+${event.quiz.reward.troops} troops` : ''}\n                    {event.quiz.reward.nationalism ? ` +${event.quiz.reward.nationalism} nationalism` : ''}\n                  </p>\n                )}\n                {!isCorrect && event.quiz.penalty && (\n                  <p className=\"text-red-400/80 text-sm font-bold mt-3 font-body\">\n                    Penalty: {event.quiz.penalty.nationalism ? `${event.quiz.penalty.nationalism} nationalism` : ''}\n                    {event.quiz.penalty.troops ? ` ${event.quiz.penalty.troops} troops` : ''}\n                  </p>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Actions */}\n        <div className=\"px-6 pb-5 sticky bottom-0 bg-war-navy pt-3\">\n          {phase === 'reading' && (\n            <div className=\"w-full py-3 text-center\">\n              <span className=\"text-parchment-dark/40 text-sm font-body\">Reading... ({countdown}s)</span>\n              <div className=\"mt-2 w-full h-0.5 bg-parchment-dark/10 rounded overflow-hidden\">\n                <div className=\"h-full bg-war-gold/40 transition-all duration-1000\" style={{ width: `${((4 - countdown) / 4) * 100}%` }} />\n              </div>\n            </div>\n          )}\n          {phase === 'quiz' && (\n            <p className=\"text-center text-parchment-dark/40 text-sm italic py-3 font-body\">\n              Select your answer above\n            </p>\n          )}\n          {phase === 'result' && (\n            <button onClick={handleDismiss} className=\"w-full py-3 font-display rounded text-base font-bold tracking-wider bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer transition-colors shadow-copper\">\n              Continue\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport territories from '../data/territories';\n\nfunction DieFace({ value, color = '#ffffff', size = 52 }) {\n  const dotPositions = {\n    1: [[24, 24]],\n    2: [[14, 14], [34, 34]],\n    3: [[14, 14], [24, 24], [34, 34]],\n    4: [[14, 14], [34, 14], [14, 34], [34, 34]],\n    5: [[14, 14], [34, 14], [24, 24], [14, 34], [34, 34]],\n    6: [[14, 14], [34, 14], [14, 24], [34, 24], [14, 34], [34, 34]],\n    7: [[14, 10], [34, 10], [14, 24], [24, 24], [34, 24], [14, 38], [34, 38]],\n  };\n  const dots = dotPositions[Math.min(value, 7)] || dotPositions[1];\n  return (\n    <svg width={size} height={size} viewBox=\"0 0 48 48\" aria-label={`Die showing ${value}`} role=\"img\">\n      <rect x=\"2\" y=\"2\" width=\"44\" height=\"44\" rx=\"6\" fill={color} opacity=\"0.12\" stroke={color} strokeWidth=\"1.5\" />\n      {dots.map(([cx, cy], i) => (\n        <circle key={i} cx={cx} cy={cy} r=\"4\" fill={color} />\n      ))}\n    </svg>\n  );\n}\n\nexport default function BattleModal({ battle, onClose }) {\n  const [animating, setAnimating] = useState(true);\n  const [showResult, setShowResult] = useState(false);\n\n  useEffect(() => {\n    if (!showResult) return;\n    const handleKey = (e) => {\n      if (e.key === 'Escape') { e.preventDefault(); onClose(); }\n    };\n    window.addEventListener('keydown', handleKey);\n    return () => window.removeEventListener('keydown', handleKey);\n  }, [showResult, onClose]);\n\n  useEffect(() => {\n    if (battle) {\n      if (battle.undefended) {\n        setAnimating(false);\n        setShowResult(true);\n        return;\n      }\n      setAnimating(true);\n      setShowResult(false);\n      const timer = setTimeout(() => {\n        setAnimating(false);\n        setShowResult(true);\n      }, 1200);\n      return () => clearTimeout(timer);\n    }\n  }, [battle]);\n\n  if (!battle) return null;\n\n  const fromTerr = territories[battle.fromId];\n  const toTerr = territories[battle.toId];\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4\" style={{ zIndex: 1000 }} role=\"presentation\">\n      <div className=\"bg-war-navy border border-war-red/40 rounded-lg max-w-lg w-full overflow-hidden shadow-modal animate-fadein\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Battle results\">\n        {/* Header */}\n        <div className=\"px-6 py-4 border-b border-war-red/20\" style={{\n          background: 'linear-gradient(135deg, rgba(139,26,26,0.5) 0%, rgba(20,30,48,0.95) 100%)',\n        }}>\n          <div className=\"flex items-center gap-2 mb-1\">\n            <div className=\"w-1.5 h-1.5 rounded-full bg-red-500/80\" />\n            <p className=\"text-red-400/80 text-sm tracking-[0.2em] uppercase font-body font-bold\">Battle</p>\n          </div>\n          <h2 className=\"text-parchment font-display text-lg tracking-wide\">\n            {fromTerr?.name} <span className=\"text-war-gold/60 font-body text-base mx-1\">vs</span> {toTerr?.name}\n          </h2>\n        </div>\n\n        <div className=\"px-6 py-5\">\n          {battle.undefended ? (\n            <div className=\"text-center py-4 mb-4\">\n              <p className=\"text-parchment font-display text-lg mb-2\">Undefended Territory</p>\n              <p className=\"text-parchment-dark/60 text-sm font-body\">Your forces march in unopposed.</p>\n            </div>\n          ) : (\n            <div className=\"flex justify-between mb-5\">\n              <div className=\"text-center flex-1\">\n                <p className=\"text-[#4a90d9] text-sm uppercase tracking-wider mb-3 font-body font-bold\">Attacker</p>\n                <div className=\"flex gap-1.5 justify-center\">\n                  {battle.attackRolls.map((val, i) => (\n                    <div key={i} className={animating ? 'animate-bounce' : ''}>\n                      <DieFace value={animating ? Math.floor(Math.random() * 6) + 1 : val} color=\"#4a90d9\" />\n                    </div>\n                  ))}\n                </div>\n              </div>\n              <div className=\"flex items-center px-3\">\n                <span className=\"text-war-gold/40 font-display text-2xl\">vs</span>\n              </div>\n              <div className=\"text-center flex-1\">\n                <p className=\"text-red-400 text-sm uppercase tracking-wider mb-3 font-body font-bold\">Defender</p>\n                <div className=\"flex gap-1.5 justify-center\">\n                  {battle.defendRolls.map((val, i) => (\n                    <div key={i} className={animating ? 'animate-bounce' : ''}>\n                      <DieFace value={animating ? Math.floor(Math.random() * 6) + 1 : val} color=\"#e63946\" />\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {showResult && (\n            <div className=\"space-y-3 animate-slideup\">\n              <div className=\"flex justify-between text-sm font-body\">\n                <div className=\"text-parchment/80\">\n                  <span className=\"text-parchment-dark/50\">Attacker lost:</span>{' '}\n                  <span className=\"text-red-400 font-bold text-base\">{battle.attackerLosses}</span>\n                </div>\n                <div className=\"text-parchment/80\">\n                  <span className=\"text-parchment-dark/50\">Defender lost:</span>{' '}\n                  <span className=\"text-red-400 font-bold text-base\">{battle.defenderLosses}</span>\n                </div>\n              </div>\n\n              {(battle.attackLeaderBonus > 0 || battle.defendLeaderBonus > 0 || battle.fortBonus || battle.firstStrike) && (\n                <div className=\"text-sm text-war-gold/80 bg-war-gold/5 border border-war-gold/10 rounded px-4 py-2.5 font-body\">\n                  {battle.firstStrike && <p className=\"font-bold\">Ambush! First strike before dice!</p>}\n                  {battle.attackLeaderBonus > 0 && <p>Attacker leader: +{battle.attackLeaderBonus}</p>}\n                  {battle.defendLeaderBonus > 0 && <p>Defender leader: +{battle.defendLeaderBonus}</p>}\n                  {battle.fortBonus && <p>Fort defense: +1</p>}\n                </div>\n              )}\n\n              <div className={`text-center py-3.5 rounded text-lg font-display font-bold tracking-wide ${\n                battle.conquered\n                  ? 'bg-green-900/25 border border-green-500/30 text-green-400'\n                  : 'bg-red-900/15 border border-red-500/20 text-parchment/80'\n              }`}>\n                {battle.conquered ? `${toTerr?.name} Captured!` : 'Defenders Hold!'}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {showResult && (\n          <div className=\"px-6 pb-5\">\n            <button onClick={onClose} className=\"w-full py-3 bg-war-gold text-war-ink font-display rounded hover:bg-war-brass transition-colors cursor-pointer text-base font-bold tracking-wide shadow-copper\">\n              Continue\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\n\nexport default function KnowledgeCheck({ question, onAnswer, questionNumber, gameMode }) {\n  const [selectedIndex, setSelectedIndex] = useState(null);\n  const [answered, setAnswered] = useState(false);\n\n  if (!question) return null;\n\n  const isExplorer = gameMode === 'explorer';\n  const isCorrect = selectedIndex === question.correctIndex;\n\n  const handleSelect = (index) => {\n    if (answered) return;\n    setSelectedIndex(index);\n    setAnswered(true);\n  };\n\n  const handleContinue = () => {\n    onAnswer(isCorrect, selectedIndex);\n    setSelectedIndex(null);\n    setAnswered(false);\n  };\n\n  return (\n    <div className=\"fixed inset-0 flex justify-end pointer-events-none\" style={{ zIndex: 1000 }} role=\"presentation\">\n      {/* Full backdrop */}\n      <div className=\"absolute inset-0 pointer-events-auto\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,0.9) 0%, rgba(10,10,8,0.95) 100%)' }} />\n\n      {/* Side panel */}\n      <div className=\"relative w-full max-w-md h-full overflow-y-auto pointer-events-auto\n                      bg-war-navy border-l border-war-gold/20 shadow-modal kc-modal-animate\"\n           role=\"dialog\" aria-modal=\"true\" aria-label=\"Knowledge check question\">\n        {/* Header */}\n        <div className=\"px-6 py-4 border-b border-war-gold/20 sticky top-0 z-10\" style={{\n          background: 'linear-gradient(135deg, rgba(45,90,39,0.4) 0%, rgba(20,30,48,0.95) 100%)',\n        }}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"flex items-center gap-2 mb-1\">\n                <div className=\"w-1.5 h-1.5 rounded-full bg-green-500/60\" />\n                <p className=\"text-war-gold/80 text-sm tracking-[0.2em] uppercase font-body font-bold\">Knowledge Check</p>\n              </div>\n              {questionNumber > 0 && (\n                <span className=\"text-parchment-dark/40 text-sm font-body\">Question #{questionNumber}</span>\n              )}\n            </div>\n          </div>\n          <p className=\"text-parchment-dark/50 text-sm font-body mt-1\">Answer correctly for a bonus!</p>\n        </div>\n\n        {/* Question */}\n        <div className=\"px-6 py-6\">\n          <h2 className=\"text-xl font-display text-parchment/90 mb-5 leading-relaxed tracking-wide\">\n            {isExplorer && question.simpleQuestion ? question.simpleQuestion : question.question}\n          </h2>\n\n          {/* Choices */}\n          <div className=\"space-y-2.5\">\n            {question.choices.map((choice, i) => {\n              let style = 'border-parchment-dark/15 hover:border-war-gold/40 hover:bg-war-gold/5';\n              if (answered) {\n                if (i === question.correctIndex) {\n                  style = 'border-green-500/40 bg-green-900/20';\n                } else if (i === selectedIndex && !isCorrect) {\n                  style = 'border-red-500/40 bg-red-900/15';\n                } else {\n                  style = 'border-parchment-dark/10 opacity-60';\n                }\n              } else if (i === selectedIndex) {\n                style = 'border-war-gold/40 bg-war-gold/5';\n              }\n\n              const origIdx = question.shuffleIndices ? question.shuffleIndices[i] : i;\n              const displayChoice = isExplorer && question.simpleChoices ? (question.simpleChoices[origIdx] || choice) : choice;\n\n              return (\n                <button\n                  key={i}\n                  onClick={() => handleSelect(i)}\n                  disabled={answered}\n                  className={`w-full text-left px-5 py-3 rounded border transition-all\n                    text-parchment/80 text-base font-body ${style}\n                    ${answered ? 'cursor-default' : 'cursor-pointer'}`}\n                >\n                  <span className=\"text-war-gold/70 font-bold mr-2\">{String.fromCharCode(65 + i)}.</span>\n                  {displayChoice}\n                </button>\n              );\n            })}\n          </div>\n\n          {/* Result */}\n          {answered && (\n            <div className={`mt-5 p-4 rounded border-l-2 ${\n              isCorrect\n                ? 'bg-green-900/15 border-green-500/50'\n                : 'bg-red-900/10 border-red-500/40'\n            }`}>\n              <p className={`text-lg font-bold mb-2 font-display ${isCorrect ? 'text-green-400' : 'text-red-400'}`}>\n                {isCorrect ? 'Correct!' : 'Not quite.'}\n              </p>\n              <p className=\"text-parchment/70 text-sm leading-relaxed font-body\">\n                {isExplorer && question.simpleExplanation ? question.simpleExplanation : question.explanation}\n              </p>\n              {isCorrect && question.reward && (\n                <p className=\"text-war-gold text-sm font-bold mt-3 font-body\">\n                  Bonus: {question.reward.description}\n                </p>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Continue button */}\n        {answered && (\n          <div className=\"px-6 pb-5 sticky bottom-0 bg-war-navy pt-3\">\n            <button\n              onClick={handleContinue}\n              className=\"w-full py-3 bg-war-gold text-war-ink font-display rounded\n                         hover:bg-war-brass transition-colors cursor-pointer text-sm font-bold tracking-wider shadow-copper\"\n            >\n              Continue\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function KnowledgeCheckPanel({ totalAnswered, totalCorrect, onTakeCheck }) {\n  const percent = totalAnswered > 0 ? Math.round((totalCorrect / totalAnswered) * 100) : 0;\n\n  return (\n    <div className=\"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8\" data-tutorial=\"knowledge-check\">\n      <h3 className=\"text-war-gold/90 font-display text-base tracking-wide border-b border-war-gold/15 pb-2 mb-3\">\n        History Quiz\n      </h3>\n      {totalAnswered > 0 ? (\n        <div className=\"mb-3\">\n          <div className=\"flex justify-between text-sm text-parchment/70 mb-1.5 font-body\">\n            <span>{totalCorrect}/{totalAnswered} correct</span>\n            <span className=\"text-war-gold font-bold\">{percent}%</span>\n          </div>\n          <div className=\"w-full bg-war-ink rounded-full h-2 border border-parchment-dark/10 overflow-hidden\">\n            <div\n              className=\"h-full rounded-full transition-all duration-300\"\n              style={{ width: `${percent}%`, background: 'linear-gradient(to right, #854d0e, #c9a227)' }}\n            />\n          </div>\n        </div>\n      ) : (\n        <p className=\"text-parchment-dark/40 text-sm italic mb-3 font-body\">\n          Test your knowledge of the War of 1812!\n        </p>\n      )}\n      <button\n        onClick={onTakeCheck}\n        className=\"w-full py-2 bg-war-green text-parchment font-display text-sm rounded tracking-wide\n                   hover:brightness-125 transition-all cursor-pointer border border-green-800/50\"\n      >\n        Take a Quiz\n      </button>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\n\nexport default function ObjectivesPanel({ objectives }) {\n  const [expandedId, setExpandedId] = useState(null);\n\n  if (!objectives || objectives.length === 0) return null;\n\n  const completed = objectives.filter((o) => o.completed).length;\n\n  return (\n    <div className=\"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8\">\n      <h3 className=\"text-war-gold/90 font-display text-base tracking-wide border-b border-war-gold/15 pb-2 mb-3\">\n        Objectives ({completed}/{objectives.length})\n      </h3>\n      <div className=\"space-y-2\">\n        {objectives.map((obj) => {\n          const isExpanded = expandedId === obj.id;\n          const progressInfo = obj.progressInfo;\n          const progressPercent = progressInfo\n            ? Math.round((progressInfo.current / progressInfo.total) * 100)\n            : obj.completed ? 100 : 0;\n\n          return (\n            <div\n              key={obj.id}\n              className={`p-2 rounded cursor-pointer transition-colors ${\n                obj.completed ? 'bg-green-900/15' : 'hover:bg-black/15'\n              }`}\n              onClick={() => setExpandedId(isExpanded ? null : obj.id)}\n            >\n              <div className=\"flex items-start gap-2\">\n                <span className=\"text-sm mt-0.5 flex-shrink-0\">\n                  {obj.completed ? '\\u2705' : '\\u2B1C'}\n                </span>\n                <div className=\"min-w-0 flex-1\">\n                  <p className={`text-sm font-bold font-body ${obj.completed ? 'text-green-300/90' : 'text-parchment/80'}`}>\n                    {obj.title}\n                    <span className=\"text-war-gold/60 font-normal ml-1\">({obj.points} pts)</span>\n                  </p>\n                  <p className=\"text-parchment-dark/50 text-sm font-body\">{obj.description}</p>\n\n                  {/* Progress bar */}\n                  {!obj.completed && progressInfo && (\n                    <div className=\"mt-1.5\">\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"flex-1 bg-war-ink rounded-full h-1.5 overflow-hidden\">\n                          <div\n                            className=\"h-1.5 rounded-full transition-all duration-300\"\n                            style={{ width: `${progressPercent}%`, background: 'linear-gradient(to right, #854d0e, #c9a227)' }}\n                          />\n                        </div>\n                        <span className=\"text-parchment-dark/40 text-sm font-body\">\n                          {progressInfo.current}/{progressInfo.total}\n                        </span>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Historical context (expanded) */}\n                  {isExpanded && obj.historicalContext && (\n                    <div className=\"mt-2 bg-black/20 rounded px-3 py-2 border-l-2 border-war-copper/30\">\n                      <p className=\"text-war-copper/70 text-sm uppercase tracking-wide font-bold mb-0.5 font-body\">Why It Matters</p>\n                      <p className=\"text-parchment-dark/60 text-sm leading-relaxed font-body\">{obj.historicalContext}</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\n\nexport default function TurnJournal({ entries, round }) {\n  const [expanded, setExpanded] = useState(false);\n\n  if (!entries || entries.length === 0) return null;\n\n  // Show current round + last round by default, all when expanded\n  const visible = expanded ? entries : entries.filter((e) => e.round >= round - 1);\n\n  return (\n    <div className=\"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <h3 className=\"text-war-gold/90 font-display text-base tracking-wide border-b border-war-gold/15 pb-2 flex-1\">\n          War Journal\n        </h3>\n        {entries.length > 2 && (\n          <button\n            onClick={() => setExpanded(!expanded)}\n            className=\"text-parchment-dark/40 text-sm hover:text-war-gold/70 transition-colors cursor-pointer ml-2 font-body\"\n          >\n            {expanded ? 'Recent' : `All (${entries.length})`}\n          </button>\n        )}\n      </div>\n\n      <div className=\"space-y-3 max-h-64 overflow-y-auto pr-1\">\n        {visible.map((entry, i) => (\n          <div key={i} className=\"border-l-2 border-war-copper/20 pl-3\">\n            <p className=\"text-war-gold/70 text-sm font-bold font-body\">\n              Round {entry.round} &mdash; {entry.season}\n            </p>\n            {entry.items.map((item, j) => (\n              <p key={j} className=\"text-parchment/70 text-sm leading-relaxed font-body\">\n                {item}\n              </p>\n            ))}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","export type Fetch = typeof fetch\n\n/**\n * Response format\n */\nexport interface FunctionsResponseSuccess<T> {\n  data: T\n  error: null\n  response?: Response\n}\nexport interface FunctionsResponseFailure {\n  data: null\n  error: any\n  response?: Response\n}\nexport type FunctionsResponse<T> = FunctionsResponseSuccess<T> | FunctionsResponseFailure\n\n/**\n * Base error for Supabase Edge Function invocations.\n *\n * @example\n * ```ts\n * import { FunctionsError } from '@supabase/functions-js'\n *\n * throw new FunctionsError('Unexpected error invoking function', 'FunctionsError', {\n *   requestId: 'abc123',\n * })\n * ```\n */\nexport class FunctionsError extends Error {\n  context: any\n  constructor(message: string, name = 'FunctionsError', context?: any) {\n    super(message)\n    this.name = name\n    this.context = context\n  }\n}\n\n/**\n * Error thrown when the network request to an Edge Function fails.\n *\n * @example\n * ```ts\n * import { FunctionsFetchError } from '@supabase/functions-js'\n *\n * throw new FunctionsFetchError({ requestId: 'abc123' })\n * ```\n */\nexport class FunctionsFetchError extends FunctionsError {\n  constructor(context: any) {\n    super('Failed to send a request to the Edge Function', 'FunctionsFetchError', context)\n  }\n}\n\n/**\n * Error thrown when the Supabase relay cannot reach the Edge Function.\n *\n * @example\n * ```ts\n * import { FunctionsRelayError } from '@supabase/functions-js'\n *\n * throw new FunctionsRelayError({ region: 'us-east-1' })\n * ```\n */\nexport class FunctionsRelayError extends FunctionsError {\n  constructor(context: any) {\n    super('Relay Error invoking the Edge Function', 'FunctionsRelayError', context)\n  }\n}\n\n/**\n * Error thrown when the Edge Function returns a non-2xx status code.\n *\n * @example\n * ```ts\n * import { FunctionsHttpError } from '@supabase/functions-js'\n *\n * throw new FunctionsHttpError({ status: 500 })\n * ```\n */\nexport class FunctionsHttpError extends FunctionsError {\n  constructor(context: any) {\n    super('Edge Function returned a non-2xx status code', 'FunctionsHttpError', context)\n  }\n}\n// Define the enum for the 'region' property\nexport enum FunctionRegion {\n  Any = 'any',\n  ApNortheast1 = 'ap-northeast-1',\n  ApNortheast2 = 'ap-northeast-2',\n  ApSouth1 = 'ap-south-1',\n  ApSoutheast1 = 'ap-southeast-1',\n  ApSoutheast2 = 'ap-southeast-2',\n  CaCentral1 = 'ca-central-1',\n  EuCentral1 = 'eu-central-1',\n  EuWest1 = 'eu-west-1',\n  EuWest2 = 'eu-west-2',\n  EuWest3 = 'eu-west-3',\n  SaEast1 = 'sa-east-1',\n  UsEast1 = 'us-east-1',\n  UsWest1 = 'us-west-1',\n  UsWest2 = 'us-west-2',\n}\n\nexport type FunctionInvokeOptions = {\n  /**\n   * Object representing the headers to send with the request.\n   */\n  headers?: { [key: string]: string }\n  /**\n   * The HTTP verb of the request\n   */\n  method?: 'POST' | 'GET' | 'PUT' | 'PATCH' | 'DELETE'\n  /**\n   * The Region to invoke the function in.\n   */\n  region?: FunctionRegion\n  /**\n   * The body of the request.\n   */\n  body?:\n    | File\n    | Blob\n    | ArrayBuffer\n    | FormData\n    | ReadableStream<Uint8Array>\n    | Record<string, any>\n    | string\n  /**\n   * The AbortSignal to use for the request.\n   * */\n  signal?: AbortSignal\n  /**\n   * The timeout for the request in milliseconds.\n   * If the function takes longer than this, the request will be aborted.\n   * */\n  timeout?: number\n}\n","import { resolveFetch } from './helper'\nimport {\n  Fetch,\n  FunctionInvokeOptions,\n  FunctionRegion,\n  FunctionsFetchError,\n  FunctionsHttpError,\n  FunctionsRelayError,\n  FunctionsResponse,\n} from './types'\n\n/**\n * Client for invoking Supabase Edge Functions.\n */\nexport class FunctionsClient {\n  protected url: string\n  protected headers: Record<string, string>\n  protected region: FunctionRegion\n  protected fetch: Fetch\n\n  /**\n   * Creates a new Functions client bound to an Edge Functions URL.\n   *\n   * @example\n   * ```ts\n   * import { FunctionsClient, FunctionRegion } from '@supabase/functions-js'\n   *\n   * const functions = new FunctionsClient('https://xyzcompany.supabase.co/functions/v1', {\n   *   headers: { apikey: 'public-anon-key' },\n   *   region: FunctionRegion.UsEast1,\n   * })\n   * ```\n   */\n  constructor(\n    url: string,\n    {\n      headers = {},\n      customFetch,\n      region = FunctionRegion.Any,\n    }: {\n      headers?: Record<string, string>\n      customFetch?: Fetch\n      region?: FunctionRegion\n    } = {}\n  ) {\n    this.url = url\n    this.headers = headers\n    this.region = region\n    this.fetch = resolveFetch(customFetch)\n  }\n\n  /**\n   * Updates the authorization header\n   * @param token - the new jwt token sent in the authorisation header\n   * @example\n   * ```ts\n   * functions.setAuth(session.access_token)\n   * ```\n   */\n  setAuth(token: string) {\n    this.headers.Authorization = `Bearer ${token}`\n  }\n\n  /**\n   * Invokes a function\n   * @param functionName - The name of the Function to invoke.\n   * @param options - Options for invoking the Function.\n   * @example\n   * ```ts\n   * const { data, error } = await functions.invoke('hello-world', {\n   *   body: { name: 'Ada' },\n   * })\n   * ```\n   */\n  async invoke<T = any>(\n    functionName: string,\n    options: FunctionInvokeOptions = {}\n  ): Promise<FunctionsResponse<T>> {\n    let timeoutId: ReturnType<typeof setTimeout> | undefined\n    let timeoutController: AbortController | undefined\n\n    try {\n      const { headers, method, body: functionArgs, signal, timeout } = options\n      let _headers: Record<string, string> = {}\n      let { region } = options\n      if (!region) {\n        region = this.region\n      }\n      // Add region as query parameter using URL API\n      const url = new URL(`${this.url}/${functionName}`)\n      if (region && region !== 'any') {\n        _headers['x-region'] = region\n        url.searchParams.set('forceFunctionRegion', region)\n      }\n      let body: any\n      if (\n        functionArgs &&\n        ((headers && !Object.prototype.hasOwnProperty.call(headers, 'Content-Type')) || !headers)\n      ) {\n        if (\n          (typeof Blob !== 'undefined' && functionArgs instanceof Blob) ||\n          functionArgs instanceof ArrayBuffer\n        ) {\n          // will work for File as File inherits Blob\n          // also works for ArrayBuffer as it is the same underlying structure as a Blob\n          _headers['Content-Type'] = 'application/octet-stream'\n          body = functionArgs\n        } else if (typeof functionArgs === 'string') {\n          // plain string\n          _headers['Content-Type'] = 'text/plain'\n          body = functionArgs\n        } else if (typeof FormData !== 'undefined' && functionArgs instanceof FormData) {\n          // don't set content-type headers\n          // Request will automatically add the right boundary value\n          body = functionArgs\n        } else {\n          // default, assume this is JSON\n          _headers['Content-Type'] = 'application/json'\n          body = JSON.stringify(functionArgs)\n        }\n      } else {\n        if (\n          functionArgs &&\n          typeof functionArgs !== 'string' &&\n          !(typeof Blob !== 'undefined' && functionArgs instanceof Blob) &&\n          !(functionArgs instanceof ArrayBuffer) &&\n          !(typeof FormData !== 'undefined' && functionArgs instanceof FormData)\n        ) {\n          body = JSON.stringify(functionArgs)\n        } else {\n          body = functionArgs\n        }\n      }\n\n      // Handle timeout by creating an AbortController\n      let effectiveSignal = signal\n      if (timeout) {\n        timeoutController = new AbortController()\n        timeoutId = setTimeout(() => timeoutController!.abort(), timeout)\n\n        // If user provided their own signal, we need to respect both\n        if (signal) {\n          effectiveSignal = timeoutController.signal\n          // If the user's signal is aborted, abort our timeout controller too\n          signal.addEventListener('abort', () => timeoutController!.abort())\n        } else {\n          effectiveSignal = timeoutController.signal\n        }\n      }\n\n      const response = await this.fetch(url.toString(), {\n        method: method || 'POST',\n        // headers priority is (high to low):\n        // 1. invoke-level headers\n        // 2. client-level headers\n        // 3. default Content-Type header\n        headers: { ..._headers, ...this.headers, ...headers },\n        body,\n        signal: effectiveSignal,\n      }).catch((fetchError) => {\n        throw new FunctionsFetchError(fetchError)\n      })\n\n      const isRelayError = response.headers.get('x-relay-error')\n      if (isRelayError && isRelayError === 'true') {\n        throw new FunctionsRelayError(response)\n      }\n\n      if (!response.ok) {\n        throw new FunctionsHttpError(response)\n      }\n\n      let responseType = (response.headers.get('Content-Type') ?? 'text/plain').split(';')[0].trim()\n      let data: any\n      if (responseType === 'application/json') {\n        data = await response.json()\n      } else if (\n        responseType === 'application/octet-stream' ||\n        responseType === 'application/pdf'\n      ) {\n        data = await response.blob()\n      } else if (responseType === 'text/event-stream') {\n        data = response\n      } else if (responseType === 'multipart/form-data') {\n        data = await response.formData()\n      } else {\n        // default to text\n        data = await response.text()\n      }\n\n      return { data, error: null, response }\n    } catch (error) {\n      return {\n        data: null,\n        error,\n        response:\n          error instanceof FunctionsHttpError || error instanceof FunctionsRelayError\n            ? error.context\n            : undefined,\n      }\n    } finally {\n      // Clear the timeout if it was set\n      if (timeoutId) {\n        clearTimeout(timeoutId)\n      }\n    }\n  }\n}\n","import { Fetch } from './types'\n\nexport const resolveFetch = (customFetch?: Fetch): Fetch => {\n  if (customFetch) {\n    return (...args) => customFetch(...args)\n  }\n  return (...args) => fetch(...args)\n}\n","/**\n * Error format\n *\n * {@link https://postgrest.org/en/stable/api.html?highlight=options#errors-and-http-status-codes}\n */\nexport default class PostgrestError extends Error {\n  details: string\n  hint: string\n  code: string\n\n  /**\n   * @example\n   * ```ts\n   * import PostgrestError from '@supabase/postgrest-js'\n   *\n   * throw new PostgrestError({\n   *   message: 'Row level security prevented the request',\n   *   details: 'RLS denied the insert',\n   *   hint: 'Check your policies',\n   *   code: 'PGRST301',\n   * })\n   * ```\n   */\n  constructor(context: { message: string; details: string; hint: string; code: string }) {\n    super(context.message)\n    this.name = 'PostgrestError'\n    this.details = context.details\n    this.hint = context.hint\n    this.code = context.code\n  }\n}\n","import type {\n  PostgrestSingleResponse,\n  PostgrestResponseSuccess,\n  CheckMatchingArrayTypes,\n  MergePartialResult,\n  IsValidResultOverride,\n} from './types/types'\nimport { ClientServerOptions, Fetch } from './types/common/common'\nimport PostgrestError from './PostgrestError'\nimport { ContainsNull } from './select-query-parser/types'\n\nexport default abstract class PostgrestBuilder<\n  ClientOptions extends ClientServerOptions,\n  Result,\n  ThrowOnError extends boolean = false,\n> implements\n    PromiseLike<\n      ThrowOnError extends true ? PostgrestResponseSuccess<Result> : PostgrestSingleResponse<Result>\n    >\n{\n  protected method: 'GET' | 'HEAD' | 'POST' | 'PATCH' | 'DELETE'\n  protected url: URL\n  protected headers: Headers\n  protected schema?: string\n  protected body?: unknown\n  protected shouldThrowOnError = false\n  protected signal?: AbortSignal\n  protected fetch: Fetch\n  protected isMaybeSingle: boolean\n  protected urlLengthLimit: number\n\n  /**\n   * Creates a builder configured for a specific PostgREST request.\n   *\n   * @example\n   * ```ts\n   * import PostgrestQueryBuilder from '@supabase/postgrest-js'\n   *\n   * const builder = new PostgrestQueryBuilder(\n   *   new URL('https://xyzcompany.supabase.co/rest/v1/users'),\n   *   { headers: new Headers({ apikey: 'public-anon-key' }) }\n   * )\n   * ```\n   */\n  constructor(builder: {\n    method: 'GET' | 'HEAD' | 'POST' | 'PATCH' | 'DELETE'\n    url: URL\n    headers: HeadersInit\n    schema?: string\n    body?: unknown\n    shouldThrowOnError?: boolean\n    signal?: AbortSignal\n    fetch?: Fetch\n    isMaybeSingle?: boolean\n    urlLengthLimit?: number\n  }) {\n    this.method = builder.method\n    this.url = builder.url\n    this.headers = new Headers(builder.headers)\n    this.schema = builder.schema\n    this.body = builder.body\n    this.shouldThrowOnError = builder.shouldThrowOnError ?? false\n    this.signal = builder.signal\n    this.isMaybeSingle = builder.isMaybeSingle ?? false\n    this.urlLengthLimit = builder.urlLengthLimit ?? 8000\n\n    if (builder.fetch) {\n      this.fetch = builder.fetch\n    } else {\n      this.fetch = fetch\n    }\n  }\n\n  /**\n   * If there's an error with the query, throwOnError will reject the promise by\n   * throwing the error instead of returning it as part of a successful response.\n   *\n   * {@link https://github.com/supabase/supabase-js/issues/92}\n   */\n  throwOnError(): this & PostgrestBuilder<ClientOptions, Result, true> {\n    this.shouldThrowOnError = true\n    return this as this & PostgrestBuilder<ClientOptions, Result, true>\n  }\n\n  /**\n   * Set an HTTP header for the request.\n   */\n  setHeader(name: string, value: string): this {\n    this.headers = new Headers(this.headers)\n    this.headers.set(name, value)\n    return this\n  }\n\n  then<\n    TResult1 = ThrowOnError extends true\n      ? PostgrestResponseSuccess<Result>\n      : PostgrestSingleResponse<Result>,\n    TResult2 = never,\n  >(\n    onfulfilled?:\n      | ((\n          value: ThrowOnError extends true\n            ? PostgrestResponseSuccess<Result>\n            : PostgrestSingleResponse<Result>\n        ) => TResult1 | PromiseLike<TResult1>)\n      | undefined\n      | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null\n  ): PromiseLike<TResult1 | TResult2> {\n    // https://postgrest.org/en/stable/api.html#switching-schemas\n    if (this.schema === undefined) {\n      // skip\n    } else if (['GET', 'HEAD'].includes(this.method)) {\n      this.headers.set('Accept-Profile', this.schema)\n    } else {\n      this.headers.set('Content-Profile', this.schema)\n    }\n    if (this.method !== 'GET' && this.method !== 'HEAD') {\n      this.headers.set('Content-Type', 'application/json')\n    }\n\n    // NOTE: Invoke w/o `this` to avoid illegal invocation error.\n    // https://github.com/supabase/postgrest-js/pull/247\n    const _fetch = this.fetch\n    let res = _fetch(this.url.toString(), {\n      method: this.method,\n      headers: this.headers,\n      body: JSON.stringify(this.body),\n      signal: this.signal,\n    }).then(async (res) => {\n      let error = null\n      let data = null\n      let count: number | null = null\n      let status = res.status\n      let statusText = res.statusText\n\n      if (res.ok) {\n        if (this.method !== 'HEAD') {\n          const body = await res.text()\n          if (body === '') {\n            // Prefer: return=minimal\n          } else if (this.headers.get('Accept') === 'text/csv') {\n            data = body\n          } else if (\n            this.headers.get('Accept') &&\n            this.headers.get('Accept')?.includes('application/vnd.pgrst.plan+text')\n          ) {\n            data = body\n          } else {\n            data = JSON.parse(body)\n          }\n        }\n\n        const countHeader = this.headers.get('Prefer')?.match(/count=(exact|planned|estimated)/)\n        const contentRange = res.headers.get('content-range')?.split('/')\n        if (countHeader && contentRange && contentRange.length > 1) {\n          count = parseInt(contentRange[1])\n        }\n\n        // Temporary partial fix for https://github.com/supabase/postgrest-js/issues/361\n        // Issue persists e.g. for `.insert([...]).select().maybeSingle()`\n        if (this.isMaybeSingle && this.method === 'GET' && Array.isArray(data)) {\n          if (data.length > 1) {\n            error = {\n              // https://github.com/PostgREST/postgrest/blob/a867d79c42419af16c18c3fb019eba8df992626f/src/PostgREST/Error.hs#L553\n              code: 'PGRST116',\n              details: `Results contain ${data.length} rows, application/vnd.pgrst.object+json requires 1 row`,\n              hint: null,\n              message: 'JSON object requested, multiple (or no) rows returned',\n            }\n            data = null\n            count = null\n            status = 406\n            statusText = 'Not Acceptable'\n          } else if (data.length === 1) {\n            data = data[0]\n          } else {\n            data = null\n          }\n        }\n      } else {\n        const body = await res.text()\n\n        try {\n          error = JSON.parse(body)\n\n          // Workaround for https://github.com/supabase/postgrest-js/issues/295\n          if (Array.isArray(error) && res.status === 404) {\n            data = []\n            error = null\n            status = 200\n            statusText = 'OK'\n          }\n        } catch {\n          // Workaround for https://github.com/supabase/postgrest-js/issues/295\n          if (res.status === 404 && body === '') {\n            status = 204\n            statusText = 'No Content'\n          } else {\n            error = {\n              message: body,\n            }\n          }\n        }\n\n        if (error && this.isMaybeSingle && error?.details?.includes('0 rows')) {\n          error = null\n          status = 200\n          statusText = 'OK'\n        }\n\n        if (error && this.shouldThrowOnError) {\n          throw new PostgrestError(error)\n        }\n      }\n\n      const postgrestResponse = {\n        error,\n        data,\n        count,\n        status,\n        statusText,\n      }\n\n      return postgrestResponse\n    })\n    if (!this.shouldThrowOnError) {\n      res = res.catch((fetchError) => {\n        // Build detailed error information including cause if available\n        // Note: We don't populate code/hint for client-side network errors since those\n        // fields are meant for upstream service errors (PostgREST/PostgreSQL)\n        let errorDetails = ''\n        let hint = ''\n        let code = ''\n\n        // Add cause information if available (e.g., DNS errors, network failures)\n        const cause = fetchError?.cause\n        if (cause) {\n          const causeMessage = cause?.message ?? ''\n          const causeCode = cause?.code ?? ''\n\n          errorDetails = `${fetchError?.name ?? 'FetchError'}: ${fetchError?.message}`\n          errorDetails += `\\n\\nCaused by: ${cause?.name ?? 'Error'}: ${causeMessage}`\n          if (causeCode) {\n            errorDetails += ` (${causeCode})`\n          }\n          if (cause?.stack) {\n            errorDetails += `\\n${cause.stack}`\n          }\n        } else {\n          // No cause available, just include the error stack\n          errorDetails = fetchError?.stack ?? ''\n        }\n\n        // Get URL length for potential hints\n        const urlLength = this.url.toString().length\n\n        // Handle AbortError specially with helpful hints\n        if (fetchError?.name === 'AbortError' || fetchError?.code === 'ABORT_ERR') {\n          code = ''\n          hint = 'Request was aborted (timeout or manual cancellation)'\n\n          if (urlLength > this.urlLengthLimit) {\n            hint += `. Note: Your request URL is ${urlLength} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`\n          }\n        }\n        // Handle HeadersOverflowError from undici (Node.js fetch implementation)\n        else if (\n          cause?.name === 'HeadersOverflowError' ||\n          cause?.code === 'UND_ERR_HEADERS_OVERFLOW'\n        ) {\n          code = ''\n          hint = 'HTTP headers exceeded server limits (typically 16KB)'\n\n          if (urlLength > this.urlLengthLimit) {\n            hint += `. Your request URL is ${urlLength} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`\n          }\n        }\n\n        return {\n          error: {\n            message: `${fetchError?.name ?? 'FetchError'}: ${fetchError?.message}`,\n            details: errorDetails,\n            hint: hint,\n            code: code,\n          },\n          data: null,\n          count: null,\n          status: 0,\n          statusText: '',\n        }\n      })\n    }\n\n    return res.then(onfulfilled, onrejected)\n  }\n\n  /**\n   * Override the type of the returned `data`.\n   *\n   * @typeParam NewResult - The new result type to override with\n   * @deprecated Use overrideTypes<yourType, { merge: false }>() method at the end of your call chain instead\n   */\n  returns<NewResult>(): PostgrestBuilder<\n    ClientOptions,\n    CheckMatchingArrayTypes<Result, NewResult>,\n    ThrowOnError\n  > {\n    /* istanbul ignore next */\n    return this as unknown as PostgrestBuilder<\n      ClientOptions,\n      CheckMatchingArrayTypes<Result, NewResult>,\n      ThrowOnError\n    >\n  }\n\n  /**\n   * Override the type of the returned `data` field in the response.\n   *\n   * @typeParam NewResult - The new type to cast the response data to\n   * @typeParam Options - Optional type configuration (defaults to { merge: true })\n   * @typeParam Options.merge - When true, merges the new type with existing return type. When false, replaces the existing types entirely (defaults to true)\n   * @example\n   * ```typescript\n   * // Merge with existing types (default behavior)\n   * const query = supabase\n   *   .from('users')\n   *   .select()\n   *   .overrideTypes<{ custom_field: string }>()\n   *\n   * // Replace existing types completely\n   * const replaceQuery = supabase\n   *   .from('users')\n   *   .select()\n   *   .overrideTypes<{ id: number; name: string }, { merge: false }>()\n   * ```\n   * @returns A PostgrestBuilder instance with the new type\n   */\n  overrideTypes<\n    NewResult,\n    Options extends { merge?: boolean } = { merge: true },\n  >(): PostgrestBuilder<\n    ClientOptions,\n    IsValidResultOverride<Result, NewResult, false, false> extends true\n      ? // Preserve the optionality of the result if the overriden type is an object (case of chaining with `maybeSingle`)\n        ContainsNull<Result> extends true\n        ? MergePartialResult<NewResult, NonNullable<Result>, Options> | null\n        : MergePartialResult<NewResult, Result, Options>\n      : CheckMatchingArrayTypes<Result, NewResult>,\n    ThrowOnError\n  > {\n    return this as unknown as PostgrestBuilder<\n      ClientOptions,\n      IsValidResultOverride<Result, NewResult, false, false> extends true\n        ? // Preserve the optionality of the result if the overriden type is an object (case of chaining with `maybeSingle`)\n          ContainsNull<Result> extends true\n          ? MergePartialResult<NewResult, NonNullable<Result>, Options> | null\n          : MergePartialResult<NewResult, Result, Options>\n        : CheckMatchingArrayTypes<Result, NewResult>,\n      ThrowOnError\n    >\n  }\n}\n","import PostgrestBuilder from './PostgrestBuilder'\nimport PostgrestFilterBuilder, { InvalidMethodError } from './PostgrestFilterBuilder'\nimport { GetResult } from './select-query-parser/result'\nimport { CheckMatchingArrayTypes } from './types/types'\nimport { ClientServerOptions, GenericSchema } from './types/common/common'\nimport type { MaxAffectedEnabled } from './types/feature-flags'\n\nexport default class PostgrestTransformBuilder<\n  ClientOptions extends ClientServerOptions,\n  Schema extends GenericSchema,\n  Row extends Record<string, unknown>,\n  Result,\n  RelationName = unknown,\n  Relationships = unknown,\n  Method = unknown,\n> extends PostgrestBuilder<ClientOptions, Result> {\n  /**\n   * Perform a SELECT on the query result.\n   *\n   * By default, `.insert()`, `.update()`, `.upsert()`, and `.delete()` do not\n   * return modified rows. By calling this method, modified rows are returned in\n   * `data`.\n   *\n   * @param columns - The columns to retrieve, separated by commas\n   */\n  select<\n    Query extends string = '*',\n    NewResultOne = GetResult<Schema, Row, RelationName, Relationships, Query, ClientOptions>,\n  >(\n    columns?: Query\n  ): PostgrestFilterBuilder<\n    ClientOptions,\n    Schema,\n    Row,\n    Method extends 'RPC'\n      ? Result extends unknown[]\n        ? NewResultOne[]\n        : NewResultOne\n      : NewResultOne[],\n    RelationName,\n    Relationships,\n    Method\n  > {\n    // Remove whitespaces except when quoted\n    let quoted = false\n    const cleanedColumns = (columns ?? '*')\n      .split('')\n      .map((c) => {\n        if (/\\s/.test(c) && !quoted) {\n          return ''\n        }\n        if (c === '\"') {\n          quoted = !quoted\n        }\n        return c\n      })\n      .join('')\n    this.url.searchParams.set('select', cleanedColumns)\n    this.headers.append('Prefer', 'return=representation')\n    return this as unknown as PostgrestFilterBuilder<\n      ClientOptions,\n      Schema,\n      Row,\n      Method extends 'RPC'\n        ? Result extends unknown[]\n          ? NewResultOne[]\n          : NewResultOne\n        : NewResultOne[],\n      RelationName,\n      Relationships,\n      Method\n    >\n  }\n\n  order<ColumnName extends string & keyof Row>(\n    column: ColumnName,\n    options?: { ascending?: boolean; nullsFirst?: boolean; referencedTable?: undefined }\n  ): this\n  order(\n    column: string,\n    options?: { ascending?: boolean; nullsFirst?: boolean; referencedTable?: string }\n  ): this\n  /**\n   * @deprecated Use `options.referencedTable` instead of `options.foreignTable`\n   */\n  order<ColumnName extends string & keyof Row>(\n    column: ColumnName,\n    options?: { ascending?: boolean; nullsFirst?: boolean; foreignTable?: undefined }\n  ): this\n  /**\n   * @deprecated Use `options.referencedTable` instead of `options.foreignTable`\n   */\n  order(\n    column: string,\n    options?: { ascending?: boolean; nullsFirst?: boolean; foreignTable?: string }\n  ): this\n  /**\n   * Order the query result by `column`.\n   *\n   * You can call this method multiple times to order by multiple columns.\n   *\n   * You can order referenced tables, but it only affects the ordering of the\n   * parent table if you use `!inner` in the query.\n   *\n   * @param column - The column to order by\n   * @param options - Named parameters\n   * @param options.ascending - If `true`, the result will be in ascending order\n   * @param options.nullsFirst - If `true`, `null`s appear first. If `false`,\n   * `null`s appear last.\n   * @param options.referencedTable - Set this to order a referenced table by\n   * its columns\n   * @param options.foreignTable - Deprecated, use `options.referencedTable`\n   * instead\n   */\n  order(\n    column: string,\n    {\n      ascending = true,\n      nullsFirst,\n      foreignTable,\n      referencedTable = foreignTable,\n    }: {\n      ascending?: boolean\n      nullsFirst?: boolean\n      foreignTable?: string\n      referencedTable?: string\n    } = {}\n  ): this {\n    const key = referencedTable ? `${referencedTable}.order` : 'order'\n    const existingOrder = this.url.searchParams.get(key)\n\n    this.url.searchParams.set(\n      key,\n      `${existingOrder ? `${existingOrder},` : ''}${column}.${ascending ? 'asc' : 'desc'}${\n        nullsFirst === undefined ? '' : nullsFirst ? '.nullsfirst' : '.nullslast'\n      }`\n    )\n    return this\n  }\n\n  /**\n   * Limit the query result by `count`.\n   *\n   * @param count - The maximum number of rows to return\n   * @param options - Named parameters\n   * @param options.referencedTable - Set this to limit rows of referenced\n   * tables instead of the parent table\n   * @param options.foreignTable - Deprecated, use `options.referencedTable`\n   * instead\n   */\n  limit(\n    count: number,\n    {\n      foreignTable,\n      referencedTable = foreignTable,\n    }: { foreignTable?: string; referencedTable?: string } = {}\n  ): this {\n    const key = typeof referencedTable === 'undefined' ? 'limit' : `${referencedTable}.limit`\n    this.url.searchParams.set(key, `${count}`)\n    return this\n  }\n\n  /**\n   * Limit the query result by starting at an offset `from` and ending at the offset `to`.\n   * Only records within this range are returned.\n   * This respects the query order and if there is no order clause the range could behave unexpectedly.\n   * The `from` and `to` values are 0-based and inclusive: `range(1, 3)` will include the second, third\n   * and fourth rows of the query.\n   *\n   * @param from - The starting index from which to limit the result\n   * @param to - The last index to which to limit the result\n   * @param options - Named parameters\n   * @param options.referencedTable - Set this to limit rows of referenced\n   * tables instead of the parent table\n   * @param options.foreignTable - Deprecated, use `options.referencedTable`\n   * instead\n   */\n  range(\n    from: number,\n    to: number,\n    {\n      foreignTable,\n      referencedTable = foreignTable,\n    }: { foreignTable?: string; referencedTable?: string } = {}\n  ): this {\n    const keyOffset =\n      typeof referencedTable === 'undefined' ? 'offset' : `${referencedTable}.offset`\n    const keyLimit = typeof referencedTable === 'undefined' ? 'limit' : `${referencedTable}.limit`\n    this.url.searchParams.set(keyOffset, `${from}`)\n    // Range is inclusive, so add 1\n    this.url.searchParams.set(keyLimit, `${to - from + 1}`)\n    return this\n  }\n\n  /**\n   * Set the AbortSignal for the fetch request.\n   *\n   * @param signal - The AbortSignal to use for the fetch request\n   */\n  abortSignal(signal: AbortSignal): this {\n    this.signal = signal\n    return this\n  }\n\n  /**\n   * Return `data` as a single object instead of an array of objects.\n   *\n   * Query result must be one row (e.g. using `.limit(1)`), otherwise this\n   * returns an error.\n   */\n  single<ResultOne = Result extends (infer ResultOne)[] ? ResultOne : never>(): PostgrestBuilder<\n    ClientOptions,\n    ResultOne\n  > {\n    this.headers.set('Accept', 'application/vnd.pgrst.object+json')\n    return this as unknown as PostgrestBuilder<ClientOptions, ResultOne>\n  }\n\n  /**\n   * Return `data` as a single object instead of an array of objects.\n   *\n   * Query result must be zero or one row (e.g. using `.limit(1)`), otherwise\n   * this returns an error.\n   */\n  maybeSingle<\n    ResultOne = Result extends (infer ResultOne)[] ? ResultOne : never,\n  >(): PostgrestBuilder<ClientOptions, ResultOne | null> {\n    // Temporary partial fix for https://github.com/supabase/postgrest-js/issues/361\n    // Issue persists e.g. for `.insert([...]).select().maybeSingle()`\n    if (this.method === 'GET') {\n      this.headers.set('Accept', 'application/json')\n    } else {\n      this.headers.set('Accept', 'application/vnd.pgrst.object+json')\n    }\n    this.isMaybeSingle = true\n    return this as unknown as PostgrestBuilder<ClientOptions, ResultOne | null>\n  }\n\n  /**\n   * Return `data` as a string in CSV format.\n   */\n  csv(): PostgrestBuilder<ClientOptions, string> {\n    this.headers.set('Accept', 'text/csv')\n    return this as unknown as PostgrestBuilder<ClientOptions, string>\n  }\n\n  /**\n   * Return `data` as an object in [GeoJSON](https://geojson.org) format.\n   */\n  geojson(): PostgrestBuilder<ClientOptions, Record<string, unknown>> {\n    this.headers.set('Accept', 'application/geo+json')\n    return this as unknown as PostgrestBuilder<ClientOptions, Record<string, unknown>>\n  }\n\n  /**\n   * Return `data` as the EXPLAIN plan for the query.\n   *\n   * You need to enable the\n   * [db_plan_enabled](https://supabase.com/docs/guides/database/debugging-performance#enabling-explain)\n   * setting before using this method.\n   *\n   * @param options - Named parameters\n   *\n   * @param options.analyze - If `true`, the query will be executed and the\n   * actual run time will be returned\n   *\n   * @param options.verbose - If `true`, the query identifier will be returned\n   * and `data` will include the output columns of the query\n   *\n   * @param options.settings - If `true`, include information on configuration\n   * parameters that affect query planning\n   *\n   * @param options.buffers - If `true`, include information on buffer usage\n   *\n   * @param options.wal - If `true`, include information on WAL record generation\n   *\n   * @param options.format - The format of the output, can be `\"text\"` (default)\n   * or `\"json\"`\n   */\n  explain({\n    analyze = false,\n    verbose = false,\n    settings = false,\n    buffers = false,\n    wal = false,\n    format = 'text',\n  }: {\n    analyze?: boolean\n    verbose?: boolean\n    settings?: boolean\n    buffers?: boolean\n    wal?: boolean\n    format?: 'json' | 'text'\n  } = {}) {\n    const options = [\n      analyze ? 'analyze' : null,\n      verbose ? 'verbose' : null,\n      settings ? 'settings' : null,\n      buffers ? 'buffers' : null,\n      wal ? 'wal' : null,\n    ]\n      .filter(Boolean)\n      .join('|')\n    // An Accept header can carry multiple media types but postgrest-js always sends one\n    const forMediatype = this.headers.get('Accept') ?? 'application/json'\n    this.headers.set(\n      'Accept',\n      `application/vnd.pgrst.plan+${format}; for=\"${forMediatype}\"; options=${options};`\n    )\n    if (format === 'json') {\n      return this as unknown as PostgrestBuilder<ClientOptions, Record<string, unknown>[]>\n    } else {\n      return this as unknown as PostgrestBuilder<ClientOptions, string>\n    }\n  }\n\n  /**\n   * Rollback the query.\n   *\n   * `data` will still be returned, but the query is not committed.\n   */\n  rollback(): this {\n    this.headers.append('Prefer', 'tx=rollback')\n    return this\n  }\n\n  /**\n   * Override the type of the returned `data`.\n   *\n   * @typeParam NewResult - The new result type to override with\n   * @deprecated Use overrideTypes<yourType, { merge: false }>() method at the end of your call chain instead\n   */\n  returns<NewResult>(): PostgrestTransformBuilder<\n    ClientOptions,\n    Schema,\n    Row,\n    CheckMatchingArrayTypes<Result, NewResult>,\n    RelationName,\n    Relationships,\n    Method\n  > {\n    return this as unknown as PostgrestTransformBuilder<\n      ClientOptions,\n      Schema,\n      Row,\n      CheckMatchingArrayTypes<Result, NewResult>,\n      RelationName,\n      Relationships,\n      Method\n    >\n  }\n\n  /**\n   * Set the maximum number of rows that can be affected by the query.\n   * Only available in PostgREST v13+ and only works with PATCH and DELETE methods.\n   *\n   * @param value - The maximum number of rows that can be affected\n   */\n  maxAffected(value: number): MaxAffectedEnabled<ClientOptions['PostgrestVersion']> extends true\n    ? // TODO: update the RPC case to only work on RPC that returns SETOF rows\n      Method extends 'PATCH' | 'DELETE' | 'RPC'\n      ? this\n      : InvalidMethodError<'maxAffected method only available on update or delete'>\n    : InvalidMethodError<'maxAffected method only available on postgrest 13+'> {\n    this.headers.append('Prefer', 'handling=strict')\n    this.headers.append('Prefer', `max-affected=${value}`)\n    return this as unknown as MaxAffectedEnabled<ClientOptions['PostgrestVersion']> extends true\n      ? Method extends 'PATCH' | 'DELETE' | 'RPC'\n        ? this\n        : InvalidMethodError<'maxAffected method only available on update or delete'>\n      : InvalidMethodError<'maxAffected method only available on postgrest 13+'>\n  }\n}\n","import PostgrestTransformBuilder from './PostgrestTransformBuilder'\nimport { JsonPathToAccessor, JsonPathToType } from './select-query-parser/utils'\nimport { ClientServerOptions, GenericSchema } from './types/common/common'\n\ntype FilterOperator =\n  | 'eq'\n  | 'neq'\n  | 'gt'\n  | 'gte'\n  | 'lt'\n  | 'lte'\n  | 'like'\n  | 'ilike'\n  | 'is'\n  | 'isdistinct'\n  | 'in'\n  | 'cs'\n  | 'cd'\n  | 'sl'\n  | 'sr'\n  | 'nxl'\n  | 'nxr'\n  | 'adj'\n  | 'ov'\n  | 'fts'\n  | 'plfts'\n  | 'phfts'\n  | 'wfts'\n  | 'match'\n  | 'imatch'\n\nexport type IsStringOperator<Path extends string> = Path extends `${string}->>${string}`\n  ? true\n  : false\n\nconst PostgrestReservedCharsRegexp = new RegExp('[,()]')\n\n// Match relationship filters with `table.column` syntax and resolve underlying\n// column value. If not matched, fallback to generic type.\n// TODO: Validate the relationship itself ala select-query-parser. Currently we\n// assume that all tables have valid relationships to each other, despite\n// nonexistent foreign keys.\ntype ResolveFilterValue<\n  Schema extends GenericSchema,\n  Row extends Record<string, unknown>,\n  ColumnName extends string,\n> = ColumnName extends `${infer RelationshipTable}.${infer Remainder}`\n  ? Remainder extends `${infer _}.${infer _}`\n    ? ResolveFilterValue<Schema, Row, Remainder>\n    : ResolveFilterRelationshipValue<Schema, RelationshipTable, Remainder>\n  : ColumnName extends keyof Row\n    ? Row[ColumnName]\n    : // If the column selection is a jsonpath like `data->value` or `data->>value` we attempt to match\n      // the expected type with the parsed custom json type\n      IsStringOperator<ColumnName> extends true\n      ? string\n      : JsonPathToType<Row, JsonPathToAccessor<ColumnName>> extends infer JsonPathValue\n        ? JsonPathValue extends never\n          ? never\n          : JsonPathValue\n        : never\n\ntype ResolveFilterRelationshipValue<\n  Schema extends GenericSchema,\n  RelationshipTable extends string,\n  RelationshipColumn extends string,\n> = Schema['Tables'] & Schema['Views'] extends infer TablesAndViews\n  ? RelationshipTable extends keyof TablesAndViews\n    ? 'Row' extends keyof TablesAndViews[RelationshipTable]\n      ? RelationshipColumn extends keyof TablesAndViews[RelationshipTable]['Row']\n        ? TablesAndViews[RelationshipTable]['Row'][RelationshipColumn]\n        : unknown\n      : unknown\n    : unknown\n  : never\n\nexport type InvalidMethodError<S extends string> = { Error: S }\n\nexport default class PostgrestFilterBuilder<\n  ClientOptions extends ClientServerOptions,\n  Schema extends GenericSchema,\n  Row extends Record<string, unknown>,\n  Result,\n  RelationName = unknown,\n  Relationships = unknown,\n  Method = unknown,\n> extends PostgrestTransformBuilder<\n  ClientOptions,\n  Schema,\n  Row,\n  Result,\n  RelationName,\n  Relationships,\n  Method\n> {\n  /**\n   * Match only rows where `column` is equal to `value`.\n   *\n   * To check if the value of `column` is NULL, you should use `.is()` instead.\n   *\n   * @param column - The column to filter on\n   * @param value - The value to filter with\n   */\n  eq<ColumnName extends string>(\n    column: ColumnName,\n    value: ResolveFilterValue<Schema, Row, ColumnName> extends never\n      ? NonNullable<unknown>\n      : // We want to infer the type before wrapping it into a `NonNullable` to avoid too deep\n        // type resolution error\n        ResolveFilterValue<Schema, Row, ColumnName> extends infer ResolvedFilterValue\n        ? NonNullable<ResolvedFilterValue>\n        : // We should never enter this case as all the branches are covered above\n          never\n  ): this {\n    this.url.searchParams.append(column, `eq.${value}`)\n    return this\n  }\n\n  /**\n   * Match only rows where `column` is not equal to `value`.\n   *\n   * @param column - The column to filter on\n   * @param value - The value to filter with\n   */\n  neq<ColumnName extends string>(\n    column: ColumnName,\n    value: ResolveFilterValue<Schema, Row, ColumnName> extends never\n      ? unknown\n      : ResolveFilterValue<Schema, Row, ColumnName> extends infer ResolvedFilterValue\n        ? ResolvedFilterValue\n        : never\n  ): this {\n    this.url.searchParams.append(column, `neq.${value}`)\n    return this\n  }\n\n  gt<ColumnName extends string & keyof Row>(column: ColumnName, value: Row[ColumnName]): this\n  gt(column: string, value: unknown): this\n  /**\n   * Match only rows where `column` is greater than `value`.\n   *\n   * @param column - The column to filter on\n   * @param value - The value to filter with\n   */\n  gt(column: string, value: unknown): this {\n    this.url.searchParams.append(column, `gt.${value}`)\n    return this\n  }\n\n  gte<ColumnName extends string & keyof Row>(column: ColumnName, value: Row[ColumnName]): this\n  gte(column: string, value: unknown): this\n  /**\n   * Match only rows where `column` is greater than or equal to `value`.\n   *\n   * @param column - The column to filter on\n   * @param value - The value to filter with\n   */\n  gte(column: string, value: unknown): this {\n    this.url.searchParams.append(column, `gte.${value}`)\n    return this\n  }\n\n  lt<ColumnName extends string & keyof Row>(column: ColumnName, value: Row[ColumnName]): this\n  lt(column: string, value: unknown): this\n  /**\n   * Match only rows where `column` is less than `value`.\n   *\n   * @param column - The column to filter on\n   * @param value - The value to filter with\n   */\n  lt(column: string, value: unknown): this {\n    this.url.searchParams.append(column, `lt.${value}`)\n    return this\n  }\n\n  lte<ColumnName extends string & keyof Row>(column: ColumnName, value: Row[ColumnName]): this\n  lte(column: string, value: unknown): this\n  /**\n   * Match only rows where `column` is less than or equal to `value`.\n   *\n   * @param column - The column to filter on\n   * @param value - The value to filter with\n   */\n  lte(column: string, value: unknown): this {\n    this.url.searchParams.append(column, `lte.${value}`)\n    return this\n  }\n\n  like<ColumnName extends string & keyof Row>(column: ColumnName, pattern: string): this\n  like(column: string, pattern: string): this\n  /**\n   * Match only rows where `column` matches `pattern` case-sensitively.\n   *\n   * @param column - The column to filter on\n   * @param pattern - The pattern to match with\n   */\n  like(column: string, pattern: string): this {\n    this.url.searchParams.append(column, `like.${pattern}`)\n    return this\n  }\n\n  likeAllOf<ColumnName extends string & keyof Row>(\n    column: ColumnName,\n    patterns: readonly string[]\n  ): this\n  likeAllOf(column: string, patterns: readonly string[]): this\n  /**\n   * Match only rows where `column` matches all of `patterns` case-sensitively.\n   *\n   * @param column - The column to filter on\n   * @param patterns - The patterns to match with\n   */\n  likeAllOf(column: string, patterns: readonly string[]): this {\n    this.url.searchParams.append(column, `like(all).{${patterns.join(',')}}`)\n    return this\n  }\n\n  likeAnyOf<ColumnName extends string & keyof Row>(\n    column: ColumnName,\n    patterns: readonly string[]\n  ): this\n  likeAnyOf(column: string, patterns: readonly string[]): this\n  /**\n   * Match only rows where `column` matches any of `patterns` case-sensitively.\n   *\n   * @param column - The column to filter on\n   * @param patterns - The patterns to match with\n   */\n  likeAnyOf(column: string, patterns: readonly string[]): this {\n    this.url.searchParams.append(column, `like(any).{${patterns.join(',')}}`)\n    return this\n  }\n\n  ilike<ColumnName extends string & keyof Row>(column: ColumnName, pattern: string): this\n  ilike(column: string, pattern: string): this\n  /**\n   * Match only rows where `column` matches `pattern` case-insensitively.\n   *\n   * @param column - The column to filter on\n   * @param pattern - The pattern to match with\n   */\n  ilike(column: string, pattern: string): this {\n    this.url.searchParams.append(column, `ilike.${pattern}`)\n    return this\n  }\n\n  ilikeAllOf<ColumnName extends string & keyof Row>(\n    column: ColumnName,\n    patterns: readonly string[]\n  ): this\n  ilikeAllOf(column: string, patterns: readonly string[]): this\n  /**\n   * Match only rows where `column` matches all of `patterns` case-insensitively.\n   *\n   * @param column - The column to filter on\n   * @param patterns - The patterns to match with\n   */\n  ilikeAllOf(column: string, patterns: readonly string[]): this {\n    this.url.searchParams.append(column, `ilike(all).{${patterns.join(',')}}`)\n    return this\n  }\n\n  ilikeAnyOf<ColumnName extends string & keyof Row>(\n    column: ColumnName,\n    patterns: readonly string[]\n  ): this\n  ilikeAnyOf(column: string, patterns: readonly string[]): this\n  /**\n   * Match only rows where `column` matches any of `patterns` case-insensitively.\n   *\n   * @param column - The column to filter on\n   * @param patterns - The patterns to match with\n   */\n  ilikeAnyOf(column: string, patterns: readonly string[]): this {\n    this.url.searchParams.append(column, `ilike(any).{${patterns.join(',')}}`)\n    return this\n  }\n\n  regexMatch<ColumnName extends string & keyof Row>(column: ColumnName, pattern: string): this\n  regexMatch(column: string, pattern: string): this\n  /**\n   * Match only rows where `column` matches the PostgreSQL regex `pattern`\n   * case-sensitively (using the `~` operator).\n   *\n   * @param column - The column to filter on\n   * @param pattern - The PostgreSQL regular expression pattern to match with\n   */\n  regexMatch(column: string, pattern: string): this {\n    this.url.searchParams.append(column, `match.${pattern}`)\n    return this\n  }\n\n  regexIMatch<ColumnName extends string & keyof Row>(column: ColumnName, pattern: string): this\n  regexIMatch(column: string, pattern: string): this\n  /**\n   * Match only rows where `column` matches the PostgreSQL regex `pattern`\n   * case-insensitively (using the `~*` operator).\n   *\n   * @param column - The column to filter on\n   * @param pattern - The PostgreSQL regular expression pattern to match with\n   */\n  regexIMatch(column: string, pattern: string): this {\n    this.url.searchParams.append(column, `imatch.${pattern}`)\n    return this\n  }\n\n  is<ColumnName extends string & keyof Row>(\n    column: ColumnName,\n    value: Row[ColumnName] & (boolean | null)\n  ): this\n  is(column: string, value: boolean | null): this\n  /**\n   * Match only rows where `column` IS `value`.\n   *\n   * For non-boolean columns, this is only relevant for checking if the value of\n   * `column` is NULL by setting `value` to `null`.\n   *\n   * For boolean columns, you can also set `value` to `true` or `false` and it\n   * will behave the same way as `.eq()`.\n   *\n   * @param column - The column to filter on\n   * @param value - The value to filter with\n   */\n  is(column: string, value: boolean | null): this {\n    this.url.searchParams.append(column, `is.${value}`)\n    return this\n  }\n\n  /**\n   * Match only rows where `column` IS DISTINCT FROM `value`.\n   *\n   * Unlike `.neq()`, this treats `NULL` as a comparable value. Two `NULL` values\n   * are considered equal (not distinct), and comparing `NULL` with any non-NULL\n   * value returns true (distinct).\n   *\n   * @param column - The column to filter on\n   * @param value - The value to filter with\n   */\n  isDistinct<ColumnName extends string>(\n    column: ColumnName,\n    value: ResolveFilterValue<Schema, Row, ColumnName> extends never\n      ? unknown\n      : ResolveFilterValue<Schema, Row, ColumnName> extends infer ResolvedFilterValue\n        ? ResolvedFilterValue\n        : never\n  ): this {\n    this.url.searchParams.append(column, `isdistinct.${value}`)\n    return this\n  }\n\n  /**\n   * Match only rows where `column` is included in the `values` array.\n   *\n   * @param column - The column to filter on\n   * @param values - The values array to filter with\n   */\n  in<ColumnName extends string>(\n    column: ColumnName,\n    values: ReadonlyArray<\n      ResolveFilterValue<Schema, Row, ColumnName> extends never\n        ? unknown\n        : // We want to infer the type before wrapping it into a `NonNullable` to avoid too deep\n          // type resolution error\n          ResolveFilterValue<Schema, Row, ColumnName> extends infer ResolvedFilterValue\n          ? ResolvedFilterValue\n          : // We should never enter this case as all the branches are covered above\n            never\n    >\n  ): this {\n    const cleanedValues = Array.from(new Set(values))\n      .map((s) => {\n        // handle postgrest reserved characters\n        // https://postgrest.org/en/v7.0.0/api.html#reserved-characters\n        if (typeof s === 'string' && PostgrestReservedCharsRegexp.test(s)) return `\"${s}\"`\n        else return `${s}`\n      })\n      .join(',')\n    this.url.searchParams.append(column, `in.(${cleanedValues})`)\n    return this\n  }\n\n  /**\n   * Match only rows where `column` is NOT included in the `values` array.\n   *\n   * @param column - The column to filter on\n   * @param values - The values array to filter with\n   */\n  notIn<ColumnName extends string>(\n    column: ColumnName,\n    values: ReadonlyArray<\n      ResolveFilterValue<Schema, Row, ColumnName> extends never\n        ? unknown\n        : ResolveFilterValue<Schema, Row, ColumnName> extends infer ResolvedFilterValue\n          ? ResolvedFilterValue\n          : never\n    >\n  ): this {\n    const cleanedValues = Array.from(new Set(values))\n      .map((s) => {\n        // handle postgrest reserved characters\n        // https://postgrest.org/en/v7.0.0/api.html#reserved-characters\n        if (typeof s === 'string' && PostgrestReservedCharsRegexp.test(s)) return `\"${s}\"`\n        else return `${s}`\n      })\n      .join(',')\n    this.url.searchParams.append(column, `not.in.(${cleanedValues})`)\n    return this\n  }\n\n  contains<ColumnName extends string & keyof Row>(\n    column: ColumnName,\n    value: string | ReadonlyArray<Row[ColumnName]> | Record<string, unknown>\n  ): this\n  contains(column: string, value: string | readonly unknown[] | Record<string, unknown>): this\n  /**\n   * Only relevant for jsonb, array, and range columns. Match only rows where\n   * `column` contains every element appearing in `value`.\n   *\n   * @param column - The jsonb, array, or range column to filter on\n   * @param value - The jsonb, array, or range value to filter with\n   */\n  contains(column: string, value: string | readonly unknown[] | Record<string, unknown>): this {\n    if (typeof value === 'string') {\n      // range types can be inclusive '[', ']' or exclusive '(', ')' so just\n      // keep it simple and accept a string\n      this.url.searchParams.append(column, `cs.${value}`)\n    } else if (Array.isArray(value)) {\n      // array\n      this.url.searchParams.append(column, `cs.{${value.join(',')}}`)\n    } else {\n      // json\n      this.url.searchParams.append(column, `cs.${JSON.stringify(value)}`)\n    }\n    return this\n  }\n\n  containedBy<ColumnName extends string & keyof Row>(\n    column: ColumnName,\n    value: string | ReadonlyArray<Row[ColumnName]> | Record<string, unknown>\n  ): this\n  containedBy(column: string, value: string | readonly unknown[] | Record<string, unknown>): this\n  /**\n   * Only relevant for jsonb, array, and range columns. Match only rows where\n   * every element appearing in `column` is contained by `value`.\n   *\n   * @param column - The jsonb, array, or range column to filter on\n   * @param value - The jsonb, array, or range value to filter with\n   */\n  containedBy(column: string, value: string | readonly unknown[] | Record<string, unknown>): this {\n    if (typeof value === 'string') {\n      // range\n      this.url.searchParams.append(column, `cd.${value}`)\n    } else if (Array.isArray(value)) {\n      // array\n      this.url.searchParams.append(column, `cd.{${value.join(',')}}`)\n    } else {\n      // json\n      this.url.searchParams.append(column, `cd.${JSON.stringify(value)}`)\n    }\n    return this\n  }\n\n  rangeGt<ColumnName extends string & keyof Row>(column: ColumnName, range: string): this\n  rangeGt(column: string, range: string): this\n  /**\n   * Only relevant for range columns. Match only rows where every element in\n   * `column` is greater than any element in `range`.\n   *\n   * @param column - The range column to filter on\n   * @param range - The range to filter with\n   */\n  rangeGt(column: string, range: string): this {\n    this.url.searchParams.append(column, `sr.${range}`)\n    return this\n  }\n\n  rangeGte<ColumnName extends string & keyof Row>(column: ColumnName, range: string): this\n  rangeGte(column: string, range: string): this\n  /**\n   * Only relevant for range columns. Match only rows where every element in\n   * `column` is either contained in `range` or greater than any element in\n   * `range`.\n   *\n   * @param column - The range column to filter on\n   * @param range - The range to filter with\n   */\n  rangeGte(column: string, range: string): this {\n    this.url.searchParams.append(column, `nxl.${range}`)\n    return this\n  }\n\n  rangeLt<ColumnName extends string & keyof Row>(column: ColumnName, range: string): this\n  rangeLt(column: string, range: string): this\n  /**\n   * Only relevant for range columns. Match only rows where every element in\n   * `column` is less than any element in `range`.\n   *\n   * @param column - The range column to filter on\n   * @param range - The range to filter with\n   */\n  rangeLt(column: string, range: string): this {\n    this.url.searchParams.append(column, `sl.${range}`)\n    return this\n  }\n\n  rangeLte<ColumnName extends string & keyof Row>(column: ColumnName, range: string): this\n  rangeLte(column: string, range: string): this\n  /**\n   * Only relevant for range columns. Match only rows where every element in\n   * `column` is either contained in `range` or less than any element in\n   * `range`.\n   *\n   * @param column - The range column to filter on\n   * @param range - The range to filter with\n   */\n  rangeLte(column: string, range: string): this {\n    this.url.searchParams.append(column, `nxr.${range}`)\n    return this\n  }\n\n  rangeAdjacent<ColumnName extends string & keyof Row>(column: ColumnName, range: string): this\n  rangeAdjacent(column: string, range: string): this\n  /**\n   * Only relevant for range columns. Match only rows where `column` is\n   * mutually exclusive to `range` and there can be no element between the two\n   * ranges.\n   *\n   * @param column - The range column to filter on\n   * @param range - The range to filter with\n   */\n  rangeAdjacent(column: string, range: string): this {\n    this.url.searchParams.append(column, `adj.${range}`)\n    return this\n  }\n\n  overlaps<ColumnName extends string & keyof Row>(\n    column: ColumnName,\n    value: string | ReadonlyArray<Row[ColumnName]>\n  ): this\n  overlaps(column: string, value: string | readonly unknown[]): this\n  /**\n   * Only relevant for array and range columns. Match only rows where\n   * `column` and `value` have an element in common.\n   *\n   * @param column - The array or range column to filter on\n   * @param value - The array or range value to filter with\n   */\n  overlaps(column: string, value: string | readonly unknown[]): this {\n    if (typeof value === 'string') {\n      // range\n      this.url.searchParams.append(column, `ov.${value}`)\n    } else {\n      // array\n      this.url.searchParams.append(column, `ov.{${value.join(',')}}`)\n    }\n    return this\n  }\n\n  textSearch<ColumnName extends string & keyof Row>(\n    column: ColumnName,\n    query: string,\n    options?: { config?: string; type?: 'plain' | 'phrase' | 'websearch' }\n  ): this\n  textSearch(\n    column: string,\n    query: string,\n    options?: { config?: string; type?: 'plain' | 'phrase' | 'websearch' }\n  ): this\n  /**\n   * Only relevant for text and tsvector columns. Match only rows where\n   * `column` matches the query string in `query`.\n   *\n   * @param column - The text or tsvector column to filter on\n   * @param query - The query text to match with\n   * @param options - Named parameters\n   * @param options.config - The text search configuration to use\n   * @param options.type - Change how the `query` text is interpreted\n   */\n  textSearch(\n    column: string,\n    query: string,\n    { config, type }: { config?: string; type?: 'plain' | 'phrase' | 'websearch' } = {}\n  ): this {\n    let typePart = ''\n    if (type === 'plain') {\n      typePart = 'pl'\n    } else if (type === 'phrase') {\n      typePart = 'ph'\n    } else if (type === 'websearch') {\n      typePart = 'w'\n    }\n    const configPart = config === undefined ? '' : `(${config})`\n    this.url.searchParams.append(column, `${typePart}fts${configPart}.${query}`)\n    return this\n  }\n\n  match<ColumnName extends string & keyof Row>(query: Record<ColumnName, Row[ColumnName]>): this\n  match(query: Record<string, unknown>): this\n  /**\n   * Match only rows where each column in `query` keys is equal to its\n   * associated value. Shorthand for multiple `.eq()`s.\n   *\n   * @param query - The object to filter with, with column names as keys mapped\n   * to their filter values\n   */\n  match(query: Record<string, unknown>): this {\n    Object.entries(query).forEach(([column, value]) => {\n      this.url.searchParams.append(column, `eq.${value}`)\n    })\n    return this\n  }\n\n  not<ColumnName extends string & keyof Row>(\n    column: ColumnName,\n    operator: FilterOperator,\n    value: Row[ColumnName]\n  ): this\n  not(column: string, operator: string, value: unknown): this\n  /**\n   * Match only rows which doesn't satisfy the filter.\n   *\n   * Unlike most filters, `opearator` and `value` are used as-is and need to\n   * follow [PostgREST\n   * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n   * to make sure they are properly sanitized.\n   *\n   * @param column - The column to filter on\n   * @param operator - The operator to be negated to filter with, following\n   * PostgREST syntax\n   * @param value - The value to filter with, following PostgREST syntax\n   */\n  not(column: string, operator: string, value: unknown): this {\n    this.url.searchParams.append(column, `not.${operator}.${value}`)\n    return this\n  }\n\n  /**\n   * Match only rows which satisfy at least one of the filters.\n   *\n   * Unlike most filters, `filters` is used as-is and needs to follow [PostgREST\n   * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n   * to make sure it's properly sanitized.\n   *\n   * It's currently not possible to do an `.or()` filter across multiple tables.\n   *\n   * @param filters - The filters to use, following PostgREST syntax\n   * @param options - Named parameters\n   * @param options.referencedTable - Set this to filter on referenced tables\n   * instead of the parent table\n   * @param options.foreignTable - Deprecated, use `referencedTable` instead\n   */\n  or(\n    filters: string,\n    {\n      foreignTable,\n      referencedTable = foreignTable,\n    }: { foreignTable?: string; referencedTable?: string } = {}\n  ): this {\n    const key = referencedTable ? `${referencedTable}.or` : 'or'\n    this.url.searchParams.append(key, `(${filters})`)\n    return this\n  }\n\n  filter<ColumnName extends string & keyof Row>(\n    column: ColumnName,\n    operator: `${'' | 'not.'}${FilterOperator}`,\n    value: unknown\n  ): this\n  filter(column: string, operator: string, value: unknown): this\n  /**\n   * Match only rows which satisfy the filter. This is an escape hatch - you\n   * should use the specific filter methods wherever possible.\n   *\n   * Unlike most filters, `opearator` and `value` are used as-is and need to\n   * follow [PostgREST\n   * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n   * to make sure they are properly sanitized.\n   *\n   * @param column - The column to filter on\n   * @param operator - The operator to filter with, following PostgREST syntax\n   * @param value - The value to filter with, following PostgREST syntax\n   */\n  filter(column: string, operator: string, value: unknown): this {\n    this.url.searchParams.append(column, `${operator}.${value}`)\n    return this\n  }\n}\n","import PostgrestFilterBuilder from './PostgrestFilterBuilder'\nimport { GetResult } from './select-query-parser/result'\nimport {\n  ClientServerOptions,\n  Fetch,\n  GenericSchema,\n  GenericTable,\n  GenericView,\n} from './types/common/common'\n\nexport default class PostgrestQueryBuilder<\n  ClientOptions extends ClientServerOptions,\n  Schema extends GenericSchema,\n  Relation extends GenericTable | GenericView,\n  RelationName = unknown,\n  Relationships = Relation extends { Relationships: infer R } ? R : unknown,\n> {\n  url: URL\n  headers: Headers\n  schema?: string\n  signal?: AbortSignal\n  fetch?: Fetch\n  urlLengthLimit: number\n\n  /**\n   * Creates a query builder scoped to a Postgres table or view.\n   *\n   * @example\n   * ```ts\n   * import PostgrestQueryBuilder from '@supabase/postgrest-js'\n   *\n   * const query = new PostgrestQueryBuilder(\n   *   new URL('https://xyzcompany.supabase.co/rest/v1/users'),\n   *   { headers: { apikey: 'public-anon-key' } }\n   * )\n   * ```\n   */\n  constructor(\n    url: URL,\n    {\n      headers = {},\n      schema,\n      fetch,\n      urlLengthLimit = 8000,\n    }: {\n      headers?: HeadersInit\n      schema?: string\n      fetch?: Fetch\n      urlLengthLimit?: number\n    }\n  ) {\n    this.url = url\n    this.headers = new Headers(headers)\n    this.schema = schema\n    this.fetch = fetch\n    this.urlLengthLimit = urlLengthLimit\n  }\n\n  /**\n   * Clone URL and headers to prevent shared state between operations.\n   */\n  private cloneRequestState(): { url: URL; headers: Headers } {\n    return {\n      url: new URL(this.url.toString()),\n      headers: new Headers(this.headers),\n    }\n  }\n\n  /**\n   * Perform a SELECT query on the table or view.\n   *\n   * @param columns - The columns to retrieve, separated by commas. Columns can be renamed when returned with `customName:columnName`\n   *\n   * @param options - Named parameters\n   *\n   * @param options.head - When set to `true`, `data` will not be returned.\n   * Useful if you only need the count.\n   *\n   * @param options.count - Count algorithm to use to count rows in the table or view.\n   *\n   * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n   * hood.\n   *\n   * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n   * statistics under the hood.\n   *\n   * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n   * numbers.\n   *\n   * @remarks\n   * When using `count` with `.range()` or `.limit()`, the returned `count` is the total number of rows\n   * that match your filters, not the number of rows in the current page. Use this to build pagination UI.\n   */\n  select<\n    Query extends string = '*',\n    ResultOne = GetResult<\n      Schema,\n      Relation['Row'],\n      RelationName,\n      Relationships,\n      Query,\n      ClientOptions\n    >,\n  >(\n    columns?: Query,\n    options?: {\n      head?: boolean\n      count?: 'exact' | 'planned' | 'estimated'\n    }\n  ): PostgrestFilterBuilder<\n    ClientOptions,\n    Schema,\n    Relation['Row'],\n    ResultOne[],\n    RelationName,\n    Relationships,\n    'GET'\n  > {\n    const { head = false, count } = options ?? {}\n\n    const method = head ? 'HEAD' : 'GET'\n    // Remove whitespaces except when quoted\n    let quoted = false\n    const cleanedColumns = (columns ?? '*')\n      .split('')\n      .map((c) => {\n        if (/\\s/.test(c) && !quoted) {\n          return ''\n        }\n        if (c === '\"') {\n          quoted = !quoted\n        }\n        return c\n      })\n      .join('')\n\n    const { url, headers } = this.cloneRequestState()\n    url.searchParams.set('select', cleanedColumns)\n\n    if (count) {\n      headers.append('Prefer', `count=${count}`)\n    }\n\n    return new PostgrestFilterBuilder({\n      method,\n      url,\n      headers,\n      schema: this.schema,\n      fetch: this.fetch,\n      urlLengthLimit: this.urlLengthLimit,\n    })\n  }\n\n  // TODO(v3): Make `defaultToNull` consistent for both single & bulk inserts.\n  insert<Row extends Relation extends { Insert: unknown } ? Relation['Insert'] : never>(\n    values: Row,\n    options?: {\n      count?: 'exact' | 'planned' | 'estimated'\n    }\n  ): PostgrestFilterBuilder<\n    ClientOptions,\n    Schema,\n    Relation['Row'],\n    null,\n    RelationName,\n    Relationships,\n    'POST'\n  >\n  insert<Row extends Relation extends { Insert: unknown } ? Relation['Insert'] : never>(\n    values: Row[],\n    options?: {\n      count?: 'exact' | 'planned' | 'estimated'\n      defaultToNull?: boolean\n    }\n  ): PostgrestFilterBuilder<\n    ClientOptions,\n    Schema,\n    Relation['Row'],\n    null,\n    RelationName,\n    Relationships,\n    'POST'\n  >\n  /**\n   * Perform an INSERT into the table or view.\n   *\n   * By default, inserted rows are not returned. To return it, chain the call\n   * with `.select()`.\n   *\n   * @param values - The values to insert. Pass an object to insert a single row\n   * or an array to insert multiple rows.\n   *\n   * @param options - Named parameters\n   *\n   * @param options.count - Count algorithm to use to count inserted rows.\n   *\n   * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n   * hood.\n   *\n   * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n   * statistics under the hood.\n   *\n   * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n   * numbers.\n   *\n   * @param options.defaultToNull - Make missing fields default to `null`.\n   * Otherwise, use the default value for the column. Only applies for bulk\n   * inserts.\n   */\n  insert<Row extends Relation extends { Insert: unknown } ? Relation['Insert'] : never>(\n    values: Row | Row[],\n    {\n      count,\n      defaultToNull = true,\n    }: {\n      count?: 'exact' | 'planned' | 'estimated'\n      defaultToNull?: boolean\n    } = {}\n  ): PostgrestFilterBuilder<\n    ClientOptions,\n    Schema,\n    Relation['Row'],\n    null,\n    RelationName,\n    Relationships,\n    'POST'\n  > {\n    const method = 'POST'\n    const { url, headers } = this.cloneRequestState()\n\n    if (count) {\n      headers.append('Prefer', `count=${count}`)\n    }\n    if (!defaultToNull) {\n      headers.append('Prefer', `missing=default`)\n    }\n\n    if (Array.isArray(values)) {\n      const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), [] as string[])\n      if (columns.length > 0) {\n        const uniqueColumns = [...new Set(columns)].map((column) => `\"${column}\"`)\n        url.searchParams.set('columns', uniqueColumns.join(','))\n      }\n    }\n\n    return new PostgrestFilterBuilder({\n      method,\n      url,\n      headers,\n      schema: this.schema,\n      body: values,\n      fetch: this.fetch ?? fetch,\n      urlLengthLimit: this.urlLengthLimit,\n    })\n  }\n\n  // TODO(v3): Make `defaultToNull` consistent for both single & bulk upserts.\n  upsert<Row extends Relation extends { Insert: unknown } ? Relation['Insert'] : never>(\n    values: Row,\n    options?: {\n      onConflict?: string\n      ignoreDuplicates?: boolean\n      count?: 'exact' | 'planned' | 'estimated'\n    }\n  ): PostgrestFilterBuilder<\n    ClientOptions,\n    Schema,\n    Relation['Row'],\n    null,\n    RelationName,\n    Relationships,\n    'POST'\n  >\n  upsert<Row extends Relation extends { Insert: unknown } ? Relation['Insert'] : never>(\n    values: Row[],\n    options?: {\n      onConflict?: string\n      ignoreDuplicates?: boolean\n      count?: 'exact' | 'planned' | 'estimated'\n      defaultToNull?: boolean\n    }\n  ): PostgrestFilterBuilder<\n    ClientOptions,\n    Schema,\n    Relation['Row'],\n    null,\n    RelationName,\n    Relationships,\n    'POST'\n  >\n  /**\n   * Perform an UPSERT on the table or view. Depending on the column(s) passed\n   * to `onConflict`, `.upsert()` allows you to perform the equivalent of\n   * `.insert()` if a row with the corresponding `onConflict` columns doesn't\n   * exist, or if it does exist, perform an alternative action depending on\n   * `ignoreDuplicates`.\n   *\n   * By default, upserted rows are not returned. To return it, chain the call\n   * with `.select()`.\n   *\n   * @param values - The values to upsert with. Pass an object to upsert a\n   * single row or an array to upsert multiple rows.\n   *\n   * @param options - Named parameters\n   *\n   * @param options.onConflict - Comma-separated UNIQUE column(s) to specify how\n   * duplicate rows are determined. Two rows are duplicates if all the\n   * `onConflict` columns are equal.\n   *\n   * @param options.ignoreDuplicates - If `true`, duplicate rows are ignored. If\n   * `false`, duplicate rows are merged with existing rows.\n   *\n   * @param options.count - Count algorithm to use to count upserted rows.\n   *\n   * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n   * hood.\n   *\n   * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n   * statistics under the hood.\n   *\n   * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n   * numbers.\n   *\n   * @param options.defaultToNull - Make missing fields default to `null`.\n   * Otherwise, use the default value for the column. This only applies when\n   * inserting new rows, not when merging with existing rows under\n   * `ignoreDuplicates: false`. This also only applies when doing bulk upserts.\n   *\n   * @example Upsert a single row using a unique key\n   * ```ts\n   * // Upserting a single row, overwriting based on the 'username' unique column\n   * const { data, error } = await supabase\n   *   .from('users')\n   *   .upsert({ username: 'supabot' }, { onConflict: 'username' })\n   *\n   * // Example response:\n   * // {\n   * //   data: [\n   * //     { id: 4, message: 'bar', username: 'supabot' }\n   * //   ],\n   * //   error: null\n   * // }\n   * ```\n   *\n   * @example Upsert with conflict resolution and exact row counting\n   * ```ts\n   * // Upserting and returning exact count\n   * const { data, error, count } = await supabase\n   *   .from('users')\n   *   .upsert(\n   *     {\n   *       id: 3,\n   *       message: 'foo',\n   *       username: 'supabot'\n   *     },\n   *     {\n   *       onConflict: 'username',\n   *       count: 'exact'\n   *     }\n   *   )\n   *\n   * // Example response:\n   * // {\n   * //   data: [\n   * //     {\n   * //       id: 42,\n   * //       handle: \"saoirse\",\n   * //       display_name: \"Saoirse\"\n   * //     }\n   * //   ],\n   * //   count: 1,\n   * //   error: null\n   * // }\n   * ```\n   */\n\n  upsert<Row extends Relation extends { Insert: unknown } ? Relation['Insert'] : never>(\n    values: Row | Row[],\n    {\n      onConflict,\n      ignoreDuplicates = false,\n      count,\n      defaultToNull = true,\n    }: {\n      onConflict?: string\n      ignoreDuplicates?: boolean\n      count?: 'exact' | 'planned' | 'estimated'\n      defaultToNull?: boolean\n    } = {}\n  ): PostgrestFilterBuilder<\n    ClientOptions,\n    Schema,\n    Relation['Row'],\n    null,\n    RelationName,\n    Relationships,\n    'POST'\n  > {\n    const method = 'POST'\n    const { url, headers } = this.cloneRequestState()\n\n    headers.append('Prefer', `resolution=${ignoreDuplicates ? 'ignore' : 'merge'}-duplicates`)\n\n    if (onConflict !== undefined) url.searchParams.set('on_conflict', onConflict)\n    if (count) {\n      headers.append('Prefer', `count=${count}`)\n    }\n    if (!defaultToNull) {\n      headers.append('Prefer', 'missing=default')\n    }\n\n    if (Array.isArray(values)) {\n      const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), [] as string[])\n      if (columns.length > 0) {\n        const uniqueColumns = [...new Set(columns)].map((column) => `\"${column}\"`)\n        url.searchParams.set('columns', uniqueColumns.join(','))\n      }\n    }\n\n    return new PostgrestFilterBuilder({\n      method,\n      url,\n      headers,\n      schema: this.schema,\n      body: values,\n      fetch: this.fetch ?? fetch,\n      urlLengthLimit: this.urlLengthLimit,\n    })\n  }\n\n  /**\n   * Perform an UPDATE on the table or view.\n   *\n   * By default, updated rows are not returned. To return it, chain the call\n   * with `.select()` after filters.\n   *\n   * @param values - The values to update with\n   *\n   * @param options - Named parameters\n   *\n   * @param options.count - Count algorithm to use to count updated rows.\n   *\n   * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n   * hood.\n   *\n   * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n   * statistics under the hood.\n   *\n   * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n   * numbers.\n   */\n  update<Row extends Relation extends { Update: unknown } ? Relation['Update'] : never>(\n    values: Row,\n    {\n      count,\n    }: {\n      count?: 'exact' | 'planned' | 'estimated'\n    } = {}\n  ): PostgrestFilterBuilder<\n    ClientOptions,\n    Schema,\n    Relation['Row'],\n    null,\n    RelationName,\n    Relationships,\n    'PATCH'\n  > {\n    const method = 'PATCH'\n    const { url, headers } = this.cloneRequestState()\n\n    if (count) {\n      headers.append('Prefer', `count=${count}`)\n    }\n\n    return new PostgrestFilterBuilder({\n      method,\n      url,\n      headers,\n      schema: this.schema,\n      body: values,\n      fetch: this.fetch ?? fetch,\n      urlLengthLimit: this.urlLengthLimit,\n    })\n  }\n\n  /**\n   * Perform a DELETE on the table or view.\n   *\n   * By default, deleted rows are not returned. To return it, chain the call\n   * with `.select()` after filters.\n   *\n   * @param options - Named parameters\n   *\n   * @param options.count - Count algorithm to use to count deleted rows.\n   *\n   * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n   * hood.\n   *\n   * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n   * statistics under the hood.\n   *\n   * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n   * numbers.\n   */\n  delete({\n    count,\n  }: {\n    count?: 'exact' | 'planned' | 'estimated'\n  } = {}): PostgrestFilterBuilder<\n    ClientOptions,\n    Schema,\n    Relation['Row'],\n    null,\n    RelationName,\n    Relationships,\n    'DELETE'\n  > {\n    const method = 'DELETE'\n    const { url, headers } = this.cloneRequestState()\n\n    if (count) {\n      headers.append('Prefer', `count=${count}`)\n    }\n\n    return new PostgrestFilterBuilder({\n      method,\n      url,\n      headers,\n      schema: this.schema,\n      fetch: this.fetch ?? fetch,\n      urlLengthLimit: this.urlLengthLimit,\n    })\n  }\n}\n","import PostgrestQueryBuilder from './PostgrestQueryBuilder'\nimport PostgrestFilterBuilder from './PostgrestFilterBuilder'\nimport { Fetch, GenericSchema, ClientServerOptions } from './types/common/common'\nimport { GetRpcFunctionFilterBuilderByArgs } from './types/common/rpc'\n\n/**\n * PostgREST client.\n *\n * @typeParam Database - Types for the schema from the [type\n * generator](https://supabase.com/docs/reference/javascript/next/typescript-support)\n *\n * @typeParam SchemaName - Postgres schema to switch to. Must be a string\n * literal, the same one passed to the constructor. If the schema is not\n * `\"public\"`, this must be supplied manually.\n */\nexport default class PostgrestClient<\n  Database = any,\n  ClientOptions extends ClientServerOptions = Database extends {\n    __InternalSupabase: infer I extends ClientServerOptions\n  }\n    ? I\n    : {},\n  SchemaName extends string &\n    keyof Omit<Database, '__InternalSupabase'> = 'public' extends keyof Omit<\n    Database,\n    '__InternalSupabase'\n  >\n    ? 'public'\n    : string & keyof Omit<Database, '__InternalSupabase'>,\n  Schema extends GenericSchema = Omit<\n    Database,\n    '__InternalSupabase'\n  >[SchemaName] extends GenericSchema\n    ? Omit<Database, '__InternalSupabase'>[SchemaName]\n    : any,\n> {\n  url: string\n  headers: Headers\n  schemaName?: SchemaName\n  fetch?: Fetch\n  urlLengthLimit: number\n\n  // TODO: Add back shouldThrowOnError once we figure out the typings\n  /**\n   * Creates a PostgREST client.\n   *\n   * @param url - URL of the PostgREST endpoint\n   * @param options - Named parameters\n   * @param options.headers - Custom headers\n   * @param options.schema - Postgres schema to switch to\n   * @param options.fetch - Custom fetch\n   * @param options.timeout - Optional timeout in milliseconds for all requests. When set, requests will automatically abort after this duration to prevent indefinite hangs.\n   * @param options.urlLengthLimit - Maximum URL length in characters before warnings/errors are triggered. Defaults to 8000.\n   * @example\n   * ```ts\n   * import PostgrestClient from '@supabase/postgrest-js'\n   *\n   * const postgrest = new PostgrestClient('https://xyzcompany.supabase.co/rest/v1', {\n   *   headers: { apikey: 'public-anon-key' },\n   *   schema: 'public',\n   *   timeout: 30000, // 30 second timeout\n   * })\n   * ```\n   */\n  constructor(\n    url: string,\n    {\n      headers = {},\n      schema,\n      fetch,\n      timeout,\n      urlLengthLimit = 8000,\n    }: {\n      headers?: HeadersInit\n      schema?: SchemaName\n      fetch?: Fetch\n      timeout?: number\n      urlLengthLimit?: number\n    } = {}\n  ) {\n    this.url = url\n    this.headers = new Headers(headers)\n    this.schemaName = schema\n    this.urlLengthLimit = urlLengthLimit\n\n    const originalFetch = fetch ?? globalThis.fetch\n\n    // Wrap fetch with timeout if specified\n    if (timeout !== undefined && timeout > 0) {\n      this.fetch = (input, init) => {\n        const controller = new AbortController()\n        const timeoutId = setTimeout(() => controller.abort(), timeout)\n\n        // Merge abort signals if one already exists\n        const existingSignal = init?.signal\n        if (existingSignal) {\n          // If the existing signal is already aborted, use it directly\n          if (existingSignal.aborted) {\n            clearTimeout(timeoutId)\n            return originalFetch(input, init)\n          }\n\n          // Listen to existing signal and abort our controller too\n          const abortHandler = () => {\n            clearTimeout(timeoutId)\n            controller.abort()\n          }\n          existingSignal.addEventListener('abort', abortHandler, { once: true })\n\n          return originalFetch(input, {\n            ...init,\n            signal: controller.signal,\n          }).finally(() => {\n            clearTimeout(timeoutId)\n            existingSignal.removeEventListener('abort', abortHandler)\n          })\n        }\n\n        return originalFetch(input, {\n          ...init,\n          signal: controller.signal,\n        }).finally(() => clearTimeout(timeoutId))\n      }\n    } else {\n      this.fetch = originalFetch\n    }\n  }\n  from<\n    TableName extends string & keyof Schema['Tables'],\n    Table extends Schema['Tables'][TableName],\n  >(relation: TableName): PostgrestQueryBuilder<ClientOptions, Schema, Table, TableName>\n  from<ViewName extends string & keyof Schema['Views'], View extends Schema['Views'][ViewName]>(\n    relation: ViewName\n  ): PostgrestQueryBuilder<ClientOptions, Schema, View, ViewName>\n  /**\n   * Perform a query on a table or a view.\n   *\n   * @param relation - The table or view name to query\n   */\n  from(\n    relation: (string & keyof Schema['Tables']) | (string & keyof Schema['Views'])\n  ): PostgrestQueryBuilder<ClientOptions, Schema, any, any> {\n    if (!relation || typeof relation !== 'string' || relation.trim() === '') {\n      throw new Error('Invalid relation name: relation must be a non-empty string.')\n    }\n\n    const url = new URL(`${this.url}/${relation}`)\n    return new PostgrestQueryBuilder(url, {\n      headers: new Headers(this.headers),\n      schema: this.schemaName,\n      fetch: this.fetch,\n      urlLengthLimit: this.urlLengthLimit,\n    })\n  }\n\n  /**\n   * Select a schema to query or perform an function (rpc) call.\n   *\n   * The schema needs to be on the list of exposed schemas inside Supabase.\n   *\n   * @param schema - The schema to query\n   */\n  schema<DynamicSchema extends string & keyof Omit<Database, '__InternalSupabase'>>(\n    schema: DynamicSchema\n  ): PostgrestClient<\n    Database,\n    ClientOptions,\n    DynamicSchema,\n    Database[DynamicSchema] extends GenericSchema ? Database[DynamicSchema] : any\n  > {\n    return new PostgrestClient(this.url, {\n      headers: this.headers,\n      schema,\n      fetch: this.fetch,\n      urlLengthLimit: this.urlLengthLimit,\n    })\n  }\n\n  /**\n   * Perform a function call.\n   *\n   * @param fn - The function name to call\n   * @param args - The arguments to pass to the function call\n   * @param options - Named parameters\n   * @param options.head - When set to `true`, `data` will not be returned.\n   * Useful if you only need the count.\n   * @param options.get - When set to `true`, the function will be called with\n   * read-only access mode.\n   * @param options.count - Count algorithm to use to count rows returned by the\n   * function. Only applicable for [set-returning\n   * functions](https://www.postgresql.org/docs/current/functions-srf.html).\n   *\n   * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n   * hood.\n   *\n   * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n   * statistics under the hood.\n   *\n   * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n   * numbers.\n   *\n   * @example\n   * ```ts\n   * // For cross-schema functions where type inference fails, use overrideTypes:\n   * const { data } = await supabase\n   *   .schema('schema_b')\n   *   .rpc('function_a', {})\n   *   .overrideTypes<{ id: string; user_id: string }[]>()\n   * ```\n   */\n  rpc<\n    FnName extends string & keyof Schema['Functions'],\n    Args extends Schema['Functions'][FnName]['Args'] = never,\n    FilterBuilder extends GetRpcFunctionFilterBuilderByArgs<\n      Schema,\n      FnName,\n      Args\n    > = GetRpcFunctionFilterBuilderByArgs<Schema, FnName, Args>,\n  >(\n    fn: FnName,\n    args: Args = {} as Args,\n    {\n      head = false,\n      get = false,\n      count,\n    }: {\n      head?: boolean\n      get?: boolean\n      count?: 'exact' | 'planned' | 'estimated'\n    } = {}\n  ): PostgrestFilterBuilder<\n    ClientOptions,\n    Schema,\n    FilterBuilder['Row'],\n    FilterBuilder['Result'],\n    FilterBuilder['RelationName'],\n    FilterBuilder['Relationships'],\n    'RPC'\n  > {\n    let method: 'HEAD' | 'GET' | 'POST'\n    const url = new URL(`${this.url}/rpc/${fn}`)\n    let body: unknown | undefined\n    // objects/arrays-of-objects can't be serialized to URL params, use POST + return=minimal instead\n    const _isObject = (v: unknown): boolean =>\n      v !== null && typeof v === 'object' && (!Array.isArray(v) || v.some(_isObject))\n    const _hasObjectArg = head && Object.values(args as object).some(_isObject)\n    if (_hasObjectArg) {\n      method = 'POST'\n      body = args\n    } else if (head || get) {\n      method = head ? 'HEAD' : 'GET'\n      Object.entries(args)\n        // params with undefined value needs to be filtered out, otherwise it'll\n        // show up as `?param=undefined`\n        .filter(([_, value]) => value !== undefined)\n        // array values need special syntax\n        .map(([name, value]) => [name, Array.isArray(value) ? `{${value.join(',')}}` : `${value}`])\n        .forEach(([name, value]) => {\n          url.searchParams.append(name, value)\n        })\n    } else {\n      method = 'POST'\n      body = args\n    }\n\n    const headers = new Headers(this.headers)\n    if (_hasObjectArg) {\n      headers.set('Prefer', count ? `count=${count},return=minimal` : 'return=minimal')\n    } else if (count) {\n      headers.set('Prefer', `count=${count}`)\n    }\n\n    return new PostgrestFilterBuilder({\n      method,\n      url,\n      headers,\n      schema: this.schemaName,\n      body,\n      fetch: this.fetch ?? fetch,\n      urlLengthLimit: this.urlLengthLimit,\n    })\n  }\n}\n","export interface WebSocketLike {\n  readonly CONNECTING: number\n  readonly OPEN: number\n  readonly CLOSING: number\n  readonly CLOSED: number\n  readonly readyState: number\n  readonly url: string\n  readonly protocol: string\n\n  /**\n   * Closes the socket, optionally providing a close code and reason.\n   */\n  close(code?: number, reason?: string): void\n  /**\n   * Sends data through the socket using the underlying implementation.\n   */\n  send(data: string | ArrayBufferLike | Blob | ArrayBufferView): void\n\n  onopen: ((this: any, ev: Event) => any) | null\n  onmessage: ((this: any, ev: MessageEvent) => any) | null\n  onclose: ((this: any, ev: CloseEvent) => any) | null\n  onerror: ((this: any, ev: Event) => any) | null\n\n  /**\n   * Registers an event listener on the socket (compatible with browser WebSocket API).\n   */\n  addEventListener(type: string, listener: EventListener): void\n  /**\n   * Removes a previously registered event listener.\n   */\n  removeEventListener(type: string, listener: EventListener): void\n\n  // Add additional properties that may exist on WebSocket implementations\n  binaryType?: string\n  bufferedAmount?: number\n  extensions?: string\n  dispatchEvent?: (event: Event) => boolean\n}\n\nexport interface WebSocketEnvironment {\n  type: 'native' | 'ws' | 'cloudflare' | 'unsupported'\n  constructor?: any\n  error?: string\n  workaround?: string\n}\n\n/**\n * Utilities for creating WebSocket instances across runtimes.\n */\nexport class WebSocketFactory {\n  /**\n   * Static-only utility  prevent instantiation.\n   */\n  private constructor() {}\n  private static detectEnvironment(): WebSocketEnvironment {\n    if (typeof WebSocket !== 'undefined') {\n      return { type: 'native', constructor: WebSocket }\n    }\n\n    if (typeof globalThis !== 'undefined' && typeof (globalThis as any).WebSocket !== 'undefined') {\n      return { type: 'native', constructor: (globalThis as any).WebSocket }\n    }\n\n    if (typeof global !== 'undefined' && typeof (global as any).WebSocket !== 'undefined') {\n      return { type: 'native', constructor: (global as any).WebSocket }\n    }\n\n    if (\n      typeof globalThis !== 'undefined' &&\n      typeof (globalThis as any).WebSocketPair !== 'undefined' &&\n      typeof globalThis.WebSocket === 'undefined'\n    ) {\n      return {\n        type: 'cloudflare',\n        error:\n          'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n        workaround:\n          'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.',\n      }\n    }\n\n    if (\n      (typeof globalThis !== 'undefined' && (globalThis as any).EdgeRuntime) ||\n      (typeof navigator !== 'undefined' && navigator.userAgent?.includes('Vercel-Edge'))\n    ) {\n      return {\n        type: 'unsupported',\n        error:\n          'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n        workaround:\n          'Use serverless functions or a different deployment target for WebSocket functionality.',\n      }\n    }\n\n    // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n    const _process = (globalThis as any)['process']\n    if (_process) {\n      const processVersions = _process['versions']\n      if (processVersions && processVersions['node']) {\n        // Remove 'v' prefix if present and parse the major version\n        const versionString = processVersions['node']\n        const nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0])\n\n        // Node.js 22+ should have native WebSocket\n        if (nodeVersion >= 22) {\n          // Check if native WebSocket is available (should be in Node.js 22+)\n          if (typeof globalThis.WebSocket !== 'undefined') {\n            return { type: 'native', constructor: globalThis.WebSocket }\n          }\n          // If not available, user needs to provide it\n          return {\n            type: 'unsupported',\n            error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n            workaround: 'Provide a WebSocket implementation via the transport option.',\n          }\n        }\n\n        // Node.js < 22 doesn't have native WebSocket\n        return {\n          type: 'unsupported',\n          error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n          workaround:\n            'For Node.js < 22, install \"ws\" package and provide it via the transport option:\\n' +\n            'import ws from \"ws\"\\n' +\n            'new RealtimeClient(url, { transport: ws })',\n        }\n      }\n    }\n\n    return {\n      type: 'unsupported',\n      error: 'Unknown JavaScript runtime without WebSocket support.',\n      workaround:\n        \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\",\n    }\n  }\n\n  /**\n   * Returns the best available WebSocket constructor for the current runtime.\n   *\n   * @example\n   * ```ts\n   * const WS = WebSocketFactory.getWebSocketConstructor()\n   * const socket = new WS('wss://realtime.supabase.co/socket')\n   * ```\n   */\n  public static getWebSocketConstructor(): typeof WebSocket {\n    const env = this.detectEnvironment()\n    if (env.constructor) {\n      return env.constructor\n    }\n    let errorMessage = env.error || 'WebSocket not supported in this environment.'\n    if (env.workaround) {\n      errorMessage += `\\n\\nSuggested solution: ${env.workaround}`\n    }\n    throw new Error(errorMessage)\n  }\n\n  /**\n   * Creates a WebSocket using the detected constructor.\n   *\n   * @example\n   * ```ts\n   * const socket = WebSocketFactory.createWebSocket('wss://realtime.supabase.co/socket')\n   * ```\n   */\n  public static createWebSocket(url: string | URL, protocols?: string | string[]): WebSocketLike {\n    const WS = this.getWebSocketConstructor()\n    return new WS(url, protocols)\n  }\n\n  /**\n   * Detects whether the runtime can establish WebSocket connections.\n   *\n   * @example\n   * ```ts\n   * if (!WebSocketFactory.isWebSocketSupported()) {\n   *   console.warn('Falling back to long polling')\n   * }\n   * ```\n   */\n  public static isWebSocketSupported(): boolean {\n    try {\n      const env = this.detectEnvironment()\n      return env.type === 'native' || env.type === 'ws'\n    } catch {\n      return false\n    }\n  }\n}\n\nexport default WebSocketFactory\n","import { version } from './version'\n\nexport const DEFAULT_VERSION = `realtime-js/${version}`\n\nexport const VSN_1_0_0: string = '1.0.0'\nexport const VSN_2_0_0: string = '2.0.0'\nexport const DEFAULT_VSN: string = VSN_2_0_0\n\nexport const VERSION = version\n\nexport const DEFAULT_TIMEOUT = 10000\n\nexport const WS_CLOSE_NORMAL = 1000\nexport const MAX_PUSH_BUFFER_SIZE = 100\n\nexport enum SOCKET_STATES {\n  connecting = 0,\n  open = 1,\n  closing = 2,\n  closed = 3,\n}\n\nexport enum CHANNEL_STATES {\n  closed = 'closed',\n  errored = 'errored',\n  joined = 'joined',\n  joining = 'joining',\n  leaving = 'leaving',\n}\n\nexport enum CHANNEL_EVENTS {\n  close = 'phx_close',\n  error = 'phx_error',\n  join = 'phx_join',\n  reply = 'phx_reply',\n  leave = 'phx_leave',\n  access_token = 'access_token',\n}\n\nexport enum TRANSPORTS {\n  websocket = 'websocket',\n}\n\nexport enum CONNECTION_STATE {\n  Connecting = 'connecting',\n  Open = 'open',\n  Closing = 'closing',\n  Closed = 'closed',\n}\n","// Generated automatically during releases by scripts/update-version-files.ts\n// This file provides runtime access to the package version for:\n// - HTTP request headers (e.g., X-Client-Info header for API requests)\n// - Debugging and support (identifying which version is running)\n// - Telemetry and logging (version reporting in errors/analytics)\n// - Ensuring build artifacts match the published package version\nexport const version = '2.97.0'\n","/**\n * Helpers to convert the change Payload into native JS types.\n */\n\n// Adapted from epgsql (src/epgsql_binary.erl), this module licensed under\n// 3-clause BSD found here: https://raw.githubusercontent.com/epgsql/epgsql/devel/LICENSE\n\nexport enum PostgresTypes {\n  abstime = 'abstime',\n  bool = 'bool',\n  date = 'date',\n  daterange = 'daterange',\n  float4 = 'float4',\n  float8 = 'float8',\n  int2 = 'int2',\n  int4 = 'int4',\n  int4range = 'int4range',\n  int8 = 'int8',\n  int8range = 'int8range',\n  json = 'json',\n  jsonb = 'jsonb',\n  money = 'money',\n  numeric = 'numeric',\n  oid = 'oid',\n  reltime = 'reltime',\n  text = 'text',\n  time = 'time',\n  timestamp = 'timestamp',\n  timestamptz = 'timestamptz',\n  timetz = 'timetz',\n  tsrange = 'tsrange',\n  tstzrange = 'tstzrange',\n}\n\ntype Columns = {\n  name: string // the column name. eg: \"user_id\"\n  type: string // the column type. eg: \"uuid\"\n  flags?: string[] // any special flags for the column. eg: [\"key\"]\n  type_modifier?: number // the type modifier. eg: 4294967295\n}[]\n\ntype BaseValue = null | string | number | boolean\ntype RecordValue = BaseValue | BaseValue[]\n\ntype Record = {\n  [key: string]: RecordValue\n}\n\n/**\n * Takes an array of columns and an object of string values then converts each string value\n * to its mapped type.\n *\n * @param {{name: String, type: String}[]} columns\n * @param {Object} record\n * @param {Object} options The map of various options that can be applied to the mapper\n * @param {Array} options.skipTypes The array of types that should not be converted\n *\n * @example convertChangeData([{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age:'33'}, {})\n * //=>{ first_name: 'Paul', age: 33 }\n */\nexport const convertChangeData = (\n  columns: Columns,\n  record: Record | null,\n  options: { skipTypes?: string[] } = {}\n): Record => {\n  const skipTypes = options.skipTypes ?? []\n\n  if (!record) {\n    return {}\n  }\n\n  return Object.keys(record).reduce((acc, rec_key) => {\n    acc[rec_key] = convertColumn(rec_key, columns, record, skipTypes)\n    return acc\n  }, {} as Record)\n}\n\n/**\n * Converts the value of an individual column.\n *\n * @param {String} columnName The column that you want to convert\n * @param {{name: String, type: String}[]} columns All of the columns\n * @param {Object} record The map of string values\n * @param {Array} skipTypes An array of types that should not be converted\n * @return {object} Useless information\n *\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, [])\n * //=> 33\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, ['int4'])\n * //=> \"33\"\n */\nexport const convertColumn = (\n  columnName: string,\n  columns: Columns,\n  record: Record,\n  skipTypes: string[]\n): RecordValue => {\n  const column = columns.find((x) => x.name === columnName)\n  const colType = column?.type\n  const value = record[columnName]\n\n  if (colType && !skipTypes.includes(colType)) {\n    return convertCell(colType, value)\n  }\n\n  return noop(value)\n}\n\n/**\n * If the value of the cell is `null`, returns null.\n * Otherwise converts the string value to the correct type.\n * @param {String} type A postgres column type\n * @param {String} value The cell value\n *\n * @example convertCell('bool', 't')\n * //=> true\n * @example convertCell('int8', '10')\n * //=> 10\n * @example convertCell('_int4', '{1,2,3,4}')\n * //=> [1,2,3,4]\n */\nexport const convertCell = (type: string, value: RecordValue): RecordValue => {\n  // if data type is an array\n  if (type.charAt(0) === '_') {\n    const dataType = type.slice(1, type.length)\n    return toArray(value, dataType)\n  }\n\n  // If not null, convert to correct type.\n  switch (type) {\n    case PostgresTypes.bool:\n      return toBoolean(value)\n    case PostgresTypes.float4:\n    case PostgresTypes.float8:\n    case PostgresTypes.int2:\n    case PostgresTypes.int4:\n    case PostgresTypes.int8:\n    case PostgresTypes.numeric:\n    case PostgresTypes.oid:\n      return toNumber(value)\n    case PostgresTypes.json:\n    case PostgresTypes.jsonb:\n      return toJson(value)\n    case PostgresTypes.timestamp:\n      return toTimestampString(value) // Format to be consistent with PostgREST\n    case PostgresTypes.abstime: // To allow users to cast it based on Timezone\n    case PostgresTypes.date: // To allow users to cast it based on Timezone\n    case PostgresTypes.daterange:\n    case PostgresTypes.int4range:\n    case PostgresTypes.int8range:\n    case PostgresTypes.money:\n    case PostgresTypes.reltime: // To allow users to cast it based on Timezone\n    case PostgresTypes.text:\n    case PostgresTypes.time: // To allow users to cast it based on Timezone\n    case PostgresTypes.timestamptz: // To allow users to cast it based on Timezone\n    case PostgresTypes.timetz: // To allow users to cast it based on Timezone\n    case PostgresTypes.tsrange:\n    case PostgresTypes.tstzrange:\n      return noop(value)\n    default:\n      // Return the value for remaining types\n      return noop(value)\n  }\n}\n\nconst noop = (value: RecordValue): RecordValue => {\n  return value\n}\nexport const toBoolean = (value: RecordValue): RecordValue => {\n  switch (value) {\n    case 't':\n      return true\n    case 'f':\n      return false\n    default:\n      return value\n  }\n}\nexport const toNumber = (value: RecordValue): RecordValue => {\n  if (typeof value === 'string') {\n    const parsedValue = parseFloat(value)\n    if (!Number.isNaN(parsedValue)) {\n      return parsedValue\n    }\n  }\n  return value\n}\nexport const toJson = (value: RecordValue): RecordValue => {\n  if (typeof value === 'string') {\n    try {\n      return JSON.parse(value)\n    } catch {\n      return value\n    }\n  }\n  return value\n}\n\n/**\n * Converts a Postgres Array into a native JS array\n *\n * @example toArray('{}', 'int4')\n * //=> []\n * @example toArray('{\"[2021-01-01,2021-12-31)\",\"(2021-01-01,2021-12-32]\"}', 'daterange')\n * //=> ['[2021-01-01,2021-12-31)', '(2021-01-01,2021-12-32]']\n * @example toArray([1,2,3,4], 'int4')\n * //=> [1,2,3,4]\n */\nexport const toArray = (value: RecordValue, type: string): RecordValue => {\n  if (typeof value !== 'string') {\n    return value\n  }\n\n  const lastIdx = value.length - 1\n  const closeBrace = value[lastIdx]\n  const openBrace = value[0]\n\n  // Confirm value is a Postgres array by checking curly brackets\n  if (openBrace === '{' && closeBrace === '}') {\n    let arr\n    const valTrim = value.slice(1, lastIdx)\n\n    // TODO: find a better solution to separate Postgres array data\n    try {\n      arr = JSON.parse('[' + valTrim + ']')\n    } catch (_) {\n      // WARNING: splitting on comma does not cover all edge cases\n      arr = valTrim ? valTrim.split(',') : []\n    }\n\n    return arr.map((val: BaseValue) => convertCell(type, val))\n  }\n\n  return value\n}\n\n/**\n * Fixes timestamp to be ISO-8601. Swaps the space between the date and time for a 'T'\n * See https://github.com/supabase/supabase/issues/18\n *\n * @example toTimestampString('2019-09-10 00:00:00')\n * //=> '2019-09-10T00:00:00'\n */\nexport const toTimestampString = (value: RecordValue): RecordValue => {\n  if (typeof value === 'string') {\n    return value.replace(' ', 'T')\n  }\n\n  return value\n}\n\nexport const httpEndpointURL = (socketUrl: string): string => {\n  const wsUrl = new URL(socketUrl)\n\n  wsUrl.protocol = wsUrl.protocol.replace(/^ws/i, 'http')\n\n  wsUrl.pathname = wsUrl.pathname\n    .replace(/\\/+$/, '') // remove all trailing slashes\n    .replace(/\\/socket\\/websocket$/i, '') // remove the socket/websocket path\n    .replace(/\\/socket$/i, '') // remove the socket path\n    .replace(/\\/websocket$/i, '') // remove the websocket path\n\n  if (wsUrl.pathname === '' || wsUrl.pathname === '/') {\n    wsUrl.pathname = '/api/broadcast'\n  } else {\n    wsUrl.pathname = wsUrl.pathname + '/api/broadcast'\n  }\n\n  return wsUrl.href\n}\n","// This file draws heavily from https://github.com/phoenixframework/phoenix/commit/cf098e9cf7a44ee6479d31d911a97d3c7430c6fe\n// License: https://github.com/phoenixframework/phoenix/blob/master/LICENSE.md\nexport type Msg<T> = {\n  join_ref?: string | null\n  ref?: string | null\n  topic: string\n  event: string\n  payload: T\n}\n\nexport default class Serializer {\n  HEADER_LENGTH = 1\n  USER_BROADCAST_PUSH_META_LENGTH = 6\n  KINDS = { userBroadcastPush: 3, userBroadcast: 4 }\n  BINARY_ENCODING = 0\n  JSON_ENCODING = 1\n  BROADCAST_EVENT = 'broadcast'\n\n  allowedMetadataKeys: string[] = []\n\n  constructor(allowedMetadataKeys?: string[] | null) {\n    this.allowedMetadataKeys = allowedMetadataKeys ?? []\n  }\n\n  encode(msg: Msg<{ [key: string]: any }>, callback: (result: ArrayBuffer | string) => any) {\n    if (\n      msg.event === this.BROADCAST_EVENT &&\n      !(msg.payload instanceof ArrayBuffer) &&\n      typeof msg.payload.event === 'string'\n    ) {\n      return callback(\n        this._binaryEncodeUserBroadcastPush(msg as Msg<{ event: string } & { [key: string]: any }>)\n      )\n    }\n\n    let payload = [msg.join_ref, msg.ref, msg.topic, msg.event, msg.payload]\n    return callback(JSON.stringify(payload))\n  }\n\n  private _binaryEncodeUserBroadcastPush(message: Msg<{ event: string } & { [key: string]: any }>) {\n    if (this._isArrayBuffer(message.payload?.payload)) {\n      return this._encodeBinaryUserBroadcastPush(message)\n    } else {\n      return this._encodeJsonUserBroadcastPush(message)\n    }\n  }\n\n  private _encodeBinaryUserBroadcastPush(message: Msg<{ event: string } & { [key: string]: any }>) {\n    const userPayload = message.payload?.payload ?? new ArrayBuffer(0)\n    return this._encodeUserBroadcastPush(message, this.BINARY_ENCODING, userPayload)\n  }\n\n  private _encodeJsonUserBroadcastPush(message: Msg<{ event: string } & { [key: string]: any }>) {\n    const userPayload = message.payload?.payload ?? {}\n    const encoder = new TextEncoder()\n    const encodedUserPayload = encoder.encode(JSON.stringify(userPayload)).buffer\n    return this._encodeUserBroadcastPush(message, this.JSON_ENCODING, encodedUserPayload)\n  }\n\n  private _encodeUserBroadcastPush(\n    message: Msg<{ event: string } & { [key: string]: any }>,\n    encodingType: number,\n    encodedPayload: ArrayBuffer\n  ) {\n    const topic = message.topic\n    const ref = message.ref ?? ''\n    const joinRef = message.join_ref ?? ''\n    const userEvent = message.payload.event\n\n    // Filter metadata based on allowed keys\n    const rest = this.allowedMetadataKeys\n      ? this._pick(message.payload, this.allowedMetadataKeys)\n      : {}\n\n    const metadata = Object.keys(rest).length === 0 ? '' : JSON.stringify(rest)\n\n    // Validate lengths don't exceed uint8 max value (255)\n    if (joinRef.length > 255) {\n      throw new Error(`joinRef length ${joinRef.length} exceeds maximum of 255`)\n    }\n    if (ref.length > 255) {\n      throw new Error(`ref length ${ref.length} exceeds maximum of 255`)\n    }\n    if (topic.length > 255) {\n      throw new Error(`topic length ${topic.length} exceeds maximum of 255`)\n    }\n    if (userEvent.length > 255) {\n      throw new Error(`userEvent length ${userEvent.length} exceeds maximum of 255`)\n    }\n    if (metadata.length > 255) {\n      throw new Error(`metadata length ${metadata.length} exceeds maximum of 255`)\n    }\n\n    const metaLength =\n      this.USER_BROADCAST_PUSH_META_LENGTH +\n      joinRef.length +\n      ref.length +\n      topic.length +\n      userEvent.length +\n      metadata.length\n\n    const header = new ArrayBuffer(this.HEADER_LENGTH + metaLength)\n    let view = new DataView(header)\n    let offset = 0\n\n    view.setUint8(offset++, this.KINDS.userBroadcastPush) // kind\n    view.setUint8(offset++, joinRef.length)\n    view.setUint8(offset++, ref.length)\n    view.setUint8(offset++, topic.length)\n    view.setUint8(offset++, userEvent.length)\n    view.setUint8(offset++, metadata.length)\n    view.setUint8(offset++, encodingType)\n    Array.from(joinRef, (char) => view.setUint8(offset++, char.charCodeAt(0)))\n    Array.from(ref, (char) => view.setUint8(offset++, char.charCodeAt(0)))\n    Array.from(topic, (char) => view.setUint8(offset++, char.charCodeAt(0)))\n    Array.from(userEvent, (char) => view.setUint8(offset++, char.charCodeAt(0)))\n    Array.from(metadata, (char) => view.setUint8(offset++, char.charCodeAt(0)))\n\n    var combined = new Uint8Array(header.byteLength + encodedPayload.byteLength)\n    combined.set(new Uint8Array(header), 0)\n    combined.set(new Uint8Array(encodedPayload), header.byteLength)\n\n    return combined.buffer\n  }\n\n  decode(rawPayload: ArrayBuffer | string, callback: Function) {\n    if (this._isArrayBuffer(rawPayload)) {\n      let result = this._binaryDecode(rawPayload as ArrayBuffer)\n      return callback(result)\n    }\n\n    if (typeof rawPayload === 'string') {\n      const jsonPayload = JSON.parse(rawPayload)\n      const [join_ref, ref, topic, event, payload] = jsonPayload\n      return callback({ join_ref, ref, topic, event, payload })\n    }\n\n    return callback({})\n  }\n\n  private _binaryDecode(buffer: ArrayBuffer) {\n    const view = new DataView(buffer)\n    const kind = view.getUint8(0)\n    const decoder = new TextDecoder()\n    switch (kind) {\n      case this.KINDS.userBroadcast:\n        return this._decodeUserBroadcast(buffer, view, decoder)\n    }\n  }\n\n  private _decodeUserBroadcast(\n    buffer: ArrayBuffer,\n    view: DataView,\n    decoder: TextDecoder\n  ): {\n    join_ref: null\n    ref: null\n    topic: string\n    event: string\n    payload: { [key: string]: any }\n  } {\n    const topicSize = view.getUint8(1)\n    const userEventSize = view.getUint8(2)\n    const metadataSize = view.getUint8(3)\n    const payloadEncoding = view.getUint8(4)\n\n    let offset = this.HEADER_LENGTH + 4\n    const topic = decoder.decode(buffer.slice(offset, offset + topicSize))\n    offset = offset + topicSize\n    const userEvent = decoder.decode(buffer.slice(offset, offset + userEventSize))\n    offset = offset + userEventSize\n    const metadata = decoder.decode(buffer.slice(offset, offset + metadataSize))\n    offset = offset + metadataSize\n\n    const payload = buffer.slice(offset, buffer.byteLength)\n    const parsedPayload =\n      payloadEncoding === this.JSON_ENCODING ? JSON.parse(decoder.decode(payload)) : payload\n\n    const data: { [key: string]: any } = {\n      type: this.BROADCAST_EVENT,\n      event: userEvent,\n      payload: parsedPayload,\n    }\n\n    // Metadata is optional and always JSON encoded\n    if (metadataSize > 0) {\n      data['meta'] = JSON.parse(metadata)\n    }\n\n    return { join_ref: null, ref: null, topic: topic, event: this.BROADCAST_EVENT, payload: data }\n  }\n\n  private _isArrayBuffer(buffer: any): boolean {\n    return buffer instanceof ArrayBuffer || buffer?.constructor?.name === 'ArrayBuffer'\n  }\n\n  private _pick(obj: Record<string, any> | null | undefined, keys: string[]): Record<string, any> {\n    if (!obj || typeof obj !== 'object') {\n      return {}\n    }\n    return Object.fromEntries(Object.entries(obj).filter(([key]) => keys.includes(key)))\n  }\n}\n","/**\n * Creates a timer that accepts a `timerCalc` function to perform calculated timeout retries, such as exponential backoff.\n *\n * @example\n *    let reconnectTimer = new Timer(() => this.connect(), function(tries){\n *      return [1000, 5000, 10000][tries - 1] || 10000\n *    })\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n *    reconnectTimer.scheduleTimeout() // fires after 5000\n *    reconnectTimer.reset()\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n */\nexport default class Timer {\n  timer: number | undefined = undefined\n  tries: number = 0\n\n  constructor(\n    public callback: Function,\n    public timerCalc: Function\n  ) {\n    this.callback = callback\n    this.timerCalc = timerCalc\n  }\n\n  reset() {\n    this.tries = 0\n    clearTimeout(this.timer)\n    this.timer = undefined\n  }\n\n  // Cancels any previous scheduleTimeout and schedules callback\n  scheduleTimeout() {\n    clearTimeout(this.timer)\n\n    this.timer = <any>setTimeout(\n      () => {\n        this.tries = this.tries + 1\n        this.callback()\n      },\n      this.timerCalc(this.tries + 1)\n    )\n  }\n}\n","import { DEFAULT_TIMEOUT } from '../lib/constants'\nimport type RealtimeChannel from '../RealtimeChannel'\n\nexport default class Push {\n  sent: boolean = false\n  timeoutTimer: number | undefined = undefined\n  ref: string = ''\n  receivedResp: {\n    status: string\n    response: { [key: string]: any }\n  } | null = null\n  recHooks: {\n    status: string\n    callback: Function\n  }[] = []\n  refEvent: string | null = null\n\n  /**\n   * Initializes the Push\n   *\n   * @param channel The Channel\n   * @param event The event, for example `\"phx_join\"`\n   * @param payload The payload, for example `{user_id: 123}`\n   * @param timeout The push timeout in milliseconds\n   */\n  constructor(\n    public channel: RealtimeChannel,\n    public event: string,\n    public payload: { [key: string]: any } = {},\n    public timeout: number = DEFAULT_TIMEOUT\n  ) {}\n\n  resend(timeout: number) {\n    this.timeout = timeout\n    this._cancelRefEvent()\n    this.ref = ''\n    this.refEvent = null\n    this.receivedResp = null\n    this.sent = false\n    this.send()\n  }\n\n  send() {\n    if (this._hasReceived('timeout')) {\n      return\n    }\n    this.startTimeout()\n    this.sent = true\n    this.channel.socket.push({\n      topic: this.channel.topic,\n      event: this.event,\n      payload: this.payload,\n      ref: this.ref,\n      join_ref: this.channel._joinRef(),\n    })\n  }\n\n  updatePayload(payload: { [key: string]: any }): void {\n    this.payload = { ...this.payload, ...payload }\n  }\n\n  receive(status: string, callback: Function) {\n    if (this._hasReceived(status)) {\n      callback(this.receivedResp?.response)\n    }\n\n    this.recHooks.push({ status, callback })\n    return this\n  }\n\n  startTimeout() {\n    if (this.timeoutTimer) {\n      return\n    }\n    this.ref = this.channel.socket._makeRef()\n    this.refEvent = this.channel._replyEventName(this.ref)\n\n    const callback = (payload: any) => {\n      this._cancelRefEvent()\n      this._cancelTimeout()\n      this.receivedResp = payload\n      this._matchReceive(payload)\n    }\n\n    this.channel._on(this.refEvent, {}, callback)\n\n    this.timeoutTimer = <any>setTimeout(() => {\n      this.trigger('timeout', {})\n    }, this.timeout)\n  }\n\n  trigger(status: string, response: any) {\n    if (this.refEvent) this.channel._trigger(this.refEvent, { status, response })\n  }\n\n  destroy() {\n    this._cancelRefEvent()\n    this._cancelTimeout()\n  }\n\n  private _cancelRefEvent() {\n    if (!this.refEvent) {\n      return\n    }\n\n    this.channel._off(this.refEvent, {})\n  }\n\n  private _cancelTimeout() {\n    clearTimeout(this.timeoutTimer)\n    this.timeoutTimer = undefined\n  }\n\n  private _matchReceive({ status, response }: { status: string; response: Function }) {\n    this.recHooks.filter((h) => h.status === status).forEach((h) => h.callback(response))\n  }\n\n  private _hasReceived(status: string) {\n    return this.receivedResp && this.receivedResp.status === status\n  }\n}\n","/*\n  This file draws heavily from https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/assets/js/phoenix/presence.js\n  License: https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/LICENSE.md\n*/\n\nimport type { PresenceOpts, PresenceOnJoinCallback, PresenceOnLeaveCallback } from 'phoenix'\nimport type RealtimeChannel from './RealtimeChannel'\n\ntype Presence<T extends { [key: string]: any } = {}> = {\n  presence_ref: string\n} & T\n\nexport type RealtimePresenceState<T extends { [key: string]: any } = {}> = {\n  [key: string]: Presence<T>[]\n}\n\nexport type RealtimePresenceJoinPayload<T extends { [key: string]: any }> = {\n  event: `${REALTIME_PRESENCE_LISTEN_EVENTS.JOIN}`\n  key: string\n  currentPresences: Presence<T>[]\n  newPresences: Presence<T>[]\n}\n\nexport type RealtimePresenceLeavePayload<T extends { [key: string]: any }> = {\n  event: `${REALTIME_PRESENCE_LISTEN_EVENTS.LEAVE}`\n  key: string\n  currentPresences: Presence<T>[]\n  leftPresences: Presence<T>[]\n}\n\nexport enum REALTIME_PRESENCE_LISTEN_EVENTS {\n  SYNC = 'sync',\n  JOIN = 'join',\n  LEAVE = 'leave',\n}\n\ntype PresenceDiff = {\n  joins: RealtimePresenceState\n  leaves: RealtimePresenceState\n}\n\ntype RawPresenceState = {\n  [key: string]: {\n    metas: {\n      phx_ref?: string\n      phx_ref_prev?: string\n      [key: string]: any\n    }[]\n  }\n}\n\ntype RawPresenceDiff = {\n  joins: RawPresenceState\n  leaves: RawPresenceState\n}\n\ntype PresenceChooser<T> = (key: string, presences: Presence[]) => T\n\nexport default class RealtimePresence {\n  state: RealtimePresenceState = {}\n  pendingDiffs: RawPresenceDiff[] = []\n  joinRef: string | null = null\n  enabled: boolean = false\n  caller: {\n    onJoin: PresenceOnJoinCallback\n    onLeave: PresenceOnLeaveCallback\n    onSync: () => void\n  } = {\n    onJoin: () => {},\n    onLeave: () => {},\n    onSync: () => {},\n  }\n\n  /**\n   * Creates a Presence helper that keeps the local presence state in sync with the server.\n   *\n   * @param channel - The realtime channel to bind to.\n   * @param opts - Optional custom event names, e.g. `{ events: { state: 'state', diff: 'diff' } }`.\n   *\n   * @example\n   * ```ts\n   * const presence = new RealtimePresence(channel)\n   *\n   * channel.on('presence', ({ event, key }) => {\n   *   console.log(`Presence ${event} on ${key}`)\n   * })\n   * ```\n   */\n  constructor(\n    public channel: RealtimeChannel,\n    opts?: PresenceOpts\n  ) {\n    const events = opts?.events || {\n      state: 'presence_state',\n      diff: 'presence_diff',\n    }\n\n    this.channel._on(events.state, {}, (newState: RawPresenceState) => {\n      const { onJoin, onLeave, onSync } = this.caller\n\n      this.joinRef = this.channel._joinRef()\n\n      this.state = RealtimePresence.syncState(this.state, newState, onJoin, onLeave)\n\n      this.pendingDiffs.forEach((diff) => {\n        this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave)\n      })\n\n      this.pendingDiffs = []\n\n      onSync()\n    })\n\n    this.channel._on(events.diff, {}, (diff: RawPresenceDiff) => {\n      const { onJoin, onLeave, onSync } = this.caller\n\n      if (this.inPendingSyncState()) {\n        this.pendingDiffs.push(diff)\n      } else {\n        this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave)\n\n        onSync()\n      }\n    })\n\n    this.onJoin((key, currentPresences, newPresences) => {\n      this.channel._trigger('presence', {\n        event: 'join',\n        key,\n        currentPresences,\n        newPresences,\n      })\n    })\n\n    this.onLeave((key, currentPresences, leftPresences) => {\n      this.channel._trigger('presence', {\n        event: 'leave',\n        key,\n        currentPresences,\n        leftPresences,\n      })\n    })\n\n    this.onSync(() => {\n      this.channel._trigger('presence', { event: 'sync' })\n    })\n  }\n\n  /**\n   * Used to sync the list of presences on the server with the\n   * client's state.\n   *\n   * An optional `onJoin` and `onLeave` callback can be provided to\n   * react to changes in the client's local presences across\n   * disconnects and reconnects with the server.\n   *\n   * @internal\n   */\n  private static syncState(\n    currentState: RealtimePresenceState,\n    newState: RawPresenceState | RealtimePresenceState,\n    onJoin: PresenceOnJoinCallback,\n    onLeave: PresenceOnLeaveCallback\n  ): RealtimePresenceState {\n    const state = this.cloneDeep(currentState)\n    const transformedState = this.transformState(newState)\n    const joins: RealtimePresenceState = {}\n    const leaves: RealtimePresenceState = {}\n\n    this.map(state, (key: string, presences: Presence[]) => {\n      if (!transformedState[key]) {\n        leaves[key] = presences\n      }\n    })\n\n    this.map(transformedState, (key, newPresences: Presence[]) => {\n      const currentPresences: Presence[] = state[key]\n\n      if (currentPresences) {\n        const newPresenceRefs = newPresences.map((m: Presence) => m.presence_ref)\n        const curPresenceRefs = currentPresences.map((m: Presence) => m.presence_ref)\n        const joinedPresences: Presence[] = newPresences.filter(\n          (m: Presence) => curPresenceRefs.indexOf(m.presence_ref) < 0\n        )\n        const leftPresences: Presence[] = currentPresences.filter(\n          (m: Presence) => newPresenceRefs.indexOf(m.presence_ref) < 0\n        )\n\n        if (joinedPresences.length > 0) {\n          joins[key] = joinedPresences\n        }\n\n        if (leftPresences.length > 0) {\n          leaves[key] = leftPresences\n        }\n      } else {\n        joins[key] = newPresences\n      }\n    })\n\n    return this.syncDiff(state, { joins, leaves }, onJoin, onLeave)\n  }\n\n  /**\n   * Used to sync a diff of presence join and leave events from the\n   * server, as they happen.\n   *\n   * Like `syncState`, `syncDiff` accepts optional `onJoin` and\n   * `onLeave` callbacks to react to a user joining or leaving from a\n   * device.\n   *\n   * @internal\n   */\n  private static syncDiff(\n    state: RealtimePresenceState,\n    diff: RawPresenceDiff | PresenceDiff,\n    onJoin: PresenceOnJoinCallback,\n    onLeave: PresenceOnLeaveCallback\n  ): RealtimePresenceState {\n    const { joins, leaves } = {\n      joins: this.transformState(diff.joins),\n      leaves: this.transformState(diff.leaves),\n    }\n\n    if (!onJoin) {\n      onJoin = () => {}\n    }\n\n    if (!onLeave) {\n      onLeave = () => {}\n    }\n\n    this.map(joins, (key, newPresences: Presence[]) => {\n      const currentPresences: Presence[] = state[key] ?? []\n      state[key] = this.cloneDeep(newPresences)\n\n      if (currentPresences.length > 0) {\n        const joinedPresenceRefs = state[key].map((m: Presence) => m.presence_ref)\n        const curPresences: Presence[] = currentPresences.filter(\n          (m: Presence) => joinedPresenceRefs.indexOf(m.presence_ref) < 0\n        )\n\n        state[key].unshift(...curPresences)\n      }\n\n      onJoin(key, currentPresences, newPresences)\n    })\n\n    this.map(leaves, (key, leftPresences: Presence[]) => {\n      let currentPresences: Presence[] = state[key]\n\n      if (!currentPresences) return\n\n      const presenceRefsToRemove = leftPresences.map((m: Presence) => m.presence_ref)\n      currentPresences = currentPresences.filter(\n        (m: Presence) => presenceRefsToRemove.indexOf(m.presence_ref) < 0\n      )\n\n      state[key] = currentPresences\n\n      onLeave(key, currentPresences, leftPresences)\n\n      if (currentPresences.length === 0) delete state[key]\n    })\n\n    return state\n  }\n\n  /** @internal */\n  private static map<T = any>(obj: RealtimePresenceState, func: PresenceChooser<T>): T[] {\n    return Object.getOwnPropertyNames(obj).map((key) => func(key, obj[key]))\n  }\n\n  /**\n   * Remove 'metas' key\n   * Change 'phx_ref' to 'presence_ref'\n   * Remove 'phx_ref' and 'phx_ref_prev'\n   *\n   * @example\n   * // returns {\n   *  abc123: [\n   *    { presence_ref: '2', user_id: 1 },\n   *    { presence_ref: '3', user_id: 2 }\n   *  ]\n   * }\n   * RealtimePresence.transformState({\n   *  abc123: {\n   *    metas: [\n   *      { phx_ref: '2', phx_ref_prev: '1' user_id: 1 },\n   *      { phx_ref: '3', user_id: 2 }\n   *    ]\n   *  }\n   * })\n   *\n   * @internal\n   */\n  private static transformState(\n    state: RawPresenceState | RealtimePresenceState\n  ): RealtimePresenceState {\n    state = this.cloneDeep(state)\n\n    return Object.getOwnPropertyNames(state).reduce((newState, key) => {\n      const presences = state[key]\n\n      if ('metas' in presences) {\n        newState[key] = presences.metas.map((presence) => {\n          presence['presence_ref'] = presence['phx_ref']\n\n          delete presence['phx_ref']\n          delete presence['phx_ref_prev']\n\n          return presence\n        }) as Presence[]\n      } else {\n        newState[key] = presences\n      }\n\n      return newState\n    }, {} as RealtimePresenceState)\n  }\n\n  /** @internal */\n  private static cloneDeep(obj: { [key: string]: any }) {\n    return JSON.parse(JSON.stringify(obj))\n  }\n\n  /** @internal */\n  private onJoin(callback: PresenceOnJoinCallback): void {\n    this.caller.onJoin = callback\n  }\n\n  /** @internal */\n  private onLeave(callback: PresenceOnLeaveCallback): void {\n    this.caller.onLeave = callback\n  }\n\n  /** @internal */\n  private onSync(callback: () => void): void {\n    this.caller.onSync = callback\n  }\n\n  /** @internal */\n  private inPendingSyncState(): boolean {\n    return !this.joinRef || this.joinRef !== this.channel._joinRef()\n  }\n}\n","import { CHANNEL_EVENTS, CHANNEL_STATES, MAX_PUSH_BUFFER_SIZE } from './lib/constants'\nimport Push from './lib/push'\nimport type RealtimeClient from './RealtimeClient'\nimport Timer from './lib/timer'\nimport RealtimePresence, { REALTIME_PRESENCE_LISTEN_EVENTS } from './RealtimePresence'\nimport type {\n  RealtimePresenceJoinPayload,\n  RealtimePresenceLeavePayload,\n  RealtimePresenceState,\n} from './RealtimePresence'\nimport * as Transformers from './lib/transformers'\nimport { httpEndpointURL } from './lib/transformers'\n\ntype ReplayOption = {\n  since: number\n  limit?: number\n}\n\nexport type RealtimeChannelOptions = {\n  config: {\n    /**\n     * self option enables client to receive message it broadcast\n     * ack option instructs server to acknowledge that broadcast message was received\n     * replay option instructs server to replay broadcast messages\n     */\n    broadcast?: { self?: boolean; ack?: boolean; replay?: ReplayOption }\n    /**\n     * key option is used to track presence payload across clients\n     */\n    presence?: { key?: string; enabled?: boolean }\n    /**\n     * defines if the channel is private or not and if RLS policies will be used to check data\n     */\n    private?: boolean\n  }\n}\n\ntype RealtimeChangesPayloadBase = {\n  schema: string\n  table: string\n}\n\ntype RealtimeBroadcastChangesPayloadBase = RealtimeChangesPayloadBase & {\n  id: string\n}\n\nexport type RealtimeBroadcastInsertPayload<T extends { [key: string]: any }> =\n  RealtimeBroadcastChangesPayloadBase & {\n    operation: `${REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.INSERT}`\n    record: T\n    old_record: null\n  }\n\nexport type RealtimeBroadcastUpdatePayload<T extends { [key: string]: any }> =\n  RealtimeBroadcastChangesPayloadBase & {\n    operation: `${REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.UPDATE}`\n    record: T\n    old_record: T\n  }\n\nexport type RealtimeBroadcastDeletePayload<T extends { [key: string]: any }> =\n  RealtimeBroadcastChangesPayloadBase & {\n    operation: `${REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.DELETE}`\n    record: null\n    old_record: T\n  }\n\nexport type RealtimeBroadcastPayload<T extends { [key: string]: any }> =\n  | RealtimeBroadcastInsertPayload<T>\n  | RealtimeBroadcastUpdatePayload<T>\n  | RealtimeBroadcastDeletePayload<T>\n\ntype RealtimePostgresChangesPayloadBase = {\n  schema: string\n  table: string\n  commit_timestamp: string\n  errors: string[]\n}\n\nexport type RealtimePostgresInsertPayload<T extends { [key: string]: any }> =\n  RealtimePostgresChangesPayloadBase & {\n    eventType: `${REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.INSERT}`\n    new: T\n    old: {}\n  }\n\nexport type RealtimePostgresUpdatePayload<T extends { [key: string]: any }> =\n  RealtimePostgresChangesPayloadBase & {\n    eventType: `${REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.UPDATE}`\n    new: T\n    old: Partial<T>\n  }\n\nexport type RealtimePostgresDeletePayload<T extends { [key: string]: any }> =\n  RealtimePostgresChangesPayloadBase & {\n    eventType: `${REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.DELETE}`\n    new: {}\n    old: Partial<T>\n  }\n\nexport type RealtimePostgresChangesPayload<T extends { [key: string]: any }> =\n  | RealtimePostgresInsertPayload<T>\n  | RealtimePostgresUpdatePayload<T>\n  | RealtimePostgresDeletePayload<T>\n\nexport type RealtimePostgresChangesFilter<T extends `${REALTIME_POSTGRES_CHANGES_LISTEN_EVENT}`> = {\n  /**\n   * The type of database change to listen to.\n   */\n  event: T\n  /**\n   * The database schema to listen to.\n   */\n  schema: string\n  /**\n   * The database table to listen to.\n   */\n  table?: string\n  /**\n   * Receive database changes when filter is matched.\n   */\n  filter?: string\n}\n\nexport type RealtimeChannelSendResponse = 'ok' | 'timed out' | 'error'\n\nexport enum REALTIME_POSTGRES_CHANGES_LISTEN_EVENT {\n  ALL = '*',\n  INSERT = 'INSERT',\n  UPDATE = 'UPDATE',\n  DELETE = 'DELETE',\n}\n\nexport enum REALTIME_LISTEN_TYPES {\n  BROADCAST = 'broadcast',\n  PRESENCE = 'presence',\n  POSTGRES_CHANGES = 'postgres_changes',\n  SYSTEM = 'system',\n}\n\nexport enum REALTIME_SUBSCRIBE_STATES {\n  SUBSCRIBED = 'SUBSCRIBED',\n  TIMED_OUT = 'TIMED_OUT',\n  CLOSED = 'CLOSED',\n  CHANNEL_ERROR = 'CHANNEL_ERROR',\n}\n\nexport const REALTIME_CHANNEL_STATES = CHANNEL_STATES\n\ninterface PostgresChangesFilters {\n  postgres_changes: {\n    id: string\n    event: string\n    schema?: string\n    table?: string\n    filter?: string\n  }[]\n}\n/** A channel is the basic building block of Realtime\n * and narrows the scope of data flow to subscribed clients.\n * You can think of a channel as a chatroom where participants are able to see who's online\n * and send and receive messages.\n */\nexport default class RealtimeChannel {\n  bindings: {\n    [key: string]: {\n      type: string\n      filter: { [key: string]: any }\n      callback: Function\n      id?: string\n    }[]\n  } = {}\n  timeout: number\n  state: CHANNEL_STATES = CHANNEL_STATES.closed\n  joinedOnce = false\n  joinPush: Push\n  rejoinTimer: Timer\n  pushBuffer: Push[] = []\n  presence: RealtimePresence\n  broadcastEndpointURL: string\n  subTopic: string\n  private: boolean\n\n  /**\n   * Creates a channel that can broadcast messages, sync presence, and listen to Postgres changes.\n   *\n   * The topic determines which realtime stream you are subscribing to. Config options let you\n   * enable acknowledgement for broadcasts, presence tracking, or private channels.\n   *\n   * @example\n   * ```ts\n   * import RealtimeClient from '@supabase/realtime-js'\n   *\n   * const client = new RealtimeClient('https://xyzcompany.supabase.co/realtime/v1', {\n   *   params: { apikey: 'public-anon-key' },\n   * })\n   * const channel = new RealtimeChannel('realtime:public:messages', { config: {} }, client)\n   * ```\n   */\n  constructor(\n    /** Topic name can be any string. */\n    public topic: string,\n    public params: RealtimeChannelOptions = { config: {} },\n    public socket: RealtimeClient\n  ) {\n    this.subTopic = topic.replace(/^realtime:/i, '')\n    this.params.config = {\n      ...{\n        broadcast: { ack: false, self: false },\n        presence: { key: '', enabled: false },\n        private: false,\n      },\n      ...params.config,\n    }\n    this.timeout = this.socket.timeout\n    this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout)\n    this.rejoinTimer = new Timer(() => this._rejoinUntilConnected(), this.socket.reconnectAfterMs)\n    this.joinPush.receive('ok', () => {\n      this.state = CHANNEL_STATES.joined\n      this.rejoinTimer.reset()\n      this.pushBuffer.forEach((pushEvent: Push) => pushEvent.send())\n      this.pushBuffer = []\n    })\n    this._onClose(() => {\n      this.rejoinTimer.reset()\n      this.socket.log('channel', `close ${this.topic} ${this._joinRef()}`)\n      this.state = CHANNEL_STATES.closed\n      this.socket._remove(this)\n    })\n    this._onError((reason: string) => {\n      if (this._isLeaving() || this._isClosed()) {\n        return\n      }\n      this.socket.log('channel', `error ${this.topic}`, reason)\n      this.state = CHANNEL_STATES.errored\n      this.rejoinTimer.scheduleTimeout()\n    })\n    this.joinPush.receive('timeout', () => {\n      if (!this._isJoining()) {\n        return\n      }\n      this.socket.log('channel', `timeout ${this.topic}`, this.joinPush.timeout)\n      this.state = CHANNEL_STATES.errored\n      this.rejoinTimer.scheduleTimeout()\n    })\n\n    this.joinPush.receive('error', (reason: any) => {\n      if (this._isLeaving() || this._isClosed()) {\n        return\n      }\n      this.socket.log('channel', `error ${this.topic}`, reason)\n      this.state = CHANNEL_STATES.errored\n      this.rejoinTimer.scheduleTimeout()\n    })\n    this._on(CHANNEL_EVENTS.reply, {}, (payload: any, ref: string) => {\n      this._trigger(this._replyEventName(ref), payload)\n    })\n\n    this.presence = new RealtimePresence(this)\n\n    this.broadcastEndpointURL = httpEndpointURL(this.socket.endPoint)\n    this.private = this.params.config.private || false\n\n    if (!this.private && this.params.config?.broadcast?.replay) {\n      throw `tried to use replay on public channel '${this.topic}'. It must be a private channel.`\n    }\n  }\n\n  /** Subscribe registers your client with the server */\n  subscribe(\n    callback?: (status: REALTIME_SUBSCRIBE_STATES, err?: Error) => void,\n    timeout = this.timeout\n  ): RealtimeChannel {\n    if (!this.socket.isConnected()) {\n      this.socket.connect()\n    }\n    if (this.state == CHANNEL_STATES.closed) {\n      const {\n        config: { broadcast, presence, private: isPrivate },\n      } = this.params\n\n      const postgres_changes = this.bindings.postgres_changes?.map((r) => r.filter) ?? []\n\n      const presence_enabled =\n        (!!this.bindings[REALTIME_LISTEN_TYPES.PRESENCE] &&\n          this.bindings[REALTIME_LISTEN_TYPES.PRESENCE].length > 0) ||\n        this.params.config.presence?.enabled === true\n      const accessTokenPayload: { access_token?: string } = {}\n      const config = {\n        broadcast,\n        presence: { ...presence, enabled: presence_enabled },\n        postgres_changes,\n        private: isPrivate,\n      }\n\n      if (this.socket.accessTokenValue) {\n        accessTokenPayload.access_token = this.socket.accessTokenValue\n      }\n\n      this._onError((e: Error) => callback?.(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR, e))\n\n      this._onClose(() => callback?.(REALTIME_SUBSCRIBE_STATES.CLOSED))\n\n      this.updateJoinPayload({ ...{ config }, ...accessTokenPayload })\n\n      this.joinedOnce = true\n      this._rejoin(timeout)\n\n      this.joinPush\n        .receive('ok', async ({ postgres_changes }: PostgresChangesFilters) => {\n          // Only refresh auth if using callback-based tokens\n          if (!this.socket._isManualToken()) {\n            this.socket.setAuth()\n          }\n          if (postgres_changes === undefined) {\n            callback?.(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED)\n            return\n          } else {\n            const clientPostgresBindings = this.bindings.postgres_changes\n            const bindingsLen = clientPostgresBindings?.length ?? 0\n            const newPostgresBindings = []\n\n            for (let i = 0; i < bindingsLen; i++) {\n              const clientPostgresBinding = clientPostgresBindings[i]\n              const {\n                filter: { event, schema, table, filter },\n              } = clientPostgresBinding\n              const serverPostgresFilter = postgres_changes && postgres_changes[i]\n\n              if (\n                serverPostgresFilter &&\n                serverPostgresFilter.event === event &&\n                RealtimeChannel.isFilterValueEqual(serverPostgresFilter.schema, schema) &&\n                RealtimeChannel.isFilterValueEqual(serverPostgresFilter.table, table) &&\n                RealtimeChannel.isFilterValueEqual(serverPostgresFilter.filter, filter)\n              ) {\n                newPostgresBindings.push({\n                  ...clientPostgresBinding,\n                  id: serverPostgresFilter.id,\n                })\n              } else {\n                this.unsubscribe()\n                this.state = CHANNEL_STATES.errored\n\n                callback?.(\n                  REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,\n                  new Error('mismatch between server and client bindings for postgres changes')\n                )\n                return\n              }\n            }\n\n            this.bindings.postgres_changes = newPostgresBindings\n\n            callback && callback(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED)\n            return\n          }\n        })\n        .receive('error', (error: { [key: string]: any }) => {\n          this.state = CHANNEL_STATES.errored\n          callback?.(\n            REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,\n            new Error(JSON.stringify(Object.values(error).join(', ') || 'error'))\n          )\n          return\n        })\n        .receive('timeout', () => {\n          callback?.(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)\n          return\n        })\n    }\n    return this\n  }\n\n  /**\n   * Returns the current presence state for this channel.\n   *\n   * The shape is a map keyed by presence key (for example a user id) where each entry contains the\n   * tracked metadata for that user.\n   */\n  presenceState<T extends { [key: string]: any } = {}>(): RealtimePresenceState<T> {\n    return this.presence.state as RealtimePresenceState<T>\n  }\n\n  /**\n   * Sends the supplied payload to the presence tracker so other subscribers can see that this\n   * client is online. Use `untrack` to stop broadcasting presence for the same key.\n   */\n  async track(\n    payload: { [key: string]: any },\n    opts: { [key: string]: any } = {}\n  ): Promise<RealtimeChannelSendResponse> {\n    return await this.send(\n      {\n        type: 'presence',\n        event: 'track',\n        payload,\n      },\n      opts.timeout || this.timeout\n    )\n  }\n\n  /**\n   * Removes the current presence state for this client.\n   */\n  async untrack(opts: { [key: string]: any } = {}): Promise<RealtimeChannelSendResponse> {\n    return await this.send(\n      {\n        type: 'presence',\n        event: 'untrack',\n      },\n      opts\n    )\n  }\n\n  /**\n   * Creates an event handler that listens to changes.\n   */\n  on(\n    type: `${REALTIME_LISTEN_TYPES.PRESENCE}`,\n    filter: { event: `${REALTIME_PRESENCE_LISTEN_EVENTS.SYNC}` },\n    callback: () => void\n  ): RealtimeChannel\n  on<T extends { [key: string]: any }>(\n    type: `${REALTIME_LISTEN_TYPES.PRESENCE}`,\n    filter: { event: `${REALTIME_PRESENCE_LISTEN_EVENTS.JOIN}` },\n    callback: (payload: RealtimePresenceJoinPayload<T>) => void\n  ): RealtimeChannel\n  on<T extends { [key: string]: any }>(\n    type: `${REALTIME_LISTEN_TYPES.PRESENCE}`,\n    filter: { event: `${REALTIME_PRESENCE_LISTEN_EVENTS.LEAVE}` },\n    callback: (payload: RealtimePresenceLeavePayload<T>) => void\n  ): RealtimeChannel\n  on<T extends { [key: string]: any }>(\n    type: `${REALTIME_LISTEN_TYPES.POSTGRES_CHANGES}`,\n    filter: RealtimePostgresChangesFilter<`${REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.ALL}`>,\n    callback: (payload: RealtimePostgresChangesPayload<T>) => void\n  ): RealtimeChannel\n  on<T extends { [key: string]: any }>(\n    type: `${REALTIME_LISTEN_TYPES.POSTGRES_CHANGES}`,\n    filter: RealtimePostgresChangesFilter<`${REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.INSERT}`>,\n    callback: (payload: RealtimePostgresInsertPayload<T>) => void\n  ): RealtimeChannel\n  on<T extends { [key: string]: any }>(\n    type: `${REALTIME_LISTEN_TYPES.POSTGRES_CHANGES}`,\n    filter: RealtimePostgresChangesFilter<`${REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.UPDATE}`>,\n    callback: (payload: RealtimePostgresUpdatePayload<T>) => void\n  ): RealtimeChannel\n  on<T extends { [key: string]: any }>(\n    type: `${REALTIME_LISTEN_TYPES.POSTGRES_CHANGES}`,\n    filter: RealtimePostgresChangesFilter<`${REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.DELETE}`>,\n    callback: (payload: RealtimePostgresDeletePayload<T>) => void\n  ): RealtimeChannel\n  on<T extends { [key: string]: any }>(\n    type: `${REALTIME_LISTEN_TYPES.POSTGRES_CHANGES}`,\n    filter: RealtimePostgresChangesFilter<`${REALTIME_POSTGRES_CHANGES_LISTEN_EVENT}`>,\n    callback: (payload: RealtimePostgresChangesPayload<T>) => void\n  ): RealtimeChannel\n  /**\n   * The following is placed here to display on supabase.com/docs/reference/javascript/subscribe.\n   * @param type One of \"broadcast\", \"presence\", or \"postgres_changes\".\n   * @param filter Custom object specific to the Realtime feature detailing which payloads to receive.\n   * @param callback Function to be invoked when event handler is triggered.\n   */\n  on(\n    type: `${REALTIME_LISTEN_TYPES.BROADCAST}`,\n    filter: { event: string },\n    callback: (payload: {\n      type: `${REALTIME_LISTEN_TYPES.BROADCAST}`\n      event: string\n      meta?: {\n        replayed?: boolean\n        id: string\n      }\n      [key: string]: any\n    }) => void\n  ): RealtimeChannel\n  on<T extends { [key: string]: any }>(\n    type: `${REALTIME_LISTEN_TYPES.BROADCAST}`,\n    filter: { event: string },\n    callback: (payload: {\n      type: `${REALTIME_LISTEN_TYPES.BROADCAST}`\n      event: string\n      meta?: {\n        replayed?: boolean\n        id: string\n      }\n      payload: T\n    }) => void\n  ): RealtimeChannel\n  on<T extends Record<string, unknown>>(\n    type: `${REALTIME_LISTEN_TYPES.BROADCAST}`,\n    filter: { event: REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.ALL },\n    callback: (payload: {\n      type: `${REALTIME_LISTEN_TYPES.BROADCAST}`\n      event: REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.ALL\n      payload: RealtimeBroadcastPayload<T>\n    }) => void\n  ): RealtimeChannel\n  on<T extends { [key: string]: any }>(\n    type: `${REALTIME_LISTEN_TYPES.BROADCAST}`,\n    filter: { event: REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.INSERT },\n    callback: (payload: {\n      type: `${REALTIME_LISTEN_TYPES.BROADCAST}`\n      event: REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.INSERT\n      payload: RealtimeBroadcastInsertPayload<T>\n    }) => void\n  ): RealtimeChannel\n  on<T extends { [key: string]: any }>(\n    type: `${REALTIME_LISTEN_TYPES.BROADCAST}`,\n    filter: { event: REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.UPDATE },\n    callback: (payload: {\n      type: `${REALTIME_LISTEN_TYPES.BROADCAST}`\n      event: REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.UPDATE\n      payload: RealtimeBroadcastUpdatePayload<T>\n    }) => void\n  ): RealtimeChannel\n  on<T extends { [key: string]: any }>(\n    type: `${REALTIME_LISTEN_TYPES.BROADCAST}`,\n    filter: { event: REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.DELETE },\n    callback: (payload: {\n      type: `${REALTIME_LISTEN_TYPES.BROADCAST}`\n      event: REALTIME_POSTGRES_CHANGES_LISTEN_EVENT.DELETE\n      payload: RealtimeBroadcastDeletePayload<T>\n    }) => void\n  ): RealtimeChannel\n  on<T extends { [key: string]: any }>(\n    type: `${REALTIME_LISTEN_TYPES.SYSTEM}`,\n    filter: {},\n    callback: (payload: any) => void\n  ): RealtimeChannel\n  on(\n    type: `${REALTIME_LISTEN_TYPES}`,\n    filter: { event: string; [key: string]: string },\n    callback: (payload: any) => void\n  ): RealtimeChannel {\n    if (this.state === CHANNEL_STATES.joined && type === REALTIME_LISTEN_TYPES.PRESENCE) {\n      this.socket.log(\n        'channel',\n        `resubscribe to ${this.topic} due to change in presence callbacks on joined channel`\n      )\n      this.unsubscribe().then(async () => await this.subscribe())\n    }\n    return this._on(type, filter, callback)\n  }\n  /**\n   * Sends a broadcast message explicitly via REST API.\n   *\n   * This method always uses the REST API endpoint regardless of WebSocket connection state.\n   * Useful when you want to guarantee REST delivery or when gradually migrating from implicit REST fallback.\n   *\n   * @param event The name of the broadcast event\n   * @param payload Payload to be sent (required)\n   * @param opts Options including timeout\n   * @returns Promise resolving to object with success status, and error details if failed\n   */\n  async httpSend(\n    event: string,\n    payload: any,\n    opts: { timeout?: number } = {}\n  ): Promise<{ success: true } | { success: false; status: number; error: string }> {\n    if (payload === undefined || payload === null) {\n      return Promise.reject('Payload is required for httpSend()')\n    }\n\n    const headers: Record<string, string> = {\n      apikey: this.socket.apiKey ? this.socket.apiKey : '',\n      'Content-Type': 'application/json',\n    }\n\n    if (this.socket.accessTokenValue) {\n      headers['Authorization'] = `Bearer ${this.socket.accessTokenValue}`\n    }\n\n    const options = {\n      method: 'POST',\n      headers,\n      body: JSON.stringify({\n        messages: [\n          {\n            topic: this.subTopic,\n            event,\n            payload: payload,\n            private: this.private,\n          },\n        ],\n      }),\n    }\n\n    const response = await this._fetchWithTimeout(\n      this.broadcastEndpointURL,\n      options,\n      opts.timeout ?? this.timeout\n    )\n\n    if (response.status === 202) {\n      return { success: true }\n    }\n\n    let errorMessage = response.statusText\n    try {\n      const errorBody = await response.json()\n      errorMessage = errorBody.error || errorBody.message || errorMessage\n    } catch {}\n\n    return Promise.reject(new Error(errorMessage))\n  }\n\n  /**\n   * Sends a message into the channel.\n   *\n   * @param args Arguments to send to channel\n   * @param args.type The type of event to send\n   * @param args.event The name of the event being sent\n   * @param args.payload Payload to be sent\n   * @param opts Options to be used during the send process\n   */\n  async send(\n    args: {\n      type: 'broadcast' | 'presence' | 'postgres_changes'\n      event: string\n      payload?: any\n      [key: string]: any\n    },\n    opts: { [key: string]: any } = {}\n  ): Promise<RealtimeChannelSendResponse> {\n    if (!this._canPush() && args.type === 'broadcast') {\n      console.warn(\n        'Realtime send() is automatically falling back to REST API. ' +\n          'This behavior will be deprecated in the future. ' +\n          'Please use httpSend() explicitly for REST delivery.'\n      )\n\n      const { event, payload: endpoint_payload } = args\n      const headers: Record<string, string> = {\n        apikey: this.socket.apiKey ? this.socket.apiKey : '',\n        'Content-Type': 'application/json',\n      }\n\n      if (this.socket.accessTokenValue) {\n        headers['Authorization'] = `Bearer ${this.socket.accessTokenValue}`\n      }\n\n      const options = {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({\n          messages: [\n            {\n              topic: this.subTopic,\n              event,\n              payload: endpoint_payload,\n              private: this.private,\n            },\n          ],\n        }),\n      }\n\n      try {\n        const response = await this._fetchWithTimeout(\n          this.broadcastEndpointURL,\n          options,\n          opts.timeout ?? this.timeout\n        )\n\n        await response.body?.cancel()\n        return response.ok ? 'ok' : 'error'\n      } catch (error: any) {\n        if (error.name === 'AbortError') {\n          return 'timed out'\n        } else {\n          return 'error'\n        }\n      }\n    } else {\n      return new Promise((resolve) => {\n        const push = this._push(args.type, args, opts.timeout || this.timeout)\n\n        if (args.type === 'broadcast' && !this.params?.config?.broadcast?.ack) {\n          resolve('ok')\n        }\n\n        push.receive('ok', () => resolve('ok'))\n        push.receive('error', () => resolve('error'))\n        push.receive('timeout', () => resolve('timed out'))\n      })\n    }\n  }\n\n  /**\n   * Updates the payload that will be sent the next time the channel joins (reconnects).\n   * Useful for rotating access tokens or updating config without re-creating the channel.\n   */\n  updateJoinPayload(payload: { [key: string]: any }): void {\n    this.joinPush.updatePayload(payload)\n  }\n\n  /**\n   * Leaves the channel.\n   *\n   * Unsubscribes from server events, and instructs channel to terminate on server.\n   * Triggers onClose() hooks.\n   *\n   * To receive leave acknowledgements, use the a `receive` hook to bind to the server ack, ie:\n   * channel.unsubscribe().receive(\"ok\", () => alert(\"left!\") )\n   */\n  unsubscribe(timeout = this.timeout): Promise<'ok' | 'timed out' | 'error'> {\n    this.state = CHANNEL_STATES.leaving\n    const onClose = () => {\n      this.socket.log('channel', `leave ${this.topic}`)\n      this._trigger(CHANNEL_EVENTS.close, 'leave', this._joinRef())\n    }\n\n    this.joinPush.destroy()\n\n    let leavePush: Push | null = null\n\n    return new Promise<RealtimeChannelSendResponse>((resolve) => {\n      leavePush = new Push(this, CHANNEL_EVENTS.leave, {}, timeout)\n      leavePush\n        .receive('ok', () => {\n          onClose()\n          resolve('ok')\n        })\n        .receive('timeout', () => {\n          onClose()\n          resolve('timed out')\n        })\n        .receive('error', () => {\n          resolve('error')\n        })\n\n      leavePush.send()\n      if (!this._canPush()) {\n        leavePush.trigger('ok', {})\n      }\n    }).finally(() => {\n      leavePush?.destroy()\n    })\n  }\n  /**\n   * Teardown the channel.\n   *\n   * Destroys and stops related timers.\n   */\n  teardown() {\n    this.pushBuffer.forEach((push: Push) => push.destroy())\n    this.pushBuffer = []\n    this.rejoinTimer.reset()\n    this.joinPush.destroy()\n    this.state = CHANNEL_STATES.closed\n    this.bindings = {}\n  }\n\n  /** @internal */\n\n  async _fetchWithTimeout(url: string, options: { [key: string]: any }, timeout: number) {\n    const controller = new AbortController()\n    const id = setTimeout(() => controller.abort(), timeout)\n\n    const response = await this.socket.fetch(url, {\n      ...options,\n      signal: controller.signal,\n    })\n\n    clearTimeout(id)\n\n    return response\n  }\n\n  /** @internal */\n  _push(event: string, payload: { [key: string]: any }, timeout = this.timeout) {\n    if (!this.joinedOnce) {\n      throw `tried to push '${event}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`\n    }\n    let pushEvent = new Push(this, event, payload, timeout)\n    if (this._canPush()) {\n      pushEvent.send()\n    } else {\n      this._addToPushBuffer(pushEvent)\n    }\n\n    return pushEvent\n  }\n\n  /** @internal */\n  _addToPushBuffer(pushEvent: Push) {\n    pushEvent.startTimeout()\n    this.pushBuffer.push(pushEvent)\n\n    // Enforce buffer size limit\n    if (this.pushBuffer.length > MAX_PUSH_BUFFER_SIZE) {\n      const removedPush = this.pushBuffer.shift()\n      if (removedPush) {\n        removedPush.destroy()\n        this.socket.log(\n          'channel',\n          `discarded push due to buffer overflow: ${removedPush.event}`,\n          removedPush.payload\n        )\n      }\n    }\n  }\n\n  /**\n   * Overridable message hook\n   *\n   * Receives all events for specialized message handling before dispatching to the channel callbacks.\n   * Must return the payload, modified or unmodified.\n   *\n   * @internal\n   */\n  _onMessage(_event: string, payload: any, _ref?: string) {\n    return payload\n  }\n\n  /** @internal */\n  _isMember(topic: string): boolean {\n    return this.topic === topic\n  }\n\n  /** @internal */\n  _joinRef(): string {\n    return this.joinPush.ref\n  }\n\n  /** @internal */\n  _trigger(type: string, payload?: any, ref?: string) {\n    const typeLower = type.toLocaleLowerCase()\n    const { close, error, leave, join } = CHANNEL_EVENTS\n    const events: string[] = [close, error, leave, join]\n    if (ref && events.indexOf(typeLower) >= 0 && ref !== this._joinRef()) {\n      return\n    }\n    let handledPayload = this._onMessage(typeLower, payload, ref)\n    if (payload && !handledPayload) {\n      throw 'channel onMessage callbacks must return the payload, modified or unmodified'\n    }\n\n    if (['insert', 'update', 'delete'].includes(typeLower)) {\n      this.bindings.postgres_changes\n        ?.filter((bind) => {\n          return bind.filter?.event === '*' || bind.filter?.event?.toLocaleLowerCase() === typeLower\n        })\n        .map((bind) => bind.callback(handledPayload, ref))\n    } else {\n      this.bindings[typeLower]\n        ?.filter((bind) => {\n          if (['broadcast', 'presence', 'postgres_changes'].includes(typeLower)) {\n            if ('id' in bind) {\n              const bindId = bind.id\n              const bindEvent = bind.filter?.event\n              return (\n                bindId &&\n                payload.ids?.includes(bindId) &&\n                (bindEvent === '*' ||\n                  bindEvent?.toLocaleLowerCase() === payload.data?.type.toLocaleLowerCase())\n              )\n            } else {\n              const bindEvent = bind?.filter?.event?.toLocaleLowerCase()\n              return bindEvent === '*' || bindEvent === payload?.event?.toLocaleLowerCase()\n            }\n          } else {\n            return bind.type.toLocaleLowerCase() === typeLower\n          }\n        })\n        .map((bind) => {\n          if (typeof handledPayload === 'object' && 'ids' in handledPayload) {\n            const postgresChanges = handledPayload.data\n            const { schema, table, commit_timestamp, type, errors } = postgresChanges\n            const enrichedPayload = {\n              schema: schema,\n              table: table,\n              commit_timestamp: commit_timestamp,\n              eventType: type,\n              new: {},\n              old: {},\n              errors: errors,\n            }\n            handledPayload = {\n              ...enrichedPayload,\n              ...this._getPayloadRecords(postgresChanges),\n            }\n          }\n          bind.callback(handledPayload, ref)\n        })\n    }\n  }\n\n  /** @internal */\n  _isClosed(): boolean {\n    return this.state === CHANNEL_STATES.closed\n  }\n\n  /** @internal */\n  _isJoined(): boolean {\n    return this.state === CHANNEL_STATES.joined\n  }\n\n  /** @internal */\n  _isJoining(): boolean {\n    return this.state === CHANNEL_STATES.joining\n  }\n\n  /** @internal */\n  _isLeaving(): boolean {\n    return this.state === CHANNEL_STATES.leaving\n  }\n\n  /** @internal */\n  _replyEventName(ref: string): string {\n    return `chan_reply_${ref}`\n  }\n\n  /** @internal */\n  _on(type: string, filter: { [key: string]: any }, callback: Function) {\n    const typeLower = type.toLocaleLowerCase()\n    const binding = {\n      type: typeLower,\n      filter: filter,\n      callback: callback,\n    }\n\n    if (this.bindings[typeLower]) {\n      this.bindings[typeLower].push(binding)\n    } else {\n      this.bindings[typeLower] = [binding]\n    }\n\n    return this\n  }\n\n  /** @internal */\n  _off(type: string, filter: { [key: string]: any }) {\n    const typeLower = type.toLocaleLowerCase()\n\n    if (this.bindings[typeLower]) {\n      this.bindings[typeLower] = this.bindings[typeLower].filter((bind) => {\n        return !(\n          bind.type?.toLocaleLowerCase() === typeLower &&\n          RealtimeChannel.isEqual(bind.filter, filter)\n        )\n      })\n    }\n    return this\n  }\n\n  /** @internal */\n  private static isEqual(obj1: { [key: string]: string }, obj2: { [key: string]: string }) {\n    if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n      return false\n    }\n\n    for (const k in obj1) {\n      if (obj1[k] !== obj2[k]) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  /**\n   * Compares two optional filter values for equality.\n   * Treats undefined, null, and empty string as equivalent empty values.\n   * @internal\n   */\n  private static isFilterValueEqual(\n    serverValue: string | undefined | null,\n    clientValue: string | undefined\n  ): boolean {\n    const normalizedServer = serverValue ?? undefined\n    const normalizedClient = clientValue ?? undefined\n    return normalizedServer === normalizedClient\n  }\n\n  /** @internal */\n  private _rejoinUntilConnected() {\n    this.rejoinTimer.scheduleTimeout()\n    if (this.socket.isConnected()) {\n      this._rejoin()\n    }\n  }\n\n  /**\n   * Registers a callback that will be executed when the channel closes.\n   *\n   * @internal\n   */\n  private _onClose(callback: Function) {\n    this._on(CHANNEL_EVENTS.close, {}, callback)\n  }\n\n  /**\n   * Registers a callback that will be executed when the channel encounteres an error.\n   *\n   * @internal\n   */\n  private _onError(callback: Function) {\n    this._on(CHANNEL_EVENTS.error, {}, (reason: string) => callback(reason))\n  }\n\n  /**\n   * Returns `true` if the socket is connected and the channel has been joined.\n   *\n   * @internal\n   */\n  private _canPush(): boolean {\n    return this.socket.isConnected() && this._isJoined()\n  }\n\n  /** @internal */\n  private _rejoin(timeout = this.timeout): void {\n    if (this._isLeaving()) {\n      return\n    }\n    this.socket._leaveOpenTopic(this.topic)\n    this.state = CHANNEL_STATES.joining\n    this.joinPush.resend(timeout)\n  }\n\n  /** @internal */\n  private _getPayloadRecords(payload: any) {\n    const records = {\n      new: {},\n      old: {},\n    }\n\n    if (payload.type === 'INSERT' || payload.type === 'UPDATE') {\n      records.new = Transformers.convertChangeData(payload.columns, payload.record)\n    }\n\n    if (payload.type === 'UPDATE' || payload.type === 'DELETE') {\n      records.old = Transformers.convertChangeData(payload.columns, payload.old_record)\n    }\n\n    return records\n  }\n}\n","import WebSocketFactory, { WebSocketLike } from './lib/websocket-factory'\n\nimport {\n  CHANNEL_EVENTS,\n  CONNECTION_STATE,\n  DEFAULT_VERSION,\n  DEFAULT_TIMEOUT,\n  SOCKET_STATES,\n  TRANSPORTS,\n  DEFAULT_VSN,\n  VSN_1_0_0,\n  VSN_2_0_0,\n  WS_CLOSE_NORMAL,\n} from './lib/constants'\n\nimport Serializer from './lib/serializer'\nimport Timer from './lib/timer'\n\nimport { httpEndpointURL } from './lib/transformers'\nimport RealtimeChannel from './RealtimeChannel'\nimport type { RealtimeChannelOptions } from './RealtimeChannel'\n\ntype Fetch = typeof fetch\n\nexport type Channel = {\n  name: string\n  inserted_at: string\n  updated_at: string\n  id: number\n}\nexport type LogLevel = 'info' | 'warn' | 'error'\n\nexport type RealtimeMessage = {\n  topic: string\n  event: string\n  payload: any\n  ref: string\n  join_ref?: string\n}\n\nexport type RealtimeRemoveChannelResponse = 'ok' | 'timed out' | 'error'\nexport type HeartbeatStatus = 'sent' | 'ok' | 'error' | 'timeout' | 'disconnected'\n\nconst noop = () => {}\n\ntype RealtimeClientState = 'connecting' | 'connected' | 'disconnecting' | 'disconnected'\n\n// Connection-related constants\nconst CONNECTION_TIMEOUTS = {\n  HEARTBEAT_INTERVAL: 25000,\n  RECONNECT_DELAY: 10,\n  HEARTBEAT_TIMEOUT_FALLBACK: 100,\n} as const\n\nconst RECONNECT_INTERVALS = [1000, 2000, 5000, 10000] as const\nconst DEFAULT_RECONNECT_FALLBACK = 10000\n\n/**\n * Minimal WebSocket constructor interface that RealtimeClient can work with.\n * Supply a compatible implementation (native WebSocket, `ws`, etc) when running outside the browser.\n */\nexport interface WebSocketLikeConstructor {\n  new (address: string | URL, subprotocols?: string | string[] | undefined): WebSocketLike\n  // Allow additional properties that may exist on WebSocket constructors\n  [key: string]: any\n}\n\nexport interface WebSocketLikeError {\n  error: any\n  message: string\n  type: string\n}\n\nexport type RealtimeClientOptions = {\n  transport?: WebSocketLikeConstructor\n  timeout?: number\n  heartbeatIntervalMs?: number\n  heartbeatCallback?: (status: HeartbeatStatus, latency?: number) => void\n  vsn?: string\n  logger?: Function\n  encode?: Function\n  decode?: Function\n  reconnectAfterMs?: Function\n  headers?: { [key: string]: string }\n  params?: { [key: string]: any }\n  //Deprecated: Use it in favour of correct casing `logLevel`\n  log_level?: LogLevel\n  logLevel?: LogLevel\n  fetch?: Fetch\n  worker?: boolean\n  workerUrl?: string\n  accessToken?: () => Promise<string | null>\n}\n\nconst WORKER_SCRIPT = `\n  addEventListener(\"message\", (e) => {\n    if (e.data.event === \"start\") {\n      setInterval(() => postMessage({ event: \"keepAlive\" }), e.data.interval);\n    }\n  });`\n\nexport default class RealtimeClient {\n  accessTokenValue: string | null = null\n  apiKey: string | null = null\n  private _manuallySetToken: boolean = false\n  channels: RealtimeChannel[] = new Array()\n  endPoint: string = ''\n  httpEndpoint: string = ''\n  /** @deprecated headers cannot be set on websocket connections */\n  headers?: { [key: string]: string } = {}\n  params?: { [key: string]: string } = {}\n  timeout: number = DEFAULT_TIMEOUT\n  transport: WebSocketLikeConstructor | null = null\n  heartbeatIntervalMs: number = CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL\n  heartbeatTimer: ReturnType<typeof setInterval> | undefined = undefined\n  pendingHeartbeatRef: string | null = null\n  heartbeatCallback: (status: HeartbeatStatus, latency?: number) => void = noop\n  ref: number = 0\n  reconnectTimer: Timer | null = null\n  vsn: string = DEFAULT_VSN\n  logger: Function = noop\n  logLevel?: LogLevel\n  encode!: Function\n  decode!: Function\n  reconnectAfterMs!: Function\n  conn: WebSocketLike | null = null\n  sendBuffer: Function[] = []\n  serializer: Serializer = new Serializer()\n  stateChangeCallbacks: {\n    open: Function[]\n    close: Function[]\n    error: Function[]\n    message: Function[]\n  } = {\n    open: [],\n    close: [],\n    error: [],\n    message: [],\n  }\n  fetch: Fetch\n  accessToken: (() => Promise<string | null>) | null = null\n  worker?: boolean\n  workerUrl?: string\n  workerRef?: Worker\n  private _connectionState: RealtimeClientState = 'disconnected'\n  private _wasManualDisconnect: boolean = false\n  private _authPromise: Promise<void> | null = null\n  private _heartbeatSentAt: number | null = null\n\n  /**\n   * Initializes the Socket.\n   *\n   * @param endPoint The string WebSocket endpoint, ie, \"ws://example.com/socket\", \"wss://example.com\", \"/socket\" (inherited host & protocol)\n   * @param httpEndpoint The string HTTP endpoint, ie, \"https://example.com\", \"/\" (inherited host & protocol)\n   * @param options.transport The Websocket Transport, for example WebSocket. This can be a custom implementation\n   * @param options.timeout The default timeout in milliseconds to trigger push timeouts.\n   * @param options.params The optional params to pass when connecting.\n   * @param options.headers Deprecated: headers cannot be set on websocket connections and this option will be removed in the future.\n   * @param options.heartbeatIntervalMs The millisec interval to send a heartbeat message.\n   * @param options.heartbeatCallback The optional function to handle heartbeat status and latency.\n   * @param options.logger The optional function for specialized logging, ie: logger: (kind, msg, data) => { console.log(`${kind}: ${msg}`, data) }\n   * @param options.logLevel Sets the log level for Realtime\n   * @param options.encode The function to encode outgoing messages. Defaults to JSON: (payload, callback) => callback(JSON.stringify(payload))\n   * @param options.decode The function to decode incoming messages. Defaults to Serializer's decode.\n   * @param options.reconnectAfterMs he optional function that returns the millsec reconnect interval. Defaults to stepped backoff off.\n   * @param options.worker Use Web Worker to set a side flow. Defaults to false.\n   * @param options.workerUrl The URL of the worker script. Defaults to https://realtime.supabase.com/worker.js that includes a heartbeat event call to keep the connection alive.\n   * @param options.vsn The protocol version to use when connecting. Supported versions are \"1.0.0\" and \"2.0.0\". Defaults to \"2.0.0\".\n   * @example\n   * ```ts\n   * import RealtimeClient from '@supabase/realtime-js'\n   *\n   * const client = new RealtimeClient('https://xyzcompany.supabase.co/realtime/v1', {\n   *   params: { apikey: 'public-anon-key' },\n   * })\n   * client.connect()\n   * ```\n   */\n  constructor(endPoint: string, options?: RealtimeClientOptions) {\n    // Validate required parameters\n    if (!options?.params?.apikey) {\n      throw new Error('API key is required to connect to Realtime')\n    }\n    this.apiKey = options.params.apikey\n\n    // Initialize endpoint URLs\n    this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`\n    this.httpEndpoint = httpEndpointURL(endPoint)\n\n    this._initializeOptions(options)\n    this._setupReconnectionTimer()\n    this.fetch = this._resolveFetch(options?.fetch)\n  }\n\n  /**\n   * Connects the socket, unless already connected.\n   */\n  connect(): void {\n    // Skip if already connecting, disconnecting, or connected\n    if (\n      this.isConnecting() ||\n      this.isDisconnecting() ||\n      (this.conn !== null && this.isConnected())\n    ) {\n      return\n    }\n\n    this._setConnectionState('connecting')\n\n    // Trigger auth if needed and not already in progress\n    // This ensures auth is called for standalone RealtimeClient usage\n    // while avoiding race conditions with SupabaseClient's immediate setAuth call\n    if (this.accessToken && !this._authPromise) {\n      this._setAuthSafely('connect')\n    }\n\n    // Establish WebSocket connection\n    if (this.transport) {\n      // Use custom transport if provided\n      this.conn = new this.transport(this.endpointURL()) as WebSocketLike\n    } else {\n      // Try to use native WebSocket\n      try {\n        this.conn = WebSocketFactory.createWebSocket(this.endpointURL())\n      } catch (error) {\n        this._setConnectionState('disconnected')\n        const errorMessage = (error as Error).message\n\n        // Provide helpful error message based on environment\n        if (errorMessage.includes('Node.js')) {\n          throw new Error(\n            `${errorMessage}\\n\\n` +\n              'To use Realtime in Node.js, you need to provide a WebSocket implementation:\\n\\n' +\n              'Option 1: Use Node.js 22+ which has native WebSocket support\\n' +\n              'Option 2: Install and provide the \"ws\" package:\\n\\n' +\n              '  npm install ws\\n\\n' +\n              '  import ws from \"ws\"\\n' +\n              '  const client = new RealtimeClient(url, {\\n' +\n              '    ...options,\\n' +\n              '    transport: ws\\n' +\n              '  })'\n          )\n        }\n        throw new Error(`WebSocket not available: ${errorMessage}`)\n      }\n    }\n    this._setupConnectionHandlers()\n  }\n\n  /**\n   * Returns the URL of the websocket.\n   * @returns string The URL of the websocket.\n   */\n  endpointURL(): string {\n    return this._appendParams(this.endPoint, Object.assign({}, this.params, { vsn: this.vsn }))\n  }\n\n  /**\n   * Disconnects the socket.\n   *\n   * @param code A numeric status code to send on disconnect.\n   * @param reason A custom reason for the disconnect.\n   */\n  disconnect(code?: number, reason?: string): void {\n    if (this.isDisconnecting()) {\n      return\n    }\n\n    this._setConnectionState('disconnecting', true)\n\n    if (this.conn) {\n      // Setup fallback timer to prevent hanging in disconnecting state\n      const fallbackTimer = setTimeout(() => {\n        this._setConnectionState('disconnected')\n      }, 100)\n\n      this.conn.onclose = () => {\n        clearTimeout(fallbackTimer)\n        this._setConnectionState('disconnected')\n      }\n\n      // Close the WebSocket connection if close method exists\n      if (typeof this.conn.close === 'function') {\n        if (code) {\n          this.conn.close(code, reason ?? '')\n        } else {\n          this.conn.close()\n        }\n      }\n\n      this._teardownConnection()\n    } else {\n      this._setConnectionState('disconnected')\n    }\n  }\n\n  /**\n   * Returns all created channels\n   */\n  getChannels(): RealtimeChannel[] {\n    return this.channels\n  }\n\n  /**\n   * Unsubscribes and removes a single channel\n   * @param channel A RealtimeChannel instance\n   */\n  async removeChannel(channel: RealtimeChannel): Promise<RealtimeRemoveChannelResponse> {\n    const status = await channel.unsubscribe()\n\n    if (this.channels.length === 0) {\n      this.disconnect()\n    }\n\n    return status\n  }\n\n  /**\n   * Unsubscribes and removes all channels\n   */\n  async removeAllChannels(): Promise<RealtimeRemoveChannelResponse[]> {\n    const values_1 = await Promise.all(this.channels.map((channel) => channel.unsubscribe()))\n    this.channels = []\n    this.disconnect()\n    return values_1\n  }\n\n  /**\n   * Logs the message.\n   *\n   * For customized logging, `this.logger` can be overridden.\n   */\n  log(kind: string, msg: string, data?: any) {\n    this.logger(kind, msg, data)\n  }\n\n  /**\n   * Returns the current state of the socket.\n   */\n  connectionState(): CONNECTION_STATE {\n    switch (this.conn && this.conn.readyState) {\n      case SOCKET_STATES.connecting:\n        return CONNECTION_STATE.Connecting\n      case SOCKET_STATES.open:\n        return CONNECTION_STATE.Open\n      case SOCKET_STATES.closing:\n        return CONNECTION_STATE.Closing\n      default:\n        return CONNECTION_STATE.Closed\n    }\n  }\n\n  /**\n   * Returns `true` is the connection is open.\n   */\n  isConnected(): boolean {\n    return this.connectionState() === CONNECTION_STATE.Open\n  }\n\n  /**\n   * Returns `true` if the connection is currently connecting.\n   */\n  isConnecting(): boolean {\n    return this._connectionState === 'connecting'\n  }\n\n  /**\n   * Returns `true` if the connection is currently disconnecting.\n   */\n  isDisconnecting(): boolean {\n    return this._connectionState === 'disconnecting'\n  }\n\n  /**\n   * Creates (or reuses) a {@link RealtimeChannel} for the provided topic.\n   *\n   * Topics are automatically prefixed with `realtime:` to match the Realtime service.\n   * If a channel with the same topic already exists it will be returned instead of creating\n   * a duplicate connection.\n   */\n  channel(topic: string, params: RealtimeChannelOptions = { config: {} }): RealtimeChannel {\n    const realtimeTopic = `realtime:${topic}`\n    const exists = this.getChannels().find((c: RealtimeChannel) => c.topic === realtimeTopic)\n\n    if (!exists) {\n      const chan = new RealtimeChannel(`realtime:${topic}`, params, this)\n      this.channels.push(chan)\n\n      return chan\n    } else {\n      return exists\n    }\n  }\n\n  /**\n   * Push out a message if the socket is connected.\n   *\n   * If the socket is not connected, the message gets enqueued within a local buffer, and sent out when a connection is next established.\n   */\n  push(data: RealtimeMessage): void {\n    const { topic, event, payload, ref } = data\n    const callback = () => {\n      this.encode(data, (result: any) => {\n        this.conn?.send(result)\n      })\n    }\n    this.log('push', `${topic} ${event} (${ref})`, payload)\n    if (this.isConnected()) {\n      callback()\n    } else {\n      this.sendBuffer.push(callback)\n    }\n  }\n\n  /**\n   * Sets the JWT access token used for channel subscription authorization and Realtime RLS.\n   *\n   * If param is null it will use the `accessToken` callback function or the token set on the client.\n   *\n   * On callback used, it will set the value of the token internal to the client.\n   *\n   * When a token is explicitly provided, it will be preserved across channel operations\n   * (including removeChannel and resubscribe). The `accessToken` callback will not be\n   * invoked until `setAuth()` is called without arguments.\n   *\n   * @param token A JWT string to override the token set on the client.\n   *\n   * @example\n   * // Use a manual token (preserved across resubscribes, ignores accessToken callback)\n   * client.realtime.setAuth('my-custom-jwt')\n   *\n   * // Switch back to using the accessToken callback\n   * client.realtime.setAuth()\n   */\n  async setAuth(token: string | null = null): Promise<void> {\n    this._authPromise = this._performAuth(token)\n    try {\n      await this._authPromise\n    } finally {\n      this._authPromise = null\n    }\n  }\n\n  /**\n   * Returns true if the current access token was explicitly set via setAuth(token),\n   * false if it was obtained via the accessToken callback.\n   * @internal\n   */\n  _isManualToken(): boolean {\n    return this._manuallySetToken\n  }\n\n  /**\n   * Sends a heartbeat message if the socket is connected.\n   */\n  async sendHeartbeat() {\n    if (!this.isConnected()) {\n      try {\n        this.heartbeatCallback('disconnected')\n      } catch (e) {\n        this.log('error', 'error in heartbeat callback', e)\n      }\n      return\n    }\n\n    // Handle heartbeat timeout and force reconnection if needed\n    if (this.pendingHeartbeatRef) {\n      this.pendingHeartbeatRef = null\n      this._heartbeatSentAt = null\n      this.log('transport', 'heartbeat timeout. Attempting to re-establish connection')\n      try {\n        this.heartbeatCallback('timeout')\n      } catch (e) {\n        this.log('error', 'error in heartbeat callback', e)\n      }\n\n      // Force reconnection after heartbeat timeout\n      this._wasManualDisconnect = false\n      this.conn?.close(WS_CLOSE_NORMAL, 'heartbeat timeout')\n\n      setTimeout(() => {\n        if (!this.isConnected()) {\n          this.reconnectTimer?.scheduleTimeout()\n        }\n      }, CONNECTION_TIMEOUTS.HEARTBEAT_TIMEOUT_FALLBACK)\n      return\n    }\n\n    // Send heartbeat message to server\n    this._heartbeatSentAt = Date.now()\n    this.pendingHeartbeatRef = this._makeRef()\n    this.push({\n      topic: 'phoenix',\n      event: 'heartbeat',\n      payload: {},\n      ref: this.pendingHeartbeatRef,\n    })\n    try {\n      this.heartbeatCallback('sent')\n    } catch (e) {\n      this.log('error', 'error in heartbeat callback', e)\n    }\n\n    this._setAuthSafely('heartbeat')\n  }\n\n  /**\n   * Sets a callback that receives lifecycle events for internal heartbeat messages.\n   * Useful for instrumenting connection health (e.g. sent/ok/timeout/disconnected).\n   */\n  onHeartbeat(callback: (status: HeartbeatStatus, latency?: number) => void): void {\n    this.heartbeatCallback = callback\n  }\n  /**\n   * Flushes send buffer\n   */\n  flushSendBuffer() {\n    if (this.isConnected() && this.sendBuffer.length > 0) {\n      this.sendBuffer.forEach((callback) => callback())\n      this.sendBuffer = []\n    }\n  }\n\n  /**\n   * Use either custom fetch, if provided, or default fetch to make HTTP requests\n   *\n   * @internal\n   */\n  _resolveFetch = (customFetch?: Fetch): Fetch => {\n    if (customFetch) {\n      return (...args) => customFetch(...args)\n    }\n    return (...args) => fetch(...args)\n  }\n\n  /**\n   * Return the next message ref, accounting for overflows\n   *\n   * @internal\n   */\n  _makeRef(): string {\n    let newRef = this.ref + 1\n    if (newRef === this.ref) {\n      this.ref = 0\n    } else {\n      this.ref = newRef\n    }\n\n    return this.ref.toString()\n  }\n\n  /**\n   * Unsubscribe from channels with the specified topic.\n   *\n   * @internal\n   */\n  _leaveOpenTopic(topic: string): void {\n    let dupChannel = this.channels.find(\n      (c) => c.topic === topic && (c._isJoined() || c._isJoining())\n    )\n    if (dupChannel) {\n      this.log('transport', `leaving duplicate topic \"${topic}\"`)\n      dupChannel.unsubscribe()\n    }\n  }\n\n  /**\n   * Removes a subscription from the socket.\n   *\n   * @param channel An open subscription.\n   *\n   * @internal\n   */\n  _remove(channel: RealtimeChannel) {\n    this.channels = this.channels.filter((c) => c.topic !== channel.topic)\n  }\n\n  /** @internal */\n  private _onConnMessage(rawMessage: { data: any }) {\n    this.decode(rawMessage.data, (msg: RealtimeMessage) => {\n      // Handle heartbeat responses\n      if (\n        msg.topic === 'phoenix' &&\n        msg.event === 'phx_reply' &&\n        msg.ref &&\n        msg.ref === this.pendingHeartbeatRef\n      ) {\n        const latency = this._heartbeatSentAt ? Date.now() - this._heartbeatSentAt : undefined\n        try {\n          this.heartbeatCallback(msg.payload.status === 'ok' ? 'ok' : 'error', latency)\n        } catch (e) {\n          this.log('error', 'error in heartbeat callback', e)\n        }\n        this._heartbeatSentAt = null\n        this.pendingHeartbeatRef = null\n      }\n\n      // Log incoming message\n      const { topic, event, payload, ref } = msg\n      const refString = ref ? `(${ref})` : ''\n      const status = payload.status || ''\n      this.log('receive', `${status} ${topic} ${event} ${refString}`.trim(), payload)\n\n      // Route message to appropriate channels\n      this.channels\n        .filter((channel: RealtimeChannel) => channel._isMember(topic))\n        .forEach((channel: RealtimeChannel) => channel._trigger(event, payload, ref))\n\n      this._triggerStateCallbacks('message', msg)\n    })\n  }\n\n  /**\n   * Clear specific timer\n   * @internal\n   */\n  private _clearTimer(timer: 'heartbeat' | 'reconnect'): void {\n    if (timer === 'heartbeat' && this.heartbeatTimer) {\n      clearInterval(this.heartbeatTimer)\n      this.heartbeatTimer = undefined\n    } else if (timer === 'reconnect') {\n      this.reconnectTimer?.reset()\n    }\n  }\n\n  /**\n   * Clear all timers\n   * @internal\n   */\n  private _clearAllTimers(): void {\n    this._clearTimer('heartbeat')\n    this._clearTimer('reconnect')\n  }\n\n  /**\n   * Setup connection handlers for WebSocket events\n   * @internal\n   */\n  private _setupConnectionHandlers(): void {\n    if (!this.conn) return\n\n    // Set binary type if supported (browsers and most WebSocket implementations)\n    if ('binaryType' in this.conn) {\n      ;(this.conn as any).binaryType = 'arraybuffer'\n    }\n\n    this.conn.onopen = () => this._onConnOpen()\n    this.conn.onerror = (error: Event) => this._onConnError(error)\n    this.conn.onmessage = (event: any) => this._onConnMessage(event)\n    this.conn.onclose = (event: any) => this._onConnClose(event)\n\n    if (this.conn.readyState === SOCKET_STATES.open) {\n      this._onConnOpen()\n    }\n  }\n\n  /**\n   * Teardown connection and cleanup resources\n   * @internal\n   */\n  private _teardownConnection(): void {\n    if (this.conn) {\n      if (\n        this.conn.readyState === SOCKET_STATES.open ||\n        this.conn.readyState === SOCKET_STATES.connecting\n      ) {\n        try {\n          this.conn.close()\n        } catch (e) {\n          this.log('error', 'Error closing connection', e)\n        }\n      }\n\n      this.conn.onopen = null\n      this.conn.onerror = null\n      this.conn.onmessage = null\n      this.conn.onclose = null\n      this.conn = null\n    }\n    this._clearAllTimers()\n    this._terminateWorker()\n    this.channels.forEach((channel) => channel.teardown())\n  }\n\n  /** @internal */\n  private _onConnOpen() {\n    this._setConnectionState('connected')\n    this.log('transport', `connected to ${this.endpointURL()}`)\n\n    // Wait for any pending auth operations before flushing send buffer\n    // This ensures channel join messages include the correct access token\n    const authPromise =\n      this._authPromise ||\n      (this.accessToken && !this.accessTokenValue ? this.setAuth() : Promise.resolve())\n\n    authPromise\n      .then(() => {\n        this.flushSendBuffer()\n      })\n      .catch((e) => {\n        this.log('error', 'error waiting for auth on connect', e)\n        // Proceed anyway to avoid hanging connections\n        this.flushSendBuffer()\n      })\n\n    this._clearTimer('reconnect')\n\n    if (!this.worker) {\n      this._startHeartbeat()\n    } else {\n      if (!this.workerRef) {\n        this._startWorkerHeartbeat()\n      }\n    }\n\n    this._triggerStateCallbacks('open')\n  }\n  /** @internal */\n  private _startHeartbeat() {\n    this.heartbeatTimer && clearInterval(this.heartbeatTimer)\n    this.heartbeatTimer = setInterval(() => this.sendHeartbeat(), this.heartbeatIntervalMs)\n  }\n\n  /** @internal */\n  private _startWorkerHeartbeat() {\n    if (this.workerUrl) {\n      this.log('worker', `starting worker for from ${this.workerUrl}`)\n    } else {\n      this.log('worker', `starting default worker`)\n    }\n    const objectUrl = this._workerObjectUrl(this.workerUrl!)\n    this.workerRef = new Worker(objectUrl)\n    this.workerRef.onerror = (error) => {\n      this.log('worker', 'worker error', (error as ErrorEvent).message)\n      this._terminateWorker()\n    }\n    this.workerRef.onmessage = (event) => {\n      if (event.data.event === 'keepAlive') {\n        this.sendHeartbeat()\n      }\n    }\n    this.workerRef.postMessage({\n      event: 'start',\n      interval: this.heartbeatIntervalMs,\n    })\n  }\n\n  /**\n   * Terminate the Web Worker and clear the reference\n   * @internal\n   */\n  private _terminateWorker(): void {\n    if (this.workerRef) {\n      this.log('worker', 'terminating worker')\n      this.workerRef.terminate()\n      this.workerRef = undefined\n    }\n  }\n  /** @internal */\n  private _onConnClose(event: any) {\n    this._setConnectionState('disconnected')\n    this.log('transport', 'close', event)\n    this._triggerChanError()\n    this._clearTimer('heartbeat')\n\n    // Only schedule reconnection if it wasn't a manual disconnect\n    if (!this._wasManualDisconnect) {\n      this.reconnectTimer?.scheduleTimeout()\n    }\n\n    this._triggerStateCallbacks('close', event)\n  }\n\n  /** @internal */\n  private _onConnError(error: Event) {\n    this._setConnectionState('disconnected')\n    this.log('transport', `${error}`)\n    this._triggerChanError()\n    this._triggerStateCallbacks('error', error)\n    try {\n      this.heartbeatCallback('error')\n    } catch (e) {\n      this.log('error', 'error in heartbeat callback', e)\n    }\n  }\n\n  /** @internal */\n  private _triggerChanError() {\n    this.channels.forEach((channel: RealtimeChannel) => channel._trigger(CHANNEL_EVENTS.error))\n  }\n\n  /** @internal */\n  private _appendParams(url: string, params: { [key: string]: string }): string {\n    if (Object.keys(params).length === 0) {\n      return url\n    }\n    const prefix = url.match(/\\?/) ? '&' : '?'\n    const query = new URLSearchParams(params)\n    return `${url}${prefix}${query}`\n  }\n\n  private _workerObjectUrl(url: string | undefined): string {\n    let result_url: string\n    if (url) {\n      result_url = url\n    } else {\n      const blob = new Blob([WORKER_SCRIPT], { type: 'application/javascript' })\n      result_url = URL.createObjectURL(blob)\n    }\n    return result_url\n  }\n\n  /**\n   * Set connection state with proper state management\n   * @internal\n   */\n  private _setConnectionState(state: RealtimeClientState, manual = false): void {\n    this._connectionState = state\n\n    if (state === 'connecting') {\n      this._wasManualDisconnect = false\n    } else if (state === 'disconnecting') {\n      this._wasManualDisconnect = manual\n    }\n  }\n\n  /**\n   * Perform the actual auth operation\n   * @internal\n   */\n  private async _performAuth(token: string | null = null): Promise<void> {\n    let tokenToSend: string | null\n    let isManualToken = false\n\n    if (token) {\n      tokenToSend = token\n      // Track if this is a manually-provided token\n      isManualToken = true\n    } else if (this.accessToken) {\n      // Call the accessToken callback to get fresh token\n      try {\n        tokenToSend = await this.accessToken()\n      } catch (e) {\n        this.log('error', 'Error fetching access token from callback', e)\n        // Fall back to cached value if callback fails\n        tokenToSend = this.accessTokenValue\n      }\n    } else {\n      tokenToSend = this.accessTokenValue\n    }\n\n    // Track whether this token was manually set or fetched via callback\n    if (isManualToken) {\n      this._manuallySetToken = true\n    } else if (this.accessToken) {\n      // If we used the callback, clear the manual flag\n      this._manuallySetToken = false\n    }\n\n    if (this.accessTokenValue != tokenToSend) {\n      this.accessTokenValue = tokenToSend\n      this.channels.forEach((channel) => {\n        const payload = {\n          access_token: tokenToSend,\n          version: DEFAULT_VERSION,\n        }\n\n        tokenToSend && channel.updateJoinPayload(payload)\n\n        if (channel.joinedOnce && channel._isJoined()) {\n          channel._push(CHANNEL_EVENTS.access_token, {\n            access_token: tokenToSend,\n          })\n        }\n      })\n    }\n  }\n\n  /**\n   * Wait for any in-flight auth operations to complete\n   * @internal\n   */\n  private async _waitForAuthIfNeeded(): Promise<void> {\n    if (this._authPromise) {\n      await this._authPromise\n    }\n  }\n\n  /**\n   * Safely call setAuth with standardized error handling\n   * @internal\n   */\n  private _setAuthSafely(context = 'general'): void {\n    // Only refresh auth if using callback-based tokens\n    if (!this._isManualToken()) {\n      this.setAuth().catch((e) => {\n        this.log('error', `Error setting auth in ${context}`, e)\n      })\n    }\n  }\n\n  /**\n   * Trigger state change callbacks with proper error handling\n   * @internal\n   */\n  private _triggerStateCallbacks(event: keyof typeof this.stateChangeCallbacks, data?: any): void {\n    try {\n      this.stateChangeCallbacks[event].forEach((callback) => {\n        try {\n          callback(data)\n        } catch (e) {\n          this.log('error', `error in ${event} callback`, e)\n        }\n      })\n    } catch (e) {\n      this.log('error', `error triggering ${event} callbacks`, e)\n    }\n  }\n\n  /**\n   * Setup reconnection timer with proper configuration\n   * @internal\n   */\n  private _setupReconnectionTimer(): void {\n    this.reconnectTimer = new Timer(async () => {\n      setTimeout(async () => {\n        await this._waitForAuthIfNeeded()\n        if (!this.isConnected()) {\n          this.connect()\n        }\n      }, CONNECTION_TIMEOUTS.RECONNECT_DELAY)\n    }, this.reconnectAfterMs)\n  }\n\n  /**\n   * Initialize client options with defaults\n   * @internal\n   */\n  private _initializeOptions(options?: RealtimeClientOptions): void {\n    // Set defaults\n    this.transport = options?.transport ?? null\n    this.timeout = options?.timeout ?? DEFAULT_TIMEOUT\n    this.heartbeatIntervalMs =\n      options?.heartbeatIntervalMs ?? CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL\n    this.worker = options?.worker ?? false\n    this.accessToken = options?.accessToken ?? null\n    this.heartbeatCallback = options?.heartbeatCallback ?? noop\n    this.vsn = options?.vsn ?? DEFAULT_VSN\n\n    // Handle special cases\n    if (options?.params) this.params = options.params\n    if (options?.logger) this.logger = options.logger\n    if (options?.logLevel || options?.log_level) {\n      this.logLevel = options.logLevel || options.log_level\n      this.params = { ...this.params, log_level: this.logLevel as string }\n    }\n\n    // Set up functions with defaults\n    this.reconnectAfterMs =\n      options?.reconnectAfterMs ??\n      ((tries: number) => {\n        return RECONNECT_INTERVALS[tries - 1] || DEFAULT_RECONNECT_FALLBACK\n      })\n\n    switch (this.vsn) {\n      case VSN_1_0_0:\n        this.encode =\n          options?.encode ??\n          ((payload: JSON, callback: Function) => {\n            return callback(JSON.stringify(payload))\n          })\n\n        this.decode =\n          options?.decode ??\n          ((payload: string, callback: Function) => {\n            return callback(JSON.parse(payload))\n          })\n        break\n      case VSN_2_0_0:\n        this.encode = options?.encode ?? this.serializer.encode.bind(this.serializer)\n        this.decode = options?.decode ?? this.serializer.decode.bind(this.serializer)\n        break\n      default:\n        throw new Error(`Unsupported serializer version: ${this.vsn}`)\n    }\n\n    // Handle worker setup\n    if (this.worker) {\n      if (typeof window !== 'undefined' && !window.Worker) {\n        throw new Error('Web Worker is not supported')\n      }\n      this.workerUrl = options?.workerUrl\n    }\n  }\n}\n","export interface IcebergErrorResponse {\n  error: {\n    message: string\n    type: string\n    code: number\n    stack?: string[]\n  }\n}\n\nexport class IcebergError extends Error {\n  readonly status: number\n  readonly icebergType?: string\n  readonly icebergCode?: number\n  readonly details?: unknown\n  readonly isCommitStateUnknown: boolean\n\n  constructor(\n    message: string,\n    opts: {\n      status: number\n      icebergType?: string\n      icebergCode?: number\n      details?: unknown\n    }\n  ) {\n    super(message)\n    this.name = 'IcebergError'\n    this.status = opts.status\n    this.icebergType = opts.icebergType\n    this.icebergCode = opts.icebergCode\n    this.details = opts.details\n\n    // Detect CommitStateUnknownException (500, 502, 504 during table commits)\n    this.isCommitStateUnknown =\n      opts.icebergType === 'CommitStateUnknownException' ||\n      ([500, 502, 504].includes(opts.status) && opts.icebergType?.includes('CommitState') === true)\n  }\n\n  /**\n   * Returns true if the error is a 404 Not Found error.\n   */\n  isNotFound(): boolean {\n    return this.status === 404\n  }\n\n  /**\n   * Returns true if the error is a 409 Conflict error.\n   */\n  isConflict(): boolean {\n    return this.status === 409\n  }\n\n  /**\n   * Returns true if the error is a 419 Authentication Timeout error.\n   */\n  isAuthenticationTimeout(): boolean {\n    return this.status === 419\n  }\n}\n","import { IcebergError, type IcebergErrorResponse } from '../errors/IcebergError'\nimport { buildUrl } from '../utils/url'\nimport type { AuthConfig, HttpClient, HttpRequest, HttpResponse } from './types'\n\nasync function buildAuthHeaders(auth?: AuthConfig): Promise<Record<string, string>> {\n  if (!auth || auth.type === 'none') {\n    return {}\n  }\n\n  if (auth.type === 'bearer') {\n    return { Authorization: `Bearer ${auth.token}` }\n  }\n\n  if (auth.type === 'header') {\n    return { [auth.name]: auth.value }\n  }\n\n  if (auth.type === 'custom') {\n    return await auth.getHeaders()\n  }\n\n  return {}\n}\n\nexport function createFetchClient(options: {\n  baseUrl: string\n  auth?: AuthConfig\n  fetchImpl?: typeof fetch\n}): HttpClient {\n  const fetchFn = options.fetchImpl ?? globalThis.fetch\n\n  return {\n    async request<T>({\n      method,\n      path,\n      query,\n      body,\n      headers,\n    }: HttpRequest): Promise<HttpResponse<T>> {\n      const url = buildUrl(options.baseUrl, path, query)\n      const authHeaders = await buildAuthHeaders(options.auth)\n\n      const res = await fetchFn(url, {\n        method,\n        headers: {\n          ...(body ? { 'Content-Type': 'application/json' } : {}),\n          ...authHeaders,\n          ...headers,\n        },\n        body: body ? JSON.stringify(body) : undefined,\n      })\n\n      const text = await res.text()\n      const isJson = (res.headers.get('content-type') || '').includes('application/json')\n      const data = isJson && text ? (JSON.parse(text) as T) : (text as T)\n\n      if (!res.ok) {\n        const errBody = isJson ? (data as IcebergErrorResponse) : undefined\n        const errorDetail = errBody?.error\n        throw new IcebergError(\n          errorDetail?.message ?? `Request failed with status ${res.status}`,\n          {\n            status: res.status,\n            icebergType: errorDetail?.type,\n            icebergCode: errorDetail?.code,\n            details: errBody,\n          }\n        )\n      }\n\n      return { status: res.status, headers: res.headers, data: data as T }\n    },\n  }\n}\n","export function buildUrl(\n  baseUrl: string,\n  path: string,\n  query?: Record<string, string | undefined>\n): string {\n  const url = new URL(path, baseUrl)\n\n  if (query) {\n    for (const [key, value] of Object.entries(query)) {\n      if (value !== undefined) {\n        url.searchParams.set(key, value)\n      }\n    }\n  }\n\n  return url.toString()\n}\n","import type { HttpClient } from '../http/types'\nimport { IcebergError } from '../errors/IcebergError'\nimport type {\n  CreateNamespaceRequest,\n  CreateNamespaceResponse,\n  GetNamespaceResponse,\n  ListNamespacesResponse,\n  NamespaceIdentifier,\n  NamespaceMetadata,\n} from './types'\n\nfunction namespaceToPath(namespace: string[]): string {\n  return namespace.join('\\x1F')\n}\n\nexport class NamespaceOperations {\n  constructor(\n    private readonly client: HttpClient,\n    private readonly prefix: string = ''\n  ) {}\n\n  async listNamespaces(parent?: NamespaceIdentifier): Promise<NamespaceIdentifier[]> {\n    const query = parent ? { parent: namespaceToPath(parent.namespace) } : undefined\n\n    const response = await this.client.request<ListNamespacesResponse>({\n      method: 'GET',\n      path: `${this.prefix}/namespaces`,\n      query,\n    })\n\n    return response.data.namespaces.map((ns) => ({ namespace: ns }))\n  }\n\n  async createNamespace(\n    id: NamespaceIdentifier,\n    metadata?: NamespaceMetadata\n  ): Promise<CreateNamespaceResponse> {\n    const request: CreateNamespaceRequest = {\n      namespace: id.namespace,\n      properties: metadata?.properties,\n    }\n\n    const response = await this.client.request<CreateNamespaceResponse>({\n      method: 'POST',\n      path: `${this.prefix}/namespaces`,\n      body: request,\n    })\n\n    return response.data\n  }\n\n  async dropNamespace(id: NamespaceIdentifier): Promise<void> {\n    await this.client.request<void>({\n      method: 'DELETE',\n      path: `${this.prefix}/namespaces/${namespaceToPath(id.namespace)}`,\n    })\n  }\n\n  async loadNamespaceMetadata(id: NamespaceIdentifier): Promise<NamespaceMetadata> {\n    const response = await this.client.request<GetNamespaceResponse>({\n      method: 'GET',\n      path: `${this.prefix}/namespaces/${namespaceToPath(id.namespace)}`,\n    })\n\n    return {\n      properties: response.data.properties,\n    }\n  }\n\n  async namespaceExists(id: NamespaceIdentifier): Promise<boolean> {\n    try {\n      await this.client.request<void>({\n        method: 'HEAD',\n        path: `${this.prefix}/namespaces/${namespaceToPath(id.namespace)}`,\n      })\n      return true\n    } catch (error) {\n      if (error instanceof IcebergError && error.status === 404) {\n        return false\n      }\n      throw error\n    }\n  }\n\n  async createNamespaceIfNotExists(\n    id: NamespaceIdentifier,\n    metadata?: NamespaceMetadata\n  ): Promise<CreateNamespaceResponse | void> {\n    try {\n      return await this.createNamespace(id, metadata)\n    } catch (error) {\n      if (error instanceof IcebergError && error.status === 409) {\n        return\n      }\n      throw error\n    }\n  }\n}\n","import type { HttpClient } from '../http/types'\nimport { IcebergError } from '../errors/IcebergError'\nimport type {\n  CreateTableRequest,\n  CommitTableResponse,\n  ListTablesResponse,\n  LoadTableResponse,\n  NamespaceIdentifier,\n  TableIdentifier,\n  TableMetadata,\n  UpdateTableRequest,\n  DropTableRequest,\n} from './types'\n\nfunction namespaceToPath(namespace: string[]): string {\n  return namespace.join('\\x1F')\n}\n\nexport class TableOperations {\n  constructor(\n    private readonly client: HttpClient,\n    private readonly prefix: string = '',\n    private readonly accessDelegation?: string\n  ) {}\n\n  async listTables(namespace: NamespaceIdentifier): Promise<TableIdentifier[]> {\n    const response = await this.client.request<ListTablesResponse>({\n      method: 'GET',\n      path: `${this.prefix}/namespaces/${namespaceToPath(namespace.namespace)}/tables`,\n    })\n\n    return response.data.identifiers\n  }\n\n  async createTable(\n    namespace: NamespaceIdentifier,\n    request: CreateTableRequest\n  ): Promise<TableMetadata> {\n    const headers: Record<string, string> = {}\n    if (this.accessDelegation) {\n      headers['X-Iceberg-Access-Delegation'] = this.accessDelegation\n    }\n\n    const response = await this.client.request<LoadTableResponse>({\n      method: 'POST',\n      path: `${this.prefix}/namespaces/${namespaceToPath(namespace.namespace)}/tables`,\n      body: request,\n      headers,\n    })\n\n    return response.data.metadata\n  }\n\n  async updateTable(id: TableIdentifier, request: UpdateTableRequest): Promise<CommitTableResponse> {\n    const response = await this.client.request<LoadTableResponse>({\n      method: 'POST',\n      path: `${this.prefix}/namespaces/${namespaceToPath(id.namespace)}/tables/${id.name}`,\n      body: request,\n    })\n\n    return {\n      'metadata-location': response.data['metadata-location'],\n      metadata: response.data.metadata,\n    }\n  }\n\n  async dropTable(id: TableIdentifier, options?: DropTableRequest): Promise<void> {\n    await this.client.request<void>({\n      method: 'DELETE',\n      path: `${this.prefix}/namespaces/${namespaceToPath(id.namespace)}/tables/${id.name}`,\n      query: { purgeRequested: String(options?.purge ?? false) },\n    })\n  }\n\n  async loadTable(id: TableIdentifier): Promise<TableMetadata> {\n    const headers: Record<string, string> = {}\n    if (this.accessDelegation) {\n      headers['X-Iceberg-Access-Delegation'] = this.accessDelegation\n    }\n\n    const response = await this.client.request<LoadTableResponse>({\n      method: 'GET',\n      path: `${this.prefix}/namespaces/${namespaceToPath(id.namespace)}/tables/${id.name}`,\n      headers,\n    })\n\n    return response.data.metadata\n  }\n\n  async tableExists(id: TableIdentifier): Promise<boolean> {\n    const headers: Record<string, string> = {}\n    if (this.accessDelegation) {\n      headers['X-Iceberg-Access-Delegation'] = this.accessDelegation\n    }\n\n    try {\n      await this.client.request<void>({\n        method: 'HEAD',\n        path: `${this.prefix}/namespaces/${namespaceToPath(id.namespace)}/tables/${id.name}`,\n        headers,\n      })\n      return true\n    } catch (error) {\n      if (error instanceof IcebergError && error.status === 404) {\n        return false\n      }\n      throw error\n    }\n  }\n\n  async createTableIfNotExists(\n    namespace: NamespaceIdentifier,\n    request: CreateTableRequest\n  ): Promise<TableMetadata> {\n    try {\n      return await this.createTable(namespace, request)\n    } catch (error) {\n      if (error instanceof IcebergError && error.status === 409) {\n        return await this.loadTable({ namespace: namespace.namespace, name: request.name })\n      }\n      throw error\n    }\n  }\n}\n","import { createFetchClient } from '../http/createFetchClient'\nimport type { AuthConfig, HttpClient } from '../http/types'\nimport { NamespaceOperations } from './namespaces'\nimport { TableOperations } from './tables'\nimport type {\n  CreateTableRequest,\n  CreateNamespaceResponse,\n  CommitTableResponse,\n  NamespaceIdentifier,\n  NamespaceMetadata,\n  TableIdentifier,\n  TableMetadata,\n  UpdateTableRequest,\n  DropTableRequest,\n} from './types'\n\n/**\n * Access delegation mechanisms supported by the Iceberg REST Catalog.\n *\n * - `vended-credentials`: Server provides temporary credentials for data access\n * - `remote-signing`: Server signs requests on behalf of the client\n */\nexport type AccessDelegation = 'vended-credentials' | 'remote-signing'\n\n/**\n * Configuration options for the Iceberg REST Catalog client.\n */\nexport interface IcebergRestCatalogOptions {\n  /** Base URL of the Iceberg REST Catalog API */\n  baseUrl: string\n  /** Optional catalog name prefix for multi-catalog servers */\n  catalogName?: string\n  /** Authentication configuration */\n  auth?: AuthConfig\n  /** Custom fetch implementation (defaults to globalThis.fetch) */\n  fetch?: typeof fetch\n  /**\n   * Access delegation mechanisms to request from the server.\n   * When specified, the X-Iceberg-Access-Delegation header will be sent\n   * with supported operations (createTable, loadTable).\n   *\n   * @example ['vended-credentials']\n   * @example ['vended-credentials', 'remote-signing']\n   */\n  accessDelegation?: AccessDelegation[]\n}\n\n/**\n * Client for interacting with an Apache Iceberg REST Catalog.\n *\n * This class provides methods for managing namespaces and tables in an Iceberg catalog.\n * It handles authentication, request formatting, and error handling automatically.\n *\n * @example\n * ```typescript\n * const catalog = new IcebergRestCatalog({\n *   baseUrl: 'https://my-catalog.example.com/iceberg/v1',\n *   auth: { type: 'bearer', token: process.env.ICEBERG_TOKEN }\n * });\n *\n * // Create a namespace\n * await catalog.createNamespace({ namespace: ['analytics'] });\n *\n * // Create a table\n * await catalog.createTable(\n *   { namespace: ['analytics'] },\n *   {\n *     name: 'events',\n *     schema: { type: 'struct', fields: [...] }\n *   }\n * );\n * ```\n */\nexport class IcebergRestCatalog {\n  private readonly client: HttpClient\n  private readonly namespaceOps: NamespaceOperations\n  private readonly tableOps: TableOperations\n  private readonly accessDelegation?: string\n\n  /**\n   * Creates a new Iceberg REST Catalog client.\n   *\n   * @param options - Configuration options for the catalog client\n   */\n  constructor(options: IcebergRestCatalogOptions) {\n    let prefix = 'v1'\n    if (options.catalogName) {\n      prefix += `/${options.catalogName}`\n    }\n\n    const baseUrl = options.baseUrl.endsWith('/') ? options.baseUrl : `${options.baseUrl}/`\n\n    this.client = createFetchClient({\n      baseUrl,\n      auth: options.auth,\n      fetchImpl: options.fetch,\n    })\n\n    // Format accessDelegation as comma-separated string per spec\n    this.accessDelegation = options.accessDelegation?.join(',')\n\n    this.namespaceOps = new NamespaceOperations(this.client, prefix)\n    this.tableOps = new TableOperations(this.client, prefix, this.accessDelegation)\n  }\n\n  /**\n   * Lists all namespaces in the catalog.\n   *\n   * @param parent - Optional parent namespace to list children under\n   * @returns Array of namespace identifiers\n   *\n   * @example\n   * ```typescript\n   * // List all top-level namespaces\n   * const namespaces = await catalog.listNamespaces();\n   *\n   * // List namespaces under a parent\n   * const children = await catalog.listNamespaces({ namespace: ['analytics'] });\n   * ```\n   */\n  async listNamespaces(parent?: NamespaceIdentifier): Promise<NamespaceIdentifier[]> {\n    return this.namespaceOps.listNamespaces(parent)\n  }\n\n  /**\n   * Creates a new namespace in the catalog.\n   *\n   * @param id - Namespace identifier to create\n   * @param metadata - Optional metadata properties for the namespace\n   * @returns Response containing the created namespace and its properties\n   *\n   * @example\n   * ```typescript\n   * const response = await catalog.createNamespace(\n   *   { namespace: ['analytics'] },\n   *   { properties: { owner: 'data-team' } }\n   * );\n   * console.log(response.namespace); // ['analytics']\n   * console.log(response.properties); // { owner: 'data-team', ... }\n   * ```\n   */\n  async createNamespace(id: NamespaceIdentifier, metadata?: NamespaceMetadata): Promise<CreateNamespaceResponse> {\n    return this.namespaceOps.createNamespace(id, metadata)\n  }\n\n  /**\n   * Drops a namespace from the catalog.\n   *\n   * The namespace must be empty (contain no tables) before it can be dropped.\n   *\n   * @param id - Namespace identifier to drop\n   *\n   * @example\n   * ```typescript\n   * await catalog.dropNamespace({ namespace: ['analytics'] });\n   * ```\n   */\n  async dropNamespace(id: NamespaceIdentifier): Promise<void> {\n    await this.namespaceOps.dropNamespace(id)\n  }\n\n  /**\n   * Loads metadata for a namespace.\n   *\n   * @param id - Namespace identifier to load\n   * @returns Namespace metadata including properties\n   *\n   * @example\n   * ```typescript\n   * const metadata = await catalog.loadNamespaceMetadata({ namespace: ['analytics'] });\n   * console.log(metadata.properties);\n   * ```\n   */\n  async loadNamespaceMetadata(id: NamespaceIdentifier): Promise<NamespaceMetadata> {\n    return this.namespaceOps.loadNamespaceMetadata(id)\n  }\n\n  /**\n   * Lists all tables in a namespace.\n   *\n   * @param namespace - Namespace identifier to list tables from\n   * @returns Array of table identifiers\n   *\n   * @example\n   * ```typescript\n   * const tables = await catalog.listTables({ namespace: ['analytics'] });\n   * console.log(tables); // [{ namespace: ['analytics'], name: 'events' }, ...]\n   * ```\n   */\n  async listTables(namespace: NamespaceIdentifier): Promise<TableIdentifier[]> {\n    return this.tableOps.listTables(namespace)\n  }\n\n  /**\n   * Creates a new table in the catalog.\n   *\n   * @param namespace - Namespace to create the table in\n   * @param request - Table creation request including name, schema, partition spec, etc.\n   * @returns Table metadata for the created table\n   *\n   * @example\n   * ```typescript\n   * const metadata = await catalog.createTable(\n   *   { namespace: ['analytics'] },\n   *   {\n   *     name: 'events',\n   *     schema: {\n   *       type: 'struct',\n   *       fields: [\n   *         { id: 1, name: 'id', type: 'long', required: true },\n   *         { id: 2, name: 'timestamp', type: 'timestamp', required: true }\n   *       ],\n   *       'schema-id': 0\n   *     },\n   *     'partition-spec': {\n   *       'spec-id': 0,\n   *       fields: [\n   *         { source_id: 2, field_id: 1000, name: 'ts_day', transform: 'day' }\n   *       ]\n   *     }\n   *   }\n   * );\n   * ```\n   */\n  async createTable(\n    namespace: NamespaceIdentifier,\n    request: CreateTableRequest\n  ): Promise<TableMetadata> {\n    return this.tableOps.createTable(namespace, request)\n  }\n\n  /**\n   * Updates an existing table's metadata.\n   *\n   * Can update the schema, partition spec, or properties of a table.\n   *\n   * @param id - Table identifier to update\n   * @param request - Update request with fields to modify\n   * @returns Response containing the metadata location and updated table metadata\n   *\n   * @example\n   * ```typescript\n   * const response = await catalog.updateTable(\n   *   { namespace: ['analytics'], name: 'events' },\n   *   {\n   *     properties: { 'read.split.target-size': '134217728' }\n   *   }\n   * );\n   * console.log(response['metadata-location']); // s3://...\n   * console.log(response.metadata); // TableMetadata object\n   * ```\n   */\n  async updateTable(id: TableIdentifier, request: UpdateTableRequest): Promise<CommitTableResponse> {\n    return this.tableOps.updateTable(id, request)\n  }\n\n  /**\n   * Drops a table from the catalog.\n   *\n   * @param id - Table identifier to drop\n   *\n   * @example\n   * ```typescript\n   * await catalog.dropTable({ namespace: ['analytics'], name: 'events' });\n   * ```\n   */\n  async dropTable(id: TableIdentifier, options?: DropTableRequest): Promise<void> {\n    await this.tableOps.dropTable(id, options)\n  }\n\n  /**\n   * Loads metadata for a table.\n   *\n   * @param id - Table identifier to load\n   * @returns Table metadata including schema, partition spec, location, etc.\n   *\n   * @example\n   * ```typescript\n   * const metadata = await catalog.loadTable({ namespace: ['analytics'], name: 'events' });\n   * console.log(metadata.schema);\n   * console.log(metadata.location);\n   * ```\n   */\n  async loadTable(id: TableIdentifier): Promise<TableMetadata> {\n    return this.tableOps.loadTable(id)\n  }\n\n  /**\n   * Checks if a namespace exists in the catalog.\n   *\n   * @param id - Namespace identifier to check\n   * @returns True if the namespace exists, false otherwise\n   *\n   * @example\n   * ```typescript\n   * const exists = await catalog.namespaceExists({ namespace: ['analytics'] });\n   * console.log(exists); // true or false\n   * ```\n   */\n  async namespaceExists(id: NamespaceIdentifier): Promise<boolean> {\n    return this.namespaceOps.namespaceExists(id)\n  }\n\n  /**\n   * Checks if a table exists in the catalog.\n   *\n   * @param id - Table identifier to check\n   * @returns True if the table exists, false otherwise\n   *\n   * @example\n   * ```typescript\n   * const exists = await catalog.tableExists({ namespace: ['analytics'], name: 'events' });\n   * console.log(exists); // true or false\n   * ```\n   */\n  async tableExists(id: TableIdentifier): Promise<boolean> {\n    return this.tableOps.tableExists(id)\n  }\n\n  /**\n   * Creates a namespace if it does not exist.\n   *\n   * If the namespace already exists, returns void. If created, returns the response.\n   *\n   * @param id - Namespace identifier to create\n   * @param metadata - Optional metadata properties for the namespace\n   * @returns Response containing the created namespace and its properties, or void if it already exists\n   *\n   * @example\n   * ```typescript\n   * const response = await catalog.createNamespaceIfNotExists(\n   *   { namespace: ['analytics'] },\n   *   { properties: { owner: 'data-team' } }\n   * );\n   * if (response) {\n   *   console.log('Created:', response.namespace);\n   * } else {\n   *   console.log('Already exists');\n   * }\n   * ```\n   */\n  async createNamespaceIfNotExists(\n    id: NamespaceIdentifier,\n    metadata?: NamespaceMetadata\n  ): Promise<CreateNamespaceResponse | void> {\n    return this.namespaceOps.createNamespaceIfNotExists(id, metadata)\n  }\n\n  /**\n   * Creates a table if it does not exist.\n   *\n   * If the table already exists, returns its metadata instead.\n   *\n   * @param namespace - Namespace to create the table in\n   * @param request - Table creation request including name, schema, partition spec, etc.\n   * @returns Table metadata for the created or existing table\n   *\n   * @example\n   * ```typescript\n   * const metadata = await catalog.createTableIfNotExists(\n   *   { namespace: ['analytics'] },\n   *   {\n   *     name: 'events',\n   *     schema: {\n   *       type: 'struct',\n   *       fields: [\n   *         { id: 1, name: 'id', type: 'long', required: true },\n   *         { id: 2, name: 'timestamp', type: 'timestamp', required: true }\n   *       ],\n   *       'schema-id': 0\n   *     }\n   *   }\n   * );\n   * ```\n   */\n  async createTableIfNotExists(\n    namespace: NamespaceIdentifier,\n    request: CreateTableRequest\n  ): Promise<TableMetadata> {\n    return this.tableOps.createTableIfNotExists(namespace, request)\n  }\n}\n","/**\n * Namespace type for error classes\n * Determines the error class names and type guards\n */\nexport type ErrorNamespace = 'storage' | 'vectors'\n\n/**\n * Base error class for all Storage errors\n * Supports both 'storage' and 'vectors' namespaces\n */\nexport class StorageError extends Error {\n  protected __isStorageError = true\n  protected namespace: ErrorNamespace\n  status?: number\n  statusCode?: string\n\n  constructor(\n    message: string,\n    namespace: ErrorNamespace = 'storage',\n    status?: number,\n    statusCode?: string\n  ) {\n    super(message)\n    this.namespace = namespace\n    this.name = namespace === 'vectors' ? 'StorageVectorsError' : 'StorageError'\n    this.status = status\n    this.statusCode = statusCode\n  }\n}\n\n/**\n * Type guard to check if an error is a StorageError\n * @param error - The error to check\n * @returns True if the error is a StorageError\n */\nexport function isStorageError(error: unknown): error is StorageError {\n  return typeof error === 'object' && error !== null && '__isStorageError' in error\n}\n\n/**\n * API error returned from Storage service\n * Includes HTTP status code and service-specific error code\n */\nexport class StorageApiError extends StorageError {\n  override status: number\n  override statusCode: string\n\n  constructor(\n    message: string,\n    status: number,\n    statusCode: string,\n    namespace: ErrorNamespace = 'storage'\n  ) {\n    super(message, namespace, status, statusCode)\n    this.name = namespace === 'vectors' ? 'StorageVectorsApiError' : 'StorageApiError'\n    this.status = status\n    this.statusCode = statusCode\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n      message: this.message,\n      status: this.status,\n      statusCode: this.statusCode,\n    }\n  }\n}\n\n/**\n * Unknown error that doesn't match expected error patterns\n * Wraps the original error for debugging\n */\nexport class StorageUnknownError extends StorageError {\n  originalError: unknown\n\n  constructor(message: string, originalError: unknown, namespace: ErrorNamespace = 'storage') {\n    super(message, namespace)\n    this.name = namespace === 'vectors' ? 'StorageVectorsUnknownError' : 'StorageUnknownError'\n    this.originalError = originalError\n  }\n}\n\n// ============================================================================\n// Backward Compatibility Exports for Vectors\n// ============================================================================\n\n/**\n * @deprecated Use StorageError with namespace='vectors' instead\n * Alias for backward compatibility with existing vector storage code\n */\nexport class StorageVectorsError extends StorageError {\n  constructor(message: string) {\n    super(message, 'vectors')\n  }\n}\n\n/**\n * Type guard to check if an error is a StorageVectorsError\n * @param error - The error to check\n * @returns True if the error is a StorageVectorsError\n */\nexport function isStorageVectorsError(error: unknown): error is StorageVectorsError {\n  return isStorageError(error) && (error as StorageError)['namespace'] === 'vectors'\n}\n\n/**\n * @deprecated Use StorageApiError with namespace='vectors' instead\n * Alias for backward compatibility with existing vector storage code\n */\nexport class StorageVectorsApiError extends StorageApiError {\n  constructor(message: string, status: number, statusCode: string) {\n    super(message, status, statusCode, 'vectors')\n  }\n}\n\n/**\n * @deprecated Use StorageUnknownError with namespace='vectors' instead\n * Alias for backward compatibility with existing vector storage code\n */\nexport class StorageVectorsUnknownError extends StorageUnknownError {\n  constructor(message: string, originalError: unknown) {\n    super(message, originalError, 'vectors')\n  }\n}\n\n/**\n * Error codes specific to S3 Vectors API\n * Maps AWS service errors to application-friendly error codes\n */\nexport enum StorageVectorsErrorCode {\n  /** Internal server fault (HTTP 500) */\n  InternalError = 'InternalError',\n  /** Resource already exists / conflict (HTTP 409) */\n  S3VectorConflictException = 'S3VectorConflictException',\n  /** Resource not found (HTTP 404) */\n  S3VectorNotFoundException = 'S3VectorNotFoundException',\n  /** Delete bucket while not empty (HTTP 400) */\n  S3VectorBucketNotEmpty = 'S3VectorBucketNotEmpty',\n  /** Exceeds bucket quota/limit (HTTP 400) */\n  S3VectorMaxBucketsExceeded = 'S3VectorMaxBucketsExceeded',\n  /** Exceeds index quota/limit (HTTP 400) */\n  S3VectorMaxIndexesExceeded = 'S3VectorMaxIndexesExceeded',\n}\n","type Fetch = typeof fetch\n\n/**\n * Resolves the fetch implementation to use\n * Uses custom fetch if provided, otherwise uses native fetch\n *\n * @param customFetch - Optional custom fetch implementation\n * @returns Resolved fetch function\n */\nexport const resolveFetch = (customFetch?: Fetch): Fetch => {\n  if (customFetch) {\n    return (...args) => customFetch(...args)\n  }\n  return (...args) => fetch(...args)\n}\n\n/**\n * Resolves the Response constructor to use\n * Returns native Response constructor\n *\n * @returns Response constructor\n */\nexport const resolveResponse = (): typeof Response => {\n  return Response\n}\n\n/**\n * Determine if input is a plain object\n * An object is plain if it's created by either {}, new Object(), or Object.create(null)\n *\n * @param value - Value to check\n * @returns True if value is a plain object\n * @source https://github.com/sindresorhus/is-plain-obj\n */\nexport const isPlainObject = (value: object): boolean => {\n  if (typeof value !== 'object' || value === null) {\n    return false\n  }\n\n  const prototype = Object.getPrototypeOf(value)\n  return (\n    (prototype === null ||\n      prototype === Object.prototype ||\n      Object.getPrototypeOf(prototype) === null) &&\n    !(Symbol.toStringTag in value) &&\n    !(Symbol.iterator in value)\n  )\n}\n\n/**\n * Recursively converts object keys from snake_case to camelCase\n * Used for normalizing API responses\n *\n * @param item - Object to convert\n * @returns Converted object with camelCase keys\n */\nexport const recursiveToCamel = (item: Record<string, any>): unknown => {\n  if (Array.isArray(item)) {\n    return item.map((el) => recursiveToCamel(el))\n  } else if (typeof item === 'function' || item !== Object(item)) {\n    return item\n  }\n\n  const result: Record<string, any> = {}\n  Object.entries(item).forEach(([key, value]) => {\n    const newKey = key.replace(/([-_][a-z])/gi, (c) => c.toUpperCase().replace(/[-_]/g, ''))\n    result[newKey] = recursiveToCamel(value)\n  })\n\n  return result\n}\n\n/**\n * Validates if a given bucket name is valid according to Supabase Storage API rules\n * Mirrors backend validation from: storage/src/storage/limits.ts:isValidBucketName()\n *\n * Rules:\n * - Length: 1-100 characters\n * - Allowed characters: alphanumeric (a-z, A-Z, 0-9), underscore (_), and safe special characters\n * - Safe special characters: ! - . * ' ( ) space & $ @ = ; : + , ?\n * - Forbidden: path separators (/, \\), path traversal (..), leading/trailing whitespace\n *\n * AWS S3 Reference: https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-keys.html\n *\n * @param bucketName - The bucket name to validate\n * @returns true if valid, false otherwise\n */\nexport const isValidBucketName = (bucketName: string): boolean => {\n  if (!bucketName || typeof bucketName !== 'string') {\n    return false\n  }\n\n  // Check length constraints (1-100 characters)\n  if (bucketName.length === 0 || bucketName.length > 100) {\n    return false\n  }\n\n  // Check for leading/trailing whitespace\n  if (bucketName.trim() !== bucketName) {\n    return false\n  }\n\n  // Explicitly reject path separators (security)\n  // Note: Consecutive periods (..) are allowed by backend - the AWS restriction\n  // on relative paths applies to object keys, not bucket names\n  if (bucketName.includes('/') || bucketName.includes('\\\\')) {\n    return false\n  }\n\n  // Validate against allowed character set\n  // Pattern matches backend regex: /^(\\w|!|-|\\.|\\*|'|\\(|\\)| |&|\\$|@|=|;|:|\\+|,|\\?)*$/\n  // This explicitly excludes path separators (/, \\) and other problematic characters\n  const bucketNameRegex = /^[\\w!.\\*'() &$@=;:+,?-]+$/\n  return bucketNameRegex.test(bucketName)\n}\n\n/**\n * Normalizes a number array to float32 format\n * Ensures all vector values are valid 32-bit floats\n *\n * @param values - Array of numbers to normalize\n * @returns Normalized float32 array\n */\nexport const normalizeToFloat32 = (values: number[]): number[] => {\n  // Use Float32Array to ensure proper precision\n  return Array.from(new Float32Array(values))\n}\n\n/**\n * Validates vector dimensions match expected dimension\n * Throws error if dimensions don't match\n *\n * @param vector - Vector data to validate\n * @param expectedDimension - Expected vector dimension\n * @throws Error if dimensions don't match\n */\nexport const validateVectorDimension = (\n  vector: { float32: number[] },\n  expectedDimension?: number\n): void => {\n  if (expectedDimension !== undefined && vector.float32.length !== expectedDimension) {\n    throw new Error(\n      `Vector dimension mismatch: expected ${expectedDimension}, got ${vector.float32.length}`\n    )\n  }\n}\n","import { StorageApiError, StorageUnknownError, ErrorNamespace } from './errors'\nimport { isPlainObject, resolveResponse } from './helpers'\nimport { FetchParameters } from '../types'\n\nexport type Fetch = typeof fetch\n\n/**\n * Options for fetch requests\n */\nexport interface FetchOptions {\n  headers?: {\n    [key: string]: string\n  }\n  duplex?: string\n  noResolveJson?: boolean\n}\n\n/**\n * HTTP methods supported by the API\n */\nexport type RequestMethodType = 'GET' | 'POST' | 'PUT' | 'DELETE' | 'HEAD'\n\n/**\n * Extracts error message from various error response formats\n * @param err - Error object from API\n * @returns Human-readable error message\n */\nconst _getErrorMessage = (err: any): string =>\n  err.msg ||\n  err.message ||\n  err.error_description ||\n  (typeof err.error === 'string' ? err.error : err.error?.message) ||\n  JSON.stringify(err)\n\n/**\n * Handles fetch errors and converts them to Storage error types\n * @param error - The error caught from fetch\n * @param reject - Promise rejection function\n * @param options - Fetch options that may affect error handling\n * @param namespace - Error namespace ('storage' or 'vectors')\n */\nconst handleError = async (\n  error: unknown,\n  reject: (reason?: any) => void,\n  options: FetchOptions | undefined,\n  namespace: ErrorNamespace\n) => {\n  // Check if error is a Response-like object (has status and ok properties)\n  // This is more reliable than instanceof which can fail across realms\n  const isResponseLike =\n    error &&\n    typeof error === 'object' &&\n    'status' in error &&\n    'ok' in error &&\n    typeof (error as any).status === 'number'\n\n  if (isResponseLike && !options?.noResolveJson) {\n    const responseError = error as any\n    const status = responseError.status || 500\n\n    // Try to parse JSON body if available\n    if (typeof responseError.json === 'function') {\n      responseError\n        .json()\n        .then((err: any) => {\n          const statusCode = err?.statusCode || err?.code || status + ''\n          reject(new StorageApiError(_getErrorMessage(err), status, statusCode, namespace))\n        })\n        .catch(() => {\n          // If JSON parsing fails for vectors, create ApiError with HTTP status\n          if (namespace === 'vectors') {\n            const statusCode = status + ''\n            const message = responseError.statusText || `HTTP ${status} error`\n            reject(new StorageApiError(message, status, statusCode, namespace))\n          } else {\n            const statusCode = status + ''\n            const message = responseError.statusText || `HTTP ${status} error`\n            reject(new StorageApiError(message, status, statusCode, namespace))\n          }\n        })\n    } else {\n      // No json() method available, create error from status\n      const statusCode = status + ''\n      const message = responseError.statusText || `HTTP ${status} error`\n      reject(new StorageApiError(message, status, statusCode, namespace))\n    }\n  } else {\n    reject(new StorageUnknownError(_getErrorMessage(error), error, namespace))\n  }\n}\n\n/**\n * Builds request parameters for fetch calls\n * @param method - HTTP method\n * @param options - Custom fetch options\n * @param parameters - Additional fetch parameters like AbortSignal\n * @param body - Request body (will be JSON stringified if plain object)\n * @returns Complete fetch request parameters\n */\nconst _getRequestParams = (\n  method: RequestMethodType,\n  options?: FetchOptions,\n  parameters?: FetchParameters,\n  body?: object\n) => {\n  const params: { [k: string]: any } = { method, headers: options?.headers || {} }\n\n  if (method === 'GET' || method === 'HEAD' || !body) {\n    return { ...params, ...parameters }\n  }\n\n  if (isPlainObject(body)) {\n    params.headers = { 'Content-Type': 'application/json', ...options?.headers }\n    params.body = JSON.stringify(body)\n  } else {\n    params.body = body\n  }\n\n  if (options?.duplex) {\n    params.duplex = options.duplex\n  }\n\n  return { ...params, ...parameters }\n}\n\n/**\n * Internal request handler that wraps fetch with error handling\n * @param fetcher - Fetch function to use\n * @param method - HTTP method\n * @param url - Request URL\n * @param options - Custom fetch options\n * @param parameters - Additional fetch parameters\n * @param body - Request body\n * @param namespace - Error namespace ('storage' or 'vectors')\n * @returns Promise with parsed response or error\n */\nasync function _handleRequest(\n  fetcher: Fetch,\n  method: RequestMethodType,\n  url: string,\n  options: FetchOptions | undefined,\n  parameters: FetchParameters | undefined,\n  body: object | undefined,\n  namespace: ErrorNamespace\n): Promise<any> {\n  return new Promise((resolve, reject) => {\n    fetcher(url, _getRequestParams(method, options, parameters, body))\n      .then((result) => {\n        if (!result.ok) throw result\n        if (options?.noResolveJson) return result\n\n        // AWS S3 Vectors API returns 200 OK with content-length: 0 for successful mutations\n        // (putVectors, deleteVectors) instead of 204 or JSON response. This is AWS's design choice\n        // for performance optimization of bulk operations (up to 500 vectors per request).\n        // We handle this to prevent \"Unexpected end of JSON input\" errors when calling result.json()\n        if (namespace === 'vectors') {\n          const contentType = result.headers.get('content-type')\n          const contentLength = result.headers.get('content-length')\n\n          // Return empty object for explicitly empty responses\n          if (contentLength === '0' || result.status === 204) {\n            return {}\n          }\n\n          // Return empty object if no JSON content type\n          if (!contentType || !contentType.includes('application/json')) {\n            return {}\n          }\n        }\n\n        return result.json()\n      })\n      .then((data) => resolve(data))\n      .catch((error) => handleError(error, reject, options, namespace))\n  })\n}\n\n/**\n * Creates a fetch API with the specified namespace\n * @param namespace - Error namespace ('storage' or 'vectors')\n * @returns Object with HTTP method functions\n */\nexport function createFetchApi(namespace: ErrorNamespace = 'storage') {\n  return {\n    /**\n     * Performs a GET request\n     * @param fetcher - Fetch function to use\n     * @param url - Request URL\n     * @param options - Custom fetch options\n     * @param parameters - Additional fetch parameters\n     * @returns Promise with parsed response\n     */\n    get: async (\n      fetcher: Fetch,\n      url: string,\n      options?: FetchOptions,\n      parameters?: FetchParameters\n    ): Promise<any> => {\n      return _handleRequest(fetcher, 'GET', url, options, parameters, undefined, namespace)\n    },\n\n    /**\n     * Performs a POST request\n     * @param fetcher - Fetch function to use\n     * @param url - Request URL\n     * @param body - Request body to be JSON stringified\n     * @param options - Custom fetch options\n     * @param parameters - Additional fetch parameters\n     * @returns Promise with parsed response\n     */\n    post: async (\n      fetcher: Fetch,\n      url: string,\n      body: object,\n      options?: FetchOptions,\n      parameters?: FetchParameters\n    ): Promise<any> => {\n      return _handleRequest(fetcher, 'POST', url, options, parameters, body, namespace)\n    },\n\n    /**\n     * Performs a PUT request\n     * @param fetcher - Fetch function to use\n     * @param url - Request URL\n     * @param body - Request body to be JSON stringified\n     * @param options - Custom fetch options\n     * @param parameters - Additional fetch parameters\n     * @returns Promise with parsed response\n     */\n    put: async (\n      fetcher: Fetch,\n      url: string,\n      body: object,\n      options?: FetchOptions,\n      parameters?: FetchParameters\n    ): Promise<any> => {\n      return _handleRequest(fetcher, 'PUT', url, options, parameters, body, namespace)\n    },\n\n    /**\n     * Performs a HEAD request\n     * @param fetcher - Fetch function to use\n     * @param url - Request URL\n     * @param options - Custom fetch options\n     * @param parameters - Additional fetch parameters\n     * @returns Promise with Response object (not JSON parsed)\n     */\n    head: async (\n      fetcher: Fetch,\n      url: string,\n      options?: FetchOptions,\n      parameters?: FetchParameters\n    ): Promise<any> => {\n      return _handleRequest(\n        fetcher,\n        'HEAD',\n        url,\n        {\n          ...options,\n          noResolveJson: true,\n        },\n        parameters,\n        undefined,\n        namespace\n      )\n    },\n\n    /**\n     * Performs a DELETE request\n     * @param fetcher - Fetch function to use\n     * @param url - Request URL\n     * @param body - Request body to be JSON stringified\n     * @param options - Custom fetch options\n     * @param parameters - Additional fetch parameters\n     * @returns Promise with parsed response\n     */\n    remove: async (\n      fetcher: Fetch,\n      url: string,\n      body: object,\n      options?: FetchOptions,\n      parameters?: FetchParameters\n    ): Promise<any> => {\n      return _handleRequest(fetcher, 'DELETE', url, options, parameters, body, namespace)\n    },\n  }\n}\n\n// Default exports for backward compatibility with 'storage' namespace\nconst defaultApi = createFetchApi('storage')\nexport const { get, post, put, head, remove } = defaultApi\n\n// Vectors API with 'vectors' namespace for proper error handling\nexport const vectorsApi = createFetchApi('vectors')\n","import { ErrorNamespace, isStorageError, StorageError } from './errors'\nimport { Fetch } from './fetch'\nimport { resolveFetch } from './helpers'\n\n/**\n * @ignore\n * Base API client class for all Storage API classes\n * Provides common infrastructure for error handling and configuration\n *\n * @typeParam TError - The error type (StorageError or subclass)\n */\nexport default abstract class BaseApiClient<TError extends StorageError = StorageError> {\n  protected url: string\n  protected headers: { [key: string]: string }\n  protected fetch: Fetch\n  protected shouldThrowOnError = false\n  protected namespace: ErrorNamespace\n\n  /**\n   * Creates a new BaseApiClient instance\n   * @param url - Base URL for API requests\n   * @param headers - Default headers for API requests\n   * @param fetch - Optional custom fetch implementation\n   * @param namespace - Error namespace ('storage' or 'vectors')\n   */\n  constructor(\n    url: string,\n    headers: { [key: string]: string } = {},\n    fetch?: Fetch,\n    namespace: ErrorNamespace = 'storage'\n  ) {\n    this.url = url\n    this.headers = headers\n    this.fetch = resolveFetch(fetch)\n    this.namespace = namespace\n  }\n\n  /**\n   * Enable throwing errors instead of returning them.\n   * When enabled, errors are thrown instead of returned in { data, error } format.\n   *\n   * @returns this - For method chaining\n   */\n  public throwOnError(): this {\n    this.shouldThrowOnError = true\n    return this\n  }\n\n  /**\n   * Set an HTTP header for the request.\n   * Creates a shallow copy of headers to avoid mutating shared state.\n   *\n   * @param name - Header name\n   * @param value - Header value\n   * @returns this - For method chaining\n   */\n  public setHeader(name: string, value: string): this {\n    this.headers = { ...this.headers, [name]: value }\n    return this\n  }\n\n  /**\n   * Handles API operation with standardized error handling\n   * Eliminates repetitive try-catch blocks across all API methods\n   *\n   * This wrapper:\n   * 1. Executes the operation\n   * 2. Returns { data, error: null } on success\n   * 3. Returns { data: null, error } on failure (if shouldThrowOnError is false)\n   * 4. Throws error on failure (if shouldThrowOnError is true)\n   *\n   * @typeParam T - The expected data type from the operation\n   * @param operation - Async function that performs the API call\n   * @returns Promise with { data, error } tuple\n   *\n   * @example\n   * ```typescript\n   * async listBuckets() {\n   *   return this.handleOperation(async () => {\n   *     return await get(this.fetch, `${this.url}/bucket`, {\n   *       headers: this.headers,\n   *     })\n   *   })\n   * }\n   * ```\n   */\n  protected async handleOperation<T>(\n    operation: () => Promise<T>\n  ): Promise<{ data: T; error: null } | { data: null; error: TError }> {\n    try {\n      const data = await operation()\n      return { data, error: null }\n    } catch (error) {\n      if (this.shouldThrowOnError) {\n        throw error\n      }\n      if (isStorageError(error)) {\n        return { data: null, error: error as TError }\n      }\n      throw error\n    }\n  }\n}\n","import { isStorageError } from '../lib/common/errors'\nimport { DownloadResult } from '../lib/types'\n\nexport default class StreamDownloadBuilder implements PromiseLike<DownloadResult<ReadableStream>> {\n  constructor(\n    private downloadFn: () => Promise<Response>,\n    private shouldThrowOnError: boolean\n  ) {}\n\n  then<TResult1 = DownloadResult<ReadableStream>, TResult2 = never>(\n    onfulfilled?:\n      | ((value: DownloadResult<ReadableStream>) => TResult1 | PromiseLike<TResult1>)\n      | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | null\n  ): Promise<TResult1 | TResult2> {\n    return this.execute().then(onfulfilled, onrejected)\n  }\n\n  private async execute(): Promise<DownloadResult<ReadableStream>> {\n    try {\n      const result = await this.downloadFn()\n\n      return {\n        data: result.body as ReadableStream,\n        error: null,\n      }\n    } catch (error) {\n      if (this.shouldThrowOnError) {\n        throw error\n      }\n\n      if (isStorageError(error)) {\n        return { data: null, error }\n      }\n\n      throw error\n    }\n  }\n}\n","import { isStorageError } from '../lib/common/errors'\nimport { DownloadResult } from '../lib/types'\nimport StreamDownloadBuilder from './StreamDownloadBuilder'\n\nexport default class BlobDownloadBuilder implements Promise<DownloadResult<Blob>> {\n  readonly [Symbol.toStringTag]: string = 'BlobDownloadBuilder'\n  private promise: Promise<DownloadResult<Blob>> | null = null\n\n  constructor(\n    private downloadFn: () => Promise<Response>,\n    private shouldThrowOnError: boolean\n  ) {}\n\n  asStream(): StreamDownloadBuilder {\n    return new StreamDownloadBuilder(this.downloadFn, this.shouldThrowOnError)\n  }\n\n  then<TResult1 = DownloadResult<Blob>, TResult2 = never>(\n    onfulfilled?: ((value: DownloadResult<Blob>) => TResult1 | PromiseLike<TResult1>) | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | null\n  ): Promise<TResult1 | TResult2> {\n    return this.getPromise().then(onfulfilled, onrejected)\n  }\n\n  catch<TResult = never>(\n    onrejected?: ((reason: any) => TResult | PromiseLike<TResult>) | null\n  ): Promise<DownloadResult<Blob> | TResult> {\n    return this.getPromise().catch(onrejected)\n  }\n\n  finally(onfinally?: (() => void) | null): Promise<DownloadResult<Blob>> {\n    return this.getPromise().finally(onfinally)\n  }\n\n  private getPromise(): Promise<DownloadResult<Blob>> {\n    if (!this.promise) {\n      this.promise = this.execute()\n    }\n    return this.promise\n  }\n\n  private async execute(): Promise<DownloadResult<Blob>> {\n    try {\n      const result = await this.downloadFn()\n\n      return {\n        data: await result.blob(),\n        error: null,\n      }\n    } catch (error) {\n      if (this.shouldThrowOnError) {\n        throw error\n      }\n\n      if (isStorageError(error)) {\n        return { data: null, error }\n      }\n\n      throw error\n    }\n  }\n}\n","import { StorageError, StorageUnknownError, isStorageError } from '../lib/common/errors'\nimport { get, head, post, put, remove, Fetch } from '../lib/common/fetch'\nimport { recursiveToCamel } from '../lib/common/helpers'\nimport BaseApiClient from '../lib/common/BaseApiClient'\nimport {\n  FileObject,\n  FileOptions,\n  SearchOptions,\n  FetchParameters,\n  TransformOptions,\n  DestinationOptions,\n  FileObjectV2,\n  Camelize,\n  SearchV2Options,\n  SearchV2Result,\n} from '../lib/types'\nimport BlobDownloadBuilder from './BlobDownloadBuilder'\n\nconst DEFAULT_SEARCH_OPTIONS = {\n  limit: 100,\n  offset: 0,\n  sortBy: {\n    column: 'name',\n    order: 'asc',\n  },\n}\n\nconst DEFAULT_FILE_OPTIONS: FileOptions = {\n  cacheControl: '3600',\n  contentType: 'text/plain;charset=UTF-8',\n  upsert: false,\n}\n\ntype FileBody =\n  | ArrayBuffer\n  | ArrayBufferView\n  | Blob\n  | Buffer\n  | File\n  | FormData\n  | NodeJS.ReadableStream\n  | ReadableStream<Uint8Array>\n  | URLSearchParams\n  | string\n\nexport default class StorageFileApi extends BaseApiClient<StorageError> {\n  protected bucketId?: string\n\n  constructor(\n    url: string,\n    headers: { [key: string]: string } = {},\n    bucketId?: string,\n    fetch?: Fetch\n  ) {\n    super(url, headers, fetch, 'storage')\n    this.bucketId = bucketId\n  }\n\n  /**\n   * Uploads a file to an existing bucket or replaces an existing file at the specified path with a new one.\n   *\n   * @param method HTTP method.\n   * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n   * @param fileBody The body of the file to be stored in the bucket.\n   */\n  private async uploadOrUpdate(\n    method: 'POST' | 'PUT',\n    path: string,\n    fileBody: FileBody,\n    fileOptions?: FileOptions\n  ): Promise<\n    | {\n        data: { id: string; path: string; fullPath: string }\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      let body\n      const options = { ...DEFAULT_FILE_OPTIONS, ...fileOptions }\n      let headers: Record<string, string> = {\n        ...this.headers,\n        ...(method === 'POST' && { 'x-upsert': String(options.upsert as boolean) }),\n      }\n\n      const metadata = options.metadata\n\n      if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n        body = new FormData()\n        body.append('cacheControl', options.cacheControl as string)\n        if (metadata) {\n          body.append('metadata', this.encodeMetadata(metadata))\n        }\n        body.append('', fileBody)\n      } else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n        body = fileBody\n        // Only append if not already present\n        if (!body.has('cacheControl')) {\n          body.append('cacheControl', options.cacheControl as string)\n        }\n        if (metadata && !body.has('metadata')) {\n          body.append('metadata', this.encodeMetadata(metadata))\n        }\n      } else {\n        body = fileBody\n        headers['cache-control'] = `max-age=${options.cacheControl}`\n        headers['content-type'] = options.contentType as string\n\n        if (metadata) {\n          headers['x-metadata'] = this.toBase64(this.encodeMetadata(metadata))\n        }\n\n        // Node.js streams require duplex option for fetch in Node 20+\n        // Check for both web ReadableStream and Node.js streams\n        const isStream =\n          (typeof ReadableStream !== 'undefined' && body instanceof ReadableStream) ||\n          (body && typeof body === 'object' && 'pipe' in body && typeof body.pipe === 'function')\n\n        if (isStream && !options.duplex) {\n          options.duplex = 'half'\n        }\n      }\n\n      if (fileOptions?.headers) {\n        headers = { ...headers, ...fileOptions.headers }\n      }\n\n      const cleanPath = this._removeEmptyFolders(path)\n      const _path = this._getFinalPath(cleanPath)\n      const data = await (method == 'PUT' ? put : post)(\n        this.fetch,\n        `${this.url}/object/${_path}`,\n        body as object,\n        { headers, ...(options?.duplex ? { duplex: options.duplex } : {}) }\n      )\n\n      return { path: cleanPath, id: data.Id, fullPath: data.Key }\n    })\n  }\n\n  /**\n   * Uploads a file to an existing bucket.\n   *\n   * @category File Buckets\n   * @param path The file path, including the file name. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n   * @param fileBody The body of the file to be stored in the bucket.\n   * @param fileOptions Optional file upload options including cacheControl, contentType, upsert, and metadata.\n   * @returns Promise with response containing file path, id, and fullPath or error\n   *\n   * @example Upload file\n   * ```js\n   * const avatarFile = event.target.files[0]\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .upload('public/avatar1.png', avatarFile, {\n   *     cacheControl: '3600',\n   *     upsert: false\n   *   })\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"path\": \"public/avatar1.png\",\n   *     \"fullPath\": \"avatars/public/avatar1.png\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   *\n   * @example Upload file using `ArrayBuffer` from base64 file data\n   * ```js\n   * import { decode } from 'base64-arraybuffer'\n   *\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .upload('public/avatar1.png', decode('base64FileData'), {\n   *     contentType: 'image/png'\n   *   })\n   * ```\n   */\n  async upload(\n    path: string,\n    fileBody: FileBody,\n    fileOptions?: FileOptions\n  ): Promise<\n    | {\n        data: { id: string; path: string; fullPath: string }\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.uploadOrUpdate('POST', path, fileBody, fileOptions)\n  }\n\n  /**\n   * Upload a file with a token generated from `createSignedUploadUrl`.\n   *\n   * @category File Buckets\n   * @param path The file path, including the file name. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n   * @param token The token generated from `createSignedUploadUrl`\n   * @param fileBody The body of the file to be stored in the bucket.\n   * @param fileOptions HTTP headers (cacheControl, contentType, etc.).\n   * **Note:** The `upsert` option has no effect here. To enable upsert behavior,\n   * pass `{ upsert: true }` when calling `createSignedUploadUrl()` instead.\n   * @returns Promise with response containing file path and fullPath or error\n   *\n   * @example Upload to a signed URL\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .uploadToSignedUrl('folder/cat.jpg', 'token-from-createSignedUploadUrl', file)\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"path\": \"folder/cat.jpg\",\n   *     \"fullPath\": \"avatars/folder/cat.jpg\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async uploadToSignedUrl(\n    path: string,\n    token: string,\n    fileBody: FileBody,\n    fileOptions?: FileOptions\n  ) {\n    const cleanPath = this._removeEmptyFolders(path)\n    const _path = this._getFinalPath(cleanPath)\n\n    const url = new URL(this.url + `/object/upload/sign/${_path}`)\n    url.searchParams.set('token', token)\n\n    return this.handleOperation(async () => {\n      let body\n      const options = { upsert: DEFAULT_FILE_OPTIONS.upsert, ...fileOptions }\n      const headers: Record<string, string> = {\n        ...this.headers,\n        ...{ 'x-upsert': String(options.upsert as boolean) },\n      }\n\n      if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n        body = new FormData()\n        body.append('cacheControl', options.cacheControl as string)\n        body.append('', fileBody)\n      } else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n        body = fileBody\n        body.append('cacheControl', options.cacheControl as string)\n      } else {\n        body = fileBody\n        headers['cache-control'] = `max-age=${options.cacheControl}`\n        headers['content-type'] = options.contentType as string\n      }\n\n      const data = await put(this.fetch, url.toString(), body as object, { headers })\n\n      return { path: cleanPath, fullPath: data.Key }\n    })\n  }\n\n  /**\n   * Creates a signed upload URL.\n   * Signed upload URLs can be used to upload files to the bucket without further authentication.\n   * They are valid for 2 hours.\n   *\n   * @category File Buckets\n   * @param path The file path, including the current file name. For example `folder/image.png`.\n   * @param options.upsert If set to true, allows the file to be overwritten if it already exists.\n   * @returns Promise with response containing signed upload URL, token, and path or error\n   *\n   * @example Create Signed Upload URL\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .createSignedUploadUrl('folder/cat.jpg')\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"signedUrl\": \"https://example.supabase.co/storage/v1/object/upload/sign/avatars/folder/cat.jpg?token=<TOKEN>\",\n   *     \"path\": \"folder/cat.jpg\",\n   *     \"token\": \"<TOKEN>\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async createSignedUploadUrl(\n    path: string,\n    options?: { upsert: boolean }\n  ): Promise<\n    | {\n        data: { signedUrl: string; token: string; path: string }\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      let _path = this._getFinalPath(path)\n\n      const headers = { ...this.headers }\n\n      if (options?.upsert) {\n        headers['x-upsert'] = 'true'\n      }\n\n      const data = await post(\n        this.fetch,\n        `${this.url}/object/upload/sign/${_path}`,\n        {},\n        { headers }\n      )\n\n      const url = new URL(this.url + data.url)\n\n      const token = url.searchParams.get('token')\n\n      if (!token) {\n        throw new StorageError('No token returned by API')\n      }\n\n      return { signedUrl: url.toString(), path, token }\n    })\n  }\n\n  /**\n   * Replaces an existing file at the specified path with a new one.\n   *\n   * @category File Buckets\n   * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to update.\n   * @param fileBody The body of the file to be stored in the bucket.\n   * @param fileOptions Optional file upload options including cacheControl, contentType, upsert, and metadata.\n   * @returns Promise with response containing file path, id, and fullPath or error\n   *\n   * @example Update file\n   * ```js\n   * const avatarFile = event.target.files[0]\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .update('public/avatar1.png', avatarFile, {\n   *     cacheControl: '3600',\n   *     upsert: true\n   *   })\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"path\": \"public/avatar1.png\",\n   *     \"fullPath\": \"avatars/public/avatar1.png\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   *\n   * @example Update file using `ArrayBuffer` from base64 file data\n   * ```js\n   * import {decode} from 'base64-arraybuffer'\n   *\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .update('public/avatar1.png', decode('base64FileData'), {\n   *     contentType: 'image/png'\n   *   })\n   * ```\n   */\n  async update(\n    path: string,\n    fileBody:\n      | ArrayBuffer\n      | ArrayBufferView\n      | Blob\n      | Buffer\n      | File\n      | FormData\n      | NodeJS.ReadableStream\n      | ReadableStream<Uint8Array>\n      | URLSearchParams\n      | string,\n    fileOptions?: FileOptions\n  ): Promise<\n    | {\n        data: { id: string; path: string; fullPath: string }\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.uploadOrUpdate('PUT', path, fileBody, fileOptions)\n  }\n\n  /**\n   * Moves an existing file to a new path in the same bucket.\n   *\n   * @category File Buckets\n   * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n   * @param toPath The new file path, including the new file name. For example `folder/image-new.png`.\n   * @param options The destination options.\n   * @returns Promise with response containing success message or error\n   *\n   * @example Move file\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .move('public/avatar1.png', 'private/avatar2.png')\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"message\": \"Successfully moved\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async move(\n    fromPath: string,\n    toPath: string,\n    options?: DestinationOptions\n  ): Promise<\n    | {\n        data: { message: string }\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      return await post(\n        this.fetch,\n        `${this.url}/object/move`,\n        {\n          bucketId: this.bucketId,\n          sourceKey: fromPath,\n          destinationKey: toPath,\n          destinationBucket: options?.destinationBucket,\n        },\n        { headers: this.headers }\n      )\n    })\n  }\n\n  /**\n   * Copies an existing file to a new path in the same bucket.\n   *\n   * @category File Buckets\n   * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n   * @param toPath The new file path, including the new file name. For example `folder/image-copy.png`.\n   * @param options The destination options.\n   * @returns Promise with response containing copied file path or error\n   *\n   * @example Copy file\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .copy('public/avatar1.png', 'private/avatar2.png')\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"path\": \"avatars/private/avatar2.png\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async copy(\n    fromPath: string,\n    toPath: string,\n    options?: DestinationOptions\n  ): Promise<\n    | {\n        data: { path: string }\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      const data = await post(\n        this.fetch,\n        `${this.url}/object/copy`,\n        {\n          bucketId: this.bucketId,\n          sourceKey: fromPath,\n          destinationKey: toPath,\n          destinationBucket: options?.destinationBucket,\n        },\n        { headers: this.headers }\n      )\n      return { path: data.Key }\n    })\n  }\n\n  /**\n   * Creates a signed URL. Use a signed URL to share a file for a fixed amount of time.\n   *\n   * @category File Buckets\n   * @param path The file path, including the current file name. For example `folder/image.png`.\n   * @param expiresIn The number of seconds until the signed URL expires. For example, `60` for a URL which is valid for one minute.\n   * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n   * @param options.transform Transform the asset before serving it to the client.\n   * @returns Promise with response containing signed URL or error\n   *\n   * @example Create Signed URL\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .createSignedUrl('folder/avatar1.png', 60)\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"signedUrl\": \"https://example.supabase.co/storage/v1/object/sign/avatars/folder/avatar1.png?token=<TOKEN>\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   *\n   * @example Create a signed URL for an asset with transformations\n   * ```js\n   * const { data } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .createSignedUrl('folder/avatar1.png', 60, {\n   *     transform: {\n   *       width: 100,\n   *       height: 100,\n   *     }\n   *   })\n   * ```\n   *\n   * @example Create a signed URL which triggers the download of the asset\n   * ```js\n   * const { data } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .createSignedUrl('folder/avatar1.png', 60, {\n   *     download: true,\n   *   })\n   * ```\n   */\n  async createSignedUrl(\n    path: string,\n    expiresIn: number,\n    options?: { download?: string | boolean; transform?: TransformOptions }\n  ): Promise<\n    | {\n        data: { signedUrl: string }\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      let _path = this._getFinalPath(path)\n\n      let data = await post(\n        this.fetch,\n        `${this.url}/object/sign/${_path}`,\n        { expiresIn, ...(options?.transform ? { transform: options.transform } : {}) },\n        { headers: this.headers }\n      )\n      const downloadQueryParam = options?.download\n        ? `&download=${options.download === true ? '' : options.download}`\n        : ''\n      const signedUrl = encodeURI(`${this.url}${data.signedURL}${downloadQueryParam}`)\n      return { signedUrl }\n    })\n  }\n\n  /**\n   * Creates multiple signed URLs. Use a signed URL to share a file for a fixed amount of time.\n   *\n   * @category File Buckets\n   * @param paths The file paths to be downloaded, including the current file names. For example `['folder/image.png', 'folder2/image2.png']`.\n   * @param expiresIn The number of seconds until the signed URLs expire. For example, `60` for URLs which are valid for one minute.\n   * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n   * @returns Promise with response containing array of objects with signedUrl, path, and error or error\n   *\n   * @example Create Signed URLs\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .createSignedUrls(['folder/avatar1.png', 'folder/avatar2.png'], 60)\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": [\n   *     {\n   *       \"error\": null,\n   *       \"path\": \"folder/avatar1.png\",\n   *       \"signedURL\": \"/object/sign/avatars/folder/avatar1.png?token=<TOKEN>\",\n   *       \"signedUrl\": \"https://example.supabase.co/storage/v1/object/sign/avatars/folder/avatar1.png?token=<TOKEN>\"\n   *     },\n   *     {\n   *       \"error\": null,\n   *       \"path\": \"folder/avatar2.png\",\n   *       \"signedURL\": \"/object/sign/avatars/folder/avatar2.png?token=<TOKEN>\",\n   *       \"signedUrl\": \"https://example.supabase.co/storage/v1/object/sign/avatars/folder/avatar2.png?token=<TOKEN>\"\n   *     }\n   *   ],\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async createSignedUrls(\n    paths: string[],\n    expiresIn: number,\n    options?: { download: string | boolean }\n  ): Promise<\n    | {\n        data: { error: string | null; path: string | null; signedUrl: string }[]\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      const data = await post(\n        this.fetch,\n        `${this.url}/object/sign/${this.bucketId}`,\n        { expiresIn, paths },\n        { headers: this.headers }\n      )\n\n      const downloadQueryParam = options?.download\n        ? `&download=${options.download === true ? '' : options.download}`\n        : ''\n      return data.map((datum: { signedURL: string }) => ({\n        ...datum,\n        signedUrl: datum.signedURL\n          ? encodeURI(`${this.url}${datum.signedURL}${downloadQueryParam}`)\n          : null,\n      }))\n    })\n  }\n\n  /**\n   * Downloads a file from a private bucket. For public buckets, make a request to the URL returned from `getPublicUrl` instead.\n   *\n   * @category File Buckets\n   * @param path The full path and file name of the file to be downloaded. For example `folder/image.png`.\n   * @param options.transform Transform the asset before serving it to the client.\n   * @param parameters Additional fetch parameters like signal for cancellation. Supports standard fetch options including cache control.\n   * @returns BlobDownloadBuilder instance for downloading the file\n   *\n   * @example Download file\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .download('folder/avatar1.png')\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": <BLOB>,\n   *   \"error\": null\n   * }\n   * ```\n   *\n   * @example Download file with transformations\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .download('folder/avatar1.png', {\n   *     transform: {\n   *       width: 100,\n   *       height: 100,\n   *       quality: 80\n   *     }\n   *   })\n   * ```\n   *\n   * @example Download with cache control (useful in Edge Functions)\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .download('folder/avatar1.png', {}, { cache: 'no-store' })\n   * ```\n   *\n   * @example Download with abort signal\n   * ```js\n   * const controller = new AbortController()\n   * setTimeout(() => controller.abort(), 5000)\n   *\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .download('folder/avatar1.png', {}, { signal: controller.signal })\n   * ```\n   */\n  download<Options extends { transform?: TransformOptions }>(\n    path: string,\n    options?: Options,\n    parameters?: FetchParameters\n  ): BlobDownloadBuilder {\n    const wantsTransformation = typeof options?.transform !== 'undefined'\n    const renderPath = wantsTransformation ? 'render/image/authenticated' : 'object'\n    const transformationQuery = this.transformOptsToQueryString(options?.transform || {})\n    const queryString = transformationQuery ? `?${transformationQuery}` : ''\n    const _path = this._getFinalPath(path)\n    const downloadFn = () =>\n      get(\n        this.fetch,\n        `${this.url}/${renderPath}/${_path}${queryString}`,\n        {\n          headers: this.headers,\n          noResolveJson: true,\n        },\n        parameters\n      )\n    return new BlobDownloadBuilder(downloadFn, this.shouldThrowOnError)\n  }\n\n  /**\n   * Retrieves the details of an existing file.\n   *\n   * @category File Buckets\n   * @param path The file path, including the file name. For example `folder/image.png`.\n   * @returns Promise with response containing file metadata or error\n   *\n   * @example Get file info\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .info('folder/avatar1.png')\n   * ```\n   */\n  async info(path: string): Promise<\n    | {\n        data: Camelize<FileObjectV2>\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    const _path = this._getFinalPath(path)\n\n    return this.handleOperation(async () => {\n      const data = await get(this.fetch, `${this.url}/object/info/${_path}`, {\n        headers: this.headers,\n      })\n\n      return recursiveToCamel(data) as Camelize<FileObjectV2>\n    })\n  }\n\n  /**\n   * Checks the existence of a file.\n   *\n   * @category File Buckets\n   * @param path The file path, including the file name. For example `folder/image.png`.\n   * @returns Promise with response containing boolean indicating file existence or error\n   *\n   * @example Check file existence\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .exists('folder/avatar1.png')\n   * ```\n   */\n  async exists(path: string): Promise<\n    | {\n        data: boolean\n        error: null\n      }\n    | {\n        data: boolean\n        error: StorageError\n      }\n  > {\n    const _path = this._getFinalPath(path)\n\n    try {\n      await head(this.fetch, `${this.url}/object/${_path}`, {\n        headers: this.headers,\n      })\n\n      return { data: true, error: null }\n    } catch (error) {\n      if (this.shouldThrowOnError) {\n        throw error\n      }\n      if (isStorageError(error) && error instanceof StorageUnknownError) {\n        const originalError = error.originalError as unknown as { status: number }\n\n        if ([400, 404].includes(originalError?.status)) {\n          return { data: false, error }\n        }\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * A simple convenience function to get the URL for an asset in a public bucket. If you do not want to use this function, you can construct the public URL by concatenating the bucket URL with the path to the asset.\n   * This function does not verify if the bucket is public. If a public URL is created for a bucket which is not public, you will not be able to download the asset.\n   *\n   * @category File Buckets\n   * @param path The path and name of the file to generate the public URL for. For example `folder/image.png`.\n   * @param options.download Triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n   * @param options.transform Transform the asset before serving it to the client.\n   * @returns Object with public URL\n   *\n   * @example Returns the URL for an asset in a public bucket\n   * ```js\n   * const { data } = supabase\n   *   .storage\n   *   .from('public-bucket')\n   *   .getPublicUrl('folder/avatar1.png')\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"publicUrl\": \"https://example.supabase.co/storage/v1/object/public/public-bucket/folder/avatar1.png\"\n   *   }\n   * }\n   * ```\n   *\n   * @example Returns the URL for an asset in a public bucket with transformations\n   * ```js\n   * const { data } = supabase\n   *   .storage\n   *   .from('public-bucket')\n   *   .getPublicUrl('folder/avatar1.png', {\n   *     transform: {\n   *       width: 100,\n   *       height: 100,\n   *     }\n   *   })\n   * ```\n   *\n   * @example Returns the URL which triggers the download of an asset in a public bucket\n   * ```js\n   * const { data } = supabase\n   *   .storage\n   *   .from('public-bucket')\n   *   .getPublicUrl('folder/avatar1.png', {\n   *     download: true,\n   *   })\n   * ```\n   */\n  getPublicUrl(\n    path: string,\n    options?: { download?: string | boolean; transform?: TransformOptions }\n  ): { data: { publicUrl: string } } {\n    const _path = this._getFinalPath(path)\n    const _queryString: string[] = []\n\n    const downloadQueryParam = options?.download\n      ? `download=${options.download === true ? '' : options.download}`\n      : ''\n\n    if (downloadQueryParam !== '') {\n      _queryString.push(downloadQueryParam)\n    }\n\n    const wantsTransformation = typeof options?.transform !== 'undefined'\n    const renderPath = wantsTransformation ? 'render/image' : 'object'\n    const transformationQuery = this.transformOptsToQueryString(options?.transform || {})\n\n    if (transformationQuery !== '') {\n      _queryString.push(transformationQuery)\n    }\n\n    let queryString = _queryString.join('&')\n    if (queryString !== '') {\n      queryString = `?${queryString}`\n    }\n\n    return {\n      data: { publicUrl: encodeURI(`${this.url}/${renderPath}/public/${_path}${queryString}`) },\n    }\n  }\n\n  /**\n   * Deletes files within the same bucket\n   *\n   * @category File Buckets\n   * @param paths An array of files to delete, including the path and file name. For example [`'folder/image.png'`].\n   * @returns Promise with response containing array of deleted file objects or error\n   *\n   * @example Delete file\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .remove(['folder/avatar1.png'])\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": [],\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async remove(paths: string[]): Promise<\n    | {\n        data: FileObject[]\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      return await remove(\n        this.fetch,\n        `${this.url}/object/${this.bucketId}`,\n        { prefixes: paths },\n        { headers: this.headers }\n      )\n    })\n  }\n\n  /**\n   * Get file metadata\n   * @param id the file id to retrieve metadata\n   */\n  // async getMetadata(\n  //   id: string\n  // ): Promise<\n  //   | {\n  //       data: Metadata\n  //       error: null\n  //     }\n  //   | {\n  //       data: null\n  //       error: StorageError\n  //     }\n  // > {\n  //   try {\n  //     const data = await get(this.fetch, `${this.url}/metadata/${id}`, { headers: this.headers })\n  //     return { data, error: null }\n  //   } catch (error) {\n  //     if (isStorageError(error)) {\n  //       return { data: null, error }\n  //     }\n\n  //     throw error\n  //   }\n  // }\n\n  /**\n   * Update file metadata\n   * @param id the file id to update metadata\n   * @param meta the new file metadata\n   */\n  // async updateMetadata(\n  //   id: string,\n  //   meta: Metadata\n  // ): Promise<\n  //   | {\n  //       data: Metadata\n  //       error: null\n  //     }\n  //   | {\n  //       data: null\n  //       error: StorageError\n  //     }\n  // > {\n  //   try {\n  //     const data = await post(\n  //       this.fetch,\n  //       `${this.url}/metadata/${id}`,\n  //       { ...meta },\n  //       { headers: this.headers }\n  //     )\n  //     return { data, error: null }\n  //   } catch (error) {\n  //     if (isStorageError(error)) {\n  //       return { data: null, error }\n  //     }\n\n  //     throw error\n  //   }\n  // }\n\n  /**\n   * Lists all the files and folders within a path of the bucket.\n   *\n   * @category File Buckets\n   * @param path The folder path.\n   * @param options Search options including limit (defaults to 100), offset, sortBy, and search\n   * @param parameters Optional fetch parameters including signal for cancellation\n   * @returns Promise with response containing array of files or error\n   *\n   * @example List files in a bucket\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .list('folder', {\n   *     limit: 100,\n   *     offset: 0,\n   *     sortBy: { column: 'name', order: 'asc' },\n   *   })\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": [\n   *     {\n   *       \"name\": \"avatar1.png\",\n   *       \"id\": \"e668cf7f-821b-4a2f-9dce-7dfa5dd1cfd2\",\n   *       \"updated_at\": \"2024-05-22T23:06:05.580Z\",\n   *       \"created_at\": \"2024-05-22T23:04:34.443Z\",\n   *       \"last_accessed_at\": \"2024-05-22T23:04:34.443Z\",\n   *       \"metadata\": {\n   *         \"eTag\": \"\\\"c5e8c553235d9af30ef4f6e280790b92\\\"\",\n   *         \"size\": 32175,\n   *         \"mimetype\": \"image/png\",\n   *         \"cacheControl\": \"max-age=3600\",\n   *         \"lastModified\": \"2024-05-22T23:06:05.574Z\",\n   *         \"contentLength\": 32175,\n   *         \"httpStatusCode\": 200\n   *       }\n   *     }\n   *   ],\n   *   \"error\": null\n   * }\n   * ```\n   *\n   * @example Search files in a bucket\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .from('avatars')\n   *   .list('folder', {\n   *     limit: 100,\n   *     offset: 0,\n   *     sortBy: { column: 'name', order: 'asc' },\n   *     search: 'jon'\n   *   })\n   * ```\n   */\n  async list(\n    path?: string,\n    options?: SearchOptions,\n    parameters?: FetchParameters\n  ): Promise<\n    | {\n        data: FileObject[]\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      const body = { ...DEFAULT_SEARCH_OPTIONS, ...options, prefix: path || '' }\n      return await post(\n        this.fetch,\n        `${this.url}/object/list/${this.bucketId}`,\n        body,\n        { headers: this.headers },\n        parameters\n      )\n    })\n  }\n\n  /**\n   * @experimental this method signature might change in the future\n   *\n   * @category File Buckets\n   * @param options search options\n   * @param parameters\n   */\n  async listV2(\n    options?: SearchV2Options,\n    parameters?: FetchParameters\n  ): Promise<\n    | {\n        data: SearchV2Result\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      const body = { ...options }\n      return await post(\n        this.fetch,\n        `${this.url}/object/list-v2/${this.bucketId}`,\n        body,\n        { headers: this.headers },\n        parameters\n      )\n    })\n  }\n\n  protected encodeMetadata(metadata: Record<string, any>) {\n    return JSON.stringify(metadata)\n  }\n\n  toBase64(data: string) {\n    if (typeof Buffer !== 'undefined') {\n      return Buffer.from(data).toString('base64')\n    }\n    return btoa(data)\n  }\n\n  private _getFinalPath(path: string) {\n    return `${this.bucketId}/${path.replace(/^\\/+/, '')}`\n  }\n\n  private _removeEmptyFolders(path: string) {\n    return path.replace(/^\\/|\\/$/g, '').replace(/\\/+/g, '/')\n  }\n\n  private transformOptsToQueryString(transform: TransformOptions) {\n    const params: string[] = []\n    if (transform.width) {\n      params.push(`width=${transform.width}`)\n    }\n\n    if (transform.height) {\n      params.push(`height=${transform.height}`)\n    }\n\n    if (transform.resize) {\n      params.push(`resize=${transform.resize}`)\n    }\n\n    if (transform.format) {\n      params.push(`format=${transform.format}`)\n    }\n\n    if (transform.quality) {\n      params.push(`quality=${transform.quality}`)\n    }\n\n    return params.join('&')\n  }\n}\n","// Generated automatically during releases by scripts/update-version-files.ts\n// This file provides runtime access to the package version for:\n// - HTTP request headers (e.g., X-Client-Info header for API requests)\n// - Debugging and support (identifying which version is running)\n// - Telemetry and logging (version reporting in errors/analytics)\n// - Ensuring build artifacts match the published package version\nexport const version = '2.97.0'\n","import { version } from './version'\nexport const DEFAULT_HEADERS = {\n  'X-Client-Info': `storage-js/${version}`,\n}\n","import { DEFAULT_HEADERS } from '../lib/constants'\nimport { StorageError } from '../lib/common/errors'\nimport { Fetch, get, post, put, remove } from '../lib/common/fetch'\nimport BaseApiClient from '../lib/common/BaseApiClient'\nimport { Bucket, BucketType, ListBucketOptions } from '../lib/types'\nimport { StorageClientOptions } from '../StorageClient'\n\nexport default class StorageBucketApi extends BaseApiClient<StorageError> {\n  constructor(\n    url: string,\n    headers: { [key: string]: string } = {},\n    fetch?: Fetch,\n    opts?: StorageClientOptions\n  ) {\n    const baseUrl = new URL(url)\n\n    // if legacy uri is used, replace with new storage host (disables request buffering to allow > 50GB uploads)\n    // \"project-ref.supabase.co\" becomes \"project-ref.storage.supabase.co\"\n    if (opts?.useNewHostname) {\n      const isSupabaseHost = /supabase\\.(co|in|red)$/.test(baseUrl.hostname)\n      if (isSupabaseHost && !baseUrl.hostname.includes('storage.supabase.')) {\n        baseUrl.hostname = baseUrl.hostname.replace('supabase.', 'storage.supabase.')\n      }\n    }\n\n    const finalUrl = baseUrl.href.replace(/\\/$/, '')\n    const finalHeaders = { ...DEFAULT_HEADERS, ...headers }\n\n    super(finalUrl, finalHeaders, fetch, 'storage')\n  }\n\n  /**\n   * Retrieves the details of all Storage buckets within an existing project.\n   *\n   * @category File Buckets\n   * @param options Query parameters for listing buckets\n   * @param options.limit Maximum number of buckets to return\n   * @param options.offset Number of buckets to skip\n   * @param options.sortColumn Column to sort by ('id', 'name', 'created_at', 'updated_at')\n   * @param options.sortOrder Sort order ('asc' or 'desc')\n   * @param options.search Search term to filter bucket names\n   * @returns Promise with response containing array of buckets or error\n   *\n   * @example List buckets\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .listBuckets()\n   * ```\n   *\n   * @example List buckets with options\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .listBuckets({\n   *     limit: 10,\n   *     offset: 0,\n   *     sortColumn: 'created_at',\n   *     sortOrder: 'desc',\n   *     search: 'prod'\n   *   })\n   * ```\n   */\n  async listBuckets(options?: ListBucketOptions): Promise<\n    | {\n        data: Bucket[]\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      const queryString = this.listBucketOptionsToQueryString(options)\n      return await get(this.fetch, `${this.url}/bucket${queryString}`, {\n        headers: this.headers,\n      })\n    })\n  }\n\n  /**\n   * Retrieves the details of an existing Storage bucket.\n   *\n   * @category File Buckets\n   * @param id The unique identifier of the bucket you would like to retrieve.\n   * @returns Promise with response containing bucket details or error\n   *\n   * @example Get bucket\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .getBucket('avatars')\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"id\": \"avatars\",\n   *     \"name\": \"avatars\",\n   *     \"owner\": \"\",\n   *     \"public\": false,\n   *     \"file_size_limit\": 1024,\n   *     \"allowed_mime_types\": [\n   *       \"image/png\"\n   *     ],\n   *     \"created_at\": \"2024-05-22T22:26:05.100Z\",\n   *     \"updated_at\": \"2024-05-22T22:26:05.100Z\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async getBucket(id: string): Promise<\n    | {\n        data: Bucket\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      return await get(this.fetch, `${this.url}/bucket/${id}`, { headers: this.headers })\n    })\n  }\n\n  /**\n   * Creates a new Storage bucket\n   *\n   * @category File Buckets\n   * @param id A unique identifier for the bucket you are creating.\n   * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations. By default, buckets are private.\n   * @param options.fileSizeLimit specifies the max file size in bytes that can be uploaded to this bucket.\n   * The global file size limit takes precedence over this value.\n   * The default value is null, which doesn't set a per bucket file size limit.\n   * @param options.allowedMimeTypes specifies the allowed mime types that this bucket can accept during upload.\n   * The default value is null, which allows files with all mime types to be uploaded.\n   * Each mime type specified can be a wildcard, e.g. image/*, or a specific mime type, e.g. image/png.\n   * @param options.type (private-beta) specifies the bucket type. see `BucketType` for more details.\n   *   - default bucket type is `STANDARD`\n   * @returns Promise with response containing newly created bucket name or error\n   *\n   * @example Create bucket\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .createBucket('avatars', {\n   *     public: false,\n   *     allowedMimeTypes: ['image/png'],\n   *     fileSizeLimit: 1024\n   *   })\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"name\": \"avatars\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async createBucket(\n    id: string,\n    options: {\n      public: boolean\n      fileSizeLimit?: number | string | null\n      allowedMimeTypes?: string[] | null\n      type?: BucketType\n    } = {\n      public: false,\n    }\n  ): Promise<\n    | {\n        data: Pick<Bucket, 'name'>\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      return await post(\n        this.fetch,\n        `${this.url}/bucket`,\n        {\n          id,\n          name: id,\n          type: options.type,\n          public: options.public,\n          file_size_limit: options.fileSizeLimit,\n          allowed_mime_types: options.allowedMimeTypes,\n        },\n        { headers: this.headers }\n      )\n    })\n  }\n\n  /**\n   * Updates a Storage bucket\n   *\n   * @category File Buckets\n   * @param id A unique identifier for the bucket you are updating.\n   * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations.\n   * @param options.fileSizeLimit specifies the max file size in bytes that can be uploaded to this bucket.\n   * The global file size limit takes precedence over this value.\n   * The default value is null, which doesn't set a per bucket file size limit.\n   * @param options.allowedMimeTypes specifies the allowed mime types that this bucket can accept during upload.\n   * The default value is null, which allows files with all mime types to be uploaded.\n   * Each mime type specified can be a wildcard, e.g. image/*, or a specific mime type, e.g. image/png.\n   * @returns Promise with response containing success message or error\n   *\n   * @example Update bucket\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .updateBucket('avatars', {\n   *     public: false,\n   *     allowedMimeTypes: ['image/png'],\n   *     fileSizeLimit: 1024\n   *   })\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"message\": \"Successfully updated\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async updateBucket(\n    id: string,\n    options: {\n      public: boolean\n      fileSizeLimit?: number | string | null\n      allowedMimeTypes?: string[] | null\n    }\n  ): Promise<\n    | {\n        data: { message: string }\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      return await put(\n        this.fetch,\n        `${this.url}/bucket/${id}`,\n        {\n          id,\n          name: id,\n          public: options.public,\n          file_size_limit: options.fileSizeLimit,\n          allowed_mime_types: options.allowedMimeTypes,\n        },\n        { headers: this.headers }\n      )\n    })\n  }\n\n  /**\n   * Removes all objects inside a single bucket.\n   *\n   * @category File Buckets\n   * @param id The unique identifier of the bucket you would like to empty.\n   * @returns Promise with success message or error\n   *\n   * @example Empty bucket\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .emptyBucket('avatars')\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"message\": \"Successfully emptied\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async emptyBucket(id: string): Promise<\n    | {\n        data: { message: string }\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      return await post(this.fetch, `${this.url}/bucket/${id}/empty`, {}, { headers: this.headers })\n    })\n  }\n\n  /**\n   * Deletes an existing bucket. A bucket can't be deleted with existing objects inside it.\n   * You must first `empty()` the bucket.\n   *\n   * @category File Buckets\n   * @param id The unique identifier of the bucket you would like to delete.\n   * @returns Promise with success message or error\n   *\n   * @example Delete bucket\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .deleteBucket('avatars')\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"message\": \"Successfully deleted\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async deleteBucket(id: string): Promise<\n    | {\n        data: { message: string }\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      return await remove(this.fetch, `${this.url}/bucket/${id}`, {}, { headers: this.headers })\n    })\n  }\n\n  private listBucketOptionsToQueryString(options?: ListBucketOptions): string {\n    const params: Record<string, string> = {}\n    if (options) {\n      if ('limit' in options) {\n        params.limit = String(options.limit)\n      }\n      if ('offset' in options) {\n        params.offset = String(options.offset)\n      }\n      if (options.search) {\n        params.search = options.search\n      }\n      if (options.sortColumn) {\n        params.sortColumn = options.sortColumn\n      }\n      if (options.sortOrder) {\n        params.sortOrder = options.sortOrder\n      }\n    }\n    return Object.keys(params).length > 0 ? '?' + new URLSearchParams(params).toString() : ''\n  }\n}\n","import { IcebergRestCatalog, IcebergError } from 'iceberg-js'\nimport { DEFAULT_HEADERS } from '../lib/constants'\nimport { StorageError } from '../lib/common/errors'\nimport { Fetch, get, post, remove } from '../lib/common/fetch'\nimport { isValidBucketName } from '../lib/common/helpers'\nimport BaseApiClient from '../lib/common/BaseApiClient'\nimport { AnalyticBucket } from '../lib/types'\n\ntype WrapAsyncMethod<T> = T extends (...args: infer A) => Promise<infer R>\n  ? (...args: A) => Promise<{ data: R; error: null } | { data: null; error: IcebergError }>\n  : T\n\nexport type WrappedIcebergRestCatalog = {\n  [K in keyof IcebergRestCatalog]: WrapAsyncMethod<IcebergRestCatalog[K]>\n}\n\n/**\n * Client class for managing Analytics Buckets using Iceberg tables\n * Provides methods for creating, listing, and deleting analytics buckets\n */\nexport default class StorageAnalyticsClient extends BaseApiClient<StorageError> {\n  /**\n   * @alpha\n   *\n   * Creates a new StorageAnalyticsClient instance\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Analytics Buckets\n   * @param url - The base URL for the storage API\n   * @param headers - HTTP headers to include in requests\n   * @param fetch - Optional custom fetch implementation\n   *\n   * @example\n   * ```typescript\n   * const client = new StorageAnalyticsClient(url, headers)\n   * ```\n   */\n  constructor(url: string, headers: { [key: string]: string } = {}, fetch?: Fetch) {\n    const finalUrl = url.replace(/\\/$/, '')\n    const finalHeaders = { ...DEFAULT_HEADERS, ...headers }\n    super(finalUrl, finalHeaders, fetch, 'storage')\n  }\n\n  /**\n   * @alpha\n   *\n   * Creates a new analytics bucket using Iceberg tables\n   * Analytics buckets are optimized for analytical queries and data processing\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Analytics Buckets\n   * @param name A unique name for the bucket you are creating\n   * @returns Promise with response containing newly created analytics bucket or error\n   *\n   * @example Create analytics bucket\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .analytics\n   *   .createBucket('analytics-data')\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"name\": \"analytics-data\",\n   *     \"type\": \"ANALYTICS\",\n   *     \"format\": \"iceberg\",\n   *     \"created_at\": \"2024-05-22T22:26:05.100Z\",\n   *     \"updated_at\": \"2024-05-22T22:26:05.100Z\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async createBucket(name: string): Promise<\n    | {\n        data: AnalyticBucket\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      return await post(this.fetch, `${this.url}/bucket`, { name }, { headers: this.headers })\n    })\n  }\n\n  /**\n   * @alpha\n   *\n   * Retrieves the details of all Analytics Storage buckets within an existing project\n   * Only returns buckets of type 'ANALYTICS'\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Analytics Buckets\n   * @param options Query parameters for listing buckets\n   * @param options.limit Maximum number of buckets to return\n   * @param options.offset Number of buckets to skip\n   * @param options.sortColumn Column to sort by ('name', 'created_at', 'updated_at')\n   * @param options.sortOrder Sort order ('asc' or 'desc')\n   * @param options.search Search term to filter bucket names\n   * @returns Promise with response containing array of analytics buckets or error\n   *\n   * @example List analytics buckets\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .analytics\n   *   .listBuckets({\n   *     limit: 10,\n   *     offset: 0,\n   *     sortColumn: 'created_at',\n   *     sortOrder: 'desc'\n   *   })\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": [\n   *     {\n   *       \"name\": \"analytics-data\",\n   *       \"type\": \"ANALYTICS\",\n   *       \"format\": \"iceberg\",\n   *       \"created_at\": \"2024-05-22T22:26:05.100Z\",\n   *       \"updated_at\": \"2024-05-22T22:26:05.100Z\"\n   *     }\n   *   ],\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async listBuckets(options?: {\n    limit?: number\n    offset?: number\n    sortColumn?: 'name' | 'created_at' | 'updated_at'\n    sortOrder?: 'asc' | 'desc'\n    search?: string\n  }): Promise<\n    | {\n        data: AnalyticBucket[]\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      // Build query string from options\n      const queryParams = new URLSearchParams()\n      if (options?.limit !== undefined) queryParams.set('limit', options.limit.toString())\n      if (options?.offset !== undefined) queryParams.set('offset', options.offset.toString())\n      if (options?.sortColumn) queryParams.set('sortColumn', options.sortColumn)\n      if (options?.sortOrder) queryParams.set('sortOrder', options.sortOrder)\n      if (options?.search) queryParams.set('search', options.search)\n\n      const queryString = queryParams.toString()\n      const url = queryString ? `${this.url}/bucket?${queryString}` : `${this.url}/bucket`\n\n      return await get(this.fetch, url, { headers: this.headers })\n    })\n  }\n\n  /**\n   * @alpha\n   *\n   * Deletes an existing analytics bucket\n   * A bucket can't be deleted with existing objects inside it\n   * You must first empty the bucket before deletion\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Analytics Buckets\n   * @param bucketName The unique identifier of the bucket you would like to delete\n   * @returns Promise with response containing success message or error\n   *\n   * @example Delete analytics bucket\n   * ```js\n   * const { data, error } = await supabase\n   *   .storage\n   *   .analytics\n   *   .deleteBucket('analytics-data')\n   * ```\n   *\n   * Response:\n   * ```json\n   * {\n   *   \"data\": {\n   *     \"message\": \"Successfully deleted\"\n   *   },\n   *   \"error\": null\n   * }\n   * ```\n   */\n  async deleteBucket(bucketName: string): Promise<\n    | {\n        data: { message: string }\n        error: null\n      }\n    | {\n        data: null\n        error: StorageError\n      }\n  > {\n    return this.handleOperation(async () => {\n      return await remove(\n        this.fetch,\n        `${this.url}/bucket/${bucketName}`,\n        {},\n        { headers: this.headers }\n      )\n    })\n  }\n\n  /**\n   * @alpha\n   *\n   * Get an Iceberg REST Catalog client configured for a specific analytics bucket\n   * Use this to perform advanced table and namespace operations within the bucket\n   * The returned client provides full access to the Apache Iceberg REST Catalog API\n   * with the Supabase `{ data, error }` pattern for consistent error handling on all operations.\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Analytics Buckets\n   * @param bucketName - The name of the analytics bucket (warehouse) to connect to\n   * @returns The wrapped Iceberg catalog client\n   * @throws {StorageError} If the bucket name is invalid\n   *\n   * @example Get catalog and create table\n   * ```js\n   * // First, create an analytics bucket\n   * const { data: bucket, error: bucketError } = await supabase\n   *   .storage\n   *   .analytics\n   *   .createBucket('analytics-data')\n   *\n   * // Get the Iceberg catalog for that bucket\n   * const catalog = supabase.storage.analytics.from('analytics-data')\n   *\n   * // Create a namespace\n   * const { error: nsError } = await catalog.createNamespace({ namespace: ['default'] })\n   *\n   * // Create a table with schema\n   * const { data: tableMetadata, error: tableError } = await catalog.createTable(\n   *   { namespace: ['default'] },\n   *   {\n   *     name: 'events',\n   *     schema: {\n   *       type: 'struct',\n   *       fields: [\n   *         { id: 1, name: 'id', type: 'long', required: true },\n   *         { id: 2, name: 'timestamp', type: 'timestamp', required: true },\n   *         { id: 3, name: 'user_id', type: 'string', required: false }\n   *       ],\n   *       'schema-id': 0,\n   *       'identifier-field-ids': [1]\n   *     },\n   *     'partition-spec': {\n   *       'spec-id': 0,\n   *       fields: []\n   *     },\n   *     'write-order': {\n   *       'order-id': 0,\n   *       fields: []\n   *     },\n   *     properties: {\n   *       'write.format.default': 'parquet'\n   *     }\n   *   }\n   * )\n   * ```\n   *\n   * @example List tables in namespace\n   * ```js\n   * const catalog = supabase.storage.analytics.from('analytics-data')\n   *\n   * // List all tables in the default namespace\n   * const { data: tables, error: listError } = await catalog.listTables({ namespace: ['default'] })\n   * if (listError) {\n   *   if (listError.isNotFound()) {\n   *     console.log('Namespace not found')\n   *   }\n   *   return\n   * }\n   * console.log(tables) // [{ namespace: ['default'], name: 'events' }]\n   * ```\n   *\n   * @example Working with namespaces\n   * ```js\n   * const catalog = supabase.storage.analytics.from('analytics-data')\n   *\n   * // List all namespaces\n   * const { data: namespaces } = await catalog.listNamespaces()\n   *\n   * // Create namespace with properties\n   * await catalog.createNamespace(\n   *   { namespace: ['production'] },\n   *   { properties: { owner: 'data-team', env: 'prod' } }\n   * )\n   * ```\n   *\n   * @example Cleanup operations\n   * ```js\n   * const catalog = supabase.storage.analytics.from('analytics-data')\n   *\n   * // Drop table with purge option (removes all data)\n   * const { error: dropError } = await catalog.dropTable(\n   *   { namespace: ['default'], name: 'events' },\n   *   { purge: true }\n   * )\n   *\n   * if (dropError?.isNotFound()) {\n   *   console.log('Table does not exist')\n   * }\n   *\n   * // Drop namespace (must be empty)\n   * await catalog.dropNamespace({ namespace: ['default'] })\n   * ```\n   *\n   * @remarks\n   * This method provides a bridge between Supabase's bucket management and the standard\n   * Apache Iceberg REST Catalog API. The bucket name maps to the Iceberg warehouse parameter.\n   * All authentication and configuration is handled automatically using your Supabase credentials.\n   *\n   * **Error Handling**: Invalid bucket names throw immediately. All catalog\n   * operations return `{ data, error }` where errors are `IcebergError` instances from iceberg-js.\n   * Use helper methods like `error.isNotFound()` or check `error.status` for specific error handling.\n   * Use `.throwOnError()` on the analytics client if you prefer exceptions for catalog operations.\n   *\n   * **Cleanup Operations**: When using `dropTable`, the `purge: true` option permanently\n   * deletes all table data. Without it, the table is marked as deleted but data remains.\n   *\n   * **Library Dependency**: The returned catalog wraps `IcebergRestCatalog` from iceberg-js.\n   * For complete API documentation and advanced usage, refer to the\n   * [iceberg-js documentation](https://supabase.github.io/iceberg-js/).\n   */\n  from(bucketName: string): WrappedIcebergRestCatalog {\n    // Validate bucket name using same rules as Supabase Storage API backend\n    if (!isValidBucketName(bucketName)) {\n      throw new StorageError(\n        'Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines ' +\n          'and should avoid the use of any other characters.'\n      )\n    }\n\n    // Construct the Iceberg REST Catalog URL\n    // The base URL is /storage/v1/iceberg\n    // Note: IcebergRestCatalog from iceberg-js automatically adds /v1/ prefix to API paths\n    // so we should NOT append /v1 here (it would cause double /v1/v1/ in the URL)\n    const catalog = new IcebergRestCatalog({\n      baseUrl: this.url,\n      catalogName: bucketName, // Maps to the warehouse parameter in Supabase's implementation\n      auth: {\n        type: 'custom',\n        getHeaders: async () => this.headers,\n      },\n      fetch: this.fetch,\n    })\n\n    const shouldThrowOnError = this.shouldThrowOnError\n\n    const wrappedCatalog = new Proxy(catalog, {\n      get(target, prop: keyof IcebergRestCatalog) {\n        const value = target[prop]\n        if (typeof value !== 'function') {\n          return value\n        }\n\n        return async (...args: unknown[]) => {\n          try {\n            const data = await (value as Function).apply(target, args)\n            return { data, error: null }\n          } catch (error) {\n            if (shouldThrowOnError) {\n              throw error\n            }\n            return { data: null, error: error as IcebergError }\n          }\n        }\n      },\n    }) as unknown as WrappedIcebergRestCatalog\n\n    return wrappedCatalog\n  }\n}\n","import { DEFAULT_HEADERS } from '../lib/constants'\nimport { StorageError } from '../lib/common/errors'\nimport { Fetch, vectorsApi } from '../lib/common/fetch'\nimport BaseApiClient from '../lib/common/BaseApiClient'\nimport {\n  ApiResponse,\n  VectorIndex,\n  ListIndexesOptions,\n  ListIndexesResponse,\n  VectorDataType,\n  DistanceMetric,\n  MetadataConfiguration,\n} from '../lib/types'\n\n/**\n * @alpha\n *\n * Options for creating a vector index\n *\n * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n */\nexport interface CreateIndexOptions {\n  vectorBucketName: string\n  indexName: string\n  dataType: VectorDataType\n  dimension: number\n  distanceMetric: DistanceMetric\n  metadataConfiguration?: MetadataConfiguration\n}\n\n/**\n * @hidden\n * Base implementation for vector index operations.\n * Use {@link VectorBucketScope} via `supabase.storage.vectors.from('bucket')` instead.\n */\nexport default class VectorIndexApi extends BaseApiClient<StorageError> {\n  /** Creates a new VectorIndexApi instance */\n  constructor(url: string, headers: { [key: string]: string } = {}, fetch?: Fetch) {\n    const finalUrl = url.replace(/\\/$/, '')\n    const finalHeaders = { ...DEFAULT_HEADERS, 'Content-Type': 'application/json', ...headers }\n    super(finalUrl, finalHeaders, fetch, 'vectors')\n  }\n\n  /** Creates a new vector index within a bucket */\n  async createIndex(options: CreateIndexOptions): Promise<ApiResponse<undefined>> {\n    return this.handleOperation(async () => {\n      const data = await vectorsApi.post(this.fetch, `${this.url}/CreateIndex`, options, {\n        headers: this.headers,\n      })\n      return data || {}\n    })\n  }\n\n  /** Retrieves metadata for a specific vector index */\n  async getIndex(\n    vectorBucketName: string,\n    indexName: string\n  ): Promise<ApiResponse<{ index: VectorIndex }>> {\n    return this.handleOperation(async () => {\n      return await vectorsApi.post(\n        this.fetch,\n        `${this.url}/GetIndex`,\n        { vectorBucketName, indexName },\n        { headers: this.headers }\n      )\n    })\n  }\n\n  /** Lists vector indexes within a bucket with optional filtering and pagination */\n  async listIndexes(options: ListIndexesOptions): Promise<ApiResponse<ListIndexesResponse>> {\n    return this.handleOperation(async () => {\n      return await vectorsApi.post(this.fetch, `${this.url}/ListIndexes`, options, {\n        headers: this.headers,\n      })\n    })\n  }\n\n  /** Deletes a vector index and all its data */\n  async deleteIndex(vectorBucketName: string, indexName: string): Promise<ApiResponse<undefined>> {\n    return this.handleOperation(async () => {\n      const data = await vectorsApi.post(\n        this.fetch,\n        `${this.url}/DeleteIndex`,\n        { vectorBucketName, indexName },\n        { headers: this.headers }\n      )\n      return data || {}\n    })\n  }\n}\n","import { DEFAULT_HEADERS } from '../lib/constants'\nimport { StorageError } from '../lib/common/errors'\nimport { Fetch, vectorsApi } from '../lib/common/fetch'\nimport BaseApiClient from '../lib/common/BaseApiClient'\nimport {\n  ApiResponse,\n  PutVectorsOptions,\n  GetVectorsOptions,\n  GetVectorsResponse,\n  DeleteVectorsOptions,\n  ListVectorsOptions,\n  ListVectorsResponse,\n  QueryVectorsOptions,\n  QueryVectorsResponse,\n} from '../lib/types'\n\n/**\n * @hidden\n * Base implementation for vector data operations.\n * Use {@link VectorIndexScope} via `supabase.storage.vectors.from('bucket').index('idx')` instead.\n */\nexport default class VectorDataApi extends BaseApiClient<StorageError> {\n  /** Creates a new VectorDataApi instance */\n  constructor(url: string, headers: { [key: string]: string } = {}, fetch?: Fetch) {\n    const finalUrl = url.replace(/\\/$/, '')\n    const finalHeaders = { ...DEFAULT_HEADERS, 'Content-Type': 'application/json', ...headers }\n    super(finalUrl, finalHeaders, fetch, 'vectors')\n  }\n\n  /** Inserts or updates vectors in batch (1-500 per request) */\n  async putVectors(options: PutVectorsOptions): Promise<ApiResponse<undefined>> {\n    // Validate batch size\n    if (options.vectors.length < 1 || options.vectors.length > 500) {\n      throw new Error('Vector batch size must be between 1 and 500 items')\n    }\n\n    return this.handleOperation(async () => {\n      const data = await vectorsApi.post(this.fetch, `${this.url}/PutVectors`, options, {\n        headers: this.headers,\n      })\n      return data || {}\n    })\n  }\n\n  /** Retrieves vectors by their keys in batch */\n  async getVectors(options: GetVectorsOptions): Promise<ApiResponse<GetVectorsResponse>> {\n    return this.handleOperation(async () => {\n      return await vectorsApi.post(this.fetch, `${this.url}/GetVectors`, options, {\n        headers: this.headers,\n      })\n    })\n  }\n\n  /** Lists vectors in an index with pagination */\n  async listVectors(options: ListVectorsOptions): Promise<ApiResponse<ListVectorsResponse>> {\n    // Validate segment configuration\n    if (options.segmentCount !== undefined) {\n      if (options.segmentCount < 1 || options.segmentCount > 16) {\n        throw new Error('segmentCount must be between 1 and 16')\n      }\n      if (options.segmentIndex !== undefined) {\n        if (options.segmentIndex < 0 || options.segmentIndex >= options.segmentCount) {\n          throw new Error(`segmentIndex must be between 0 and ${options.segmentCount - 1}`)\n        }\n      }\n    }\n\n    return this.handleOperation(async () => {\n      return await vectorsApi.post(this.fetch, `${this.url}/ListVectors`, options, {\n        headers: this.headers,\n      })\n    })\n  }\n\n  /** Queries for similar vectors using approximate nearest neighbor search */\n  async queryVectors(options: QueryVectorsOptions): Promise<ApiResponse<QueryVectorsResponse>> {\n    return this.handleOperation(async () => {\n      return await vectorsApi.post(this.fetch, `${this.url}/QueryVectors`, options, {\n        headers: this.headers,\n      })\n    })\n  }\n\n  /** Deletes vectors by their keys in batch (1-500 per request) */\n  async deleteVectors(options: DeleteVectorsOptions): Promise<ApiResponse<undefined>> {\n    // Validate batch size\n    if (options.keys.length < 1 || options.keys.length > 500) {\n      throw new Error('Keys batch size must be between 1 and 500 items')\n    }\n\n    return this.handleOperation(async () => {\n      const data = await vectorsApi.post(this.fetch, `${this.url}/DeleteVectors`, options, {\n        headers: this.headers,\n      })\n      return data || {}\n    })\n  }\n}\n","import { DEFAULT_HEADERS } from '../lib/constants'\nimport { StorageError } from '../lib/common/errors'\nimport { Fetch, vectorsApi } from '../lib/common/fetch'\nimport BaseApiClient from '../lib/common/BaseApiClient'\nimport {\n  ApiResponse,\n  VectorBucket,\n  ListVectorBucketsOptions,\n  ListVectorBucketsResponse,\n} from '../lib/types'\n\n/**\n * @hidden\n * Base implementation for vector bucket operations.\n * Use {@link StorageVectorsClient} via `supabase.storage.vectors` instead.\n */\nexport default class VectorBucketApi extends BaseApiClient<StorageError> {\n  /** Creates a new VectorBucketApi instance */\n  constructor(url: string, headers: { [key: string]: string } = {}, fetch?: Fetch) {\n    const finalUrl = url.replace(/\\/$/, '')\n    const finalHeaders = { ...DEFAULT_HEADERS, 'Content-Type': 'application/json', ...headers }\n    super(finalUrl, finalHeaders, fetch, 'vectors')\n  }\n\n  /** Creates a new vector bucket */\n  async createBucket(vectorBucketName: string): Promise<ApiResponse<undefined>> {\n    return this.handleOperation(async () => {\n      const data = await vectorsApi.post(\n        this.fetch,\n        `${this.url}/CreateVectorBucket`,\n        { vectorBucketName },\n        { headers: this.headers }\n      )\n      return data || {}\n    })\n  }\n\n  /** Retrieves metadata for a specific vector bucket */\n  async getBucket(vectorBucketName: string): Promise<ApiResponse<{ vectorBucket: VectorBucket }>> {\n    return this.handleOperation(async () => {\n      return await vectorsApi.post(\n        this.fetch,\n        `${this.url}/GetVectorBucket`,\n        { vectorBucketName },\n        { headers: this.headers }\n      )\n    })\n  }\n\n  /** Lists vector buckets with optional filtering and pagination */\n  async listBuckets(\n    options: ListVectorBucketsOptions = {}\n  ): Promise<ApiResponse<ListVectorBucketsResponse>> {\n    return this.handleOperation(async () => {\n      return await vectorsApi.post(this.fetch, `${this.url}/ListVectorBuckets`, options, {\n        headers: this.headers,\n      })\n    })\n  }\n\n  /** Deletes a vector bucket (must be empty first) */\n  async deleteBucket(vectorBucketName: string): Promise<ApiResponse<undefined>> {\n    return this.handleOperation(async () => {\n      const data = await vectorsApi.post(\n        this.fetch,\n        `${this.url}/DeleteVectorBucket`,\n        { vectorBucketName },\n        { headers: this.headers }\n      )\n      return data || {}\n    })\n  }\n}\n","import VectorIndexApi, { CreateIndexOptions } from './VectorIndexApi'\nimport VectorDataApi from './VectorDataApi'\nimport { Fetch } from '../lib/common/fetch'\nimport VectorBucketApi from './VectorBucketApi'\nimport {\n  ApiResponse,\n  DeleteVectorsOptions,\n  GetVectorsOptions,\n  ListIndexesOptions,\n  ListVectorsOptions,\n  ListVectorBucketsOptions,\n  ListVectorBucketsResponse,\n  PutVectorsOptions,\n  QueryVectorsOptions,\n  VectorBucket,\n} from '../lib/types'\n\n/**\n *\n * @alpha\n *\n * Configuration options for the Storage Vectors client\n *\n * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n */\nexport interface StorageVectorsClientOptions {\n  /**\n   * Custom headers to include in all requests\n   */\n  headers?: { [key: string]: string }\n  /**\n   * Custom fetch implementation (optional)\n   * Useful for testing or custom request handling\n   */\n  fetch?: Fetch\n}\n\n/**\n *\n * @alpha\n *\n * Main client for interacting with S3 Vectors API\n * Provides access to bucket, index, and vector data operations\n *\n * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n *\n * **Usage Patterns:**\n *\n * ```typescript\n * const { data, error } = await supabase\n *  .storage\n *  .vectors\n *  .createBucket('embeddings-prod')\n *\n * // Access index operations via buckets\n * const bucket = supabase.storage.vectors.from('embeddings-prod')\n * await bucket.createIndex({\n *   indexName: 'documents',\n *   dataType: 'float32',\n *   dimension: 1536,\n *   distanceMetric: 'cosine'\n * })\n *\n * // Access vector operations via index\n * const index = bucket.index('documents')\n * await index.putVectors({\n *   vectors: [\n *     { key: 'doc-1', data: { float32: [...] }, metadata: { title: 'Intro' } }\n *   ]\n * })\n *\n * // Query similar vectors\n * const { data } = await index.queryVectors({\n *   queryVector: { float32: [...] },\n *   topK: 5,\n *   returnDistance: true\n * })\n * ```\n */\nexport class StorageVectorsClient extends VectorBucketApi {\n  /**\n   * @alpha\n   *\n   * Creates a StorageVectorsClient that can manage buckets, indexes, and vectors.\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param url - Base URL of the Storage Vectors REST API.\n   * @param options.headers - Optional headers (for example `Authorization`) applied to every request.\n   * @param options.fetch - Optional custom `fetch` implementation for non-browser runtimes.\n   *\n   * @example\n   * ```typescript\n   * const client = new StorageVectorsClient(url, options)\n   * ```\n   */\n  constructor(url: string, options: StorageVectorsClientOptions = {}) {\n    super(url, options.headers || {}, options.fetch)\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Access operations for a specific vector bucket\n   * Returns a scoped client for index and vector operations within the bucket\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param vectorBucketName - Name of the vector bucket\n   * @returns Bucket-scoped client with index and vector operations\n   *\n   * @example\n   * ```typescript\n   * const bucket = supabase.storage.vectors.from('embeddings-prod')\n   * ```\n   */\n  from(vectorBucketName: string): VectorBucketScope {\n    return new VectorBucketScope(this.url, this.headers, vectorBucketName, this.fetch)\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Creates a new vector bucket\n   * Vector buckets are containers for vector indexes and their data\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param vectorBucketName - Unique name for the vector bucket\n   * @returns Promise with empty response on success or error\n   *\n   * @example\n   * ```typescript\n   * const { data, error } = await supabase\n   *   .storage\n   *   .vectors\n   *   .createBucket('embeddings-prod')\n   * ```\n   */\n  async createBucket(vectorBucketName: string): Promise<ApiResponse<undefined>> {\n    return super.createBucket(vectorBucketName)\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Retrieves metadata for a specific vector bucket\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param vectorBucketName - Name of the vector bucket\n   * @returns Promise with bucket metadata or error\n   *\n   * @example\n   * ```typescript\n   * const { data, error } = await supabase\n   *   .storage\n   *   .vectors\n   *   .getBucket('embeddings-prod')\n   *\n   * console.log('Bucket created:', data?.vectorBucket.creationTime)\n   * ```\n   */\n  async getBucket(vectorBucketName: string): Promise<ApiResponse<{ vectorBucket: VectorBucket }>> {\n    return super.getBucket(vectorBucketName)\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Lists all vector buckets with optional filtering and pagination\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param options - Optional filters (prefix, maxResults, nextToken)\n   * @returns Promise with list of buckets or error\n   *\n   * @example\n   * ```typescript\n   * const { data, error } = await supabase\n   *   .storage\n   *   .vectors\n   *   .listBuckets({ prefix: 'embeddings-' })\n   *\n   * data?.vectorBuckets.forEach(bucket => {\n   *   console.log(bucket.vectorBucketName)\n   * })\n   * ```\n   */\n  async listBuckets(\n    options: ListVectorBucketsOptions = {}\n  ): Promise<ApiResponse<ListVectorBucketsResponse>> {\n    return super.listBuckets(options)\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Deletes a vector bucket (bucket must be empty)\n   * All indexes must be deleted before deleting the bucket\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param vectorBucketName - Name of the vector bucket to delete\n   * @returns Promise with empty response on success or error\n   *\n   * @example\n   * ```typescript\n   * const { data, error } = await supabase\n   *   .storage\n   *   .vectors\n   *   .deleteBucket('embeddings-old')\n   * ```\n   */\n  async deleteBucket(vectorBucketName: string): Promise<ApiResponse<undefined>> {\n    return super.deleteBucket(vectorBucketName)\n  }\n}\n\n/**\n *\n * @alpha\n *\n * Scoped client for operations within a specific vector bucket\n * Provides index management and access to vector operations\n *\n * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n */\nexport class VectorBucketScope extends VectorIndexApi {\n  private vectorBucketName: string\n\n  /**\n   * @alpha\n   *\n   * Creates a helper that automatically scopes all index operations to the provided bucket.\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @example\n   * ```typescript\n   * const bucket = supabase.storage.vectors.from('embeddings-prod')\n   * ```\n   */\n  constructor(\n    url: string,\n    headers: { [key: string]: string },\n    vectorBucketName: string,\n    fetch?: Fetch\n  ) {\n    super(url, headers, fetch)\n    this.vectorBucketName = vectorBucketName\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Creates a new vector index in this bucket\n   * Convenience method that automatically includes the bucket name\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param options - Index configuration (vectorBucketName is automatically set)\n   * @returns Promise with empty response on success or error\n   *\n   * @example\n   * ```typescript\n   * const bucket = supabase.storage.vectors.from('embeddings-prod')\n   * await bucket.createIndex({\n   *   indexName: 'documents-openai',\n   *   dataType: 'float32',\n   *   dimension: 1536,\n   *   distanceMetric: 'cosine',\n   *   metadataConfiguration: {\n   *     nonFilterableMetadataKeys: ['raw_text']\n   *   }\n   * })\n   * ```\n   */\n  override async createIndex(options: Omit<CreateIndexOptions, 'vectorBucketName'>) {\n    return super.createIndex({\n      ...options,\n      vectorBucketName: this.vectorBucketName,\n    })\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Lists indexes in this bucket\n   * Convenience method that automatically includes the bucket name\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param options - Listing options (vectorBucketName is automatically set)\n   * @returns Promise with response containing indexes array and pagination token or error\n   *\n   * @example\n   * ```typescript\n   * const bucket = supabase.storage.vectors.from('embeddings-prod')\n   * const { data } = await bucket.listIndexes({ prefix: 'documents-' })\n   * ```\n   */\n  override async listIndexes(options: Omit<ListIndexesOptions, 'vectorBucketName'> = {}) {\n    return super.listIndexes({\n      ...options,\n      vectorBucketName: this.vectorBucketName,\n    })\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Retrieves metadata for a specific index in this bucket\n   * Convenience method that automatically includes the bucket name\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param indexName - Name of the index to retrieve\n   * @returns Promise with index metadata or error\n   *\n   * @example\n   * ```typescript\n   * const bucket = supabase.storage.vectors.from('embeddings-prod')\n   * const { data } = await bucket.getIndex('documents-openai')\n   * console.log('Dimension:', data?.index.dimension)\n   * ```\n   */\n  override async getIndex(indexName: string) {\n    return super.getIndex(this.vectorBucketName, indexName)\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Deletes an index from this bucket\n   * Convenience method that automatically includes the bucket name\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param indexName - Name of the index to delete\n   * @returns Promise with empty response on success or error\n   *\n   * @example\n   * ```typescript\n   * const bucket = supabase.storage.vectors.from('embeddings-prod')\n   * await bucket.deleteIndex('old-index')\n   * ```\n   */\n  override async deleteIndex(indexName: string) {\n    return super.deleteIndex(this.vectorBucketName, indexName)\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Access operations for a specific index within this bucket\n   * Returns a scoped client for vector data operations\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param indexName - Name of the index\n   * @returns Index-scoped client with vector data operations\n   *\n   * @example\n   * ```typescript\n   * const index = supabase.storage.vectors.from('embeddings-prod').index('documents-openai')\n   *\n   * // Insert vectors\n   * await index.putVectors({\n   *   vectors: [\n   *     { key: 'doc-1', data: { float32: [...] }, metadata: { title: 'Intro' } }\n   *   ]\n   * })\n   *\n   * // Query similar vectors\n   * const { data } = await index.queryVectors({\n   *   queryVector: { float32: [...] },\n   *   topK: 5\n   * })\n   * ```\n   */\n  index(indexName: string): VectorIndexScope {\n    return new VectorIndexScope(\n      this.url,\n      this.headers,\n      this.vectorBucketName,\n      indexName,\n      this.fetch\n    )\n  }\n}\n\n/**\n *\n * @alpha\n *\n * Scoped client for operations within a specific vector index\n * Provides vector data operations (put, get, list, query, delete)\n *\n * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n */\nexport class VectorIndexScope extends VectorDataApi {\n  private vectorBucketName: string\n  private indexName: string\n\n  /**\n   *\n   * @alpha\n   *\n   * Creates a helper that automatically scopes all vector operations to the provided bucket/index names.\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @example\n   * ```typescript\n   * const index = supabase.storage.vectors.from('embeddings-prod').index('documents-openai')\n   * ```\n   */\n  constructor(\n    url: string,\n    headers: { [key: string]: string },\n    vectorBucketName: string,\n    indexName: string,\n    fetch?: Fetch\n  ) {\n    super(url, headers, fetch)\n    this.vectorBucketName = vectorBucketName\n    this.indexName = indexName\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Inserts or updates vectors in this index\n   * Convenience method that automatically includes bucket and index names\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param options - Vector insertion options (bucket and index names automatically set)\n   * @returns Promise with empty response on success or error\n   *\n   * @example\n   * ```typescript\n   * const index = supabase.storage.vectors.from('embeddings-prod').index('documents-openai')\n   * await index.putVectors({\n   *   vectors: [\n   *     {\n   *       key: 'doc-1',\n   *       data: { float32: [0.1, 0.2, ...] },\n   *       metadata: { title: 'Introduction', page: 1 }\n   *     }\n   *   ]\n   * })\n   * ```\n   */\n  override async putVectors(options: Omit<PutVectorsOptions, 'vectorBucketName' | 'indexName'>) {\n    return super.putVectors({\n      ...options,\n      vectorBucketName: this.vectorBucketName,\n      indexName: this.indexName,\n    })\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Retrieves vectors by keys from this index\n   * Convenience method that automatically includes bucket and index names\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param options - Vector retrieval options (bucket and index names automatically set)\n   * @returns Promise with response containing vectors array or error\n   *\n   * @example\n   * ```typescript\n   * const index = supabase.storage.vectors.from('embeddings-prod').index('documents-openai')\n   * const { data } = await index.getVectors({\n   *   keys: ['doc-1', 'doc-2'],\n   *   returnMetadata: true\n   * })\n   * ```\n   */\n  override async getVectors(options: Omit<GetVectorsOptions, 'vectorBucketName' | 'indexName'>) {\n    return super.getVectors({\n      ...options,\n      vectorBucketName: this.vectorBucketName,\n      indexName: this.indexName,\n    })\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Lists vectors in this index with pagination\n   * Convenience method that automatically includes bucket and index names\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param options - Listing options (bucket and index names automatically set)\n   * @returns Promise with response containing vectors array and pagination token or error\n   *\n   * @example\n   * ```typescript\n   * const index = supabase.storage.vectors.from('embeddings-prod').index('documents-openai')\n   * const { data } = await index.listVectors({\n   *   maxResults: 500,\n   *   returnMetadata: true\n   * })\n   * ```\n   */\n  override async listVectors(\n    options: Omit<ListVectorsOptions, 'vectorBucketName' | 'indexName'> = {}\n  ) {\n    return super.listVectors({\n      ...options,\n      vectorBucketName: this.vectorBucketName,\n      indexName: this.indexName,\n    })\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Queries for similar vectors in this index\n   * Convenience method that automatically includes bucket and index names\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param options - Query options (bucket and index names automatically set)\n   * @returns Promise with response containing matches array of similar vectors ordered by distance or error\n   *\n   * @example\n   * ```typescript\n   * const index = supabase.storage.vectors.from('embeddings-prod').index('documents-openai')\n   * const { data } = await index.queryVectors({\n   *   queryVector: { float32: [0.1, 0.2, ...] },\n   *   topK: 5,\n   *   filter: { category: 'technical' },\n   *   returnDistance: true,\n   *   returnMetadata: true\n   * })\n   * ```\n   */\n  override async queryVectors(\n    options: Omit<QueryVectorsOptions, 'vectorBucketName' | 'indexName'>\n  ) {\n    return super.queryVectors({\n      ...options,\n      vectorBucketName: this.vectorBucketName,\n      indexName: this.indexName,\n    })\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Deletes vectors by keys from this index\n   * Convenience method that automatically includes bucket and index names\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @param options - Deletion options (bucket and index names automatically set)\n   * @returns Promise with empty response on success or error\n   *\n   * @example\n   * ```typescript\n   * const index = supabase.storage.vectors.from('embeddings-prod').index('documents-openai')\n   * await index.deleteVectors({\n   *   keys: ['doc-1', 'doc-2', 'doc-3']\n   * })\n   * ```\n   */\n  override async deleteVectors(\n    options: Omit<DeleteVectorsOptions, 'vectorBucketName' | 'indexName'>\n  ) {\n    return super.deleteVectors({\n      ...options,\n      vectorBucketName: this.vectorBucketName,\n      indexName: this.indexName,\n    })\n  }\n}\n","import StorageFileApi from './packages/StorageFileApi'\nimport StorageBucketApi from './packages/StorageBucketApi'\nimport StorageAnalyticsClient from './packages/StorageAnalyticsClient'\nimport { Fetch } from './lib/common/fetch'\nimport { StorageVectorsClient } from './packages/StorageVectorsClient'\n\nexport interface StorageClientOptions {\n  useNewHostname?: boolean\n}\n\nexport class StorageClient extends StorageBucketApi {\n  /**\n   * Creates a client for Storage buckets, files, analytics, and vectors.\n   *\n   * @category File Buckets\n   * @example\n   * ```ts\n   * import { StorageClient } from '@supabase/storage-js'\n   *\n   * const storage = new StorageClient('https://xyzcompany.supabase.co/storage/v1', {\n   *   apikey: 'public-anon-key',\n   * })\n   * const avatars = storage.from('avatars')\n   * ```\n   */\n  constructor(\n    url: string,\n    headers: { [key: string]: string } = {},\n    fetch?: Fetch,\n    opts?: StorageClientOptions\n  ) {\n    super(url, headers, fetch, opts)\n  }\n\n  /**\n   * Perform file operation in a bucket.\n   *\n   * @category File Buckets\n   * @param id The bucket id to operate on.\n   *\n   * @example\n   * ```typescript\n   * const avatars = supabase.storage.from('avatars')\n   * ```\n   */\n  from(id: string): StorageFileApi {\n    return new StorageFileApi(this.url, this.headers, id, this.fetch)\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Access vector storage operations.\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Vector Buckets\n   * @returns A StorageVectorsClient instance configured with the current storage settings.\n   */\n  get vectors(): StorageVectorsClient {\n    return new StorageVectorsClient(this.url + '/vector', {\n      headers: this.headers,\n      fetch: this.fetch,\n    })\n  }\n\n  /**\n   *\n   * @alpha\n   *\n   * Access analytics storage operations using Iceberg tables.\n   *\n   * **Public alpha:** This API is part of a public alpha release and may not be available to your account type.\n   *\n   * @category Analytics Buckets\n   * @returns A StorageAnalyticsClient instance configured with the current storage settings.\n   */\n  get analytics(): StorageAnalyticsClient {\n    return new StorageAnalyticsClient(this.url + '/iceberg', this.headers, this.fetch)\n  }\n}\n","// Generated automatically during releases by scripts/update-version-files.ts\n// This file provides runtime access to the package version for:\n// - HTTP request headers (e.g., X-Client-Info header for API requests)\n// - Debugging and support (identifying which version is running)\n// - Telemetry and logging (version reporting in errors/analytics)\n// - Ensuring build artifacts match the published package version\nexport const version = '2.97.0'\n","import { version } from './version'\n\n/** Current session will be checked for refresh at this interval. */\nexport const AUTO_REFRESH_TICK_DURATION_MS = 30 * 1000\n\n/**\n * A token refresh will be attempted this many ticks before the current session expires. */\nexport const AUTO_REFRESH_TICK_THRESHOLD = 3\n\n/*\n * Earliest time before an access token expires that the session should be refreshed.\n */\nexport const EXPIRY_MARGIN_MS = AUTO_REFRESH_TICK_THRESHOLD * AUTO_REFRESH_TICK_DURATION_MS\n\nexport const GOTRUE_URL = 'http://localhost:9999'\nexport const STORAGE_KEY = 'supabase.auth.token'\nexport const AUDIENCE = ''\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `gotrue-js/${version}` }\nexport const NETWORK_FAILURE = {\n  MAX_RETRIES: 10,\n  RETRY_INTERVAL: 2, // in deciseconds\n}\n\nexport const API_VERSION_HEADER_NAME = 'X-Supabase-Api-Version'\nexport const API_VERSIONS = {\n  '2024-01-01': {\n    timestamp: Date.parse('2024-01-01T00:00:00.0Z'),\n    name: '2024-01-01',\n  },\n}\n\nexport const BASE64URL_REGEX = /^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i\n\nexport const JWKS_TTL = 10 * 60 * 1000 // 10 minutes\n","import { WeakPasswordReasons } from './types'\nimport { ErrorCode } from './error-codes'\n\n/**\n * Base error thrown by Supabase Auth helpers.\n *\n * @example\n * ```ts\n * import { AuthError } from '@supabase/auth-js'\n *\n * throw new AuthError('Unexpected auth error', 500, 'unexpected')\n * ```\n */\nexport class AuthError extends Error {\n  /**\n   * Error code associated with the error. Most errors coming from\n   * HTTP responses will have a code, though some errors that occur\n   * before a response is received will not have one present. In that\n   * case {@link #status} will also be undefined.\n   */\n  code: ErrorCode | (string & {}) | undefined\n\n  /** HTTP status code that caused the error. */\n  status: number | undefined\n\n  protected __isAuthError = true\n\n  constructor(message: string, status?: number, code?: string) {\n    super(message)\n    this.name = 'AuthError'\n    this.status = status\n    this.code = code\n  }\n}\n\nexport function isAuthError(error: unknown): error is AuthError {\n  return typeof error === 'object' && error !== null && '__isAuthError' in error\n}\n\n/**\n * Error returned directly from the GoTrue REST API.\n *\n * @example\n * ```ts\n * import { AuthApiError } from '@supabase/auth-js'\n *\n * throw new AuthApiError('Invalid credentials', 400, 'invalid_credentials')\n * ```\n */\nexport class AuthApiError extends AuthError {\n  status: number\n\n  constructor(message: string, status: number, code: string | undefined) {\n    super(message, status, code)\n    this.name = 'AuthApiError'\n    this.status = status\n    this.code = code\n  }\n}\n\nexport function isAuthApiError(error: unknown): error is AuthApiError {\n  return isAuthError(error) && error.name === 'AuthApiError'\n}\n\n/**\n * Wraps non-standard errors so callers can inspect the root cause.\n *\n * @example\n * ```ts\n * import { AuthUnknownError } from '@supabase/auth-js'\n *\n * try {\n *   await someAuthCall()\n * } catch (err) {\n *   throw new AuthUnknownError('Auth failed', err)\n * }\n * ```\n */\nexport class AuthUnknownError extends AuthError {\n  originalError: unknown\n\n  constructor(message: string, originalError: unknown) {\n    super(message)\n    this.name = 'AuthUnknownError'\n    this.originalError = originalError\n  }\n}\n\n/**\n * Flexible error class used to create named auth errors at runtime.\n *\n * @example\n * ```ts\n * import { CustomAuthError } from '@supabase/auth-js'\n *\n * throw new CustomAuthError('My custom auth error', 'MyAuthError', 400, 'custom_code')\n * ```\n */\nexport class CustomAuthError extends AuthError {\n  name: string\n  status: number\n\n  constructor(message: string, name: string, status: number, code: string | undefined) {\n    super(message, status, code)\n    this.name = name\n    this.status = status\n  }\n}\n\n/**\n * Error thrown when an operation requires a session but none is present.\n *\n * @example\n * ```ts\n * import { AuthSessionMissingError } from '@supabase/auth-js'\n *\n * throw new AuthSessionMissingError()\n * ```\n */\nexport class AuthSessionMissingError extends CustomAuthError {\n  constructor() {\n    super('Auth session missing!', 'AuthSessionMissingError', 400, undefined)\n  }\n}\n\nexport function isAuthSessionMissingError(error: any): error is AuthSessionMissingError {\n  return isAuthError(error) && error.name === 'AuthSessionMissingError'\n}\n\n/**\n * Error thrown when the token response is malformed.\n *\n * @example\n * ```ts\n * import { AuthInvalidTokenResponseError } from '@supabase/auth-js'\n *\n * throw new AuthInvalidTokenResponseError()\n * ```\n */\nexport class AuthInvalidTokenResponseError extends CustomAuthError {\n  constructor() {\n    super('Auth session or user missing', 'AuthInvalidTokenResponseError', 500, undefined)\n  }\n}\n\n/**\n * Error thrown when email/password credentials are invalid.\n *\n * @example\n * ```ts\n * import { AuthInvalidCredentialsError } from '@supabase/auth-js'\n *\n * throw new AuthInvalidCredentialsError('Email or password is incorrect')\n * ```\n */\nexport class AuthInvalidCredentialsError extends CustomAuthError {\n  constructor(message: string) {\n    super(message, 'AuthInvalidCredentialsError', 400, undefined)\n  }\n}\n\n/**\n * Error thrown when implicit grant redirects contain an error.\n *\n * @example\n * ```ts\n * import { AuthImplicitGrantRedirectError } from '@supabase/auth-js'\n *\n * throw new AuthImplicitGrantRedirectError('OAuth redirect failed', {\n *   error: 'access_denied',\n *   code: 'oauth_error',\n * })\n * ```\n */\nexport class AuthImplicitGrantRedirectError extends CustomAuthError {\n  details: { error: string; code: string } | null = null\n  constructor(message: string, details: { error: string; code: string } | null = null) {\n    super(message, 'AuthImplicitGrantRedirectError', 500, undefined)\n    this.details = details\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n      message: this.message,\n      status: this.status,\n      details: this.details,\n    }\n  }\n}\n\nexport function isAuthImplicitGrantRedirectError(\n  error: any\n): error is AuthImplicitGrantRedirectError {\n  return isAuthError(error) && error.name === 'AuthImplicitGrantRedirectError'\n}\n\n/**\n * Error thrown during PKCE code exchanges.\n *\n * @example\n * ```ts\n * import { AuthPKCEGrantCodeExchangeError } from '@supabase/auth-js'\n *\n * throw new AuthPKCEGrantCodeExchangeError('PKCE exchange failed')\n * ```\n */\nexport class AuthPKCEGrantCodeExchangeError extends CustomAuthError {\n  details: { error: string; code: string } | null = null\n\n  constructor(message: string, details: { error: string; code: string } | null = null) {\n    super(message, 'AuthPKCEGrantCodeExchangeError', 500, undefined)\n    this.details = details\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n      message: this.message,\n      status: this.status,\n      details: this.details,\n    }\n  }\n}\n\n/**\n * Error thrown when the PKCE code verifier is not found in storage.\n * This typically happens when the auth flow was initiated in a different\n * browser, device, or the storage was cleared.\n *\n * @example\n * ```ts\n * import { AuthPKCECodeVerifierMissingError } from '@supabase/auth-js'\n *\n * throw new AuthPKCECodeVerifierMissingError()\n * ```\n */\nexport class AuthPKCECodeVerifierMissingError extends CustomAuthError {\n  constructor() {\n    super(\n      'PKCE code verifier not found in storage. ' +\n        'This can happen if the auth flow was initiated in a different browser or device, ' +\n        'or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), ' +\n        'use @supabase/ssr on both the server and client to store the code verifier in cookies.',\n      'AuthPKCECodeVerifierMissingError',\n      400,\n      'pkce_code_verifier_not_found'\n    )\n  }\n}\n\nexport function isAuthPKCECodeVerifierMissingError(\n  error: unknown\n): error is AuthPKCECodeVerifierMissingError {\n  return isAuthError(error) && error.name === 'AuthPKCECodeVerifierMissingError'\n}\n\n/**\n * Error thrown when a transient fetch issue occurs.\n *\n * @example\n * ```ts\n * import { AuthRetryableFetchError } from '@supabase/auth-js'\n *\n * throw new AuthRetryableFetchError('Service temporarily unavailable', 503)\n * ```\n */\nexport class AuthRetryableFetchError extends CustomAuthError {\n  constructor(message: string, status: number) {\n    super(message, 'AuthRetryableFetchError', status, undefined)\n  }\n}\n\nexport function isAuthRetryableFetchError(error: unknown): error is AuthRetryableFetchError {\n  return isAuthError(error) && error.name === 'AuthRetryableFetchError'\n}\n\n/**\n * This error is thrown on certain methods when the password used is deemed\n * weak. Inspect the reasons to identify what password strength rules are\n * inadequate.\n */\n/**\n * Error thrown when a supplied password is considered weak.\n *\n * @example\n * ```ts\n * import { AuthWeakPasswordError } from '@supabase/auth-js'\n *\n * throw new AuthWeakPasswordError('Password too short', 400, ['min_length'])\n * ```\n */\nexport class AuthWeakPasswordError extends CustomAuthError {\n  /**\n   * Reasons why the password is deemed weak.\n   */\n  reasons: WeakPasswordReasons[]\n\n  constructor(message: string, status: number, reasons: WeakPasswordReasons[]) {\n    super(message, 'AuthWeakPasswordError', status, 'weak_password')\n\n    this.reasons = reasons\n  }\n}\n\nexport function isAuthWeakPasswordError(error: unknown): error is AuthWeakPasswordError {\n  return isAuthError(error) && error.name === 'AuthWeakPasswordError'\n}\n\n/**\n * Error thrown when a JWT cannot be verified or parsed.\n *\n * @example\n * ```ts\n * import { AuthInvalidJwtError } from '@supabase/auth-js'\n *\n * throw new AuthInvalidJwtError('Token signature is invalid')\n * ```\n */\nexport class AuthInvalidJwtError extends CustomAuthError {\n  constructor(message: string) {\n    super(message, 'AuthInvalidJwtError', 400, 'invalid_jwt')\n  }\n}\n","/**\n * Avoid modifying this file. It's part of\n * https://github.com/supabase-community/base64url-js.  Submit all fixes on\n * that repo!\n */\n\nimport { Uint8Array_ } from './webauthn.dom'\n\n/**\n * An array of characters that encode 6 bits into a Base64-URL alphabet\n * character.\n */\nconst TO_BASE64URL = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'.split('')\n\n/**\n * An array of characters that can appear in a Base64-URL encoded string but\n * should be ignored.\n */\nconst IGNORE_BASE64URL = ' \\t\\n\\r='.split('')\n\n/**\n * An array of 128 numbers that map a Base64-URL character to 6 bits, or if -2\n * used to skip the character, or if -1 used to error out.\n */\nconst FROM_BASE64URL = (() => {\n  const charMap: number[] = new Array(128)\n\n  for (let i = 0; i < charMap.length; i += 1) {\n    charMap[i] = -1\n  }\n\n  for (let i = 0; i < IGNORE_BASE64URL.length; i += 1) {\n    charMap[IGNORE_BASE64URL[i].charCodeAt(0)] = -2\n  }\n\n  for (let i = 0; i < TO_BASE64URL.length; i += 1) {\n    charMap[TO_BASE64URL[i].charCodeAt(0)] = i\n  }\n\n  return charMap\n})()\n\n/**\n * Converts a byte to a Base64-URL string.\n *\n * @param byte The byte to convert, or null to flush at the end of the byte sequence.\n * @param state The Base64 conversion state. Pass an initial value of `{ queue: 0, queuedBits: 0 }`.\n * @param emit A function called with the next Base64 character when ready.\n */\nexport function byteToBase64URL(\n  byte: number | null,\n  state: { queue: number; queuedBits: number },\n  emit: (char: string) => void\n) {\n  if (byte !== null) {\n    state.queue = (state.queue << 8) | byte\n    state.queuedBits += 8\n\n    while (state.queuedBits >= 6) {\n      const pos = (state.queue >> (state.queuedBits - 6)) & 63\n      emit(TO_BASE64URL[pos])\n      state.queuedBits -= 6\n    }\n  } else if (state.queuedBits > 0) {\n    state.queue = state.queue << (6 - state.queuedBits)\n    state.queuedBits = 6\n\n    while (state.queuedBits >= 6) {\n      const pos = (state.queue >> (state.queuedBits - 6)) & 63\n      emit(TO_BASE64URL[pos])\n      state.queuedBits -= 6\n    }\n  }\n}\n\n/**\n * Converts a String char code (extracted using `string.charCodeAt(position)`) to a sequence of Base64-URL characters.\n *\n * @param charCode The char code of the JavaScript string.\n * @param state The Base64 state. Pass an initial value of `{ queue: 0, queuedBits: 0 }`.\n * @param emit A function called with the next byte.\n */\nexport function byteFromBase64URL(\n  charCode: number,\n  state: { queue: number; queuedBits: number },\n  emit: (byte: number) => void\n) {\n  const bits = FROM_BASE64URL[charCode]\n\n  if (bits > -1) {\n    // valid Base64-URL character\n    state.queue = (state.queue << 6) | bits\n    state.queuedBits += 6\n\n    while (state.queuedBits >= 8) {\n      emit((state.queue >> (state.queuedBits - 8)) & 0xff)\n      state.queuedBits -= 8\n    }\n  } else if (bits === -2) {\n    // ignore spaces, tabs, newlines, =\n    return\n  } else {\n    throw new Error(`Invalid Base64-URL character \"${String.fromCharCode(charCode)}\"`)\n  }\n}\n\n/**\n * Converts a JavaScript string (which may include any valid character) into a\n * Base64-URL encoded string. The string is first encoded in UTF-8 which is\n * then encoded as Base64-URL.\n *\n * @param str The string to convert.\n */\nexport function stringToBase64URL(str: string) {\n  const base64: string[] = []\n\n  const emitter = (char: string) => {\n    base64.push(char)\n  }\n\n  const state = { queue: 0, queuedBits: 0 }\n\n  stringToUTF8(str, (byte: number) => {\n    byteToBase64URL(byte, state, emitter)\n  })\n\n  byteToBase64URL(null, state, emitter)\n\n  return base64.join('')\n}\n\n/**\n * Converts a Base64-URL encoded string into a JavaScript string. It is assumed\n * that the underlying string has been encoded as UTF-8.\n *\n * @param str The Base64-URL encoded string.\n */\nexport function stringFromBase64URL(str: string) {\n  const conv: string[] = []\n\n  const utf8Emit = (codepoint: number) => {\n    conv.push(String.fromCodePoint(codepoint))\n  }\n\n  const utf8State = {\n    utf8seq: 0,\n    codepoint: 0,\n  }\n\n  const b64State = { queue: 0, queuedBits: 0 }\n\n  const byteEmit = (byte: number) => {\n    stringFromUTF8(byte, utf8State, utf8Emit)\n  }\n\n  for (let i = 0; i < str.length; i += 1) {\n    byteFromBase64URL(str.charCodeAt(i), b64State, byteEmit)\n  }\n\n  return conv.join('')\n}\n\n/**\n * Converts a Unicode codepoint to a multi-byte UTF-8 sequence.\n *\n * @param codepoint The Unicode codepoint.\n * @param emit      Function which will be called for each UTF-8 byte that represents the codepoint.\n */\nexport function codepointToUTF8(codepoint: number, emit: (byte: number) => void) {\n  if (codepoint <= 0x7f) {\n    emit(codepoint)\n    return\n  } else if (codepoint <= 0x7ff) {\n    emit(0xc0 | (codepoint >> 6))\n    emit(0x80 | (codepoint & 0x3f))\n    return\n  } else if (codepoint <= 0xffff) {\n    emit(0xe0 | (codepoint >> 12))\n    emit(0x80 | ((codepoint >> 6) & 0x3f))\n    emit(0x80 | (codepoint & 0x3f))\n    return\n  } else if (codepoint <= 0x10ffff) {\n    emit(0xf0 | (codepoint >> 18))\n    emit(0x80 | ((codepoint >> 12) & 0x3f))\n    emit(0x80 | ((codepoint >> 6) & 0x3f))\n    emit(0x80 | (codepoint & 0x3f))\n    return\n  }\n\n  throw new Error(`Unrecognized Unicode codepoint: ${codepoint.toString(16)}`)\n}\n\n/**\n * Converts a JavaScript string to a sequence of UTF-8 bytes.\n *\n * @param str  The string to convert to UTF-8.\n * @param emit Function which will be called for each UTF-8 byte of the string.\n */\nexport function stringToUTF8(str: string, emit: (byte: number) => void) {\n  for (let i = 0; i < str.length; i += 1) {\n    let codepoint = str.charCodeAt(i)\n\n    if (codepoint > 0xd7ff && codepoint <= 0xdbff) {\n      // most UTF-16 codepoints are Unicode codepoints, except values in this\n      // range where the next UTF-16 codepoint needs to be combined with the\n      // current one to get the Unicode codepoint\n      const highSurrogate = ((codepoint - 0xd800) * 0x400) & 0xffff\n      const lowSurrogate = (str.charCodeAt(i + 1) - 0xdc00) & 0xffff\n      codepoint = (lowSurrogate | highSurrogate) + 0x10000\n      i += 1\n    }\n\n    codepointToUTF8(codepoint, emit)\n  }\n}\n\n/**\n * Converts a UTF-8 byte to a Unicode codepoint.\n *\n * @param byte  The UTF-8 byte next in the sequence.\n * @param state The shared state between consecutive UTF-8 bytes in the\n *              sequence, an object with the shape `{ utf8seq: 0, codepoint: 0 }`.\n * @param emit  Function which will be called for each codepoint.\n */\nexport function stringFromUTF8(\n  byte: number,\n  state: { utf8seq: number; codepoint: number },\n  emit: (codepoint: number) => void\n) {\n  if (state.utf8seq === 0) {\n    if (byte <= 0x7f) {\n      emit(byte)\n      return\n    }\n\n    // count the number of 1 leading bits until you reach 0\n    for (let leadingBit = 1; leadingBit < 6; leadingBit += 1) {\n      if (((byte >> (7 - leadingBit)) & 1) === 0) {\n        state.utf8seq = leadingBit\n        break\n      }\n    }\n\n    if (state.utf8seq === 2) {\n      state.codepoint = byte & 31\n    } else if (state.utf8seq === 3) {\n      state.codepoint = byte & 15\n    } else if (state.utf8seq === 4) {\n      state.codepoint = byte & 7\n    } else {\n      throw new Error('Invalid UTF-8 sequence')\n    }\n\n    state.utf8seq -= 1\n  } else if (state.utf8seq > 0) {\n    if (byte <= 0x7f) {\n      throw new Error('Invalid UTF-8 sequence')\n    }\n\n    state.codepoint = (state.codepoint << 6) | (byte & 63)\n    state.utf8seq -= 1\n\n    if (state.utf8seq === 0) {\n      emit(state.codepoint)\n    }\n  }\n}\n\n/**\n * Helper functions to convert different types of strings to Uint8Array\n */\n\nexport function base64UrlToUint8Array(str: string): Uint8Array_ {\n  const result: number[] = []\n  const state = { queue: 0, queuedBits: 0 }\n\n  const onByte = (byte: number) => {\n    result.push(byte)\n  }\n\n  for (let i = 0; i < str.length; i += 1) {\n    byteFromBase64URL(str.charCodeAt(i), state, onByte)\n  }\n\n  return new Uint8Array(result)\n}\n\nexport function stringToUint8Array(str: string): Uint8Array_ {\n  const result: number[] = []\n  stringToUTF8(str, (byte: number) => result.push(byte))\n  return new Uint8Array(result)\n}\n\nexport function bytesToBase64URL(bytes: Uint8Array) {\n  const result: string[] = []\n  const state = { queue: 0, queuedBits: 0 }\n\n  const onChar = (char: string) => {\n    result.push(char)\n  }\n\n  bytes.forEach((byte) => byteToBase64URL(byte, state, onChar))\n\n  // always call with `null` after processing all bytes\n  byteToBase64URL(null, state, onChar)\n\n  return result.join('')\n}\n","import { API_VERSION_HEADER_NAME, BASE64URL_REGEX } from './constants'\nimport { AuthInvalidJwtError } from './errors'\nimport { base64UrlToUint8Array, stringFromBase64URL } from './base64url'\nimport { JwtHeader, JwtPayload, SupportedStorage, User } from './types'\nimport { Uint8Array_ } from './webauthn.dom'\n\nexport function expiresAt(expiresIn: number) {\n  const timeNow = Math.round(Date.now() / 1000)\n  return timeNow + expiresIn\n}\n\n/**\n * Generates a unique identifier for internal callback subscriptions.\n *\n * This function uses JavaScript Symbols to create guaranteed-unique identifiers\n * for auth state change callbacks. Symbols are ideal for this use case because:\n * - They are guaranteed unique by the JavaScript runtime\n * - They work in all environments (browser, SSR, Node.js)\n * - They avoid issues with Next.js 16 deterministic rendering requirements\n * - They are perfect for internal, non-serializable identifiers\n *\n * Note: This function is only used for internal subscription management,\n * not for security-critical operations like session tokens.\n */\nexport function generateCallbackId(): symbol {\n  return Symbol('auth-callback')\n}\n\nexport const isBrowser = () => typeof window !== 'undefined' && typeof document !== 'undefined'\n\nconst localStorageWriteTests = {\n  tested: false,\n  writable: false,\n}\n\n/**\n * Checks whether localStorage is supported on this browser.\n */\nexport const supportsLocalStorage = () => {\n  if (!isBrowser()) {\n    return false\n  }\n\n  try {\n    if (typeof globalThis.localStorage !== 'object') {\n      return false\n    }\n  } catch (e) {\n    // DOM exception when accessing `localStorage`\n    return false\n  }\n\n  if (localStorageWriteTests.tested) {\n    return localStorageWriteTests.writable\n  }\n\n  const randomKey = `lswt-${Math.random()}${Math.random()}`\n\n  try {\n    globalThis.localStorage.setItem(randomKey, randomKey)\n    globalThis.localStorage.removeItem(randomKey)\n\n    localStorageWriteTests.tested = true\n    localStorageWriteTests.writable = true\n  } catch (e) {\n    // localStorage can't be written to\n    // https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document\n\n    localStorageWriteTests.tested = true\n    localStorageWriteTests.writable = false\n  }\n\n  return localStorageWriteTests.writable\n}\n\n/**\n * Extracts parameters encoded in the URL both in the query and fragment.\n */\nexport function parseParametersFromURL(href: string) {\n  const result: { [parameter: string]: string } = {}\n\n  const url = new URL(href)\n\n  if (url.hash && url.hash[0] === '#') {\n    try {\n      const hashSearchParams = new URLSearchParams(url.hash.substring(1))\n      hashSearchParams.forEach((value, key) => {\n        result[key] = value\n      })\n    } catch (e: any) {\n      // hash is not a query string\n    }\n  }\n\n  // search parameters take precedence over hash parameters\n  url.searchParams.forEach((value, key) => {\n    result[key] = value\n  })\n\n  return result\n}\n\ntype Fetch = typeof fetch\n\nexport const resolveFetch = (customFetch?: Fetch): Fetch => {\n  if (customFetch) {\n    return (...args) => customFetch(...args)\n  }\n  return (...args) => fetch(...args)\n}\n\nexport const looksLikeFetchResponse = (maybeResponse: unknown): maybeResponse is Response => {\n  return (\n    typeof maybeResponse === 'object' &&\n    maybeResponse !== null &&\n    'status' in maybeResponse &&\n    'ok' in maybeResponse &&\n    'json' in maybeResponse &&\n    typeof (maybeResponse as any).json === 'function'\n  )\n}\n\n// Storage helpers\nexport const setItemAsync = async (\n  storage: SupportedStorage,\n  key: string,\n  data: any\n): Promise<void> => {\n  await storage.setItem(key, JSON.stringify(data))\n}\n\nexport const getItemAsync = async (storage: SupportedStorage, key: string): Promise<unknown> => {\n  const value = await storage.getItem(key)\n\n  if (!value) {\n    return null\n  }\n\n  try {\n    return JSON.parse(value)\n  } catch {\n    return value\n  }\n}\n\nexport const removeItemAsync = async (storage: SupportedStorage, key: string): Promise<void> => {\n  await storage.removeItem(key)\n}\n\n/**\n * A deferred represents some asynchronous work that is not yet finished, which\n * may or may not culminate in a value.\n * Taken from: https://github.com/mike-north/types/blob/master/src/async.ts\n */\nexport class Deferred<T = any> {\n  public static promiseConstructor: PromiseConstructor = Promise\n\n  public readonly promise!: PromiseLike<T>\n\n  public readonly resolve!: (value?: T | PromiseLike<T>) => void\n\n  public readonly reject!: (reason?: any) => any\n\n  public constructor() {\n    // eslint-disable-next-line @typescript-eslint/no-extra-semi\n    ;(this as any).promise = new Deferred.promiseConstructor((res, rej) => {\n      // eslint-disable-next-line @typescript-eslint/no-extra-semi\n      ;(this as any).resolve = res\n      // eslint-disable-next-line @typescript-eslint/no-extra-semi\n      ;(this as any).reject = rej\n    })\n  }\n}\n\nexport function decodeJWT(token: string): {\n  header: JwtHeader\n  payload: JwtPayload\n  signature: Uint8Array_\n  raw: {\n    header: string\n    payload: string\n  }\n} {\n  const parts = token.split('.')\n\n  if (parts.length !== 3) {\n    throw new AuthInvalidJwtError('Invalid JWT structure')\n  }\n\n  // Regex checks for base64url format\n  for (let i = 0; i < parts.length; i++) {\n    if (!BASE64URL_REGEX.test(parts[i] as string)) {\n      throw new AuthInvalidJwtError('JWT not in base64url format')\n    }\n  }\n  const data = {\n    // using base64url lib\n    header: JSON.parse(stringFromBase64URL(parts[0])),\n    payload: JSON.parse(stringFromBase64URL(parts[1])),\n    signature: base64UrlToUint8Array(parts[2]),\n    raw: {\n      header: parts[0],\n      payload: parts[1],\n    },\n  }\n  return data\n}\n\n/**\n * Creates a promise that resolves to null after some time.\n */\nexport async function sleep(time: number): Promise<null> {\n  return await new Promise((accept) => {\n    setTimeout(() => accept(null), time)\n  })\n}\n\n/**\n * Converts the provided async function into a retryable function. Each result\n * or thrown error is sent to the isRetryable function which should return true\n * if the function should run again.\n */\nexport function retryable<T>(\n  fn: (attempt: number) => Promise<T>,\n  isRetryable: (attempt: number, error: any | null, result?: T) => boolean\n): Promise<T> {\n  const promise = new Promise<T>((accept, reject) => {\n    // eslint-disable-next-line @typescript-eslint/no-extra-semi\n    ;(async () => {\n      for (let attempt = 0; attempt < Infinity; attempt++) {\n        try {\n          const result = await fn(attempt)\n\n          if (!isRetryable(attempt, null, result)) {\n            accept(result)\n            return\n          }\n        } catch (e: any) {\n          if (!isRetryable(attempt, e)) {\n            reject(e)\n            return\n          }\n        }\n      }\n    })()\n  })\n\n  return promise\n}\n\nfunction dec2hex(dec: number) {\n  return ('0' + dec.toString(16)).substr(-2)\n}\n\n// Functions below taken from: https://stackoverflow.com/questions/63309409/creating-a-code-verifier-and-challenge-for-pkce-auth-on-spotify-api-in-reactjs\nexport function generatePKCEVerifier() {\n  const verifierLength = 56\n  const array = new Uint32Array(verifierLength)\n  if (typeof crypto === 'undefined') {\n    const charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~'\n    const charSetLen = charSet.length\n    let verifier = ''\n    for (let i = 0; i < verifierLength; i++) {\n      verifier += charSet.charAt(Math.floor(Math.random() * charSetLen))\n    }\n    return verifier\n  }\n  crypto.getRandomValues(array)\n  return Array.from(array, dec2hex).join('')\n}\n\nasync function sha256(randomString: string) {\n  const encoder = new TextEncoder()\n  const encodedData = encoder.encode(randomString)\n  const hash = await crypto.subtle.digest('SHA-256', encodedData)\n  const bytes = new Uint8Array(hash)\n\n  return Array.from(bytes)\n    .map((c) => String.fromCharCode(c))\n    .join('')\n}\n\nexport async function generatePKCEChallenge(verifier: string) {\n  const hasCryptoSupport =\n    typeof crypto !== 'undefined' &&\n    typeof crypto.subtle !== 'undefined' &&\n    typeof TextEncoder !== 'undefined'\n\n  if (!hasCryptoSupport) {\n    console.warn(\n      'WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256.'\n    )\n    return verifier\n  }\n  const hashed = await sha256(verifier)\n  return btoa(hashed).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '')\n}\n\nexport async function getCodeChallengeAndMethod(\n  storage: SupportedStorage,\n  storageKey: string,\n  isPasswordRecovery = false\n) {\n  const codeVerifier = generatePKCEVerifier()\n  let storedCodeVerifier = codeVerifier\n  if (isPasswordRecovery) {\n    storedCodeVerifier += '/PASSWORD_RECOVERY'\n  }\n  await setItemAsync(storage, `${storageKey}-code-verifier`, storedCodeVerifier)\n  const codeChallenge = await generatePKCEChallenge(codeVerifier)\n  const codeChallengeMethod = codeVerifier === codeChallenge ? 'plain' : 's256'\n  return [codeChallenge, codeChallengeMethod]\n}\n\n/** Parses the API version which is 2YYY-MM-DD. */\nconst API_VERSION_REGEX = /^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i\n\nexport function parseResponseAPIVersion(response: Response) {\n  const apiVersion = response.headers.get(API_VERSION_HEADER_NAME)\n\n  if (!apiVersion) {\n    return null\n  }\n\n  if (!apiVersion.match(API_VERSION_REGEX)) {\n    return null\n  }\n\n  try {\n    const date = new Date(`${apiVersion}T00:00:00.0Z`)\n    return date\n  } catch (e: any) {\n    return null\n  }\n}\n\nexport function validateExp(exp: number) {\n  if (!exp) {\n    throw new Error('Missing exp claim')\n  }\n  const timeNow = Math.floor(Date.now() / 1000)\n  if (exp <= timeNow) {\n    throw new Error('JWT has expired')\n  }\n}\n\nexport function getAlgorithm(\n  alg: 'HS256' | 'RS256' | 'ES256'\n): RsaHashedImportParams | EcKeyImportParams {\n  switch (alg) {\n    case 'RS256':\n      return {\n        name: 'RSASSA-PKCS1-v1_5',\n        hash: { name: 'SHA-256' },\n      }\n    case 'ES256':\n      return {\n        name: 'ECDSA',\n        namedCurve: 'P-256',\n        hash: { name: 'SHA-256' },\n      }\n    default:\n      throw new Error('Invalid alg claim')\n  }\n}\n\nconst UUID_REGEX = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/\n\nexport function validateUUID(str: string) {\n  if (!UUID_REGEX.test(str)) {\n    throw new Error('@supabase/auth-js: Expected parameter to be UUID but is not')\n  }\n}\n\nexport function userNotAvailableProxy(): User {\n  const proxyTarget = {} as User\n\n  return new Proxy(proxyTarget, {\n    get: (target: any, prop: string) => {\n      if (prop === '__isUserNotAvailableProxy') {\n        return true\n      }\n      // Preventative check for common problematic symbols during cloning/inspection\n      // These symbols might be accessed by structuredClone or other internal mechanisms.\n      if (typeof prop === 'symbol') {\n        const sProp = (prop as symbol).toString()\n        if (\n          sProp === 'Symbol(Symbol.toPrimitive)' ||\n          sProp === 'Symbol(Symbol.toStringTag)' ||\n          sProp === 'Symbol(util.inspect.custom)'\n        ) {\n          // Node.js util.inspect\n          return undefined\n        }\n      }\n      throw new Error(\n        `@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the \"${prop}\" property of the session object is not supported. Please use getUser() instead.`\n      )\n    },\n    set: (_target: any, prop: string) => {\n      throw new Error(\n        `@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the \"${prop}\" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`\n      )\n    },\n    deleteProperty: (_target: any, prop: string) => {\n      throw new Error(\n        `@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the \"${prop}\" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`\n      )\n    },\n  })\n}\n\n/**\n * Creates a proxy around a user object that warns when properties are accessed on the server.\n * This is used to alert developers that using user data from getSession() on the server is insecure.\n *\n * @param user The actual user object to wrap\n * @param suppressWarningRef An object with a 'value' property that controls warning suppression\n * @returns A proxied user object that warns on property access\n */\nexport function insecureUserWarningProxy(user: User, suppressWarningRef: { value: boolean }): User {\n  return new Proxy(user, {\n    get: (target: any, prop: string | symbol, receiver: any) => {\n      // Allow internal checks without warning\n      if (prop === '__isInsecureUserWarningProxy') {\n        return true\n      }\n\n      // Preventative check for common problematic symbols during cloning/inspection\n      // These symbols might be accessed by structuredClone or other internal mechanisms\n      if (typeof prop === 'symbol') {\n        const sProp = prop.toString()\n        if (\n          sProp === 'Symbol(Symbol.toPrimitive)' ||\n          sProp === 'Symbol(Symbol.toStringTag)' ||\n          sProp === 'Symbol(util.inspect.custom)' ||\n          sProp === 'Symbol(nodejs.util.inspect.custom)'\n        ) {\n          // Return the actual value for these symbols to allow proper inspection\n          return Reflect.get(target, prop, receiver)\n        }\n      }\n\n      // Emit warning on first property access\n      if (!suppressWarningRef.value && typeof prop === 'string') {\n        console.warn(\n          'Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.'\n        )\n        suppressWarningRef.value = true\n      }\n\n      return Reflect.get(target, prop, receiver)\n    },\n  })\n}\n\n/**\n * Deep clones a JSON-serializable object using JSON.parse(JSON.stringify(obj)).\n * Note: Only works for JSON-safe data.\n */\nexport function deepClone<T>(obj: T): T {\n  return JSON.parse(JSON.stringify(obj))\n}\n","import { API_VERSIONS, API_VERSION_HEADER_NAME } from './constants'\nimport { expiresAt, looksLikeFetchResponse, parseResponseAPIVersion } from './helpers'\nimport {\n  AuthResponse,\n  AuthResponsePassword,\n  SSOResponse,\n  GenerateLinkProperties,\n  GenerateLinkResponse,\n  User,\n  UserResponse,\n} from './types'\nimport {\n  AuthApiError,\n  AuthRetryableFetchError,\n  AuthWeakPasswordError,\n  AuthUnknownError,\n  AuthSessionMissingError,\n} from './errors'\n\nexport type Fetch = typeof fetch\n\nexport interface FetchOptions {\n  headers?: {\n    [key: string]: string\n  }\n  noResolveJson?: boolean\n}\n\nexport interface FetchParameters {\n  signal?: AbortSignal\n}\n\nexport type RequestMethodType = 'GET' | 'POST' | 'PUT' | 'DELETE'\n\nconst _getErrorMessage = (err: any): string =>\n  err.msg || err.message || err.error_description || err.error || JSON.stringify(err)\n\nconst NETWORK_ERROR_CODES = [502, 503, 504]\n\nexport async function handleError(error: unknown) {\n  if (!looksLikeFetchResponse(error)) {\n    throw new AuthRetryableFetchError(_getErrorMessage(error), 0)\n  }\n\n  if (NETWORK_ERROR_CODES.includes(error.status)) {\n    // status in 500...599 range - server had an error, request might be retryed.\n    throw new AuthRetryableFetchError(_getErrorMessage(error), error.status)\n  }\n\n  let data: any\n  try {\n    data = await error.json()\n  } catch (e: any) {\n    throw new AuthUnknownError(_getErrorMessage(e), e)\n  }\n\n  let errorCode: string | undefined = undefined\n\n  const responseAPIVersion = parseResponseAPIVersion(error)\n  if (\n    responseAPIVersion &&\n    responseAPIVersion.getTime() >= API_VERSIONS['2024-01-01'].timestamp &&\n    typeof data === 'object' &&\n    data &&\n    typeof data.code === 'string'\n  ) {\n    errorCode = data.code\n  } else if (typeof data === 'object' && data && typeof data.error_code === 'string') {\n    errorCode = data.error_code\n  }\n\n  if (!errorCode) {\n    // Legacy support for weak password errors, when there were no error codes\n    if (\n      typeof data === 'object' &&\n      data &&\n      typeof data.weak_password === 'object' &&\n      data.weak_password &&\n      Array.isArray(data.weak_password.reasons) &&\n      data.weak_password.reasons.length &&\n      data.weak_password.reasons.reduce((a: boolean, i: any) => a && typeof i === 'string', true)\n    ) {\n      throw new AuthWeakPasswordError(\n        _getErrorMessage(data),\n        error.status,\n        data.weak_password.reasons\n      )\n    }\n  } else if (errorCode === 'weak_password') {\n    throw new AuthWeakPasswordError(\n      _getErrorMessage(data),\n      error.status,\n      data.weak_password?.reasons || []\n    )\n  } else if (errorCode === 'session_not_found') {\n    // The `session_id` inside the JWT does not correspond to a row in the\n    // `sessions` table. This usually means the user has signed out, has been\n    // deleted, or their session has somehow been terminated.\n    throw new AuthSessionMissingError()\n  }\n\n  throw new AuthApiError(_getErrorMessage(data), error.status || 500, errorCode)\n}\n\nconst _getRequestParams = (\n  method: RequestMethodType,\n  options?: FetchOptions,\n  parameters?: FetchParameters,\n  body?: object\n) => {\n  const params: { [k: string]: any } = { method, headers: options?.headers || {} }\n\n  if (method === 'GET') {\n    return params\n  }\n\n  params.headers = { 'Content-Type': 'application/json;charset=UTF-8', ...options?.headers }\n  params.body = JSON.stringify(body)\n  return { ...params, ...parameters }\n}\n\ninterface GotrueRequestOptions extends FetchOptions {\n  jwt?: string\n  redirectTo?: string\n  body?: object\n  query?: { [key: string]: string }\n  /**\n   * Function that transforms api response from gotrue into a desirable / standardised format\n   */\n  xform?: (data: any) => any\n}\n\nexport async function _request(\n  fetcher: Fetch,\n  method: RequestMethodType,\n  url: string,\n  options?: GotrueRequestOptions\n) {\n  const headers = {\n    ...options?.headers,\n  }\n\n  if (!headers[API_VERSION_HEADER_NAME]) {\n    headers[API_VERSION_HEADER_NAME] = API_VERSIONS['2024-01-01'].name\n  }\n\n  if (options?.jwt) {\n    headers['Authorization'] = `Bearer ${options.jwt}`\n  }\n\n  const qs = options?.query ?? {}\n  if (options?.redirectTo) {\n    qs['redirect_to'] = options.redirectTo\n  }\n\n  const queryString = Object.keys(qs).length ? '?' + new URLSearchParams(qs).toString() : ''\n  const data = await _handleRequest(\n    fetcher,\n    method,\n    url + queryString,\n    {\n      headers,\n      noResolveJson: options?.noResolveJson,\n    },\n    {},\n    options?.body\n  )\n  return options?.xform ? options?.xform(data) : { data: { ...data }, error: null }\n}\n\nasync function _handleRequest(\n  fetcher: Fetch,\n  method: RequestMethodType,\n  url: string,\n  options?: FetchOptions,\n  parameters?: FetchParameters,\n  body?: object\n): Promise<any> {\n  const requestParams = _getRequestParams(method, options, parameters, body)\n\n  let result: any\n\n  try {\n    result = await fetcher(url, {\n      ...requestParams,\n    })\n  } catch (e) {\n    console.error(e)\n\n    // fetch failed, likely due to a network or CORS error\n    throw new AuthRetryableFetchError(_getErrorMessage(e), 0)\n  }\n\n  if (!result.ok) {\n    await handleError(result)\n  }\n\n  if (options?.noResolveJson) {\n    return result\n  }\n\n  try {\n    return await result.json()\n  } catch (e: any) {\n    await handleError(e)\n  }\n}\n\nexport function _sessionResponse(data: any): AuthResponse {\n  let session = null\n  if (hasSession(data)) {\n    session = { ...data }\n\n    if (!data.expires_at) {\n      session.expires_at = expiresAt(data.expires_in)\n    }\n  }\n\n  const user: User = data.user ?? (data as User)\n  return { data: { session, user }, error: null }\n}\n\nexport function _sessionResponsePassword(data: any): AuthResponsePassword {\n  const response = _sessionResponse(data) as AuthResponsePassword\n\n  if (\n    !response.error &&\n    data.weak_password &&\n    typeof data.weak_password === 'object' &&\n    Array.isArray(data.weak_password.reasons) &&\n    data.weak_password.reasons.length &&\n    data.weak_password.message &&\n    typeof data.weak_password.message === 'string' &&\n    data.weak_password.reasons.reduce((a: boolean, i: any) => a && typeof i === 'string', true)\n  ) {\n    response.data.weak_password = data.weak_password\n  }\n\n  return response\n}\n\nexport function _userResponse(data: any): UserResponse {\n  const user: User = data.user ?? (data as User)\n  return { data: { user }, error: null }\n}\n\nexport function _ssoResponse(data: any): SSOResponse {\n  return { data, error: null }\n}\n\nexport function _generateLinkResponse(data: any): GenerateLinkResponse {\n  const { action_link, email_otp, hashed_token, redirect_to, verification_type, ...rest } = data\n\n  const properties: GenerateLinkProperties = {\n    action_link,\n    email_otp,\n    hashed_token,\n    redirect_to,\n    verification_type,\n  }\n\n  const user: User = { ...rest }\n  return {\n    data: {\n      properties,\n      user,\n    },\n    error: null,\n  }\n}\n\nexport function _noResolveJsonResponse(data: any): Response {\n  return data\n}\n\n/**\n * hasSession checks if the response object contains a valid session\n * @param data A response object\n * @returns true if a session is in the response\n */\nfunction hasSession(data: any): boolean {\n  return data.access_token && data.refresh_token && data.expires_in\n}\n","import { AuthError } from './errors'\nimport { Fetch } from './fetch'\nimport { EIP1193Provider, EthereumSignInInput, Hex } from './web3/ethereum'\nimport type { SolanaSignInInput, SolanaSignInOutput } from './web3/solana'\nimport {\n  ServerCredentialCreationOptions,\n  ServerCredentialRequestOptions,\n  WebAuthnApi,\n} from './webauthn'\nimport {\n  AuthenticationCredential,\n  PublicKeyCredentialCreationOptionsFuture,\n  PublicKeyCredentialRequestOptionsFuture,\n  RegistrationCredential,\n} from './webauthn.dom'\n\n/** One of the providers supported by GoTrue. */\nexport type Provider =\n  | 'apple'\n  | 'azure'\n  | 'bitbucket'\n  | 'discord'\n  | 'facebook'\n  | 'figma'\n  | 'github'\n  | 'gitlab'\n  | 'google'\n  | 'kakao'\n  | 'keycloak'\n  | 'linkedin'\n  | 'linkedin_oidc'\n  | 'notion'\n  | 'slack'\n  | 'slack_oidc'\n  | 'spotify'\n  | 'twitch'\n  /** Uses OAuth 1.0a */\n  | 'twitter'\n  /** Uses OAuth 2.0 */\n  | 'x'\n  | 'workos'\n  | 'zoom'\n  | 'fly'\n\nexport type AuthChangeEventMFA = 'MFA_CHALLENGE_VERIFIED'\n\nexport type AuthChangeEvent =\n  | 'INITIAL_SESSION'\n  | 'PASSWORD_RECOVERY'\n  | 'SIGNED_IN'\n  | 'SIGNED_OUT'\n  | 'TOKEN_REFRESHED'\n  | 'USER_UPDATED'\n  | AuthChangeEventMFA\n\n/**\n * Provide your own global lock implementation instead of the default\n * implementation. The function should acquire a lock for the duration of the\n * `fn` async function, such that no other client instances will be able to\n * hold it at the same time.\n *\n * @experimental\n *\n * @param name Name of the lock to be acquired.\n * @param acquireTimeout If negative, no timeout should occur. If positive it\n *                       should throw an Error with an `isAcquireTimeout`\n *                       property set to true if the operation fails to be\n *                       acquired after this much time (ms).\n * @param fn The operation to execute when the lock is acquired.\n */\nexport type LockFunc = <R>(name: string, acquireTimeout: number, fn: () => Promise<R>) => Promise<R>\n\nexport type GoTrueClientOptions = {\n  /* The URL of the GoTrue server. */\n  url?: string\n  /* Any additional headers to send to the GoTrue server. */\n  headers?: { [key: string]: string }\n  /* Optional key name used for storing tokens in local storage. */\n  storageKey?: string\n  /**\n   * Set to \"true\" if you want to automatically detect OAuth grants in the URL and sign in the user.\n   * Set to \"false\" to disable automatic detection.\n   * Set to a function to provide custom logic for determining if a URL contains a Supabase auth callback.\n   * The function receives the current URL and parsed parameters, and should return true if the URL\n   * should be processed as a Supabase auth callback, or false to ignore it.\n   *\n   * This is useful when your app uses other OAuth providers (e.g., Facebook Login) that also return\n   * access_token in the URL fragment, which would otherwise be incorrectly intercepted by Supabase Auth.\n   *\n   * @example\n   * ```ts\n   * detectSessionInUrl: (url, params) => {\n   *   // Ignore Facebook OAuth redirects\n   *   if (url.pathname === '/facebook/redirect') return false\n   *   // Use default detection for other URLs\n   *   return Boolean(params.access_token || params.error_description)\n   * }\n   * ```\n   */\n  detectSessionInUrl?: boolean | ((url: URL, params: { [parameter: string]: string }) => boolean)\n  /* Set to \"true\" if you want to automatically refresh the token before expiring. */\n  autoRefreshToken?: boolean\n  /* Set to \"true\" if you want to automatically save the user session into local storage. If set to false, session will just be saved in memory. */\n  persistSession?: boolean\n  /* Provide your own local storage implementation to use instead of the browser's local storage. */\n  storage?: SupportedStorage\n  /**\n   * Stores the user object in a separate storage location from the rest of the session data. When non-null, `storage` will only store a JSON object containing the access and refresh token and some adjacent metadata, while `userStorage` will only contain the user object under the key `storageKey + '-user'`.\n   *\n   * When this option is set and cookie storage is used, `getSession()` and other functions that load a session from the cookie store might not return back a user. It's very important to always use `getUser()` to fetch a user object in those scenarios.\n   *\n   * @experimental\n   */\n  userStorage?: SupportedStorage\n  /* A custom fetch implementation. */\n  fetch?: Fetch\n  /* If set to 'pkce' PKCE flow. Defaults to the 'implicit' flow otherwise */\n  flowType?: AuthFlowType\n  /* If debug messages are emitted. Can be used to inspect the behavior of the library. If set to a function, the provided function will be used instead of `console.log()` to perform the logging. */\n  debug?: boolean | ((message: string, ...args: any[]) => void)\n  /**\n   * Provide your own locking mechanism based on the environment. By default no locking is done at this time.\n   *\n   * @experimental\n   */\n  lock?: LockFunc\n  /**\n   * Set to \"true\" if there is a custom authorization header set globally.\n   * @experimental\n   */\n  hasCustomAuthorizationHeader?: boolean\n  /**\n   * If there is an error with the query, throwOnError will reject the promise by\n   * throwing the error instead of returning it as part of a successful response.\n   */\n  throwOnError?: boolean\n  /**\n   * The maximum time in milliseconds to wait for acquiring a cross-tab synchronization lock.\n   *\n   * When multiple browser tabs or windows use the auth client simultaneously, they coordinate\n   * via the Web Locks API to prevent race conditions during session refresh and other operations.\n   * This timeout controls how long to wait for the lock before failing.\n   *\n   * If the lock cannot be acquired within this time, a `LockAcquireTimeoutError` is thrown.\n   * You can catch this by checking `error.isAcquireTimeout === true`.\n   *\n   * - **Positive value**: Wait up to this many milliseconds before timing out\n   * - **Zero (0)**: Fail immediately if the lock is unavailable\n   * - **Negative value**: Wait indefinitely (not recommended - can cause deadlocks)\n   *\n   * @default 10000\n   *\n   * @example\n   * ```ts\n   * const client = createClient(url, key, {\n   *   auth: {\n   *     lockAcquireTimeout: 10000, // 10 seconds\n   *   },\n   * })\n   *\n   * try {\n   *   await client.auth.getSession()\n   * } catch (error) {\n   *   if (error.isAcquireTimeout) {\n   *     // Lock held by another tab/instance, or a previous operation is stuck.\n   *     // Consider: closing other tabs, increasing timeout, or restarting the browser.\n   *     console.error('Could not acquire lock within timeout period.')\n   *   }\n   * }\n   * ```\n   */\n  lockAcquireTimeout?: number\n\n  /**\n   * If true, skips automatic initialization in constructor. Useful for SSR\n   * contexts where initialization timing must be controlled to prevent race\n   * conditions with HTTP response generation.\n   *\n   * @default false\n   */\n  skipAutoInitialize?: boolean\n}\n\nconst WeakPasswordReasons = ['length', 'characters', 'pwned'] as const\n\nexport type WeakPasswordReasons = (typeof WeakPasswordReasons)[number]\nexport type WeakPassword = {\n  reasons: WeakPasswordReasons[]\n  message: string\n}\n\n/**\n * Resolve mapped types and show the derived keys and their types when hovering in\n * VS Code, instead of just showing the names those mapped types are defined with.\n */\nexport type Prettify<T> = T extends Function ? T : { [K in keyof T]: T[K] }\n\n/**\n * A stricter version of TypeScript's Omit that only allows omitting keys that actually exist.\n * This prevents typos and ensures type safety at compile time.\n * Unlike regular Omit, this will error if you try to omit a non-existent key.\n */\nexport type StrictOmit<T, K extends keyof T> = Omit<T, K>\n\n/**\n * a shared result type that encapsulates errors instead of throwing them, allows you to optionally specify the ErrorType\n */\nexport type RequestResult<T, ErrorType extends Error = AuthError> =\n  | {\n      data: T\n      error: null\n    }\n  | {\n      data: null\n      error: Error extends AuthError ? AuthError : ErrorType\n    }\n\n/**\n * similar to RequestResult except it allows you to destructure the possible shape of the success response\n *  {@see RequestResult}\n */\nexport type RequestResultSafeDestructure<T> =\n  | { data: T; error: null }\n  | {\n      data: T extends object ? { [K in keyof T]: null } : null\n      error: AuthError\n    }\n\nexport type AuthResponse = RequestResultSafeDestructure<{\n  user: User | null\n  session: Session | null\n}>\n\nexport type AuthResponsePassword = RequestResultSafeDestructure<{\n  user: User | null\n  session: Session | null\n  weak_password?: WeakPassword | null\n}>\n\n/**\n * AuthOtpResponse is returned when OTP is used.\n *\n * {@see AuthResponse}\n */\nexport type AuthOtpResponse = RequestResultSafeDestructure<{\n  user: null\n  session: null\n  messageId?: string | null\n}>\n\nexport type AuthTokenResponse = RequestResultSafeDestructure<{\n  user: User\n  session: Session\n}>\n\nexport type AuthTokenResponsePassword = RequestResultSafeDestructure<{\n  user: User\n  session: Session\n  weakPassword?: WeakPassword\n}>\n\nexport type OAuthResponse =\n  | {\n      data: {\n        provider: Provider\n        url: string\n      }\n      error: null\n    }\n  | {\n      data: {\n        provider: Provider\n        url: null\n      }\n      error: AuthError\n    }\n\nexport type SSOResponse = RequestResult<{\n  /**\n   * URL to open in a browser which will complete the sign-in flow by\n   * taking the user to the identity provider's authentication flow.\n   *\n   * On browsers you can set the URL to `window.location.href` to take\n   * the user to the authentication flow.\n   */\n  url: string\n}>\n\nexport type UserResponse = RequestResultSafeDestructure<{\n  user: User\n}>\n\nexport interface Session {\n  /**\n   * The oauth provider token. If present, this can be used to make external API requests to the oauth provider used.\n   */\n  provider_token?: string | null\n  /**\n   * The oauth provider refresh token. If present, this can be used to refresh the provider_token via the oauth provider's API.\n   * Not all oauth providers return a provider refresh token. If the provider_refresh_token is missing, please refer to the oauth provider's documentation for information on how to obtain the provider refresh token.\n   */\n  provider_refresh_token?: string | null\n  /**\n   * The access token jwt. It is recommended to set the JWT_EXPIRY to a shorter expiry value.\n   */\n  access_token: string\n  /**\n   * A one-time used refresh token that never expires.\n   */\n  refresh_token: string\n  /**\n   * The number of seconds until the token expires (since it was issued). Returned when a login is confirmed.\n   */\n  expires_in: number\n  /**\n   * A timestamp of when the token will expire. Returned when a login is confirmed.\n   */\n  expires_at?: number\n  token_type: 'bearer'\n\n  /**\n   * When using a separate user storage, accessing properties of this object will throw an error.\n   */\n  user: User\n}\n\nconst AMRMethods = [\n  'password',\n  'otp',\n  'oauth',\n  'totp',\n  'mfa/totp',\n  'mfa/phone',\n  'mfa/webauthn',\n  'anonymous',\n  'sso/saml',\n  'magiclink',\n  'web3',\n  'oauth_provider/authorization_code',\n] as const\n\nexport type AMRMethod = (typeof AMRMethods)[number] | (string & {})\n\n/**\n * An authentication method reference (AMR) entry.\n *\n * An entry designates what method was used by the user to verify their\n * identity and at what time.\n *\n * Note: Custom access token hooks can return AMR claims as either:\n * - An array of AMREntry objects (detailed format with timestamps)\n * - An array of strings (RFC-8176 compliant format)\n *\n * @see {@link GoTrueMFAApi#getAuthenticatorAssuranceLevel}.\n */\nexport interface AMREntry {\n  /** Authentication method name. */\n  method: AMRMethod\n\n  /**\n   * Timestamp when the method was successfully used. Represents number of\n   * seconds since 1st January 1970 (UNIX epoch) in UTC.\n   */\n  timestamp: number\n}\n\nexport interface UserIdentity {\n  id: string\n  user_id: string\n  identity_data?: {\n    [key: string]: any\n  }\n  identity_id: string\n  provider: string\n  created_at?: string\n  last_sign_in_at?: string\n  updated_at?: string\n}\n\nconst FactorTypes = ['totp', 'phone', 'webauthn'] as const\n\n/**\n * Type of factor. `totp` and `phone` supported with this version\n */\nexport type FactorType = (typeof FactorTypes)[number]\n\nconst FactorVerificationStatuses = ['verified', 'unverified'] as const\n\n/**\n * The verification status of the factor, default is `unverified` after `.enroll()`, then `verified` after the user verifies it with `.verify()`\n */\ntype FactorVerificationStatus = (typeof FactorVerificationStatuses)[number]\n\n/**\n * A MFA factor.\n *\n * @see {@link GoTrueMFAApi#enroll}\n * @see {@link GoTrueMFAApi#listFactors}\n * @see {@link GoTrueMFAAdminApi#listFactors}\n */\nexport type Factor<\n  Type extends FactorType = FactorType,\n  Status extends FactorVerificationStatus = (typeof FactorVerificationStatuses)[number],\n> = {\n  /** ID of the factor. */\n  id: string\n\n  /** Friendly name of the factor, useful to disambiguate between multiple factors. */\n  friendly_name?: string\n\n  /**\n   * Type of factor. `totp` and `phone` supported with this version\n   */\n  factor_type: Type\n\n  /**\n   * The verification status of the factor, default is `unverified` after `.enroll()`, then `verified` after the user verifies it with `.verify()`\n   */\n  status: Status\n\n  created_at: string\n  updated_at: string\n  last_challenged_at?: string\n}\n\nexport interface UserAppMetadata {\n  /**\n   * The first provider that the user used to sign up with.\n   */\n  provider?: string\n  /**\n   * A list of all providers that the user has linked to their account.\n   */\n  providers?: string[]\n  [key: string]: any\n}\n\nexport interface UserMetadata {\n  [key: string]: any\n}\n\nexport interface User {\n  id: string\n  app_metadata: UserAppMetadata\n  user_metadata: UserMetadata\n  aud: string\n  confirmation_sent_at?: string\n  recovery_sent_at?: string\n  email_change_sent_at?: string\n  new_email?: string\n  new_phone?: string\n  invited_at?: string\n  action_link?: string\n  email?: string\n  phone?: string\n  created_at: string\n  confirmed_at?: string\n  email_confirmed_at?: string\n  phone_confirmed_at?: string\n  last_sign_in_at?: string\n  role?: string\n  updated_at?: string\n  identities?: UserIdentity[]\n  is_anonymous?: boolean\n  is_sso_user?: boolean\n  factors?: (Factor<FactorType, 'verified'> | Factor<FactorType, 'unverified'>)[]\n  deleted_at?: string\n  banned_until?: string\n}\n\nexport interface UserAttributes {\n  /**\n   * The user's email.\n   */\n  email?: string\n\n  /**\n   * The user's phone.\n   */\n  phone?: string\n\n  /**\n   * The user's password.\n   */\n  password?: string\n\n  /**\n   * The nonce sent for reauthentication if the user's password is to be updated.\n   *\n   * Call reauthenticate() to obtain the nonce first.\n   */\n  nonce?: string\n\n  /**\n   * A custom data object to store the user's metadata. This maps to the `auth.users.raw_user_meta_data` column.\n   *\n   * The `data` should be a JSON object that includes user-specific info, such as their first and last name.\n   *\n   */\n  data?: object\n}\n\nexport interface AdminUserAttributes extends Omit<UserAttributes, 'data'> {\n  /**\n   * A custom data object to store the user's metadata. This maps to the `auth.users.raw_user_meta_data` column.\n   *\n   *\n   * The `user_metadata` should be a JSON object that includes user-specific info, such as their first and last name.\n   *\n   * Note: When using the GoTrueAdminApi and wanting to modify a user's metadata,\n   * this attribute is used instead of UserAttributes data.\n   *\n   */\n  user_metadata?: object\n\n  /**\n   * A custom data object to store the user's application specific metadata. This maps to the `auth.users.app_metadata` column.\n   *\n   * Only a service role can modify.\n   *\n   * The `app_metadata` should be a JSON object that includes app-specific info, such as identity providers, roles, and other\n   * access control information.\n   */\n  app_metadata?: object\n\n  /**\n   * Sets the user's email as confirmed when true, or unconfirmed when false.\n   *\n   * Only a service role can modify.\n   */\n  email_confirm?: boolean\n\n  /**\n   * Sets the user's phone as confirmed when true, or unconfirmed when false.\n   *\n   * Only a service role can modify.\n   */\n  phone_confirm?: boolean\n\n  /**\n   * Determines how long a user is banned for.\n   *\n   * The format for the ban duration follows a strict sequence of decimal numbers with a unit suffix.\n   * Valid time units are \"ns\", \"us\" (or \"s\"), \"ms\", \"s\", \"m\", \"h\".\n   *\n   * For example, some possible durations include: '300ms', '2h45m'.\n   *\n   * Setting the ban duration to 'none' lifts the ban on the user.\n   */\n  ban_duration?: string | 'none'\n\n  /**\n   * The `role` claim set in the user's access token JWT.\n   *\n   * When a user signs up, this role is set to `authenticated` by default. You should only modify the `role` if you need to provision several levels of admin access that have different permissions on individual columns in your database.\n   *\n   * Setting this role to `service_role` is not recommended as it grants the user admin privileges.\n   */\n  role?: string\n\n  /**\n   * The `password_hash` for the user's password.\n   *\n   * Allows you to specify a password hash for the user. This is useful for migrating a user's password hash from another service.\n   *\n   * Supports bcrypt, scrypt (firebase), and argon2 password hashes.\n   */\n  password_hash?: string\n\n  /**\n   * The `id` for the user.\n   *\n   * Allows you to overwrite the default `id` set for the user.\n   */\n  id?: string\n}\n\nexport interface Subscription {\n  /**\n   * A unique identifier for this subscription, set by the client.\n   * This is an internal identifier used for managing callbacks and should not be\n   * relied upon by application code. Use the unsubscribe() method to remove listeners.\n   */\n  id: string | symbol\n  /**\n   * The function to call every time there is an event. eg: (eventName) => {}\n   */\n  callback: (event: AuthChangeEvent, session: Session | null) => void\n  /**\n   * Call this to remove the listener.\n   */\n  unsubscribe: () => void\n}\n\nexport type SignInAnonymouslyCredentials = {\n  options?: {\n    /**\n     * A custom data object to store the user's metadata. This maps to the `auth.users.raw_user_meta_data` column.\n     *\n     * The `data` should be a JSON object that includes user-specific info, such as their first and last name.\n     */\n    data?: object\n    /** Verification token received when the user completes the captcha on the site. */\n    captchaToken?: string\n  }\n}\n\nexport type SignUpWithPasswordCredentials = Prettify<\n  PasswordCredentialsBase & {\n    options?: {\n      emailRedirectTo?: string // only for email\n      data?: object\n      captchaToken?: string\n      channel?: 'sms' | 'whatsapp' // only for phone\n    }\n  }\n>\n\ntype PasswordCredentialsBase =\n  | { email: string; password: string }\n  | { phone: string; password: string }\n\nexport type SignInWithPasswordCredentials = PasswordCredentialsBase & {\n  options?: {\n    captchaToken?: string\n  }\n}\n\nexport type SignInWithPasswordlessCredentials =\n  | {\n      /** The user's email address. */\n      email: string\n      options?: {\n        /** The redirect url embedded in the email link */\n        emailRedirectTo?: string\n        /** If set to false, this method will not create a new user. Defaults to true. */\n        shouldCreateUser?: boolean\n        /**\n         * A custom data object to store the user's metadata. This maps to the `auth.users.raw_user_meta_data` column.\n         *\n         * The `data` should be a JSON object that includes user-specific info, such as their first and last name.\n         */\n        data?: object\n        /** Verification token received when the user completes the captcha on the site. */\n        captchaToken?: string\n      }\n    }\n  | {\n      /** The user's phone number. */\n      phone: string\n      options?: {\n        /** If set to false, this method will not create a new user. Defaults to true. */\n        shouldCreateUser?: boolean\n        /**\n         * A custom data object to store the user's metadata. This maps to the `auth.users.raw_user_meta_data` column.\n         *\n         * The `data` should be a JSON object that includes user-specific info, such as their first and last name.\n         */\n        data?: object\n        /** Verification token received when the user completes the captcha on the site. */\n        captchaToken?: string\n        /** Messaging channel to use (e.g. whatsapp or sms) */\n        channel?: 'sms' | 'whatsapp'\n      }\n    }\n\nexport type AuthFlowType = 'implicit' | 'pkce'\nexport type SignInWithOAuthCredentials = {\n  /** One of the providers supported by GoTrue. */\n  provider: Provider\n  options?: {\n    /** A URL to send the user to after they are confirmed. */\n    redirectTo?: string\n    /** A space-separated list of scopes granted to the OAuth application. */\n    scopes?: string\n    /** An object of query params */\n    queryParams?: { [key: string]: string }\n    /** If set to true does not immediately redirect the current browser context to visit the OAuth authorization page for the provider. */\n    skipBrowserRedirect?: boolean\n  }\n}\n\nexport type SignInWithIdTokenCredentials = {\n  /** Provider name or OIDC `iss` value identifying which provider should be used to verify the provided token. Supported names: `google`, `apple`, `azure`, `facebook`, `kakao`, `keycloak` (deprecated). */\n  provider: 'google' | 'apple' | 'azure' | 'facebook' | 'kakao' | (string & {})\n  /** OIDC ID token issued by the specified provider. The `iss` claim in the ID token must match the supplied provider. Some ID tokens contain an `at_hash` which require that you provide an `access_token` value to be accepted properly. If the token contains a `nonce` claim you must supply the nonce used to obtain the ID token. */\n  token: string\n  /** If the ID token contains an `at_hash` claim, then the hash of this value is compared to the value in the ID token. */\n  access_token?: string\n  /** If the ID token contains a `nonce` claim, then the hash of this value is compared to the value in the ID token. */\n  nonce?: string\n  options?: {\n    /** Verification token received when the user completes the captcha on the site. */\n    captchaToken?: string\n  }\n}\n\nexport type SolanaWallet = {\n  signIn?: (...inputs: SolanaSignInInput[]) => Promise<SolanaSignInOutput | SolanaSignInOutput[]>\n  publicKey?: {\n    toBase58: () => string\n  } | null\n\n  signMessage?: (message: Uint8Array, encoding?: 'utf8' | string) => Promise<Uint8Array> | undefined\n}\n\nexport type SolanaWeb3Credentials =\n  | {\n      chain: 'solana'\n\n      /** Wallet interface to use. If not specified will default to `window.solana`. */\n      wallet?: SolanaWallet\n\n      /** Optional statement to include in the Sign in with Solana message. Must not include new line characters. Most wallets like Phantom **require specifying a statement!** */\n      statement?: string\n\n      options?: {\n        /** URL to use with the wallet interface. Some wallets do not allow signing a message for URLs different from the current page. */\n        url?: string\n\n        /** Verification token received when the user completes the captcha on the site. */\n        captchaToken?: string\n\n        signInWithSolana?: Partial<\n          Omit<SolanaSignInInput, 'version' | 'chain' | 'domain' | 'uri' | 'statement'>\n        >\n      }\n    }\n  | {\n      chain: 'solana'\n\n      /** Sign in with Solana compatible message. Must include `Issued At`, `URI` and `Version`. */\n      message: string\n\n      /** Ed25519 signature of the message. */\n      signature: Uint8Array\n\n      options?: {\n        /** Verification token received when the user completes the captcha on the site. */\n        captchaToken?: string\n      }\n    }\n\nexport type EthereumWallet = EIP1193Provider\n\nexport type EthereumWeb3Credentials =\n  | {\n      chain: 'ethereum'\n\n      /** Wallet interface to use. If not specified will default to `window.ethereum`. */\n      wallet?: EthereumWallet\n\n      /** Optional statement to include in the Sign in with Ethereum message. Must not include new line characters. Most wallets like Phantom **require specifying a statement!** */\n      statement?: string\n\n      options?: {\n        /** URL to use with the wallet interface. Some wallets do not allow signing a message for URLs different from the current page. */\n        url?: string\n\n        /** Verification token received when the user completes the captcha on the site. */\n        captchaToken?: string\n\n        signInWithEthereum?: Partial<\n          Omit<EthereumSignInInput, 'version' | 'domain' | 'uri' | 'statement'>\n        >\n      }\n    }\n  | {\n      chain: 'ethereum'\n\n      /** Sign in with Ethereum compatible message. Must include `Issued At`, `URI` and `Version`. */\n      message: string\n\n      /** Ethereum curve (secp256k1) signature of the message. */\n      signature: Hex\n\n      options?: {\n        /** Verification token received when the user completes the captcha on the site. */\n        captchaToken?: string\n      }\n    }\n\nexport type Web3Credentials = SolanaWeb3Credentials | EthereumWeb3Credentials\n\nexport type VerifyOtpParams = VerifyMobileOtpParams | VerifyEmailOtpParams | VerifyTokenHashParams\nexport interface VerifyMobileOtpParams {\n  /** The user's phone number. */\n  phone: string\n  /** The otp sent to the user's phone number. */\n  token: string\n  /** The user's verification type. */\n  type: MobileOtpType\n  options?: {\n    /** A URL to send the user to after they are confirmed. */\n    redirectTo?: string\n\n    /**\n     * Verification token received when the user completes the captcha on the site.\n     *\n     * @deprecated\n     */\n    captchaToken?: string\n  }\n}\nexport interface VerifyEmailOtpParams {\n  /** The user's email address. */\n  email: string\n  /** The otp sent to the user's email address. */\n  token: string\n  /** The user's verification type. */\n  type: EmailOtpType\n  options?: {\n    /** A URL to send the user to after they are confirmed. */\n    redirectTo?: string\n\n    /** Verification token received when the user completes the captcha on the site.\n     *\n     * @deprecated\n     */\n    captchaToken?: string\n  }\n}\n\nexport interface VerifyTokenHashParams {\n  /** The token hash used in an email link */\n  token_hash: string\n\n  /** The user's verification type. */\n  type: EmailOtpType\n}\n\nexport type MobileOtpType = 'sms' | 'phone_change'\nexport type EmailOtpType = 'signup' | 'invite' | 'magiclink' | 'recovery' | 'email_change' | 'email'\n\nexport type ResendParams =\n  | {\n      type: Extract<EmailOtpType, 'signup' | 'email_change'>\n      email: string\n      options?: {\n        /** A URL to send the user to after they have signed-in. */\n        emailRedirectTo?: string\n        /** Verification token received when the user completes the captcha on the site. */\n        captchaToken?: string\n      }\n    }\n  | {\n      type: Extract<MobileOtpType, 'sms' | 'phone_change'>\n      phone: string\n      options?: {\n        /** Verification token received when the user completes the captcha on the site. */\n        captchaToken?: string\n      }\n    }\n\nexport type SignInWithSSO =\n  | {\n      /** UUID of the SSO provider to invoke single-sign on to. */\n      providerId: string\n\n      options?: {\n        /** A URL to send the user to after they have signed-in. */\n        redirectTo?: string\n        /** Verification token received when the user completes the captcha on the site. */\n        captchaToken?: string\n        /**\n         * If set to true, the redirect will not happen on the client side.\n         * This parameter is used when you wish to handle the redirect yourself.\n         * Defaults to false.\n         */\n        skipBrowserRedirect?: boolean\n      }\n    }\n  | {\n      /** Domain name of the organization for which to invoke single-sign on. */\n      domain: string\n\n      options?: {\n        /** A URL to send the user to after they have signed-in. */\n        redirectTo?: string\n        /** Verification token received when the user completes the captcha on the site. */\n        captchaToken?: string\n        /**\n         * If set to true, the redirect will not happen on the client side.\n         * This parameter is used when you wish to handle the redirect yourself.\n         * Defaults to false.\n         */\n        skipBrowserRedirect?: boolean\n      }\n    }\n\nexport type GenerateSignupLinkParams = {\n  type: 'signup'\n  email: string\n  password: string\n  options?: Pick<GenerateLinkOptions, 'data' | 'redirectTo'>\n}\n\nexport type GenerateInviteOrMagiclinkParams = {\n  type: 'invite' | 'magiclink'\n  /** The user's email */\n  email: string\n  options?: Pick<GenerateLinkOptions, 'data' | 'redirectTo'>\n}\n\nexport type GenerateRecoveryLinkParams = {\n  type: 'recovery'\n  /** The user's email */\n  email: string\n  options?: Pick<GenerateLinkOptions, 'redirectTo'>\n}\n\nexport type GenerateEmailChangeLinkParams = {\n  type: 'email_change_current' | 'email_change_new'\n  /** The user's email */\n  email: string\n  /**\n   * The user's new email. Only required if type is 'email_change_current' or 'email_change_new'.\n   */\n  newEmail: string\n  options?: Pick<GenerateLinkOptions, 'redirectTo'>\n}\n\nexport interface GenerateLinkOptions {\n  /**\n   * A custom data object to store the user's metadata. This maps to the `auth.users.raw_user_meta_data` column.\n   *\n   * The `data` should be a JSON object that includes user-specific info, such as their first and last name.\n   */\n  data?: object\n  /** The URL which will be appended to the email link generated. */\n  redirectTo?: string\n}\n\nexport type GenerateLinkParams =\n  | GenerateSignupLinkParams\n  | GenerateInviteOrMagiclinkParams\n  | GenerateRecoveryLinkParams\n  | GenerateEmailChangeLinkParams\n\nexport type GenerateLinkResponse = RequestResultSafeDestructure<{\n  properties: GenerateLinkProperties\n  user: User\n}>\n\n/** The properties related to the email link generated  */\nexport type GenerateLinkProperties = {\n  /**\n   * The email link to send to the user.\n   * The action_link follows the following format: auth/v1/verify?type={verification_type}&token={hashed_token}&redirect_to={redirect_to}\n   * */\n  action_link: string\n  /**\n   * The raw email OTP.\n   * You should send this in the email if you want your users to verify using an OTP instead of the action link.\n   * */\n  email_otp: string\n  /**\n   * The hashed token appended to the action link.\n   * */\n  hashed_token: string\n  /** The URL appended to the action link. */\n  redirect_to: string\n  /** The verification type that the email link is associated to. */\n  verification_type: GenerateLinkType\n}\n\nexport type GenerateLinkType =\n  | 'signup'\n  | 'invite'\n  | 'magiclink'\n  | 'recovery'\n  | 'email_change_current'\n  | 'email_change_new'\n\nexport type MFAEnrollParams = MFAEnrollTOTPParams | MFAEnrollPhoneParams | MFAEnrollWebauthnParams\n\nexport type MFAUnenrollParams = {\n  /** ID of the factor being unenrolled. */\n  factorId: string\n}\n\ntype MFAVerifyParamsBase = {\n  /** ID of the factor being verified. Returned in enroll(). */\n  factorId: string\n  /** ID of the challenge being verified. Returned in challenge(). */\n  challengeId: string\n}\n\ntype MFAVerifyTOTPParamFields = {\n  /** Verification code provided by the user. */\n  code: string\n}\n\nexport type MFAVerifyTOTPParams = Prettify<MFAVerifyParamsBase & MFAVerifyTOTPParamFields>\n\ntype MFAVerifyPhoneParamFields = MFAVerifyTOTPParamFields\n\nexport type MFAVerifyPhoneParams = Prettify<MFAVerifyParamsBase & MFAVerifyPhoneParamFields>\n\ntype MFAVerifyWebauthnParamFieldsBase = {\n  /** Relying party ID */\n  rpId: string\n  /** Relying party origins */\n  rpOrigins?: string[]\n}\n\ntype MFAVerifyWebauthnCredentialParamFields<T extends 'create' | 'request' = 'create' | 'request'> =\n  {\n    /** Operation type */\n    type: T\n    /** Creation response from the authenticator (for enrollment/unverified factors) */\n    credential_response: T extends 'create' ? RegistrationCredential : AuthenticationCredential\n  }\n\n/**\n * WebAuthn-specific fields for MFA verification.\n * Supports both credential creation (registration) and request (authentication) flows.\n * @template T - Type of WebAuthn operation: 'create' for registration, 'request' for authentication\n */\nexport type MFAVerifyWebauthnParamFields<T extends 'create' | 'request' = 'create' | 'request'> = {\n  webauthn: MFAVerifyWebauthnParamFieldsBase & MFAVerifyWebauthnCredentialParamFields<T>\n}\n\n/**\n * Parameters for WebAuthn MFA verification.\n * Used to verify WebAuthn credentials after challenge.\n * @template T - Type of WebAuthn operation: 'create' for registration, 'request' for authentication\n * @see {@link https://w3c.github.io/webauthn/#sctn-verifying-assertion W3C WebAuthn Spec - Verifying an Authentication Assertion}\n */\nexport type MFAVerifyWebauthnParams<T extends 'create' | 'request' = 'create' | 'request'> =\n  Prettify<MFAVerifyParamsBase & MFAVerifyWebauthnParamFields<T>>\n\nexport type MFAVerifyParams = MFAVerifyTOTPParams | MFAVerifyPhoneParams | MFAVerifyWebauthnParams\n\ntype MFAChallengeParamsBase = {\n  /** ID of the factor to be challenged. Returned in enroll(). */\n  factorId: string\n}\n\nconst MFATOTPChannels = ['sms', 'whatsapp'] as const\nexport type MFATOTPChannel = (typeof MFATOTPChannels)[number]\n\nexport type MFAChallengeTOTPParams = Prettify<MFAChallengeParamsBase>\n\ntype MFAChallengePhoneParamFields<Channel extends MFATOTPChannel = MFATOTPChannel> = {\n  /** Messaging channel to use (e.g. whatsapp or sms). Only relevant for phone factors */\n  channel: Channel\n}\n\nexport type MFAChallengePhoneParams = Prettify<\n  MFAChallengeParamsBase & MFAChallengePhoneParamFields\n>\n\n/** WebAuthn parameters for WebAuthn factor challenge */\ntype MFAChallengeWebauthnParamFields = {\n  webauthn: {\n    /** Relying party ID */\n    rpId: string\n    /** Relying party origins*/\n    rpOrigins?: string[]\n  }\n}\n\n/**\n * Parameters for initiating a WebAuthn MFA challenge.\n * Includes Relying Party information needed for WebAuthn ceremonies.\n * @see {@link https://w3c.github.io/webauthn/#sctn-rp-operations W3C WebAuthn Spec - Relying Party Operations}\n */\nexport type MFAChallengeWebauthnParams = Prettify<\n  MFAChallengeParamsBase & MFAChallengeWebauthnParamFields\n>\n\nexport type MFAChallengeParams =\n  | MFAChallengeTOTPParams\n  | MFAChallengePhoneParams\n  | MFAChallengeWebauthnParams\n\ntype MFAChallengeAndVerifyParamsBase = Omit<MFAVerifyParamsBase, 'challengeId'>\n\ntype MFAChallengeAndVerifyTOTPParamFields = MFAVerifyTOTPParamFields\n\ntype MFAChallengeAndVerifyTOTPParams = Prettify<\n  MFAChallengeAndVerifyParamsBase & MFAChallengeAndVerifyTOTPParamFields\n>\n\nexport type MFAChallengeAndVerifyParams = MFAChallengeAndVerifyTOTPParams\n\n/**\n * Data returned after successful MFA verification.\n * Contains new session tokens and updated user information.\n */\nexport type AuthMFAVerifyResponseData = {\n  /** New access token (JWT) after successful verification. */\n  access_token: string\n\n  /** Type of token, always `bearer`. */\n  token_type: 'bearer'\n\n  /** Number of seconds in which the access token will expire. */\n  expires_in: number\n\n  /** Refresh token you can use to obtain new access tokens when expired. */\n  refresh_token: string\n\n  /** Updated user profile. */\n  user: User\n}\n\n/**\n * Response type for MFA verification operations.\n * Returns session tokens on successful verification.\n */\nexport type AuthMFAVerifyResponse = RequestResult<AuthMFAVerifyResponseData>\n\nexport type AuthMFAEnrollResponse =\n  | AuthMFAEnrollTOTPResponse\n  | AuthMFAEnrollPhoneResponse\n  | AuthMFAEnrollWebauthnResponse\n\nexport type AuthMFAUnenrollResponse = RequestResult<{\n  /** ID of the factor that was successfully unenrolled. */\n  id: string\n}>\n\ntype AuthMFAChallengeResponseBase<T extends FactorType> = {\n  /** ID of the newly created challenge. */\n  id: string\n\n  /** Factor Type which generated the challenge */\n  type: T\n\n  /** Timestamp in UNIX seconds when this challenge will no longer be usable. */\n  expires_at: number\n}\n\ntype AuthMFAChallengeTOTPResponseFields = {\n  /** no extra fields for now, kept for consistency and for possible future changes  */\n}\n\nexport type AuthMFAChallengeTOTPResponse = RequestResult<\n  Prettify<AuthMFAChallengeResponseBase<'totp'> & AuthMFAChallengeTOTPResponseFields>\n>\n\ntype AuthMFAChallengePhoneResponseFields = {\n  /** no extra fields for now, kept for consistency and for possible future changes  */\n}\n\nexport type AuthMFAChallengePhoneResponse = RequestResult<\n  Prettify<AuthMFAChallengeResponseBase<'phone'> & AuthMFAChallengePhoneResponseFields>\n>\n\ntype AuthMFAChallengeWebauthnResponseFields = {\n  webauthn:\n    | {\n        type: 'create'\n        credential_options: { publicKey: PublicKeyCredentialCreationOptionsFuture }\n      }\n    | {\n        type: 'request'\n        credential_options: { publicKey: PublicKeyCredentialRequestOptionsFuture }\n      }\n}\n\n/**\n * Response type for WebAuthn MFA challenge.\n * Contains credential creation or request options from the server.\n * @see {@link https://w3c.github.io/webauthn/#sctn-credential-creation W3C WebAuthn Spec - Credential Creation}\n */\nexport type AuthMFAChallengeWebauthnResponse = RequestResult<\n  Prettify<AuthMFAChallengeResponseBase<'webauthn'> & AuthMFAChallengeWebauthnResponseFields>\n>\n\ntype AuthMFAChallengeWebauthnResponseFieldsJSON = {\n  webauthn:\n    | {\n        type: 'create'\n        credential_options: { publicKey: ServerCredentialCreationOptions }\n      }\n    | {\n        type: 'request'\n        credential_options: { publicKey: ServerCredentialRequestOptions }\n      }\n}\n\n/**\n * JSON-serializable version of WebAuthn challenge response.\n * Used for server communication with base64url-encoded binary fields.\n */\nexport type AuthMFAChallengeWebauthnResponseDataJSON = Prettify<\n  AuthMFAChallengeResponseBase<'webauthn'> & AuthMFAChallengeWebauthnResponseFieldsJSON\n>\n\n/**\n * Server response type for WebAuthn MFA challenge.\n * Contains JSON-formatted WebAuthn options ready for browser API.\n */\nexport type AuthMFAChallengeWebauthnServerResponse =\n  RequestResult<AuthMFAChallengeWebauthnResponseDataJSON>\n\nexport type AuthMFAChallengeResponse =\n  | AuthMFAChallengeTOTPResponse\n  | AuthMFAChallengePhoneResponse\n  | AuthMFAChallengeWebauthnResponse\n\n/** response of ListFactors, which should contain all the types of factors that are available, this ensures we always include all */\nexport type AuthMFAListFactorsResponse<T extends typeof FactorTypes = typeof FactorTypes> =\n  RequestResult<\n    {\n      /** All available factors (verified and unverified). */\n      all: Prettify<Factor>[]\n\n      // Dynamically create a property for each factor type with only verified factors\n    } & {\n      [K in T[number]]: Prettify<Factor<K, 'verified'>>[]\n    }\n  >\n\nexport type AuthenticatorAssuranceLevels = 'aal1' | 'aal2'\n\nexport type AuthMFAGetAuthenticatorAssuranceLevelResponse = RequestResult<{\n  /** Current AAL level of the session. */\n  currentLevel: AuthenticatorAssuranceLevels | null\n\n  /**\n   * Next possible AAL level for the session. If the next level is higher\n   * than the current one, the user should go through MFA.\n   *\n   * @see {@link GoTrueMFAApi#challenge}\n   */\n  nextLevel: AuthenticatorAssuranceLevels | null\n\n  /**\n   * A list of all authentication methods attached to this session. Use\n   * the information here to detect the last time a user verified a\n   * factor, for example if implementing a step-up scenario.\n   *\n   * Supports both RFC-8176 compliant format (string[]) and detailed format (AMREntry[]).\n   * - String format: ['password', 'otp'] - RFC-8176 compliant\n   * - Object format: [{ method: 'password', timestamp: 1234567890 }] - includes timestamps\n   */\n  currentAuthenticationMethods: AMREntry[] | string[]\n}>\n\n/**\n * Contains the full multi-factor authentication API.\n *\n */\nexport interface GoTrueMFAApi {\n  /**\n   * Starts the enrollment process for a new Multi-Factor Authentication (MFA)\n   * factor. This method creates a new `unverified` factor.\n   * To verify a factor, present the QR code or secret to the user and ask them to add it to their\n   * authenticator app.\n   * The user has to enter the code from their authenticator app to verify it.\n   *\n   * Upon verifying a factor, all other sessions are logged out and the current session's authenticator level is promoted to `aal2`.\n   */\n  enroll(params: MFAEnrollTOTPParams): Promise<AuthMFAEnrollTOTPResponse>\n  enroll(params: MFAEnrollPhoneParams): Promise<AuthMFAEnrollPhoneResponse>\n  enroll(params: MFAEnrollWebauthnParams): Promise<AuthMFAEnrollWebauthnResponse>\n  enroll(params: MFAEnrollParams): Promise<AuthMFAEnrollResponse>\n\n  /**\n   * Prepares a challenge used to verify that a user has access to a MFA\n   * factor.\n   */\n  challenge(params: MFAChallengeTOTPParams): Promise<Prettify<AuthMFAChallengeTOTPResponse>>\n  challenge(params: MFAChallengePhoneParams): Promise<Prettify<AuthMFAChallengePhoneResponse>>\n  challenge(params: MFAChallengeWebauthnParams): Promise<Prettify<AuthMFAChallengeWebauthnResponse>>\n  challenge(params: MFAChallengeParams): Promise<AuthMFAChallengeResponse>\n\n  /**\n   * Verifies a code against a challenge. The verification code is\n   * provided by the user by entering a code seen in their authenticator app.\n   */\n  verify(params: MFAVerifyTOTPParams): Promise<AuthMFAVerifyResponse>\n  verify(params: MFAVerifyPhoneParams): Promise<AuthMFAVerifyResponse>\n  verify(params: MFAVerifyWebauthnParams): Promise<AuthMFAVerifyResponse>\n  verify(params: MFAVerifyParams): Promise<AuthMFAVerifyResponse>\n\n  /**\n   * Unenroll removes a MFA factor.\n   * A user has to have an `aal2` authenticator level in order to unenroll a `verified` factor.\n   */\n  unenroll(params: MFAUnenrollParams): Promise<AuthMFAUnenrollResponse>\n\n  /**\n   * Helper method which creates a challenge and immediately uses the given code to verify against it thereafter. The verification code is\n   * provided by the user by entering a code seen in their authenticator app.\n   */\n  challengeAndVerify(params: MFAChallengeAndVerifyParams): Promise<AuthMFAVerifyResponse>\n\n  /**\n   * Returns the list of MFA factors enabled for this user.\n   *\n   * @see {@link GoTrueMFAApi#enroll}\n   * @see {@link GoTrueMFAApi#getAuthenticatorAssuranceLevel}\n   * @see {@link GoTrueClient#getUser}\n   *\n   */\n  listFactors(): Promise<AuthMFAListFactorsResponse>\n\n  /**\n   * Returns the Authenticator Assurance Level (AAL) for the active session.\n   *\n   * - `aal1` (or `null`) means that the user's identity has been verified only\n   * with a conventional login (email+password, OTP, magic link, social login,\n   * etc.).\n   * - `aal2` means that the user's identity has been verified both with a conventional login and at least one MFA factor.\n   *\n   * When called without a JWT parameter, this method is fairly quick (microseconds)\n   * and rarely uses the network. When a JWT is provided (useful in server-side\n   * environments like Edge Functions where no session is stored), this method\n   * will make a network request to validate the user and fetch their MFA factors.\n   *\n   * @param jwt Takes in an optional access token JWT. If no JWT is provided, the JWT from the current session is used.\n   */\n  getAuthenticatorAssuranceLevel(\n    jwt?: string\n  ): Promise<AuthMFAGetAuthenticatorAssuranceLevelResponse>\n\n  // namespace for the webauthn methods\n  webauthn: WebAuthnApi\n}\n\n/**\n * @expermental\n */\nexport type AuthMFAAdminDeleteFactorResponse = RequestResult<{\n  /** ID of the factor that was successfully deleted. */\n  id: string\n}>\n/**\n * @expermental\n */\nexport type AuthMFAAdminDeleteFactorParams = {\n  /** ID of the MFA factor to delete. */\n  id: string\n\n  /** ID of the user whose factor is being deleted. */\n  userId: string\n}\n\n/**\n * @expermental\n */\nexport type AuthMFAAdminListFactorsResponse = RequestResult<{\n  /** All factors attached to the user. */\n  factors: Factor[]\n}>\n\n/**\n * @expermental\n */\nexport type AuthMFAAdminListFactorsParams = {\n  /** ID of the user. */\n  userId: string\n}\n\n/**\n * Contains the full multi-factor authentication administration API.\n *\n * @expermental\n */\nexport interface GoTrueAdminMFAApi {\n  /**\n   * Lists all factors associated to a user.\n   *\n   */\n  listFactors(params: AuthMFAAdminListFactorsParams): Promise<AuthMFAAdminListFactorsResponse>\n\n  /**\n   * Deletes a factor on a user. This will log the user out of all active\n   * sessions if the deleted factor was verified.\n   *\n   * @see {@link GoTrueMFAApi#unenroll}\n   *\n   * @expermental\n   */\n  deleteFactor(params: AuthMFAAdminDeleteFactorParams): Promise<AuthMFAAdminDeleteFactorResponse>\n}\n\ntype AnyFunction = (...args: any[]) => any\ntype MaybePromisify<T> = T | Promise<T>\n\ntype PromisifyMethods<T> = {\n  [K in keyof T]: T[K] extends AnyFunction\n    ? (...args: Parameters<T[K]>) => MaybePromisify<ReturnType<T[K]>>\n    : T[K]\n}\n\nexport type SupportedStorage = PromisifyMethods<\n  Pick<Storage, 'getItem' | 'setItem' | 'removeItem'>\n> & {\n  /**\n   * If set to `true` signals to the library that the storage medium is used\n   * on a server and the values may not be authentic, such as reading from\n   * request cookies. Implementations should not set this to true if the client\n   * is used on a server that reads storage information from authenticated\n   * sources, such as a secure database or file.\n   */\n  isServer?: boolean\n}\n\nexport type InitializeResult = { error: AuthError | null }\n\nexport type CallRefreshTokenResult = RequestResult<Session>\n\nexport type Pagination = {\n  [key: string]: any\n  nextPage: number | null\n  lastPage: number\n  total: number\n}\n\nexport type PageParams = {\n  /** The page number */\n  page?: number\n  /** Number of items returned per page */\n  perPage?: number\n}\n\nexport type SignOut = {\n  /**\n   * Determines which sessions should be\n   * logged out. Global means all\n   * sessions by this account. Local\n   * means only this session. Others\n   * means all other sessions except the\n   * current one. When using others,\n   * there is no sign-out event fired on\n   * the current session!\n   */\n  scope?: 'global' | 'local' | 'others'\n}\n\ntype MFAEnrollParamsBase<T extends FactorType> = {\n  /** The type of factor being enrolled. */\n  factorType: T\n  /** Human readable name assigned to the factor. */\n  friendlyName?: string\n}\n\ntype MFAEnrollTOTPParamFields = {\n  /** Domain which the user is enrolled with. */\n  issuer?: string\n}\n\nexport type MFAEnrollTOTPParams = Prettify<MFAEnrollParamsBase<'totp'> & MFAEnrollTOTPParamFields>\n\ntype MFAEnrollPhoneParamFields = {\n  /** Phone number associated with a factor. Number should conform to E.164 format */\n  phone: string\n}\nexport type MFAEnrollPhoneParams = Prettify<\n  MFAEnrollParamsBase<'phone'> & MFAEnrollPhoneParamFields\n>\n\ntype MFAEnrollWebauthnFields = {\n  /** no extra fields for now, kept for consistency and for possible future changes  */\n}\n\n/**\n * Parameters for enrolling a WebAuthn factor.\n * Creates an unverified WebAuthn factor that must be verified with a credential.\n * @see {@link https://w3c.github.io/webauthn/#sctn-registering-a-new-credential W3C WebAuthn Spec - Registering a New Credential}\n */\nexport type MFAEnrollWebauthnParams = Prettify<\n  MFAEnrollParamsBase<'webauthn'> & MFAEnrollWebauthnFields\n>\n\ntype AuthMFAEnrollResponseBase<T extends FactorType> = {\n  /** ID of the factor that was just enrolled (in an unverified state). */\n  id: string\n\n  /** Type of MFA factor.*/\n  type: T\n\n  /** Friendly name of the factor, useful for distinguishing between factors **/\n  friendly_name?: string\n}\n\ntype AuthMFAEnrollTOTPResponseFields = {\n  /** TOTP enrollment information. */\n  totp: {\n    /** Contains a QR code encoding the authenticator URI. You can\n     * convert it to a URL by prepending `data:image/svg+xml;utf-8,` to\n     * the value. Avoid logging this value to the console. */\n    qr_code: string\n\n    /** The TOTP secret (also encoded in the QR code). Show this secret\n     * in a password-style field to the user, in case they are unable to\n     * scan the QR code. Avoid logging this value to the console. */\n    secret: string\n\n    /** The authenticator URI encoded within the QR code, should you need\n     * to use it. Avoid loggin this value to the console. */\n    uri: string\n  }\n}\n\nexport type AuthMFAEnrollTOTPResponse = RequestResult<\n  Prettify<AuthMFAEnrollResponseBase<'totp'> & AuthMFAEnrollTOTPResponseFields>\n>\n\ntype AuthMFAEnrollPhoneResponseFields = {\n  /** Phone number of the MFA factor in E.164 format. Used to send messages  */\n  phone: string\n}\n\nexport type AuthMFAEnrollPhoneResponse = RequestResult<\n  Prettify<AuthMFAEnrollResponseBase<'phone'> & AuthMFAEnrollPhoneResponseFields>\n>\n\ntype AuthMFAEnrollWebauthnFields = {\n  /** no extra fields for now, kept for consistency and for possible future changes  */\n}\n\n/**\n * Response type for WebAuthn factor enrollment.\n * Returns the enrolled factor ID and metadata.\n * @see {@link https://w3c.github.io/webauthn/#sctn-registering-a-new-credential W3C WebAuthn Spec - Registering a New Credential}\n */\nexport type AuthMFAEnrollWebauthnResponse = RequestResult<\n  Prettify<AuthMFAEnrollResponseBase<'webauthn'> & AuthMFAEnrollWebauthnFields>\n>\n\nexport type JwtHeader = {\n  alg: 'RS256' | 'ES256' | 'HS256'\n  kid: string\n  typ: string\n}\n\nexport type RequiredClaims = {\n  iss: string\n  sub: string\n  aud: string | string[]\n  exp: number\n  iat: number\n  role: string\n  aal: AuthenticatorAssuranceLevels\n  session_id: string\n}\n\n/**\n * JWT Payload containing claims for Supabase authentication tokens.\n *\n * Required claims (iss, aud, exp, iat, sub, role, aal, session_id) are inherited from RequiredClaims.\n * All other claims are optional as they can be customized via Custom Access Token Hooks.\n *\n * @see https://supabase.com/docs/guides/auth/jwt-fields\n */\nexport interface JwtPayload extends RequiredClaims {\n  // Standard optional claims (can be customized via custom access token hooks)\n  email?: string\n  phone?: string\n  is_anonymous?: boolean\n\n  // Optional claims\n  jti?: string\n  nbf?: number\n  app_metadata?: UserAppMetadata\n  user_metadata?: UserMetadata\n  /**\n   * Authentication Method References.\n   * Supports both RFC-8176 compliant format (string[]) and detailed format (AMREntry[]).\n   * - String format: ['password', 'otp'] - RFC-8176 compliant\n   * - Object format: [{ method: 'password', timestamp: 1234567890 }] - includes timestamps\n   */\n  amr?: AMREntry[] | string[]\n\n  // Special claims (only in anon/service role tokens)\n  ref?: string\n\n  // Allow custom claims via custom access token hooks\n  [key: string]: any\n}\n\nexport interface JWK {\n  kty: 'RSA' | 'EC' | 'oct'\n  key_ops: string[]\n  alg?: string\n  kid?: string\n  [key: string]: any\n}\n\nexport const SIGN_OUT_SCOPES = ['global', 'local', 'others'] as const\nexport type SignOutScope = (typeof SIGN_OUT_SCOPES)[number]\n\n/**\n * OAuth client grant types supported by the OAuth 2.1 server.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type OAuthClientGrantType = 'authorization_code' | 'refresh_token'\n\n/**\n * OAuth client response types supported by the OAuth 2.1 server.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type OAuthClientResponseType = 'code'\n\n/**\n * OAuth client type indicating whether the client can keep credentials confidential.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type OAuthClientType = 'public' | 'confidential'\n\n/**\n * OAuth client registration type.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type OAuthClientRegistrationType = 'dynamic' | 'manual'\n\n/**\n * OAuth client object returned from the OAuth 2.1 server.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type OAuthClient = {\n  /** Unique identifier for the OAuth client */\n  client_id: string\n  /** Human-readable name of the OAuth client */\n  client_name: string\n  /** Client secret (only returned on registration and regeneration) */\n  client_secret?: string\n  /** Type of OAuth client */\n  client_type: OAuthClientType\n  /** Token endpoint authentication method */\n  token_endpoint_auth_method: string\n  /** Registration type of the client */\n  registration_type: OAuthClientRegistrationType\n  /** URI of the OAuth client */\n  client_uri?: string\n  /** URI of the OAuth client's logo */\n  logo_uri?: string\n  /** Array of allowed redirect URIs */\n  redirect_uris: string[]\n  /** Array of allowed grant types */\n  grant_types: OAuthClientGrantType[]\n  /** Array of allowed response types */\n  response_types: OAuthClientResponseType[]\n  /** Scope of the OAuth client */\n  scope?: string\n  /** Timestamp when the client was created */\n  created_at: string\n  /** Timestamp when the client was last updated */\n  updated_at: string\n}\n\n/**\n * Parameters for creating a new OAuth client.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type CreateOAuthClientParams = {\n  /** Human-readable name of the OAuth client */\n  client_name: string\n  /** URI of the OAuth client */\n  client_uri?: string\n  /** Array of allowed redirect URIs */\n  redirect_uris: string[]\n  /** Array of allowed grant types (optional, defaults to authorization_code and refresh_token) */\n  grant_types?: OAuthClientGrantType[]\n  /** Array of allowed response types (optional, defaults to code) */\n  response_types?: OAuthClientResponseType[]\n  /** Scope of the OAuth client */\n  scope?: string\n}\n\n/**\n * Parameters for updating an existing OAuth client.\n * All fields are optional. Only provided fields will be updated.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type UpdateOAuthClientParams = {\n  /** Human-readable name of the OAuth client */\n  client_name?: string\n  /** URI of the OAuth client */\n  client_uri?: string\n  /** URI of the OAuth client's logo */\n  logo_uri?: string\n  /** Array of allowed redirect URIs */\n  redirect_uris?: string[]\n  /** Array of allowed grant types */\n  grant_types?: OAuthClientGrantType[]\n}\n\n/**\n * Response type for OAuth client operations.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type OAuthClientResponse = RequestResult<OAuthClient>\n\n/**\n * Response type for listing OAuth clients.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type OAuthClientListResponse =\n  | {\n      data: { clients: OAuthClient[]; aud: string } & Pagination\n      error: null\n    }\n  | {\n      data: { clients: [] }\n      error: AuthError\n    }\n\n/**\n * Contains all OAuth client administration methods.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport interface GoTrueAdminOAuthApi {\n  /**\n   * Lists all OAuth clients with optional pagination.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  listClients(params?: PageParams): Promise<OAuthClientListResponse>\n\n  /**\n   * Creates a new OAuth client.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  createClient(params: CreateOAuthClientParams): Promise<OAuthClientResponse>\n\n  /**\n   * Gets details of a specific OAuth client.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  getClient(clientId: string): Promise<OAuthClientResponse>\n\n  /**\n   * Updates an existing OAuth client.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  updateClient(clientId: string, params: UpdateOAuthClientParams): Promise<OAuthClientResponse>\n\n  /**\n   * Deletes an OAuth client.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  deleteClient(clientId: string): Promise<{ data: null; error: AuthError | null }>\n\n  /**\n   * Regenerates the secret for an OAuth client.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  regenerateClientSecret(clientId: string): Promise<OAuthClientResponse>\n}\n\n/**\n * OAuth client details in an authorization request.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type OAuthAuthorizationClient = {\n  /** Unique identifier for the OAuth client (UUID) */\n  id: string\n  /** Human-readable name of the OAuth client */\n  name: string\n  /** URI of the OAuth client's website */\n  uri: string\n  /** URI of the OAuth client's logo */\n  logo_uri: string\n}\n\n/**\n * OAuth authorization details when user needs to provide consent.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n *\n * This response includes all information needed to display a consent page:\n * client details, user info, requested scopes, and where the user will be redirected.\n *\n * Note: `redirect_uri` is the base URI (e.g., \"https://app.com/callback\") without\n * query parameters. After consent, you'll receive a complete `redirect_url` with\n * the authorization code and state parameters appended.\n */\nexport type OAuthAuthorizationDetails = {\n  /** The authorization ID used to approve or deny the request */\n  authorization_id: string\n  /** The OAuth client's registered redirect URI (base URI without query parameters) */\n  redirect_uri: string\n  /** OAuth client requesting authorization */\n  client: OAuthAuthorizationClient\n  /** User object associated with the authorization */\n  user: {\n    /** User ID (UUID) */\n    id: string\n    /** User email */\n    email: string\n  }\n  /** Space-separated list of requested scopes (e.g., \"openid profile email\") */\n  scope: string\n}\n\n/**\n * OAuth redirect response when user has already consented or after consent decision.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n *\n * This response is returned in three scenarios:\n * 1. User already consented to these scopes (auto-approved)\n * 2. User just approved the authorization request\n * 3. User just denied the authorization request\n *\n * The `redirect_url` is a complete URL ready for redirecting the user back to the\n * OAuth client, including authorization code (on success) or error (on denial) in\n * query parameters, along with the state parameter if one was provided.\n */\nexport type OAuthRedirect = {\n  /** Complete redirect URL with authorization code and state parameters (e.g., \"https://app.com/callback?code=xxx&state=yyy\") */\n  redirect_url: string\n}\n\n/**\n * Response type for getting OAuth authorization details.\n * Returns either full authorization details (if consent needed) or redirect URL (if already consented).\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n *\n * @example\n * ```typescript\n * const { data, error } = await supabase.auth.oauth.getAuthorizationDetails(authorizationId)\n *\n * if (error) {\n *   console.error('Error:', error)\n * } else if ('authorization_id' in data) {\n *   // User needs to provide consent - show consent page\n *   console.log('Client:', data.client.name)\n *   console.log('Scopes:', data.scope)\n *   console.log('Redirect URI:', data.redirect_uri)\n * } else {\n *   // User already consented - redirect immediately\n *   window.location.href = data.redirect_url\n * }\n * ```\n */\nexport type AuthOAuthAuthorizationDetailsResponse = RequestResult<\n  OAuthAuthorizationDetails | OAuthRedirect\n>\n\n/**\n * Response type for OAuth consent decision (approve/deny).\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type AuthOAuthConsentResponse = RequestResult<OAuthRedirect>\n\n/**\n * An OAuth grant representing a user's authorization of an OAuth client.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type OAuthGrant = {\n  /** OAuth client information */\n  client: OAuthAuthorizationClient\n  /** Array of scopes granted to this client */\n  scopes: string[]\n  /** Timestamp when the grant was created (ISO 8601 date-time) */\n  granted_at: string\n}\n\n/**\n * Response type for listing user's OAuth grants.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type AuthOAuthGrantsResponse = RequestResult<OAuthGrant[]>\n\n/**\n * Response type for revoking an OAuth grant.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n */\nexport type AuthOAuthRevokeGrantResponse = RequestResult<{}>\n\n/**\n * Contains all OAuth 2.1 authorization server user-facing methods.\n * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n *\n * These methods are used to implement the consent page.\n */\nexport interface AuthOAuthServerApi {\n  /**\n   * Retrieves details about an OAuth authorization request.\n   * Used to display consent information to the user.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * This method returns one of two response types:\n   * - `OAuthAuthorizationDetails`: User needs to consent - show consent page with client info\n   * - `OAuthRedirect`: User already consented - redirect immediately to the OAuth client\n   *\n   * Use type narrowing to distinguish between the responses:\n   * ```typescript\n   * if ('authorization_id' in data) {\n   *   // Show consent page\n   * } else {\n   *   // Redirect to data.redirect_url\n   * }\n   * ```\n   *\n   * @param authorizationId - The authorization ID from the authorization request\n   * @returns Authorization details or redirect URL depending on consent status\n   */\n  getAuthorizationDetails(authorizationId: string): Promise<AuthOAuthAuthorizationDetailsResponse>\n\n  /**\n   * Approves an OAuth authorization request.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * After approval, the user's consent is stored and an authorization code is generated.\n   * The response contains a complete redirect URL with the authorization code and state.\n   *\n   * @param authorizationId - The authorization ID to approve\n   * @param options - Optional parameters\n   * @param options.skipBrowserRedirect - If false (default), automatically redirects the browser to the OAuth client. If true, returns the redirect_url without automatic redirect (useful for custom handling).\n   * @returns Redirect URL to send the user back to the OAuth client with authorization code\n   */\n  approveAuthorization(\n    authorizationId: string,\n    options?: { skipBrowserRedirect?: boolean }\n  ): Promise<AuthOAuthConsentResponse>\n\n  /**\n   * Denies an OAuth authorization request.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * After denial, the response contains a redirect URL with an OAuth error\n   * (access_denied) to inform the OAuth client that the user rejected the request.\n   *\n   * @param authorizationId - The authorization ID to deny\n   * @param options - Optional parameters\n   * @param options.skipBrowserRedirect - If false (default), automatically redirects the browser to the OAuth client. If true, returns the redirect_url without automatic redirect (useful for custom handling).\n   * @returns Redirect URL to send the user back to the OAuth client with error information\n   */\n  denyAuthorization(\n    authorizationId: string,\n    options?: { skipBrowserRedirect?: boolean }\n  ): Promise<AuthOAuthConsentResponse>\n\n  /**\n   * Lists all OAuth grants that the authenticated user has authorized.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * @returns Response with array of OAuth grants with client information and granted scopes\n   */\n  listGrants(): Promise<AuthOAuthGrantsResponse>\n\n  /**\n   * Revokes a user's OAuth grant for a specific client.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * Revocation marks consent as revoked, deletes active sessions for that OAuth client,\n   * and invalidates associated refresh tokens.\n   *\n   * @param options - Revocation options\n   * @param options.clientId - The OAuth client identifier (UUID) to revoke access for\n   * @returns Empty response on successful revocation\n   */\n  revokeGrant(options: { clientId: string }): Promise<AuthOAuthRevokeGrantResponse>\n}\n","import {\n  Fetch,\n  _generateLinkResponse,\n  _noResolveJsonResponse,\n  _request,\n  _userResponse,\n} from './lib/fetch'\nimport { resolveFetch, validateUUID } from './lib/helpers'\nimport {\n  AdminUserAttributes,\n  GenerateLinkParams,\n  GenerateLinkResponse,\n  Pagination,\n  User,\n  UserResponse,\n  GoTrueAdminMFAApi,\n  AuthMFAAdminDeleteFactorParams,\n  AuthMFAAdminDeleteFactorResponse,\n  AuthMFAAdminListFactorsParams,\n  AuthMFAAdminListFactorsResponse,\n  PageParams,\n  SIGN_OUT_SCOPES,\n  SignOutScope,\n  GoTrueAdminOAuthApi,\n  CreateOAuthClientParams,\n  UpdateOAuthClientParams,\n  OAuthClientResponse,\n  OAuthClientListResponse,\n} from './lib/types'\nimport { AuthError, isAuthError } from './lib/errors'\n\nexport default class GoTrueAdminApi {\n  /** Contains all MFA administration methods. */\n  mfa: GoTrueAdminMFAApi\n\n  /**\n   * Contains all OAuth client administration methods.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   */\n  oauth: GoTrueAdminOAuthApi\n\n  protected url: string\n  protected headers: {\n    [key: string]: string\n  }\n  protected fetch: Fetch\n\n  /**\n   * Creates an admin API client that can be used to manage users and OAuth clients.\n   *\n   * @example\n   * ```ts\n   * import { GoTrueAdminApi } from '@supabase/auth-js'\n   *\n   * const admin = new GoTrueAdminApi({\n   *   url: 'https://xyzcompany.supabase.co/auth/v1',\n   *   headers: { Authorization: `Bearer ${process.env.SUPABASE_SERVICE_ROLE_KEY}` },\n   * })\n   * ```\n   */\n  constructor({\n    url = '',\n    headers = {},\n    fetch,\n  }: {\n    url: string\n    headers?: {\n      [key: string]: string\n    }\n    fetch?: Fetch\n  }) {\n    this.url = url\n    this.headers = headers\n    this.fetch = resolveFetch(fetch)\n    this.mfa = {\n      listFactors: this._listFactors.bind(this),\n      deleteFactor: this._deleteFactor.bind(this),\n    }\n    this.oauth = {\n      listClients: this._listOAuthClients.bind(this),\n      createClient: this._createOAuthClient.bind(this),\n      getClient: this._getOAuthClient.bind(this),\n      updateClient: this._updateOAuthClient.bind(this),\n      deleteClient: this._deleteOAuthClient.bind(this),\n      regenerateClientSecret: this._regenerateOAuthClientSecret.bind(this),\n    }\n  }\n\n  /**\n   * Removes a logged-in session.\n   * @param jwt A valid, logged-in JWT.\n   * @param scope The logout sope.\n   */\n  async signOut(\n    jwt: string,\n    scope: SignOutScope = SIGN_OUT_SCOPES[0]\n  ): Promise<{ data: null; error: AuthError | null }> {\n    if (SIGN_OUT_SCOPES.indexOf(scope) < 0) {\n      throw new Error(\n        `@supabase/auth-js: Parameter scope must be one of ${SIGN_OUT_SCOPES.join(', ')}`\n      )\n    }\n\n    try {\n      await _request(this.fetch, 'POST', `${this.url}/logout?scope=${scope}`, {\n        headers: this.headers,\n        jwt,\n        noResolveJson: true,\n      })\n      return { data: null, error: null }\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: null, error }\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Sends an invite link to an email address.\n   * @param email The email address of the user.\n   * @param options Additional options to be included when inviting.\n   */\n  async inviteUserByEmail(\n    email: string,\n    options: {\n      /** A custom data object to store additional metadata about the user. This maps to the `auth.users.user_metadata` column. */\n      data?: object\n\n      /** The URL which will be appended to the email link sent to the user's email address. Once clicked the user will end up on this URL. */\n      redirectTo?: string\n    } = {}\n  ): Promise<UserResponse> {\n    try {\n      return await _request(this.fetch, 'POST', `${this.url}/invite`, {\n        body: { email, data: options.data },\n        headers: this.headers,\n        redirectTo: options.redirectTo,\n        xform: _userResponse,\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: { user: null }, error }\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Generates email links and OTPs to be sent via a custom email provider.\n   * @param email The user's email.\n   * @param options.password User password. For signup only.\n   * @param options.data Optional user metadata. For signup only.\n   * @param options.redirectTo The redirect url which should be appended to the generated link\n   */\n  async generateLink(params: GenerateLinkParams): Promise<GenerateLinkResponse> {\n    try {\n      const { options, ...rest } = params\n      const body: any = { ...rest, ...options }\n      if ('newEmail' in rest) {\n        // replace newEmail with new_email in request body\n        body.new_email = rest?.newEmail\n        delete body['newEmail']\n      }\n      return await _request(this.fetch, 'POST', `${this.url}/admin/generate_link`, {\n        body: body,\n        headers: this.headers,\n        xform: _generateLinkResponse,\n        redirectTo: options?.redirectTo,\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return {\n          data: {\n            properties: null,\n            user: null,\n          },\n          error,\n        }\n      }\n      throw error\n    }\n  }\n\n  // User Admin API\n  /**\n   * Creates a new user.\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  async createUser(attributes: AdminUserAttributes): Promise<UserResponse> {\n    try {\n      return await _request(this.fetch, 'POST', `${this.url}/admin/users`, {\n        body: attributes,\n        headers: this.headers,\n        xform: _userResponse,\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: { user: null }, error }\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Get a list of users.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   * @param params An object which supports `page` and `perPage` as numbers, to alter the paginated results.\n   */\n  async listUsers(\n    params?: PageParams\n  ): Promise<\n    | { data: { users: User[]; aud: string } & Pagination; error: null }\n    | { data: { users: [] }; error: AuthError }\n  > {\n    try {\n      const pagination: Pagination = { nextPage: null, lastPage: 0, total: 0 }\n      const response = await _request(this.fetch, 'GET', `${this.url}/admin/users`, {\n        headers: this.headers,\n        noResolveJson: true,\n        query: {\n          page: params?.page?.toString() ?? '',\n          per_page: params?.perPage?.toString() ?? '',\n        },\n        xform: _noResolveJsonResponse,\n      })\n      if (response.error) throw response.error\n\n      const users = await response.json()\n      const total = response.headers.get('x-total-count') ?? 0\n      const links = response.headers.get('link')?.split(',') ?? []\n      if (links.length > 0) {\n        links.forEach((link: string) => {\n          const page = parseInt(link.split(';')[0].split('=')[1].substring(0, 1))\n          const rel = JSON.parse(link.split(';')[1].split('=')[1])\n          pagination[`${rel}Page`] = page\n        })\n\n        pagination.total = parseInt(total)\n      }\n      return { data: { ...users, ...pagination }, error: null }\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: { users: [] }, error }\n      }\n      throw error\n    }\n  }\n\n  /**\n   * Get user by id.\n   *\n   * @param uid The user's unique identifier\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  async getUserById(uid: string): Promise<UserResponse> {\n    validateUUID(uid)\n\n    try {\n      return await _request(this.fetch, 'GET', `${this.url}/admin/users/${uid}`, {\n        headers: this.headers,\n        xform: _userResponse,\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: { user: null }, error }\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Updates the user data. Changes are applied directly without confirmation flows.\n   *\n   * @param uid The user's unique identifier\n   * @param attributes The data you want to update.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   *\n   * @remarks\n   * **Important:** This is a server-side operation and does **not** trigger client-side\n   * `onAuthStateChange` listeners. The admin API has no connection to client state.\n   *\n   * To sync changes to the client after calling this method:\n   * 1. On the client, call `supabase.auth.refreshSession()` to fetch the updated user data\n   * 2. This will trigger the `TOKEN_REFRESHED` event and notify all listeners\n   *\n   * @example\n   * ```typescript\n   * // Server-side (Edge Function)\n   * const { data, error } = await supabase.auth.admin.updateUserById(\n   *   userId,\n   *   { user_metadata: { preferences: { theme: 'dark' } } }\n   * )\n   *\n   * // Client-side (to sync the changes)\n   * const { data, error } = await supabase.auth.refreshSession()\n   * // onAuthStateChange listeners will now be notified with updated user\n   * ```\n   *\n   * @see {@link GoTrueClient.refreshSession} for syncing admin changes to the client\n   * @see {@link GoTrueClient.updateUser} for client-side user updates (triggers listeners automatically)\n   */\n  async updateUserById(uid: string, attributes: AdminUserAttributes): Promise<UserResponse> {\n    validateUUID(uid)\n\n    try {\n      return await _request(this.fetch, 'PUT', `${this.url}/admin/users/${uid}`, {\n        body: attributes,\n        headers: this.headers,\n        xform: _userResponse,\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: { user: null }, error }\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Delete a user. Requires a `service_role` key.\n   *\n   * @param id The user id you want to remove.\n   * @param shouldSoftDelete If true, then the user will be soft-deleted from the auth schema. Soft deletion allows user identification from the hashed user ID but is not reversible.\n   * Defaults to false for backward compatibility.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  async deleteUser(id: string, shouldSoftDelete = false): Promise<UserResponse> {\n    validateUUID(id)\n\n    try {\n      return await _request(this.fetch, 'DELETE', `${this.url}/admin/users/${id}`, {\n        headers: this.headers,\n        body: {\n          should_soft_delete: shouldSoftDelete,\n        },\n        xform: _userResponse,\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: { user: null }, error }\n      }\n\n      throw error\n    }\n  }\n\n  private async _listFactors(\n    params: AuthMFAAdminListFactorsParams\n  ): Promise<AuthMFAAdminListFactorsResponse> {\n    validateUUID(params.userId)\n\n    try {\n      const { data, error } = await _request(\n        this.fetch,\n        'GET',\n        `${this.url}/admin/users/${params.userId}/factors`,\n        {\n          headers: this.headers,\n          xform: (factors: any) => {\n            return { data: { factors }, error: null }\n          },\n        }\n      )\n      return { data, error }\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: null, error }\n      }\n\n      throw error\n    }\n  }\n\n  private async _deleteFactor(\n    params: AuthMFAAdminDeleteFactorParams\n  ): Promise<AuthMFAAdminDeleteFactorResponse> {\n    validateUUID(params.userId)\n    validateUUID(params.id)\n\n    try {\n      const data = await _request(\n        this.fetch,\n        'DELETE',\n        `${this.url}/admin/users/${params.userId}/factors/${params.id}`,\n        {\n          headers: this.headers,\n        }\n      )\n\n      return { data, error: null }\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: null, error }\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Lists all OAuth clients with optional pagination.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  private async _listOAuthClients(params?: PageParams): Promise<OAuthClientListResponse> {\n    try {\n      const pagination: Pagination = { nextPage: null, lastPage: 0, total: 0 }\n      const response = await _request(this.fetch, 'GET', `${this.url}/admin/oauth/clients`, {\n        headers: this.headers,\n        noResolveJson: true,\n        query: {\n          page: params?.page?.toString() ?? '',\n          per_page: params?.perPage?.toString() ?? '',\n        },\n        xform: _noResolveJsonResponse,\n      })\n      if (response.error) throw response.error\n\n      const clients = await response.json()\n      const total = response.headers.get('x-total-count') ?? 0\n      const links = response.headers.get('link')?.split(',') ?? []\n      if (links.length > 0) {\n        links.forEach((link: string) => {\n          const page = parseInt(link.split(';')[0].split('=')[1].substring(0, 1))\n          const rel = JSON.parse(link.split(';')[1].split('=')[1])\n          pagination[`${rel}Page`] = page\n        })\n\n        pagination.total = parseInt(total)\n      }\n      return { data: { ...clients, ...pagination }, error: null }\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: { clients: [] }, error }\n      }\n      throw error\n    }\n  }\n\n  /**\n   * Creates a new OAuth client.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  private async _createOAuthClient(params: CreateOAuthClientParams): Promise<OAuthClientResponse> {\n    try {\n      return await _request(this.fetch, 'POST', `${this.url}/admin/oauth/clients`, {\n        body: params,\n        headers: this.headers,\n        xform: (client: any) => {\n          return { data: client, error: null }\n        },\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: null, error }\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Gets details of a specific OAuth client.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  private async _getOAuthClient(clientId: string): Promise<OAuthClientResponse> {\n    try {\n      return await _request(this.fetch, 'GET', `${this.url}/admin/oauth/clients/${clientId}`, {\n        headers: this.headers,\n        xform: (client: any) => {\n          return { data: client, error: null }\n        },\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: null, error }\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Updates an existing OAuth client.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  private async _updateOAuthClient(\n    clientId: string,\n    params: UpdateOAuthClientParams\n  ): Promise<OAuthClientResponse> {\n    try {\n      return await _request(this.fetch, 'PUT', `${this.url}/admin/oauth/clients/${clientId}`, {\n        body: params,\n        headers: this.headers,\n        xform: (client: any) => {\n          return { data: client, error: null }\n        },\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: null, error }\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Deletes an OAuth client.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  private async _deleteOAuthClient(\n    clientId: string\n  ): Promise<{ data: null; error: AuthError | null }> {\n    try {\n      await _request(this.fetch, 'DELETE', `${this.url}/admin/oauth/clients/${clientId}`, {\n        headers: this.headers,\n        noResolveJson: true,\n      })\n      return { data: null, error: null }\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: null, error }\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Regenerates the secret for an OAuth client.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * This function should only be called on a server. Never expose your `service_role` key in the browser.\n   */\n  private async _regenerateOAuthClientSecret(clientId: string): Promise<OAuthClientResponse> {\n    try {\n      return await _request(\n        this.fetch,\n        'POST',\n        `${this.url}/admin/oauth/clients/${clientId}/regenerate_secret`,\n        {\n          headers: this.headers,\n          xform: (client: any) => {\n            return { data: client, error: null }\n          },\n        }\n      )\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: null, error }\n      }\n\n      throw error\n    }\n  }\n}\n","import { SupportedStorage } from './types'\n\n/**\n * Returns a localStorage-like object that stores the key-value pairs in\n * memory.\n */\nexport function memoryLocalStorageAdapter(store: { [key: string]: string } = {}): SupportedStorage {\n  return {\n    getItem: (key) => {\n      return store[key] || null\n    },\n\n    setItem: (key, value) => {\n      store[key] = value\n    },\n\n    removeItem: (key) => {\n      delete store[key]\n    },\n  }\n}\n","import { supportsLocalStorage } from './helpers'\n\n/**\n * @experimental\n */\nexport const internals = {\n  /**\n   * @experimental\n   */\n  debug: !!(\n    globalThis &&\n    supportsLocalStorage() &&\n    globalThis.localStorage &&\n    globalThis.localStorage.getItem('supabase.gotrue-js.locks.debug') === 'true'\n  ),\n}\n\n/**\n * An error thrown when a lock cannot be acquired after some amount of time.\n *\n * Use the {@link #isAcquireTimeout} property instead of checking with `instanceof`.\n *\n * @example\n * ```ts\n * import { LockAcquireTimeoutError } from '@supabase/auth-js'\n *\n * class CustomLockError extends LockAcquireTimeoutError {\n *   constructor() {\n *     super('Lock timed out')\n *   }\n * }\n * ```\n */\nexport abstract class LockAcquireTimeoutError extends Error {\n  public readonly isAcquireTimeout = true\n\n  constructor(message: string) {\n    super(message)\n  }\n}\n\n/**\n * Error thrown when the browser Navigator Lock API fails to acquire a lock.\n *\n * @example\n * ```ts\n * import { NavigatorLockAcquireTimeoutError } from '@supabase/auth-js'\n *\n * throw new NavigatorLockAcquireTimeoutError('Lock timed out')\n * ```\n */\nexport class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError {}\n/**\n * Error thrown when the process-level lock helper cannot acquire a lock.\n *\n * @example\n * ```ts\n * import { ProcessLockAcquireTimeoutError } from '@supabase/auth-js'\n *\n * throw new ProcessLockAcquireTimeoutError('Lock timed out')\n * ```\n */\nexport class ProcessLockAcquireTimeoutError extends LockAcquireTimeoutError {}\n\n/**\n * Implements a global exclusive lock using the Navigator LockManager API. It\n * is available on all browsers released after 2022-03-15 with Safari being the\n * last one to release support. If the API is not available, this function will\n * throw. Make sure you check availablility before configuring {@link\n * GoTrueClient}.\n *\n * You can turn on debugging by setting the `supabase.gotrue-js.locks.debug`\n * local storage item to `true`.\n *\n * Internals:\n *\n * Since the LockManager API does not preserve stack traces for the async\n * function passed in the `request` method, a trick is used where acquiring the\n * lock releases a previously started promise to run the operation in the `fn`\n * function. The lock waits for that promise to finish (with or without error),\n * while the function will finally wait for the result anyway.\n *\n * @param name Name of the lock to be acquired.\n * @param acquireTimeout If negative, no timeout. If 0 an error is thrown if\n *                       the lock can't be acquired without waiting. If positive, the lock acquire\n *                       will time out after so many milliseconds. An error is\n *                       a timeout if it has `isAcquireTimeout` set to true.\n * @param fn The operation to run once the lock is acquired.\n * @example\n * ```ts\n * await navigatorLock('sync-user', 1000, async () => {\n *   await refreshSession()\n * })\n * ```\n */\nexport async function navigatorLock<R>(\n  name: string,\n  acquireTimeout: number,\n  fn: () => Promise<R>\n): Promise<R> {\n  if (internals.debug) {\n    console.log('@supabase/gotrue-js: navigatorLock: acquire lock', name, acquireTimeout)\n  }\n\n  const abortController = new globalThis.AbortController()\n\n  if (acquireTimeout > 0) {\n    setTimeout(() => {\n      abortController.abort()\n      if (internals.debug) {\n        console.log('@supabase/gotrue-js: navigatorLock acquire timed out', name)\n      }\n    }, acquireTimeout)\n  }\n\n  // MDN article: https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request\n\n  // Wrapping with await Promise.resolve() is done as some libraries like zone.js\n  // patch the Promise object to track execution context. We use await instead of\n  // .then() to avoid Firefox content script security errors where accessing .then()\n  // on cross-context promises is forbidden.\n  await Promise.resolve()\n\n  try {\n    return await globalThis.navigator.locks.request(\n      name,\n      acquireTimeout === 0\n        ? {\n            mode: 'exclusive',\n            ifAvailable: true,\n          }\n        : {\n            mode: 'exclusive',\n            signal: abortController.signal,\n          },\n      async (lock) => {\n        if (lock) {\n          if (internals.debug) {\n            console.log('@supabase/gotrue-js: navigatorLock: acquired', name, lock.name)\n          }\n\n          try {\n            return await fn()\n          } finally {\n            if (internals.debug) {\n              console.log('@supabase/gotrue-js: navigatorLock: released', name, lock.name)\n            }\n          }\n        } else {\n          if (acquireTimeout === 0) {\n            if (internals.debug) {\n              console.log('@supabase/gotrue-js: navigatorLock: not immediately available', name)\n            }\n\n            throw new NavigatorLockAcquireTimeoutError(\n              `Acquiring an exclusive Navigator LockManager lock \"${name}\" immediately failed`\n            )\n          } else {\n            if (internals.debug) {\n              try {\n                const result = await globalThis.navigator.locks.query()\n\n                console.log(\n                  '@supabase/gotrue-js: Navigator LockManager state',\n                  JSON.stringify(result, null, '  ')\n                )\n              } catch (e: any) {\n                console.warn(\n                  '@supabase/gotrue-js: Error when querying Navigator LockManager state',\n                  e\n                )\n              }\n            }\n\n            // Browser is not following the Navigator LockManager spec, it\n            // returned a null lock when we didn't use ifAvailable. So we can\n            // pretend the lock is acquired in the name of backward compatibility\n            // and user experience and just run the function.\n            console.warn(\n              '@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request'\n            )\n\n            return await fn()\n          }\n        }\n      }\n    )\n  } catch (e: any) {\n    // When the AbortController times out, navigator.locks.request rejects with\n    // a DOMException named 'AbortError'. Convert this to NavigatorLockAcquireTimeoutError\n    // so callers can check error.isAcquireTimeout as documented.\n    if (e?.name === 'AbortError') {\n      throw new NavigatorLockAcquireTimeoutError(\n        `Acquiring an exclusive Navigator LockManager lock \"${name}\" timed out waiting ${acquireTimeout}ms`\n      )\n    }\n    throw e\n  }\n}\n\nconst PROCESS_LOCKS: { [name: string]: Promise<any> } = {}\n\n/**\n * Implements a global exclusive lock that works only in the current process.\n * Useful for environments like React Native or other non-browser\n * single-process (i.e. no concept of \"tabs\") environments.\n *\n * Use {@link #navigatorLock} in browser environments.\n *\n * @param name Name of the lock to be acquired.\n * @param acquireTimeout If negative, no timeout. If 0 an error is thrown if\n *                       the lock can't be acquired without waiting. If positive, the lock acquire\n *                       will time out after so many milliseconds. An error is\n *                       a timeout if it has `isAcquireTimeout` set to true.\n * @param fn The operation to run once the lock is acquired.\n * @example\n * ```ts\n * await processLock('migrate', 5000, async () => {\n *   await runMigration()\n * })\n * ```\n */\nexport async function processLock<R>(\n  name: string,\n  acquireTimeout: number,\n  fn: () => Promise<R>\n): Promise<R> {\n  const previousOperation = PROCESS_LOCKS[name] ?? Promise.resolve()\n\n  // Wrap previousOperation to handle errors without using .catch()\n  // This avoids Firefox content script security errors\n  const previousOperationHandled = (async () => {\n    try {\n      await previousOperation\n      return null\n    } catch (e) {\n      // ignore error of previous operation that we're waiting to finish\n      return null\n    }\n  })()\n\n  const currentOperation = (async () => {\n    let timeoutId: ReturnType<typeof setTimeout> | null = null\n\n    try {\n      // Wait for either previous operation or timeout\n      const timeoutPromise =\n        acquireTimeout >= 0\n          ? new Promise((_, reject) => {\n              timeoutId = setTimeout(() => {\n                console.warn(\n                  `@supabase/gotrue-js: Lock \"${name}\" acquisition timed out after ${acquireTimeout}ms. ` +\n                    'This may be caused by another operation holding the lock. ' +\n                    'Consider increasing lockAcquireTimeout or checking for stuck operations.'\n                )\n\n                reject(\n                  new ProcessLockAcquireTimeoutError(\n                    `Acquiring process lock with name \"${name}\" timed out`\n                  )\n                )\n              }, acquireTimeout)\n            })\n          : null\n\n      await Promise.race([previousOperationHandled, timeoutPromise].filter((x) => x))\n\n      // If we reach here, previousOperationHandled won the race\n      // Clear the timeout to prevent false warnings\n      if (timeoutId !== null) {\n        clearTimeout(timeoutId)\n      }\n    } catch (e: any) {\n      // Clear the timeout on error path as well\n      if (timeoutId !== null) {\n        clearTimeout(timeoutId)\n      }\n\n      // Re-throw timeout errors, ignore others\n      if (e && e.isAcquireTimeout) {\n        throw e\n      }\n      // Fall through to run fn() - previous operation finished with error\n    }\n\n    // Previous operations finished and we didn't get a race on the acquire\n    // timeout, so the current operation can finally start\n    return await fn()\n  })()\n\n  PROCESS_LOCKS[name] = (async () => {\n    try {\n      return await currentOperation\n    } catch (e: any) {\n      if (e && e.isAcquireTimeout) {\n        // if the current operation timed out, it doesn't mean that the previous\n        // operation finished, so we need continue waiting for it to finish\n        try {\n          await previousOperation\n        } catch (prevError) {\n          // Ignore previous operation errors\n        }\n        return null\n      }\n\n      throw e\n    }\n  })()\n\n  // finally wait for the current operation to finish successfully, with an\n  // error or with an acquire timeout error\n  return await currentOperation\n}\n","// types and functions copied over from viem so this library doesn't depend on it\n\nexport type Hex = `0x${string}`\n\nexport type Address = Hex\n\nexport type EIP1193EventMap = {\n  accountsChanged(accounts: Address[]): void\n  chainChanged(chainId: string): void\n  connect(connectInfo: { chainId: string }): void\n  disconnect(error: { code: number; message: string }): void\n  message(message: { type: string; data: unknown }): void\n}\n\nexport type EIP1193Events = {\n  on<event extends keyof EIP1193EventMap>(event: event, listener: EIP1193EventMap[event]): void\n  removeListener<event extends keyof EIP1193EventMap>(\n    event: event,\n    listener: EIP1193EventMap[event]\n  ): void\n}\n\nexport type EIP1193RequestFn = (args: { method: string; params?: unknown }) => Promise<unknown>\n\nexport type EIP1193Provider = EIP1193Events & {\n  address: string\n  request: EIP1193RequestFn\n}\n\nexport type EthereumWallet = EIP1193Provider\n\n/**\n * EIP-4361 message fields\n */\nexport type SiweMessage = {\n  /**\n   * The Ethereum address performing the signing.\n   */\n  address: Address\n  /**\n   * The [EIP-155](https://eips.ethereum.org/EIPS/eip-155) Chain ID to which the session is bound,\n   */\n  chainId: number\n  /**\n   * [RFC 3986](https://www.rfc-editor.org/rfc/rfc3986) authority that is requesting the signing.\n   */\n  domain: string\n  /**\n   * Time when the signed authentication message is no longer valid.\n   */\n  expirationTime?: Date | undefined\n  /**\n   * Time when the message was generated, typically the current time.\n   */\n  issuedAt?: Date | undefined\n  /**\n   * A random string typically chosen by the relying party and used to prevent replay attacks.\n   */\n  nonce?: string\n  /**\n   * Time when the signed authentication message will become valid.\n   */\n  notBefore?: Date | undefined\n  /**\n   * A system-specific identifier that may be used to uniquely refer to the sign-in request.\n   */\n  requestId?: string | undefined\n  /**\n   * A list of information or references to information the user wishes to have resolved as part of authentication by the relying party.\n   */\n  resources?: string[] | undefined\n  /**\n   * [RFC 3986](https://www.rfc-editor.org/rfc/rfc3986#section-3.1) URI scheme of the origin of the request.\n   */\n  scheme?: string | undefined\n  /**\n   * A human-readable ASCII assertion that the user will sign.\n   */\n  statement?: string | undefined\n  /**\n   * [RFC 3986](https://www.rfc-editor.org/rfc/rfc3986) URI referring to the resource that is the subject of the signing (as in the subject of a claim).\n   */\n  uri: string\n  /**\n   * The current version of the SIWE Message.\n   */\n  version: '1'\n}\n\nexport type EthereumSignInInput = SiweMessage\n\nexport function getAddress(address: string): Address {\n  if (!/^0x[a-fA-F0-9]{40}$/.test(address)) {\n    throw new Error(`@supabase/auth-js: Address \"${address}\" is invalid.`)\n  }\n  return address.toLowerCase() as Address\n}\n\nexport function fromHex(hex: Hex): number {\n  return parseInt(hex, 16)\n}\n\nexport function toHex(value: string): Hex {\n  const bytes = new TextEncoder().encode(value)\n  const hex = Array.from(bytes, (byte) => byte.toString(16).padStart(2, '0')).join('')\n  return ('0x' + hex) as Hex\n}\n\n/**\n * Creates EIP-4361 formatted message.\n */\nexport function createSiweMessage(parameters: SiweMessage): string {\n  const {\n    chainId,\n    domain,\n    expirationTime,\n    issuedAt = new Date(),\n    nonce,\n    notBefore,\n    requestId,\n    resources,\n    scheme,\n    uri,\n    version,\n  } = parameters\n\n  // Validate fields\n  {\n    if (!Number.isInteger(chainId))\n      throw new Error(\n        `@supabase/auth-js: Invalid SIWE message field \"chainId\". Chain ID must be a EIP-155 chain ID. Provided value: ${chainId}`\n      )\n\n    if (!domain)\n      throw new Error(\n        `@supabase/auth-js: Invalid SIWE message field \"domain\". Domain must be provided.`\n      )\n\n    if (nonce && nonce.length < 8)\n      throw new Error(\n        `@supabase/auth-js: Invalid SIWE message field \"nonce\". Nonce must be at least 8 characters. Provided value: ${nonce}`\n      )\n\n    if (!uri)\n      throw new Error(`@supabase/auth-js: Invalid SIWE message field \"uri\". URI must be provided.`)\n\n    if (version !== '1')\n      throw new Error(\n        `@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ${version}`\n      )\n\n    if (parameters.statement?.includes('\\n'))\n      throw new Error(\n        `@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\\\n'. Provided value: ${parameters.statement}`\n      )\n  }\n\n  // Construct message\n  const address = getAddress(parameters.address)\n  const origin = scheme ? `${scheme}://${domain}` : domain\n  const statement = parameters.statement ? `${parameters.statement}\\n` : ''\n  const prefix = `${origin} wants you to sign in with your Ethereum account:\\n${address}\\n\\n${statement}`\n\n  let suffix = `URI: ${uri}\\nVersion: ${version}\\nChain ID: ${chainId}${\n    nonce ? `\\nNonce: ${nonce}` : ''\n  }\\nIssued At: ${issuedAt.toISOString()}`\n\n  if (expirationTime) suffix += `\\nExpiration Time: ${expirationTime.toISOString()}`\n  if (notBefore) suffix += `\\nNot Before: ${notBefore.toISOString()}`\n  if (requestId) suffix += `\\nRequest ID: ${requestId}`\n  if (resources) {\n    let content = '\\nResources:'\n    for (const resource of resources) {\n      if (!resource || typeof resource !== 'string')\n        throw new Error(\n          `@supabase/auth-js: Invalid SIWE message field \"resources\". Every resource must be a valid string. Provided value: ${resource}`\n        )\n      content += `\\n- ${resource}`\n    }\n    suffix += content\n  }\n\n  return `${prefix}\\n${suffix}`\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n\nimport { StrictOmit } from './types'\nimport { isValidDomain } from './webauthn'\nimport {\n  PublicKeyCredentialCreationOptionsFuture,\n  PublicKeyCredentialRequestOptionsFuture,\n} from './webauthn.dom'\n\n/**\n * A custom Error used to return a more nuanced error detailing _why_ one of the eight documented\n * errors in the spec was raised after calling `navigator.credentials.create()` or\n * `navigator.credentials.get()`:\n *\n * - `AbortError`\n * - `ConstraintError`\n * - `InvalidStateError`\n * - `NotAllowedError`\n * - `NotSupportedError`\n * - `SecurityError`\n * - `TypeError`\n * - `UnknownError`\n *\n * Error messages were determined through investigation of the spec to determine under which\n * scenarios a given error would be raised.\n */\nexport class WebAuthnError extends Error {\n  code: WebAuthnErrorCode\n\n  protected __isWebAuthnError = true\n\n  constructor({\n    message,\n    code,\n    cause,\n    name,\n  }: {\n    message: string\n    code: WebAuthnErrorCode\n    cause?: Error | unknown\n    name?: string\n  }) {\n    // @ts-ignore: help Rollup understand that `cause` is okay to set\n    super(message, { cause })\n    this.name = name ?? (cause instanceof Error ? cause.name : undefined) ?? 'Unknown Error'\n    this.code = code\n  }\n}\n\n/**\n * Error class for unknown WebAuthn errors.\n * Wraps unexpected errors that don't match known WebAuthn error conditions.\n */\nexport class WebAuthnUnknownError extends WebAuthnError {\n  originalError: unknown\n\n  constructor(message: string, originalError: unknown) {\n    super({\n      code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n      cause: originalError,\n      message,\n    })\n    this.name = 'WebAuthnUnknownError'\n    this.originalError = originalError\n  }\n}\n\n/**\n * Type guard to check if an error is a WebAuthnError.\n * @param {unknown} error - The error to check\n * @returns {boolean} True if the error is a WebAuthnError\n */\nexport function isWebAuthnError(error: unknown): error is WebAuthnError {\n  return typeof error === 'object' && error !== null && '__isWebAuthnError' in error\n}\n\n/**\n * Error codes for WebAuthn operations.\n * These codes provide specific information about why a WebAuthn ceremony failed.\n * @see {@link https://w3c.github.io/webauthn/#sctn-defined-errors W3C WebAuthn Spec - Defined Errors}\n */\nexport type WebAuthnErrorCode =\n  | 'ERROR_CEREMONY_ABORTED'\n  | 'ERROR_INVALID_DOMAIN'\n  | 'ERROR_INVALID_RP_ID'\n  | 'ERROR_INVALID_USER_ID_LENGTH'\n  | 'ERROR_MALFORMED_PUBKEYCREDPARAMS'\n  | 'ERROR_AUTHENTICATOR_GENERAL_ERROR'\n  | 'ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT'\n  | 'ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT'\n  | 'ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED'\n  | 'ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG'\n  | 'ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE'\n  | 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY'\n\n/**\n * Attempt to intuit _why_ an error was raised after calling `navigator.credentials.create()`.\n * Maps browser errors to specific WebAuthn error codes for better debugging.\n * @param {Object} params - Error identification parameters\n * @param {Error} params.error - The error thrown by the browser\n * @param {CredentialCreationOptions} params.options - The options passed to credentials.create()\n * @returns {WebAuthnError} A WebAuthnError with a specific error code\n * @see {@link https://w3c.github.io/webauthn/#sctn-createCredential W3C WebAuthn Spec - Create Credential}\n */\nexport function identifyRegistrationError({\n  error,\n  options,\n}: {\n  error: Error\n  options: StrictOmit<CredentialCreationOptions, 'publicKey'> & {\n    publicKey: PublicKeyCredentialCreationOptionsFuture\n  }\n}): WebAuthnError {\n  const { publicKey } = options\n\n  if (!publicKey) {\n    throw Error('options was missing required publicKey property')\n  }\n\n  if (error.name === 'AbortError') {\n    if (options.signal instanceof AbortSignal) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 16)\n      return new WebAuthnError({\n        message: 'Registration ceremony was sent an abort signal',\n        code: 'ERROR_CEREMONY_ABORTED',\n        cause: error,\n      })\n    }\n  } else if (error.name === 'ConstraintError') {\n    if (publicKey.authenticatorSelection?.requireResidentKey === true) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 4)\n      return new WebAuthnError({\n        message:\n          'Discoverable credentials were required but no available authenticator supported it',\n        code: 'ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT',\n        cause: error,\n      })\n    } else if (\n      // @ts-ignore: `mediation` doesn't yet exist on CredentialCreationOptions but it's possible as of Sept 2024\n      options.mediation === 'conditional' &&\n      publicKey.authenticatorSelection?.userVerification === 'required'\n    ) {\n      // https://w3c.github.io/webauthn/#sctn-createCredential (Step 22.4)\n      return new WebAuthnError({\n        message:\n          'User verification was required during automatic registration but it could not be performed',\n        code: 'ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE',\n        cause: error,\n      })\n    } else if (publicKey.authenticatorSelection?.userVerification === 'required') {\n      // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 5)\n      return new WebAuthnError({\n        message: 'User verification was required but no available authenticator supported it',\n        code: 'ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT',\n        cause: error,\n      })\n    }\n  } else if (error.name === 'InvalidStateError') {\n    // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 20)\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 3)\n    return new WebAuthnError({\n      message: 'The authenticator was previously registered',\n      code: 'ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED',\n      cause: error,\n    })\n  } else if (error.name === 'NotAllowedError') {\n    /**\n     * Pass the error directly through. Platforms are overloading this error beyond what the spec\n     * defines and we don't want to overwrite potentially useful error messages.\n     */\n    return new WebAuthnError({\n      message: error.message,\n      code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n      cause: error,\n    })\n  } else if (error.name === 'NotSupportedError') {\n    const validPubKeyCredParams = publicKey.pubKeyCredParams.filter(\n      (param) => param.type === 'public-key'\n    )\n\n    if (validPubKeyCredParams.length === 0) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 10)\n      return new WebAuthnError({\n        message: 'No entry in pubKeyCredParams was of type \"public-key\"',\n        code: 'ERROR_MALFORMED_PUBKEYCREDPARAMS',\n        cause: error,\n      })\n    }\n\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 2)\n    return new WebAuthnError({\n      message:\n        'No available authenticator supported any of the specified pubKeyCredParams algorithms',\n      code: 'ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG',\n      cause: error,\n    })\n  } else if (error.name === 'SecurityError') {\n    const effectiveDomain = window.location.hostname\n    if (!isValidDomain(effectiveDomain)) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 7)\n      return new WebAuthnError({\n        message: `${window.location.hostname} is an invalid domain`,\n        code: 'ERROR_INVALID_DOMAIN',\n        cause: error,\n      })\n    } else if (publicKey.rp.id !== effectiveDomain) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 8)\n      return new WebAuthnError({\n        message: `The RP ID \"${publicKey.rp.id}\" is invalid for this domain`,\n        code: 'ERROR_INVALID_RP_ID',\n        cause: error,\n      })\n    }\n  } else if (error.name === 'TypeError') {\n    if (publicKey.user.id.byteLength < 1 || publicKey.user.id.byteLength > 64) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 5)\n      return new WebAuthnError({\n        message: 'User ID was not between 1 and 64 characters',\n        code: 'ERROR_INVALID_USER_ID_LENGTH',\n        cause: error,\n      })\n    }\n  } else if (error.name === 'UnknownError') {\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 1)\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 8)\n    return new WebAuthnError({\n      message:\n        'The authenticator was unable to process the specified options, or could not create a new credential',\n      code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n      cause: error,\n    })\n  }\n\n  return new WebAuthnError({\n    message: 'a Non-Webauthn related error has occurred',\n    code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n    cause: error,\n  })\n}\n\n/**\n * Attempt to intuit _why_ an error was raised after calling `navigator.credentials.get()`.\n * Maps browser errors to specific WebAuthn error codes for better debugging.\n * @param {Object} params - Error identification parameters\n * @param {Error} params.error - The error thrown by the browser\n * @param {CredentialRequestOptions} params.options - The options passed to credentials.get()\n * @returns {WebAuthnError} A WebAuthnError with a specific error code\n * @see {@link https://w3c.github.io/webauthn/#sctn-getAssertion W3C WebAuthn Spec - Get Assertion}\n */\nexport function identifyAuthenticationError({\n  error,\n  options,\n}: {\n  error: Error\n  options: StrictOmit<CredentialRequestOptions, 'publicKey'> & {\n    publicKey: PublicKeyCredentialRequestOptionsFuture\n  }\n}): WebAuthnError {\n  const { publicKey } = options\n\n  if (!publicKey) {\n    throw Error('options was missing required publicKey property')\n  }\n\n  if (error.name === 'AbortError') {\n    if (options.signal instanceof AbortSignal) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 16)\n      return new WebAuthnError({\n        message: 'Authentication ceremony was sent an abort signal',\n        code: 'ERROR_CEREMONY_ABORTED',\n        cause: error,\n      })\n    }\n  } else if (error.name === 'NotAllowedError') {\n    /**\n     * Pass the error directly through. Platforms are overloading this error beyond what the spec\n     * defines and we don't want to overwrite potentially useful error messages.\n     */\n    return new WebAuthnError({\n      message: error.message,\n      code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n      cause: error,\n    })\n  } else if (error.name === 'SecurityError') {\n    const effectiveDomain = window.location.hostname\n    if (!isValidDomain(effectiveDomain)) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 5)\n      return new WebAuthnError({\n        message: `${window.location.hostname} is an invalid domain`,\n        code: 'ERROR_INVALID_DOMAIN',\n        cause: error,\n      })\n    } else if (publicKey.rpId !== effectiveDomain) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 6)\n      return new WebAuthnError({\n        message: `The RP ID \"${publicKey.rpId}\" is invalid for this domain`,\n        code: 'ERROR_INVALID_RP_ID',\n        cause: error,\n      })\n    }\n  } else if (error.name === 'UnknownError') {\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 1)\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 12)\n    return new WebAuthnError({\n      message:\n        'The authenticator was unable to process the specified options, or could not create a new assertion signature',\n      code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n      cause: error,\n    })\n  }\n\n  return new WebAuthnError({\n    message: 'a Non-Webauthn related error has occurred',\n    code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n    cause: error,\n  })\n}\n","import GoTrueClient from '../GoTrueClient'\nimport { base64UrlToUint8Array, bytesToBase64URL } from './base64url'\nimport { AuthError, AuthUnknownError, isAuthError } from './errors'\nimport {\n  AuthMFAEnrollWebauthnResponse,\n  AuthMFAVerifyResponse,\n  AuthMFAVerifyResponseData,\n  MFAChallengeWebauthnParams,\n  MFAEnrollWebauthnParams,\n  MFAVerifyWebauthnParamFields,\n  MFAVerifyWebauthnParams,\n  RequestResult,\n  StrictOmit,\n} from './types'\nimport { isBrowser } from './helpers'\nimport type {\n  AuthenticationCredential,\n  AuthenticationResponseJSON,\n  AuthenticatorAttachment,\n  PublicKeyCredentialCreationOptionsFuture,\n  PublicKeyCredentialCreationOptionsJSON,\n  PublicKeyCredentialFuture,\n  PublicKeyCredentialRequestOptionsFuture,\n  PublicKeyCredentialRequestOptionsJSON,\n  RegistrationCredential,\n  RegistrationResponseJSON,\n} from './webauthn.dom'\n\nimport {\n  identifyAuthenticationError,\n  identifyRegistrationError,\n  isWebAuthnError,\n  WebAuthnError,\n  WebAuthnUnknownError,\n} from './webauthn.errors'\n\nexport { WebAuthnError, isWebAuthnError, identifyRegistrationError, identifyAuthenticationError }\n// Re-export the JSON types for use in other files\nexport type { RegistrationResponseJSON, AuthenticationResponseJSON }\n\n/**\n * WebAuthn abort service to manage ceremony cancellation.\n * Ensures only one WebAuthn ceremony is active at a time to prevent \"operation already in progress\" errors.\n *\n * @experimental This class is experimental and may change in future releases\n * @see {@link https://w3c.github.io/webauthn/#sctn-automation-webdriver-capability W3C WebAuthn Spec - Aborting Ceremonies}\n */\nexport class WebAuthnAbortService {\n  private controller: AbortController | undefined\n\n  /**\n   * Create an abort signal for a new WebAuthn operation.\n   * Automatically cancels any existing operation.\n   *\n   * @returns {AbortSignal} Signal to pass to navigator.credentials.create() or .get()\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal MDN - AbortSignal}\n   */\n  createNewAbortSignal(): AbortSignal {\n    // Abort any existing calls to navigator.credentials.create() or navigator.credentials.get()\n    if (this.controller) {\n      const abortError = new Error('Cancelling existing WebAuthn API call for new one')\n      abortError.name = 'AbortError'\n      this.controller.abort(abortError)\n    }\n\n    const newController = new AbortController()\n    this.controller = newController\n    return newController.signal\n  }\n\n  /**\n   * Manually cancel the current WebAuthn operation.\n   * Useful for cleaning up when user cancels or navigates away.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/AbortController/abort MDN - AbortController.abort}\n   */\n  cancelCeremony(): void {\n    if (this.controller) {\n      const abortError = new Error('Manually cancelling existing WebAuthn API call')\n      abortError.name = 'AbortError'\n      this.controller.abort(abortError)\n      this.controller = undefined\n    }\n  }\n}\n\n/**\n * Singleton instance to ensure only one WebAuthn ceremony is active at a time.\n * This prevents \"operation already in progress\" errors when retrying WebAuthn operations.\n *\n * @experimental This instance is experimental and may change in future releases\n */\nexport const webAuthnAbortService = new WebAuthnAbortService()\n\n/**\n * Server response format for WebAuthn credential creation options.\n * Uses W3C standard JSON format with base64url-encoded binary fields.\n */\nexport type ServerCredentialCreationOptions = PublicKeyCredentialCreationOptionsJSON\n\n/**\n * Server response format for WebAuthn credential request options.\n * Uses W3C standard JSON format with base64url-encoded binary fields.\n */\nexport type ServerCredentialRequestOptions = PublicKeyCredentialRequestOptionsJSON\n\n/**\n * Convert base64url encoded strings in WebAuthn credential creation options to ArrayBuffers\n * as required by the WebAuthn browser API.\n * Supports both native WebAuthn Level 3 parseCreationOptionsFromJSON and manual fallback.\n *\n * @param {ServerCredentialCreationOptions} options - JSON options from server with base64url encoded fields\n * @returns {PublicKeyCredentialCreationOptionsFuture} Options ready for navigator.credentials.create()\n * @see {@link https://w3c.github.io/webauthn/#sctn-parseCreationOptionsFromJSON W3C WebAuthn Spec - parseCreationOptionsFromJSON}\n */\nexport function deserializeCredentialCreationOptions(\n  options: ServerCredentialCreationOptions\n): PublicKeyCredentialCreationOptionsFuture {\n  if (!options) {\n    throw new Error('Credential creation options are required')\n  }\n\n  // Check if the native parseCreationOptionsFromJSON method is available\n  if (\n    typeof PublicKeyCredential !== 'undefined' &&\n    'parseCreationOptionsFromJSON' in PublicKeyCredential &&\n    typeof (PublicKeyCredential as unknown as PublicKeyCredentialFuture)\n      .parseCreationOptionsFromJSON === 'function'\n  ) {\n    // Use the native WebAuthn Level 3 method\n    return (\n      PublicKeyCredential as unknown as PublicKeyCredentialFuture\n    ).parseCreationOptionsFromJSON(\n      /** we assert the options here as typescript still doesn't know about future webauthn types */\n      options as any\n    ) as PublicKeyCredentialCreationOptionsFuture\n  }\n\n  // Fallback to manual parsing for browsers that don't support the native method\n  // Destructure to separate fields that need transformation\n  const { challenge: challengeStr, user: userOpts, excludeCredentials, ...restOptions } = options\n\n  // Convert challenge from base64url to ArrayBuffer\n  const challenge = base64UrlToUint8Array(challengeStr).buffer as ArrayBuffer\n\n  // Convert user.id from base64url to ArrayBuffer\n  const user: PublicKeyCredentialUserEntity = {\n    ...userOpts,\n    id: base64UrlToUint8Array(userOpts.id).buffer as ArrayBuffer,\n  }\n\n  // Build the result object\n  const result: PublicKeyCredentialCreationOptionsFuture = {\n    ...restOptions,\n    challenge,\n    user,\n  }\n\n  // Only add excludeCredentials if it exists\n  if (excludeCredentials && excludeCredentials.length > 0) {\n    result.excludeCredentials = new Array(excludeCredentials.length)\n\n    for (let i = 0; i < excludeCredentials.length; i++) {\n      const cred = excludeCredentials[i]\n      result.excludeCredentials[i] = {\n        ...cred,\n        id: base64UrlToUint8Array(cred.id).buffer,\n        type: cred.type || 'public-key',\n        // Cast transports to handle future transport types like \"cable\"\n        transports: cred.transports,\n      }\n    }\n  }\n\n  return result\n}\n\n/**\n * Convert base64url encoded strings in WebAuthn credential request options to ArrayBuffers\n * as required by the WebAuthn browser API.\n * Supports both native WebAuthn Level 3 parseRequestOptionsFromJSON and manual fallback.\n *\n * @param {ServerCredentialRequestOptions} options - JSON options from server with base64url encoded fields\n * @returns {PublicKeyCredentialRequestOptionsFuture} Options ready for navigator.credentials.get()\n * @see {@link https://w3c.github.io/webauthn/#sctn-parseRequestOptionsFromJSON W3C WebAuthn Spec - parseRequestOptionsFromJSON}\n */\nexport function deserializeCredentialRequestOptions(\n  options: ServerCredentialRequestOptions\n): PublicKeyCredentialRequestOptionsFuture {\n  if (!options) {\n    throw new Error('Credential request options are required')\n  }\n\n  // Check if the native parseRequestOptionsFromJSON method is available\n  if (\n    typeof PublicKeyCredential !== 'undefined' &&\n    'parseRequestOptionsFromJSON' in PublicKeyCredential &&\n    typeof (PublicKeyCredential as unknown as PublicKeyCredentialFuture)\n      .parseRequestOptionsFromJSON === 'function'\n  ) {\n    // Use the native WebAuthn Level 3 method\n    return (\n      PublicKeyCredential as unknown as PublicKeyCredentialFuture\n    ).parseRequestOptionsFromJSON(options) as PublicKeyCredentialRequestOptionsFuture\n  }\n\n  // Fallback to manual parsing for browsers that don't support the native method\n  // Destructure to separate fields that need transformation\n  const { challenge: challengeStr, allowCredentials, ...restOptions } = options\n\n  // Convert challenge from base64url to ArrayBuffer\n  const challenge = base64UrlToUint8Array(challengeStr).buffer as ArrayBuffer\n\n  // Build the result object\n  const result: PublicKeyCredentialRequestOptionsFuture = {\n    ...restOptions,\n    challenge,\n  }\n\n  // Only add allowCredentials if it exists\n  if (allowCredentials && allowCredentials.length > 0) {\n    result.allowCredentials = new Array(allowCredentials.length)\n\n    for (let i = 0; i < allowCredentials.length; i++) {\n      const cred = allowCredentials[i]\n      result.allowCredentials[i] = {\n        ...cred,\n        id: base64UrlToUint8Array(cred.id).buffer,\n        type: cred.type || 'public-key',\n        // Cast transports to handle future transport types like \"cable\"\n        transports: cred.transports,\n      }\n    }\n  }\n\n  return result\n}\n\n/**\n * Server format for credential response with base64url-encoded binary fields\n * Can be either a registration or authentication response\n */\nexport type ServerCredentialResponse = RegistrationResponseJSON | AuthenticationResponseJSON\n\n/**\n * Convert a registration/enrollment credential response to server format.\n * Serializes binary fields to base64url for JSON transmission.\n * Supports both native WebAuthn Level 3 toJSON and manual fallback.\n *\n * @param {RegistrationCredential} credential - Credential from navigator.credentials.create()\n * @returns {RegistrationResponseJSON} JSON-serializable credential for server\n * @see {@link https://w3c.github.io/webauthn/#dom-publickeycredential-tojson W3C WebAuthn Spec - toJSON}\n */\nexport function serializeCredentialCreationResponse(\n  credential: RegistrationCredential\n): RegistrationResponseJSON {\n  // Check if the credential instance has the toJSON method\n  if ('toJSON' in credential && typeof credential.toJSON === 'function') {\n    // Use the native WebAuthn Level 3 method\n    return (credential as RegistrationCredential).toJSON()\n  }\n  const credentialWithAttachment = credential as PublicKeyCredential & {\n    response: AuthenticatorAttestationResponse\n    authenticatorAttachment?: string | null\n  }\n\n  return {\n    id: credential.id,\n    rawId: credential.id,\n    response: {\n      attestationObject: bytesToBase64URL(new Uint8Array(credential.response.attestationObject)),\n      clientDataJSON: bytesToBase64URL(new Uint8Array(credential.response.clientDataJSON)),\n    },\n    type: 'public-key',\n    clientExtensionResults: credential.getClientExtensionResults(),\n    // Convert null to undefined and cast to AuthenticatorAttachment type\n    authenticatorAttachment: (credentialWithAttachment.authenticatorAttachment ?? undefined) as\n      | AuthenticatorAttachment\n      | undefined,\n  }\n}\n\n/**\n * Convert an authentication/verification credential response to server format.\n * Serializes binary fields to base64url for JSON transmission.\n * Supports both native WebAuthn Level 3 toJSON and manual fallback.\n *\n * @param {AuthenticationCredential} credential - Credential from navigator.credentials.get()\n * @returns {AuthenticationResponseJSON} JSON-serializable credential for server\n * @see {@link https://w3c.github.io/webauthn/#dom-publickeycredential-tojson W3C WebAuthn Spec - toJSON}\n */\nexport function serializeCredentialRequestResponse(\n  credential: AuthenticationCredential\n): AuthenticationResponseJSON {\n  // Check if the credential instance has the toJSON method\n  if ('toJSON' in credential && typeof credential.toJSON === 'function') {\n    // Use the native WebAuthn Level 3 method\n    return (credential as AuthenticationCredential).toJSON()\n  }\n\n  // Fallback to manual conversion for browsers that don't support toJSON\n  // Access authenticatorAttachment via type assertion to handle TypeScript version differences\n  // @simplewebauthn/types includes this property but base TypeScript 4.7.4 doesn't\n  const credentialWithAttachment = credential as PublicKeyCredential & {\n    response: AuthenticatorAssertionResponse\n    authenticatorAttachment?: string | null\n  }\n\n  const clientExtensionResults = credential.getClientExtensionResults()\n  const assertionResponse = credential.response\n\n  return {\n    id: credential.id,\n    rawId: credential.id, // W3C spec expects rawId to match id for JSON format\n    response: {\n      authenticatorData: bytesToBase64URL(new Uint8Array(assertionResponse.authenticatorData)),\n      clientDataJSON: bytesToBase64URL(new Uint8Array(assertionResponse.clientDataJSON)),\n      signature: bytesToBase64URL(new Uint8Array(assertionResponse.signature)),\n      userHandle: assertionResponse.userHandle\n        ? bytesToBase64URL(new Uint8Array(assertionResponse.userHandle))\n        : undefined,\n    },\n    type: 'public-key',\n    clientExtensionResults,\n    // Convert null to undefined and cast to AuthenticatorAttachment type\n    authenticatorAttachment: (credentialWithAttachment.authenticatorAttachment ?? undefined) as\n      | AuthenticatorAttachment\n      | undefined,\n  }\n}\n\n/**\n * A simple test to determine if a hostname is a properly-formatted domain name.\n * Considers localhost valid for development environments.\n *\n * A \"valid domain\" is defined here: https://url.spec.whatwg.org/#valid-domain\n *\n * Regex sourced from here:\n * https://www.oreilly.com/library/view/regular-expressions-cookbook/9781449327453/ch08s15.html\n *\n * @param {string} hostname - The hostname to validate\n * @returns {boolean} True if valid domain or localhost\n * @see {@link https://url.spec.whatwg.org/#valid-domain WHATWG URL Spec - Valid Domain}\n */\nexport function isValidDomain(hostname: string): boolean {\n  return (\n    // Consider localhost valid as well since it's okay wrt Secure Contexts\n    hostname === 'localhost' || /^([a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}$/i.test(hostname)\n  )\n}\n\n/**\n * Determine if the browser is capable of WebAuthn.\n * Checks for necessary Web APIs: PublicKeyCredential and Credential Management.\n *\n * @returns {boolean} True if browser supports WebAuthn\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/PublicKeyCredential#browser_compatibility MDN - PublicKeyCredential Browser Compatibility}\n */\nfunction browserSupportsWebAuthn(): boolean {\n  return !!(\n    isBrowser() &&\n    'PublicKeyCredential' in window &&\n    window.PublicKeyCredential &&\n    'credentials' in navigator &&\n    typeof navigator?.credentials?.create === 'function' &&\n    typeof navigator?.credentials?.get === 'function'\n  )\n}\n\n/**\n * Create a WebAuthn credential using the browser's credentials API.\n * Wraps navigator.credentials.create() with error handling.\n *\n * @param {CredentialCreationOptions} options - Options including publicKey parameters\n * @returns {Promise<RequestResult<RegistrationCredential, WebAuthnError>>} Created credential or error\n * @see {@link https://w3c.github.io/webauthn/#sctn-createCredential W3C WebAuthn Spec - Create Credential}\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/CredentialsContainer/create MDN - credentials.create}\n */\nexport async function createCredential(\n  options: StrictOmit<CredentialCreationOptions, 'publicKey'> & {\n    publicKey: PublicKeyCredentialCreationOptionsFuture\n  }\n): Promise<RequestResult<RegistrationCredential, WebAuthnError>> {\n  try {\n    const response = await navigator.credentials.create(\n      /** we assert the type here until typescript types are updated */\n      options as Parameters<typeof navigator.credentials.create>[0]\n    )\n    if (!response) {\n      return {\n        data: null,\n        error: new WebAuthnUnknownError('Empty credential response', response),\n      }\n    }\n    if (!(response instanceof PublicKeyCredential)) {\n      return {\n        data: null,\n        error: new WebAuthnUnknownError('Browser returned unexpected credential type', response),\n      }\n    }\n    return { data: response as RegistrationCredential, error: null }\n  } catch (err) {\n    return {\n      data: null,\n      error: identifyRegistrationError({\n        error: err as Error,\n        options,\n      }),\n    }\n  }\n}\n\n/**\n * Get a WebAuthn credential using the browser's credentials API.\n * Wraps navigator.credentials.get() with error handling.\n *\n * @param {CredentialRequestOptions} options - Options including publicKey parameters\n * @returns {Promise<RequestResult<AuthenticationCredential, WebAuthnError>>} Retrieved credential or error\n * @see {@link https://w3c.github.io/webauthn/#sctn-getAssertion W3C WebAuthn Spec - Get Assertion}\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/CredentialsContainer/get MDN - credentials.get}\n */\nexport async function getCredential(\n  options: StrictOmit<CredentialRequestOptions, 'publicKey'> & {\n    publicKey: PublicKeyCredentialRequestOptionsFuture\n  }\n): Promise<RequestResult<AuthenticationCredential, WebAuthnError>> {\n  try {\n    const response = await navigator.credentials.get(\n      /** we assert the type here until typescript types are updated */\n      options as Parameters<typeof navigator.credentials.get>[0]\n    )\n    if (!response) {\n      return {\n        data: null,\n        error: new WebAuthnUnknownError('Empty credential response', response),\n      }\n    }\n    if (!(response instanceof PublicKeyCredential)) {\n      return {\n        data: null,\n        error: new WebAuthnUnknownError('Browser returned unexpected credential type', response),\n      }\n    }\n    return { data: response as AuthenticationCredential, error: null }\n  } catch (err) {\n    return {\n      data: null,\n      error: identifyAuthenticationError({\n        error: err as Error,\n        options,\n      }),\n    }\n  }\n}\n\nexport const DEFAULT_CREATION_OPTIONS: Partial<PublicKeyCredentialCreationOptionsFuture> = {\n  hints: ['security-key'],\n  authenticatorSelection: {\n    authenticatorAttachment: 'cross-platform',\n    requireResidentKey: false,\n    /** set to preferred because older yubikeys don't have PIN/Biometric */\n    userVerification: 'preferred',\n    residentKey: 'discouraged',\n  },\n  attestation: 'direct',\n}\n\nexport const DEFAULT_REQUEST_OPTIONS: Partial<PublicKeyCredentialRequestOptionsFuture> = {\n  /** set to preferred because older yubikeys don't have PIN/Biometric */\n  userVerification: 'preferred',\n  hints: ['security-key'],\n  attestation: 'direct',\n}\n\nfunction deepMerge<T>(...sources: Partial<T>[]): T {\n  const isObject = (val: unknown): val is Record<string, unknown> =>\n    val !== null && typeof val === 'object' && !Array.isArray(val)\n\n  const isArrayBufferLike = (val: unknown): val is ArrayBuffer | ArrayBufferView =>\n    val instanceof ArrayBuffer || ArrayBuffer.isView(val)\n\n  const result: Partial<T> = {}\n\n  for (const source of sources) {\n    if (!source) continue\n\n    for (const key in source) {\n      const value = source[key]\n      if (value === undefined) continue\n\n      if (Array.isArray(value)) {\n        // preserve array reference, including unions like AuthenticatorTransport[]\n        result[key] = value as T[typeof key]\n      } else if (isArrayBufferLike(value)) {\n        result[key] = value as T[typeof key]\n      } else if (isObject(value)) {\n        const existing = result[key]\n        if (isObject(existing)) {\n          result[key] = deepMerge(existing, value) as unknown as T[typeof key]\n        } else {\n          result[key] = deepMerge(value) as unknown as T[typeof key]\n        }\n      } else {\n        result[key] = value as T[typeof key]\n      }\n    }\n  }\n\n  return result as T\n}\n\n/**\n * Merges WebAuthn credential creation options with overrides.\n * Sets sensible defaults for authenticator selection and extensions.\n *\n * @param {PublicKeyCredentialCreationOptionsFuture} baseOptions - The base options from the server\n * @param {PublicKeyCredentialCreationOptionsFuture} overrides - Optional overrides to apply\n * @param {string} friendlyName - Optional friendly name for the credential\n * @returns {PublicKeyCredentialCreationOptionsFuture} Merged credential creation options\n * @see {@link https://w3c.github.io/webauthn/#dictdef-authenticatorselectioncriteria W3C WebAuthn Spec - AuthenticatorSelectionCriteria}\n */\nexport function mergeCredentialCreationOptions(\n  baseOptions: PublicKeyCredentialCreationOptionsFuture,\n  overrides?: Partial<PublicKeyCredentialCreationOptionsFuture>\n): PublicKeyCredentialCreationOptionsFuture {\n  return deepMerge(DEFAULT_CREATION_OPTIONS, baseOptions, overrides || {})\n}\n\n/**\n * Merges WebAuthn credential request options with overrides.\n * Sets sensible defaults for user verification and hints.\n *\n * @param {PublicKeyCredentialRequestOptionsFuture} baseOptions - The base options from the server\n * @param {PublicKeyCredentialRequestOptionsFuture} overrides - Optional overrides to apply\n * @returns {PublicKeyCredentialRequestOptionsFuture} Merged credential request options\n * @see {@link https://w3c.github.io/webauthn/#dictdef-publickeycredentialrequestoptions W3C WebAuthn Spec - PublicKeyCredentialRequestOptions}\n */\nexport function mergeCredentialRequestOptions(\n  baseOptions: PublicKeyCredentialRequestOptionsFuture,\n  overrides?: Partial<PublicKeyCredentialRequestOptionsFuture>\n): PublicKeyCredentialRequestOptionsFuture {\n  return deepMerge(DEFAULT_REQUEST_OPTIONS, baseOptions, overrides || {})\n}\n\n/**\n * WebAuthn API wrapper for Supabase Auth.\n * Provides methods for enrolling, challenging, verifying, authenticating, and registering WebAuthn credentials.\n *\n * @experimental This API is experimental and may change in future releases\n * @see {@link https://w3c.github.io/webauthn/ W3C WebAuthn Specification}\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Web_Authentication_API MDN - Web Authentication API}\n */\nexport class WebAuthnApi {\n  public enroll: typeof WebAuthnApi.prototype._enroll\n  public challenge: typeof WebAuthnApi.prototype._challenge\n  public verify: typeof WebAuthnApi.prototype._verify\n  public authenticate: typeof WebAuthnApi.prototype._authenticate\n  public register: typeof WebAuthnApi.prototype._register\n\n  constructor(private client: GoTrueClient) {\n    // Bind all methods so they can be destructured\n    this.enroll = this._enroll.bind(this)\n    this.challenge = this._challenge.bind(this)\n    this.verify = this._verify.bind(this)\n    this.authenticate = this._authenticate.bind(this)\n    this.register = this._register.bind(this)\n  }\n\n  /**\n   * Enroll a new WebAuthn factor.\n   * Creates an unverified WebAuthn factor that must be verified with a credential.\n   *\n   * @experimental This method is experimental and may change in future releases\n   * @param {Omit<MFAEnrollWebauthnParams, 'factorType'>} params - Enrollment parameters (friendlyName required)\n   * @returns {Promise<AuthMFAEnrollWebauthnResponse>} Enrolled factor details or error\n   * @see {@link https://w3c.github.io/webauthn/#sctn-registering-a-new-credential W3C WebAuthn Spec - Registering a New Credential}\n   */\n  public async _enroll(\n    params: Omit<MFAEnrollWebauthnParams, 'factorType'>\n  ): Promise<AuthMFAEnrollWebauthnResponse> {\n    return this.client.mfa.enroll({ ...params, factorType: 'webauthn' })\n  }\n\n  /**\n   * Challenge for WebAuthn credential creation or authentication.\n   * Combines server challenge with browser credential operations.\n   * Handles both registration (create) and authentication (request) flows.\n   *\n   * @experimental This method is experimental and may change in future releases\n   * @param {MFAChallengeWebauthnParams & { friendlyName?: string; signal?: AbortSignal }} params - Challenge parameters including factorId\n   * @param {Object} overrides - Allows you to override the parameters passed to navigator.credentials\n   * @param {PublicKeyCredentialCreationOptionsFuture} overrides.create - Override options for credential creation\n   * @param {PublicKeyCredentialRequestOptionsFuture} overrides.request - Override options for credential request\n   * @returns {Promise<RequestResult>} Challenge response with credential or error\n   * @see {@link https://w3c.github.io/webauthn/#sctn-credential-creation W3C WebAuthn Spec - Credential Creation}\n   * @see {@link https://w3c.github.io/webauthn/#sctn-verifying-assertion W3C WebAuthn Spec - Verifying Assertion}\n   */\n  public async _challenge(\n    {\n      factorId,\n      webauthn,\n      friendlyName,\n      signal,\n    }: MFAChallengeWebauthnParams & { friendlyName?: string; signal?: AbortSignal },\n    overrides?:\n      | {\n          create?: Partial<PublicKeyCredentialCreationOptionsFuture>\n          request?: never\n        }\n      | {\n          create?: never\n          request?: Partial<PublicKeyCredentialRequestOptionsFuture>\n        }\n  ): Promise<\n    RequestResult<\n      { factorId: string; challengeId: string } & {\n        webauthn: StrictOmit<\n          MFAVerifyWebauthnParamFields<'create' | 'request'>['webauthn'],\n          'rpId' | 'rpOrigins'\n        >\n      },\n      WebAuthnError | AuthError\n    >\n  > {\n    try {\n      // Get challenge from server using the client's MFA methods\n      const { data: challengeResponse, error: challengeError } = await this.client.mfa.challenge({\n        factorId,\n        webauthn,\n      })\n\n      if (!challengeResponse) {\n        return { data: null, error: challengeError }\n      }\n\n      const abortSignal = signal ?? webAuthnAbortService.createNewAbortSignal()\n\n      /** webauthn will fail if either of the name/displayname are blank */\n      if (challengeResponse.webauthn.type === 'create') {\n        const { user } = challengeResponse.webauthn.credential_options.publicKey\n        if (!user.name) {\n          // Preserve original format: use friendlyName if provided, otherwise fetch fallback\n          // This maintains backward compatibility with the ${user.id}:${name} format\n          const nameToUse = friendlyName\n          if (!nameToUse) {\n            // Only fetch user data if friendlyName is not provided (bug fix for null friendlyName)\n            const currentUser = await this.client.getUser()\n            const userData = currentUser.data.user\n            const fallbackName =\n              userData?.user_metadata?.name || userData?.email || userData?.id || 'User'\n            user.name = `${user.id}:${fallbackName}`\n          } else {\n            user.name = `${user.id}:${nameToUse}`\n          }\n        }\n        if (!user.displayName) {\n          user.displayName = user.name\n        }\n      }\n\n      switch (challengeResponse.webauthn.type) {\n        case 'create': {\n          const options = mergeCredentialCreationOptions(\n            challengeResponse.webauthn.credential_options.publicKey,\n            overrides?.create\n          )\n\n          const { data, error } = await createCredential({\n            publicKey: options,\n            signal: abortSignal,\n          })\n\n          if (data) {\n            return {\n              data: {\n                factorId,\n                challengeId: challengeResponse.id,\n                webauthn: {\n                  type: challengeResponse.webauthn.type,\n                  credential_response: data,\n                },\n              },\n              error: null,\n            }\n          }\n          return { data: null, error }\n        }\n\n        case 'request': {\n          const options = mergeCredentialRequestOptions(\n            challengeResponse.webauthn.credential_options.publicKey,\n            overrides?.request\n          )\n\n          const { data, error } = await getCredential({\n            ...challengeResponse.webauthn.credential_options,\n            publicKey: options,\n            signal: abortSignal,\n          })\n\n          if (data) {\n            return {\n              data: {\n                factorId,\n                challengeId: challengeResponse.id,\n                webauthn: {\n                  type: challengeResponse.webauthn.type,\n                  credential_response: data,\n                },\n              },\n              error: null,\n            }\n          }\n          return { data: null, error }\n        }\n      }\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: null, error }\n      }\n      return {\n        data: null,\n        error: new AuthUnknownError('Unexpected error in challenge', error),\n      }\n    }\n  }\n\n  /**\n   * Verify a WebAuthn credential with the server.\n   * Completes the WebAuthn ceremony by sending the credential to the server for verification.\n   *\n   * @experimental This method is experimental and may change in future releases\n   * @param {Object} params - Verification parameters\n   * @param {string} params.challengeId - ID of the challenge being verified\n   * @param {string} params.factorId - ID of the WebAuthn factor\n   * @param {MFAVerifyWebauthnParams<T>['webauthn']} params.webauthn - WebAuthn credential response\n   * @returns {Promise<AuthMFAVerifyResponse>} Verification result with session or error\n   * @see {@link https://w3c.github.io/webauthn/#sctn-verifying-assertion W3C WebAuthn Spec - Verifying an Authentication Assertion}\n   * */\n  public async _verify<T extends 'create' | 'request'>({\n    challengeId,\n    factorId,\n    webauthn,\n  }: {\n    challengeId: string\n    factorId: string\n    webauthn: MFAVerifyWebauthnParams<T>['webauthn']\n  }): Promise<AuthMFAVerifyResponse> {\n    return this.client.mfa.verify({\n      factorId,\n      challengeId,\n      webauthn: webauthn,\n    })\n  }\n\n  /**\n   * Complete WebAuthn authentication flow.\n   * Performs challenge and verification in a single operation for existing credentials.\n   *\n   * @experimental This method is experimental and may change in future releases\n   * @param {Object} params - Authentication parameters\n   * @param {string} params.factorId - ID of the WebAuthn factor to authenticate with\n   * @param {Object} params.webauthn - WebAuthn configuration\n   * @param {string} params.webauthn.rpId - Relying Party ID (defaults to current hostname)\n   * @param {string[]} params.webauthn.rpOrigins - Allowed origins (defaults to current origin)\n   * @param {AbortSignal} params.webauthn.signal - Optional abort signal\n   * @param {PublicKeyCredentialRequestOptionsFuture} overrides - Override options for navigator.credentials.get\n   * @returns {Promise<RequestResult<AuthMFAVerifyResponseData, WebAuthnError | AuthError>>} Authentication result\n   * @see {@link https://w3c.github.io/webauthn/#sctn-authentication W3C WebAuthn Spec - Authentication Ceremony}\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/PublicKeyCredentialRequestOptions MDN - PublicKeyCredentialRequestOptions}\n   */\n  public async _authenticate(\n    {\n      factorId,\n      webauthn: {\n        rpId = typeof window !== 'undefined' ? window.location.hostname : undefined,\n        rpOrigins = typeof window !== 'undefined' ? [window.location.origin] : undefined,\n        signal,\n      } = {},\n    }: {\n      factorId: string\n      webauthn?: {\n        rpId?: string\n        rpOrigins?: string[]\n        signal?: AbortSignal\n      }\n    },\n    overrides?: PublicKeyCredentialRequestOptionsFuture\n  ): Promise<RequestResult<AuthMFAVerifyResponseData, WebAuthnError | AuthError>> {\n    if (!rpId) {\n      return {\n        data: null,\n        error: new AuthError('rpId is required for WebAuthn authentication'),\n      }\n    }\n    try {\n      if (!browserSupportsWebAuthn()) {\n        return {\n          data: null,\n          error: new AuthUnknownError('Browser does not support WebAuthn', null),\n        }\n      }\n\n      // Get challenge and credential\n      const { data: challengeResponse, error: challengeError } = await this.challenge(\n        {\n          factorId,\n          webauthn: { rpId, rpOrigins },\n          signal,\n        },\n        { request: overrides }\n      )\n\n      if (!challengeResponse) {\n        return { data: null, error: challengeError }\n      }\n\n      const { webauthn } = challengeResponse\n\n      // Verify credential\n      return this._verify({\n        factorId,\n        challengeId: challengeResponse.challengeId,\n        webauthn: {\n          type: webauthn.type,\n          rpId,\n          rpOrigins,\n          credential_response: webauthn.credential_response,\n        },\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: null, error }\n      }\n      return {\n        data: null,\n        error: new AuthUnknownError('Unexpected error in authenticate', error),\n      }\n    }\n  }\n\n  /**\n   * Complete WebAuthn registration flow.\n   * Performs enrollment, challenge, and verification in a single operation for new credentials.\n   *\n   * @experimental This method is experimental and may change in future releases\n   * @param {Object} params - Registration parameters\n   * @param {string} params.friendlyName - User-friendly name for the credential\n   * @param {string} params.rpId - Relying Party ID (defaults to current hostname)\n   * @param {string[]} params.rpOrigins - Allowed origins (defaults to current origin)\n   * @param {AbortSignal} params.signal - Optional abort signal\n   * @param {PublicKeyCredentialCreationOptionsFuture} overrides - Override options for navigator.credentials.create\n   * @returns {Promise<RequestResult<AuthMFAVerifyResponseData, WebAuthnError | AuthError>>} Registration result\n   * @see {@link https://w3c.github.io/webauthn/#sctn-registering-a-new-credential W3C WebAuthn Spec - Registration Ceremony}\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/PublicKeyCredentialCreationOptions MDN - PublicKeyCredentialCreationOptions}\n   */\n  public async _register(\n    {\n      friendlyName,\n      webauthn: {\n        rpId = typeof window !== 'undefined' ? window.location.hostname : undefined,\n        rpOrigins = typeof window !== 'undefined' ? [window.location.origin] : undefined,\n        signal,\n      } = {},\n    }: {\n      friendlyName: string\n      webauthn?: {\n        rpId?: string\n        rpOrigins?: string[]\n        signal?: AbortSignal\n      }\n    },\n    overrides?: Partial<PublicKeyCredentialCreationOptionsFuture>\n  ): Promise<RequestResult<AuthMFAVerifyResponseData, WebAuthnError | AuthError>> {\n    if (!rpId) {\n      return {\n        data: null,\n        error: new AuthError('rpId is required for WebAuthn registration'),\n      }\n    }\n    try {\n      if (!browserSupportsWebAuthn()) {\n        return {\n          data: null,\n          error: new AuthUnknownError('Browser does not support WebAuthn', null),\n        }\n      }\n\n      // Enroll factor\n      const { data: factor, error: enrollError } = await this._enroll({\n        friendlyName,\n      })\n\n      if (!factor) {\n        await this.client.mfa\n          .listFactors()\n          .then((factors) =>\n            factors.data?.all.find(\n              (v) =>\n                v.factor_type === 'webauthn' &&\n                v.friendly_name === friendlyName &&\n                v.status !== 'unverified'\n            )\n          )\n          .then((factor) => (factor ? this.client.mfa.unenroll({ factorId: factor?.id }) : void 0))\n        return { data: null, error: enrollError }\n      }\n\n      // Get challenge and create credential\n      const { data: challengeResponse, error: challengeError } = await this._challenge(\n        {\n          factorId: factor.id,\n          friendlyName: factor.friendly_name,\n          webauthn: { rpId, rpOrigins },\n          signal,\n        },\n        {\n          create: overrides,\n        }\n      )\n\n      if (!challengeResponse) {\n        return { data: null, error: challengeError }\n      }\n\n      return this._verify({\n        factorId: factor.id,\n        challengeId: challengeResponse.challengeId,\n        webauthn: {\n          rpId,\n          rpOrigins,\n          type: challengeResponse.webauthn.type,\n          credential_response: challengeResponse.webauthn.credential_response,\n        },\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return { data: null, error }\n      }\n      return {\n        data: null,\n        error: new AuthUnknownError('Unexpected error in register', error),\n      }\n    }\n  }\n}\n","/**\n * https://mathiasbynens.be/notes/globalthis\n */\nexport function polyfillGlobalThis() {\n  if (typeof globalThis === 'object') return\n  try {\n    Object.defineProperty(Object.prototype, '__magic__', {\n      get: function () {\n        return this\n      },\n      configurable: true,\n    })\n    // @ts-expect-error 'Allow access to magic'\n    __magic__.globalThis = __magic__\n    // @ts-expect-error 'Allow access to magic'\n    delete Object.prototype.__magic__\n  } catch (e) {\n    if (typeof self !== 'undefined') {\n      // @ts-expect-error 'Allow access to globals'\n      self.globalThis = self\n    }\n  }\n}\n","import GoTrueAdminApi from './GoTrueAdminApi'\nimport {\n  AUTO_REFRESH_TICK_DURATION_MS,\n  AUTO_REFRESH_TICK_THRESHOLD,\n  DEFAULT_HEADERS,\n  EXPIRY_MARGIN_MS,\n  GOTRUE_URL,\n  JWKS_TTL,\n  STORAGE_KEY,\n} from './lib/constants'\nimport {\n  AuthError,\n  AuthImplicitGrantRedirectError,\n  AuthInvalidCredentialsError,\n  AuthInvalidJwtError,\n  AuthInvalidTokenResponseError,\n  AuthPKCECodeVerifierMissingError,\n  AuthPKCEGrantCodeExchangeError,\n  AuthSessionMissingError,\n  AuthUnknownError,\n  isAuthApiError,\n  isAuthError,\n  isAuthImplicitGrantRedirectError,\n  isAuthRetryableFetchError,\n  isAuthSessionMissingError,\n} from './lib/errors'\nimport {\n  Fetch,\n  _request,\n  _sessionResponse,\n  _sessionResponsePassword,\n  _ssoResponse,\n  _userResponse,\n} from './lib/fetch'\nimport {\n  decodeJWT,\n  deepClone,\n  Deferred,\n  generateCallbackId,\n  getAlgorithm,\n  getCodeChallengeAndMethod,\n  getItemAsync,\n  insecureUserWarningProxy,\n  isBrowser,\n  parseParametersFromURL,\n  removeItemAsync,\n  resolveFetch,\n  retryable,\n  setItemAsync,\n  sleep,\n  supportsLocalStorage,\n  userNotAvailableProxy,\n  validateExp,\n} from './lib/helpers'\nimport { memoryLocalStorageAdapter } from './lib/local-storage'\nimport { LockAcquireTimeoutError, navigatorLock } from './lib/locks'\nimport { polyfillGlobalThis } from './lib/polyfills'\nimport { version } from './lib/version'\n\nimport { bytesToBase64URL, stringToUint8Array } from './lib/base64url'\nimport type {\n  AuthChangeEvent,\n  AuthenticatorAssuranceLevels,\n  AuthFlowType,\n  AuthMFAChallengePhoneResponse,\n  AuthMFAChallengeResponse,\n  AuthMFAChallengeTOTPResponse,\n  AuthMFAChallengeWebauthnResponse,\n  AuthMFAChallengeWebauthnServerResponse,\n  AuthMFAEnrollPhoneResponse,\n  AuthMFAEnrollResponse,\n  AuthMFAEnrollTOTPResponse,\n  AuthMFAEnrollWebauthnResponse,\n  AuthMFAGetAuthenticatorAssuranceLevelResponse,\n  AuthMFAListFactorsResponse,\n  AuthMFAUnenrollResponse,\n  AuthMFAVerifyResponse,\n  AuthOtpResponse,\n  AuthResponse,\n  AuthResponsePassword,\n  AuthTokenResponse,\n  AuthTokenResponsePassword,\n  CallRefreshTokenResult,\n  EthereumWallet,\n  EthereumWeb3Credentials,\n  Factor,\n  GoTrueClientOptions,\n  GoTrueMFAApi,\n  InitializeResult,\n  JWK,\n  JwtHeader,\n  JwtPayload,\n  LockFunc,\n  MFAChallengeAndVerifyParams,\n  MFAChallengeParams,\n  MFAChallengePhoneParams,\n  MFAChallengeTOTPParams,\n  MFAChallengeWebauthnParams,\n  MFAEnrollParams,\n  MFAEnrollPhoneParams,\n  MFAEnrollTOTPParams,\n  MFAEnrollWebauthnParams,\n  MFAUnenrollParams,\n  MFAVerifyParams,\n  MFAVerifyPhoneParams,\n  MFAVerifyTOTPParams,\n  MFAVerifyWebauthnParamFields,\n  MFAVerifyWebauthnParams,\n  OAuthResponse,\n  AuthOAuthServerApi,\n  AuthOAuthAuthorizationDetailsResponse,\n  AuthOAuthConsentResponse,\n  AuthOAuthGrantsResponse,\n  AuthOAuthRevokeGrantResponse,\n  Prettify,\n  Provider,\n  ResendParams,\n  Session,\n  SignInAnonymouslyCredentials,\n  SignInWithIdTokenCredentials,\n  SignInWithOAuthCredentials,\n  SignInWithPasswordCredentials,\n  SignInWithPasswordlessCredentials,\n  SignInWithSSO,\n  SignOut,\n  SignUpWithPasswordCredentials,\n  SolanaWallet,\n  SolanaWeb3Credentials,\n  SSOResponse,\n  StrictOmit,\n  Subscription,\n  SupportedStorage,\n  User,\n  UserAttributes,\n  UserIdentity,\n  UserResponse,\n  VerifyOtpParams,\n  Web3Credentials,\n} from './lib/types'\nimport {\n  createSiweMessage,\n  fromHex,\n  getAddress,\n  Hex,\n  SiweMessage,\n  toHex,\n} from './lib/web3/ethereum'\nimport {\n  deserializeCredentialCreationOptions,\n  deserializeCredentialRequestOptions,\n  serializeCredentialCreationResponse,\n  serializeCredentialRequestResponse,\n  WebAuthnApi,\n} from './lib/webauthn'\nimport {\n  AuthenticationCredential,\n  PublicKeyCredentialJSON,\n  RegistrationCredential,\n} from './lib/webauthn.dom'\n\npolyfillGlobalThis() // Make \"globalThis\" available\n\nconst DEFAULT_OPTIONS: Omit<\n  Required<GoTrueClientOptions>,\n  'fetch' | 'storage' | 'userStorage' | 'lock'\n> = {\n  url: GOTRUE_URL,\n  storageKey: STORAGE_KEY,\n  autoRefreshToken: true,\n  persistSession: true,\n  detectSessionInUrl: true,\n  headers: DEFAULT_HEADERS,\n  flowType: 'implicit',\n  debug: false,\n  hasCustomAuthorizationHeader: false,\n  throwOnError: false,\n  lockAcquireTimeout: 10000, // 10 seconds\n  skipAutoInitialize: false,\n}\n\nasync function lockNoOp<R>(name: string, acquireTimeout: number, fn: () => Promise<R>): Promise<R> {\n  return await fn()\n}\n\n/**\n * Caches JWKS values for all clients created in the same environment. This is\n * especially useful for shared-memory execution environments such as Vercel's\n * Fluid Compute, AWS Lambda or Supabase's Edge Functions. Regardless of how\n * many clients are created, if they share the same storage key they will use\n * the same JWKS cache, significantly speeding up getClaims() with asymmetric\n * JWTs.\n */\nconst GLOBAL_JWKS: { [storageKey: string]: { cachedAt: number; jwks: { keys: JWK[] } } } = {}\n\nexport default class GoTrueClient {\n  private static nextInstanceID: Record<string, number> = {}\n\n  private instanceID: number\n\n  /**\n   * Namespace for the GoTrue admin methods.\n   * These methods should only be used in a trusted server-side environment.\n   */\n  admin: GoTrueAdminApi\n  /**\n   * Namespace for the MFA methods.\n   */\n  mfa: GoTrueMFAApi\n  /**\n   * Namespace for the OAuth 2.1 authorization server methods.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   * Used to implement the authorization code flow on the consent page.\n   */\n  oauth: AuthOAuthServerApi\n  /**\n   * The storage key used to identify the values saved in localStorage\n   */\n  protected storageKey: string\n\n  protected flowType: AuthFlowType\n\n  /**\n   * The JWKS used for verifying asymmetric JWTs\n   */\n  protected get jwks() {\n    return GLOBAL_JWKS[this.storageKey]?.jwks ?? { keys: [] }\n  }\n\n  protected set jwks(value: { keys: JWK[] }) {\n    GLOBAL_JWKS[this.storageKey] = { ...GLOBAL_JWKS[this.storageKey], jwks: value }\n  }\n\n  protected get jwks_cached_at() {\n    return GLOBAL_JWKS[this.storageKey]?.cachedAt ?? Number.MIN_SAFE_INTEGER\n  }\n\n  protected set jwks_cached_at(value: number) {\n    GLOBAL_JWKS[this.storageKey] = { ...GLOBAL_JWKS[this.storageKey], cachedAt: value }\n  }\n\n  protected autoRefreshToken: boolean\n  protected persistSession: boolean\n  protected storage: SupportedStorage\n  /**\n   * @experimental\n   */\n  protected userStorage: SupportedStorage | null = null\n  protected memoryStorage: { [key: string]: string } | null = null\n  protected stateChangeEmitters: Map<string | symbol, Subscription> = new Map()\n  protected autoRefreshTicker: ReturnType<typeof setInterval> | null = null\n  protected autoRefreshTickTimeout: ReturnType<typeof setTimeout> | null = null\n  protected visibilityChangedCallback: (() => Promise<any>) | null = null\n  protected refreshingDeferred: Deferred<CallRefreshTokenResult> | null = null\n  /**\n   * Keeps track of the async client initialization.\n   * When null or not yet resolved the auth state is `unknown`\n   * Once resolved the auth state is known and it's safe to call any further client methods.\n   * Keep extra care to never reject or throw uncaught errors\n   */\n  protected initializePromise: Promise<InitializeResult> | null = null\n  protected detectSessionInUrl:\n    | boolean\n    | ((url: URL, params: { [parameter: string]: string }) => boolean) = true\n  protected url: string\n  protected headers: {\n    [key: string]: string\n  }\n  protected hasCustomAuthorizationHeader = false\n  protected suppressGetSessionWarning = false\n  protected fetch: Fetch\n  protected lock: LockFunc\n  protected lockAcquired = false\n  protected pendingInLock: Promise<any>[] = []\n  protected throwOnError: boolean\n  protected lockAcquireTimeout: number\n\n  /**\n   * Used to broadcast state change events to other tabs listening.\n   */\n  protected broadcastChannel: BroadcastChannel | null = null\n\n  protected logDebugMessages: boolean\n  protected logger: (message: string, ...args: any[]) => void = console.log\n\n  /**\n   * Create a new client for use in the browser.\n   *\n   * @example\n   * ```ts\n   * import { GoTrueClient } from '@supabase/auth-js'\n   *\n   * const auth = new GoTrueClient({\n   *   url: 'https://xyzcompany.supabase.co/auth/v1',\n   *   headers: { apikey: 'public-anon-key' },\n   *   storageKey: 'supabase-auth',\n   * })\n   * ```\n   */\n  constructor(options: GoTrueClientOptions) {\n    const settings = { ...DEFAULT_OPTIONS, ...options }\n    this.storageKey = settings.storageKey\n\n    this.instanceID = GoTrueClient.nextInstanceID[this.storageKey] ?? 0\n    GoTrueClient.nextInstanceID[this.storageKey] = this.instanceID + 1\n\n    this.logDebugMessages = !!settings.debug\n    if (typeof settings.debug === 'function') {\n      this.logger = settings.debug\n    }\n\n    if (this.instanceID > 0 && isBrowser()) {\n      const message = `${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`\n      console.warn(message)\n      if (this.logDebugMessages) {\n        console.trace(message)\n      }\n    }\n\n    this.persistSession = settings.persistSession\n    this.autoRefreshToken = settings.autoRefreshToken\n    this.admin = new GoTrueAdminApi({\n      url: settings.url,\n      headers: settings.headers,\n      fetch: settings.fetch,\n    })\n\n    this.url = settings.url\n    this.headers = settings.headers\n    this.fetch = resolveFetch(settings.fetch)\n    this.lock = settings.lock || lockNoOp\n    this.detectSessionInUrl = settings.detectSessionInUrl\n    this.flowType = settings.flowType\n    this.hasCustomAuthorizationHeader = settings.hasCustomAuthorizationHeader\n    this.throwOnError = settings.throwOnError\n    this.lockAcquireTimeout = settings.lockAcquireTimeout\n\n    if (settings.lock) {\n      this.lock = settings.lock\n    } else if (this.persistSession && isBrowser() && globalThis?.navigator?.locks) {\n      this.lock = navigatorLock\n    } else {\n      this.lock = lockNoOp\n    }\n\n    if (!this.jwks) {\n      this.jwks = { keys: [] }\n      this.jwks_cached_at = Number.MIN_SAFE_INTEGER\n    }\n\n    this.mfa = {\n      verify: this._verify.bind(this),\n      enroll: this._enroll.bind(this),\n      unenroll: this._unenroll.bind(this),\n      challenge: this._challenge.bind(this),\n      listFactors: this._listFactors.bind(this),\n      challengeAndVerify: this._challengeAndVerify.bind(this),\n      getAuthenticatorAssuranceLevel: this._getAuthenticatorAssuranceLevel.bind(this),\n      webauthn: new WebAuthnApi(this),\n    }\n\n    this.oauth = {\n      getAuthorizationDetails: this._getAuthorizationDetails.bind(this),\n      approveAuthorization: this._approveAuthorization.bind(this),\n      denyAuthorization: this._denyAuthorization.bind(this),\n      listGrants: this._listOAuthGrants.bind(this),\n      revokeGrant: this._revokeOAuthGrant.bind(this),\n    }\n\n    if (this.persistSession) {\n      if (settings.storage) {\n        this.storage = settings.storage\n      } else {\n        if (supportsLocalStorage()) {\n          this.storage = globalThis.localStorage\n        } else {\n          this.memoryStorage = {}\n          this.storage = memoryLocalStorageAdapter(this.memoryStorage)\n        }\n      }\n\n      if (settings.userStorage) {\n        this.userStorage = settings.userStorage\n      }\n    } else {\n      this.memoryStorage = {}\n      this.storage = memoryLocalStorageAdapter(this.memoryStorage)\n    }\n\n    if (isBrowser() && globalThis.BroadcastChannel && this.persistSession && this.storageKey) {\n      try {\n        this.broadcastChannel = new globalThis.BroadcastChannel(this.storageKey)\n      } catch (e: any) {\n        console.error(\n          'Failed to create a new BroadcastChannel, multi-tab state changes will not be available',\n          e\n        )\n      }\n\n      this.broadcastChannel?.addEventListener('message', async (event) => {\n        this._debug('received broadcast notification from other tab or client', event)\n\n        try {\n          await this._notifyAllSubscribers(event.data.event, event.data.session, false) // broadcast = false so we don't get an endless loop of messages\n        } catch (error) {\n          this._debug('#broadcastChannel', 'error', error)\n        }\n      })\n    }\n\n    // Only auto-initialize if not explicitly disabled. Skipped in SSR contexts\n    // where initialization timing must be controlled. All public methods have\n    // lazy initialization, so the client remains fully functional.\n    if (!settings.skipAutoInitialize) {\n      this.initialize().catch((error) => {\n        this._debug('#initialize()', 'error', error)\n      })\n    }\n  }\n\n  /**\n   * Returns whether error throwing mode is enabled for this client.\n   */\n  public isThrowOnErrorEnabled(): boolean {\n    return this.throwOnError\n  }\n\n  /**\n   * Centralizes return handling with optional error throwing. When `throwOnError` is enabled\n   * and the provided result contains a non-nullish error, the error is thrown instead of\n   * being returned. This ensures consistent behavior across all public API methods.\n   */\n  private _returnResult<T extends { error: any }>(result: T): T {\n    if (this.throwOnError && result && result.error) {\n      throw result.error\n    }\n    return result\n  }\n\n  private _logPrefix(): string {\n    return (\n      'GoTrueClient@' +\n      `${this.storageKey}:${this.instanceID} (${version}) ${new Date().toISOString()}`\n    )\n  }\n\n  private _debug(...args: any[]): GoTrueClient {\n    if (this.logDebugMessages) {\n      this.logger(this._logPrefix(), ...args)\n    }\n\n    return this\n  }\n\n  /**\n   * Initializes the client session either from the url or from storage.\n   * This method is automatically called when instantiating the client, but should also be called\n   * manually when checking for an error from an auth redirect (oauth, magiclink, password recovery, etc).\n   */\n  async initialize(): Promise<InitializeResult> {\n    if (this.initializePromise) {\n      return await this.initializePromise\n    }\n\n    this.initializePromise = (async () => {\n      return await this._acquireLock(this.lockAcquireTimeout, async () => {\n        return await this._initialize()\n      })\n    })()\n\n    return await this.initializePromise\n  }\n\n  /**\n   * IMPORTANT:\n   * 1. Never throw in this method, as it is called from the constructor\n   * 2. Never return a session from this method as it would be cached over\n   *    the whole lifetime of the client\n   */\n  private async _initialize(): Promise<InitializeResult> {\n    try {\n      let params: { [parameter: string]: string } = {}\n      let callbackUrlType = 'none'\n\n      if (isBrowser()) {\n        params = parseParametersFromURL(window.location.href)\n        if (this._isImplicitGrantCallback(params)) {\n          callbackUrlType = 'implicit'\n        } else if (await this._isPKCECallback(params)) {\n          callbackUrlType = 'pkce'\n        }\n      }\n\n      /**\n       * Attempt to get the session from the URL only if these conditions are fulfilled\n       *\n       * Note: If the URL isn't one of the callback url types (implicit or pkce),\n       * then there could be an existing session so we don't want to prematurely remove it\n       */\n      if (isBrowser() && this.detectSessionInUrl && callbackUrlType !== 'none') {\n        const { data, error } = await this._getSessionFromURL(params, callbackUrlType)\n        if (error) {\n          this._debug('#_initialize()', 'error detecting session from URL', error)\n\n          if (isAuthImplicitGrantRedirectError(error)) {\n            const errorCode = error.details?.code\n            if (\n              errorCode === 'identity_already_exists' ||\n              errorCode === 'identity_not_found' ||\n              errorCode === 'single_identity_not_deletable'\n            ) {\n              return { error }\n            }\n          }\n\n          // Don't remove existing session on URL login failure.\n          // A failed attempt (e.g. reused magic link) shouldn't invalidate a valid session.\n\n          return { error }\n        }\n\n        const { session, redirectType } = data\n\n        this._debug(\n          '#_initialize()',\n          'detected session in URL',\n          session,\n          'redirect type',\n          redirectType\n        )\n\n        await this._saveSession(session)\n\n        setTimeout(async () => {\n          if (redirectType === 'recovery') {\n            await this._notifyAllSubscribers('PASSWORD_RECOVERY', session)\n          } else {\n            await this._notifyAllSubscribers('SIGNED_IN', session)\n          }\n        }, 0)\n\n        return { error: null }\n      }\n      // no login attempt via callback url try to recover session from storage\n      await this._recoverAndRefresh()\n      return { error: null }\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ error })\n      }\n\n      return this._returnResult({\n        error: new AuthUnknownError('Unexpected error during initialization', error),\n      })\n    } finally {\n      await this._handleVisibilityChange()\n      this._debug('#_initialize()', 'end')\n    }\n  }\n\n  /**\n   * Creates a new anonymous user.\n   *\n   * @returns A session where the is_anonymous claim in the access token JWT set to true\n   */\n  async signInAnonymously(credentials?: SignInAnonymouslyCredentials): Promise<AuthResponse> {\n    try {\n      const res = await _request(this.fetch, 'POST', `${this.url}/signup`, {\n        headers: this.headers,\n        body: {\n          data: credentials?.options?.data ?? {},\n          gotrue_meta_security: { captcha_token: credentials?.options?.captchaToken },\n        },\n        xform: _sessionResponse,\n      })\n      const { data, error } = res\n\n      if (error || !data) {\n        return this._returnResult({ data: { user: null, session: null }, error: error })\n      }\n      const session: Session | null = data.session\n      const user: User | null = data.user\n\n      if (data.session) {\n        await this._saveSession(data.session)\n        await this._notifyAllSubscribers('SIGNED_IN', session)\n      }\n\n      return this._returnResult({ data: { user, session }, error: null })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { user: null, session: null }, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Creates a new user.\n   *\n   * Be aware that if a user account exists in the system you may get back an\n   * error message that attempts to hide this information from the user.\n   * This method has support for PKCE via email signups. The PKCE flow cannot be used when autoconfirm is enabled.\n   *\n   * @returns A logged-in session if the server has \"autoconfirm\" ON\n   * @returns A user if the server has \"autoconfirm\" OFF\n   */\n  async signUp(credentials: SignUpWithPasswordCredentials): Promise<AuthResponse> {\n    try {\n      let res: AuthResponse\n      if ('email' in credentials) {\n        const { email, password, options } = credentials\n        let codeChallenge: string | null = null\n        let codeChallengeMethod: string | null = null\n        if (this.flowType === 'pkce') {\n          ;[codeChallenge, codeChallengeMethod] = await getCodeChallengeAndMethod(\n            this.storage,\n            this.storageKey\n          )\n        }\n        res = await _request(this.fetch, 'POST', `${this.url}/signup`, {\n          headers: this.headers,\n          redirectTo: options?.emailRedirectTo,\n          body: {\n            email,\n            password,\n            data: options?.data ?? {},\n            gotrue_meta_security: { captcha_token: options?.captchaToken },\n            code_challenge: codeChallenge,\n            code_challenge_method: codeChallengeMethod,\n          },\n          xform: _sessionResponse,\n        })\n      } else if ('phone' in credentials) {\n        const { phone, password, options } = credentials\n        res = await _request(this.fetch, 'POST', `${this.url}/signup`, {\n          headers: this.headers,\n          body: {\n            phone,\n            password,\n            data: options?.data ?? {},\n            channel: options?.channel ?? 'sms',\n            gotrue_meta_security: { captcha_token: options?.captchaToken },\n          },\n          xform: _sessionResponse,\n        })\n      } else {\n        throw new AuthInvalidCredentialsError(\n          'You must provide either an email or phone number and a password'\n        )\n      }\n\n      const { data, error } = res\n\n      if (error || !data) {\n        await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`)\n        return this._returnResult({ data: { user: null, session: null }, error: error })\n      }\n\n      const session: Session | null = data.session\n      const user: User | null = data.user\n\n      if (data.session) {\n        await this._saveSession(data.session)\n        await this._notifyAllSubscribers('SIGNED_IN', session)\n      }\n\n      return this._returnResult({ data: { user, session }, error: null })\n    } catch (error) {\n      await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`)\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { user: null, session: null }, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Log in an existing user with an email and password or phone and password.\n   *\n   * Be aware that you may get back an error message that will not distinguish\n   * between the cases where the account does not exist or that the\n   * email/phone and password combination is wrong or that the account can only\n   * be accessed via social login.\n   */\n  async signInWithPassword(\n    credentials: SignInWithPasswordCredentials\n  ): Promise<AuthTokenResponsePassword> {\n    try {\n      let res: AuthResponsePassword\n      if ('email' in credentials) {\n        const { email, password, options } = credentials\n        res = await _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n          headers: this.headers,\n          body: {\n            email,\n            password,\n            gotrue_meta_security: { captcha_token: options?.captchaToken },\n          },\n          xform: _sessionResponsePassword,\n        })\n      } else if ('phone' in credentials) {\n        const { phone, password, options } = credentials\n        res = await _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n          headers: this.headers,\n          body: {\n            phone,\n            password,\n            gotrue_meta_security: { captcha_token: options?.captchaToken },\n          },\n          xform: _sessionResponsePassword,\n        })\n      } else {\n        throw new AuthInvalidCredentialsError(\n          'You must provide either an email or phone number and a password'\n        )\n      }\n      const { data, error } = res\n\n      if (error) {\n        return this._returnResult({ data: { user: null, session: null }, error })\n      } else if (!data || !data.session || !data.user) {\n        const invalidTokenError = new AuthInvalidTokenResponseError()\n        return this._returnResult({ data: { user: null, session: null }, error: invalidTokenError })\n      }\n      if (data.session) {\n        await this._saveSession(data.session)\n        await this._notifyAllSubscribers('SIGNED_IN', data.session)\n      }\n      return this._returnResult({\n        data: {\n          user: data.user,\n          session: data.session,\n          ...(data.weak_password ? { weakPassword: data.weak_password } : null),\n        },\n        error,\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { user: null, session: null }, error })\n      }\n      throw error\n    }\n  }\n\n  /**\n   * Log in an existing user via a third-party provider.\n   * This method supports the PKCE flow.\n   */\n  async signInWithOAuth(credentials: SignInWithOAuthCredentials): Promise<OAuthResponse> {\n    return await this._handleProviderSignIn(credentials.provider, {\n      redirectTo: credentials.options?.redirectTo,\n      scopes: credentials.options?.scopes,\n      queryParams: credentials.options?.queryParams,\n      skipBrowserRedirect: credentials.options?.skipBrowserRedirect,\n    })\n  }\n\n  /**\n   * Log in an existing user by exchanging an Auth Code issued during the PKCE flow.\n   */\n  async exchangeCodeForSession(authCode: string): Promise<AuthTokenResponse> {\n    await this.initializePromise\n\n    return this._acquireLock(this.lockAcquireTimeout, async () => {\n      return this._exchangeCodeForSession(authCode)\n    })\n  }\n\n  /**\n   * Signs in a user by verifying a message signed by the user's private key.\n   * Supports Ethereum (via Sign-In-With-Ethereum) & Solana (Sign-In-With-Solana) standards,\n   * both of which derive from the EIP-4361 standard\n   * With slight variation on Solana's side.\n   * @reference https://eips.ethereum.org/EIPS/eip-4361\n   */\n  async signInWithWeb3(credentials: Web3Credentials): Promise<\n    | {\n        data: { session: Session; user: User }\n        error: null\n      }\n    | { data: { session: null; user: null }; error: AuthError }\n  > {\n    const { chain } = credentials\n\n    switch (chain) {\n      case 'ethereum':\n        return await this.signInWithEthereum(credentials)\n      case 'solana':\n        return await this.signInWithSolana(credentials)\n      default:\n        throw new Error(`@supabase/auth-js: Unsupported chain \"${chain}\"`)\n    }\n  }\n\n  private async signInWithEthereum(\n    credentials: EthereumWeb3Credentials\n  ): Promise<\n    | { data: { session: Session; user: User }; error: null }\n    | { data: { session: null; user: null }; error: AuthError }\n  > {\n    // TODO: flatten type\n    let message: string\n    let signature: Hex\n\n    if ('message' in credentials) {\n      message = credentials.message\n      signature = credentials.signature\n    } else {\n      const { chain, wallet, statement, options } = credentials\n\n      let resolvedWallet: EthereumWallet\n\n      if (!isBrowser()) {\n        if (typeof wallet !== 'object' || !options?.url) {\n          throw new Error(\n            '@supabase/auth-js: Both wallet and url must be specified in non-browser environments.'\n          )\n        }\n\n        resolvedWallet = wallet\n      } else if (typeof wallet === 'object') {\n        resolvedWallet = wallet\n      } else {\n        const windowAny = window as any\n\n        if (\n          'ethereum' in windowAny &&\n          typeof windowAny.ethereum === 'object' &&\n          'request' in windowAny.ethereum &&\n          typeof windowAny.ethereum.request === 'function'\n        ) {\n          resolvedWallet = windowAny.ethereum\n        } else {\n          throw new Error(\n            `@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.`\n          )\n        }\n      }\n\n      const url = new URL(options?.url ?? window.location.href)\n\n      const accounts = await resolvedWallet\n        .request({\n          method: 'eth_requestAccounts',\n        })\n        .then((accs) => accs as string[])\n        .catch(() => {\n          throw new Error(\n            `@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid`\n          )\n        })\n\n      if (!accounts || accounts.length === 0) {\n        throw new Error(\n          `@supabase/auth-js: No accounts available. Please ensure the wallet is connected.`\n        )\n      }\n\n      const address = getAddress(accounts[0])\n\n      let chainId = options?.signInWithEthereum?.chainId\n      if (!chainId) {\n        const chainIdHex = await resolvedWallet.request({\n          method: 'eth_chainId',\n        })\n        chainId = fromHex(chainIdHex as Hex)\n      }\n\n      const siweMessage: SiweMessage = {\n        domain: url.host,\n        address: address,\n        statement: statement,\n        uri: url.href,\n        version: '1',\n        chainId: chainId,\n        nonce: options?.signInWithEthereum?.nonce,\n        issuedAt: options?.signInWithEthereum?.issuedAt ?? new Date(),\n        expirationTime: options?.signInWithEthereum?.expirationTime,\n        notBefore: options?.signInWithEthereum?.notBefore,\n        requestId: options?.signInWithEthereum?.requestId,\n        resources: options?.signInWithEthereum?.resources,\n      }\n\n      message = createSiweMessage(siweMessage)\n\n      // Sign message\n      signature = (await resolvedWallet.request({\n        method: 'personal_sign',\n        params: [toHex(message), address],\n      })) as Hex\n    }\n\n    try {\n      const { data, error } = await _request(\n        this.fetch,\n        'POST',\n        `${this.url}/token?grant_type=web3`,\n        {\n          headers: this.headers,\n          body: {\n            chain: 'ethereum',\n            message,\n            signature,\n            ...(credentials.options?.captchaToken\n              ? { gotrue_meta_security: { captcha_token: credentials.options?.captchaToken } }\n              : null),\n          },\n          xform: _sessionResponse,\n        }\n      )\n      if (error) {\n        throw error\n      }\n      if (!data || !data.session || !data.user) {\n        const invalidTokenError = new AuthInvalidTokenResponseError()\n        return this._returnResult({ data: { user: null, session: null }, error: invalidTokenError })\n      }\n      if (data.session) {\n        await this._saveSession(data.session)\n        await this._notifyAllSubscribers('SIGNED_IN', data.session)\n      }\n      return this._returnResult({ data: { ...data }, error })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { user: null, session: null }, error })\n      }\n\n      throw error\n    }\n  }\n\n  private async signInWithSolana(credentials: SolanaWeb3Credentials) {\n    let message: string\n    let signature: Uint8Array\n\n    if ('message' in credentials) {\n      message = credentials.message\n      signature = credentials.signature\n    } else {\n      const { chain, wallet, statement, options } = credentials\n\n      let resolvedWallet: SolanaWallet\n\n      if (!isBrowser()) {\n        if (typeof wallet !== 'object' || !options?.url) {\n          throw new Error(\n            '@supabase/auth-js: Both wallet and url must be specified in non-browser environments.'\n          )\n        }\n\n        resolvedWallet = wallet\n      } else if (typeof wallet === 'object') {\n        resolvedWallet = wallet\n      } else {\n        const windowAny = window as any\n\n        if (\n          'solana' in windowAny &&\n          typeof windowAny.solana === 'object' &&\n          (('signIn' in windowAny.solana && typeof windowAny.solana.signIn === 'function') ||\n            ('signMessage' in windowAny.solana &&\n              typeof windowAny.solana.signMessage === 'function'))\n        ) {\n          resolvedWallet = windowAny.solana\n        } else {\n          throw new Error(\n            `@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.`\n          )\n        }\n      }\n\n      const url = new URL(options?.url ?? window.location.href)\n\n      if ('signIn' in resolvedWallet && resolvedWallet.signIn) {\n        const output = await resolvedWallet.signIn({\n          issuedAt: new Date().toISOString(),\n\n          ...options?.signInWithSolana,\n\n          // non-overridable properties\n          version: '1',\n          domain: url.host,\n          uri: url.href,\n\n          ...(statement ? { statement } : null),\n        })\n\n        let outputToProcess: any\n\n        if (Array.isArray(output) && output[0] && typeof output[0] === 'object') {\n          outputToProcess = output[0]\n        } else if (\n          output &&\n          typeof output === 'object' &&\n          'signedMessage' in output &&\n          'signature' in output\n        ) {\n          outputToProcess = output\n        } else {\n          throw new Error('@supabase/auth-js: Wallet method signIn() returned unrecognized value')\n        }\n\n        if (\n          'signedMessage' in outputToProcess &&\n          'signature' in outputToProcess &&\n          (typeof outputToProcess.signedMessage === 'string' ||\n            outputToProcess.signedMessage instanceof Uint8Array) &&\n          outputToProcess.signature instanceof Uint8Array\n        ) {\n          message =\n            typeof outputToProcess.signedMessage === 'string'\n              ? outputToProcess.signedMessage\n              : new TextDecoder().decode(outputToProcess.signedMessage)\n          signature = outputToProcess.signature\n        } else {\n          throw new Error(\n            '@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields'\n          )\n        }\n      } else {\n        if (\n          !('signMessage' in resolvedWallet) ||\n          typeof resolvedWallet.signMessage !== 'function' ||\n          !('publicKey' in resolvedWallet) ||\n          typeof resolvedWallet !== 'object' ||\n          !resolvedWallet.publicKey ||\n          !('toBase58' in resolvedWallet.publicKey) ||\n          typeof resolvedWallet.publicKey.toBase58 !== 'function'\n        ) {\n          throw new Error(\n            '@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API'\n          )\n        }\n\n        message = [\n          `${url.host} wants you to sign in with your Solana account:`,\n          resolvedWallet.publicKey.toBase58(),\n          ...(statement ? ['', statement, ''] : ['']),\n          'Version: 1',\n          `URI: ${url.href}`,\n          `Issued At: ${options?.signInWithSolana?.issuedAt ?? new Date().toISOString()}`,\n          ...(options?.signInWithSolana?.notBefore\n            ? [`Not Before: ${options.signInWithSolana.notBefore}`]\n            : []),\n          ...(options?.signInWithSolana?.expirationTime\n            ? [`Expiration Time: ${options.signInWithSolana.expirationTime}`]\n            : []),\n          ...(options?.signInWithSolana?.chainId\n            ? [`Chain ID: ${options.signInWithSolana.chainId}`]\n            : []),\n          ...(options?.signInWithSolana?.nonce ? [`Nonce: ${options.signInWithSolana.nonce}`] : []),\n          ...(options?.signInWithSolana?.requestId\n            ? [`Request ID: ${options.signInWithSolana.requestId}`]\n            : []),\n          ...(options?.signInWithSolana?.resources?.length\n            ? [\n                'Resources',\n                ...options.signInWithSolana.resources.map((resource) => `- ${resource}`),\n              ]\n            : []),\n        ].join('\\n')\n\n        const maybeSignature = await resolvedWallet.signMessage(\n          new TextEncoder().encode(message),\n          'utf8'\n        )\n\n        if (!maybeSignature || !(maybeSignature instanceof Uint8Array)) {\n          throw new Error(\n            '@supabase/auth-js: Wallet signMessage() API returned an recognized value'\n          )\n        }\n\n        signature = maybeSignature\n      }\n    }\n\n    try {\n      const { data, error } = await _request(\n        this.fetch,\n        'POST',\n        `${this.url}/token?grant_type=web3`,\n        {\n          headers: this.headers,\n          body: {\n            chain: 'solana',\n            message,\n            signature: bytesToBase64URL(signature),\n\n            ...(credentials.options?.captchaToken\n              ? { gotrue_meta_security: { captcha_token: credentials.options?.captchaToken } }\n              : null),\n          },\n          xform: _sessionResponse,\n        }\n      )\n      if (error) {\n        throw error\n      }\n      if (!data || !data.session || !data.user) {\n        const invalidTokenError = new AuthInvalidTokenResponseError()\n        return this._returnResult({ data: { user: null, session: null }, error: invalidTokenError })\n      }\n      if (data.session) {\n        await this._saveSession(data.session)\n        await this._notifyAllSubscribers('SIGNED_IN', data.session)\n      }\n      return this._returnResult({ data: { ...data }, error })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { user: null, session: null }, error })\n      }\n\n      throw error\n    }\n  }\n\n  private async _exchangeCodeForSession(authCode: string): Promise<\n    | {\n        data: { session: Session; user: User; redirectType: string | null }\n        error: null\n      }\n    | { data: { session: null; user: null; redirectType: null }; error: AuthError }\n  > {\n    const storageItem = await getItemAsync(this.storage, `${this.storageKey}-code-verifier`)\n    const [codeVerifier, redirectType] = ((storageItem ?? '') as string).split('/')\n\n    try {\n      if (!codeVerifier && this.flowType === 'pkce') {\n        throw new AuthPKCECodeVerifierMissingError()\n      }\n\n      const { data, error } = await _request(\n        this.fetch,\n        'POST',\n        `${this.url}/token?grant_type=pkce`,\n        {\n          headers: this.headers,\n          body: {\n            auth_code: authCode,\n            code_verifier: codeVerifier,\n          },\n          xform: _sessionResponse,\n        }\n      )\n      await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`)\n      if (error) {\n        throw error\n      }\n      if (!data || !data.session || !data.user) {\n        const invalidTokenError = new AuthInvalidTokenResponseError()\n        return this._returnResult({\n          data: { user: null, session: null, redirectType: null },\n          error: invalidTokenError,\n        })\n      }\n      if (data.session) {\n        await this._saveSession(data.session)\n        await this._notifyAllSubscribers('SIGNED_IN', data.session)\n      }\n      return this._returnResult({ data: { ...data, redirectType: redirectType ?? null }, error })\n    } catch (error) {\n      await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`)\n      if (isAuthError(error)) {\n        return this._returnResult({\n          data: { user: null, session: null, redirectType: null },\n          error,\n        })\n      }\n      throw error\n    }\n  }\n\n  /**\n   * Allows signing in with an OIDC ID token. The authentication provider used\n   * should be enabled and configured.\n   */\n  async signInWithIdToken(credentials: SignInWithIdTokenCredentials): Promise<AuthTokenResponse> {\n    try {\n      const { options, provider, token, access_token, nonce } = credentials\n\n      const res = await _request(this.fetch, 'POST', `${this.url}/token?grant_type=id_token`, {\n        headers: this.headers,\n        body: {\n          provider,\n          id_token: token,\n          access_token,\n          nonce,\n          gotrue_meta_security: { captcha_token: options?.captchaToken },\n        },\n        xform: _sessionResponse,\n      })\n\n      const { data, error } = res\n      if (error) {\n        return this._returnResult({ data: { user: null, session: null }, error })\n      } else if (!data || !data.session || !data.user) {\n        const invalidTokenError = new AuthInvalidTokenResponseError()\n        return this._returnResult({ data: { user: null, session: null }, error: invalidTokenError })\n      }\n      if (data.session) {\n        await this._saveSession(data.session)\n        await this._notifyAllSubscribers('SIGNED_IN', data.session)\n      }\n      return this._returnResult({ data, error })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { user: null, session: null }, error })\n      }\n      throw error\n    }\n  }\n\n  /**\n   * Log in a user using magiclink or a one-time password (OTP).\n   *\n   * If the `{{ .ConfirmationURL }}` variable is specified in the email template, a magiclink will be sent.\n   * If the `{{ .Token }}` variable is specified in the email template, an OTP will be sent.\n   * If you're using phone sign-ins, only an OTP will be sent. You won't be able to send a magiclink for phone sign-ins.\n   *\n   * Be aware that you may get back an error message that will not distinguish\n   * between the cases where the account does not exist or, that the account\n   * can only be accessed via social login.\n   *\n   * Do note that you will need to configure a Whatsapp sender on Twilio\n   * if you are using phone sign in with the 'whatsapp' channel. The whatsapp\n   * channel is not supported on other providers\n   * at this time.\n   * This method supports PKCE when an email is passed.\n   */\n  async signInWithOtp(credentials: SignInWithPasswordlessCredentials): Promise<AuthOtpResponse> {\n    try {\n      if ('email' in credentials) {\n        const { email, options } = credentials\n        let codeChallenge: string | null = null\n        let codeChallengeMethod: string | null = null\n        if (this.flowType === 'pkce') {\n          ;[codeChallenge, codeChallengeMethod] = await getCodeChallengeAndMethod(\n            this.storage,\n            this.storageKey\n          )\n        }\n        const { error } = await _request(this.fetch, 'POST', `${this.url}/otp`, {\n          headers: this.headers,\n          body: {\n            email,\n            data: options?.data ?? {},\n            create_user: options?.shouldCreateUser ?? true,\n            gotrue_meta_security: { captcha_token: options?.captchaToken },\n            code_challenge: codeChallenge,\n            code_challenge_method: codeChallengeMethod,\n          },\n          redirectTo: options?.emailRedirectTo,\n        })\n        return this._returnResult({ data: { user: null, session: null }, error })\n      }\n      if ('phone' in credentials) {\n        const { phone, options } = credentials\n        const { data, error } = await _request(this.fetch, 'POST', `${this.url}/otp`, {\n          headers: this.headers,\n          body: {\n            phone,\n            data: options?.data ?? {},\n            create_user: options?.shouldCreateUser ?? true,\n            gotrue_meta_security: { captcha_token: options?.captchaToken },\n            channel: options?.channel ?? 'sms',\n          },\n        })\n        return this._returnResult({\n          data: { user: null, session: null, messageId: data?.message_id },\n          error,\n        })\n      }\n      throw new AuthInvalidCredentialsError('You must provide either an email or phone number.')\n    } catch (error) {\n      await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`)\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { user: null, session: null }, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Log in a user given a User supplied OTP or TokenHash received through mobile or email.\n   */\n  async verifyOtp(params: VerifyOtpParams): Promise<AuthResponse> {\n    try {\n      let redirectTo: string | undefined = undefined\n      let captchaToken: string | undefined = undefined\n      if ('options' in params) {\n        redirectTo = params.options?.redirectTo\n        captchaToken = params.options?.captchaToken\n      }\n      const { data, error } = await _request(this.fetch, 'POST', `${this.url}/verify`, {\n        headers: this.headers,\n        body: {\n          ...params,\n          gotrue_meta_security: { captcha_token: captchaToken },\n        },\n        redirectTo,\n        xform: _sessionResponse,\n      })\n\n      if (error) {\n        throw error\n      }\n      if (!data) {\n        const tokenVerificationError = new Error('An error occurred on token verification.')\n        throw tokenVerificationError\n      }\n\n      const session: Session | null = data.session\n      const user: User = data.user\n\n      if (session?.access_token) {\n        await this._saveSession(session as Session)\n        await this._notifyAllSubscribers(\n          params.type == 'recovery' ? 'PASSWORD_RECOVERY' : 'SIGNED_IN',\n          session\n        )\n      }\n\n      return this._returnResult({ data: { user, session }, error: null })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { user: null, session: null }, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Attempts a single-sign on using an enterprise Identity Provider. A\n   * successful SSO attempt will redirect the current page to the identity\n   * provider authorization page. The redirect URL is implementation and SSO\n   * protocol specific.\n   *\n   * You can use it by providing a SSO domain. Typically you can extract this\n   * domain by asking users for their email address. If this domain is\n   * registered on the Auth instance the redirect will use that organization's\n   * currently active SSO Identity Provider for the login.\n   *\n   * If you have built an organization-specific login page, you can use the\n   * organization's SSO Identity Provider UUID directly instead.\n   */\n  async signInWithSSO(params: SignInWithSSO): Promise<SSOResponse> {\n    try {\n      let codeChallenge: string | null = null\n      let codeChallengeMethod: string | null = null\n      if (this.flowType === 'pkce') {\n        ;[codeChallenge, codeChallengeMethod] = await getCodeChallengeAndMethod(\n          this.storage,\n          this.storageKey\n        )\n      }\n\n      const result = await _request(this.fetch, 'POST', `${this.url}/sso`, {\n        body: {\n          ...('providerId' in params ? { provider_id: params.providerId } : null),\n          ...('domain' in params ? { domain: params.domain } : null),\n          redirect_to: params.options?.redirectTo ?? undefined,\n          ...(params?.options?.captchaToken\n            ? { gotrue_meta_security: { captcha_token: params.options.captchaToken } }\n            : null),\n          skip_http_redirect: true, // fetch does not handle redirects\n          code_challenge: codeChallenge,\n          code_challenge_method: codeChallengeMethod,\n        },\n        headers: this.headers,\n        xform: _ssoResponse,\n      })\n\n      // Automatically redirect in browser unless skipBrowserRedirect is true\n      if (result.data?.url && isBrowser() && !params.options?.skipBrowserRedirect) {\n        window.location.assign(result.data.url)\n      }\n\n      return this._returnResult(result)\n    } catch (error) {\n      await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`)\n      if (isAuthError(error)) {\n        return this._returnResult({ data: null, error })\n      }\n      throw error\n    }\n  }\n\n  /**\n   * Sends a reauthentication OTP to the user's email or phone number.\n   * Requires the user to be signed-in.\n   */\n  async reauthenticate(): Promise<AuthResponse> {\n    await this.initializePromise\n\n    return await this._acquireLock(this.lockAcquireTimeout, async () => {\n      return await this._reauthenticate()\n    })\n  }\n\n  private async _reauthenticate(): Promise<AuthResponse> {\n    try {\n      return await this._useSession(async (result) => {\n        const {\n          data: { session },\n          error: sessionError,\n        } = result\n        if (sessionError) throw sessionError\n        if (!session) throw new AuthSessionMissingError()\n\n        const { error } = await _request(this.fetch, 'GET', `${this.url}/reauthenticate`, {\n          headers: this.headers,\n          jwt: session.access_token,\n        })\n        return this._returnResult({ data: { user: null, session: null }, error })\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { user: null, session: null }, error })\n      }\n      throw error\n    }\n  }\n\n  /**\n   * Resends an existing signup confirmation email, email change email, SMS OTP or phone change OTP.\n   */\n  async resend(credentials: ResendParams): Promise<AuthOtpResponse> {\n    try {\n      const endpoint = `${this.url}/resend`\n      if ('email' in credentials) {\n        const { email, type, options } = credentials\n        const { error } = await _request(this.fetch, 'POST', endpoint, {\n          headers: this.headers,\n          body: {\n            email,\n            type,\n            gotrue_meta_security: { captcha_token: options?.captchaToken },\n          },\n          redirectTo: options?.emailRedirectTo,\n        })\n        return this._returnResult({ data: { user: null, session: null }, error })\n      } else if ('phone' in credentials) {\n        const { phone, type, options } = credentials\n        const { data, error } = await _request(this.fetch, 'POST', endpoint, {\n          headers: this.headers,\n          body: {\n            phone,\n            type,\n            gotrue_meta_security: { captcha_token: options?.captchaToken },\n          },\n        })\n        return this._returnResult({\n          data: { user: null, session: null, messageId: data?.message_id },\n          error,\n        })\n      }\n      throw new AuthInvalidCredentialsError(\n        'You must provide either an email or phone number and a type'\n      )\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { user: null, session: null }, error })\n      }\n      throw error\n    }\n  }\n\n  /**\n   * Returns the session, refreshing it if necessary.\n   *\n   * The session returned can be null if the session is not detected which can happen in the event a user is not signed-in or has logged out.\n   *\n   * **IMPORTANT:** This method loads values directly from the storage attached\n   * to the client. If that storage is based on request cookies for example,\n   * the values in it may not be authentic and therefore it's strongly advised\n   * against using this method and its results in such circumstances. A warning\n   * will be emitted if this is detected. Use {@link #getUser()} instead.\n   */\n  async getSession() {\n    await this.initializePromise\n\n    const result = await this._acquireLock(this.lockAcquireTimeout, async () => {\n      return this._useSession(async (result) => {\n        return result\n      })\n    })\n\n    return result\n  }\n\n  /**\n   * Acquires a global lock based on the storage key.\n   */\n  private async _acquireLock<R>(acquireTimeout: number, fn: () => Promise<R>): Promise<R> {\n    this._debug('#_acquireLock', 'begin', acquireTimeout)\n\n    try {\n      if (this.lockAcquired) {\n        const last = this.pendingInLock.length\n          ? this.pendingInLock[this.pendingInLock.length - 1]\n          : Promise.resolve()\n\n        const result = (async () => {\n          await last\n          return await fn()\n        })()\n\n        this.pendingInLock.push(\n          (async () => {\n            try {\n              await result\n            } catch (e: any) {\n              // we just care if it finished\n            }\n          })()\n        )\n\n        return result\n      }\n\n      return await this.lock(`lock:${this.storageKey}`, acquireTimeout, async () => {\n        this._debug('#_acquireLock', 'lock acquired for storage key', this.storageKey)\n\n        try {\n          this.lockAcquired = true\n\n          const result = fn()\n\n          this.pendingInLock.push(\n            (async () => {\n              try {\n                await result\n              } catch (e: any) {\n                // we just care if it finished\n              }\n            })()\n          )\n\n          await result\n\n          // keep draining the queue until there's nothing to wait on\n          while (this.pendingInLock.length) {\n            const waitOn = [...this.pendingInLock]\n\n            await Promise.all(waitOn)\n\n            this.pendingInLock.splice(0, waitOn.length)\n          }\n\n          return await result\n        } finally {\n          this._debug('#_acquireLock', 'lock released for storage key', this.storageKey)\n\n          this.lockAcquired = false\n        }\n      })\n    } finally {\n      this._debug('#_acquireLock', 'end')\n    }\n  }\n\n  /**\n   * Use instead of {@link #getSession} inside the library. It is\n   * semantically usually what you want, as getting a session involves some\n   * processing afterwards that requires only one client operating on the\n   * session at once across multiple tabs or processes.\n   */\n  private async _useSession<R>(\n    fn: (\n      result:\n        | {\n            data: {\n              session: Session\n            }\n            error: null\n          }\n        | {\n            data: {\n              session: null\n            }\n            error: AuthError\n          }\n        | {\n            data: {\n              session: null\n            }\n            error: null\n          }\n    ) => Promise<R>\n  ): Promise<R> {\n    this._debug('#_useSession', 'begin')\n\n    try {\n      // the use of __loadSession here is the only correct use of the function!\n      const result = await this.__loadSession()\n\n      return await fn(result)\n    } finally {\n      this._debug('#_useSession', 'end')\n    }\n  }\n\n  /**\n   * NEVER USE DIRECTLY!\n   *\n   * Always use {@link #_useSession}.\n   */\n  private async __loadSession(): Promise<\n    | {\n        data: {\n          session: Session\n        }\n        error: null\n      }\n    | {\n        data: {\n          session: null\n        }\n        error: AuthError\n      }\n    | {\n        data: {\n          session: null\n        }\n        error: null\n      }\n  > {\n    this._debug('#__loadSession()', 'begin')\n\n    if (!this.lockAcquired) {\n      this._debug('#__loadSession()', 'used outside of an acquired lock!', new Error().stack)\n    }\n\n    try {\n      let currentSession: Session | null = null\n\n      const maybeSession = await getItemAsync(this.storage, this.storageKey)\n\n      this._debug('#getSession()', 'session from storage', maybeSession)\n\n      if (maybeSession !== null) {\n        if (this._isValidSession(maybeSession)) {\n          currentSession = maybeSession\n        } else {\n          this._debug('#getSession()', 'session from storage is not valid')\n          await this._removeSession()\n        }\n      }\n\n      if (!currentSession) {\n        return { data: { session: null }, error: null }\n      }\n\n      // A session is considered expired before the access token _actually_\n      // expires. When the autoRefreshToken option is off (or when the tab is\n      // in the background), very eager users of getSession() -- like\n      // realtime-js -- might send a valid JWT which will expire by the time it\n      // reaches the server.\n      const hasExpired = currentSession.expires_at\n        ? currentSession.expires_at * 1000 - Date.now() < EXPIRY_MARGIN_MS\n        : false\n\n      this._debug(\n        '#__loadSession()',\n        `session has${hasExpired ? '' : ' not'} expired`,\n        'expires_at',\n        currentSession.expires_at\n      )\n\n      if (!hasExpired) {\n        if (this.userStorage) {\n          const maybeUser: { user?: User | null } | null = (await getItemAsync(\n            this.userStorage,\n            this.storageKey + '-user'\n          )) as any\n\n          if (maybeUser?.user) {\n            currentSession.user = maybeUser.user\n          } else {\n            currentSession.user = userNotAvailableProxy()\n          }\n        }\n\n        // Wrap the user object with a warning proxy on the server\n        // This warns when properties of the user are accessed, not when session.user itself is accessed\n        if (\n          this.storage.isServer &&\n          currentSession.user &&\n          !(currentSession.user as any).__isUserNotAvailableProxy\n        ) {\n          const suppressWarningRef = { value: this.suppressGetSessionWarning }\n          currentSession.user = insecureUserWarningProxy(currentSession.user, suppressWarningRef)\n\n          // Update the client-level suppression flag when the proxy suppresses the warning\n          if (suppressWarningRef.value) {\n            this.suppressGetSessionWarning = true\n          }\n        }\n\n        return { data: { session: currentSession }, error: null }\n      }\n\n      const { data: session, error } = await this._callRefreshToken(currentSession.refresh_token)\n      if (error) {\n        return this._returnResult({ data: { session: null }, error })\n      }\n\n      return this._returnResult({ data: { session }, error: null })\n    } finally {\n      this._debug('#__loadSession()', 'end')\n    }\n  }\n\n  /**\n   * Gets the current user details if there is an existing session. This method\n   * performs a network request to the Supabase Auth server, so the returned\n   * value is authentic and can be used to base authorization rules on.\n   *\n   * @param jwt Takes in an optional access token JWT. If no JWT is provided, the JWT from the current session is used.\n   */\n  async getUser(jwt?: string): Promise<UserResponse> {\n    if (jwt) {\n      return await this._getUser(jwt)\n    }\n\n    await this.initializePromise\n\n    const result = await this._acquireLock(this.lockAcquireTimeout, async () => {\n      return await this._getUser()\n    })\n\n    if (result.data.user) {\n      this.suppressGetSessionWarning = true\n    }\n\n    return result\n  }\n\n  private async _getUser(jwt?: string): Promise<UserResponse> {\n    try {\n      if (jwt) {\n        return await _request(this.fetch, 'GET', `${this.url}/user`, {\n          headers: this.headers,\n          jwt: jwt,\n          xform: _userResponse,\n        })\n      }\n\n      return await this._useSession(async (result) => {\n        const { data, error } = result\n        if (error) {\n          throw error\n        }\n\n        // returns an error if there is no access_token or custom authorization header\n        if (!data.session?.access_token && !this.hasCustomAuthorizationHeader) {\n          return { data: { user: null }, error: new AuthSessionMissingError() }\n        }\n\n        return await _request(this.fetch, 'GET', `${this.url}/user`, {\n          headers: this.headers,\n          jwt: data.session?.access_token ?? undefined,\n          xform: _userResponse,\n        })\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        if (isAuthSessionMissingError(error)) {\n          // JWT contains a `session_id` which does not correspond to an active\n          // session in the database, indicating the user is signed out.\n\n          await this._removeSession()\n          await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`)\n        }\n\n        return this._returnResult({ data: { user: null }, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Updates user data for a logged in user.\n   */\n  async updateUser(\n    attributes: UserAttributes,\n    options: {\n      emailRedirectTo?: string | undefined\n    } = {}\n  ): Promise<UserResponse> {\n    await this.initializePromise\n\n    return await this._acquireLock(this.lockAcquireTimeout, async () => {\n      return await this._updateUser(attributes, options)\n    })\n  }\n\n  protected async _updateUser(\n    attributes: UserAttributes,\n    options: {\n      emailRedirectTo?: string | undefined\n    } = {}\n  ): Promise<UserResponse> {\n    try {\n      return await this._useSession(async (result) => {\n        const { data: sessionData, error: sessionError } = result\n        if (sessionError) {\n          throw sessionError\n        }\n        if (!sessionData.session) {\n          throw new AuthSessionMissingError()\n        }\n        const session: Session = sessionData.session\n        let codeChallenge: string | null = null\n        let codeChallengeMethod: string | null = null\n        if (this.flowType === 'pkce' && attributes.email != null) {\n          ;[codeChallenge, codeChallengeMethod] = await getCodeChallengeAndMethod(\n            this.storage,\n            this.storageKey\n          )\n        }\n\n        const { data, error: userError } = await _request(this.fetch, 'PUT', `${this.url}/user`, {\n          headers: this.headers,\n          redirectTo: options?.emailRedirectTo,\n          body: {\n            ...attributes,\n            code_challenge: codeChallenge,\n            code_challenge_method: codeChallengeMethod,\n          },\n          jwt: session.access_token,\n          xform: _userResponse,\n        })\n        if (userError) {\n          throw userError\n        }\n        session.user = data.user as User\n        await this._saveSession(session)\n        await this._notifyAllSubscribers('USER_UPDATED', session)\n        return this._returnResult({ data: { user: session.user }, error: null })\n      })\n    } catch (error) {\n      await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`)\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { user: null }, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Sets the session data from the current session. If the current session is expired, setSession will take care of refreshing it to obtain a new session.\n   * If the refresh token or access token in the current session is invalid, an error will be thrown.\n   * @param currentSession The current session that minimally contains an access token and refresh token.\n   */\n  async setSession(currentSession: {\n    access_token: string\n    refresh_token: string\n  }): Promise<AuthResponse> {\n    await this.initializePromise\n\n    return await this._acquireLock(this.lockAcquireTimeout, async () => {\n      return await this._setSession(currentSession)\n    })\n  }\n\n  protected async _setSession(currentSession: {\n    access_token: string\n    refresh_token: string\n  }): Promise<AuthResponse> {\n    try {\n      if (!currentSession.access_token || !currentSession.refresh_token) {\n        throw new AuthSessionMissingError()\n      }\n\n      const timeNow = Date.now() / 1000\n      let expiresAt = timeNow\n      let hasExpired = true\n      let session: Session | null = null\n      const { payload } = decodeJWT(currentSession.access_token)\n      if (payload.exp) {\n        expiresAt = payload.exp\n        hasExpired = expiresAt <= timeNow\n      }\n\n      if (hasExpired) {\n        const { data: refreshedSession, error } = await this._callRefreshToken(\n          currentSession.refresh_token\n        )\n        if (error) {\n          return this._returnResult({ data: { user: null, session: null }, error: error })\n        }\n\n        if (!refreshedSession) {\n          return { data: { user: null, session: null }, error: null }\n        }\n        session = refreshedSession\n      } else {\n        const { data, error } = await this._getUser(currentSession.access_token)\n        if (error) {\n          return this._returnResult({ data: { user: null, session: null }, error })\n        }\n        session = {\n          access_token: currentSession.access_token,\n          refresh_token: currentSession.refresh_token,\n          user: data.user,\n          token_type: 'bearer',\n          expires_in: expiresAt - timeNow,\n          expires_at: expiresAt,\n        }\n        await this._saveSession(session)\n        await this._notifyAllSubscribers('SIGNED_IN', session)\n      }\n\n      return this._returnResult({ data: { user: session.user, session }, error: null })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { session: null, user: null }, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Returns a new session, regardless of expiry status.\n   * Takes in an optional current session. If not passed in, then refreshSession() will attempt to retrieve it from getSession().\n   * If the current session's refresh token is invalid, an error will be thrown.\n   * @param currentSession The current session. If passed in, it must contain a refresh token.\n   */\n  async refreshSession(currentSession?: { refresh_token: string }): Promise<AuthResponse> {\n    await this.initializePromise\n\n    return await this._acquireLock(this.lockAcquireTimeout, async () => {\n      return await this._refreshSession(currentSession)\n    })\n  }\n\n  protected async _refreshSession(currentSession?: {\n    refresh_token: string\n  }): Promise<AuthResponse> {\n    try {\n      return await this._useSession(async (result) => {\n        if (!currentSession) {\n          const { data, error } = result\n          if (error) {\n            throw error\n          }\n\n          currentSession = data.session ?? undefined\n        }\n\n        if (!currentSession?.refresh_token) {\n          throw new AuthSessionMissingError()\n        }\n\n        const { data: session, error } = await this._callRefreshToken(currentSession.refresh_token)\n        if (error) {\n          return this._returnResult({ data: { user: null, session: null }, error: error })\n        }\n\n        if (!session) {\n          return this._returnResult({ data: { user: null, session: null }, error: null })\n        }\n\n        return this._returnResult({ data: { user: session.user, session }, error: null })\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { user: null, session: null }, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Gets the session data from a URL string\n   */\n  private async _getSessionFromURL(\n    params: { [parameter: string]: string },\n    callbackUrlType: string\n  ): Promise<\n    | {\n        data: { session: Session; redirectType: string | null }\n        error: null\n      }\n    | { data: { session: null; redirectType: null }; error: AuthError }\n  > {\n    try {\n      if (!isBrowser()) throw new AuthImplicitGrantRedirectError('No browser detected.')\n\n      // If there's an error in the URL, it doesn't matter what flow it is, we just return the error.\n      if (params.error || params.error_description || params.error_code) {\n        // The error class returned implies that the redirect is from an implicit grant flow\n        // but it could also be from a redirect error from a PKCE flow.\n        throw new AuthImplicitGrantRedirectError(\n          params.error_description || 'Error in URL with unspecified error_description',\n          {\n            error: params.error || 'unspecified_error',\n            code: params.error_code || 'unspecified_code',\n          }\n        )\n      }\n\n      // Checks for mismatches between the flowType initialised in the client and the URL parameters\n      switch (callbackUrlType) {\n        case 'implicit':\n          if (this.flowType === 'pkce') {\n            throw new AuthPKCEGrantCodeExchangeError('Not a valid PKCE flow url.')\n          }\n          break\n        case 'pkce':\n          if (this.flowType === 'implicit') {\n            throw new AuthImplicitGrantRedirectError('Not a valid implicit grant flow url.')\n          }\n          break\n        default:\n        // there's no mismatch so we continue\n      }\n\n      // Since this is a redirect for PKCE, we attempt to retrieve the code from the URL for the code exchange\n      if (callbackUrlType === 'pkce') {\n        this._debug('#_initialize()', 'begin', 'is PKCE flow', true)\n        if (!params.code) throw new AuthPKCEGrantCodeExchangeError('No code detected.')\n        const { data, error } = await this._exchangeCodeForSession(params.code)\n        if (error) throw error\n\n        const url = new URL(window.location.href)\n        url.searchParams.delete('code')\n\n        window.history.replaceState(window.history.state, '', url.toString())\n\n        return { data: { session: data.session, redirectType: null }, error: null }\n      }\n\n      const {\n        provider_token,\n        provider_refresh_token,\n        access_token,\n        refresh_token,\n        expires_in,\n        expires_at,\n        token_type,\n      } = params\n\n      if (!access_token || !expires_in || !refresh_token || !token_type) {\n        throw new AuthImplicitGrantRedirectError('No session defined in URL')\n      }\n\n      const timeNow = Math.round(Date.now() / 1000)\n      const expiresIn = parseInt(expires_in)\n      let expiresAt = timeNow + expiresIn\n\n      if (expires_at) {\n        expiresAt = parseInt(expires_at)\n      }\n\n      const actuallyExpiresIn = expiresAt - timeNow\n      if (actuallyExpiresIn * 1000 <= AUTO_REFRESH_TICK_DURATION_MS) {\n        console.warn(\n          `@supabase/gotrue-js: Session as retrieved from URL expires in ${actuallyExpiresIn}s, should have been closer to ${expiresIn}s`\n        )\n      }\n\n      const issuedAt = expiresAt - expiresIn\n      if (timeNow - issuedAt >= 120) {\n        console.warn(\n          '@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale',\n          issuedAt,\n          expiresAt,\n          timeNow\n        )\n      } else if (timeNow - issuedAt < 0) {\n        console.warn(\n          '@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew',\n          issuedAt,\n          expiresAt,\n          timeNow\n        )\n      }\n\n      const { data, error } = await this._getUser(access_token)\n      if (error) throw error\n\n      const session: Session = {\n        provider_token,\n        provider_refresh_token,\n        access_token,\n        expires_in: expiresIn,\n        expires_at: expiresAt,\n        refresh_token,\n        token_type: token_type as 'bearer',\n        user: data.user,\n      }\n\n      // Remove tokens from URL\n      window.location.hash = ''\n      this._debug('#_getSessionFromURL()', 'clearing window.location.hash')\n\n      return this._returnResult({ data: { session, redirectType: params.type }, error: null })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { session: null, redirectType: null }, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Checks if the current URL contains parameters given by an implicit oauth grant flow (https://www.rfc-editor.org/rfc/rfc6749.html#section-4.2)\n   *\n   * If `detectSessionInUrl` is a function, it will be called with the URL and params to determine\n   * if the URL should be processed as a Supabase auth callback. This allows users to exclude\n   * URLs from other OAuth providers (e.g., Facebook Login) that also return access_token in the fragment.\n   */\n  private _isImplicitGrantCallback(params: { [parameter: string]: string }): boolean {\n    if (typeof this.detectSessionInUrl === 'function') {\n      return this.detectSessionInUrl(new URL(window.location.href), params)\n    }\n    return Boolean(params.access_token || params.error_description)\n  }\n\n  /**\n   * Checks if the current URL and backing storage contain parameters given by a PKCE flow\n   */\n  private async _isPKCECallback(params: { [parameter: string]: string }): Promise<boolean> {\n    const currentStorageContent = await getItemAsync(\n      this.storage,\n      `${this.storageKey}-code-verifier`\n    )\n\n    return !!(params.code && currentStorageContent)\n  }\n\n  /**\n   * Inside a browser context, `signOut()` will remove the logged in user from the browser session and log them out - removing all items from localstorage and then trigger a `\"SIGNED_OUT\"` event.\n   *\n   * For server-side management, you can revoke all refresh tokens for a user by passing a user's JWT through to `auth.api.signOut(JWT: string)`.\n   * There is no way to revoke a user's access token jwt until it expires. It is recommended to set a shorter expiry on the jwt for this reason.\n   *\n   * If using `others` scope, no `SIGNED_OUT` event is fired!\n   */\n  async signOut(options: SignOut = { scope: 'global' }): Promise<{ error: AuthError | null }> {\n    await this.initializePromise\n\n    return await this._acquireLock(this.lockAcquireTimeout, async () => {\n      return await this._signOut(options)\n    })\n  }\n\n  protected async _signOut(\n    { scope }: SignOut = { scope: 'global' }\n  ): Promise<{ error: AuthError | null }> {\n    return await this._useSession(async (result) => {\n      const { data, error: sessionError } = result\n      if (sessionError && !isAuthSessionMissingError(sessionError)) {\n        return this._returnResult({ error: sessionError })\n      }\n      const accessToken = data.session?.access_token\n      if (accessToken) {\n        const { error } = await this.admin.signOut(accessToken, scope)\n        if (error) {\n          // ignore 404s since user might not exist anymore\n          // ignore 401s since an invalid or expired JWT should sign out the current session\n          if (\n            !(\n              (isAuthApiError(error) &&\n                (error.status === 404 || error.status === 401 || error.status === 403)) ||\n              isAuthSessionMissingError(error)\n            )\n          ) {\n            return this._returnResult({ error })\n          }\n        }\n      }\n      if (scope !== 'others') {\n        await this._removeSession()\n        await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`)\n      }\n      return this._returnResult({ error: null })\n    })\n  }\n\n  /**\n   * Receive a notification every time an auth event happens.\n   * Safe to use without an async function as callback.\n   *\n   * @param callback A callback function to be invoked when an auth event happens.\n   */\n  onAuthStateChange(callback: (event: AuthChangeEvent, session: Session | null) => void): {\n    data: { subscription: Subscription }\n  }\n\n  /**\n   * Avoid using an async function inside `onAuthStateChange` as you might end\n   * up with a deadlock. The callback function runs inside an exclusive lock,\n   * so calling other Supabase Client APIs that also try to acquire the\n   * exclusive lock, might cause a deadlock. This behavior is observable across\n   * tabs. In the next major library version, this behavior will not be supported.\n   *\n   * Receive a notification every time an auth event happens.\n   *\n   * @param callback A callback function to be invoked when an auth event happens.\n   * @deprecated Due to the possibility of deadlocks with async functions as callbacks, use the version without an async function.\n   */\n  onAuthStateChange(callback: (event: AuthChangeEvent, session: Session | null) => Promise<void>): {\n    data: { subscription: Subscription }\n  }\n\n  onAuthStateChange(\n    callback: (event: AuthChangeEvent, session: Session | null) => void | Promise<void>\n  ): {\n    data: { subscription: Subscription }\n  } {\n    const id: string | symbol = generateCallbackId()\n    const subscription: Subscription = {\n      id,\n      callback,\n      unsubscribe: () => {\n        this._debug('#unsubscribe()', 'state change callback with id removed', id)\n\n        this.stateChangeEmitters.delete(id)\n      },\n    }\n\n    this._debug('#onAuthStateChange()', 'registered callback with id', id)\n\n    this.stateChangeEmitters.set(id, subscription)\n    ;(async () => {\n      await this.initializePromise\n\n      await this._acquireLock(this.lockAcquireTimeout, async () => {\n        this._emitInitialSession(id)\n      })\n    })()\n\n    return { data: { subscription } }\n  }\n\n  private async _emitInitialSession(id: string | symbol): Promise<void> {\n    return await this._useSession(async (result) => {\n      try {\n        const {\n          data: { session },\n          error,\n        } = result\n        if (error) throw error\n\n        await this.stateChangeEmitters.get(id)?.callback('INITIAL_SESSION', session)\n        this._debug('INITIAL_SESSION', 'callback id', id, 'session', session)\n      } catch (err) {\n        await this.stateChangeEmitters.get(id)?.callback('INITIAL_SESSION', null)\n        this._debug('INITIAL_SESSION', 'callback id', id, 'error', err)\n        console.error(err)\n      }\n    })\n  }\n\n  /**\n   * Sends a password reset request to an email address. This method supports the PKCE flow.\n   *\n   * @param email The email address of the user.\n   * @param options.redirectTo The URL to send the user to after they click the password reset link.\n   * @param options.captchaToken Verification token received when the user completes the captcha on the site.\n   */\n  async resetPasswordForEmail(\n    email: string,\n    options: {\n      redirectTo?: string\n      captchaToken?: string\n    } = {}\n  ): Promise<\n    | {\n        data: {}\n        error: null\n      }\n    | { data: null; error: AuthError }\n  > {\n    let codeChallenge: string | null = null\n    let codeChallengeMethod: string | null = null\n\n    if (this.flowType === 'pkce') {\n      ;[codeChallenge, codeChallengeMethod] = await getCodeChallengeAndMethod(\n        this.storage,\n        this.storageKey,\n        true // isPasswordRecovery\n      )\n    }\n    try {\n      return await _request(this.fetch, 'POST', `${this.url}/recover`, {\n        body: {\n          email,\n          code_challenge: codeChallenge,\n          code_challenge_method: codeChallengeMethod,\n          gotrue_meta_security: { captcha_token: options.captchaToken },\n        },\n        headers: this.headers,\n        redirectTo: options.redirectTo,\n      })\n    } catch (error) {\n      await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`)\n      if (isAuthError(error)) {\n        return this._returnResult({ data: null, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Gets all the identities linked to a user.\n   */\n  async getUserIdentities(): Promise<\n    | {\n        data: {\n          identities: UserIdentity[]\n        }\n        error: null\n      }\n    | { data: null; error: AuthError }\n  > {\n    try {\n      const { data, error } = await this.getUser()\n      if (error) throw error\n      return this._returnResult({ data: { identities: data.user.identities ?? [] }, error: null })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: null, error })\n      }\n      throw error\n    }\n  }\n\n  /**\n   * Links an oauth identity to an existing user.\n   * This method supports the PKCE flow.\n   */\n  async linkIdentity(credentials: SignInWithOAuthCredentials): Promise<OAuthResponse>\n\n  /**\n   * Links an OIDC identity to an existing user.\n   */\n  async linkIdentity(credentials: SignInWithIdTokenCredentials): Promise<AuthTokenResponse>\n\n  async linkIdentity(credentials: any): Promise<any> {\n    if ('token' in credentials) {\n      return this.linkIdentityIdToken(credentials)\n    }\n\n    return this.linkIdentityOAuth(credentials)\n  }\n\n  private async linkIdentityOAuth(credentials: SignInWithOAuthCredentials): Promise<OAuthResponse> {\n    try {\n      const { data, error } = await this._useSession(async (result) => {\n        const { data, error } = result\n        if (error) throw error\n        const url: string = await this._getUrlForProvider(\n          `${this.url}/user/identities/authorize`,\n          credentials.provider,\n          {\n            redirectTo: credentials.options?.redirectTo,\n            scopes: credentials.options?.scopes,\n            queryParams: credentials.options?.queryParams,\n            skipBrowserRedirect: true,\n          }\n        )\n        return await _request(this.fetch, 'GET', url, {\n          headers: this.headers,\n          jwt: data.session?.access_token ?? undefined,\n        })\n      })\n      if (error) throw error\n      if (isBrowser() && !credentials.options?.skipBrowserRedirect) {\n        window.location.assign(data?.url)\n      }\n      return this._returnResult({\n        data: { provider: credentials.provider, url: data?.url },\n        error: null,\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { provider: credentials.provider, url: null }, error })\n      }\n      throw error\n    }\n  }\n\n  private async linkIdentityIdToken(\n    credentials: SignInWithIdTokenCredentials\n  ): Promise<AuthTokenResponse> {\n    return await this._useSession(async (result) => {\n      try {\n        const {\n          error: sessionError,\n          data: { session },\n        } = result\n        if (sessionError) throw sessionError\n\n        const { options, provider, token, access_token, nonce } = credentials\n\n        const res = await _request(this.fetch, 'POST', `${this.url}/token?grant_type=id_token`, {\n          headers: this.headers,\n          jwt: session?.access_token ?? undefined,\n          body: {\n            provider,\n            id_token: token,\n            access_token,\n            nonce,\n            link_identity: true,\n            gotrue_meta_security: { captcha_token: options?.captchaToken },\n          },\n          xform: _sessionResponse,\n        })\n\n        const { data, error } = res\n        if (error) {\n          return this._returnResult({ data: { user: null, session: null }, error })\n        } else if (!data || !data.session || !data.user) {\n          return this._returnResult({\n            data: { user: null, session: null },\n            error: new AuthInvalidTokenResponseError(),\n          })\n        }\n        if (data.session) {\n          await this._saveSession(data.session)\n          await this._notifyAllSubscribers('USER_UPDATED', data.session)\n        }\n        return this._returnResult({ data, error })\n      } catch (error) {\n        await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`)\n        if (isAuthError(error)) {\n          return this._returnResult({ data: { user: null, session: null }, error })\n        }\n        throw error\n      }\n    })\n  }\n\n  /**\n   * Unlinks an identity from a user by deleting it. The user will no longer be able to sign in with that identity once it's unlinked.\n   */\n  async unlinkIdentity(identity: UserIdentity): Promise<\n    | {\n        data: {}\n        error: null\n      }\n    | { data: null; error: AuthError }\n  > {\n    try {\n      return await this._useSession(async (result) => {\n        const { data, error } = result\n        if (error) {\n          throw error\n        }\n        return await _request(\n          this.fetch,\n          'DELETE',\n          `${this.url}/user/identities/${identity.identity_id}`,\n          {\n            headers: this.headers,\n            jwt: data.session?.access_token ?? undefined,\n          }\n        )\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: null, error })\n      }\n      throw error\n    }\n  }\n\n  /**\n   * Generates a new JWT.\n   * @param refreshToken A valid refresh token that was returned on login.\n   */\n  private async _refreshAccessToken(refreshToken: string): Promise<AuthResponse> {\n    const debugName = `#_refreshAccessToken(${refreshToken.substring(0, 5)}...)`\n    this._debug(debugName, 'begin')\n\n    try {\n      const startedAt = Date.now()\n\n      // will attempt to refresh the token with exponential backoff\n      return await retryable(\n        async (attempt) => {\n          if (attempt > 0) {\n            await sleep(200 * Math.pow(2, attempt - 1)) // 200, 400, 800, ...\n          }\n\n          this._debug(debugName, 'refreshing attempt', attempt)\n\n          return await _request(this.fetch, 'POST', `${this.url}/token?grant_type=refresh_token`, {\n            body: { refresh_token: refreshToken },\n            headers: this.headers,\n            xform: _sessionResponse,\n          })\n        },\n        (attempt, error) => {\n          const nextBackOffInterval = 200 * Math.pow(2, attempt)\n          return (\n            error &&\n            isAuthRetryableFetchError(error) &&\n            // retryable only if the request can be sent before the backoff overflows the tick duration\n            Date.now() + nextBackOffInterval - startedAt < AUTO_REFRESH_TICK_DURATION_MS\n          )\n        }\n      )\n    } catch (error) {\n      this._debug(debugName, 'error', error)\n\n      if (isAuthError(error)) {\n        return this._returnResult({ data: { session: null, user: null }, error })\n      }\n      throw error\n    } finally {\n      this._debug(debugName, 'end')\n    }\n  }\n\n  private _isValidSession(maybeSession: unknown): maybeSession is Session {\n    const isValidSession =\n      typeof maybeSession === 'object' &&\n      maybeSession !== null &&\n      'access_token' in maybeSession &&\n      'refresh_token' in maybeSession &&\n      'expires_at' in maybeSession\n\n    return isValidSession\n  }\n\n  private async _handleProviderSignIn(\n    provider: Provider,\n    options: {\n      redirectTo?: string\n      scopes?: string\n      queryParams?: { [key: string]: string }\n      skipBrowserRedirect?: boolean\n    }\n  ) {\n    const url: string = await this._getUrlForProvider(`${this.url}/authorize`, provider, {\n      redirectTo: options.redirectTo,\n      scopes: options.scopes,\n      queryParams: options.queryParams,\n    })\n\n    this._debug('#_handleProviderSignIn()', 'provider', provider, 'options', options, 'url', url)\n\n    // try to open on the browser\n    if (isBrowser() && !options.skipBrowserRedirect) {\n      window.location.assign(url)\n    }\n\n    return { data: { provider, url }, error: null }\n  }\n\n  /**\n   * Recovers the session from LocalStorage and refreshes the token\n   * Note: this method is async to accommodate for AsyncStorage e.g. in React native.\n   */\n  private async _recoverAndRefresh() {\n    const debugName = '#_recoverAndRefresh()'\n    this._debug(debugName, 'begin')\n\n    try {\n      const currentSession = (await getItemAsync(this.storage, this.storageKey)) as Session | null\n\n      if (currentSession && this.userStorage) {\n        let maybeUser: { user: User | null } | null = (await getItemAsync(\n          this.userStorage,\n          this.storageKey + '-user'\n        )) as any\n\n        if (!this.storage.isServer && Object.is(this.storage, this.userStorage) && !maybeUser) {\n          // storage and userStorage are the same storage medium, for example\n          // window.localStorage if userStorage does not have the user from\n          // storage stored, store it first thereby migrating the user object\n          // from storage -> userStorage\n\n          maybeUser = { user: currentSession.user }\n          await setItemAsync(this.userStorage, this.storageKey + '-user', maybeUser)\n        }\n\n        currentSession.user = maybeUser?.user ?? userNotAvailableProxy()\n      } else if (currentSession && !currentSession.user) {\n        // user storage is not set, let's check if it was previously enabled so\n        // we bring back the storage as it should be\n\n        if (!currentSession.user) {\n          // test if userStorage was previously enabled and the storage medium was the same, to move the user back under the same key\n          const separateUser: { user: User | null } | null = (await getItemAsync(\n            this.storage,\n            this.storageKey + '-user'\n          )) as any\n\n          if (separateUser && separateUser?.user) {\n            currentSession.user = separateUser.user\n\n            await removeItemAsync(this.storage, this.storageKey + '-user')\n            await setItemAsync(this.storage, this.storageKey, currentSession)\n          } else {\n            currentSession.user = userNotAvailableProxy()\n          }\n        }\n      }\n\n      this._debug(debugName, 'session from storage', currentSession)\n\n      if (!this._isValidSession(currentSession)) {\n        this._debug(debugName, 'session is not valid')\n        if (currentSession !== null) {\n          await this._removeSession()\n        }\n\n        return\n      }\n\n      const expiresWithMargin =\n        (currentSession.expires_at ?? Infinity) * 1000 - Date.now() < EXPIRY_MARGIN_MS\n\n      this._debug(\n        debugName,\n        `session has${expiresWithMargin ? '' : ' not'} expired with margin of ${EXPIRY_MARGIN_MS}s`\n      )\n\n      if (expiresWithMargin) {\n        if (this.autoRefreshToken && currentSession.refresh_token) {\n          const { error } = await this._callRefreshToken(currentSession.refresh_token)\n\n          if (error) {\n            console.error(error)\n\n            if (!isAuthRetryableFetchError(error)) {\n              this._debug(\n                debugName,\n                'refresh failed with a non-retryable error, removing the session',\n                error\n              )\n              await this._removeSession()\n            }\n          }\n        }\n      } else if (\n        currentSession.user &&\n        (currentSession.user as any).__isUserNotAvailableProxy === true\n      ) {\n        // If we have a proxy user, try to get the real user data\n        try {\n          const { data, error: userError } = await this._getUser(currentSession.access_token)\n\n          if (!userError && data?.user) {\n            currentSession.user = data.user\n            await this._saveSession(currentSession)\n            await this._notifyAllSubscribers('SIGNED_IN', currentSession)\n          } else {\n            this._debug(debugName, 'could not get user data, skipping SIGNED_IN notification')\n          }\n        } catch (getUserError) {\n          console.error('Error getting user data:', getUserError)\n          this._debug(\n            debugName,\n            'error getting user data, skipping SIGNED_IN notification',\n            getUserError\n          )\n        }\n      } else {\n        // no need to persist currentSession again, as we just loaded it from\n        // local storage; persisting it again may overwrite a value saved by\n        // another client with access to the same local storage\n        await this._notifyAllSubscribers('SIGNED_IN', currentSession)\n      }\n    } catch (err) {\n      this._debug(debugName, 'error', err)\n\n      console.error(err)\n      return\n    } finally {\n      this._debug(debugName, 'end')\n    }\n  }\n\n  private async _callRefreshToken(refreshToken: string): Promise<CallRefreshTokenResult> {\n    if (!refreshToken) {\n      throw new AuthSessionMissingError()\n    }\n\n    // refreshing is already in progress\n    if (this.refreshingDeferred) {\n      return this.refreshingDeferred.promise\n    }\n\n    const debugName = `#_callRefreshToken(${refreshToken.substring(0, 5)}...)`\n\n    this._debug(debugName, 'begin')\n\n    try {\n      this.refreshingDeferred = new Deferred<CallRefreshTokenResult>()\n\n      const { data, error } = await this._refreshAccessToken(refreshToken)\n      if (error) throw error\n      if (!data.session) throw new AuthSessionMissingError()\n\n      await this._saveSession(data.session)\n      await this._notifyAllSubscribers('TOKEN_REFRESHED', data.session)\n\n      const result = { data: data.session, error: null }\n\n      this.refreshingDeferred.resolve(result)\n\n      return result\n    } catch (error) {\n      this._debug(debugName, 'error', error)\n\n      if (isAuthError(error)) {\n        const result = { data: null, error }\n\n        if (!isAuthRetryableFetchError(error)) {\n          await this._removeSession()\n        }\n\n        this.refreshingDeferred?.resolve(result)\n\n        return result\n      }\n\n      this.refreshingDeferred?.reject(error)\n      throw error\n    } finally {\n      this.refreshingDeferred = null\n      this._debug(debugName, 'end')\n    }\n  }\n\n  private async _notifyAllSubscribers(\n    event: AuthChangeEvent,\n    session: Session | null,\n    broadcast = true\n  ) {\n    const debugName = `#_notifyAllSubscribers(${event})`\n    this._debug(debugName, 'begin', session, `broadcast = ${broadcast}`)\n\n    try {\n      if (this.broadcastChannel && broadcast) {\n        this.broadcastChannel.postMessage({ event, session })\n      }\n\n      const errors: any[] = []\n      const promises = Array.from(this.stateChangeEmitters.values()).map(async (x) => {\n        try {\n          await x.callback(event, session)\n        } catch (e: any) {\n          errors.push(e)\n        }\n      })\n\n      await Promise.all(promises)\n\n      if (errors.length > 0) {\n        for (let i = 0; i < errors.length; i += 1) {\n          console.error(errors[i])\n        }\n\n        throw errors[0]\n      }\n    } finally {\n      this._debug(debugName, 'end')\n    }\n  }\n\n  /**\n   * set currentSession and currentUser\n   * process to _startAutoRefreshToken if possible\n   */\n  private async _saveSession(session: Session) {\n    this._debug('#_saveSession()', session)\n    // _saveSession is always called whenever a new session has been acquired\n    // so we can safely suppress the warning returned by future getSession calls\n    this.suppressGetSessionWarning = true\n    await removeItemAsync(this.storage, `${this.storageKey}-code-verifier`)\n    // Create a shallow copy to work with, to avoid mutating the original session object if it's used elsewhere\n    const sessionToProcess = { ...session }\n\n    const userIsProxy =\n      sessionToProcess.user && (sessionToProcess.user as any).__isUserNotAvailableProxy === true\n    if (this.userStorage) {\n      if (!userIsProxy && sessionToProcess.user) {\n        // If it's a real user object, save it to userStorage.\n        await setItemAsync(this.userStorage, this.storageKey + '-user', {\n          user: sessionToProcess.user,\n        })\n      } else if (userIsProxy) {\n        // If it's the proxy, it means user was not found in userStorage.\n        // We should ensure no stale user data for this key exists in userStorage if we were to save null,\n        // or simply not save the proxy. For now, we don't save the proxy here.\n        // If there's a need to clear userStorage if user becomes proxy, that logic would go here.\n      }\n\n      // Prepare the main session data for primary storage: remove the user property before cloning\n      // This is important because the original session.user might be the proxy\n      const mainSessionData: Omit<Session, 'user'> & { user?: User } = { ...sessionToProcess }\n      delete mainSessionData.user // Remove user (real or proxy) before cloning for main storage\n\n      const clonedMainSessionData = deepClone(mainSessionData)\n      await setItemAsync(this.storage, this.storageKey, clonedMainSessionData)\n    } else {\n      // No userStorage is configured.\n      // In this case, session.user should ideally not be a proxy.\n      // If it were, structuredClone would fail. This implies an issue elsewhere if user is a proxy here\n      const clonedSession = deepClone(sessionToProcess) // sessionToProcess still has its original user property\n      await setItemAsync(this.storage, this.storageKey, clonedSession)\n    }\n  }\n\n  private async _removeSession() {\n    this._debug('#_removeSession()')\n\n    this.suppressGetSessionWarning = false\n\n    await removeItemAsync(this.storage, this.storageKey)\n    await removeItemAsync(this.storage, this.storageKey + '-code-verifier')\n    await removeItemAsync(this.storage, this.storageKey + '-user')\n\n    if (this.userStorage) {\n      await removeItemAsync(this.userStorage, this.storageKey + '-user')\n    }\n\n    await this._notifyAllSubscribers('SIGNED_OUT', null)\n  }\n\n  /**\n   * Removes any registered visibilitychange callback.\n   *\n   * {@see #startAutoRefresh}\n   * {@see #stopAutoRefresh}\n   */\n  private _removeVisibilityChangedCallback() {\n    this._debug('#_removeVisibilityChangedCallback()')\n\n    const callback = this.visibilityChangedCallback\n    this.visibilityChangedCallback = null\n\n    try {\n      if (callback && isBrowser() && window?.removeEventListener) {\n        window.removeEventListener('visibilitychange', callback)\n      }\n    } catch (e) {\n      console.error('removing visibilitychange callback failed', e)\n    }\n  }\n\n  /**\n   * This is the private implementation of {@link #startAutoRefresh}. Use this\n   * within the library.\n   */\n  private async _startAutoRefresh() {\n    await this._stopAutoRefresh()\n\n    this._debug('#_startAutoRefresh()')\n\n    const ticker = setInterval(() => this._autoRefreshTokenTick(), AUTO_REFRESH_TICK_DURATION_MS)\n    this.autoRefreshTicker = ticker\n\n    if (ticker && typeof ticker === 'object' && typeof ticker.unref === 'function') {\n      // ticker is a NodeJS Timeout object that has an `unref` method\n      // https://nodejs.org/api/timers.html#timeoutunref\n      // When auto refresh is used in NodeJS (like for testing) the\n      // `setInterval` is preventing the process from being marked as\n      // finished and tests run endlessly. This can be prevented by calling\n      // `unref()` on the returned object.\n      ticker.unref()\n      // @ts-expect-error TS has no context of Deno\n    } else if (typeof Deno !== 'undefined' && typeof Deno.unrefTimer === 'function') {\n      // similar like for NodeJS, but with the Deno API\n      // https://deno.land/api@latest?unstable&s=Deno.unrefTimer\n      // @ts-expect-error TS has no context of Deno\n      Deno.unrefTimer(ticker)\n    }\n\n    // run the tick immediately, but in the next pass of the event loop so that\n    // #_initialize can be allowed to complete without recursively waiting on\n    // itself\n    const timeout = setTimeout(async () => {\n      await this.initializePromise\n      await this._autoRefreshTokenTick()\n    }, 0)\n    this.autoRefreshTickTimeout = timeout\n\n    if (timeout && typeof timeout === 'object' && typeof timeout.unref === 'function') {\n      timeout.unref()\n      // @ts-expect-error TS has no context of Deno\n    } else if (typeof Deno !== 'undefined' && typeof Deno.unrefTimer === 'function') {\n      // @ts-expect-error TS has no context of Deno\n      Deno.unrefTimer(timeout)\n    }\n  }\n\n  /**\n   * This is the private implementation of {@link #stopAutoRefresh}. Use this\n   * within the library.\n   */\n  private async _stopAutoRefresh() {\n    this._debug('#_stopAutoRefresh()')\n\n    const ticker = this.autoRefreshTicker\n    this.autoRefreshTicker = null\n\n    if (ticker) {\n      clearInterval(ticker)\n    }\n\n    const timeout = this.autoRefreshTickTimeout\n    this.autoRefreshTickTimeout = null\n\n    if (timeout) {\n      clearTimeout(timeout)\n    }\n  }\n\n  /**\n   * Starts an auto-refresh process in the background. The session is checked\n   * every few seconds. Close to the time of expiration a process is started to\n   * refresh the session. If refreshing fails it will be retried for as long as\n   * necessary.\n   *\n   * If you set the {@link GoTrueClientOptions#autoRefreshToken} you don't need\n   * to call this function, it will be called for you.\n   *\n   * On browsers the refresh process works only when the tab/window is in the\n   * foreground to conserve resources as well as prevent race conditions and\n   * flooding auth with requests. If you call this method any managed\n   * visibility change callback will be removed and you must manage visibility\n   * changes on your own.\n   *\n   * On non-browser platforms the refresh process works *continuously* in the\n   * background, which may not be desirable. You should hook into your\n   * platform's foreground indication mechanism and call these methods\n   * appropriately to conserve resources.\n   *\n   * {@see #stopAutoRefresh}\n   */\n  async startAutoRefresh() {\n    this._removeVisibilityChangedCallback()\n    await this._startAutoRefresh()\n  }\n\n  /**\n   * Stops an active auto refresh process running in the background (if any).\n   *\n   * If you call this method any managed visibility change callback will be\n   * removed and you must manage visibility changes on your own.\n   *\n   * See {@link #startAutoRefresh} for more details.\n   */\n  async stopAutoRefresh() {\n    this._removeVisibilityChangedCallback()\n    await this._stopAutoRefresh()\n  }\n\n  /**\n   * Runs the auto refresh token tick.\n   */\n  private async _autoRefreshTokenTick() {\n    this._debug('#_autoRefreshTokenTick()', 'begin')\n\n    try {\n      await this._acquireLock(0, async () => {\n        try {\n          const now = Date.now()\n\n          try {\n            return await this._useSession(async (result) => {\n              const {\n                data: { session },\n              } = result\n\n              if (!session || !session.refresh_token || !session.expires_at) {\n                this._debug('#_autoRefreshTokenTick()', 'no session')\n                return\n              }\n\n              // session will expire in this many ticks (or has already expired if <= 0)\n              const expiresInTicks = Math.floor(\n                (session.expires_at * 1000 - now) / AUTO_REFRESH_TICK_DURATION_MS\n              )\n\n              this._debug(\n                '#_autoRefreshTokenTick()',\n                `access token expires in ${expiresInTicks} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`\n              )\n\n              if (expiresInTicks <= AUTO_REFRESH_TICK_THRESHOLD) {\n                await this._callRefreshToken(session.refresh_token)\n              }\n            })\n          } catch (e: any) {\n            console.error(\n              'Auto refresh tick failed with error. This is likely a transient error.',\n              e\n            )\n          }\n        } finally {\n          this._debug('#_autoRefreshTokenTick()', 'end')\n        }\n      })\n    } catch (e: any) {\n      if (e.isAcquireTimeout || e instanceof LockAcquireTimeoutError) {\n        this._debug('auto refresh token tick lock not available')\n      } else {\n        throw e\n      }\n    }\n  }\n\n  /**\n   * Registers callbacks on the browser / platform, which in-turn run\n   * algorithms when the browser window/tab are in foreground. On non-browser\n   * platforms it assumes always foreground.\n   */\n  private async _handleVisibilityChange() {\n    this._debug('#_handleVisibilityChange()')\n\n    if (!isBrowser() || !window?.addEventListener) {\n      if (this.autoRefreshToken) {\n        // in non-browser environments the refresh token ticker runs always\n        this.startAutoRefresh()\n      }\n\n      return false\n    }\n\n    try {\n      this.visibilityChangedCallback = async () => {\n        try {\n          await this._onVisibilityChanged(false)\n        } catch (error) {\n          this._debug('#visibilityChangedCallback', 'error', error)\n        }\n      }\n\n      window?.addEventListener('visibilitychange', this.visibilityChangedCallback)\n\n      // now immediately call the visbility changed callback to setup with the\n      // current visbility state\n      await this._onVisibilityChanged(true) // initial call\n    } catch (error) {\n      console.error('_handleVisibilityChange', error)\n    }\n  }\n\n  /**\n   * Callback registered with `window.addEventListener('visibilitychange')`.\n   */\n  private async _onVisibilityChanged(calledFromInitialize: boolean) {\n    const methodName = `#_onVisibilityChanged(${calledFromInitialize})`\n    this._debug(methodName, 'visibilityState', document.visibilityState)\n\n    if (document.visibilityState === 'visible') {\n      if (this.autoRefreshToken) {\n        // in browser environments the refresh token ticker runs only on focused tabs\n        // which prevents race conditions\n        this._startAutoRefresh()\n      }\n\n      if (!calledFromInitialize) {\n        // called when the visibility has changed, i.e. the browser\n        // transitioned from hidden -> visible so we need to see if the session\n        // should be recovered immediately... but to do that we need to acquire\n        // the lock first asynchronously\n        await this.initializePromise\n\n        await this._acquireLock(this.lockAcquireTimeout, async () => {\n          if (document.visibilityState !== 'visible') {\n            this._debug(\n              methodName,\n              'acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting'\n            )\n\n            // visibility has changed while waiting for the lock, abort\n            return\n          }\n\n          // recover the session\n          await this._recoverAndRefresh()\n        })\n      }\n    } else if (document.visibilityState === 'hidden') {\n      if (this.autoRefreshToken) {\n        this._stopAutoRefresh()\n      }\n    }\n  }\n\n  /**\n   * Generates the relevant login URL for a third-party provider.\n   * @param options.redirectTo A URL or mobile address to send the user to after they are confirmed.\n   * @param options.scopes A space-separated list of scopes granted to the OAuth application.\n   * @param options.queryParams An object of key-value pairs containing query parameters granted to the OAuth application.\n   */\n  private async _getUrlForProvider(\n    url: string,\n    provider: Provider,\n    options: {\n      redirectTo?: string\n      scopes?: string\n      queryParams?: { [key: string]: string }\n      skipBrowserRedirect?: boolean\n    }\n  ) {\n    const urlParams: string[] = [`provider=${encodeURIComponent(provider)}`]\n    if (options?.redirectTo) {\n      urlParams.push(`redirect_to=${encodeURIComponent(options.redirectTo)}`)\n    }\n    if (options?.scopes) {\n      urlParams.push(`scopes=${encodeURIComponent(options.scopes)}`)\n    }\n    if (this.flowType === 'pkce') {\n      const [codeChallenge, codeChallengeMethod] = await getCodeChallengeAndMethod(\n        this.storage,\n        this.storageKey\n      )\n\n      const flowParams = new URLSearchParams({\n        code_challenge: `${encodeURIComponent(codeChallenge)}`,\n        code_challenge_method: `${encodeURIComponent(codeChallengeMethod)}`,\n      })\n      urlParams.push(flowParams.toString())\n    }\n    if (options?.queryParams) {\n      const query = new URLSearchParams(options.queryParams)\n      urlParams.push(query.toString())\n    }\n    if (options?.skipBrowserRedirect) {\n      urlParams.push(`skip_http_redirect=${options.skipBrowserRedirect}`)\n    }\n\n    return `${url}?${urlParams.join('&')}`\n  }\n\n  private async _unenroll(params: MFAUnenrollParams): Promise<AuthMFAUnenrollResponse> {\n    try {\n      return await this._useSession(async (result) => {\n        const { data: sessionData, error: sessionError } = result\n        if (sessionError) {\n          return this._returnResult({ data: null, error: sessionError })\n        }\n\n        return await _request(this.fetch, 'DELETE', `${this.url}/factors/${params.factorId}`, {\n          headers: this.headers,\n          jwt: sessionData?.session?.access_token,\n        })\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: null, error })\n      }\n      throw error\n    }\n  }\n\n  /**\n   * {@see GoTrueMFAApi#enroll}\n   */\n  private async _enroll(params: MFAEnrollTOTPParams): Promise<AuthMFAEnrollTOTPResponse>\n  private async _enroll(params: MFAEnrollPhoneParams): Promise<AuthMFAEnrollPhoneResponse>\n  private async _enroll(params: MFAEnrollWebauthnParams): Promise<AuthMFAEnrollWebauthnResponse>\n  private async _enroll(params: MFAEnrollParams): Promise<AuthMFAEnrollResponse> {\n    try {\n      return await this._useSession(async (result) => {\n        const { data: sessionData, error: sessionError } = result\n        if (sessionError) {\n          return this._returnResult({ data: null, error: sessionError })\n        }\n\n        const body = {\n          friendly_name: params.friendlyName,\n          factor_type: params.factorType,\n          ...(params.factorType === 'phone'\n            ? { phone: params.phone }\n            : params.factorType === 'totp'\n              ? { issuer: params.issuer }\n              : {}),\n        }\n\n        const { data, error } = (await _request(this.fetch, 'POST', `${this.url}/factors`, {\n          body,\n          headers: this.headers,\n          jwt: sessionData?.session?.access_token,\n        })) as AuthMFAEnrollResponse\n        if (error) {\n          return this._returnResult({ data: null, error })\n        }\n\n        if (params.factorType === 'totp' && data.type === 'totp' && data?.totp?.qr_code) {\n          data.totp.qr_code = `data:image/svg+xml;utf-8,${data.totp.qr_code}`\n        }\n\n        return this._returnResult({ data, error: null })\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: null, error })\n      }\n      throw error\n    }\n  }\n\n  /**\n   * {@see GoTrueMFAApi#verify}\n   */\n  private async _verify(params: MFAVerifyTOTPParams): Promise<AuthMFAVerifyResponse>\n  private async _verify(params: MFAVerifyPhoneParams): Promise<AuthMFAVerifyResponse>\n  private async _verify<T extends 'create' | 'request'>(\n    params: MFAVerifyWebauthnParams<T>\n  ): Promise<AuthMFAVerifyResponse>\n  private async _verify(params: MFAVerifyParams): Promise<AuthMFAVerifyResponse> {\n    return this._acquireLock(this.lockAcquireTimeout, async () => {\n      try {\n        return await this._useSession(async (result) => {\n          const { data: sessionData, error: sessionError } = result\n          if (sessionError) {\n            return this._returnResult({ data: null, error: sessionError })\n          }\n\n          const body: StrictOmit<\n            | Exclude<MFAVerifyParams, MFAVerifyWebauthnParams>\n            /** Exclude out the webauthn params from here because we're going to need to serialize them in the response */\n            | Prettify<\n                StrictOmit<MFAVerifyWebauthnParams, 'webauthn'> & {\n                  webauthn: Prettify<\n                    StrictOmit<MFAVerifyWebauthnParamFields['webauthn'], 'credential_response'> & {\n                      credential_response: PublicKeyCredentialJSON\n                    }\n                  >\n                }\n              >,\n            /*  Exclude challengeId because the backend expects snake_case, and exclude factorId since it's passed in the path params */\n            'challengeId' | 'factorId'\n          > & {\n            challenge_id: string\n          } = {\n            challenge_id: params.challengeId,\n            ...('webauthn' in params\n              ? {\n                  webauthn: {\n                    ...params.webauthn,\n                    credential_response:\n                      params.webauthn.type === 'create'\n                        ? serializeCredentialCreationResponse(\n                            params.webauthn.credential_response as RegistrationCredential\n                          )\n                        : serializeCredentialRequestResponse(\n                            params.webauthn.credential_response as AuthenticationCredential\n                          ),\n                  },\n                }\n              : { code: params.code }),\n          }\n\n          const { data, error } = await _request(\n            this.fetch,\n            'POST',\n            `${this.url}/factors/${params.factorId}/verify`,\n            {\n              body,\n              headers: this.headers,\n              jwt: sessionData?.session?.access_token,\n            }\n          )\n          if (error) {\n            return this._returnResult({ data: null, error })\n          }\n\n          await this._saveSession({\n            expires_at: Math.round(Date.now() / 1000) + data.expires_in,\n            ...data,\n          })\n          await this._notifyAllSubscribers('MFA_CHALLENGE_VERIFIED', data)\n\n          return this._returnResult({ data, error })\n        })\n      } catch (error) {\n        if (isAuthError(error)) {\n          return this._returnResult({ data: null, error })\n        }\n        throw error\n      }\n    })\n  }\n\n  /**\n   * {@see GoTrueMFAApi#challenge}\n   */\n  private async _challenge(\n    params: MFAChallengeTOTPParams\n  ): Promise<Prettify<AuthMFAChallengeTOTPResponse>>\n  private async _challenge(\n    params: MFAChallengePhoneParams\n  ): Promise<Prettify<AuthMFAChallengePhoneResponse>>\n  private async _challenge(\n    params: MFAChallengeWebauthnParams\n  ): Promise<Prettify<AuthMFAChallengeWebauthnResponse>>\n  private async _challenge(params: MFAChallengeParams): Promise<AuthMFAChallengeResponse> {\n    return this._acquireLock(this.lockAcquireTimeout, async () => {\n      try {\n        return await this._useSession(async (result) => {\n          const { data: sessionData, error: sessionError } = result\n          if (sessionError) {\n            return this._returnResult({ data: null, error: sessionError })\n          }\n\n          const response = (await _request(\n            this.fetch,\n            'POST',\n            `${this.url}/factors/${params.factorId}/challenge`,\n            {\n              body: params,\n              headers: this.headers,\n              jwt: sessionData?.session?.access_token,\n            }\n          )) as\n            | Exclude<AuthMFAChallengeResponse, AuthMFAChallengeWebauthnResponse>\n            /** The server will send `serialized` data, so we assert the serialized response */\n            | AuthMFAChallengeWebauthnServerResponse\n\n          if (response.error) {\n            return response\n          }\n\n          const { data } = response\n\n          if (data.type !== 'webauthn') {\n            return { data, error: null }\n          }\n\n          switch (data.webauthn.type) {\n            case 'create':\n              return {\n                data: {\n                  ...data,\n                  webauthn: {\n                    ...data.webauthn,\n                    credential_options: {\n                      ...data.webauthn.credential_options,\n                      publicKey: deserializeCredentialCreationOptions(\n                        data.webauthn.credential_options.publicKey\n                      ),\n                    },\n                  },\n                },\n                error: null,\n              }\n            case 'request':\n              return {\n                data: {\n                  ...data,\n                  webauthn: {\n                    ...data.webauthn,\n                    credential_options: {\n                      ...data.webauthn.credential_options,\n                      publicKey: deserializeCredentialRequestOptions(\n                        data.webauthn.credential_options.publicKey\n                      ),\n                    },\n                  },\n                },\n                error: null,\n              }\n          }\n        })\n      } catch (error) {\n        if (isAuthError(error)) {\n          return this._returnResult({ data: null, error })\n        }\n        throw error\n      }\n    })\n  }\n\n  /**\n   * {@see GoTrueMFAApi#challengeAndVerify}\n   */\n  private async _challengeAndVerify(\n    params: MFAChallengeAndVerifyParams\n  ): Promise<AuthMFAVerifyResponse> {\n    // both _challenge and _verify independently acquire the lock, so no need\n    // to acquire it here\n\n    const { data: challengeData, error: challengeError } = await this._challenge({\n      factorId: params.factorId,\n    })\n    if (challengeError) {\n      return this._returnResult({ data: null, error: challengeError })\n    }\n\n    return await this._verify({\n      factorId: params.factorId,\n      challengeId: challengeData.id,\n      code: params.code,\n    })\n  }\n\n  /**\n   * {@see GoTrueMFAApi#listFactors}\n   */\n  private async _listFactors(): Promise<AuthMFAListFactorsResponse> {\n    // use #getUser instead of #_getUser as the former acquires a lock\n    const {\n      data: { user },\n      error: userError,\n    } = await this.getUser()\n    if (userError) {\n      return { data: null, error: userError }\n    }\n\n    const data: AuthMFAListFactorsResponse['data'] = {\n      all: [],\n      phone: [],\n      totp: [],\n      webauthn: [],\n    }\n\n    // loop over the factors ONCE\n    for (const factor of user?.factors ?? []) {\n      data.all.push(factor)\n      if (factor.status === 'verified') {\n        ;(data[factor.factor_type] as (typeof factor)[]).push(factor)\n      }\n    }\n\n    return {\n      data,\n      error: null,\n    }\n  }\n\n  /**\n   * {@see GoTrueMFAApi#getAuthenticatorAssuranceLevel}\n   */\n  private async _getAuthenticatorAssuranceLevel(\n    jwt?: string\n  ): Promise<AuthMFAGetAuthenticatorAssuranceLevelResponse> {\n    if (jwt) {\n      try {\n        const { payload } = decodeJWT(jwt)\n\n        let currentLevel: AuthenticatorAssuranceLevels | null = null\n        if (payload.aal) {\n          currentLevel = payload.aal\n        }\n\n        let nextLevel: AuthenticatorAssuranceLevels | null = currentLevel\n\n        const {\n          data: { user },\n          error: userError,\n        } = await this.getUser(jwt)\n\n        if (userError) {\n          return this._returnResult({ data: null, error: userError })\n        }\n\n        const verifiedFactors =\n          user?.factors?.filter((factor: Factor) => factor.status === 'verified') ?? []\n\n        if (verifiedFactors.length > 0) {\n          nextLevel = 'aal2'\n        }\n\n        const currentAuthenticationMethods = payload.amr || []\n\n        return { data: { currentLevel, nextLevel, currentAuthenticationMethods }, error: null }\n      } catch (error) {\n        if (isAuthError(error)) {\n          return this._returnResult({ data: null, error })\n        }\n        throw error\n      }\n    }\n\n    const {\n      data: { session },\n      error: sessionError,\n    } = await this.getSession()\n\n    if (sessionError) {\n      return this._returnResult({ data: null, error: sessionError })\n    }\n    if (!session) {\n      return {\n        data: { currentLevel: null, nextLevel: null, currentAuthenticationMethods: [] },\n        error: null,\n      }\n    }\n\n    const { payload } = decodeJWT(session.access_token)\n\n    let currentLevel: AuthenticatorAssuranceLevels | null = null\n\n    if (payload.aal) {\n      currentLevel = payload.aal\n    }\n\n    let nextLevel: AuthenticatorAssuranceLevels | null = currentLevel\n\n    const verifiedFactors =\n      session.user.factors?.filter((factor: Factor) => factor.status === 'verified') ?? []\n\n    if (verifiedFactors.length > 0) {\n      nextLevel = 'aal2'\n    }\n\n    const currentAuthenticationMethods = payload.amr || []\n\n    return { data: { currentLevel, nextLevel, currentAuthenticationMethods }, error: null }\n  }\n\n  /**\n   * Retrieves details about an OAuth authorization request.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   *\n   * Returns authorization details including client info, scopes, and user information.\n   * If the response includes only a redirect_url field, it means consent was already given - the caller\n   * should handle the redirect manually if needed.\n   */\n  private async _getAuthorizationDetails(\n    authorizationId: string\n  ): Promise<AuthOAuthAuthorizationDetailsResponse> {\n    try {\n      return await this._useSession(async (result) => {\n        const {\n          data: { session },\n          error: sessionError,\n        } = result\n\n        if (sessionError) {\n          return this._returnResult({ data: null, error: sessionError })\n        }\n\n        if (!session) {\n          return this._returnResult({ data: null, error: new AuthSessionMissingError() })\n        }\n\n        return await _request(\n          this.fetch,\n          'GET',\n          `${this.url}/oauth/authorizations/${authorizationId}`,\n          {\n            headers: this.headers,\n            jwt: session.access_token,\n            xform: (data: any) => ({ data, error: null }),\n          }\n        )\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: null, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Approves an OAuth authorization request.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   */\n  private async _approveAuthorization(\n    authorizationId: string,\n    options?: { skipBrowserRedirect?: boolean }\n  ): Promise<AuthOAuthConsentResponse> {\n    try {\n      return await this._useSession(async (result) => {\n        const {\n          data: { session },\n          error: sessionError,\n        } = result\n\n        if (sessionError) {\n          return this._returnResult({ data: null, error: sessionError })\n        }\n\n        if (!session) {\n          return this._returnResult({ data: null, error: new AuthSessionMissingError() })\n        }\n\n        const response = await _request(\n          this.fetch,\n          'POST',\n          `${this.url}/oauth/authorizations/${authorizationId}/consent`,\n          {\n            headers: this.headers,\n            jwt: session.access_token,\n            body: { action: 'approve' },\n            xform: (data: any) => ({ data, error: null }),\n          }\n        )\n\n        if (response.data && response.data.redirect_url) {\n          // Automatically redirect in browser unless skipBrowserRedirect is true\n          if (isBrowser() && !options?.skipBrowserRedirect) {\n            window.location.assign(response.data.redirect_url)\n          }\n        }\n\n        return response\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: null, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Denies an OAuth authorization request.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   */\n  private async _denyAuthorization(\n    authorizationId: string,\n    options?: { skipBrowserRedirect?: boolean }\n  ): Promise<AuthOAuthConsentResponse> {\n    try {\n      return await this._useSession(async (result) => {\n        const {\n          data: { session },\n          error: sessionError,\n        } = result\n\n        if (sessionError) {\n          return this._returnResult({ data: null, error: sessionError })\n        }\n\n        if (!session) {\n          return this._returnResult({ data: null, error: new AuthSessionMissingError() })\n        }\n\n        const response = await _request(\n          this.fetch,\n          'POST',\n          `${this.url}/oauth/authorizations/${authorizationId}/consent`,\n          {\n            headers: this.headers,\n            jwt: session.access_token,\n            body: { action: 'deny' },\n            xform: (data: any) => ({ data, error: null }),\n          }\n        )\n\n        if (response.data && response.data.redirect_url) {\n          // Automatically redirect in browser unless skipBrowserRedirect is true\n          if (isBrowser() && !options?.skipBrowserRedirect) {\n            window.location.assign(response.data.redirect_url)\n          }\n        }\n\n        return response\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: null, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Lists all OAuth grants that the authenticated user has authorized.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   */\n  private async _listOAuthGrants(): Promise<AuthOAuthGrantsResponse> {\n    try {\n      return await this._useSession(async (result) => {\n        const {\n          data: { session },\n          error: sessionError,\n        } = result\n\n        if (sessionError) {\n          return this._returnResult({ data: null, error: sessionError })\n        }\n\n        if (!session) {\n          return this._returnResult({ data: null, error: new AuthSessionMissingError() })\n        }\n\n        return await _request(this.fetch, 'GET', `${this.url}/user/oauth/grants`, {\n          headers: this.headers,\n          jwt: session.access_token,\n          xform: (data: any) => ({ data, error: null }),\n        })\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: null, error })\n      }\n\n      throw error\n    }\n  }\n\n  /**\n   * Revokes a user's OAuth grant for a specific client.\n   * Only relevant when the OAuth 2.1 server is enabled in Supabase Auth.\n   */\n  private async _revokeOAuthGrant(options: {\n    clientId: string\n  }): Promise<AuthOAuthRevokeGrantResponse> {\n    try {\n      return await this._useSession(async (result) => {\n        const {\n          data: { session },\n          error: sessionError,\n        } = result\n\n        if (sessionError) {\n          return this._returnResult({ data: null, error: sessionError })\n        }\n\n        if (!session) {\n          return this._returnResult({ data: null, error: new AuthSessionMissingError() })\n        }\n\n        await _request(this.fetch, 'DELETE', `${this.url}/user/oauth/grants`, {\n          headers: this.headers,\n          jwt: session.access_token,\n          query: { client_id: options.clientId },\n          noResolveJson: true,\n        })\n        return { data: {}, error: null }\n      })\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: null, error })\n      }\n\n      throw error\n    }\n  }\n\n  private async fetchJwk(kid: string, jwks: { keys: JWK[] } = { keys: [] }): Promise<JWK | null> {\n    // try fetching from the supplied jwks\n    let jwk = jwks.keys.find((key) => key.kid === kid)\n    if (jwk) {\n      return jwk\n    }\n\n    const now = Date.now()\n\n    // try fetching from cache\n    jwk = this.jwks.keys.find((key) => key.kid === kid)\n\n    // jwk exists and jwks isn't stale\n    if (jwk && this.jwks_cached_at + JWKS_TTL > now) {\n      return jwk\n    }\n    // jwk isn't cached in memory so we need to fetch it from the well-known endpoint\n    const { data, error } = await _request(this.fetch, 'GET', `${this.url}/.well-known/jwks.json`, {\n      headers: this.headers,\n    })\n    if (error) {\n      throw error\n    }\n    if (!data.keys || data.keys.length === 0) {\n      return null\n    }\n\n    this.jwks = data\n    this.jwks_cached_at = now\n\n    // Find the signing key\n    jwk = data.keys.find((key: any) => key.kid === kid)\n    if (!jwk) {\n      return null\n    }\n    return jwk\n  }\n\n  /**\n   * Extracts the JWT claims present in the access token by first verifying the\n   * JWT against the server's JSON Web Key Set endpoint\n   * `/.well-known/jwks.json` which is often cached, resulting in significantly\n   * faster responses. Prefer this method over {@link #getUser} which always\n   * sends a request to the Auth server for each JWT.\n   *\n   * If the project is not using an asymmetric JWT signing key (like ECC or\n   * RSA) it always sends a request to the Auth server (similar to {@link\n   * #getUser}) to verify the JWT.\n   *\n   * @param jwt An optional specific JWT you wish to verify, not the one you\n   *            can obtain from {@link #getSession}.\n   * @param options Various additional options that allow you to customize the\n   *                behavior of this method.\n   */\n  async getClaims(\n    jwt?: string,\n    options: {\n      /**\n       * @deprecated Please use options.jwks instead.\n       */\n      keys?: JWK[]\n\n      /** If set to `true` the `exp` claim will not be validated against the current time. */\n      allowExpired?: boolean\n\n      /** If set, this JSON Web Key Set is going to have precedence over the cached value available on the server. */\n      jwks?: { keys: JWK[] }\n    } = {}\n  ): Promise<\n    | {\n        data: { claims: JwtPayload; header: JwtHeader; signature: Uint8Array }\n        error: null\n      }\n    | { data: null; error: AuthError }\n    | { data: null; error: null }\n  > {\n    try {\n      let token = jwt\n      if (!token) {\n        const { data, error } = await this.getSession()\n        if (error || !data.session) {\n          return this._returnResult({ data: null, error })\n        }\n        token = data.session.access_token\n      }\n\n      const {\n        header,\n        payload,\n        signature,\n        raw: { header: rawHeader, payload: rawPayload },\n      } = decodeJWT(token)\n\n      if (!options?.allowExpired) {\n        // Reject expired JWTs should only happen if jwt argument was passed\n        validateExp(payload.exp)\n      }\n\n      const signingKey =\n        !header.alg ||\n        header.alg.startsWith('HS') ||\n        !header.kid ||\n        !('crypto' in globalThis && 'subtle' in globalThis.crypto)\n          ? null\n          : await this.fetchJwk(header.kid, options?.keys ? { keys: options.keys } : options?.jwks)\n\n      // If symmetric algorithm or WebCrypto API is unavailable, fallback to getUser()\n      if (!signingKey) {\n        const { error } = await this.getUser(token)\n        if (error) {\n          throw error\n        }\n        // getUser succeeds so the claims in the JWT can be trusted\n        return {\n          data: {\n            claims: payload,\n            header,\n            signature,\n          },\n          error: null,\n        }\n      }\n\n      const algorithm = getAlgorithm(header.alg)\n\n      // Convert JWK to CryptoKey\n      const publicKey = await crypto.subtle.importKey('jwk', signingKey, algorithm, true, [\n        'verify',\n      ])\n\n      // Verify the signature\n      const isValid = await crypto.subtle.verify(\n        algorithm,\n        publicKey,\n        signature,\n        stringToUint8Array(`${rawHeader}.${rawPayload}`)\n      )\n\n      if (!isValid) {\n        throw new AuthInvalidJwtError('Invalid JWT signature')\n      }\n\n      // If verification succeeds, decode and return claims\n      return {\n        data: {\n          claims: payload,\n          header,\n          signature,\n        },\n        error: null,\n      }\n    } catch (error) {\n      if (isAuthError(error)) {\n        return this._returnResult({ data: null, error })\n      }\n      throw error\n    }\n  }\n}\n","import GoTrueAdminApi from './GoTrueAdminApi'\n\nconst AuthAdminApi = GoTrueAdminApi\n\nexport default AuthAdminApi\n","import GoTrueClient from './GoTrueClient'\n\nconst AuthClient = GoTrueClient\n\nexport default AuthClient\n","// constants.ts\nimport { RealtimeClientOptions } from '@supabase/realtime-js'\nimport { SupabaseAuthClientOptions } from './types'\nimport { version } from './version'\n\nlet JS_ENV = ''\n// @ts-ignore\nif (typeof Deno !== 'undefined') {\n  JS_ENV = 'deno'\n} else if (typeof document !== 'undefined') {\n  JS_ENV = 'web'\n} else if (typeof navigator !== 'undefined' && navigator.product === 'ReactNative') {\n  JS_ENV = 'react-native'\n} else {\n  JS_ENV = 'node'\n}\n\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `supabase-js-${JS_ENV}/${version}` }\n\nexport const DEFAULT_GLOBAL_OPTIONS = {\n  headers: DEFAULT_HEADERS,\n}\n\nexport const DEFAULT_DB_OPTIONS = {\n  schema: 'public',\n}\n\nexport const DEFAULT_AUTH_OPTIONS: SupabaseAuthClientOptions = {\n  autoRefreshToken: true,\n  persistSession: true,\n  detectSessionInUrl: true,\n  flowType: 'implicit',\n}\n\nexport const DEFAULT_REALTIME_OPTIONS: RealtimeClientOptions = {}\n","// Generated automatically during releases by scripts/update-version-files.ts\n// This file provides runtime access to the package version for:\n// - HTTP request headers (e.g., X-Client-Info header for API requests)\n// - Debugging and support (identifying which version is running)\n// - Telemetry and logging (version reporting in errors/analytics)\n// - Ensuring build artifacts match the published package version\nexport const version = '2.97.0'\n","type Fetch = typeof fetch\n\nexport const resolveFetch = (customFetch?: Fetch): Fetch => {\n  if (customFetch) {\n    return (...args: Parameters<Fetch>) => customFetch(...args)\n  }\n  return (...args: Parameters<Fetch>) => fetch(...args)\n}\n\nexport const resolveHeadersConstructor = () => {\n  return Headers\n}\n\nexport const fetchWithAuth = (\n  supabaseKey: string,\n  getAccessToken: () => Promise<string | null>,\n  customFetch?: Fetch\n): Fetch => {\n  const fetch = resolveFetch(customFetch)\n  const HeadersConstructor = resolveHeadersConstructor()\n\n  return async (input, init) => {\n    const accessToken = (await getAccessToken()) ?? supabaseKey\n    let headers = new HeadersConstructor(init?.headers)\n\n    if (!headers.has('apikey')) {\n      headers.set('apikey', supabaseKey)\n    }\n\n    if (!headers.has('Authorization')) {\n      headers.set('Authorization', `Bearer ${accessToken}`)\n    }\n\n    return fetch(input, { ...init, headers })\n  }\n}\n","import { AuthClient } from '@supabase/auth-js'\nimport { SupabaseAuthClientOptions } from './types'\n\nexport class SupabaseAuthClient extends AuthClient {\n  constructor(options: SupabaseAuthClientOptions) {\n    super(options)\n  }\n}\n","import type { AuthChangeEvent } from '@supabase/auth-js'\nimport { FunctionsClient } from '@supabase/functions-js'\nimport {\n  PostgrestClient,\n  type PostgrestFilterBuilder,\n  type PostgrestQueryBuilder,\n} from '@supabase/postgrest-js'\nimport {\n  type RealtimeChannel,\n  type RealtimeChannelOptions,\n  RealtimeClient,\n  type RealtimeClientOptions,\n} from '@supabase/realtime-js'\nimport { StorageClient as SupabaseStorageClient } from '@supabase/storage-js'\nimport {\n  DEFAULT_AUTH_OPTIONS,\n  DEFAULT_DB_OPTIONS,\n  DEFAULT_GLOBAL_OPTIONS,\n  DEFAULT_REALTIME_OPTIONS,\n} from './lib/constants'\nimport { fetchWithAuth } from './lib/fetch'\nimport { applySettingDefaults, validateSupabaseUrl } from './lib/helpers'\nimport { SupabaseAuthClient } from './lib/SupabaseAuthClient'\nimport type {\n  Fetch,\n  GenericSchema,\n  SupabaseAuthClientOptions,\n  SupabaseClientOptions,\n} from './lib/types'\nimport { GetRpcFunctionFilterBuilderByArgs } from './lib/rest/types/common/rpc'\n\n/**\n * Supabase Client.\n *\n * An isomorphic Javascript client for interacting with Postgres.\n */\nexport default class SupabaseClient<\n  Database = any,\n  // The second type parameter is also used for specifying db_schema, so we\n  // support both cases.\n  // TODO: Allow setting db_schema from ClientOptions.\n  SchemaNameOrClientOptions extends\n    | (string & keyof Omit<Database, '__InternalSupabase'>)\n    | { PostgrestVersion: string } = 'public' extends keyof Omit<Database, '__InternalSupabase'>\n    ? 'public'\n    : string & keyof Omit<Database, '__InternalSupabase'>,\n  SchemaName extends string &\n    keyof Omit<Database, '__InternalSupabase'> = SchemaNameOrClientOptions extends string &\n    keyof Omit<Database, '__InternalSupabase'>\n    ? SchemaNameOrClientOptions\n    : 'public' extends keyof Omit<Database, '__InternalSupabase'>\n      ? 'public'\n      : string & keyof Omit<Omit<Database, '__InternalSupabase'>, '__InternalSupabase'>,\n  Schema extends Omit<Database, '__InternalSupabase'>[SchemaName] extends GenericSchema\n    ? Omit<Database, '__InternalSupabase'>[SchemaName]\n    : never = Omit<Database, '__InternalSupabase'>[SchemaName] extends GenericSchema\n    ? Omit<Database, '__InternalSupabase'>[SchemaName]\n    : never,\n  ClientOptions extends { PostgrestVersion: string } = SchemaNameOrClientOptions extends string &\n    keyof Omit<Database, '__InternalSupabase'>\n    ? // If the version isn't explicitly set, look for it in the __InternalSupabase object to infer the right version\n      Database extends { __InternalSupabase: { PostgrestVersion: string } }\n      ? Database['__InternalSupabase']\n      : // otherwise default to 12\n        { PostgrestVersion: '12' }\n    : SchemaNameOrClientOptions extends { PostgrestVersion: string }\n      ? SchemaNameOrClientOptions\n      : never,\n> {\n  /**\n   * Supabase Auth allows you to create and manage user sessions for access to data that is secured by access policies.\n   */\n  auth: SupabaseAuthClient\n  realtime: RealtimeClient\n  /**\n   * Supabase Storage allows you to manage user-generated content, such as photos or videos.\n   */\n  storage: SupabaseStorageClient\n\n  protected realtimeUrl: URL\n  protected authUrl: URL\n  protected storageUrl: URL\n  protected functionsUrl: URL\n  protected rest: PostgrestClient<Database, ClientOptions, SchemaName>\n  protected storageKey: string\n  protected fetch?: Fetch\n  protected changedAccessToken?: string\n  protected accessToken?: () => Promise<string | null>\n\n  protected headers: Record<string, string>\n\n  /**\n   * Create a new client for use in the browser.\n   * @param supabaseUrl The unique Supabase URL which is supplied when you create a new project in your project dashboard.\n   * @param supabaseKey The unique Supabase Key which is supplied when you create a new project in your project dashboard.\n   * @param options.db.schema You can switch in between schemas. The schema needs to be on the list of exposed schemas inside Supabase.\n   * @param options.auth.autoRefreshToken Set to \"true\" if you want to automatically refresh the token before expiring.\n   * @param options.auth.persistSession Set to \"true\" if you want to automatically save the user session into local storage.\n   * @param options.auth.detectSessionInUrl Set to \"true\" if you want to automatically detects OAuth grants in the URL and signs in the user.\n   * @param options.realtime Options passed along to realtime-js constructor.\n   * @param options.storage Options passed along to the storage-js constructor.\n   * @param options.global.fetch A custom fetch implementation.\n   * @param options.global.headers Any additional headers to send with each network request.\n   * @example\n   * ```ts\n   * import { createClient } from '@supabase/supabase-js'\n   *\n   * const supabase = createClient('https://xyzcompany.supabase.co', 'public-anon-key')\n   * const { data } = await supabase.from('profiles').select('*')\n   * ```\n   */\n  constructor(\n    protected supabaseUrl: string,\n    protected supabaseKey: string,\n    options?: SupabaseClientOptions<SchemaName>\n  ) {\n    const baseUrl = validateSupabaseUrl(supabaseUrl)\n    if (!supabaseKey) throw new Error('supabaseKey is required.')\n\n    this.realtimeUrl = new URL('realtime/v1', baseUrl)\n    this.realtimeUrl.protocol = this.realtimeUrl.protocol.replace('http', 'ws')\n    this.authUrl = new URL('auth/v1', baseUrl)\n    this.storageUrl = new URL('storage/v1', baseUrl)\n    this.functionsUrl = new URL('functions/v1', baseUrl)\n\n    // default storage key uses the supabase project ref as a namespace\n    const defaultStorageKey = `sb-${baseUrl.hostname.split('.')[0]}-auth-token`\n    const DEFAULTS = {\n      db: DEFAULT_DB_OPTIONS,\n      realtime: DEFAULT_REALTIME_OPTIONS,\n      auth: { ...DEFAULT_AUTH_OPTIONS, storageKey: defaultStorageKey },\n      global: DEFAULT_GLOBAL_OPTIONS,\n    }\n\n    const settings = applySettingDefaults(options ?? {}, DEFAULTS)\n\n    this.storageKey = settings.auth.storageKey ?? ''\n    this.headers = settings.global.headers ?? {}\n\n    if (!settings.accessToken) {\n      this.auth = this._initSupabaseAuthClient(\n        settings.auth ?? {},\n        this.headers,\n        settings.global.fetch\n      )\n    } else {\n      this.accessToken = settings.accessToken\n\n      this.auth = new Proxy<SupabaseAuthClient>({} as any, {\n        get: (_, prop) => {\n          throw new Error(\n            `@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(\n              prop\n            )} is not possible`\n          )\n        },\n      })\n    }\n\n    this.fetch = fetchWithAuth(supabaseKey, this._getAccessToken.bind(this), settings.global.fetch)\n    this.realtime = this._initRealtimeClient({\n      headers: this.headers,\n      accessToken: this._getAccessToken.bind(this),\n      ...settings.realtime,\n    })\n    if (this.accessToken) {\n      // Start auth immediately to avoid race condition with channel subscriptions\n      // Wrap Promise to avoid Firefox extension cross-context Promise access errors\n      Promise.resolve(this.accessToken())\n        .then((token) => this.realtime.setAuth(token))\n        .catch((e) => console.warn('Failed to set initial Realtime auth token:', e))\n    }\n\n    this.rest = new PostgrestClient(new URL('rest/v1', baseUrl).href, {\n      headers: this.headers,\n      schema: settings.db.schema,\n      fetch: this.fetch,\n      timeout: settings.db.timeout,\n      urlLengthLimit: settings.db.urlLengthLimit,\n    })\n\n    this.storage = new SupabaseStorageClient(\n      this.storageUrl.href,\n      this.headers,\n      this.fetch,\n      options?.storage\n    )\n\n    if (!settings.accessToken) {\n      this._listenForAuthEvents()\n    }\n  }\n\n  /**\n   * Supabase Functions allows you to deploy and invoke edge functions.\n   */\n  get functions(): FunctionsClient {\n    return new FunctionsClient(this.functionsUrl.href, {\n      headers: this.headers,\n      customFetch: this.fetch,\n    })\n  }\n\n  // NOTE: signatures must be kept in sync with PostgrestClient.from\n  from<\n    TableName extends string & keyof Schema['Tables'],\n    Table extends Schema['Tables'][TableName],\n  >(relation: TableName): PostgrestQueryBuilder<ClientOptions, Schema, Table, TableName>\n  from<ViewName extends string & keyof Schema['Views'], View extends Schema['Views'][ViewName]>(\n    relation: ViewName\n  ): PostgrestQueryBuilder<ClientOptions, Schema, View, ViewName>\n  /**\n   * Perform a query on a table or a view.\n   *\n   * @param relation - The table or view name to query\n   */\n  from(relation: string): PostgrestQueryBuilder<ClientOptions, Schema, any> {\n    return this.rest.from(relation)\n  }\n\n  // NOTE: signatures must be kept in sync with PostgrestClient.schema\n  /**\n   * Select a schema to query or perform an function (rpc) call.\n   *\n   * The schema needs to be on the list of exposed schemas inside Supabase.\n   *\n   * @param schema - The schema to query\n   */\n  schema<DynamicSchema extends string & keyof Omit<Database, '__InternalSupabase'>>(\n    schema: DynamicSchema\n  ): PostgrestClient<\n    Database,\n    ClientOptions,\n    DynamicSchema,\n    Database[DynamicSchema] extends GenericSchema ? Database[DynamicSchema] : any\n  > {\n    return this.rest.schema<DynamicSchema>(schema)\n  }\n\n  // NOTE: signatures must be kept in sync with PostgrestClient.rpc\n  /**\n   * Perform a function call.\n   *\n   * @param fn - The function name to call\n   * @param args - The arguments to pass to the function call\n   * @param options - Named parameters\n   * @param options.head - When set to `true`, `data` will not be returned.\n   * Useful if you only need the count.\n   * @param options.get - When set to `true`, the function will be called with\n   * read-only access mode.\n   * @param options.count - Count algorithm to use to count rows returned by the\n   * function. Only applicable for [set-returning\n   * functions](https://www.postgresql.org/docs/current/functions-srf.html).\n   *\n   * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n   * hood.\n   *\n   * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n   * statistics under the hood.\n   *\n   * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n   * numbers.\n   */\n  rpc<\n    FnName extends string & keyof Schema['Functions'],\n    Args extends Schema['Functions'][FnName]['Args'] = never,\n    FilterBuilder extends GetRpcFunctionFilterBuilderByArgs<\n      Schema,\n      FnName,\n      Args\n    > = GetRpcFunctionFilterBuilderByArgs<Schema, FnName, Args>,\n  >(\n    fn: FnName,\n    args: Args = {} as Args,\n    options: {\n      head?: boolean\n      get?: boolean\n      count?: 'exact' | 'planned' | 'estimated'\n    } = {\n      head: false,\n      get: false,\n      count: undefined,\n    }\n  ): PostgrestFilterBuilder<\n    ClientOptions,\n    Schema,\n    FilterBuilder['Row'],\n    FilterBuilder['Result'],\n    FilterBuilder['RelationName'],\n    FilterBuilder['Relationships'],\n    'RPC'\n  > {\n    return this.rest.rpc(fn, args, options) as unknown as PostgrestFilterBuilder<\n      ClientOptions,\n      Schema,\n      FilterBuilder['Row'],\n      FilterBuilder['Result'],\n      FilterBuilder['RelationName'],\n      FilterBuilder['Relationships'],\n      'RPC'\n    >\n  }\n\n  /**\n   * Creates a Realtime channel with Broadcast, Presence, and Postgres Changes.\n   *\n   * @param {string} name - The name of the Realtime channel.\n   * @param {Object} opts - The options to pass to the Realtime channel.\n   *\n   */\n  channel(name: string, opts: RealtimeChannelOptions = { config: {} }): RealtimeChannel {\n    return this.realtime.channel(name, opts)\n  }\n\n  /**\n   * Returns all Realtime channels.\n   */\n  getChannels(): RealtimeChannel[] {\n    return this.realtime.getChannels()\n  }\n\n  /**\n   * Unsubscribes and removes Realtime channel from Realtime client.\n   *\n   * @param {RealtimeChannel} channel - The name of the Realtime channel.\n   *\n   */\n  removeChannel(channel: RealtimeChannel): Promise<'ok' | 'timed out' | 'error'> {\n    return this.realtime.removeChannel(channel)\n  }\n\n  /**\n   * Unsubscribes and removes all Realtime channels from Realtime client.\n   */\n  removeAllChannels(): Promise<('ok' | 'timed out' | 'error')[]> {\n    return this.realtime.removeAllChannels()\n  }\n\n  private async _getAccessToken() {\n    if (this.accessToken) {\n      return await this.accessToken()\n    }\n\n    const { data } = await this.auth.getSession()\n\n    return data.session?.access_token ?? this.supabaseKey\n  }\n\n  private _initSupabaseAuthClient(\n    {\n      autoRefreshToken,\n      persistSession,\n      detectSessionInUrl,\n      storage,\n      userStorage,\n      storageKey,\n      flowType,\n      lock,\n      debug,\n      throwOnError,\n    }: SupabaseAuthClientOptions,\n    headers?: Record<string, string>,\n    fetch?: Fetch\n  ) {\n    const authHeaders = {\n      Authorization: `Bearer ${this.supabaseKey}`,\n      apikey: `${this.supabaseKey}`,\n    }\n    return new SupabaseAuthClient({\n      url: this.authUrl.href,\n      headers: { ...authHeaders, ...headers },\n      storageKey: storageKey,\n      autoRefreshToken,\n      persistSession,\n      detectSessionInUrl,\n      storage,\n      userStorage,\n      flowType,\n      lock,\n      debug,\n      throwOnError,\n      fetch,\n      // auth checks if there is a custom authorizaiton header using this flag\n      // so it knows whether to return an error when getUser is called with no session\n      hasCustomAuthorizationHeader: Object.keys(this.headers).some(\n        (key) => key.toLowerCase() === 'authorization'\n      ),\n    })\n  }\n\n  private _initRealtimeClient(options: RealtimeClientOptions) {\n    return new RealtimeClient(this.realtimeUrl.href, {\n      ...options,\n      params: { ...{ apikey: this.supabaseKey }, ...options?.params },\n    })\n  }\n\n  private _listenForAuthEvents() {\n    const data = this.auth.onAuthStateChange((event, session) => {\n      this._handleTokenChanged(event, 'CLIENT', session?.access_token)\n    })\n    return data\n  }\n\n  private _handleTokenChanged(\n    event: AuthChangeEvent,\n    source: 'CLIENT' | 'STORAGE',\n    token?: string\n  ) {\n    if (\n      (event === 'TOKEN_REFRESHED' || event === 'SIGNED_IN') &&\n      this.changedAccessToken !== token\n    ) {\n      this.changedAccessToken = token\n      this.realtime.setAuth(token)\n    } else if (event === 'SIGNED_OUT') {\n      this.realtime.setAuth()\n      if (source == 'STORAGE') this.auth.signOut()\n      this.changedAccessToken = undefined\n    }\n  }\n}\n","// helpers.ts\nimport { SupabaseClientOptions } from './types'\n\nexport function uuid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = (Math.random() * 16) | 0,\n      v = c == 'x' ? r : (r & 0x3) | 0x8\n    return v.toString(16)\n  })\n}\n\nexport function ensureTrailingSlash(url: string): string {\n  return url.endsWith('/') ? url : url + '/'\n}\n\nexport const isBrowser = () => typeof window !== 'undefined'\n\nexport function applySettingDefaults<\n  Database = any,\n  SchemaName extends string & keyof Database = 'public' extends keyof Database\n    ? 'public'\n    : string & keyof Database,\n>(\n  options: SupabaseClientOptions<SchemaName>,\n  defaults: SupabaseClientOptions<any>\n): Required<SupabaseClientOptions<SchemaName>> {\n  const {\n    db: dbOptions,\n    auth: authOptions,\n    realtime: realtimeOptions,\n    global: globalOptions,\n  } = options\n  const {\n    db: DEFAULT_DB_OPTIONS,\n    auth: DEFAULT_AUTH_OPTIONS,\n    realtime: DEFAULT_REALTIME_OPTIONS,\n    global: DEFAULT_GLOBAL_OPTIONS,\n  } = defaults\n\n  const result: Required<SupabaseClientOptions<SchemaName>> = {\n    db: {\n      ...DEFAULT_DB_OPTIONS,\n      ...dbOptions,\n    },\n    auth: {\n      ...DEFAULT_AUTH_OPTIONS,\n      ...authOptions,\n    },\n    realtime: {\n      ...DEFAULT_REALTIME_OPTIONS,\n      ...realtimeOptions,\n    },\n    storage: {},\n    global: {\n      ...DEFAULT_GLOBAL_OPTIONS,\n      ...globalOptions,\n      headers: {\n        ...(DEFAULT_GLOBAL_OPTIONS?.headers ?? {}),\n        ...(globalOptions?.headers ?? {}),\n      },\n    },\n    accessToken: async () => '',\n  }\n\n  if (options.accessToken) {\n    result.accessToken = options.accessToken\n  } else {\n    // hack around Required<>\n    delete (result as any).accessToken\n  }\n\n  return result\n}\n\n/**\n * Validates a Supabase client URL\n *\n * @param {string} supabaseUrl - The Supabase client URL string.\n * @returns {URL} - The validated base URL.\n * @throws {Error}\n */\nexport function validateSupabaseUrl(supabaseUrl: string): URL {\n  const trimmedUrl = supabaseUrl?.trim()\n\n  if (!trimmedUrl) {\n    throw new Error('supabaseUrl is required.')\n  }\n\n  if (!trimmedUrl.match(/^https?:\\/\\//i)) {\n    throw new Error('Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.')\n  }\n\n  try {\n    return new URL(ensureTrailingSlash(trimmedUrl))\n  } catch {\n    throw Error('Invalid supabaseUrl: Provided URL is malformed.')\n  }\n}\n","import SupabaseClient from './SupabaseClient'\nimport type { SupabaseClientOptions } from './lib/types'\n\nexport * from '@supabase/auth-js'\nexport type { User as AuthUser, Session as AuthSession } from '@supabase/auth-js'\nexport type {\n  PostgrestResponse,\n  PostgrestSingleResponse,\n  PostgrestMaybeSingleResponse,\n} from '@supabase/postgrest-js'\nexport { PostgrestError } from '@supabase/postgrest-js'\nexport type { FunctionInvokeOptions } from '@supabase/functions-js'\nexport {\n  FunctionsHttpError,\n  FunctionsFetchError,\n  FunctionsRelayError,\n  FunctionsError,\n  FunctionRegion,\n} from '@supabase/functions-js'\nexport * from '@supabase/realtime-js'\nexport { default as SupabaseClient } from './SupabaseClient'\nexport type {\n  SupabaseClientOptions,\n  QueryResult,\n  QueryData,\n  QueryError,\n  DatabaseWithoutInternals,\n} from './lib/types'\n\n/**\n * Creates a new Supabase Client.\n *\n * @example\n * ```ts\n * import { createClient } from '@supabase/supabase-js'\n *\n * const supabase = createClient('https://xyzcompany.supabase.co', 'public-anon-key')\n * const { data, error } = await supabase.from('profiles').select('*')\n * ```\n */\nexport const createClient = <\n  Database = any,\n  SchemaNameOrClientOptions extends\n    | (string & keyof Omit<Database, '__InternalSupabase'>)\n    | { PostgrestVersion: string } = 'public' extends keyof Omit<Database, '__InternalSupabase'>\n    ? 'public'\n    : string & keyof Omit<Database, '__InternalSupabase'>,\n  SchemaName extends string &\n    keyof Omit<Database, '__InternalSupabase'> = SchemaNameOrClientOptions extends string &\n    keyof Omit<Database, '__InternalSupabase'>\n    ? SchemaNameOrClientOptions\n    : 'public' extends keyof Omit<Database, '__InternalSupabase'>\n      ? 'public'\n      : string & keyof Omit<Omit<Database, '__InternalSupabase'>, '__InternalSupabase'>,\n>(\n  supabaseUrl: string,\n  supabaseKey: string,\n  options?: SupabaseClientOptions<SchemaName>\n): SupabaseClient<Database, SchemaNameOrClientOptions, SchemaName> => {\n  return new SupabaseClient<Database, SchemaNameOrClientOptions, SchemaName>(\n    supabaseUrl,\n    supabaseKey,\n    options\n  )\n}\n\n// Check for Node.js <= 18 deprecation\nfunction shouldShowDeprecationWarning(): boolean {\n  // Skip in browser environments\n  if (typeof window !== 'undefined') {\n    return false\n  }\n\n  // Skip if process is not available (e.g., Edge Runtime)\n  // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n  const _process = (globalThis as any)['process']\n  if (!_process) {\n    return false\n  }\n\n  const processVersion = _process['version']\n  if (processVersion === undefined || processVersion === null) {\n    return false\n  }\n\n  const versionMatch = processVersion.match(/^v(\\d+)\\./)\n  if (!versionMatch) {\n    return false\n  }\n\n  const majorVersion = parseInt(versionMatch[1], 10)\n  return majorVersion <= 18\n}\n\nif (shouldShowDeprecationWarning()) {\n  console.warn(\n    `  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. ` +\n      `Please upgrade to Node.js 20 or later. ` +\n      `For more information, visit: https://github.com/orgs/supabase/discussions/37217`\n  )\n}\n","import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.REACT_APP_SUPABASE_URL || '';\nconst supabaseAnonKey = process.env.REACT_APP_SUPABASE_ANON_KEY || '';\n\nexport const supabase = (supabaseUrl && supabaseAnonKey)\n  ? createClient(supabaseUrl, supabaseAnonKey)\n  : null;\n\n/**\n * Submit a game score to the leaderboard.\n */\nexport async function submitScore({\n  playerName,\n  classPeriod,\n  faction,\n  finalScore,\n  baseScore,\n  objectiveBonus,\n  factionMultiplier,\n  nationalismMeter,\n  nativeResistance,\n  navalDominance,\n  knowledgeCorrect,\n  knowledgeTotal,\n  battlesWon,\n  battlesFought,\n  territoriesHeld,\n  roundsPlayed,\n  gameOverReason,\n  difficulty,\n  sessionId,\n  classId,\n}) {\n  if (!supabase) return { error: 'Supabase not configured' };\n\n  const { data, error } = await supabase\n    .from('scores')\n    .insert([{\n      player_name: playerName,\n      class_period: classPeriod,\n      faction,\n      final_score: finalScore,\n      base_score: baseScore,\n      objective_bonus: objectiveBonus,\n      faction_multiplier: factionMultiplier,\n      nationalism_meter: nationalismMeter,\n      native_resistance: nativeResistance,\n      naval_dominance: navalDominance,\n      knowledge_correct: knowledgeCorrect,\n      knowledge_total: knowledgeTotal,\n      battles_won: battlesWon,\n      battles_fought: battlesFought,\n      territories_held: territoriesHeld,\n      rounds_played: roundsPlayed,\n      game_over_reason: gameOverReason || 'treaty',\n      difficulty: difficulty || 'medium',\n      session_id: sessionId || null,\n      class_id: classId || null,\n    }])\n    .select();\n\n  return { data, error };\n}\n\n/**\n * Submit quiz gate retry data after a student completes the pre-game quiz.\n * Inserts one row per question (8 rows total).\n */\nexport async function submitQuizGateResults({\n  sessionId,\n  playerName,\n  classPeriod,\n  gameMode,\n  retries,\n  classId,\n}) {\n  if (!supabase) return { error: 'Supabase not configured' };\n\n  const rows = Object.entries(retries).map(([questionId, retryCount]) => ({\n    session_id: sessionId,\n    player_name: playerName,\n    class_period: classPeriod || '',\n    game_mode: gameMode || 'historian',\n    question_id: questionId,\n    retries: retryCount,\n    class_id: classId || null,\n  }));\n\n  const { data, error } = await supabase\n    .from('quiz_gate_results')\n    .insert(rows)\n    .select();\n\n  return { data, error };\n}\n\n/**\n * Fetch quiz gate analytics, scoped to given class IDs.\n */\nexport async function fetchQuizGateStats(classIds) {\n  if (!supabase) return { data: null, error: 'Supabase not configured' };\n\n  let query = supabase\n    .from('quiz_gate_results')\n    .select('*')\n    .order('created_at', { ascending: false });\n\n  if (classIds && classIds.length > 0) {\n    query = query.in('class_id', classIds);\n  }\n\n  const { data, error } = await query;\n\n  if (error) return { data: null, error };\n\n  return { data: data || [], error: null };\n}\n\n/**\n * Fetch leaderboard scores. Optionally filter by class period and/or faction.\n */\nexport async function fetchLeaderboard({ classPeriod, faction, limit = 25 } = {}) {\n  if (!supabase) return { data: [], error: 'Supabase not configured' };\n\n  let query = supabase\n    .from('scores')\n    .select('*')\n    .order('final_score', { ascending: false })\n    .limit(limit);\n\n  if (classPeriod) query = query.eq('class_period', classPeriod);\n  if (faction) query = query.eq('faction', faction);\n\n  const { data, error } = await query;\n  return { data: data || [], error };\n}\n\n// ============================================\n// Auth Functions\n// ============================================\n\n/**\n * Sign up a new teacher with email and password.\n */\nexport async function signUpTeacher(email, password) {\n  if (!supabase) return { data: null, error: 'Supabase not configured' };\n  const { data, error } = await supabase.auth.signUp({ email, password });\n  return { data, error };\n}\n\n/**\n * Sign in a teacher with email and password.\n */\nexport async function signInWithPassword(email, password) {\n  if (!supabase) return { data: null, error: 'Supabase not configured' };\n  const { data, error } = await supabase.auth.signInWithPassword({ email, password });\n  return { data, error };\n}\n\n/**\n * Send a magic link to the teacher's email.\n */\nexport async function signInWithMagicLink(email) {\n  if (!supabase) return { data: null, error: 'Supabase not configured' };\n  const { data, error } = await supabase.auth.signInWithOtp({\n    email,\n    options: { emailRedirectTo: `${window.location.origin}/` },\n  });\n  return { data, error };\n}\n\n/**\n * Sign out the current teacher.\n */\nexport async function signOut() {\n  if (!supabase) return { error: 'Supabase not configured' };\n  const { error } = await supabase.auth.signOut();\n  return { error };\n}\n\n/**\n * Get current auth session.\n */\nexport async function getSession() {\n  if (!supabase) return { data: null, error: 'Supabase not configured' };\n  const { data, error } = await supabase.auth.getSession();\n  return { data, error };\n}\n\n/**\n * Subscribe to auth state changes. Returns an unsubscribe function.\n */\nexport function onAuthStateChange(callback) {\n  if (!supabase) return { data: { subscription: { unsubscribe: () => {} } } };\n  return supabase.auth.onAuthStateChange(callback);\n}\n\n// ============================================\n// Teacher Profile Functions\n// ============================================\n\n/**\n * Get teacher profile for the current authenticated user.\n */\nexport async function getTeacherProfile(userId) {\n  if (!supabase) return { data: null, error: 'Supabase not configured' };\n  const { data, error } = await supabase\n    .from('teachers')\n    .select('*')\n    .eq('id', userId)\n    .single();\n  return { data, error };\n}\n\n/**\n * Create teacher profile (called on first login).\n */\nexport async function createTeacherProfile({ userId, displayName, email }) {\n  if (!supabase) return { data: null, error: 'Supabase not configured' };\n  const { data, error } = await supabase\n    .from('teachers')\n    .insert([{ id: userId, display_name: displayName, email }])\n    .select()\n    .single();\n  return { data, error };\n}\n\n// ============================================\n// Class Management Functions\n// ============================================\n\n/**\n * Generate a random 6-character alphanumeric class code.\n */\nfunction generateClassCode() {\n  const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789'; // No I/1/O/0 to avoid confusion\n  let code = '';\n  for (let i = 0; i < 6; i++) {\n    code += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return code;\n}\n\n/**\n * Create a new class for the authenticated teacher.\n */\nexport async function createClass({ teacherId, name }) {\n  if (!supabase) return { data: null, error: 'Supabase not configured' };\n\n  // Try up to 3 times in case of code collision\n  for (let attempt = 0; attempt < 3; attempt++) {\n    const code = generateClassCode();\n    const { data, error } = await supabase\n      .from('classes')\n      .insert([{ teacher_id: teacherId, name, code }])\n      .select()\n      .single();\n\n    if (!error) return { data, error: null };\n    if (!error.message?.includes('duplicate')) return { data: null, error };\n  }\n  return { data: null, error: { message: 'Failed to generate unique code' } };\n}\n\n/**\n * Fetch all classes for the authenticated teacher.\n */\nexport async function fetchTeacherClasses(teacherId) {\n  if (!supabase) return { data: [], error: 'Supabase not configured' };\n  const { data, error } = await supabase\n    .from('classes')\n    .select('*')\n    .eq('teacher_id', teacherId)\n    .order('created_at', { ascending: true });\n  return { data: data || [], error };\n}\n\n/**\n * Validate a class code entered by a student.\n * Returns the class record if valid, null if not found.\n */\nexport async function validateClassCode(code) {\n  if (!supabase) return { data: null, error: 'Supabase not configured' };\n  const { data, error } = await supabase\n    .from('classes')\n    .select('id, name, code')\n    .eq('code', code.toUpperCase().trim())\n    .single();\n\n  if (error?.code === 'PGRST116') return { data: null, error: null }; // Not found\n  return { data, error };\n}\n\n/**\n * Retroactively link a student's quiz gate results and score to a class\n * via their session_id. Used when a student enters a class code at score submission.\n */\nexport async function linkSessionToClass({ sessionId, classId }) {\n  if (!supabase || !sessionId || !classId) return { error: 'Missing params' };\n\n  // Update quiz_gate_results\n  await supabase\n    .from('quiz_gate_results')\n    .update({ class_id: classId })\n    .eq('session_id', sessionId);\n\n  // Update scores\n  await supabase\n    .from('scores')\n    .update({ class_id: classId })\n    .eq('session_id', sessionId);\n\n  return { error: null };\n}\n\n/**\n * Fetch aggregate stats for the teacher dashboard, scoped to given class IDs.\n */\nexport async function fetchTeacherStats(classIds) {\n  if (!supabase) return { data: null, error: 'Supabase not configured' };\n\n  let query = supabase\n    .from('scores')\n    .select('*')\n    .order('created_at', { ascending: false });\n\n  if (classIds && classIds.length > 0) {\n    query = query.in('class_id', classIds);\n  }\n\n  const { data, error } = await query;\n\n  if (error) return { data: null, error };\n\n  const scores = data || [];\n\n  // Aggregate by class_id (replaces old period aggregation for scoped view)\n  const byClass = {};\n  const byFaction = { us: [], british: [], native: [] };\n\n  for (const s of scores) {\n    const classId = s.class_id || 'unassigned';\n    if (!byClass[classId]) byClass[classId] = [];\n    byClass[classId].push(s);\n    if (byFaction[s.faction]) byFaction[s.faction].push(s);\n  }\n\n  const classStats = Object.entries(byClass).map(([classId, entries]) => ({\n    classId,\n    count: entries.length,\n    avgScore: Math.round(entries.reduce((a, e) => a + e.final_score, 0) / entries.length),\n    avgQuizPercent: entries.filter(e => e.knowledge_total > 0).length > 0\n      ? Math.round(\n          entries.filter(e => e.knowledge_total > 0)\n            .reduce((a, e) => a + (e.knowledge_correct / e.knowledge_total) * 100, 0)\n          / entries.filter(e => e.knowledge_total > 0).length\n        )\n      : 0,\n    topScore: Math.max(...entries.map(e => e.final_score)),\n  }));\n\n  const factionStats = Object.entries(byFaction).map(([faction, entries]) => ({\n    faction,\n    count: entries.length,\n    avgScore: entries.length > 0\n      ? Math.round(entries.reduce((a, e) => a + e.final_score, 0) / entries.length)\n      : 0,\n  }));\n\n  return {\n    data: {\n      totalGames: scores.length,\n      allScores: scores,\n      classStats,\n      factionStats,\n    },\n    error: null,\n  };\n}\n","import React, { useState } from 'react';\nimport { submitScore, supabase, validateClassCode, linkSessionToClass } from '../lib/supabase';\n\nconst factionLabels = {\n  us: 'United States',\n  british: 'British/Canada',\n  native: 'Native Coalition',\n};\n\nfunction getGameFingerprint(playerName, playerFaction, finalScore, roundsPlayed, battleStats) {\n  return `${playerName}|${playerFaction}|${finalScore}|${roundsPlayed}|${battleStats.won}|${battleStats.fought}`;\n}\n\nfunction wasAlreadySubmitted(fingerprint) {\n  try {\n    const submitted = JSON.parse(localStorage.getItem('war1812_submitted_scores') || '[]');\n    return submitted.includes(fingerprint);\n  } catch { return false; }\n}\n\nfunction markAsSubmitted(fingerprint) {\n  try {\n    const submitted = JSON.parse(localStorage.getItem('war1812_submitted_scores') || '[]');\n    submitted.push(fingerprint);\n    // Keep only last 20 to avoid unbounded growth\n    if (submitted.length > 20) submitted.shift();\n    localStorage.setItem('war1812_submitted_scores', JSON.stringify(submitted));\n  } catch { /* ignore */ }\n}\n\nexport default function ScoreSubmission({\n  playerName,\n  classPeriod,\n  playerFaction,\n  finalScore,\n  scores,\n  objectiveBonus,\n  factionMultiplier,\n  nationalismMeter,\n  nativeResistance,\n  navalDominance,\n  knowledgeCheckResults,\n  battleStats,\n  playerTerritoryCount,\n  roundsPlayed,\n  gameOverReason,\n  difficulty,\n  sessionId,\n  classId,\n  onSubmitted,\n}) {\n  const fingerprint = getGameFingerprint(playerName, playerFaction, finalScore, roundsPlayed, battleStats);\n  const alreadySubmitted = wasAlreadySubmitted(fingerprint);\n  const [status, setStatus] = useState(alreadySubmitted ? 'success' : 'idle'); // idle | submitting | success | error\n  const [errorMsg, setErrorMsg] = useState('');\n  const [lateClassCode, setLateClassCode] = useState('');\n  const [lateClassData, setLateClassData] = useState(null);\n  const [lateClassError, setLateClassError] = useState('');\n  const [lateValidating, setLateValidating] = useState(false);\n\n  const handleLateValidate = async (code) => {\n    if (!code.trim()) { setLateClassData(null); setLateClassError(''); return; }\n    setLateValidating(true);\n    setLateClassError('');\n    const { data, error } = await validateClassCode(code);\n    setLateValidating(false);\n    if (error) { setLateClassError('Could not validate code.'); }\n    else if (!data) { setLateClassError('Code not found'); setLateClassData(null); }\n    else { setLateClassData(data); setLateClassError(''); }\n  };\n\n  if (!supabase) {\n    return null; // Don't show if Supabase isn't configured\n  }\n\n  const handleSubmit = async () => {\n    setStatus('submitting');\n    setErrorMsg('');\n\n    const effectiveClassId = classId || (lateClassData ? lateClassData.id : null);\n\n    const { error } = await submitScore({\n      playerName,\n      classPeriod,\n      faction: playerFaction,\n      finalScore,\n      baseScore: scores[playerFaction] || 0,\n      objectiveBonus,\n      factionMultiplier,\n      nationalismMeter: nationalismMeter || 0,\n      nativeResistance: nativeResistance || 0,\n      navalDominance: navalDominance || 0,\n      knowledgeCorrect: knowledgeCheckResults.correct,\n      knowledgeTotal: knowledgeCheckResults.total,\n      battlesWon: battleStats.won,\n      battlesFought: battleStats.fought,\n      territoriesHeld: playerTerritoryCount,\n      roundsPlayed,\n      gameOverReason,\n      difficulty,\n      sessionId,\n      classId: effectiveClassId,\n    });\n\n    if (error) {\n      setStatus('error');\n      setErrorMsg(typeof error === 'string' ? error : error.message || 'Submission failed');\n    } else {\n      setStatus('success');\n      markAsSubmitted(fingerprint);\n      // Retroactively link quiz gate data if late join\n      if (!classId && effectiveClassId && sessionId) {\n        linkSessionToClass({ sessionId, classId: effectiveClassId }).catch(() => {});\n      }\n      if (onSubmitted) onSubmitted();\n    }\n  };\n\n  if (status === 'success') {\n    return (\n      <div className=\"bg-green-900/15 border border-green-500/25 rounded-lg p-4 text-center\">\n        <p className=\"text-green-400 font-display text-sm font-bold tracking-wide\">\n          {alreadySubmitted ? 'Score already on the leaderboard' : 'Score submitted to the leaderboard!'}\n        </p>\n        <p className=\"text-parchment-dark/50 text-xs mt-1 font-body\">\n          {playerName} &mdash; {factionLabels[playerFaction]} &mdash; {finalScore} pts\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-black/20 rounded-lg p-4 text-center border border-parchment-dark/8\">\n      {status === 'error' && (\n        <p className=\"text-red-400 text-sm mb-2 font-body\">{errorMsg}</p>\n      )}\n      {/* Late join: show class code field if student has no class */}\n      {!classId && (\n        <div className=\"mb-3 text-left\">\n          <p className=\"text-parchment-dark/50 text-xs font-body mb-1.5\">\n            Have a class code from your teacher?\n          </p>\n          <div className=\"flex gap-2\">\n            <input\n              type=\"text\"\n              value={lateClassCode}\n              onChange={(e) => {\n                const val = e.target.value.toUpperCase().slice(0, 6);\n                setLateClassCode(val);\n                if (val.length === 6) handleLateValidate(val);\n                else { setLateClassData(null); setLateClassError(''); }\n              }}\n              placeholder=\"ABC123\"\n              maxLength={6}\n              className=\"flex-1 bg-war-ink/50 border border-parchment-dark/15 rounded px-3 py-2 text-parchment/90\n                         placeholder-parchment-dark/30 font-body font-mono tracking-widest text-center uppercase text-sm\n                         focus:border-war-gold/40 focus:outline-none transition-colors\"\n            />\n          </div>\n          {lateValidating && <p className=\"text-parchment-dark/40 text-xs mt-1 font-body italic\">Checking...</p>}\n          {lateClassError && <p className=\"text-red-400 text-xs mt-1 font-body\">{lateClassError}</p>}\n          {lateClassData && <p className=\"text-green-400 text-xs mt-1 font-body\">Will submit to: {lateClassData.name}</p>}\n        </div>\n      )}\n      <button\n        onClick={handleSubmit}\n        disabled={status === 'submitting'}\n        className={`w-full py-3 font-display text-sm rounded font-bold tracking-wide transition-colors ${\n          status === 'submitting'\n            ? 'bg-war-ink/50 text-parchment-dark/40 cursor-not-allowed'\n            : 'bg-war-green text-parchment hover:brightness-125 cursor-pointer border border-green-800/50 shadow-copper'\n        }`}\n      >\n        {status === 'submitting' ? 'Submitting...' : 'Submit Score to Leaderboard'}\n      </button>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { fetchLeaderboard, supabase } from '../lib/supabase';\n\nconst factionIcons = {\n  us: '\\u{1F985}',\n  british: '\\u{1F341}',\n  native: '\\u{1F3F9}',\n};\n\nconst factionColors = {\n  us: 'text-[#4a7ec7]',\n  british: 'text-red-400',\n  native: 'text-war-gold',\n};\n\nconst rankMedals = ['\\u{1F947}', '\\u{1F948}', '\\u{1F949}'];\n\n/**\n * Compact victory-type badge (DOM / TRT / ELM).\n * Since victory_type is not yet stored in the scores table,\n * this renders nothing when the field is absent.\n */\nexport function VictoryBadge({ victoryType }) {\n  if (!victoryType) return null;\n\n  const config = {\n    domination: { label: 'DOM', className: 'text-war-copper border-war-copper/40 bg-war-copper/10' },\n    treaty:     { label: 'TRT', className: 'text-parchment-dark/50 border-parchment-dark/30 bg-parchment-dark/5' },\n    elimination:{ label: 'ELM', className: 'text-red-400/70 border-red-400/30 bg-red-400/5' },\n  };\n\n  const cfg = config[victoryType];\n  if (!cfg) return null;\n\n  return (\n    <span\n      className={`inline-block ml-1.5 px-1 py-px text-[9px] leading-tight font-body font-bold tracking-wider uppercase border rounded ${cfg.className}`}\n    >\n      {cfg.label}\n    </span>\n  );\n}\n\nexport default function LeaderboardPreview({ onViewFull }) {\n  const [scores, setScores] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (!supabase) return;\n\n    let cancelled = false;\n\n    async function load() {\n      setLoading(true);\n      setError(null);\n      try {\n        const { data, error: fetchError } = await fetchLeaderboard({ limit: 5 });\n        if (cancelled) return;\n        if (fetchError) {\n          setError(typeof fetchError === 'string' ? fetchError : 'Failed to load scores');\n        } else {\n          setScores(data);\n        }\n      } catch (err) {\n        if (!cancelled) setError('Failed to load scores');\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n\n    load();\n    return () => { cancelled = true; };\n  }, []);\n\n  // Don't render anything if Supabase is not configured\n  if (!supabase) return null;\n\n  return (\n    <div className=\"w-full max-w-md mx-auto mt-8 animate-slideup\" style={{ animationDelay: '0.4s' }}>\n      <div className=\"bg-war-navy/60 backdrop-blur rounded-lg border border-war-gold/20 shadow-card overflow-hidden\">\n        {/* Header */}\n        <div className=\"px-5 py-3 border-b border-war-gold/15\" style={{\n          background: 'linear-gradient(135deg, rgba(184,115,51,0.1) 0%, rgba(20,30,48,0.8) 100%)',\n        }}>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-1 h-1 rounded-full bg-war-gold/60\" />\n              <p className=\"text-war-copper text-xs tracking-[0.15em] uppercase font-body font-bold\">\n                Hall of Commanders\n              </p>\n            </div>\n            <div className=\"w-6 h-px bg-war-gold/20\" />\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"px-5 py-3\">\n          {/* Loading state */}\n          {loading && (\n            <div className=\"py-6 text-center\">\n              <div className=\"inline-flex items-center gap-2\">\n                <div className=\"w-1 h-1 rounded-full bg-war-gold/40 animate-candleflicker\" />\n                <div className=\"w-1 h-1 rounded-full bg-war-gold/40 animate-candleflicker\" style={{ animationDelay: '0.5s' }} />\n                <div className=\"w-1 h-1 rounded-full bg-war-gold/40 animate-candleflicker\" style={{ animationDelay: '1s' }} />\n              </div>\n              <p className=\"text-parchment-dark/40 text-xs font-body italic mt-2\">Loading rankings...</p>\n            </div>\n          )}\n\n          {/* Error state */}\n          {!loading && error && (\n            <div className=\"py-5 text-center\">\n              <p className=\"text-parchment-dark/40 text-xs font-body italic\">{error}</p>\n            </div>\n          )}\n\n          {/* Empty state */}\n          {!loading && !error && scores.length === 0 && (\n            <div className=\"py-5 text-center\">\n              <p className=\"text-parchment-dark/50 text-sm font-body italic\">\n                No commanders have entered the record yet.\n              </p>\n              <p className=\"text-parchment-dark/30 text-xs font-body mt-1\">\n                Complete a campaign to claim your place in history.\n              </p>\n            </div>\n          )}\n\n          {/* Scores list */}\n          {!loading && !error && scores.length > 0 && (\n            <div className=\"space-y-0\">\n              {scores.map((s, i) => (\n                <div\n                  key={s.id}\n                  className={`flex items-center gap-3 py-2 ${\n                    i < scores.length - 1 ? 'border-b border-parchment-dark/8' : ''\n                  }`}\n                >\n                  {/* Rank */}\n                  <div className=\"w-6 text-center flex-shrink-0\">\n                    {i < 3 ? (\n                      <span className=\"text-sm leading-none\">{rankMedals[i]}</span>\n                    ) : (\n                      <span className=\"text-xs text-parchment-dark/40 font-body font-bold\">{i + 1}</span>\n                    )}\n                  </div>\n\n                  {/* Faction icon */}\n                  <span className={`text-sm flex-shrink-0 ${factionColors[s.faction] || ''}`}>\n                    {factionIcons[s.faction] || '?'}\n                  </span>\n\n                  {/* Commander name (truncated) */}\n                  <span className={`flex-1 text-sm font-body truncate min-w-0 ${\n                    i < 3 ? 'text-parchment/80 font-bold' : 'text-parchment-dark/60'\n                  }`}>\n                    {s.player_name}\n                  </span>\n\n                  {/* Score + victory badge */}\n                  <div className=\"flex items-center flex-shrink-0\">\n                    <span className={`text-sm font-display font-bold tabular-nums ${\n                      i === 0 ? 'text-war-gold' : i < 3 ? 'text-war-brass/80' : 'text-parchment-dark/50'\n                    }`}>\n                      {s.final_score}\n                    </span>\n                    <VictoryBadge victoryType={s.game_over_reason} />\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Footer button */}\n        {onViewFull && (\n          <div className=\"px-5 pb-4 pt-1\">\n            <button\n              onClick={onViewFull}\n              className=\"w-full py-2 text-xs font-body text-parchment-dark/50 tracking-wider uppercase\n                         border border-parchment-dark/15 rounded\n                         hover:border-war-gold/30 hover:text-war-gold/70 transition-colors cursor-pointer\n                         focus:outline-none focus:ring-1 focus:ring-war-gold/30 focus:ring-offset-1 focus:ring-offset-war-navy\"\n            >\n              See All Rankings\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { fetchLeaderboard, supabase } from '../lib/supabase';\nimport { VictoryBadge } from './LeaderboardPreview';\n\nconst factionLabels = {\n  us: 'United States',\n  british: 'British/Canada',\n  native: 'Native Coalition',\n};\n\nconst factionColors = {\n  us: 'text-[#4a7ec7]',\n  british: 'text-red-400',\n  native: 'text-war-gold',\n};\n\nexport default function Leaderboard({ onClose, currentClassPeriod }) {\n  const [scores, setScores] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [filterPeriod, setFilterPeriod] = useState(currentClassPeriod || '');\n  const [filterFaction, setFilterFaction] = useState('');\n  const [periods, setPeriods] = useState([]);\n\n  const loadScores = useCallback(async () => {\n    setLoading(true);\n    const { data } = await fetchLeaderboard({\n      classPeriod: filterPeriod || undefined,\n      faction: filterFaction || undefined,\n      limit: 50,\n    });\n    setScores(data);\n    setLoading(false);\n  }, [filterPeriod, filterFaction]);\n\n  // Load available class periods once\n  useEffect(() => {\n    if (!supabase) return;\n    supabase\n      .from('scores')\n      .select('class_period')\n      .then(({ data }) => {\n        if (data) {\n          const unique = [...new Set(data.map((d) => d.class_period))].sort();\n          setPeriods(unique);\n        }\n      });\n  }, []);\n\n  useEffect(() => {\n    loadScores();\n  }, [loadScores]);\n\n  useEffect(() => {\n    const handleKey = (e) => {\n      if (e.key === 'Escape') { e.preventDefault(); onClose(); }\n    };\n    window.addEventListener('keydown', handleKey);\n    return () => window.removeEventListener('keydown', handleKey);\n  }, [onClose]);\n\n  if (!supabase) {\n    return (\n      <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4\" style={{ zIndex: 1000 }} role=\"presentation\">\n        <div className=\"bg-war-navy border border-war-gold/30 rounded-lg max-w-md w-full p-6 text-center shadow-modal animate-fadein\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Leaderboard unavailable\">\n          <p className=\"text-parchment/80 font-body text-base mb-4\">\n            Leaderboard is not available. Supabase has not been configured.\n          </p>\n          <button\n            onClick={onClose}\n            className=\"px-6 py-2.5 bg-war-gold text-war-ink font-display text-sm rounded\n                       hover:bg-war-brass transition-colors cursor-pointer font-bold tracking-wide shadow-copper\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4\" style={{ zIndex: 1000 }} role=\"presentation\">\n      <div className=\"bg-war-navy border border-war-gold/30 rounded-lg max-w-2xl w-full max-h-[90vh] flex flex-col shadow-modal animate-fadein\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Leaderboard\">\n        {/* Header */}\n        <div className=\"px-6 py-4 border-b border-war-gold/20 flex items-center justify-between flex-shrink-0\" style={{\n          background: 'linear-gradient(135deg, rgba(184,115,51,0.15) 0%, rgba(20,30,48,0.95) 100%)',\n        }}>\n          <div>\n            <div className=\"flex items-center gap-2 mb-1\">\n              <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n              <p className=\"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold\">Rankings</p>\n            </div>\n            <h2 className=\"text-parchment font-display text-lg tracking-wide\">Leaderboard</h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-parchment-dark/40 hover:text-parchment transition-colors cursor-pointer text-xl\"\n            aria-label=\"Close\"\n          >\n            &times;\n          </button>\n        </div>\n\n        {/* Filters */}\n        <div className=\"px-6 py-3 border-b border-parchment-dark/10 flex gap-3 flex-shrink-0 flex-wrap\">\n          <label htmlFor=\"filter-period\" className=\"sr-only\">Filter by class period</label>\n          <select\n            id=\"filter-period\"\n            value={filterPeriod}\n            onChange={(e) => setFilterPeriod(e.target.value)}\n            className=\"bg-war-ink/50 text-parchment/80 border border-parchment-dark/15 rounded px-3 py-1.5 text-sm font-body cursor-pointer\n                       focus:border-war-gold/40 focus:outline-none\"\n          >\n            <option value=\"\">All Periods</option>\n            {periods.map((p) => (\n              <option key={p} value={p}>{p}</option>\n            ))}\n          </select>\n          <label htmlFor=\"filter-faction\" className=\"sr-only\">Filter by faction</label>\n          <select\n            id=\"filter-faction\"\n            value={filterFaction}\n            onChange={(e) => setFilterFaction(e.target.value)}\n            className=\"bg-war-ink/50 text-parchment/80 border border-parchment-dark/15 rounded px-3 py-1.5 text-sm font-body cursor-pointer\n                       focus:border-war-gold/40 focus:outline-none\"\n          >\n            <option value=\"\">All Factions</option>\n            <option value=\"us\">United States</option>\n            <option value=\"british\">British/Canada</option>\n            <option value=\"native\">Native Coalition</option>\n          </select>\n        </div>\n\n        {/* Scores table */}\n        <div className=\"flex-1 overflow-y-auto px-6 py-3\">\n          {loading ? (\n            <p className=\"text-parchment-dark/50 text-center py-8 font-body italic\">Loading...</p>\n          ) : scores.length === 0 ? (\n            <p className=\"text-parchment-dark/50 text-center py-8 font-body italic\">No scores yet. Be the first!</p>\n          ) : (\n            <table className=\"w-full text-sm font-body\">\n              <thead>\n                <tr className=\"text-parchment-dark/50 text-left border-b border-parchment-dark/15\">\n                  <th className=\"py-2 w-8 font-normal\">#</th>\n                  <th className=\"py-2 font-normal\">Commander</th>\n                  <th className=\"py-2 font-normal\">Period</th>\n                  <th className=\"py-2 font-normal\">Faction</th>\n                  <th className=\"py-2 text-right font-normal\">Score</th>\n                  <th className=\"py-2 text-right font-normal\">Quiz</th>\n                </tr>\n              </thead>\n              <tbody>\n                {scores.map((s, i) => (\n                  <tr\n                    key={s.id}\n                    className={`border-b border-parchment-dark/8 ${\n                      i < 3 ? 'text-parchment/80' : 'text-parchment-dark/60'\n                    }`}\n                  >\n                    <td className=\"py-2\">\n                      {i === 0 ? '\\uD83E\\uDD47' : i === 1 ? '\\uD83E\\uDD48' : i === 2 ? '\\uD83E\\uDD49' : `${i + 1}`}\n                    </td>\n                    <td className=\"py-2 font-bold\">{s.player_name}</td>\n                    <td className=\"py-2\">{s.class_period}</td>\n                    <td className={`py-2 ${factionColors[s.faction] || ''}`}>\n                      {factionLabels[s.faction] || s.faction}\n                    </td>\n                    <td className=\"py-2 text-right font-bold text-war-gold font-display\">\n                      {s.final_score}\n                      <VictoryBadge victoryType={s.game_over_reason} />\n                    </td>\n                    <td className=\"py-2 text-right\">\n                      {s.knowledge_total > 0\n                        ? `${Math.round((s.knowledge_correct / s.knowledge_total) * 100)}%`\n                        : '-'}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * Historical Analysis Engine for War of 1812: Rise of the Nation\n *\n * Generates paragraphs comparing the player's game outcome\n * to what actually happened during the War of 1812.\n */\n\n//  Historical Outcome Summaries \nconst HISTORICAL_OUTCOME = {\n  us: 'In reality, the War of 1812 ended in a strategic draw for the United States. American invasions of Canada failed repeatedly \\u2014 Detroit was surrendered without a fight, and three attempts to take Montreal were repulsed. However, Oliver Hazard Perry\\u2019s victory on Lake Erie and Andrew Jackson\\u2019s triumph at New Orleans boosted American nationalism. The Treaty of Ghent restored all borders to their pre-war positions, but the war forged a stronger national identity.',\n  british: 'The British Empire successfully defended Canada throughout the war, which was their primary objective. They burned Washington D.C. in August 1814 but failed to take Baltimore when Fort McHenry withstood bombardment \\u2014 inspiring \\u2018The Star-Spangled Banner.\\u2019 British forces were stretched thin fighting Napoleon in Europe simultaneously. The Treaty of Ghent was essentially a return to status quo ante bellum \\u2014 no territory changed hands.',\n  native: 'The War of 1812 was catastrophic for Native peoples. Tecumseh\\u2019s confederacy, the most powerful pan-Indian alliance in North American history, collapsed when he was killed at the Battle of the Thames in October 1813. Without British support after the treaty, Native nations lost all leverage. The Creek War ended with the Treaty of Fort Jackson, stripping 23 million acres from the Creek Nation. The war accelerated westward expansion and Native displacement.',\n};\n\n//  Territory-Specific Historical Notes \nconst TERRITORY_HISTORY = {\n  detroit: 'Detroit was surrendered by General Hull to British and Native forces in August 1812 without a fight \\u2014 one of America\\u2019s most humiliating defeats. It was recaptured by General Harrison after the Battle of the Thames in October 1813.',\n  washington_dc: 'British forces burned Washington D.C. in August 1814, including the White House and Capitol building. It was the only time a foreign power has captured and burned the American capital.',\n  baltimore: 'The British bombardment of Fort McHenry in September 1814 failed to capture Baltimore. Francis Scott Key, watching from a British ship, wrote \\u2018The Star-Spangled Banner\\u2019 during the 25-hour bombardment.',\n  new_orleans: 'Andrew Jackson\\u2019s decisive victory at New Orleans in January 1815 was actually fought after the Treaty of Ghent was signed, but before news reached the city. It made Jackson a national hero.',\n  lake_erie: 'Oliver Hazard Perry\\u2019s victory at the Battle of Lake Erie in September 1813 gave the U.S. control of the lake and forced the British to retreat from Detroit. His message: \\u2018We have met the enemy and they are ours.\\u2019',\n  montreal: 'American forces attempted to capture Montreal three times during the war and failed each time. The city was the key to British Canada, and its defense was crucial to the British war effort.',\n  upper_canada: 'Upper Canada (modern Ontario) saw some of the war\\u2019s fiercest fighting. The battles of Queenston Heights, Lundy\\u2019s Lane, and the burning of York (Toronto) made this the war\\u2019s most contested theater.',\n  niagara: 'The Niagara frontier was the site of brutal back-and-forth fighting. The Battle of Lundy\\u2019s Lane in July 1814 was one of the bloodiest battles ever fought on Canadian soil.',\n  creek_nation: 'The Creek War (1813\\u20141814) saw Andrew Jackson\\u2019s forces defeat the Red Stick Creek at the Battle of Horseshoe Bend. The Treaty of Fort Jackson stripped the Creek Nation of 23 million acres.',\n  indiana_territory: 'Indiana Territory was the heart of Tecumseh\\u2019s confederacy. The Battle of Tippecanoe in 1811 weakened the confederacy before the war, and Tecumseh\\u2019s death at the Thames in 1813 ended it.',\n  halifax: 'Halifax served as the primary British naval base in North America. It was never seriously threatened and served as the staging point for the British blockade of the American coast.',\n  fort_dearborn: 'Fort Dearborn (modern Chicago) was evacuated and its garrison massacred by Potawatomi warriors allied with the British in August 1812, one of the war\\u2019s early Native victories.',\n};\n// Faction display labels\nconst FACTION_LABELS = {\n  us: 'United States',\n  british: 'British Empire',\n  native: 'Native Confederacy',\n};\n\n//  Tactical comparison text \nconst REAL_WAR_CHARACTER = {\n  us: 'The real American military was plagued by poor leadership and militia reluctance in the early war, improving significantly by 1814.',\n  british: 'British regulars were among the world\\u2019s finest soldiers, but they were stretched thin across a global war against Napoleon.',\n  native: 'Native warriors excelled in guerrilla warfare and frontier combat, but were ultimately overwhelmed by numbers and the loss of key leaders.',\n};\n\n//  Historical lesson text \nconst HISTORICAL_LESSON = {\n  us: 'The War of 1812 taught the young republic that military preparedness matters \\u2014 the regular army that emerged was far more professional than the militia-dependent force that started the war. It also sparked the \\u2018Era of Good Feelings\\u2019 and a surge of American nationalism that shaped the nation\\u2019s identity.',\n  british: 'For Britain, the War of 1812 was always a sideshow to the Napoleonic Wars. The lesson was that defending Canada required both military strength and Native alliances \\u2014 alliances that were abandoned at the Treaty of Ghent, with devastating consequences for Indigenous peoples.',\n  native: 'The War of 1812 was the last realistic chance for Native peoples to resist American westward expansion through military alliance. Tecumseh\\u2019s vision of a pan-Indian confederacy was the most ambitious attempt at unity, and its failure after his death opened the floodgates to removal policies that would culminate in the Trail of Tears.',\n};\n\n//  Territory comparison templates \n// Each entry: [territory, ownerCondition, comparisonSentence]\n// ownerCondition: { faction, owns: true/false } means \"if <faction> player owns/doesn't own this\"\nconst TERRITORY_COMPARISONS = {\n  us: [\n    {\n      territory: 'montreal',\n      owns: true,\n      text: 'You succeeded in capturing Montreal \\u2014 something American forces attempted three times but never achieved historically.',\n    },\n    {\n      territory: 'washington_dc',\n      owns: false,\n      text: 'Like the real war, your capital fell to enemy forces.',\n    },\n    {\n      territory: 'washington_dc',\n      owns: true,\n      text: 'You managed to hold Washington D.C. \\u2014 unlike the real war, where the British burned it in 1814.',\n    },\n    {\n      territory: 'detroit',\n      owns: false,\n      text: 'You lost Detroit, echoing General Hull\\u2019s humiliating surrender of the city in August 1812.',\n    },\n    {\n      territory: 'detroit',\n      owns: true,\n      text: 'You held Detroit throughout \\u2014 unlike history, where it was surrendered without a fight and had to be recaptured.',\n    },\n    {\n      territory: 'upper_canada',\n      owns: true,\n      text: 'You conquered Upper Canada, achieving what the real American military never could despite multiple invasions.',\n    },\n    {\n      territory: 'new_orleans',\n      owns: true,\n      text: 'Like Andrew Jackson\\u2019s forces in reality, you held New Orleans against enemy attack.',\n    },\n    {\n      territory: 'new_orleans',\n      owns: false,\n      text: 'You lost New Orleans \\u2014 unlike history, where Jackson\\u2019s decisive victory made it America\\u2019s greatest triumph of the war.',\n    },\n    {\n      territory: 'lake_erie',\n      owns: true,\n      text: 'You secured Lake Erie, mirroring Oliver Hazard Perry\\u2019s famous naval victory in September 1813.',\n    },\n    {\n      territory: 'niagara',\n      owns: true,\n      text: 'You captured the Niagara frontier \\u2014 historically one of the bloodiest and most contested regions of the war.',\n    },\n  ],\n  british: [\n    {\n      territory: 'washington_dc',\n      owns: true,\n      text: 'You captured Washington D.C., just as British forces did in August 1814 when they burned the White House and Capitol.',\n    },\n    {\n      territory: 'baltimore',\n      owns: true,\n      text: 'Unlike history, where Fort McHenry\\u2019s defense inspired \\u2018The Star-Spangled Banner,\\u2019 you managed to take Baltimore.',\n    },\n    {\n      territory: 'baltimore',\n      owns: false,\n      text: 'Like the real war, Baltimore\\u2019s defenses held firm against your forces.',\n    },\n    {\n      territory: 'new_orleans',\n      owns: true,\n      text: 'Unlike history, where Jackson\\u2019s forces crushed the British at New Orleans, you managed to take the city.',\n    },\n    {\n      territory: 'montreal',\n      owns: true,\n      text: 'You held Montreal, just as the British did historically \\u2014 repelling every American attempt to capture it.',\n    },\n    {\n      territory: 'montreal',\n      owns: false,\n      text: 'You lost Montreal \\u2014 something the real British forces never allowed, successfully defending it against three American invasions.',\n    },\n    {\n      territory: 'detroit',\n      owns: true,\n      text: 'You captured Detroit, mirroring the real war\\u2019s early British triumph when General Hull surrendered the city without a fight.',\n    },\n    {\n      territory: 'upper_canada',\n      owns: true,\n      text: 'You defended Upper Canada successfully, just as British and Canadian forces did throughout the real war.',\n    },\n    {\n      territory: 'upper_canada',\n      owns: false,\n      text: 'You lost Upper Canada \\u2014 a devastating departure from history, where its defense was Britain\\u2019s primary war objective.',\n    },\n    {\n      territory: 'lake_erie',\n      owns: true,\n      text: 'You held Lake Erie \\u2014 unlike history, where Perry\\u2019s victory gave the Americans control of the lake.',\n    },\n  ],\n  native: [\n    {\n      territory: 'detroit',\n      owns: true,\n      text: 'You captured Detroit, echoing the real war\\u2019s early alliance victory when Tecumseh and British forces took the city.',\n    },\n    {\n      territory: 'indiana_territory',\n      owns: true,\n      text: 'You held Indiana Territory \\u2014 the heart of Tecumseh\\u2019s confederacy \\u2014 which was lost historically after his death.',\n    },\n    {\n      territory: 'indiana_territory',\n      owns: false,\n      text: 'You lost Indiana Territory, the heartland of Tecumseh\\u2019s confederacy, mirroring the historical collapse after his death at the Thames.',\n    },\n    {\n      territory: 'creek_nation',\n      owns: true,\n      text: 'You defended the Creek Nation \\u2014 unlike history, where the Treaty of Fort Jackson stripped 23 million acres from the Creek people.',\n    },\n    {\n      territory: 'creek_nation',\n      owns: false,\n      text: 'Like history, the Creek Nation fell \\u2014 echoing the devastating Treaty of Fort Jackson that followed the Battle of Horseshoe Bend.',\n    },\n    {\n      territory: 'fort_dearborn',\n      owns: true,\n      text: 'You took Fort Dearborn, mirroring the real Potawatomi victory there in August 1812.',\n    },\n    {\n      territory: 'ohio_valley',\n      owns: true,\n      text: 'You seized the Ohio Valley \\u2014 a region Tecumseh\\u2019s confederacy fought to reclaim from American settlers.',\n    },\n    {\n      territory: 'upper_canada',\n      owns: true,\n      text: 'You conquered Upper Canada \\u2014 a remarkable achievement beyond anything Native forces accomplished independently in the real war.',\n    },\n    {\n      territory: 'washington_dc',\n      owns: true,\n      text: 'You captured the American capital \\u2014 something no Native force achieved historically, though the British did burn it in 1814.',\n    },\n    {\n      territory: 'new_orleans',\n      owns: true,\n      text: 'You took New Orleans, gaining control of the Mississippi \\u2014 a strategic objective that would have transformed the war\\u2019s outcome for Native peoples.',\n    },\n  ],\n};\n\n//  \"What Came Next\" Post-Game Content \nconst WHAT_CAME_NEXT = {\n  us: [\n    {\n      title: 'The Era of Good Feelings (18151825)',\n      content: 'The war\\'s end brought a surge of national pride and political unity. The Federalist Party collapsed after opposing the war, leaving the Democratic-Republicans as the sole major party. President James Monroe presided over a period of relative political harmony, declining sectionalism, and territorial expansion. Americans invested in infrastructure  canals, roads, and early railroads  that knit the growing nation together.',\n    },\n    {\n      title: 'The Monroe Doctrine (1823)',\n      content: 'Emboldened by surviving the war with Britain, the U.S. declared that the Western Hemisphere was closed to further European colonization. The Monroe Doctrine became a cornerstone of American foreign policy for two centuries. Though the young nation lacked the military power to enforce it, Britain\\'s Royal Navy  now at peace with America  effectively backed the policy to protect its own trade interests.',\n    },\n    {\n      title: 'Manifest Destiny & Westward Expansion',\n      content: 'The war removed the last major obstacle to westward expansion: British-backed Native resistance. American settlers flooded into the Old Northwest, the Deep South, and eventually Texas and Oregon. The phrase \"Manifest Destiny\" captured the belief that American expansion across the continent was both justified and inevitable  a belief that the War of 1812 helped make possible.',\n    },\n    {\n      title: 'The Road to Indian Removal (1830)',\n      content: 'Andrew Jackson  the war\\'s greatest hero  became president in 1828 and signed the Indian Removal Act in 1830. The policy of forced relocation that followed, including the Trail of Tears, was a direct consequence of the collapse of Native military power during the War of 1812. Without British allies, Eastern tribes had no leverage to resist removal.',\n    },\n  ],\n  british: [\n    {\n      title: 'Britain Turns to Empire',\n      content: 'With Napoleon defeated and the American war settled, Britain entered its imperial century. The Royal Navy ruled the seas unchallenged, and the British Empire expanded across Africa, Asia, and the Pacific. The War of 1812 taught Britain that North America was a costly distraction  better to trade with the Americans than fight them.',\n    },\n    {\n      title: 'Rush-Bagot Agreement (1817)',\n      content: 'Just two years after the war, Britain and the U.S. agreed to demilitarize the Great Lakes  one of the first disarmament treaties in modern history. The Rush-Bagot Agreement began the transformation of the U.S.-Canadian border into the longest undefended border in the world, a remarkable outcome for two nations that had just fought a bitter war.',\n    },\n    {\n      title: 'Canadian National Identity',\n      content: 'The successful defense of Canada became a founding myth for English-speaking Canadians. Heroes like Isaac Brock, Laura Secord, and the Canadian militia became symbols of a distinct Canadian identity  not British, not American, but uniquely Canadian. The war helped plant the seeds that would eventually lead to Canadian Confederation in 1867.',\n    },\n    {\n      title: 'Abandoning Native Allies',\n      content: 'Britain\\'s abandonment of its Native allies at the Treaty of Ghent remains one of the war\\'s most consequential outcomes. Despite fighting and dying alongside the British, Native nations were left without protection against American expansion. Britain\\'s broken promises contributed to the destruction of Native sovereignty east of the Mississippi within a generation.',\n    },\n  ],\n  native: [\n    {\n      title: 'The Collapse of Resistance',\n      content: 'Tecumseh\\'s death at the Battle of the Thames in 1813 ended the most ambitious pan-Native alliance in North American history. Without his leadership and without British support, the confederacy fractured. Individual nations were forced to negotiate separately with the U.S. government, which used divide-and-conquer tactics to extract land cessions.',\n    },\n    {\n      title: 'The Indian Removal Act (1830)',\n      content: 'Fifteen years after the war, President Andrew Jackson signed the Indian Removal Act, authorizing the forced relocation of all Eastern tribes to \"Indian Territory\" west of the Mississippi. The Choctaw, Creek, Chickasaw, Cherokee, and Seminole  the \"Five Civilized Tribes\"  were forcibly marched westward. The Cherokee removal in 1838, known as the Trail of Tears, killed an estimated 4,000 people.',\n    },\n    {\n      title: 'The Trail of Tears (18311850)',\n      content: 'The Trail of Tears was not a single event but a series of forced relocations spanning two decades. Families were rounded up at gunpoint, forced to march hundreds of miles through harsh conditions, and settled on unfamiliar land. Disease, starvation, and exposure killed thousands. The removals were a direct consequence of the power vacuum created by the War of 1812.',\n    },\n    {\n      title: 'Legacy of Broken Promises',\n      content: 'The War of 1812 established a pattern that would define U.S.-Native relations for the next century: promises made in treaties were broken whenever they became inconvenient. Article IX of the Treaty of Ghent promised to restore Native lands  the U.S. never complied. This pattern of broken treaties continued through the reservation era and beyond, its roots traceable to the diplomatic betrayals of 1814.',\n    },\n  ],\n};\n\nexport function getWhatCameNext(playerFaction) {\n  return WHAT_CAME_NEXT[playerFaction] || WHAT_CAME_NEXT.us;\n}\n\n//  Main Export \n\n/**\n * Generate an array of 4 paragraph strings comparing the player's\n * game to what actually happened in the War of 1812.\n *\n * @param {string} playerFaction - 'us' | 'british' | 'native'\n * @param {Object} territoryOwners - { [territoryId]: 'us'|'british'|'native'|'neutral' }\n * @param {{ fought: number, won: number, lost: number }} battleStats\n * @param {number} round - current round number\n * @param {string} gameOverReason - 'domination' | 'elimination' | 'treaty'\n * @returns {string[]} 4 paragraph strings\n */\nexport function generateHistoricalComparison(\n  playerFaction,\n  territoryOwners,\n  battleStats,\n  round,\n  gameOverReason\n) {\n  const factionLabel = FACTION_LABELS[playerFaction] || playerFaction;\n  const outcome = HISTORICAL_OUTCOME[playerFaction] || '';\n\n  //  Paragraph 1: Outcome comparison \n  let paragraph1;\n  if (gameOverReason === 'domination') {\n    paragraph1 = `Your ${factionLabel} achieved total domination of the theater \\u2014 something no faction came close to in the real war. ${outcome}`;\n  } else if (gameOverReason === 'elimination') {\n    const historicallyEliminated = playerFaction === 'native';\n    const eliminationNote = historicallyEliminated\n      ? 'a fate that tragically mirrors what happened to Native peoples, whose military power was effectively destroyed'\n      : \"a fate that didn't historically happen to this faction\";\n    paragraph1 = `Your ${factionLabel} was completely eliminated \\u2014 ${eliminationNote}. ${outcome}`;\n  } else {\n    // treaty (default)\n    paragraph1 = `The war ended with the Treaty of Ghent, just as it did historically. ${outcome}`;\n  }\n\n  //  Paragraph 2: Territory-specific comparisons \n  const comparisons = TERRITORY_COMPARISONS[playerFaction] || [];\n  const matched = [];\n\n  for (const comp of comparisons) {\n    if (matched.length >= 3) break;\n    const currentOwner = territoryOwners[comp.territory];\n    const playerOwns = currentOwner === playerFaction;\n    if (playerOwns === comp.owns) {\n      matched.push(comp.text);\n    }\n  }\n\n  let paragraph2;\n  if (matched.length > 0) {\n    paragraph2 = matched.join(' ');\n  } else {\n    // Fallback if no comparisons matched\n    paragraph2 = `The territorial outcome of your game diverged significantly from the historical war. ${TERRITORY_HISTORY[Object.keys(TERRITORY_HISTORY)[0]]}`;\n  }\n\n  //  Paragraph 3: Tactical analysis \n  const fought = battleStats?.fought || 0;\n  const won = battleStats?.won || 0;\n  const winRate = fought > 0 ? won / fought : 0;\n  const winPct = Math.round(winRate * 100);\n\n  let tacticalOpener;\n  if (fought === 0) {\n    tacticalOpener = `Your forces avoided direct combat entirely across ${round} rounds \\u2014 an unusual but historically defensible strategy.`;\n  } else if (winRate > 0.7) {\n    tacticalOpener = `Your aggressive strategy paid off with a ${winPct}% victory rate across ${fought} battles.`;\n  } else if (winRate < 0.4) {\n    tacticalOpener = `Your forces struggled in combat, winning only ${winPct}% of ${fought} battles.`;\n  } else {\n    tacticalOpener = `Your balanced approach yielded a ${winPct}% victory rate across ${fought} engagements.`;\n  }\n\n  const paragraph3 = `${tacticalOpener} ${REAL_WAR_CHARACTER[playerFaction] || ''}`;\n\n  //  Paragraph 4: Historical lesson \n  const paragraph4 = HISTORICAL_LESSON[playerFaction] || '';\n\n  return [paragraph1, paragraph2, paragraph3, paragraph4];\n}\n","import React, { useState } from 'react';\nimport ScoreSubmission from './ScoreSubmission';\nimport Leaderboard from './Leaderboard';\nimport { generateHistoricalComparison } from '../data/historicalAnalysis';\nimport { getWhatCameNext } from '../data/historicalAnalysis';\n\nconst factionLabels = {\n  us: 'United States',\n  british: 'British/Canada',\n  native: 'Native Coalition',\n};\n\nconst factionVerdicts = {\n  us: {\n    high: 'A triumph for the young republic! Like Jackson at New Orleans, your leadership proved that American democracy could stand against the world\\'s greatest empire.',\n    mid: 'A hard-fought campaign worthy of the Era of Good Feelings. The nation endures  battered but unified.',\n    low: 'The war ends in bitter disappointment. Like Hull\\'s surrender at Detroit, the republic\\'s promise remains unfulfilled.',\n  },\n  british: {\n    high: 'Britannia rules! You have defended Canada and projected power across North America, just as Wellington conquered on the continent.',\n    mid: 'The Empire holds. Canada is secure and the American threat contained  a respectable outcome worthy of the Crown.',\n    low: 'A sobering campaign. Like Prevost\\'s retreat from Plattsburgh, the Empire\\'s grip on North America weakens.',\n  },\n  native: {\n    high: 'Tecumseh\\'s dream lives! Against impossible odds, you have forged a confederacy that rewrites the tragic history of Native displacement.',\n    mid: 'The confederacy endures. Though the future remains uncertain, your people have fought with honor and skill.',\n    low: 'History repeats its cruelest chapter. Without allies and outnumbered, the confederacy fractures  but the courage of your warriors will be remembered.',\n  },\n};\n\nfunction getVerdict(faction, score) {\n  const verdicts = factionVerdicts[faction] || factionVerdicts.us;\n  if (score >= 80) return verdicts.high;\n  if (score >= 40) return verdicts.mid;\n  return verdicts.low;\n}\n\nfunction HistorianAnalysis({ playerFaction, territoryOwners, battleStats, round, gameOverReason }) {\n  const [expanded, setExpanded] = useState(true);\n  const paragraphs = generateHistoricalComparison(playerFaction, territoryOwners, battleStats, round, gameOverReason);\n\n  return (\n    <div className=\"border border-war-copper/20 rounded-lg overflow-hidden\">\n      <button\n        onClick={() => setExpanded(!expanded)}\n        className=\"w-full px-5 py-3 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-colors\"\n        style={{ background: 'linear-gradient(135deg, rgba(184,115,51,0.1) 0%, rgba(20,30,48,0.5) 100%)' }}\n      >\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-war-copper text-xs tracking-[0.15em] uppercase font-body font-bold\">\n            Historian&apos;s Analysis\n          </span>\n        </div>\n        <span className=\"text-parchment-dark/40 text-sm\">{expanded ? '\\u25B2' : '\\u25BC'}</span>\n      </button>\n      {expanded && (\n        <div className=\"px-5 py-4 space-y-3 bg-black/10\">\n          {paragraphs.map((p, i) => (\n            <p key={i} className=\"text-parchment/70 text-sm font-body leading-relaxed\">{p}</p>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction WhatCameNext({ playerFaction }) {\n  const [expanded, setExpanded] = useState(false);\n  const sections = getWhatCameNext(playerFaction);\n\n  return (\n    <div className=\"border border-war-copper/20 rounded-lg overflow-hidden\">\n      <button\n        onClick={() => setExpanded(!expanded)}\n        className=\"w-full px-5 py-3 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-colors\"\n        style={{ background: 'linear-gradient(135deg, rgba(184,115,51,0.1) 0%, rgba(20,30,48,0.5) 100%)' }}\n      >\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-war-copper text-xs tracking-[0.15em] uppercase font-body font-bold\">\n            What Came Next\n          </span>\n        </div>\n        <span className=\"text-parchment-dark/40 text-sm\">{expanded ? '\\u25B2' : '\\u25BC'}</span>\n      </button>\n      {expanded && (\n        <div className=\"px-5 py-4 space-y-4 bg-black/10\">\n          <p className=\"text-parchment/50 text-xs font-body italic\">\n            The war ended, but its consequences shaped decades of American history...\n          </p>\n          {sections.map((section, i) => (\n            <div key={i}>\n              <h4 className=\"text-war-gold/80 font-display text-sm mb-1 tracking-wide\">{section.title}</h4>\n              <p className=\"text-parchment/70 text-sm font-body leading-relaxed\">{section.content}</p>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default function GameReport({\n  playerName,\n  classPeriod,\n  playerFaction,\n  finalScore,\n  scores,\n  nationalismMeter,\n  objectiveBonus,\n  factionMultiplier,\n  nativeResistance,\n  navalDominance,\n  playerObjectives,\n  journalEntries,\n  knowledgeCheckResults,\n  battleStats,\n  playerTerritoryCount,\n  round,\n  gameOverReason,\n  gameOverWinner,\n  territoryOwners,\n  difficulty,\n  sessionId,\n  classId,\n  onPlayAgain,\n}) {\n  const [showLeaderboard, setShowLeaderboard] = useState(false);\n\n  const SEASONS = ['Spring', 'Summer', 'Autumn', 'Winter'];\n  const getSeasonYear = (r) => `${SEASONS[(r - 1) % 4]} ${1812 + Math.floor((r - 1) / 4)}`;\n\n  const headerTitle = gameOverReason === 'domination'\n    ? (gameOverWinner === playerFaction ? 'Total Victory!' : 'Defeated')\n    : gameOverReason === 'elimination'\n    ? 'Defeated'\n    : 'The War Is Over';\n\n  const headerSubtitle = gameOverReason === 'domination'\n    ? `Complete domination achieved \\u2014 ${getSeasonYear(round)}`\n    : gameOverReason === 'elimination'\n    ? `${factionLabels[playerFaction]} eliminated \\u2014 ${getSeasonYear(round)}`\n    : 'Treaty of Ghent \\u2014 December 24, 1814';\n\n  const totalChecks = knowledgeCheckResults.total;\n  const correctChecks = knowledgeCheckResults.correct;\n  const checkPercent = totalChecks > 0 ? Math.round((correctChecks / totalChecks) * 100) : 0;\n\n  return (\n    <div className=\"fixed inset-0 p-2 md:p-4 overflow-y-auto\" style={{ zIndex: 1000, background: 'radial-gradient(ellipse at center, rgba(20,30,48,0.95) 0%, rgba(10,10,8,0.98) 100%)' }} role=\"presentation\">\n      <div className=\"bg-war-navy border border-war-gold/30 rounded-lg max-w-2xl w-full my-4 md:my-8 mx-auto shadow-modal animate-fadein\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Game report\">\n        {/* Header */}\n        <div className=\"px-8 py-6 border-b border-war-gold/20 text-center\" style={{\n          background: 'linear-gradient(135deg, rgba(139,26,26,0.25) 0%, rgba(20,30,48,0.95) 50%, rgba(139,26,26,0.15) 100%)',\n        }}>\n          <div className=\"flex items-center justify-center gap-2 mb-2\">\n            <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n            <p className=\"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold\">After-Action Report</p>\n            <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n          </div>\n          <h2 className=\"text-2xl md:text-3xl font-display text-parchment tracking-wide\">{headerTitle}</h2>\n          <p className=\"text-parchment-dark/50 text-sm font-body mt-1\">{headerSubtitle}</p>\n        </div>\n\n        <div className=\"px-4 md:px-8 py-4 md:py-6 space-y-5 md:space-y-6\">\n          {/* Player info */}\n          <div className=\"flex flex-wrap justify-between gap-1 text-sm text-parchment/80 font-body\">\n            <div>\n              <span className=\"text-parchment-dark/50\">Commander:</span> {playerName}\n            </div>\n            <div>\n              <span className=\"text-parchment-dark/50\">Period:</span> {classPeriod}\n            </div>\n            <div>\n              <span className=\"text-parchment-dark/50\">Faction:</span> {factionLabels[playerFaction]}\n            </div>\n          </div>\n\n          {/* Final Score */}\n          <div className=\"bg-black/20 rounded-lg p-5 text-center border border-war-gold/10\">\n            <p className=\"text-parchment-dark/50 text-xs uppercase tracking-wider mb-1 font-body font-bold\">Final Score</p>\n            <p className=\"text-war-gold text-5xl font-bold font-display\">{finalScore}</p>\n            <div className=\"flex justify-center gap-6 mt-3 text-sm text-parchment-dark/50 font-body\">\n              <span>Territory: {scores[playerFaction] || 0}</span>\n              {playerFaction === 'us' && (\n                <span>Nationalism: x{(1 + nationalismMeter / 100).toFixed(2)}</span>\n              )}\n              <span>Objectives: +{objectiveBonus}</span>\n            </div>\n            <p className=\"text-parchment/70 text-base mt-3 font-body italic leading-relaxed border-t border-parchment-dark/10 pt-3\">\n              {getVerdict(playerFaction, finalScore)}\n            </p>\n          </div>\n\n          <HistorianAnalysis\n            playerFaction={playerFaction}\n            territoryOwners={territoryOwners}\n            battleStats={battleStats}\n            round={round}\n            gameOverReason={gameOverReason}\n          />\n          <WhatCameNext playerFaction={playerFaction} />\n\n          {/* Objectives */}\n          <div>\n            <h3 className=\"text-war-gold/80 font-display text-base mb-3 tracking-wide\">Objectives</h3>\n            <div className=\"grid grid-cols-1 gap-2\">\n              {playerObjectives.map((obj) => (\n                <div\n                  key={obj.id}\n                  className={`px-4 py-2.5 rounded ${\n                    obj.completed ? 'bg-green-900/15 border border-green-500/20' : 'bg-black/15 border border-parchment-dark/8'\n                  }`}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-sm\">{obj.completed ? '\\u2705' : '\\u274C'}</span>\n                      <span className={`text-sm font-body ${obj.completed ? 'text-green-300/90' : 'text-parchment-dark/60'}`}>\n                        {obj.title}\n                      </span>\n                    </div>\n                    <span className={`text-sm font-bold font-display ${obj.completed ? 'text-war-gold' : 'text-parchment-dark/40'}`}>\n                      {obj.completed ? `+${obj.points}` : '0'} pts\n                    </span>\n                  </div>\n                  {obj.historicalContext && (\n                    <p className=\"text-parchment-dark/40 text-xs mt-1 pl-7 italic font-body\">{obj.historicalContext}</p>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Battle Stats */}\n          <div>\n            <h3 className=\"text-war-gold/80 font-display text-base mb-3 tracking-wide\">Battle Statistics</h3>\n            <div className=\"grid grid-cols-3 gap-3 text-center\">\n              <div className=\"bg-black/20 rounded-lg p-3 border border-parchment-dark/8\">\n                <p className=\"text-2xl font-bold text-parchment font-display\">{battleStats.fought}</p>\n                <p className=\"text-xs text-parchment-dark/50 font-body\">Battles Fought</p>\n              </div>\n              <div className=\"bg-black/20 rounded-lg p-3 border border-green-500/15\">\n                <p className=\"text-2xl font-bold text-green-400 font-display\">{battleStats.won}</p>\n                <p className=\"text-xs text-parchment-dark/50 font-body\">Victories</p>\n              </div>\n              <div className=\"bg-black/20 rounded-lg p-3 border border-red-500/15\">\n                <p className=\"text-2xl font-bold text-red-400 font-display\">{battleStats.lost}</p>\n                <p className=\"text-xs text-parchment-dark/50 font-body\">Defeats</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Knowledge Check Results */}\n          {totalChecks > 0 && (\n            <div>\n              <h3 className=\"text-war-gold/80 font-display text-base mb-3 tracking-wide\">Knowledge Checks</h3>\n              <div className=\"bg-black/20 rounded-lg p-4 border border-parchment-dark/8\">\n                <div className=\"flex items-center justify-between mb-2 font-body\">\n                  <span className=\"text-parchment/80 text-sm\">\n                    {correctChecks} of {totalChecks} correct ({checkPercent}%)\n                  </span>\n                  <span className=\"text-war-gold font-bold text-sm\">\n                    {checkPercent >= 80 ? 'Excellent!' : checkPercent >= 60 ? 'Good work' : 'Keep studying'}\n                  </span>\n                </div>\n                <div className=\"w-full bg-war-ink rounded-full h-2.5 border border-parchment-dark/10 overflow-hidden\">\n                  <div\n                    className=\"h-full rounded-full transition-all duration-500\"\n                    style={{\n                      width: `${checkPercent}%`,\n                      background: checkPercent >= 80\n                        ? 'linear-gradient(to right, #166534, #22c55e)'\n                        : checkPercent >= 60\n                        ? 'linear-gradient(to right, #854d0e, #c9a227)'\n                        : 'linear-gradient(to right, #7f1d1d, #ef4444)',\n                    }}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* War Journal Summary */}\n          {journalEntries.length > 0 && (\n            <div>\n              <h3 className=\"text-war-gold/80 font-display text-base mb-3 tracking-wide\">War Timeline</h3>\n              <div className=\"max-h-48 overflow-y-auto space-y-2 pr-1\">\n                {journalEntries.map((entry, i) => (\n                  <div key={i} className=\"border-l-2 border-war-copper/20 pl-3\">\n                    <p className=\"text-war-gold/70 text-xs font-bold font-body\">{entry.season}</p>\n                    {entry.items.map((item, j) => (\n                      <p key={j} className=\"text-parchment-dark/60 text-sm font-body\">{item}</p>\n                    ))}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Score Submission */}\n          <ScoreSubmission\n            playerName={playerName}\n            classPeriod={classPeriod}\n            playerFaction={playerFaction}\n            finalScore={finalScore}\n            scores={scores}\n            objectiveBonus={objectiveBonus}\n            factionMultiplier={factionMultiplier || 1}\n            nationalismMeter={nationalismMeter}\n            nativeResistance={nativeResistance}\n            navalDominance={navalDominance}\n            knowledgeCheckResults={knowledgeCheckResults}\n            battleStats={battleStats}\n            playerTerritoryCount={playerTerritoryCount}\n            roundsPlayed={round}\n            gameOverReason={gameOverReason}\n            difficulty={difficulty}\n            sessionId={sessionId}\n            classId={classId}\n          />\n        </div>\n\n        {/* Actions */}\n        <div className=\"px-4 md:px-8 pb-4 md:pb-6 flex gap-3\">\n          <button\n            onClick={() => setShowLeaderboard(true)}\n            className=\"flex-1 py-3.5 font-display text-sm rounded border border-parchment-dark/20 text-parchment/70\n                       hover:border-war-gold/40 hover:text-parchment transition-colors cursor-pointer tracking-wide\"\n          >\n            Leaderboard\n          </button>\n          <button\n            onClick={onPlayAgain}\n            className=\"flex-1 py-3.5 bg-war-gold text-war-ink font-display text-sm rounded\n                       hover:bg-war-brass transition-colors cursor-pointer font-bold tracking-wide shadow-copper\"\n          >\n            Play Again\n          </button>\n        </div>\n      </div>\n\n      {showLeaderboard && (\n        <Leaderboard\n          onClose={() => setShowLeaderboard(false)}\n          currentClassPeriod={classPeriod}\n        />\n      )}\n    </div>\n  );\n}\n","import React, { useState } from 'react';\n\nexport default function QuizReviewPanel({ history }) {\n  const [expandedIndex, setExpandedIndex] = useState(null);\n\n  if (!history || history.length === 0) return null;\n\n  return (\n    <div className=\"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8\">\n      <h3 className=\"text-war-gold/90 font-display text-base tracking-wide border-b border-war-gold/15 pb-2 mb-3\">\n        Quiz Review ({history.filter((h) => h.wasCorrect).length}/{history.length} correct)\n      </h3>\n      <div className=\"space-y-2 max-h-64 overflow-y-auto pr-1\">\n        {history.map((entry, i) => {\n          const isExpanded = expandedIndex === i;\n          return (\n            <div\n              key={i}\n              className={`p-2 rounded cursor-pointer transition-colors ${\n                entry.wasCorrect ? 'bg-green-900/15' : 'bg-red-900/10'\n              } hover:bg-black/15`}\n              onClick={() => setExpandedIndex(isExpanded ? null : i)}\n            >\n              <div className=\"flex items-start gap-2\">\n                <span className=\"text-sm mt-0.5 flex-shrink-0\">\n                  {entry.wasCorrect ? '\\u2705' : '\\u274C'}\n                </span>\n                <div className=\"min-w-0 flex-1\">\n                  <p className=\"text-parchment/80 text-sm font-bold leading-snug font-body\">\n                    {entry.question}\n                    <span className=\"text-parchment-dark/40 font-normal ml-1\">(Rd {entry.round})</span>\n                  </p>\n                  {isExpanded && (\n                    <div className=\"mt-2 space-y-1\">\n                      <p className=\"text-green-400/80 text-sm font-body\">\n                        Correct: <span className=\"font-bold\">{String.fromCharCode(65 + entry.correctIndex)}.</span> {entry.choices[entry.correctIndex]}\n                      </p>\n                      {!entry.wasCorrect && (\n                        <p className=\"text-red-400/80 text-sm font-body\">\n                          Your answer: <span className=\"font-bold\">{String.fromCharCode(65 + entry.selectedIndex)}.</span> {entry.choices[entry.selectedIndex]}\n                        </p>\n                      )}\n                      {entry.explanation && (\n                        <div className=\"mt-1.5 bg-black/20 rounded px-3 py-2 border-l-2 border-war-gold/20\">\n                          <p className=\"text-parchment-dark/60 text-sm leading-relaxed font-body\">{entry.explanation}</p>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nfunction computeTooltipPosition(spotlightRect) {\n  if (!spotlightRect) {\n    return {\n      top: '50%',\n      left: '50%',\n      transform: 'translate(-50%, -50%)',\n    };\n  }\n\n  const padding = 16;\n  const tooltipHeight = 220;\n  const tooltipWidth = 360;\n\n  // Prefer positioning below the spotlight\n  let top = spotlightRect.top + spotlightRect.height + padding;\n  let left = spotlightRect.left + spotlightRect.width / 2 - tooltipWidth / 2;\n\n  // If it would go off the bottom, position above\n  if (top + tooltipHeight > window.innerHeight - padding) {\n    top = spotlightRect.top - tooltipHeight - padding;\n  }\n\n  // Clamp to viewport\n  if (top < padding) top = padding;\n  if (left < padding) left = padding;\n  if (left + tooltipWidth > window.innerWidth - padding) {\n    left = window.innerWidth - tooltipWidth - padding;\n  }\n\n  return { top, left };\n}\n\nexport default function TutorialOverlay({\n  stepData,\n  currentStep,\n  totalSteps,\n  onNext,\n  onPrev,\n  onSkip,\n  gameMode,\n}) {\n  const [spotlightRect, setSpotlightRect] = useState(null);\n  const isExplorer = gameMode === 'explorer';\n\n  useEffect(() => {\n    if (!stepData?.target) {\n      setSpotlightRect(null);\n      return;\n    }\n\n    // Small delay to allow DOM to settle\n    const timer = setTimeout(() => {\n      const el = document.querySelector(stepData.target);\n      if (el) {\n        const rect = el.getBoundingClientRect();\n        // If element is off-screen, center tooltip instead\n        const offScreen =\n          rect.right < 0 || rect.left > window.innerWidth ||\n          rect.bottom < 0 || rect.top > window.innerHeight;\n        if (offScreen) {\n          setSpotlightRect(null);\n          return;\n        }\n        setSpotlightRect({\n          top: rect.top - 8,\n          left: rect.left - 8,\n          width: rect.width + 16,\n          height: rect.height + 16,\n        });\n      } else {\n        setSpotlightRect(null);\n      }\n    }, 100);\n\n    return () => clearTimeout(timer);\n  }, [stepData]);\n\n  if (!stepData) return null;\n\n  const tooltipPos = computeTooltipPosition(spotlightRect);\n  const description = isExplorer && stepData.simpleDescription\n    ? stepData.simpleDescription\n    : stepData.description;\n\n  return (\n    <>\n      {/* Dark backdrop */}\n      <div\n        className=\"tutorial-backdrop\"\n        onClick={(e) => e.stopPropagation()}\n      />\n\n      {/* Spotlight cutout */}\n      {spotlightRect && (\n        <div\n          className=\"tutorial-spotlight\"\n          style={{\n            top: spotlightRect.top,\n            left: spotlightRect.left,\n            width: spotlightRect.width,\n            height: spotlightRect.height,\n          }}\n        />\n      )}\n\n      {/* Tooltip */}\n      <div className=\"tutorial-tooltip\" style={tooltipPos}>\n        <h3>{stepData.title}</h3>\n        <p style={isExplorer ? { fontSize: '1rem', lineHeight: '1.75' } : undefined}>{description}</p>\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n          <span className=\"text-parchment-dark/50 text-xs font-body\">\n            Step {currentStep + 1} of {totalSteps}\n          </span>\n          <div style={{ display: 'flex', gap: '8px' }}>\n            {currentStep > 0 && (\n              <button\n                onClick={onPrev}\n                className=\"px-3 py-1.5 text-xs border border-parchment-dark/20 text-parchment-dark/60 rounded\n                           hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer font-body\"\n              >\n                Back\n              </button>\n            )}\n            <button\n              onClick={onNext}\n              className=\"px-4 py-1.5 text-xs bg-war-gold text-war-ink rounded font-bold\n                         hover:bg-war-brass transition-colors cursor-pointer font-display tracking-wide\"\n            >\n              {currentStep === totalSteps - 1 ? 'Finish' : 'Next'}\n            </button>\n          </div>\n        </div>\n        <button\n          onClick={onSkip}\n          className=\"mt-3 text-parchment-dark/40 text-xs cursor-pointer hover:text-parchment-dark/60 transition-colors font-body underline\"\n          style={{ background: 'none', border: 'none', padding: 0 }}\n        >\n          Skip Tutorial\n        </button>\n      </div>\n    </>\n  );\n}\n","import React, { useState, useEffect } from 'react';\n\nexport default function AITurnReplay({ aiActions, onClose, onHighlightTerritory }) {\n  const [currentStep, setCurrentStep] = useState(0);\n  const [autoPlay, setAutoPlay] = useState(false);\n\n  const totalSteps = aiActions.length;\n  const currentAction = aiActions[currentStep];\n\n  // Auto-advance when autoPlay is enabled\n  useEffect(() => {\n    if (!autoPlay || currentStep >= totalSteps - 1) return;\n\n    const timer = setTimeout(() => {\n      setCurrentStep((s) => s + 1);\n    }, 1500);\n\n    return () => clearTimeout(timer);\n  }, [autoPlay, currentStep, totalSteps]);\n\n  // Highlight territories involved in current action\n  useEffect(() => {\n    if (!currentAction) return;\n\n    const territories = [];\n    if (currentAction.from) territories.push(currentAction.from);\n    if (currentAction.to) territories.push(currentAction.to);\n    if (currentAction.territory) territories.push(currentAction.territory);\n\n    onHighlightTerritory(territories);\n\n    return () => onHighlightTerritory([]);\n  }, [currentAction, onHighlightTerritory]);\n\n  const handleNext = () => {\n    if (currentStep < totalSteps - 1) {\n      setCurrentStep((s) => s + 1);\n    }\n  };\n\n  const handlePrevious = () => {\n    if (currentStep > 0) {\n      setCurrentStep((s) => s - 1);\n    }\n  };\n\n  const getActionLine = (action) => {\n    if (!action) return '';\n    switch (action.type) {\n      case 'reinforce':\n        return `Reinforced ${action.territory} (+${action.troops})`;\n      case 'attack': {\n        const won = action.result === 'captured' || action.result === 'won';\n        const result = won ? 'Captured!' : 'Repelled';\n        const casualties = action.casualties\n          ? ` (lost ${action.casualties.attacker || 0}, killed ${action.casualties.defender || 0})`\n          : '';\n        return `${action.from} \\u2192 ${action.to}: ${result}${casualties}`;\n      }\n      case 'maneuver':\n        return `${action.from} \\u2192 ${action.to}: moved ${action.troops}`;\n      default:\n        return action.message || 'Unknown action';\n    }\n  };\n\n  const getActionIcon = (action) => {\n    if (!action) return '\\u2022';\n    switch (action.type) {\n      case 'reinforce': return '\\u2694';\n      case 'attack': {\n        const won = action.result === 'captured' || action.result === 'won';\n        return won ? '\\uD83C\\uDFF4' : '\\uD83D\\uDEE1\\uFE0F';\n      }\n      case 'maneuver': return '\\u2192';\n      default: return '\\u2022';\n    }\n  };\n\n  const getResultColor = (action) => {\n    if (!action) return 'text-parchment/80';\n    if (action.type === 'attack') {\n      const won = action.result === 'captured' || action.result === 'won';\n      return won ? 'text-red-400' : 'text-green-400';\n    }\n    if (action.type === 'reinforce') return 'text-red-300/80';\n    return 'text-parchment/80';\n  };\n\n  if (totalSteps === 0) {\n    return null;\n  }\n\n  const progressPercent = ((currentStep + 1) / totalSteps) * 100;\n\n  return (\n    <div className=\"absolute bottom-0 left-0 right-0 animate-fadein\" style={{ zIndex: 50 }}>\n      {/* Progress bar at top edge */}\n      <div className=\"h-1 bg-war-ink/80\">\n        <div\n          className=\"h-full transition-all duration-300\"\n          style={{ width: `${progressPercent}%`, background: 'linear-gradient(to right, #854d0e, #c9a227)' }}\n        />\n      </div>\n\n      {/* Panel body */}\n      <div className=\"bg-war-navy/95 backdrop-blur border-t border-war-gold/20 px-4 py-3\">\n        <div className=\"flex items-center gap-3\">\n          {/* Label + counter */}\n          <div className=\"flex items-center gap-2 flex-shrink-0\">\n            <div className=\"w-1.5 h-1.5 rounded-full bg-red-500/80 flex-shrink-0\" />\n            <span className=\"text-red-400/80 text-sm tracking-[0.15em] uppercase font-body font-bold hidden sm:inline\">Intel</span>\n            <span className=\"text-parchment-dark/50 text-sm font-body\">{currentStep + 1}/{totalSteps}</span>\n          </div>\n\n          {/* Divider */}\n          <div className=\"w-px h-6 bg-parchment-dark/15 flex-shrink-0\" />\n\n          {/* Action icon + description */}\n          <div className=\"flex-1 min-w-0 flex items-center gap-2\">\n            <span className=\"text-sm flex-shrink-0\">{getActionIcon(currentAction)}</span>\n            <p className={`text-sm font-body truncate ${getResultColor(currentAction)}`}>\n              {getActionLine(currentAction)}\n            </p>\n          </div>\n\n          {/* Divider */}\n          <div className=\"w-px h-6 bg-parchment-dark/15 flex-shrink-0\" />\n\n          {/* Controls */}\n          <div className=\"flex items-center gap-1.5 flex-shrink-0\">\n            <button\n              onClick={handlePrevious}\n              disabled={currentStep === 0}\n              className={`w-8 h-8 flex items-center justify-center rounded text-sm transition-colors ${\n                currentStep === 0\n                  ? 'text-parchment-dark/20 cursor-not-allowed'\n                  : 'text-parchment/60 hover:text-parchment hover:bg-white/5 cursor-pointer'\n              }`}\n              aria-label=\"Previous action\"\n            >\n              &#x25C0;\n            </button>\n\n            <button\n              onClick={() => setAutoPlay(!autoPlay)}\n              className={`w-8 h-8 flex items-center justify-center rounded text-sm transition-colors cursor-pointer ${\n                autoPlay\n                  ? 'text-war-gold bg-war-gold/15 border border-war-gold/30'\n                  : 'text-parchment/60 hover:text-war-gold hover:bg-war-gold/10'\n              }`}\n              aria-label={autoPlay ? 'Pause auto-play' : 'Auto-play'}\n              title={autoPlay ? 'Pause' : 'Auto'}\n            >\n              {autoPlay ? '\\u23F8' : '\\u25B6'}\n            </button>\n\n            <button\n              onClick={handleNext}\n              disabled={currentStep >= totalSteps - 1}\n              className={`w-8 h-8 flex items-center justify-center rounded text-sm transition-colors ${\n                currentStep >= totalSteps - 1\n                  ? 'text-parchment-dark/20 cursor-not-allowed'\n                  : 'text-parchment/60 hover:text-parchment hover:bg-white/5 cursor-pointer'\n              }`}\n              aria-label=\"Next action\"\n            >\n              &#x25B6;\n            </button>\n\n            {/* Divider before close/continue */}\n            <div className=\"w-px h-6 bg-parchment-dark/15 mx-0.5\" />\n\n            <button\n              onClick={onClose}\n              className={`px-3 py-1.5 font-display text-sm rounded tracking-wide transition-colors cursor-pointer ${\n                currentStep >= totalSteps - 1\n                  ? 'bg-war-gold text-war-ink hover:bg-war-brass font-bold shadow-copper'\n                  : 'text-parchment-dark/50 hover:text-parchment border border-parchment-dark/20 hover:border-parchment-dark/40'\n              }`}\n            >\n              {currentStep >= totalSteps - 1 ? 'Done' : 'Skip'}\n            </button>\n          </div>\n        </div>\n\n        {/* Summary row */}\n        <div className=\"mt-1.5 flex items-center gap-3\">\n          <p className=\"text-sm text-parchment-dark/30 font-body\">\n            {aiActions.filter((a) => a.type === 'attack').length} attacks, {aiActions.filter((a) => a.type === 'reinforce').length} reinforcements\n            {aiActions.filter((a) => a.type === 'maneuver').length > 0 && (\n              <>, {aiActions.filter((a) => a.type === 'maneuver').length} maneuvers</>\n            )}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useRef, useEffect } from 'react';\n\nexport default function VictoryProgress({\n  currentScore, playerFaction, nationalismMeter, nativeResistance,\n  navalDominance, objectiveBonus, round,\n}) {\n  let multiplier = 1;\n  if (playerFaction === 'us') multiplier = 1 + nationalismMeter / 100;\n  else if (playerFaction === 'native') multiplier = 1 + (Math.min(nativeResistance, 6) / 6) * 0.5;\n  else if (playerFaction === 'british') multiplier = 1 + (Math.min(navalDominance, 4) / 4) * 0.3;\n\n  const baseScore = currentScore || 0;\n  const finalScore = Math.round(baseScore * multiplier) + objectiveBonus;\n  const VICTORY_THRESHOLD = 50;\n\n  const previousScoreRef = useRef(0);\n  const previousRoundRef = useRef(round);\n  const scoreChange = (round > previousRoundRef.current) ? (finalScore - previousScoreRef.current) : 0;\n  const showChange = scoreChange !== 0 && round > 1;\n\n  useEffect(() => {\n    if (round > previousRoundRef.current) {\n      previousScoreRef.current = finalScore;\n      previousRoundRef.current = round;\n    }\n  }, [round, finalScore]);\n\n  const progressPercent = Math.min((finalScore / VICTORY_THRESHOLD) * 100, 100);\n\n  const isClose = finalScore >= 40;\n  const isHalfway = finalScore >= 25;\n\n  return (\n    <div className=\"victory-progress-container\" style={{ position: 'relative', zIndex: 1000 }}>\n      <div className={`bg-war-navy/80 border rounded-lg px-3 py-2.5 shadow-card ${\n        isClose ? 'border-green-500/30' : 'border-war-gold/15'\n      }`}>\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-2\">\n          <h3 className=\"text-war-gold/80 font-display text-base tracking-wide\">Victory</h3>\n          <div className=\"flex items-center gap-2\">\n            {showChange && (\n              <span className={`text-sm font-bold font-body ${scoreChange > 0 ? 'text-green-400' : 'text-red-400'}`}>\n                {scoreChange > 0 ? '+' : ''}{scoreChange}\n              </span>\n            )}\n            <span className={`text-xl font-bold font-display ${isClose ? 'text-green-400' : isHalfway ? 'text-war-gold' : 'text-parchment/80'}`}>\n              {finalScore}\n            </span>\n            <span className=\"text-parchment-dark/40 text-sm font-body\">/ {VICTORY_THRESHOLD}</span>\n          </div>\n        </div>\n\n        {/* Progress bar */}\n        <div className=\"w-full bg-war-ink rounded-full h-4 border border-parchment-dark/10 overflow-hidden mb-1.5\">\n          <div\n            className=\"h-full transition-all duration-700 ease-out relative rounded-full\"\n            style={{\n              width: `${progressPercent}%`,\n              background: isClose\n                ? 'linear-gradient(to right, #166534, #22c55e)'\n                : isHalfway\n                ? 'linear-gradient(to right, #854d0e, #c9a227)'\n                : 'linear-gradient(to right, #44403c, #a8a29e)',\n            }}\n          >\n            <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/15 to-transparent animate-shimmer\" />\n          </div>\n        </div>\n\n        {/* Status */}\n        <p className={`text-center text-sm font-body ${isClose ? 'text-green-400/80 font-bold' : isHalfway ? 'text-war-gold/60' : 'text-parchment-dark/40 italic'}`}>\n          {isClose ? 'Near victory!' : isHalfway ? 'Keep fighting!' : `${VICTORY_THRESHOLD - finalScore} pts remaining`}\n        </p>\n\n        {/* Score breakdown */}\n        {(multiplier > 1 || objectiveBonus > 0) && (\n          <div className=\"mt-2 pt-2 border-t border-parchment-dark/10\">\n            <div className=\"text-sm text-parchment-dark/40 space-y-0.5 font-body\">\n              <div className=\"flex justify-between\"><span>Base</span><span>{baseScore}</span></div>\n              {multiplier > 1 && <div className=\"flex justify-between\"><span>Multiplier</span><span>x{multiplier.toFixed(2)}</span></div>}\n              {objectiveBonus > 0 && <div className=\"flex justify-between\"><span>Objectives</span><span className=\"text-war-gold/70\">+{objectiveBonus}</span></div>}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect } from 'react';\n\nexport default function ConfirmActionModal({ actionType, actionData, onConfirm, onCancel }) {\n  useEffect(() => {\n    const handleKeyPress = (e) => {\n      if (e.key === 'Enter') {\n        e.preventDefault();\n        onConfirm();\n      } else if (e.key === 'Escape') {\n        e.preventDefault();\n        onCancel();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [onConfirm, onCancel]);\n\n  if (!actionData) return null;\n\n  const isPlacement = actionType === 'placement';\n  const isManeuver = actionType === 'maneuver';\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4\" style={{ zIndex: 1000 }} role=\"presentation\">\n      <div className=\"bg-war-navy border border-war-gold/30 rounded-lg max-w-md w-full shadow-modal animate-fadein\" role=\"dialog\" aria-modal=\"true\" aria-label={isPlacement ? 'Confirm deployment' : 'Confirm maneuver'}>\n        {/* Header */}\n        <div className=\"px-6 py-4 border-b border-war-gold/20\" style={{\n          background: 'linear-gradient(135deg, rgba(184,115,51,0.2) 0%, rgba(20,30,48,0.95) 100%)',\n        }}>\n          <div className=\"flex items-center gap-2 mb-1\">\n            <div className=\"w-1.5 h-1.5 rounded-full bg-war-copper/80\" />\n            <p className=\"text-war-copper text-sm tracking-[0.2em] uppercase font-body font-bold\">\n              {isPlacement ? 'Deployment Order' : 'Maneuver Order'}\n            </p>\n          </div>\n          <h3 className=\"text-parchment font-display text-lg tracking-wide\">\n            {isPlacement && 'Confirm Deployment'}\n            {isManeuver && 'Confirm Maneuver'}\n          </h3>\n        </div>\n\n        {/* Body */}\n        <div className=\"px-6 py-5\">\n          <p className=\"text-parchment/90 font-body text-base mb-5 leading-relaxed\">\n            {isPlacement && `Deploy ${actionData.troopCount} ${actionData.troopCount === 1 ? 'troop' : 'troops'} to ${actionData.territoryName}?`}\n            {isManeuver && `Move ${actionData.troopCount} ${actionData.troopCount === 1 ? 'troop' : 'troops'} from ${actionData.fromTerritoryName} to ${actionData.territoryName}?`}\n          </p>\n\n          {/* Preview box */}\n          <div className=\"bg-black/20 rounded px-5 py-4 border-l-2 border-war-copper/50\">\n            <p className=\"text-sm text-war-copper/80 uppercase tracking-wider mb-3 font-body font-bold\">Preview</p>\n\n            {isPlacement && (\n              <div className=\"space-y-2 font-body\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-parchment-dark/60 text-sm\">Current garrison:</span>\n                  <span className=\"text-parchment/80 font-bold\">{actionData.currentTroops}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-parchment-dark/60 text-sm\">After deployment:</span>\n                  <span className=\"text-war-gold font-bold text-lg font-display\">{actionData.newTroops}</span>\n                </div>\n              </div>\n            )}\n\n            {isManeuver && (\n              <div className=\"space-y-3 font-body\">\n                <div>\n                  <p className=\"text-parchment-dark/50 text-sm uppercase mb-1 font-bold\">{actionData.fromTerritoryName}</p>\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-parchment-dark/60 text-sm\">Current:</span>\n                    <span className=\"text-parchment/80\">{actionData.fromCurrentTroops}</span>\n                  </div>\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-parchment-dark/60 text-sm\">After:</span>\n                    <span className=\"text-war-gold font-bold\">{actionData.fromNewTroops}</span>\n                  </div>\n                </div>\n                <div className=\"border-t border-parchment-dark/10 pt-2\">\n                  <p className=\"text-parchment-dark/50 text-sm uppercase mb-1 font-bold\">{actionData.territoryName}</p>\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-parchment-dark/60 text-sm\">Current:</span>\n                    <span className=\"text-parchment/80\">{actionData.currentTroops}</span>\n                  </div>\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-parchment-dark/60 text-sm\">After:</span>\n                    <span className=\"text-war-gold font-bold\">{actionData.newTroops}</span>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Keyboard hint */}\n          <p className=\"text-parchment-dark/40 text-sm text-center mt-4 font-body italic\">\n            Press Enter to confirm, Esc to cancel\n          </p>\n        </div>\n\n        {/* Action buttons */}\n        <div className=\"px-6 pb-5 flex gap-3\">\n          <button\n            onClick={onCancel}\n            className=\"flex-1 px-6 py-3 font-display text-base rounded border border-parchment-dark/20 text-parchment/70\n                       hover:border-war-gold/40 hover:text-parchment transition-colors cursor-pointer tracking-wide\"\n            style={{ minHeight: '44px' }}\n          >\n            Cancel\n          </button>\n          <button\n            onClick={onConfirm}\n            className=\"flex-1 px-6 py-3 font-display text-base rounded bg-war-gold text-war-ink\n                       hover:bg-war-brass transition-colors cursor-pointer font-bold tracking-wide shadow-copper\"\n            style={{ minHeight: '44px' }}\n          >\n            Confirm\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * War of 1812 Vocabulary Definitions\n *\n * Key terms students should understand before and during gameplay.\n * Used for in-game tooltips and teacher prep materials.\n */\n\nexport const vocabulary = {\n  // Military Terms\n  impressment: {\n    term: \"Impressment\",\n    definition: \"The British practice of forcing American sailors to serve in the Royal Navy against their will.\",\n    grade: \"8th\",\n    useInSentence: \"British impressment of American sailors was one of the main causes of the War of 1812.\"\n  },\n\n  militia: {\n    term: \"Militia\",\n    definition: \"Citizen soldiers who are not part of the regular army but can be called to defend their communities in times of war.\",\n    grade: \"8th\",\n    useInSentence: \"American militia helped defend Baltimore during the Battle of Fort McHenry.\"\n  },\n\n  garrison: {\n    term: \"Garrison\",\n    definition: \"Troops stationed in a fort or territory to defend it.\",\n    grade: \"8th\",\n    useInSentence: \"The garrison at Fort Detroit surrendered without a fight in 1812.\"\n  },\n\n  reinforcements: {\n    term: \"Reinforcements\",\n    definition: \"Additional troops sent to strengthen an army or garrison.\",\n    grade: \"8th\",\n    useInSentence: \"British reinforcements arrived from Europe after Napoleon's defeat.\"\n  },\n\n  blockade: {\n    term: \"Blockade\",\n    definition: \"Using ships to prevent supplies, troops, or trade goods from entering or leaving enemy ports.\",\n    grade: \"8th\",\n    useInSentence: \"The British naval blockade severely damaged American trade during the war.\"\n  },\n\n  privateers: {\n    term: \"Privateers\",\n    definition: \"Privately owned ships authorized by the government to attack and capture enemy merchant vessels.\",\n    grade: \"8th\",\n    useInSentence: \"American privateers captured hundreds of British merchant ships during the war.\"\n  },\n\n  theater: {\n    term: \"Theater of War\",\n    definition: \"A major geographic area where military operations take place during a war.\",\n    grade: \"8th\",\n    useInSentence: \"The War of 1812 had four main theaters: Great Lakes, Chesapeake, Southern, and Maritime.\"\n  },\n\n  fortification: {\n    term: \"Fortification\",\n    definition: \"A military structure built to defend a location, such as a fort with walls, cannons, and defensive positions.\",\n    grade: \"8th\",\n    useInSentence: \"Fort McHenry's fortifications withstood 25 hours of British bombardment.\"\n  },\n\n  // Political/Diplomatic Terms\n  nationalism: {\n    term: \"Nationalism\",\n    definition: \"Strong pride in and loyalty to one's nation; a sense of national identity and unity.\",\n    grade: \"8th\",\n    useInSentence: \"American nationalism grew stronger after victories at Lake Erie and New Orleans.\"\n  },\n\n  sovereignty: {\n    term: \"Sovereignty\",\n    definition: \"The authority of a nation to govern itself without interference from other nations.\",\n    grade: \"8th\",\n    useInSentence: \"Native tribes fought to maintain their sovereignty over traditional lands.\"\n  },\n\n  treaty: {\n    term: \"Treaty\",\n    definition: \"A formal agreement between nations to end a war or establish peaceful relations.\",\n    grade: \"8th\",\n    useInSentence: \"The Treaty of Ghent ended the War of 1812 in December 1814.\"\n  },\n\n  neutral: {\n    term: \"Neutral Rights\",\n    definition: \"The right of nations not involved in a war to trade freely with both sides without interference.\",\n    grade: \"8th\",\n    useInSentence: \"The United States claimed neutral rights to trade with both Britain and France during the Napoleonic Wars.\"\n  },\n\n  embargo: {\n    term: \"Embargo\",\n    definition: \"A government order that stops trade with another country as a form of economic pressure.\",\n    grade: \"8th\",\n    useInSentence: \"The 1807 Embargo Act backfired by hurting American merchants more than British ones.\"\n  },\n\n  // Native American Terms\n  confederacy: {\n    term: \"Confederacy\",\n    definition: \"An alliance or union of groups (such as tribes) working together for a common purpose.\",\n    grade: \"8th\",\n    useInSentence: \"Tecumseh created a Native confederacy to resist American expansion into the Northwest Territory.\"\n  },\n\n  resistance: {\n    term: \"Resistance\",\n    definition: \"The act of fighting back against an occupying or threatening force.\",\n    grade: \"8th\",\n    useInSentence: \"Native American resistance to westward expansion increased in the early 1800s.\"\n  },\n\n  // Geographic Terms\n  frontier: {\n    term: \"Frontier\",\n    definition: \"The border region between settled areas and wilderness; the edge of American settlement moving westward.\",\n    grade: \"8th\",\n    useInSentence: \"Fighting on the frontier was brutal as settlers and Native tribes clashed over land.\"\n  },\n\n  territory: {\n    term: \"Territory\",\n    definition: \"A region of land under the control of a government but not yet a full state; also refers to areas controlled during war.\",\n    grade: \"8th\",\n    useInSentence: \"The Northwest Territory was disputed between the United States, Britain, and Native tribes.\"\n  },\n\n  // Naval Terms\n  frigate: {\n    term: \"Frigate\",\n    definition: \"A fast, medium-sized warship with powerful cannons, used for patrols and battles.\",\n    grade: \"8th\",\n    useInSentence: \"The USS Constitution was a famous American frigate nicknamed 'Old Ironsides.'\"\n  },\n\n  flagship: {\n    term: \"Flagship\",\n    definition: \"The ship carrying the commanding officer of a fleet or naval squadron.\",\n    grade: \"8th\",\n    useInSentence: \"Oliver Hazard Perry's flagship, the USS Lawrence, was badly damaged at the Battle of Lake Erie.\"\n  },\n\n  // Game-Specific Terms\n  victoryPoints: {\n    term: \"Victory Points\",\n    definition: \"Points earned by controlling strategic territories and achieving objectives; the first side to reach 50 points wins.\",\n    grade: \"8th\",\n    useInSentence: \"Washington D.C. is worth 2 victory points because it's the American capital.\"\n  },\n\n  maneuver: {\n    term: \"Maneuver\",\n    definition: \"A strategic movement of troops from one territory to an adjacent friendly territory.\",\n    grade: \"8th\",\n    useInSentence: \"You can maneuver troops between your territories to reinforce weak positions.\"\n  },\n\n  adjacency: {\n    term: \"Adjacent\",\n    definition: \"Neighboring or next to each other; territories that share a border.\",\n    grade: \"8th\",\n    useInSentence: \"You can only attack territories that are adjacent to ones you control.\"\n  },\n\n  // Historical Context Terms\n  napoleonic: {\n    term: \"Napoleonic Wars\",\n    definition: \"Series of wars (1803-1815) between France under Napoleon Bonaparte and various European powers, especially Britain.\",\n    grade: \"8th\",\n    useInSentence: \"Britain was focused on fighting Napoleon in Europe, which distracted them from the American war.\"\n  },\n\n  republicanism: {\n    term: \"Republicanism\",\n    definition: \"A political ideology emphasizing representative government, citizen participation, and resistance to monarchy.\",\n    grade: \"8th\",\n    useInSentence: \"American republicanism clashed with British monarchical traditions during this era.\"\n  },\n};\n\n/**\n * Get vocabulary definition by term (case-insensitive)\n */\nexport function getDefinition(term) {\n  const key = Object.keys(vocabulary).find(\n    k => vocabulary[k].term.toLowerCase() === term.toLowerCase()\n  );\n  return key ? vocabulary[key] : null;\n}\n\n/**\n * Get all terms as array (for display lists)\n */\nexport function getAllTerms() {\n  return Object.values(vocabulary).sort((a, b) =>\n    a.term.localeCompare(b.term)\n  );\n}\n\n/**\n * Get terms by category\n */\nexport function getTermsByCategory() {\n  return {\n    military: [\n      vocabulary.impressment,\n      vocabulary.militia,\n      vocabulary.garrison,\n      vocabulary.reinforcements,\n      vocabulary.blockade,\n      vocabulary.privateers,\n      vocabulary.theater,\n      vocabulary.fortification,\n    ],\n    political: [\n      vocabulary.nationalism,\n      vocabulary.sovereignty,\n      vocabulary.treaty,\n      vocabulary.neutral,\n      vocabulary.embargo,\n    ],\n    nativeAmerican: [\n      vocabulary.confederacy,\n      vocabulary.resistance,\n    ],\n    geographic: [\n      vocabulary.frontier,\n      vocabulary.territory,\n    ],\n    naval: [\n      vocabulary.frigate,\n      vocabulary.flagship,\n    ],\n    gameplay: [\n      vocabulary.victoryPoints,\n      vocabulary.maneuver,\n      vocabulary.adjacency,\n    ],\n    historicalContext: [\n      vocabulary.napoleonic,\n      vocabulary.republicanism,\n    ],\n  };\n}\n\nexport default vocabulary;\n","import React, { useState } from 'react';\nimport { getTermsByCategory } from '../data/vocabulary';\n\nconst CATEGORY_LABELS = {\n  military: 'Military',\n  political: 'Political',\n  nativeAmerican: 'Native American',\n  geographic: 'Geographic',\n  naval: 'Naval',\n  gameplay: 'Gameplay',\n  historicalContext: 'Historical Context',\n};\n\nexport default function GlossaryPanel() {\n  const [expanded, setExpanded] = useState(false);\n  const [openTerm, setOpenTerm] = useState(null);\n  const categories = getTermsByCategory();\n\n  return (\n    <div className=\"bg-war-navy/50 rounded-lg border border-parchment-dark/8\">\n      <button\n        onClick={() => setExpanded(!expanded)}\n        className=\"w-full px-3 py-2.5 flex items-center justify-between cursor-pointer hover:bg-white/3 transition-colors rounded-lg\"\n      >\n        <h3 className=\"text-war-gold/90 font-display text-base tracking-wide\">\n          Glossary\n        </h3>\n        <span className=\"text-parchment-dark/40 text-sm font-body\">\n          {expanded ? '\\u25B2' : '\\u25BC'}\n        </span>\n      </button>\n\n      {expanded && (\n        <div className=\"px-3 pb-3 space-y-2 max-h-64 overflow-y-auto\">\n          {Object.entries(categories).map(([catKey, terms]) => (\n            <div key={catKey}>\n              <p className=\"text-war-copper/70 text-xs uppercase tracking-widest font-body font-bold mb-1 mt-1\">\n                {CATEGORY_LABELS[catKey]}\n              </p>\n              {terms.map((entry) => {\n                const isOpen = openTerm === entry.term;\n                return (\n                  <div key={entry.term} className=\"border-l-2 border-parchment-dark/10 ml-0.5\">\n                    <button\n                      onClick={() => setOpenTerm(isOpen ? null : entry.term)}\n                      className=\"w-full text-left pl-2.5 py-1 cursor-pointer hover:bg-white/3 transition-colors flex items-center justify-between\"\n                      aria-expanded={isOpen}\n                    >\n                      <span className=\"text-parchment/80 text-sm font-body font-bold\">{entry.term}</span>\n                      <span className=\"text-parchment-dark/30 text-xs\">{isOpen ? '\\u2212' : '+'}</span>\n                    </button>\n                    {isOpen && (\n                      <div className=\"pl-2.5 pb-1.5\">\n                        <p className=\"text-parchment/60 text-sm font-body leading-relaxed\">{entry.definition}</p>\n                        <p className=\"text-parchment-dark/40 text-xs font-body italic mt-1 leading-relaxed\">\n                          &ldquo;{entry.useInSentence}&rdquo;\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * People Profiles for War of 1812: Rise of the Nation\n *\n * Biographical profiles of key historical figures, including game leaders\n * and additional voices that broaden the narrative beyond military commanders.\n *\n * Each profile includes:\n *  - id: unique key (matches leaders.js id for game leaders)\n *  - name: display name\n *  - years: birth-death string\n *  - faction: 'us' | 'british' | 'native'\n *  - category: 'military' | 'political' | 'civilian' | 'native_leader'\n *  - isGameLeader: whether this person is a playable leader in the game\n *  - title: rank or role\n *  - biography: array of 2-3 paragraph strings\n *  - primarySources: array of { quote, attribution, context }\n *  - didYouKnow: fun-fact string\n */\n\nconst profiles = [\n  // \n  //  UNITED STATES  Game Leaders\n  // \n\n  {\n    id: 'jackson',\n    name: 'Andrew Jackson',\n    years: '17671845',\n    faction: 'us',\n    category: 'military',\n    isGameLeader: true,\n    title: 'Major General',\n    biography: [\n      'Andrew Jackson was a self-made Tennessee frontiersman who became the War of 1812\\'s greatest American hero. Born into poverty along the Carolina frontier, he rose through sheer force of will to become a lawyer, congressman, and militia commander. He had no formal military training, but his iron determination and fierce temper earned him the nickname \"Old Hickory\" from soldiers who said he was as tough as the hardest wood.',\n      'His victory at the Battle of New Orleans in January 1815 made him a national icon. Commanding one of the most diverse armies in American history  regulars, frontier militia, free Black troops, Choctaw warriors, and Jean Lafitte\\'s pirates  Jackson inflicted over 2,000 British casualties while losing only 71 of his own men. It was the most lopsided American victory of the war.',\n      'Jackson\\'s wartime fame launched him to the presidency in 1828. As president, however, he signed the Indian Removal Act of 1830, which forced tens of thousands of Native people from their homelands  a dark irony given his wartime alliances with Choctaw and Cherokee warriors who had fought beside him.',\n    ],\n    primarySources: [\n      {\n        quote: 'I have always been ready to lay down my life for my country.',\n        attribution: 'Andrew Jackson',\n        context: 'A sentiment Jackson expressed throughout his military and political career.',\n      },\n    ],\n    didYouKnow:\n      'Jackson fought his first battle at age 13 during the American Revolution and carried a British officer\\'s saber scar on his face for life.',\n  },\n\n  {\n    id: 'perry',\n    name: 'Oliver Hazard Perry',\n    years: '17851819',\n    faction: 'us',\n    category: 'military',\n    isGameLeader: true,\n    title: 'Commodore',\n    biography: [\n      'Oliver Hazard Perry built a fleet from scratch on the shores of Lake Erie and won the decisive naval battle of the war. Only 27 years old during the engagement, Perry supervised the construction of an entire squadron using green timber cut from the surrounding forests. His determination to control the Great Lakes was critical to the American war effort in the west.',\n      'When his flagship Lawrence was shattered by British cannon fire and most of its crew killed or wounded, Perry refused to surrender. He climbed into a small rowboat and, under a hail of enemy fire, rowed to the undamaged brig Niagara. From there he broke through the British line and forced the entire enemy squadron to surrender. His message to General William Henry Harrison  \"We have met the enemy and they are ours\"  became one of the most famous dispatches in American military history.',\n    ],\n    primarySources: [\n      {\n        quote: 'We have met the enemy and they are ours: two ships, two brigs, one schooner and one sloop.',\n        attribution: 'Oliver Hazard Perry, September 10, 1813',\n        context: 'Perry\\'s dispatch to General Harrison after the Battle of Lake Erie.',\n      },\n    ],\n    didYouKnow:\n      'Perry praised his African American sailors, who made up about 25% of his crew, saying they \"seemed absolutely insensible to danger.\"',\n  },\n\n  {\n    id: 'harrison',\n    name: 'William Henry Harrison',\n    years: '17731841',\n    faction: 'us',\n    category: 'military',\n    isGameLeader: true,\n    title: 'Major General',\n    biography: [\n      'William Henry Harrison was Governor of Indiana Territory before the war and was already famous for leading American forces at the Battle of Tippecanoe in 1811, where he destroyed Prophetstown, the spiritual center of Tecumseh\\'s confederacy. When the War of 1812 began, he was appointed commander of the Army of the Northwest.',\n      'After Perry\\'s victory on Lake Erie opened the water route into Canada, Harrison pursued the retreating British army and defeated them at the Battle of the Thames in October 1813. During that battle, Tecumseh was killed  shattering the pan-Native alliance. Harrison became a national hero and later rode his fame to the White House, winning the 1840 presidential election with the famous slogan \"Tippecanoe and Tyler Too.\"',\n    ],\n    primarySources: [\n      {\n        quote: 'The American backwoodsmen are the best soldiers in the world for a campaign in the wilderness.',\n        attribution: 'William Henry Harrison',\n        context: 'Harrison\\'s assessment of frontier fighters during the Northwest campaign.',\n      },\n    ],\n    didYouKnow:\n      'Harrison served the shortest presidency in history  just 31 days. He caught pneumonia at his inauguration and died a month later.',\n  },\n\n  {\n    id: 'winfield_scott',\n    name: 'Winfield Scott',\n    years: '17861866',\n    faction: 'us',\n    category: 'military',\n    isGameLeader: true,\n    title: 'Brigadier General',\n    biography: [\n      'Winfield Scott was a young officer who transformed the professionalism of the American army during the War of 1812. Captured by the British at the disastrous Battle of Queenston Heights early in the war, he was exchanged and returned to service with a fierce determination to train American soldiers to match British regulars.',\n      'Scott drilled his troops rigorously using French military manuals, insisting on discipline, proper formations, and bayonet practice. His efforts paid off spectacularly at the battles of Chippawa and Lundy\\'s Lane in 1814, where his brigade stood toe-to-toe with British veterans and proved that American regulars could fight as well as any army in the world. Scott went on to serve as commanding general during the Mexican-American War and was still in command at the start of the Civil War.',\n    ],\n    primarySources: [\n      {\n        quote: 'Take care of your men, and they will take care of you.',\n        attribution: 'Attributed to Winfield Scott',\n        context: 'A principle Scott followed throughout his long military career.',\n      },\n    ],\n    didYouKnow:\n      'Scott served in the military for over 50 years  from the War of 1812 through the start of the Civil War. He was the longest-serving general in American history.',\n  },\n\n  // \n  //  BRITISH / CANADA  Game Leaders\n  // \n\n  {\n    id: 'brock',\n    name: 'Isaac Brock',\n    years: '17691812',\n    faction: 'british',\n    category: 'military',\n    isGameLeader: true,\n    title: 'Major General',\n    biography: [\n      'Isaac Brock was the bold and charismatic commander who saved Upper Canada in the opening months of the War of 1812. When American General William Hull invaded Canada with a larger force, Brock responded with audacity  marching rapidly to Detroit and using a brilliant combination of bluff, psychological warfare, and his alliance with Tecumseh to convince Hull that he faced overwhelming numbers. Hull surrendered Detroit without a fight, a humiliation that shocked the American public.',\n      'Brock was killed leading a charge at the Battle of Queenston Heights on October 13, 1812. His death was a devastating blow to British morale, but his early victories inspired the defense of Canada for the rest of the war. He remains one of Canada\\'s greatest national heroes, celebrated for saving the colony when it seemed most vulnerable.',\n    ],\n    primarySources: [\n      {\n        quote: 'Push on, brave York Volunteers!',\n        attribution: 'Isaac Brock, October 13, 1812',\n        context: 'Brock\\'s last words as he led a charge up the heights at Queenston.',\n      },\n    ],\n    didYouKnow:\n      'Brock\\'s monument at Queenston Heights is 56 meters tall  one of the tallest monuments in Canada. He was mourned by both British and Native allies.',\n  },\n\n  {\n    id: 'drummond',\n    name: 'Gordon Drummond',\n    years: '17721854',\n    faction: 'british',\n    category: 'military',\n    isGameLeader: true,\n    title: 'Lieutenant General',\n    biography: [\n      'Gordon Drummond was the first Canadian-born officer to command all British forces in Canada. He took over leadership after Brock\\'s death and directed the defense of the Niagara frontier during some of the war\\'s most intense fighting.',\n      'Drummond commanded British forces at the brutal Battle of Lundy\\'s Lane on July 25, 1814  one of the bloodiest engagements of the entire war. Fighting raged into the night at close range, with both sides suffering heavy casualties. Drummond was wounded during the battle but refused to leave the field, rallying his men to hold their ground. His leadership helped keep Upper Canada in British hands through the final year of the war.',\n    ],\n    primarySources: [\n      {\n        quote: 'The troops have behaved with a gallantry and discipline which cannot be surpassed.',\n        attribution: 'Gordon Drummond',\n        context: 'Drummond\\'s official report on the Battle of Lundy\\'s Lane.',\n      },\n    ],\n    didYouKnow:\n      'Drummond was born in Quebec City, making him the first person born in Canada to command all British forces in the province.',\n  },\n\n  {\n    id: 'ross',\n    name: 'Robert Ross',\n    years: '17661814',\n    faction: 'british',\n    category: 'military',\n    isGameLeader: true,\n    title: 'Major General',\n    biography: [\n      'Robert Ross was a veteran of the Napoleonic Wars who led the most dramatic British operation of the war  the burning of Washington, D.C. in August 1814. After routing American defenders at the Battle of Bladensburg, his troops marched straight into the American capital, making Ross the only foreign commander to capture Washington in American history.',\n      'Just weeks after his triumph in Washington, Ross was killed by an American sniper at the Battle of North Point near Baltimore on September 12, 1814. His death disrupted the British attack on Baltimore and may have saved the city from the same fate as Washington. The British assault on Fort McHenry that followed  and failed  inspired Francis Scott Key to write \"The Star-Spangled Banner.\"',\n    ],\n    primarySources: [\n      {\n        quote: 'I will sup in Baltimore tonight, or in hell.',\n        attribution: 'Attributed to Robert Ross',\n        context: 'Said before the Battle of North Point, September 12, 1814.',\n      },\n    ],\n    didYouKnow:\n      'When Ross\\'s troops entered the White House, they found dinner still set on the table  Dolley Madison had fled just hours before. The officers ate the meal before burning the building.',\n  },\n\n  {\n    id: 'prevost',\n    name: 'George Prevost',\n    years: '17671816',\n    faction: 'british',\n    category: 'political',\n    isGameLeader: true,\n    title: 'Governor General',\n    biography: [\n      'George Prevost served as Governor General of Canada and the overall British commander in North America during the War of 1812. A cautious administrator by nature, he prioritized the defense of Canada over offensive operations, a strategy that frustrated more aggressive officers like Brock but ultimately kept the colony intact.',\n      'Prevost\\'s reputation was badly damaged when he led a large British invasion force into New York in 1814, only to retreat at the Battle of Plattsburgh despite outnumbering the Americans on land. The defeat was caused in part by the loss of the British naval squadron on Lake Champlain. Prevost was recalled to England to face a court-martial, but he died before the trial could take place. History has judged him harshly, though his overall defensive strategy did succeed in its primary goal  preserving Canada.',\n    ],\n    primarySources: [\n      {\n        quote: 'The preservation of Canada is the first object.',\n        attribution: 'George Prevost',\n        context: 'Prevost\\'s guiding principle throughout the war.',\n      },\n    ],\n    didYouKnow:\n      'Prevost was fluent in French and popular with French-Canadian civilians, which helped maintain loyalty in Lower Canada during the war.',\n  },\n\n  {\n    id: 'de_salaberry',\n    name: 'Charles de Salaberry',\n    years: '17781829',\n    faction: 'british',\n    category: 'military',\n    isGameLeader: true,\n    title: 'Lieutenant Colonel',\n    biography: [\n      'Charles-Michel d\\'Irumberry de Salaberry was a French-Canadian officer who became one of the most celebrated defenders of Canada during the War of 1812. Born into a military family in Beauport, Quebec, he served in the British army from age 14, fighting in campaigns across Europe and the Caribbean before returning to Canada to command the Canadian Voltigeurs  an elite unit of French-Canadian light infantry he personally recruited and trained.',\n      'De Salaberry\\'s finest hour came at the Battle of Chateauguay on October 26, 1813. With roughly 300 Canadian Voltigeurs and Native warriors, he repelled an American force of over 3,000 troops marching toward Montreal. Using the terrain, fallen trees, and buglers positioned throughout the forest to create the illusion of a much larger force, de Salaberry turned the Americans back in a masterpiece of defensive warfare. The victory saved Montreal and proved that Canadian-born soldiers could defend their homeland against overwhelming odds.',\n      'De Salaberry is remembered as one of the first great French-Canadian military heroes. His victory at Chateauguay is celebrated in Quebec as a defining moment of Canadian identity  proof that a small, determined force fighting for their own land could defeat a much larger invader.',\n    ],\n    primarySources: [\n      {\n        quote: 'I have won a victory mounted on a wooden horse.',\n        attribution: 'Charles de Salaberry, after the Battle of Chateauguay, 1813',\n        context: 'De Salaberry\\'s wry comment on winning the battle from behind a barricade of felled trees rather than on horseback.',\n      },\n    ],\n    didYouKnow:\n      'De Salaberry had buglers spread throughout the forest blow their horns from different positions to make the Americans think they were surrounded by a massive army. The trick worked  the American commander withdrew his 3,000+ troops.',\n  },\n\n  // \n  //  NATIVE COALITION  Game Leaders\n  // \n\n  {\n    id: 'tecumseh',\n    name: 'Tecumseh',\n    years: '17681813',\n    faction: 'native',\n    category: 'native_leader',\n    isGameLeader: true,\n    title: 'War Chief',\n    biography: [\n      'Tecumseh was a Shawnee leader who built the most ambitious pan-Native alliance in North American history. He traveled thousands of miles  from the Great Lakes to the Gulf of Mexico  recruiting warriors from dozens of nations. His central argument was powerful and radical: no single nation had the right to sell land that belonged to all Native peoples collectively.',\n      'When the War of 1812 began, Tecumseh allied with the British, and his tactical genius played a crucial role in the capture of Detroit. He led Native warriors with a combination of strategic brilliance and personal courage that earned the respect of both allies and enemies. He was killed at the Battle of the Thames in October 1813, and his death shattered the confederacy, ending the last realistic chance for an independent Native state east of the Mississippi River.',\n      'Even his enemies recognized his greatness. William Henry Harrison called him \"one of those uncommon geniuses which spring up occasionally to produce revolutions.\" Tecumseh\\'s vision of Native unity and sovereignty inspired resistance movements for generations and continues to resonate today.',\n    ],\n    primarySources: [\n      {\n        quote: 'Sell a country! Why not sell the air, the clouds and the great sea, as well as the earth?',\n        attribution: 'Tecumseh',\n        context: 'Tecumseh\\'s argument against individual land sales by any single Native nation.',\n      },\n    ],\n    didYouKnow:\n      'After Tecumseh\\'s death, the exact location of his burial was kept secret by his followers to prevent his body from being desecrated. His grave has never been found.',\n  },\n\n  {\n    id: 'tenskwatawa',\n    name: 'Tenskwatawa',\n    years: '17751836',\n    faction: 'native',\n    category: 'native_leader',\n    isGameLeader: true,\n    title: 'The Prophet',\n    biography: [\n      'Tenskwatawa was Tecumseh\\'s younger brother and a powerful spiritual leader who inspired a revitalization movement among Native peoples across the Great Lakes and Ohio Valley. He preached the rejection of American trade goods, alcohol, and cultural assimilation, calling on Native people to return to traditional ways of life. He established Prophetstown at the junction of the Tippecanoe and Wabash rivers as the spiritual and political center of the resistance movement.',\n      'After the defeat at Tippecanoe in 1811 and Tecumseh\\'s death in 1813, Tenskwatawa\\'s influence declined sharply. He eventually settled in Kansas, where he lived until 1836. Though his spiritual movement was ultimately unsuccessful, it represented one of the most significant Native cultural resistance efforts in American history  an attempt to preserve identity and sovereignty through spiritual renewal rather than military force alone.',\n    ],\n    primarySources: [\n      {\n        quote: 'The Great Spirit told me to tell the Indians that they must not drink whiskey, nor steal, nor fight one another.',\n        attribution: 'Tenskwatawa',\n        context: 'A central teaching of Tenskwatawa\\'s spiritual movement.',\n      },\n    ],\n    didYouKnow:\n      'Tenskwatawa lost an eye in a childhood accident and was considered a failure by his community before his spiritual transformation. His dramatic reinvention gave hope to thousands of Native people.',\n  },\n\n  {\n    id: 'red_eagle',\n    name: 'Red Eagle (William Weatherford)',\n    years: '17801824',\n    faction: 'native',\n    category: 'native_leader',\n    isGameLeader: true,\n    title: 'Red Stick War Chief',\n    biography: [\n      'William Weatherford, also known as Red Eagle, led the Red Stick faction of the Creek Nation during the Creek War of 1813-1814. Of mixed Creek, Scottish, and French heritage, he chose to fight against American expansion into the South. He led the devastating attack on Fort Mims in August 1813, which killed over 250 people  soldiers, settlers, and mixed-heritage Creek who had sided with the Americans. The attack shocked the nation and triggered Andrew Jackson\\'s punishing military campaign against the Creek.',\n      'After the devastating Creek defeat at Horseshoe Bend in March 1814, Red Eagle surrendered personally to Andrew Jackson, reportedly saying \"I am in your power  do with me as you please.\" Remarkably, Jackson was so impressed by his courage that he released him on the condition that he seek peace. Red Eagle settled as a planter in southern Alabama and lived quietly until his death in 1824.',\n    ],\n    primarySources: [\n      {\n        quote: 'I am in your power. Do with me as you please. I am a soldier. I have done the white people all the harm I could.',\n        attribution: 'Red Eagle (William Weatherford)',\n        context: 'Red Eagle\\'s surrender speech to Andrew Jackson after the Creek War.',\n      },\n    ],\n    didYouKnow:\n      'Despite being enemies during the war, Jackson and Red Eagle developed a mutual respect. Jackson reportedly said Red Eagle was the bravest man he had ever met.',\n  },\n\n  {\n    id: 'black_hawk',\n    name: 'Black Hawk',\n    years: '17671838',\n    faction: 'native',\n    category: 'native_leader',\n    isGameLeader: true,\n    title: 'War Chief',\n    biography: [\n      'Black Hawk was a Sauk war chief who fought alongside the British during the War of 1812, leading warriors at the battles of Fort Meigs and the Thames. A fierce opponent of American expansion, he never accepted the treaties that surrendered his people\\'s ancestral lands along the Mississippi River, arguing that the chiefs who signed them had no authority to do so.',\n      'After the War of 1812, Black Hawk continued to resist American settlement, eventually leading the Black Hawk War of 1832  one of the last major Native military conflicts east of the Mississippi. After his capture, he dictated an autobiography that remains one of the most important Native American memoirs ever recorded, offering a powerful firsthand account of what it meant to lose a homeland.',\n    ],\n    primarySources: [\n      {\n        quote: 'I fought hard. But your guns were well aimed. The bullets flew like birds in the air, and whizzed by our ears like the wind through the trees in the winter.',\n        attribution: 'Black Hawk',\n        context: 'From Black Hawk\\'s autobiography, reflecting on his military experiences.',\n      },\n    ],\n    didYouKnow:\n      'After his capture, Black Hawk was taken on a tour of Eastern cities so he could see American power firsthand. Instead, he became a celebrity  crowds gathered to see him and he was more popular than President Jackson.',\n  },\n\n  // \n  //  ADDITIONAL FIGURES  Not Game Leaders\n  // \n\n  {\n    id: 'dolley_madison',\n    name: 'Dolley Madison',\n    years: '17681849',\n    faction: 'us',\n    category: 'political',\n    isGameLeader: false,\n    title: 'First Lady',\n    biography: [\n      'Dolley Madison was one of the most influential First Ladies in American history. Far more than a social hostess, she was James Madison\\'s political partner, using her famous \"Wednesday drawing rooms\" to build alliances across party lines. Her charm, warmth, and social skills helped her shy, bookish husband navigate the treacherous world of Washington politics at a time when the young nation was deeply divided.',\n      'When the British invaded Washington in August 1814, Dolley Madison refused to leave the White House until she had secured Gilbert Stuart\\'s famous portrait of George Washington and important state documents. While government officials and soldiers fled in panic, she calmly organized the rescue of irreplaceable national treasures. Her courage under fire made her a national hero and an enduring symbol of American resilience.',\n      'After James Madison\\'s death in 1836, Congress awarded Dolley an honorary seat on the floor of the House of Representatives  the first woman to receive this honor. She remained one of Washington\\'s most prominent and beloved citizens until her death in 1849.',\n    ],\n    primarySources: [\n      {\n        quote: 'I am determined not to go myself until I see Mr. Madison safe, so that he can accompany me.',\n        attribution: 'Dolley Madison',\n        context: 'From a letter written during the British invasion of Washington, August 1814.',\n      },\n    ],\n    didYouKnow:\n      'Dolley Madison was so popular that when she died in 1849, President Zachary Taylor called her \"the first lady of the land\"  one of the earliest uses of the title \"First Lady.\"',\n  },\n\n  {\n    id: 'mary_pickersgill',\n    name: 'Mary Pickersgill',\n    years: '17761857',\n    faction: 'us',\n    category: 'civilian',\n    isGameLeader: false,\n    title: 'Flagmaker',\n    biography: [\n      'Mary Pickersgill was a professional flagmaker who ran a successful business in Baltimore. In 1813, Major George Armistead, the commander of Fort McHenry, commissioned her to create an enormous garrison flag  30 by 42 feet, with 15 stars and 15 stripes. Pickersgill, along with her daughter Caroline, her nieces, and an indentured servant named Grace Wisher, spent six weeks sewing the massive banner, spreading it out on the floor of a nearby brewery because it was too large for her workshop.',\n      'The flag Mary Pickersgill made became one of the most important symbols in American history. When Francis Scott Key watched the British bombardment of Fort McHenry on the night of September 13-14, 1814, it was Pickersgill\\'s flag he saw \"by the dawn\\'s early light,\" still flying over the fort. That moment inspired \"The Star-Spangled Banner.\" Today, the original flag hangs in the Smithsonian\\'s National Museum of American History. Pickersgill continued her flagmaking business and became active in charitable work for the rest of her life.',\n    ],\n    primarySources: [\n      {\n        quote: 'The flag being so large, I was obliged to obtain permission to spread it out in the malt house of Claggett\\'s brewery.',\n        attribution: 'Mary Pickersgill',\n        context: 'Pickersgill describing the practical challenges of creating the enormous garrison flag.',\n      },\n    ],\n    didYouKnow:\n      'The Star-Spangled Banner flag required 400 yards of wool bunting. Each star was two feet across. Mary Pickersgill was paid $405.90 for the garrison flag  equivalent to about $10,000 today.',\n  },\n\n  {\n    id: 'charles_ball',\n    name: 'Charles Ball',\n    years: '1781unknown',\n    faction: 'us',\n    category: 'military',\n    isGameLeader: false,\n    title: 'Sailor & Soldier',\n    biography: [\n      'Charles Ball was born enslaved in Maryland but escaped and served in the United States Navy during the War of 1812. He fought at the Battle of Bladensburg in August 1814, defending Washington, D.C. against the British invasion. His memoir, published in 1836, is one of the few firsthand accounts of an African American\\'s experience during the war, providing a perspective that most histories of the conflict have ignored.',\n      'Ball\\'s story highlights the painful contradictions of fighting for a nation that enslaved his people. After the war, he was recaptured and re-enslaved before managing to escape a second time. His narrative, \"Fifty Years in Chains,\" describes both the camaraderie of military service  where Black and white sailors fought side by side  and the brutal reality of American slavery that awaited African Americans after the guns fell silent.',\n    ],\n    primarySources: [\n      {\n        quote: 'I had been a slave, and felt the value of freedom. I was willing to risk my life in its defense.',\n        attribution: 'Charles Ball (paraphrased from his memoir)',\n        context: 'Ball reflecting on his decision to serve in the military despite the injustices he faced.',\n      },\n    ],\n    didYouKnow:\n      'Ball\\'s autobiography, \"Fifty Years in Chains,\" was one of the earliest slave narratives published in the United States and provides unique insights into both military service and the institution of slavery.',\n  },\n\n  {\n    id: 'laura_secord',\n    name: 'Laura Secord',\n    years: '17751868',\n    faction: 'british',\n    category: 'civilian',\n    isGameLeader: false,\n    title: 'Heroine',\n    biography: [\n      'Laura Secord was a Canadian heroine who walked 20 miles through swamps and enemy territory to warn British forces of an impending American attack on Beaver Dams in June 1813. A mother of five whose husband had been seriously wounded at the Battle of Queenston Heights, she overheard American officers discussing their plans while they were billeted in her home. Despite the enormous danger, she set out alone at dawn to carry the warning.',\n      'Her information helped British and Mohawk forces prepare an ambush that captured over 500 American troops  one of the most complete victories of the war. Despite her heroism, Secord received little recognition during her lifetime. It was not until 1860, when the Prince of Wales visited Canada and heard her story, that she received a modest reward of 100 pounds. Today she is celebrated as one of Canada\\'s most famous historical figures.',\n    ],\n    primarySources: [\n      {\n        quote: 'I was determined to put the Americans off the guard, and I was determined to go to warn the British.',\n        attribution: 'Laura Secord',\n        context: 'Secord describing her motivation for the dangerous journey to Beaver Dams.',\n      },\n    ],\n    didYouKnow:\n      'Laura Secord is now one of Canada\\'s most famous historical figures. A popular Canadian chocolate company is named after her, and her image has appeared on Canadian stamps and currency.',\n  },\n\n  {\n    id: 'jean_lafitte',\n    name: 'Jean Lafitte',\n    years: '1780unknown',\n    faction: 'us',\n    category: 'military',\n    isGameLeader: false,\n    title: 'Pirate & Privateer',\n    biography: [\n      'Jean Lafitte was a French pirate and smuggler who operated out of Barataria Bay near New Orleans. When the British offered him a captain\\'s commission and $30,000 to fight against the Americans, Lafitte made a surprising choice  he warned the Americans instead and offered his men, ships, and supplies to Andrew Jackson for the defense of New Orleans.',\n      'Lafitte\\'s pirates provided crucial artillery expertise, gunflints, and ammunition at the Battle of New Orleans, contributing significantly to the American victory. Jackson had initially dismissed Lafitte\\'s men as \"hellish banditti\" but later publicly praised their bravery and skill. Lafitte received a presidential pardon from James Madison for his service, but true to form, he returned to piracy after the war and eventually disappeared from the historical record.',\n    ],\n    primarySources: [\n      {\n        quote: 'I am the stray sheep wishing to return to the flock.',\n        attribution: 'Jean Lafitte',\n        context: 'From Lafitte\\'s letter offering his services to the American cause before the Battle of New Orleans.',\n      },\n    ],\n    didYouKnow:\n      'Nobody knows how Lafitte died or where he went. Legends place his death everywhere from the Yucatan Peninsula to Illinois. He remains one of the most mysterious figures in American history.',\n  },\n\n  {\n    id: 'john_norton',\n    name: 'John Norton (Teyoninhokarawen)',\n    years: '17701831',\n    faction: 'native',\n    category: 'native_leader',\n    isGameLeader: false,\n    title: 'War Chief',\n    biography: [\n      'Born in Scotland to a Cherokee father and Scottish mother, John Norton  known by his Mohawk name Teyoninhokarawen  became a Mohawk war chief and one of the most important Native leaders during the War of 1812. He led Haudenosaunee (Iroquois) warriors at the critical Battle of Queenston Heights, where his forces played a decisive role in the British victory that killed General Brock but saved Upper Canada.',\n      'Norton was a unique bridge between European and Native worlds. Educated in both traditions and fluent in multiple languages, he was respected by British officers and Native communities alike. He translated the Gospel of John into Mohawk and fought tirelessly for Native land rights and sovereignty. After the war, he traveled to England to advocate for his people before disappearing from the historical record around 1831.',\n    ],\n    primarySources: [\n      {\n        quote: 'We are the faithful allies of the King, and we will fight for our lands.',\n        attribution: 'John Norton (Teyoninhokarawen)',\n        context: 'Norton expressing the Haudenosaunee position on their British alliance and land rights.',\n      },\n    ],\n    didYouKnow:\n      'Norton\\'s journal of the War of 1812 is one of the most detailed Native accounts of the conflict. It was lost for over a century before being rediscovered and published in the 1970s.',\n  },\n\n  {\n    id: 'creek_woman_composite',\n    name: 'A Creek Woman\\'s Experience',\n    years: 'Unknown',\n    faction: 'native',\n    category: 'civilian',\n    isGameLeader: false,\n    title: 'Composite Profile',\n    biography: [\n      'This profile represents a composite of Creek women\\'s experiences during the War of 1812 and Creek War, drawn from historical records. She is not a single historical individual. Creek women held significant social and political roles in their matrilineal society. They controlled agricultural production, owned family homes, and participated in clan council decisions. When the Creek War erupted in 1813, women\\'s lives were upended  they faced the destruction of their towns, separation from family members, and the loss of the agricultural lands that had sustained their communities for generations.',\n      'After the devastating Treaty of Fort Jackson in 1814, which stripped 23 million acres from the Creek Nation, women bore the heaviest burden of displacement. They had to rebuild communities, feed families without their traditional farmland, and maintain cultural practices under impossible conditions. Many Creek women walked the Trail of Tears in the 1830s, carrying children and preserving seeds and cultural knowledge that would sustain their people in Indian Territory. Their resilience ensured the survival of Creek culture through one of the darkest chapters in American history.',\n    ],\n    primarySources: [\n      {\n        quote: 'The women wept as they looked back at the homes they had built, the fields they had planted, the graves of their ancestors they would never visit again.',\n        attribution: 'Composite account drawn from removal-era records',\n        context: 'A representative description of Creek women\\'s experiences during forced removal, based on multiple historical sources.',\n      },\n    ],\n    didYouKnow:\n      'In Creek (Muscogee) society, clan membership and property passed through the mother\\'s line. Women owned the family home and controlled the harvest. The destruction of this matrilineal system was one of the most devastating  and least discussed  consequences of the Creek War and removal.',\n  },\n];\n\n// \n//  Utility Functions\n// \n\nexport function getProfileById(id) {\n  return profiles.find((p) => p.id === id);\n}\n\nexport function getProfilesByFaction(faction) {\n  return profiles.filter((p) => p.faction === faction);\n}\n\nexport function getProfilesByCategory(category) {\n  return profiles.filter((p) => p.category === category);\n}\n\nexport function getGameLeaderProfiles() {\n  return profiles.filter((p) => p.isGameLeader);\n}\n\nexport function getOrdinaryPeopleProfiles() {\n  return profiles.filter((p) => !p.isGameLeader);\n}\n\nexport default profiles;\n","import React, { useState } from 'react';\nimport { getProfilesByFaction } from '../data/peopleProfiles';\n\nexport default function PeoplePanel({ playerFaction }) {\n  const [expanded, setExpanded] = useState(false);\n  const [openProfile, setOpenProfile] = useState(null);\n\n  const factionProfiles = getProfilesByFaction(playerFaction);\n  const leaders = factionProfiles.filter(p => p.isGameLeader);\n  const others = factionProfiles.filter(p => !p.isGameLeader);\n\n  return (\n    <div className=\"bg-war-navy/50 rounded-lg border border-parchment-dark/8\">\n      <button\n        onClick={() => setExpanded(!expanded)}\n        className=\"w-full px-3 py-2.5 flex items-center justify-between cursor-pointer hover:bg-white/3 transition-colors rounded-lg\"\n      >\n        <h3 className=\"text-war-gold/90 font-display text-base tracking-wide\">\n          People of 1812\n        </h3>\n        <span className=\"text-parchment-dark/40 text-sm font-body\">\n          {expanded ? '\\u25B2' : '\\u25BC'}\n        </span>\n      </button>\n\n      {expanded && (\n        <div className=\"px-3 pb-3 space-y-2 max-h-80 overflow-y-auto\">\n          {/* Faction Leaders */}\n          {leaders.length > 0 && (\n            <>\n              <p className=\"text-war-copper/70 text-xs uppercase tracking-widest font-body font-bold mb-1 mt-1\">\n                Your Leaders\n              </p>\n              {leaders.map((profile) => (\n                <ProfileEntry key={profile.id} profile={profile} isOpen={openProfile === profile.id} onToggle={() => setOpenProfile(openProfile === profile.id ? null : profile.id)} />\n              ))}\n            </>\n          )}\n\n          {/* Other Voices */}\n          {others.length > 0 && (\n            <>\n              <p className=\"text-war-copper/70 text-xs uppercase tracking-widest font-body font-bold mb-1 mt-2\">\n                Other Voices\n              </p>\n              {others.map((profile) => (\n                <ProfileEntry key={profile.id} profile={profile} isOpen={openProfile === profile.id} onToggle={() => setOpenProfile(openProfile === profile.id ? null : profile.id)} />\n              ))}\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction ProfileEntry({ profile, isOpen, onToggle }) {\n  return (\n    <div className=\"border-l-2 border-parchment-dark/10 ml-0.5\">\n      <button\n        onClick={onToggle}\n        className=\"w-full text-left pl-2.5 py-1 cursor-pointer hover:bg-white/3 transition-colors flex items-center justify-between\"\n        aria-expanded={isOpen}\n      >\n        <div>\n          <span className=\"text-parchment/80 text-sm font-body font-bold\">{profile.name}</span>\n          <span className=\"text-parchment-dark/40 text-xs font-body ml-1.5\">{profile.title}</span>\n        </div>\n        <span className=\"text-parchment-dark/30 text-xs\">{isOpen ? '\\u2212' : '+'}</span>\n      </button>\n      {isOpen && (\n        <div className=\"pl-2.5 pb-2 space-y-1.5\">\n          {profile.years && (\n            <p className=\"text-parchment-dark/40 text-xs font-body\">{profile.years}</p>\n          )}\n          <p className=\"text-parchment/60 text-sm font-body leading-relaxed\">\n            {profile.biography[0]}\n          </p>\n          {profile.primarySources && profile.primarySources.length > 0 && (\n            <div className=\"bg-war-red/5 border-l-2 border-war-red/20 rounded-r pl-2 py-1\">\n              <p className=\"text-parchment/60 text-sm font-body italic leading-relaxed\">\n                &ldquo;{profile.primarySources[0].quote}&rdquo;\n              </p>\n              <p className=\"text-parchment-dark/40 text-xs font-body mt-0.5\">\n                &mdash; {profile.primarySources[0].attribution}\n              </p>\n            </div>\n          )}\n          {profile.didYouKnow && (\n            <p className=\"text-war-copper/60 text-xs font-body italic\">\n              Did you know? {profile.didYouKnow}\n            </p>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * Leader Cards for War of 1812\n *\n * Each leader provides a passive or activated ability during battle.\n * - id: unique key\n * - name: historical name\n * - faction: 'us' | 'british' | 'native'\n * - title: rank/role\n * - ability: description of special power\n * - abilityType: 'attack_bonus' | 'defense_bonus' | 'rally' | 'first_strike' | 'naval'\n * - modifier: numeric bonus value\n * - theater: preferred theater (bonus applies here), null = anywhere\n * - alive: whether this leader is still in play\n */\n\nconst leaders = {\n  //  United States \n  jackson: {\n    id: 'jackson',\n    name: 'Andrew Jackson',\n    faction: 'us',\n    title: 'Major General',\n    ability: 'Old Hickory: +2 to highest attack die in Southern Theater.',\n    abilityType: 'attack_bonus',\n    modifier: 2,\n    theater: 'Southern',\n    alive: true,\n  },\n  perry: {\n    id: 'perry',\n    name: 'Oliver Hazard Perry',\n    faction: 'us',\n    title: 'Commodore',\n    ability: 'Master of the Lakes: +2 to attack/defense in naval territories.',\n    abilityType: 'naval',\n    modifier: 2,\n    theater: null, // applies to any naval zone\n    alive: true,\n  },\n  harrison: {\n    id: 'harrison',\n    name: 'William Henry Harrison',\n    faction: 'us',\n    title: 'Major General',\n    ability: 'Tippecanoe: +1 to all attack dice in Great Lakes Theater.',\n    abilityType: 'attack_bonus',\n    modifier: 1,\n    theater: 'Great Lakes',\n    alive: true,\n  },\n  winfield_scott: {\n    id: 'winfield_scott',\n    name: 'Winfield Scott',\n    faction: 'us',\n    title: 'Brigadier General',\n    ability: 'Disciplined Troops: +1 defense die when defending any territory.',\n    abilityType: 'defense_bonus',\n    modifier: 1,\n    theater: null,\n    alive: true,\n  },\n\n  //  British / Canada \n  brock: {\n    id: 'brock',\n    name: 'Isaac Brock',\n    faction: 'british',\n    title: 'Major General',\n    ability: 'Hero of Upper Canada: +2 to defense in Great Lakes territories.',\n    abilityType: 'defense_bonus',\n    modifier: 2,\n    theater: 'Great Lakes',\n    alive: true,\n  },\n  drummond: {\n    id: 'drummond',\n    name: 'Gordon Drummond',\n    faction: 'british',\n    title: 'Lieutenant General',\n    ability: 'Relentless Assault: +1 to all attack dice.',\n    abilityType: 'attack_bonus',\n    modifier: 1,\n    theater: null,\n    alive: true,\n  },\n  ross: {\n    id: 'ross',\n    name: 'Robert Ross',\n    faction: 'british',\n    title: 'Major General',\n    ability: 'Shock and Awe: +2 attack bonus in Chesapeake Theater.',\n    abilityType: 'attack_bonus',\n    modifier: 2,\n    theater: 'Chesapeake',\n    alive: true,\n  },\n  prevost: {\n    id: 'prevost',\n    name: 'George Prevost',\n    faction: 'british',\n    title: 'Governor General',\n    ability: 'Defensive Coordination: +1 troop reinforcement per turn.',\n    abilityType: 'rally',\n    modifier: 1,\n    theater: null,\n    alive: true,\n  },\n  de_salaberry: {\n    id: 'de_salaberry',\n    name: 'Charles de Salaberry',\n    faction: 'british',\n    title: 'Lieutenant Colonel',\n    ability: 'Chateauguay Ambush: +1 defense bonus in Great Lakes Theater.',\n    abilityType: 'defense_bonus',\n    modifier: 1,\n    theater: 'Great Lakes',\n    alive: true,\n  },\n\n  //  Native Coalition \n  tecumseh: {\n    id: 'tecumseh',\n    name: 'Tecumseh',\n    faction: 'native',\n    title: 'War Chief',\n    ability: 'Confederacy Leader: +2 to attack, can rally +1 troop in any Native territory per turn.',\n    abilityType: 'attack_bonus',\n    modifier: 2,\n    theater: null,\n    alive: true,\n  },\n  tenskwatawa: {\n    id: 'tenskwatawa',\n    name: 'Tenskwatawa',\n    faction: 'native',\n    title: 'The Prophet',\n    ability: 'Spiritual Rally: +2 reinforcement troops per turn for Native Coalition.',\n    abilityType: 'rally',\n    modifier: 2,\n    theater: null,\n    alive: true,\n  },\n  red_eagle: {\n    id: 'red_eagle',\n    name: 'Red Eagle (William Weatherford)',\n    faction: 'native',\n    title: 'Red Stick War Chief',\n    ability: 'Red Stick Fury: +2 to attack in Southern Theater, homeland of the Creek War.',\n    abilityType: 'attack_bonus',\n    modifier: 2,\n    theater: 'Southern',\n    alive: true,\n  },\n  black_hawk: {\n    id: 'black_hawk',\n    name: 'Black Hawk',\n    faction: 'native',\n    title: 'War Chief',\n    ability: 'Relentless Raider: +1 attack bonus in Great Lakes Theater.',\n    abilityType: 'attack_bonus',\n    modifier: 1,\n    theater: 'Great Lakes',\n    alive: true,\n  },\n};\n\n/**\n * Get all leaders for a given faction.\n */\nexport function getFactionLeaders(faction) {\n  return Object.values(leaders).filter((l) => l.faction === faction);\n}\n\n/**\n * Get alive leaders for a faction.\n */\nexport function getAliveLeaders(faction, leaderStates) {\n  return Object.values(leaders).filter(\n    (l) => l.faction === faction && (leaderStates?.[l.id]?.alive ?? l.alive)\n  );\n}\n\n/**\n * Calculate leader combat bonus for an attack/defense.\n * Returns the total modifier to add to the highest die.\n */\nexport function getLeaderBonus({ faction, territory, isAttacking, leaderStates }) {\n  const alive = getAliveLeaders(faction, leaderStates);\n  let bonus = 0;\n\n  for (const leader of alive) {\n    const theaterMatch = !leader.theater || leader.theater === territory?.theater;\n    const navalMatch = leader.abilityType === 'naval' && territory?.isNaval;\n\n    if (leader.abilityType === 'attack_bonus' && isAttacking && theaterMatch) {\n      bonus += leader.modifier;\n    } else if (leader.abilityType === 'defense_bonus' && !isAttacking && theaterMatch) {\n      bonus += leader.modifier;\n    } else if (navalMatch) {\n      bonus += leader.modifier;\n    }\n  }\n\n  return bonus;\n}\n\n/**\n * Check if a faction has first strike in a given territory.\n * Returns the modifier (troop loss inflicted before dice) or 0.\n */\nexport function getFirstStrikeBonus(faction, territory, leaderStates) {\n  const alive = getAliveLeaders(faction, leaderStates);\n  for (const leader of alive) {\n    if (leader.abilityType === 'first_strike') {\n      const theaterMatch = !leader.theater || leader.theater === territory?.theater;\n      if (theaterMatch) return leader.modifier;\n    }\n  }\n  return 0;\n}\n\n/**\n * Calculate leader rally bonus (extra reinforcements per turn).\n */\nexport function getLeaderRallyBonus(faction, leaderStates) {\n  const alive = getAliveLeaders(faction, leaderStates);\n  return alive\n    .filter((l) => l.abilityType === 'rally')\n    .reduce((sum, l) => sum + l.modifier, 0);\n}\n\nexport default leaders;\n","import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport LeafletMap from './LeafletMap';\nimport Scoreboard from './Scoreboard';\nimport TerritoryInfo from './TerritoryInfo';\nimport IntroScreen from './IntroScreen';\nimport EventCard from './EventCard';\nimport BattleModal from './BattleModal';\nimport KnowledgeCheck from './KnowledgeCheck';\nimport KnowledgeCheckPanel from './KnowledgeCheckPanel';\nimport ObjectivesPanel from './ObjectivesPanel';\nimport TurnJournal from './TurnJournal';\nimport GameReport from './GameReport';\nimport QuizReviewPanel from './QuizReviewPanel';\nimport TutorialOverlay from './TutorialOverlay';\nimport AITurnReplay from './AITurnReplay';\nimport VictoryProgress from './VictoryProgress';\nimport ConfirmActionModal from './ConfirmActionModal';\nimport GlossaryPanel from './GlossaryPanel';\nimport PeoplePanel from './PeoplePanel';\nimport { getAliveLeaders } from '../data/leaders';\nimport territories from '../data/territories';\n\nconst territoryNameToId = {};\nObject.values(territories).forEach((terr) => {\n  territoryNameToId[terr.name] = terr.id;\n});\n\nconst PHASES = ['event', 'allocate', 'battle', 'maneuver', 'score'];\nconst PHASE_ICONS = {\n  event: '\\u2709',      // envelope\n  allocate: '\\u2694',    // crossed swords (reinforce)\n  battle: '\\uD83D\\uDCA5', // collision\n  maneuver: '\\u2192',   // arrow\n  score: '\\u2605',      // star\n};\n\nconst phaseInstructions = {\n  event: 'Review the historical event and its effects on the war.',\n  allocate: 'Click your territories to place reinforcement troops.',\n  battle: 'Select your territory, then click an adjacent enemy to attack.',\n  maneuver: 'Move troops between your adjacent territories.',\n  score: 'Review the board. Advance to let opponents take their turn.',\n};\n\nexport default function GameBoard({\n  gameMode, round, totalRounds, currentPhase, currentPhaseLabel, seasonYear,\n  territoryOwners, troops, selectedTerritory, scores, nationalismMeter,\n  nativeResistance, navalDominance, factionMultiplier, reinforcementsRemaining,\n  playerFaction, playerTerritoryCount, message, battleResult, showBattleModal,\n  showIntro, currentEvent, showEventCard, gameOver, gameOverReason, gameOverWinner, finalScore, difficulty, leaderStates,\n  aiLog, aiActions, showAIReplay, playerObjectives, currentKnowledgeCheck,\n  showKnowledgeCheck, knowledgeCheckResults, knowledgeCheckHistory,\n  journalEntries, battleStats, maneuversRemaining, objectiveBonus,\n  playerName, classPeriod, onTerritoryClick, onAdvancePhase, onDismissIntro,\n  onDismissEvent, onDismissBattle, onAnswerKnowledgeCheck, onRequestKnowledgeCheck,\n  onSaveGame, onDeleteSave, pendingAdvance, pendingAdvanceMessage,\n  onConfirmAdvance, onCancelAdvance, onGoBack, canGoBack, pendingAction,\n  actionHistory, onConfirmPlaceTroop, onConfirmManeuver, onCancelAction,\n  onUndoLastAction, tutorialActive, tutorialStepData, tutorialCurrentStep,\n  tutorialTotalSteps, onTutorialNext, onTutorialPrev, onTutorialSkip,\n  onStartTutorial, onCloseAIReplay, onPlayAgain, sounds,\n  fontMode, toggleFont, sessionId, classId,\n}) {\n  const aliveLeaders = getAliveLeaders(playerFaction, leaderStates);\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [highlightedTerritoryIds, setHighlightedTerritoryIds] = useState([]);\n\n  const handleHighlightTerritories = useCallback((names) => {\n    if (!names || names.length === 0) {\n      setHighlightedTerritoryIds([]);\n      return;\n    }\n    const ids = names.map(name => territoryNameToId[name]).filter(Boolean);\n    setHighlightedTerritoryIds(ids);\n  }, []);\n\n  const handleCloseAIReplay = useCallback(() => {\n    setHighlightedTerritoryIds([]);\n    onCloseAIReplay();\n  }, [onCloseAIReplay]);\n\n  const prevPhase = useRef(currentPhase);\n  const prevShowEvent = useRef(showEventCard);\n  const prevShowBattle = useRef(showBattleModal);\n\n  useEffect(() => {\n    if (!sounds) return;\n    if (currentPhase !== prevPhase.current) {\n      sounds.sfx.phaseAdvance();\n      prevPhase.current = currentPhase;\n    }\n  }, [currentPhase, sounds]);\n\n  useEffect(() => {\n    if (!sounds) return;\n    if (showEventCard && !prevShowEvent.current) sounds.sfx.eventCard();\n    prevShowEvent.current = showEventCard;\n  }, [showEventCard, sounds]);\n\n  useEffect(() => {\n    if (!sounds) return;\n    if (showBattleModal && !prevShowBattle.current) {\n      if (battleResult?.conquered) sounds.sfx.victory();\n      else sounds.sfx.cannon();\n    }\n    prevShowBattle.current = showBattleModal;\n  }, [showBattleModal, battleResult, sounds]);\n\n  useEffect(() => {\n    if (!sounds || !gameOver) return;\n    sounds.sfx.defeat();\n  }, [gameOver, sounds]);\n\n  const phaseIndex = PHASES.indexOf(currentPhase);\n\n  return (\n    <div className=\"h-screen bg-war-ink flex flex-col overflow-hidden\">\n      {/*  Top bar  */}\n      <header className=\"bg-gradient-to-r from-war-navy via-war-navy to-war-navy-light px-3 md:px-5 py-2 flex items-center justify-between border-b border-war-gold/15 flex-shrink-0\">\n        {/* Left: title + round */}\n        <div className=\"flex items-center gap-3 md:gap-6 flex-shrink-0\">\n          <h1 className=\"text-war-gold font-display text-base md:text-xl tracking-wider\">1812<span className=\"sr-only\">: War of 1812  Rise of the Nation</span></h1>\n          <div className=\"hidden sm:flex items-center gap-1.5 text-parchment/70 font-body text-sm\">\n            <span className=\"text-parchment-dark/60\">Round</span>\n            <span className=\"text-parchment font-bold\">{round}</span>\n            <span className=\"text-parchment-dark/40\">/ {totalRounds}</span>\n            <span className=\"text-parchment-dark/30 mx-1\">|</span>\n            <span className=\"text-war-copper/80 italic\">{seasonYear}</span>\n          </div>\n          <div className=\"sm:hidden text-parchment font-body text-sm\">\n            R{round} <span className=\"text-parchment-dark/50\">/ {totalRounds}</span>\n          </div>\n        </div>\n\n        {/* Center: phase stepper */}\n        <div className=\"flex items-center gap-0.5 md:gap-1\" data-tutorial=\"phase-indicator\">\n          {PHASES.map((p, i) => {\n            const isPast = i < phaseIndex;\n            const isCurrent = p === currentPhase;\n            return (\n              <React.Fragment key={p}>\n                <div className={`flex items-center gap-1 px-1.5 md:px-2.5 py-1 rounded transition-all duration-300 ${\n                  isCurrent ? 'bg-war-gold/15 border border-war-gold/30' : 'border border-transparent'\n                }`}>\n                  <span className={`text-sm md:text-base ${\n                    isCurrent ? 'text-war-gold' : isPast ? 'text-green-500/60' : 'text-parchment-dark/30'\n                  }`}>{PHASE_ICONS[p]}</span>\n                  <span className={`text-sm font-body capitalize hidden lg:inline ${\n                    isCurrent ? 'text-war-gold font-bold' : isPast ? 'text-green-500/50' : 'text-parchment-dark/30'\n                  }`}>{p}</span>\n                </div>\n                {i < PHASES.length - 1 && (\n                  <div className={`w-3 md:w-5 h-px ${isPast ? 'bg-green-500/30' : 'bg-parchment-dark/15'}`} />\n                )}\n              </React.Fragment>\n            );\n          })}\n        </div>\n\n        {/* Right: resources + controls */}\n        <div className=\"flex items-center gap-2 md:gap-3 flex-shrink-0\">\n          {currentPhase === 'allocate' && (\n            <div className=\"flex items-center gap-1 bg-war-gold/10 border border-war-gold/25 rounded px-2.5 py-1\">\n              <span className=\"text-war-gold font-display text-base md:text-lg font-bold\">{reinforcementsRemaining}</span>\n              <span className=\"text-parchment-dark/60 text-sm font-body hidden sm:inline\">troops</span>\n            </div>\n          )}\n          {currentPhase === 'maneuver' && (\n            <div className=\"flex items-center gap-1 bg-war-gold/10 border border-war-gold/25 rounded px-2.5 py-1\">\n              <span className=\"text-war-gold font-display text-base md:text-lg font-bold\">{maneuversRemaining}</span>\n              <span className=\"text-parchment-dark/60 text-sm font-body hidden sm:inline\">moves</span>\n            </div>\n          )}\n          <button onClick={onStartTutorial} className=\"w-7 h-7 text-xs border border-parchment-dark/25 text-parchment-dark/60 rounded hover:border-war-gold/50 hover:text-war-gold transition-colors cursor-pointer flex items-center justify-center font-body flex-shrink-0\" title=\"Tutorial\" aria-label=\"Show tutorial\">?</button>\n          {sounds && (\n            <>\n              <button onClick={sounds.toggleMusic} className={`w-7 h-7 text-xs border rounded flex items-center justify-center cursor-pointer transition-colors flex-shrink-0 ${sounds.musicOn ? 'border-war-gold/40 text-war-gold/80' : 'border-parchment-dark/25 text-parchment-dark/40 hover:border-war-gold/40 hover:text-war-gold/60'}`} title={sounds.musicOn ? 'Stop music' : 'Play music'} aria-label={sounds.musicOn ? 'Stop music' : 'Play music'}>{sounds.musicOn ? '\\u266B' : '\\u266A'}</button>\n              <button onClick={sounds.toggleMute} className={`w-7 h-7 text-xs border rounded flex items-center justify-center cursor-pointer transition-colors flex-shrink-0 ${sounds.muted ? 'border-red-500/40 text-red-400/80' : 'border-parchment-dark/25 text-parchment-dark/40 hover:border-war-gold/40 hover:text-war-gold/60'}`} title={sounds.muted ? 'Unmute' : 'Mute'} aria-label={sounds.muted ? 'Unmute sounds' : 'Mute sounds'}>{sounds.muted ? '\\uD83D\\uDD07' : '\\uD83D\\uDD0A'}</button>\n            </>\n          )}\n          <button onClick={toggleFont} className={`px-2.5 py-1 text-xs border rounded transition-colors cursor-pointer flex-shrink-0 font-body ${fontMode === 'dyslexic' ? 'border-war-gold/40 text-war-gold/80' : 'border-parchment-dark/25 text-parchment-dark/60 hover:border-war-gold/40 hover:text-war-gold'}`} title={fontMode === 'dyslexic' ? 'Switch to standard font' : 'Switch to OpenDyslexic font'} aria-label=\"Toggle dyslexic-friendly font\">Aa</button>\n          <button onClick={onSaveGame} className=\"px-2.5 py-1 text-xs border border-parchment-dark/25 text-parchment-dark/60 rounded hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer flex-shrink-0 font-body\" title=\"Save game\" aria-label=\"Save game\">Save</button>\n          <button onClick={() => setSidebarOpen(!sidebarOpen)} className=\"md:hidden w-7 h-7 text-xs border border-parchment-dark/25 text-parchment-dark/60 rounded hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer flex items-center justify-center flex-shrink-0\" title=\"Toggle sidebar\" aria-label=\"Toggle sidebar\">{sidebarOpen ? '\\u2715' : '\\u2630'}</button>\n        </div>\n      </header>\n\n      {/*  Main content  */}\n      <div className=\"flex-1 flex min-h-0 relative\">\n        {/* Map area */}\n        <div className=\"flex-1 p-2 md:p-3 flex flex-col min-h-0\">\n          {/* Message banner */}\n          {message && (\n            <div className=\"bg-war-navy/80 backdrop-blur border border-war-gold/15 rounded px-4 py-2 mb-2 flex-shrink-0 shadow-card\" role=\"status\" aria-live=\"polite\">\n              <p className=\"text-parchment/90 font-body text-sm md:text-base\">{message}</p>\n            </div>\n          )}\n\n          {/* Map or overlays */}\n          <div className=\"flex-1 bg-war-navy/40 rounded border border-parchment-dark/8 overflow-hidden min-h-0 relative\">\n            {showIntro ? (\n              <IntroScreen playerFaction={playerFaction} onContinue={onDismissIntro} gameMode={gameMode} />\n            ) : showEventCard ? (\n              <EventCard event={currentEvent} onDismiss={onDismissEvent} gameMode={gameMode} />\n            ) : (\n              <>\n                {aiLog.length > 0 && !showAIReplay && (\n                  <div className=\"absolute top-0 left-0 right-0 z-40 bg-war-navy/95 backdrop-blur border-b border-british-red/40 px-4 py-2 max-h-16 overflow-y-auto\">\n                    <span className=\"text-british-red/80 text-sm uppercase tracking-widest font-body font-bold mr-2\">Opponent:</span>\n                    <span className=\"text-parchment/80 text-sm font-body\">{aiLog[aiLog.length - 1]}</span>\n                  </div>\n                )}\n                <LeafletMap\n                  territoryOwners={territoryOwners}\n                  selectedTerritory={selectedTerritory}\n                  onTerritoryClick={onTerritoryClick}\n                  troops={troops}\n                  highlightedTerritories={highlightedTerritoryIds}\n                />\n                {showAIReplay && aiActions && (\n                  <AITurnReplay aiActions={aiActions} onClose={handleCloseAIReplay} onHighlightTerritory={handleHighlightTerritories} />\n                )}\n              </>\n            )}\n          </div>\n\n          {/* Bottom bar: instructions + buttons */}\n          <div className=\"mt-2 flex flex-col sm:flex-row sm:items-center sm:justify-between flex-shrink-0 gap-2\" data-tutorial=\"advance-btn\">\n            <p className=\"text-xs md:text-sm text-parchment-dark/50 font-body hidden sm:block italic\">\n              {phaseInstructions[currentPhase]}\n            </p>\n            {!gameOver && (\n              <div className=\"flex items-center gap-2 flex-shrink-0 sm:ml-4 justify-end\">\n                {canGoBack && (\n                  <button onClick={onGoBack} className=\"px-3 py-2 font-body text-sm rounded border border-parchment-dark/25 text-parchment-dark/60 hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer\">\n                    Back\n                  </button>\n                )}\n                {actionHistory && actionHistory.length > 0 && (currentPhase === 'allocate' || currentPhase === 'maneuver') && (\n                  <button onClick={onUndoLastAction} className=\"px-3 py-2 font-body text-sm rounded border border-war-gold/30 text-war-gold/70 hover:bg-war-gold/10 transition-colors cursor-pointer\" title=\"Undo last action\">\n                    Undo\n                  </button>\n                )}\n                <button\n                  onClick={onAdvancePhase}\n                  disabled={showEventCard || showBattleModal || showKnowledgeCheck}\n                  className={`px-5 md:px-8 py-2 font-display text-sm md:text-base rounded tracking-wide transition-all ${\n                    showEventCard || showBattleModal || showKnowledgeCheck\n                      ? 'bg-white/5 text-white/20 cursor-not-allowed'\n                      : 'bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer font-bold shadow-copper'\n                  }`}\n                >\n                  {currentPhase === 'event' ? 'Begin Planning'\n                    : currentPhase === 'allocate' ? (reinforcementsRemaining > 0 ? `Proceed (${reinforcementsRemaining} left)` : 'Proceed to Battle')\n                    : currentPhase === 'battle' ? 'Proceed to Maneuver'\n                    : currentPhase === 'maneuver' ? (maneuversRemaining > 0 ? `End Turn (${maneuversRemaining} moves)` : 'End Turn')\n                    : currentPhase === 'score' && round >= totalRounds ? 'End War'\n                    : 'End Turn'}\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Pending advance confirmation */}\n          {pendingAdvance && (\n            <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4\" style={{ zIndex: 1000 }}>\n              <div className=\"bg-war-navy border-2 border-war-gold/50 rounded-lg max-w-sm w-full p-6 text-center shadow-modal animate-fadein\">\n                <p className=\"text-parchment font-body text-lg mb-5\">{pendingAdvanceMessage}</p>\n                <div className=\"flex gap-3 justify-center\">\n                  <button onClick={onCancelAdvance} className=\"px-6 py-2.5 font-body text-base rounded border border-parchment-dark/30 text-parchment hover:border-war-gold/50 hover:text-war-gold transition-colors cursor-pointer\" style={{ minHeight: '44px' }}>\n                    Go Back\n                  </button>\n                  <button onClick={onConfirmAdvance} className=\"px-6 py-2.5 font-display text-base rounded bg-war-gold text-war-ink hover:bg-war-brass transition-colors cursor-pointer font-bold\" style={{ minHeight: '44px' }}>\n                    Advance\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Mobile sidebar backdrop */}\n        {sidebarOpen && (\n          <div className=\"md:hidden fixed inset-0 bg-black/50 z-30\" onClick={() => setSidebarOpen(false)} />\n        )}\n\n        {/*  Right sidebar  */}\n        <aside className={`\n          w-72 md:w-[300px] p-3 space-y-3 border-l border-parchment-dark/8 overflow-y-auto flex-shrink-0\n          bg-war-ink/95 backdrop-blur\n          fixed md:static top-0 right-0 h-full z-40\n          transform transition-transform duration-300 ease-in-out\n          ${sidebarOpen ? 'translate-x-0' : 'translate-x-full'}\n          md:transform-none\n        `}>\n          {!gameOver && (\n            <VictoryProgress\n              currentScore={scores[playerFaction]}\n              playerFaction={playerFaction}\n              nationalismMeter={nationalismMeter}\n              nativeResistance={Object.values(territoryOwners).filter(o => o === 'native').length}\n              navalDominance={Object.entries(territoryOwners).filter(([id, owner]) => owner === 'british' && territories[id]?.isNaval).length}\n              objectiveBonus={objectiveBonus}\n              round={round}\n            />\n          )}\n\n          <div data-tutorial=\"scoreboard\">\n            <Scoreboard scores={scores} playerFaction={playerFaction} nationalismMeter={nationalismMeter} nativeResistance={nativeResistance} navalDominance={navalDominance} factionMultiplier={factionMultiplier} playerTerritoryCount={playerTerritoryCount} />\n          </div>\n\n          {/* Leaders */}\n          <div className=\"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8\" data-tutorial=\"leaders\">\n            <h3 className=\"text-war-gold/90 font-display text-base tracking-wide border-b border-war-gold/15 pb-2 mb-2\">\n              Your Leaders\n            </h3>\n            {aliveLeaders.length > 0 ? (\n              aliveLeaders.map((leader) => (\n                <div key={leader.id} className=\"mb-2 last:mb-0\">\n                  <p className=\"text-parchment/90 text-sm font-body font-bold\">{leader.name}</p>\n                  <p className=\"text-parchment-dark/60 text-sm font-body italic\">{leader.ability}</p>\n                </div>\n              ))\n            ) : (\n              <p className=\"text-parchment-dark/40 text-sm font-body italic\">No leaders in play.</p>\n            )}\n          </div>\n\n          <div data-tutorial=\"objectives\">\n            <ObjectivesPanel objectives={playerObjectives} />\n          </div>\n\n          <KnowledgeCheckPanel totalAnswered={knowledgeCheckResults.total} totalCorrect={knowledgeCheckResults.correct} onTakeCheck={onRequestKnowledgeCheck} />\n          <QuizReviewPanel history={knowledgeCheckHistory} />\n          <GlossaryPanel />\n          <PeoplePanel playerFaction={playerFaction} />\n          <TurnJournal entries={journalEntries} round={round} />\n          <TerritoryInfo territoryId={selectedTerritory} territoryOwners={territoryOwners} troops={troops} />\n        </aside>\n      </div>\n\n      {/*  Modals  */}\n      {showBattleModal && <BattleModal battle={battleResult} onClose={onDismissBattle} />}\n      {showKnowledgeCheck && <KnowledgeCheck question={currentKnowledgeCheck} onAnswer={onAnswerKnowledgeCheck} questionNumber={knowledgeCheckResults.total + 1} gameMode={gameMode} />}\n      {pendingAction && <ConfirmActionModal actionType={pendingAction.type} actionData={pendingAction} onConfirm={pendingAction.type === 'placement' ? onConfirmPlaceTroop : onConfirmManeuver} onCancel={onCancelAction} />}\n      {tutorialActive && <TutorialOverlay stepData={tutorialStepData} currentStep={tutorialCurrentStep} totalSteps={tutorialTotalSteps} onNext={onTutorialNext} onPrev={onTutorialPrev} onSkip={onTutorialSkip} gameMode={gameMode} />}\n      {gameOver && <GameReport playerName={playerName} classPeriod={classPeriod} playerFaction={playerFaction} finalScore={finalScore} scores={scores} nationalismMeter={nationalismMeter} objectiveBonus={objectiveBonus} factionMultiplier={factionMultiplier} nativeResistance={nativeResistance} navalDominance={navalDominance} playerObjectives={playerObjectives} journalEntries={journalEntries} knowledgeCheckResults={knowledgeCheckResults} battleStats={battleStats} playerTerritoryCount={playerTerritoryCount} round={round} gameOverReason={gameOverReason} gameOverWinner={gameOverWinner} territoryOwners={territoryOwners} difficulty={difficulty} sessionId={sessionId} classId={classId} onPlayAgain={onPlayAgain} />}\n    </div>\n  );\n}\n","/**\n * Pre-game comprehension quiz  8 questions tied to Learning Mode sections.\n * Students must answer each correctly (retry until correct) before playing.\n */\n\nconst quizGateQuestions = [\n  {\n    id: 'qg1',\n    section: 1,\n    question: 'What was impressment?',\n    simpleQuestion: 'What did \"impressment\" mean?',\n    answers: [\n      'Forcing American sailors to serve in the British Navy',\n      'A tax Britain placed on American goods',\n      'A treaty between Britain and France',\n      'A type of naval battle formation',\n    ],\n    correctIndex: 0,\n    explanation: 'Impressment was the British practice of stopping American ships and forcing sailors to serve in the Royal Navy. Britain claimed the right to take anyone they considered a British subject, and thousands of American sailors were taken this way.',\n    simpleExplanation: 'Impressment means the British grabbed American sailors from their ships and made them work on British ships. This happened to thousands of Americans and made people very angry.',\n  },\n  {\n    id: 'qg2',\n    section: 2,\n    question: 'Why was the congressional vote to declare war so close?',\n    simpleQuestion: 'Why did so many people in Congress vote against the war?',\n    answers: [\n      'Most Americans did not know who Britain was',\n      'The country was divided  New England merchants depended on trade with Britain',\n      'Congress had not yet been formed in 1812',\n      'The President vetoed the declaration of war',\n    ],\n    correctIndex: 1,\n    explanation: 'The war vote (79-49 in the House, 19-13 in the Senate) was the closest in American history. New England merchants opposed the war because they profited from trade with Britain, while the South and West supported it.',\n    simpleExplanation: 'Many people in New England did not want war because they made money trading with Britain. People in the South and West wanted war because they were angry about impressment and wanted more land.',\n  },\n  {\n    id: 'qg3',\n    section: 3,\n    question: 'Why was the USS Constitution nicknamed \"Old Ironsides\"?',\n    simpleQuestion: 'Why did people call the USS Constitution \"Old Ironsides\"?',\n    answers: [\n      'It was built entirely from iron',\n      'Its captain was named Ironsides',\n      'British cannonballs bounced off its thick oak hull',\n      'It was the oldest ship in the American fleet',\n    ],\n    correctIndex: 2,\n    explanation: 'During its battle with HMS Guerriere, British cannonballs appeared to bounce off the Constitution\\'s thick live-oak hull. Sailors shouted \"Huzza! Her sides are made of iron!\" and the nickname stuck.',\n    simpleExplanation: 'When British cannonballs bounced right off the ship\\'s thick wooden walls, people started calling it \"Old Ironsides\" because it seemed like the ship was made of iron.',\n  },\n  {\n    id: 'qg4',\n    section: 4,\n    question: 'What was Tecumseh trying to build?',\n    simpleQuestion: 'What was Tecumseh\\'s big plan?',\n    answers: [\n      'A confederacy of Native tribes to resist American expansion',\n      'A new capital city for the United States',\n      'A fleet of warships on the Great Lakes',\n      'A trade agreement with France',\n    ],\n    correctIndex: 0,\n    explanation: 'Tecumseh, a Shawnee leader, traveled thousands of miles to unite Native tribes into a single confederacy strong enough to stop American settlers from taking their lands. He allied with Britain because they promised to help create an independent Native state.',\n    simpleExplanation: 'Tecumseh wanted to bring all the Native tribes together into one big group. Together they would be strong enough to stop Americans from taking their land.',\n  },\n  {\n    id: 'qg5',\n    section: 5,\n    question: 'Why was the Battle of Lake Erie a turning point in the war?',\n    simpleQuestion: 'Why was winning the battle on Lake Erie so important?',\n    answers: [\n      'It was the first time the British surrendered to Americans',\n      'The battle destroyed all British ships in North America',\n      'It led directly to the signing of the peace treaty',\n      'American control of the lake cut off British supply lines to Detroit',\n    ],\n    correctIndex: 3,\n    explanation: 'Perry\\'s victory gave America control of Lake Erie, which cut off British supply routes to Detroit and the entire western frontier. This forced the British to retreat into Canada, where Tecumseh was killed at the Battle of the Thames.',\n    simpleExplanation: 'When Perry won on Lake Erie, the British could no longer send food and supplies to their soldiers at Detroit. They had to run away into Canada.',\n  },\n  {\n    id: 'qg6',\n    section: 6,\n    question: 'What event inspired Francis Scott Key to write \"The Star-Spangled Banner\"?',\n    simpleQuestion: 'What made Francis Scott Key write \"The Star-Spangled Banner\"?',\n    answers: [\n      'Watching Fort McHenry survive a night-long British bombardment',\n      'Seeing the White House burn down',\n      'Watching the Battle of New Orleans',\n      'Hearing about the Treaty of Ghent',\n    ],\n    correctIndex: 0,\n    explanation: 'British ships bombarded Fort McHenry in Baltimore Harbor all night. At dawn, Key saw the American flag still flying over the fort  proving the defenders had held. He wrote the poem that became the national anthem.',\n    simpleExplanation: 'The British fired bombs at Fort McHenry all night long. In the morning, the American flag was still flying. Francis Scott Key saw this and wrote a poem about it that became our national anthem.',\n  },\n  {\n    id: 'qg7',\n    section: 8,\n    question: 'What did the Treaty of Ghent actually change?',\n    simpleQuestion: 'What changed because of the peace treaty?',\n    answers: [\n      'Britain gave Canada to the United States',\n      'The United States paid Britain for war damages',\n      'Native Americans received a protected homeland',\n      'Nothing  borders returned to pre-war lines (status quo ante bellum)',\n    ],\n    correctIndex: 3,\n    explanation: 'The Treaty of Ghent restored everything to pre-war conditions  no territory changed hands. \"Status quo ante bellum\" means \"the way things were before the war.\" Native Americans were the biggest losers  the treaty said nothing about protecting their lands.',\n    simpleExplanation: 'The treaty changed nothing on the map. Everything went back to how it was before the war. No one gained any land. The Latin words \"status quo ante bellum\" mean \"back to how things were.\"',\n  },\n  {\n    id: 'qg8',\n    section: 9,\n    question: 'How did approximately 4,000 enslaved people seek freedom during the war?',\n    simpleQuestion: 'How did about 4,000 enslaved people try to become free during the war?',\n    answers: [\n      'They signed petitions and sent them to Congress',\n      'They escaped to British lines, where they were offered freedom',\n      'President Madison freed them by executive order',\n      'They moved to Canada before the war started',\n    ],\n    correctIndex: 1,\n    explanation: 'About 4,000 enslaved people escaped to British ships and camps, where they were offered freedom. Some joined the Colonial Marines and fought against their former enslavers. After the war, Britain resettled most in Nova Scotia and Trinidad.',\n    simpleExplanation: 'About 4,000 enslaved people ran away to the British side. The British promised them freedom. Some even joined the British army and fought. After the war, Britain helped them start new lives in Canada and the Caribbean.',\n  },\n];\n\nexport default quizGateQuestions;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  fetchTeacherStats,\n  fetchQuizGateStats,\n  supabase,\n  signInWithMagicLink,\n  signInWithPassword,\n  signUpTeacher,\n  signOut,\n  getSession,\n  onAuthStateChange,\n  getTeacherProfile,\n  createTeacherProfile,\n  createClass,\n  fetchTeacherClasses,\n} from '../lib/supabase';\nimport quizGateQuestions from '../data/quizGateQuestions';\n\nconst factionLabels = {\n  us: 'United States',\n  british: 'British/Canada',\n  native: 'Native Coalition',\n};\n\nconst questionLabels = {};\nquizGateQuestions.forEach(q => {\n  questionLabels[q.id] = q.question;\n});\n\n// ============================================\n// AuthGate  replaces old password LoginGate\n// ============================================\n\nfunction AuthGate({ onAuthenticated }) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [mode, setMode] = useState('magic'); // 'magic' | 'password'\n  const [authTab, setAuthTab] = useState('signin'); // 'signin' | 'signup'\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [magicSent, setMagicSent] = useState(false);\n\n  const handleMagicLink = async (e) => {\n    e.preventDefault();\n    if (!email.trim()) return;\n    setLoading(true);\n    setError('');\n    const { error: err } = await signInWithMagicLink(email.trim());\n    setLoading(false);\n    if (err) {\n      setError(typeof err === 'string' ? err : err.message || 'Failed to send link');\n    } else {\n      setMagicSent(true);\n    }\n  };\n\n  const handlePasswordAuth = async (e) => {\n    e.preventDefault();\n    if (!email.trim() || !password) return;\n    setLoading(true);\n    setError('');\n\n    if (authTab === 'signup') {\n      const { error: err } = await signUpTeacher(email.trim(), password);\n      setLoading(false);\n      if (err) {\n        setError(typeof err === 'string' ? err : err.message || 'Sign up failed');\n      } else {\n        setMagicSent(true); // Supabase sends confirmation email\n        setError('');\n      }\n    } else {\n      const { data, error: err } = await signInWithPassword(email.trim(), password);\n      setLoading(false);\n      if (err) {\n        setError(typeof err === 'string' ? err : err.message || 'Sign in failed');\n      } else if (data?.session) {\n        onAuthenticated(data.session);\n      }\n    }\n  };\n\n  if (magicSent) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center p-4\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n        <div className=\"bg-war-navy border border-war-gold/20 rounded-lg p-8 max-w-sm w-full shadow-modal animate-fadein text-center\">\n          <div className=\"flex items-center justify-center gap-2 mb-1\">\n            <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n            <p className=\"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold\">Administration</p>\n            <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n          </div>\n          <h1 className=\"text-war-gold font-display text-2xl mb-4 tracking-wide\">Check Your Email</h1>\n          <p className=\"text-parchment/60 font-body text-sm mb-2\">\n            {authTab === 'signup'\n              ? 'A confirmation email has been sent to:'\n              : 'A sign-in link has been sent to:'}\n          </p>\n          <p className=\"text-war-gold/80 font-body text-sm font-bold mb-4\">{email}</p>\n          <p className=\"text-parchment-dark/40 font-body text-xs mb-6\">\n            Click the link in the email to sign in. You can close this tab.\n          </p>\n          <button\n            onClick={() => { setMagicSent(false); setError(''); }}\n            className=\"text-parchment-dark/40 text-xs font-body hover:text-parchment/60 transition-colors cursor-pointer\"\n          >\n            Try again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n      <div className=\"bg-war-navy border border-war-gold/20 rounded-lg p-8 max-w-sm w-full shadow-modal animate-fadein\">\n        <div className=\"flex items-center justify-center gap-2 mb-1\">\n          <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n          <p className=\"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold\">Administration</p>\n          <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n        </div>\n        <h1 className=\"text-war-gold font-display text-2xl mb-1 text-center tracking-wide\">Teacher Dashboard</h1>\n        <p className=\"text-parchment-dark/40 text-xs text-center mb-6 font-body\">War of 1812 &mdash; Class Analytics</p>\n\n        {error && <p className=\"text-red-400 text-sm text-center mb-3 font-body\">{error}</p>}\n\n        {mode === 'magic' ? (\n          <form onSubmit={handleMagicLink}>\n            <label htmlFor=\"teacher-email\" className=\"sr-only\">Email</label>\n            <input\n              id=\"teacher-email\"\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder=\"Your school email\"\n              className=\"w-full px-4 py-3 bg-war-ink/50 border border-parchment-dark/15 rounded\n                         text-parchment/80 font-body text-sm placeholder-parchment-dark/30 focus:border-war-gold/40\n                         focus:outline-none mb-4\"\n              autoFocus\n            />\n            <button\n              type=\"submit\"\n              disabled={loading || !email.trim()}\n              className={`w-full py-3 font-display text-sm rounded font-bold tracking-wide shadow-copper transition-colors ${\n                loading || !email.trim()\n                  ? 'bg-parchment-dark/20 text-parchment-dark/40 cursor-not-allowed'\n                  : 'bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer'\n              }`}\n            >\n              {loading ? 'Sending...' : 'Send Magic Link'}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => { setMode('password'); setError(''); }}\n              className=\"block w-full text-center text-parchment-dark/40 text-xs mt-4 hover:text-war-gold/70 transition-colors font-body cursor-pointer\"\n            >\n              Use password instead\n            </button>\n          </form>\n        ) : (\n          <form onSubmit={handlePasswordAuth}>\n            <div className=\"flex mb-4 border border-parchment-dark/15 rounded overflow-hidden\">\n              <button\n                type=\"button\"\n                onClick={() => setAuthTab('signin')}\n                className={`flex-1 py-2 text-xs font-display tracking-wide transition-colors cursor-pointer ${\n                  authTab === 'signin'\n                    ? 'bg-war-gold/20 text-war-gold border-r border-parchment-dark/15'\n                    : 'text-parchment-dark/40 hover:text-parchment/60 border-r border-parchment-dark/15'\n                }`}\n              >\n                Sign In\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setAuthTab('signup')}\n                className={`flex-1 py-2 text-xs font-display tracking-wide transition-colors cursor-pointer ${\n                  authTab === 'signup'\n                    ? 'bg-war-gold/20 text-war-gold'\n                    : 'text-parchment-dark/40 hover:text-parchment/60'\n                }`}\n              >\n                Sign Up\n              </button>\n            </div>\n            <label htmlFor=\"teacher-email-pw\" className=\"sr-only\">Email</label>\n            <input\n              id=\"teacher-email-pw\"\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder=\"Your school email\"\n              className=\"w-full px-4 py-3 bg-war-ink/50 border border-parchment-dark/15 rounded\n                         text-parchment/80 font-body text-sm placeholder-parchment-dark/30 focus:border-war-gold/40\n                         focus:outline-none mb-3\"\n              autoFocus\n            />\n            <label htmlFor=\"teacher-pw\" className=\"sr-only\">Password</label>\n            <input\n              id=\"teacher-pw\"\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"Password\"\n              className=\"w-full px-4 py-3 bg-war-ink/50 border border-parchment-dark/15 rounded\n                         text-parchment/80 font-body text-sm placeholder-parchment-dark/30 focus:border-war-gold/40\n                         focus:outline-none mb-4\"\n            />\n            <button\n              type=\"submit\"\n              disabled={loading || !email.trim() || !password}\n              className={`w-full py-3 font-display text-sm rounded font-bold tracking-wide shadow-copper transition-colors ${\n                loading || !email.trim() || !password\n                  ? 'bg-parchment-dark/20 text-parchment-dark/40 cursor-not-allowed'\n                  : 'bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer'\n              }`}\n            >\n              {loading ? 'Working...' : authTab === 'signup' ? 'Create Account' : 'Sign In'}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => { setMode('magic'); setError(''); }}\n              className=\"block w-full text-center text-parchment-dark/40 text-xs mt-4 hover:text-war-gold/70 transition-colors font-body cursor-pointer\"\n            >\n              Use magic link instead\n            </button>\n          </form>\n        )}\n\n        <a\n          href={window.location.pathname}\n          className=\"block text-center text-parchment-dark/40 text-xs mt-4 hover:text-war-gold/70 transition-colors font-body\"\n        >\n          Back to Game\n        </a>\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// SetupProfile  first-time teacher\n// ============================================\n\nfunction SetupProfile({ userId, email, onComplete }) {\n  const [displayName, setDisplayName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!displayName.trim()) return;\n    setLoading(true);\n    setError('');\n    const { data, error: err } = await createTeacherProfile({\n      userId,\n      displayName: displayName.trim(),\n      email,\n    });\n    setLoading(false);\n    if (err) {\n      setError(typeof err === 'string' ? err : err.message || 'Failed to create profile');\n    } else {\n      onComplete(data);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n      <form onSubmit={handleSubmit} className=\"bg-war-navy border border-war-gold/20 rounded-lg p-8 max-w-sm w-full shadow-modal animate-fadein\">\n        <div className=\"flex items-center justify-center gap-2 mb-1\">\n          <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n          <p className=\"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold\">Welcome</p>\n          <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n        </div>\n        <h1 className=\"text-war-gold font-display text-2xl mb-1 text-center tracking-wide\">Set Up Your Profile</h1>\n        <p className=\"text-parchment-dark/40 text-xs text-center mb-6 font-body\">This name will be visible to you on the dashboard.</p>\n        {error && <p className=\"text-red-400 text-sm text-center mb-3 font-body\">{error}</p>}\n        <label htmlFor=\"display-name\" className=\"sr-only\">Display Name</label>\n        <input\n          id=\"display-name\"\n          type=\"text\"\n          value={displayName}\n          onChange={(e) => setDisplayName(e.target.value.slice(0, 50))}\n          placeholder=\"e.g., Mr. B\"\n          className=\"w-full px-4 py-3 bg-war-ink/50 border border-parchment-dark/15 rounded\n                     text-parchment/80 font-body text-sm placeholder-parchment-dark/30 focus:border-war-gold/40\n                     focus:outline-none mb-4\"\n          autoFocus\n        />\n        <button\n          type=\"submit\"\n          disabled={loading || !displayName.trim()}\n          className={`w-full py-3 font-display text-sm rounded font-bold tracking-wide shadow-copper transition-colors ${\n            loading || !displayName.trim()\n              ? 'bg-parchment-dark/20 text-parchment-dark/40 cursor-not-allowed'\n              : 'bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer'\n          }`}\n        >\n          {loading ? 'Saving...' : 'Continue'}\n        </button>\n      </form>\n    </div>\n  );\n}\n\n// ============================================\n// ClassManager  create and list classes\n// ============================================\n\nfunction ClassManager({ classes, teacherId, onClassCreated }) {\n  const [creating, setCreating] = useState(false);\n  const [newClassName, setNewClassName] = useState('');\n  const [createLoading, setCreateLoading] = useState(false);\n  const [createError, setCreateError] = useState('');\n  const [copiedCode, setCopiedCode] = useState(null);\n\n  const handleCreate = async (e) => {\n    e.preventDefault();\n    if (!newClassName.trim()) return;\n    setCreateLoading(true);\n    setCreateError('');\n    const { data, error } = await createClass({ teacherId, name: newClassName.trim() });\n    setCreateLoading(false);\n    if (error) {\n      setCreateError(typeof error === 'string' ? error : error.message || 'Failed to create class');\n    } else {\n      onClassCreated(data);\n      setNewClassName('');\n      setCreating(false);\n    }\n  };\n\n  const copyLink = (code) => {\n    const url = `https://1812.mrbsocialstudies.org?class=${code}`;\n    navigator.clipboard.writeText(url).then(() => {\n      setCopiedCode(code);\n      setTimeout(() => setCopiedCode(null), 2000);\n    }).catch(() => {});\n  };\n\n  return (\n    <div className=\"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8\">\n      <div className=\"flex items-center justify-between mb-4 flex-wrap gap-3\">\n        <div>\n          <h2 className=\"text-war-gold/80 font-display text-base tracking-wide\">Your Classes</h2>\n          <p className=\"text-parchment-dark/40 text-xs font-body mt-0.5\">\n            Share codes with students so their data appears here\n          </p>\n        </div>\n        {!creating && (\n          <button\n            onClick={() => setCreating(true)}\n            className=\"px-4 py-1.5 bg-war-gold text-war-ink font-display text-xs rounded font-bold\n                       hover:bg-war-brass transition-colors cursor-pointer tracking-wide\"\n          >\n            Create Class\n          </button>\n        )}\n      </div>\n\n      {creating && (\n        <form onSubmit={handleCreate} className=\"mb-4 flex gap-2 items-end\">\n          <div className=\"flex-1\">\n            <label className=\"block text-parchment/60 text-xs uppercase tracking-wider mb-1 font-body font-bold\">\n              Class Name\n            </label>\n            <input\n              type=\"text\"\n              value={newClassName}\n              onChange={(e) => setNewClassName(e.target.value.slice(0, 40))}\n              placeholder=\"e.g., Period 3\"\n              className=\"w-full bg-war-ink/50 border border-parchment-dark/15 rounded px-3 py-2 text-parchment/90\n                         placeholder-parchment-dark/30 font-body text-sm focus:border-war-gold/40 focus:outline-none transition-colors\"\n              autoFocus\n            />\n          </div>\n          <button\n            type=\"submit\"\n            disabled={createLoading || !newClassName.trim()}\n            className={`px-4 py-2 font-display text-xs rounded font-bold tracking-wide transition-colors ${\n              createLoading || !newClassName.trim()\n                ? 'bg-parchment-dark/20 text-parchment-dark/40 cursor-not-allowed'\n                : 'bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer'\n            }`}\n          >\n            {createLoading ? '...' : 'Create'}\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => { setCreating(false); setCreateError(''); }}\n            className=\"px-3 py-2 text-parchment-dark/40 text-xs font-body hover:text-parchment/60 transition-colors cursor-pointer\"\n          >\n            Cancel\n          </button>\n        </form>\n      )}\n      {createError && <p className=\"text-red-400 text-xs mb-3 font-body\">{createError}</p>}\n\n      {classes.length === 0 ? (\n        <p className=\"text-parchment-dark/40 italic font-body text-sm\">\n          No classes yet. Create one and share the code with your students.\n        </p>\n      ) : (\n        <div className=\"space-y-2\">\n          {classes.map((cls) => (\n            <div key={cls.id} className=\"flex items-center justify-between bg-black/20 rounded px-4 py-3 border border-parchment-dark/8\">\n              <div>\n                <p className=\"text-parchment/80 font-body text-sm font-bold\">{cls.name}</p>\n                <p className=\"text-parchment-dark/50 font-mono text-xs tracking-widest mt-0.5\">\n                  Code: <span className=\"text-war-gold/80 font-bold\">{cls.code}</span>\n                </p>\n              </div>\n              <button\n                onClick={() => copyLink(cls.code)}\n                className=\"px-3 py-1.5 text-xs border border-parchment-dark/15 text-parchment-dark/50 rounded\n                           hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer font-body flex-shrink-0\"\n              >\n                {copiedCode === cls.code ? 'Copied!' : 'Copy Link'}\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ============================================\n// Dashboard  main dashboard content\n// ============================================\n\nfunction Dashboard({ session, profile, onSignOut }) {\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [classes, setClasses] = useState([]);\n  const [selectedClass, setSelectedClass] = useState('');\n  const [quizGateData, setQuizGateData] = useState([]);\n  const [expandedQuestion, setExpandedQuestion] = useState(null);\n\n  const loadData = useCallback(async (classIds) => {\n    setLoading(true);\n    try {\n      const [statsResult, qgResult] = await Promise.all([\n        fetchTeacherStats(classIds),\n        fetchQuizGateStats(classIds),\n      ]);\n      setStats(statsResult.data);\n      setQuizGateData(qgResult.data || []);\n    } catch {\n      setStats(null);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    const init = async () => {\n      const { data: classList } = await fetchTeacherClasses(session.user.id);\n      setClasses(classList || []);\n      const classIds = (classList || []).map(c => c.id);\n      await loadData(classIds.length > 0 ? classIds : undefined);\n    };\n    init();\n  }, [session.user.id, loadData]);\n\n  const handleClassCreated = (newClass) => {\n    setClasses(prev => [...prev, newClass]);\n  };\n\n  const handleSignOut = async () => {\n    await signOut();\n    onSignOut();\n  };\n\n  // Filter by selected class\n  const classNameMap = {};\n  classes.forEach(c => { classNameMap[c.id] = c.name; });\n\n  const filteredScores = selectedClass\n    ? (stats?.allScores || []).filter(s => s.class_id === selectedClass)\n    : stats?.allScores || [];\n\n  const filteredQGData = selectedClass\n    ? quizGateData.filter(r => r.class_id === selectedClass)\n    : quizGateData;\n\n  const qgSessions = new Set(filteredQGData.map(r => r.session_id));\n\n  const qgQuestionStats = quizGateQuestions.map(q => {\n    const rows = filteredQGData.filter(r => r.question_id === q.id);\n    const totalStudents = rows.length;\n    const totalRetries = rows.reduce((sum, r) => sum + r.retries, 0);\n    const firstTryCount = rows.filter(r => r.retries === 0).length;\n    return {\n      id: q.id,\n      question: q.question,\n      totalStudents,\n      avgRetries: totalStudents > 0 ? (totalRetries / totalStudents) : 0,\n      firstTryPercent: totalStudents > 0 ? Math.round((firstTryCount / totalStudents) * 100) : 0,\n      rows,\n    };\n  }).sort((a, b) => b.avgRetries - a.avgRetries);\n\n  const exportCSV = () => {\n    const headers = ['Name', 'Class', 'Faction', 'Difficulty', 'Score', 'Quiz Correct', 'Quiz Total', 'Quiz %', 'Battles Won', 'Battles Fought', 'Territories', 'Date'];\n    const rows = filteredScores.map((s) => [\n      s.player_name,\n      classNameMap[s.class_id] || s.class_period || 'Unassigned',\n      factionLabels[s.faction] || s.faction,\n      s.difficulty || 'medium',\n      s.final_score,\n      s.knowledge_correct,\n      s.knowledge_total,\n      s.knowledge_total > 0 ? Math.round((s.knowledge_correct / s.knowledge_total) * 100) : 0,\n      s.battles_won,\n      s.battles_fought,\n      s.territories_held,\n      new Date(s.created_at).toLocaleDateString(),\n    ]);\n\n    const csv = [headers, ...rows].map(r => r.map(cell => `\"${String(cell).replace(/\"/g, '\"\"')}\"`).join(',')).join('\\n');\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `war1812_scores${selectedClass ? `_${classNameMap[selectedClass] || selectedClass}` : ''}.csv`;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const exportQuizGateCSV = () => {\n    const headers = ['Student', 'Class', 'Mode', 'Question', 'Retries', 'Date'];\n    const rows = filteredQGData.map(r => [\n      r.player_name,\n      classNameMap[r.class_id] || r.class_period || 'Unassigned',\n      r.game_mode,\n      questionLabels[r.question_id] || r.question_id,\n      r.retries,\n      new Date(r.created_at).toLocaleDateString(),\n    ]);\n    const csv = [headers, ...rows].map(r => r.map(cell => `\"${String(cell).replace(/\"/g, '\"\"')}\"`).join(',')).join('\\n');\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `war1812_quiz_gate${selectedClass ? `_${classNameMap[selectedClass] || selectedClass}` : ''}.csv`;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n        <p className=\"text-parchment/60 font-body text-base italic\">Loading dashboard...</p>\n      </div>\n    );\n  }\n\n  if (!stats) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n        <p className=\"text-red-400/80 font-body text-base\">Failed to load data</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen text-parchment\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n      {/* Header */}\n      <header className=\"bg-war-navy/80 backdrop-blur-sm px-4 md:px-6 py-3 md:py-4 border-b border-war-gold/15 flex items-center justify-between gap-3 sticky top-0 z-10\">\n        <div>\n          <h1 className=\"text-war-gold font-display text-lg md:text-xl tracking-wide\">\n            Welcome, {profile.display_name}\n          </h1>\n          <p className=\"text-parchment-dark/40 text-xs font-body\">\n            War of 1812 &mdash; {stats.totalGames} games played\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\n          <a\n            href={window.location.pathname}\n            className=\"px-3 md:px-4 py-2 border border-parchment-dark/15 text-parchment-dark/50 rounded\n                       hover:border-war-gold/40 hover:text-war-gold transition-colors text-xs font-body cursor-pointer\"\n          >\n            Back to Game\n          </a>\n          <button\n            onClick={handleSignOut}\n            className=\"px-3 md:px-4 py-2 border border-parchment-dark/15 text-parchment-dark/50 rounded\n                       hover:border-war-red/40 hover:text-war-red/80 transition-colors text-xs font-body cursor-pointer\"\n          >\n            Sign Out\n          </button>\n        </div>\n      </header>\n\n      <div className=\"p-3 md:p-6 max-w-6xl mx-auto space-y-4 md:space-y-6\">\n        {/* Class Manager */}\n        <ClassManager\n          classes={classes}\n          teacherId={session.user.id}\n          onClassCreated={handleClassCreated}\n        />\n\n        {/* Game Guide Summary */}\n        <div className=\"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-war-gold/80 font-display text-base tracking-wide\">Game Guide</h2>\n            <a\n              href=\"#guide\"\n              className=\"text-war-gold/60 hover:text-war-gold text-xs font-body transition-colors\"\n            >\n              Full Teacher Guide &rarr;\n            </a>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"border-l-2 border-war-gold/20 pl-3\">\n              <p className=\"text-parchment/80 text-sm font-body font-bold mb-1\">How It Works</p>\n              <p className=\"text-parchment/50 text-xs font-body leading-relaxed\">\n                Students choose a faction, manage territories on an interactive map, and answer knowledge checks while learning about the War of 1812. Games take 30-45 minutes with save/resume support.\n              </p>\n            </div>\n            <div className=\"border-l-2 border-war-copper/20 pl-3\">\n              <p className=\"text-parchment/80 text-sm font-body font-bold mb-1\">What Students Learn</p>\n              <p className=\"text-parchment/50 text-xs font-body leading-relaxed\">\n                Causes and events of the war, multiple perspectives (U.S., British, Native), diverse experiences (women, African Americans), geographic reasoning, and connections to later American history.\n              </p>\n            </div>\n            <div className=\"border-l-2 border-parchment-dark/15 pl-3\">\n              <p className=\"text-parchment/80 text-sm font-body font-bold mb-1\">Using This Dashboard</p>\n              <p className=\"text-parchment/50 text-xs font-body leading-relaxed\">\n                Create classes and share codes. Monitor quiz scores, compare classes, track faction choices, and export CSV data. Use quiz performance to identify topics needing additional instruction.\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Summary cards */}\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n          <div className=\"bg-war-navy/50 rounded-lg p-4 text-center border border-parchment-dark/8\">\n            <p className=\"text-3xl font-bold text-war-gold font-display\">{stats.totalGames}</p>\n            <p className=\"text-xs text-parchment-dark/40 font-body\">Total Games</p>\n          </div>\n          <div className=\"bg-war-navy/50 rounded-lg p-4 text-center border border-parchment-dark/8\">\n            <p className=\"text-3xl font-bold text-parchment/80 font-display\">\n              {stats.totalGames > 0\n                ? Math.round(stats.allScores.reduce((a, s) => a + s.final_score, 0) / stats.totalGames)\n                : 0}\n            </p>\n            <p className=\"text-xs text-parchment-dark/40 font-body\">Avg Score</p>\n          </div>\n          <div className=\"bg-war-navy/50 rounded-lg p-4 text-center border border-parchment-dark/8\">\n            <p className=\"text-3xl font-bold text-green-400 font-display\">\n              {stats.allScores.filter((s) => s.knowledge_total > 0).length > 0\n                ? Math.round(\n                    stats.allScores\n                      .filter((s) => s.knowledge_total > 0)\n                      .reduce((a, s) => a + (s.knowledge_correct / s.knowledge_total) * 100, 0)\n                    / stats.allScores.filter((s) => s.knowledge_total > 0).length\n                  )\n                : 0}%\n            </p>\n            <p className=\"text-xs text-parchment-dark/40 font-body\">Avg Quiz Score</p>\n          </div>\n          <div className=\"bg-war-navy/50 rounded-lg p-4 text-center border border-parchment-dark/8\">\n            <p className=\"text-3xl font-bold text-parchment/80 font-display\">{classes.length}</p>\n            <p className=\"text-xs text-parchment-dark/40 font-body\">Classes</p>\n          </div>\n        </div>\n\n        {/* Class Breakdown */}\n        {classes.length > 0 && (\n          <div className=\"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8\">\n            <h2 className=\"text-war-gold/80 font-display text-base mb-4 tracking-wide\">By Class</h2>\n            <table className=\"w-full text-sm font-body\">\n              <thead>\n                <tr className=\"text-parchment-dark/40 border-b border-parchment-dark/15 text-left\">\n                  <th className=\"py-2 font-normal\">Class</th>\n                  <th className=\"py-2 text-right font-normal\">Games</th>\n                  <th className=\"py-2 text-right font-normal\">Avg Score</th>\n                  <th className=\"py-2 text-right font-normal\">Top Score</th>\n                  <th className=\"py-2 text-right font-normal\">Avg Quiz %</th>\n                </tr>\n              </thead>\n              <tbody>\n                {(stats.classStats || [])\n                  .filter(cs => cs.classId !== 'unassigned' && classNameMap[cs.classId])\n                  .map((cs) => (\n                    <tr key={cs.classId} className=\"border-b border-parchment-dark/8\">\n                      <td className=\"py-2 font-bold text-parchment/80\">{classNameMap[cs.classId]}</td>\n                      <td className=\"py-2 text-right text-parchment-dark/60\">{cs.count}</td>\n                      <td className=\"py-2 text-right text-war-gold font-bold font-display\">{cs.avgScore}</td>\n                      <td className=\"py-2 text-right text-parchment-dark/60\">{cs.topScore}</td>\n                      <td className=\"py-2 text-right text-parchment-dark/60\">{cs.avgQuizPercent}%</td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n\n        {/* Faction Distribution */}\n        <div className=\"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8\">\n          <h2 className=\"text-war-gold/80 font-display text-base mb-4 tracking-wide\">Faction Distribution</h2>\n          <div className=\"grid grid-cols-3 gap-4\">\n            {stats.factionStats.map((f) => (\n              <div key={f.faction} className=\"text-center\">\n                <p className=\"text-2xl font-bold text-parchment/80 font-display\">{f.count}</p>\n                <p className=\"text-xs text-parchment-dark/50 font-body\">{factionLabels[f.faction]}</p>\n                <p className=\"text-xs text-war-gold/60 font-body\">Avg: {f.avgScore}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Quiz Gate Analytics */}\n        <div className=\"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8\">\n          <div className=\"flex items-center justify-between mb-4 flex-wrap gap-3\">\n            <div>\n              <h2 className=\"text-war-gold/80 font-display text-base tracking-wide\">Quiz Gate Analytics</h2>\n              <p className=\"text-parchment-dark/40 text-xs font-body mt-0.5\">\n                {qgSessions.size} students attempted the pre-game quiz\n              </p>\n            </div>\n            {filteredQGData.length > 0 && (\n              <button\n                onClick={exportQuizGateCSV}\n                className=\"px-4 py-1.5 text-xs border border-parchment-dark/15 text-parchment-dark/50 rounded\n                           hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer font-body\"\n              >\n                Export Quiz CSV\n              </button>\n            )}\n          </div>\n\n          {filteredQGData.length === 0 ? (\n            <p className=\"text-parchment-dark/40 italic font-body text-sm\">No quiz gate data yet</p>\n          ) : (\n            <div className=\"space-y-1\">\n              <table className=\"w-full text-sm font-body\">\n                <thead>\n                  <tr className=\"text-parchment-dark/40 border-b border-parchment-dark/15 text-left\">\n                    <th className=\"py-2 font-normal\">#</th>\n                    <th className=\"py-2 font-normal\">Question</th>\n                    <th className=\"py-2 text-right font-normal\">Avg Retries</th>\n                    <th className=\"py-2 text-right font-normal\">First-Try %</th>\n                    <th className=\"py-2 text-right font-normal\">Students</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {qgQuestionStats.map((q, idx) => (\n                    <React.Fragment key={q.id}>\n                      <tr\n                        className=\"border-b border-parchment-dark/8 cursor-pointer hover:bg-war-gold/5 transition-colors\"\n                        onClick={() => setExpandedQuestion(expandedQuestion === q.id ? null : q.id)}\n                      >\n                        <td className=\"py-2 text-parchment-dark/50\">{idx + 1}</td>\n                        <td className=\"py-2 text-parchment/80 max-w-xs\">\n                          <span className=\"line-clamp-1\">{q.question}</span>\n                        </td>\n                        <td className=\"py-2 text-right font-bold font-display text-parchment/80\">\n                          {q.avgRetries.toFixed(1)}\n                        </td>\n                        <td className=\"py-2 text-right\">\n                          <span className={`font-bold font-display ${\n                            q.firstTryPercent >= 70 ? 'text-green-400' :\n                            q.firstTryPercent >= 40 ? 'text-yellow-400' :\n                            'text-red-400'\n                          }`}>\n                            {q.firstTryPercent}%\n                          </span>\n                        </td>\n                        <td className=\"py-2 text-right text-parchment-dark/60\">{q.totalStudents}</td>\n                      </tr>\n                      {expandedQuestion === q.id && q.rows.length > 0 && (\n                        <tr>\n                          <td colSpan={5} className=\"p-0\">\n                            <div className=\"bg-black/20 border-l-2 border-war-gold/20 ml-4 mb-2 rounded-r\">\n                              <table className=\"w-full text-xs font-body\">\n                                <thead>\n                                  <tr className=\"text-parchment-dark/40 border-b border-parchment-dark/10\">\n                                    <th className=\"py-1.5 px-3 font-normal text-left\">Student</th>\n                                    <th className=\"py-1.5 px-3 font-normal text-left\">Class</th>\n                                    <th className=\"py-1.5 px-3 font-normal text-left\">Mode</th>\n                                    <th className=\"py-1.5 px-3 font-normal text-right\">Retries</th>\n                                  </tr>\n                                </thead>\n                                <tbody>\n                                  {[...q.rows].sort((a, b) => b.retries - a.retries).map((r) => (\n                                    <tr key={r.session_id} className=\"border-b border-parchment-dark/5\">\n                                      <td className=\"py-1.5 px-3 text-parchment/70\">{r.player_name}</td>\n                                      <td className=\"py-1.5 px-3 text-parchment-dark/50\">{classNameMap[r.class_id] || r.class_period || '-'}</td>\n                                      <td className=\"py-1.5 px-3 text-parchment-dark/50 capitalize\">{r.game_mode}</td>\n                                      <td className=\"py-1.5 px-3 text-right\">\n                                        <span className={`font-bold ${r.retries === 0 ? 'text-green-400' : r.retries <= 2 ? 'text-yellow-400' : 'text-red-400'}`}>\n                                          {r.retries}\n                                        </span>\n                                      </td>\n                                    </tr>\n                                  ))}\n                                </tbody>\n                              </table>\n                            </div>\n                          </td>\n                        </tr>\n                      )}\n                    </React.Fragment>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n\n        {/* Individual Scores */}\n        <div className=\"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8\">\n          <div className=\"flex items-center justify-between mb-4 flex-wrap gap-3\">\n            <h2 className=\"text-war-gold/80 font-display text-base tracking-wide\">All Scores</h2>\n            <div className=\"flex items-center gap-3\">\n              {classes.length > 0 && (\n                <select\n                  value={selectedClass}\n                  onChange={(e) => setSelectedClass(e.target.value)}\n                  className=\"bg-war-ink/50 text-parchment/80 border border-parchment-dark/15 rounded px-3 py-1.5 text-sm font-body cursor-pointer\n                             focus:border-war-gold/40 focus:outline-none\"\n                >\n                  <option value=\"\">All Classes</option>\n                  {classes.map((c) => (\n                    <option key={c.id} value={c.id}>{c.name}</option>\n                  ))}\n                </select>\n              )}\n              <button\n                onClick={exportCSV}\n                className=\"px-4 py-1.5 text-xs border border-parchment-dark/15 text-parchment-dark/50 rounded\n                           hover:border-war-gold/40 hover:text-war-gold transition-colors cursor-pointer font-body\"\n              >\n                Export CSV\n              </button>\n            </div>\n          </div>\n\n          {filteredScores.length === 0 ? (\n            <p className=\"text-parchment-dark/40 italic font-body text-sm\">No scores found</p>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full text-sm font-body\">\n                <thead>\n                  <tr className=\"text-parchment-dark/40 border-b border-parchment-dark/15 text-left\">\n                    <th className=\"py-2 font-normal\">Name</th>\n                    <th className=\"py-2 font-normal\">Class</th>\n                    <th className=\"py-2 font-normal\">Faction</th>\n                    <th className=\"py-2 font-normal\">Difficulty</th>\n                    <th className=\"py-2 text-right font-normal\">Score</th>\n                    <th className=\"py-2 text-right font-normal\">Quiz</th>\n                    <th className=\"py-2 text-right font-normal\">Battles</th>\n                    <th className=\"py-2 text-right font-normal\">Date</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredScores.map((s) => (\n                    <tr key={s.id} className=\"border-b border-parchment-dark/8\">\n                      <td className=\"py-2 font-bold text-parchment/80\">{s.player_name}</td>\n                      <td className=\"py-2 text-parchment-dark/60\">{classNameMap[s.class_id] || s.class_period || '-'}</td>\n                      <td className=\"py-2 text-parchment-dark/60\">{factionLabels[s.faction]}</td>\n                      <td className=\"py-2 text-parchment-dark/60 capitalize\">{s.difficulty || 'medium'}</td>\n                      <td className=\"py-2 text-right text-war-gold font-bold font-display\">{s.final_score}</td>\n                      <td className=\"py-2 text-right text-parchment-dark/60\">\n                        {s.knowledge_total > 0\n                          ? `${s.knowledge_correct}/${s.knowledge_total} (${Math.round((s.knowledge_correct / s.knowledge_total) * 100)}%)`\n                          : '-'}\n                      </td>\n                      <td className=\"py-2 text-right text-parchment-dark/60\">{s.battles_won}/{s.battles_fought}</td>\n                      <td className=\"py-2 text-right text-parchment-dark/40\">\n                        {new Date(s.created_at).toLocaleDateString()}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// TeacherDashboard  main export\n// ============================================\n\nexport default function TeacherDashboard() {\n  const [session, setSession] = useState(null);\n  const [profile, setProfile] = useState(null);\n  const [authLoading, setAuthLoading] = useState(true);\n\n  useEffect(() => {\n    // Check for existing session\n    getSession().then(({ data }) => {\n      if (data?.session) {\n        setSession(data.session);\n        // Load profile\n        getTeacherProfile(data.session.user.id).then(({ data: prof }) => {\n          setProfile(prof);\n          setAuthLoading(false);\n        });\n      } else {\n        setAuthLoading(false);\n      }\n    });\n\n    // Listen for auth state changes (magic link redirect)\n    const { data: { subscription } } = onAuthStateChange((_event, newSession) => {\n      setSession(newSession);\n      if (newSession) {\n        getTeacherProfile(newSession.user.id).then(({ data: prof }) => {\n          setProfile(prof);\n          setAuthLoading(false);\n        });\n      } else {\n        setProfile(null);\n        setAuthLoading(false);\n      }\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  if (!supabase) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center p-4\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n        <div className=\"text-center\">\n          <h1 className=\"text-war-gold font-display text-2xl mb-4 tracking-wide\">Teacher Dashboard</h1>\n          <p className=\"text-parchment-dark/50 mb-4 font-body text-sm\">\n            Supabase is not configured. Add your credentials to .env to enable the leaderboard.\n          </p>\n          <a\n            href={window.location.pathname}\n            className=\"text-war-gold/70 hover:text-war-gold transition-colors font-body text-sm\"\n          >\n            Back to Game\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n        <p className=\"text-parchment/60 font-body text-base italic\">Loading...</p>\n      </div>\n    );\n  }\n\n  if (!session) {\n    return <AuthGate onAuthenticated={(s) => setSession(s)} />;\n  }\n\n  // First-time teacher  no profile yet\n  if (!profile) {\n    return (\n      <SetupProfile\n        userId={session.user.id}\n        email={session.user.email}\n        onComplete={(prof) => setProfile(prof)}\n      />\n    );\n  }\n\n  return (\n    <Dashboard\n      session={session}\n      profile={profile}\n      onSignOut={() => { setSession(null); setProfile(null); }}\n    />\n  );\n}\n","/**\n * Teacher Guide Content for War of 1812: Rise of the Nation\n *\n * Structured content for a standalone teacher guide page.\n * Covers setup, learning objectives, standards, facilitation, and assessment.\n */\n\nexport const teacherGuide = {\n  overview: {\n    title: 'About This Game',\n    content: 'War of 1812: Rise of the Nation is a turn-based strategy game designed for 8th-grade U.S. History classrooms. Students choose a faction (United States, British/Canada, or Native Coalition), manage territories on an interactive map, and make strategic decisions while learning about the causes, events, and consequences of the War of 1812. The game integrates knowledge check questions, historical event cards, and primary source materials into gameplay.',\n    targetAudience: '8th-grade U.S. History students',\n    duration: '2-3 class periods (45-90 minutes each)',\n    players: 'Individual play against AI opponent',\n  },\n\n  learningObjectives: {\n    title: 'Learning Objectives',\n    objectives: [\n      {\n        id: 'lo1',\n        text: 'Analyze the political, economic, and social causes of the War of 1812',\n        assessedBy: 'Knowledge checks (Rounds 1-4), Learning Mode pre-game content',\n      },\n      {\n        id: 'lo2',\n        text: 'Evaluate the roles of key military and political leaders from multiple perspectives',\n        assessedBy: 'People Profiles, Leader abilities in gameplay, Knowledge checks',\n      },\n      {\n        id: 'lo3',\n        text: 'Examine the war\\'s impact on diverse groups including women, African Americans, and Native Americans',\n        assessedBy: 'Required knowledge checks on diverse perspectives, People Profiles \"Other Voices\"',\n      },\n      {\n        id: 'lo4',\n        text: 'Analyze the geographic factors that influenced military strategy and outcomes',\n        assessedBy: 'Interactive map gameplay, territory control decisions, Learning Mode geography section',\n      },\n      {\n        id: 'lo5',\n        text: 'Connect the War of 1812 to broader themes in American history including nationalism, expansion, and Native displacement',\n        assessedBy: '\"What Came Next\" post-game section, Historian\\'s Analysis, Treaty of Ghent knowledge checks',\n      },\n      {\n        id: 'lo6',\n        text: 'Interpret primary source documents and excerpts in historical context',\n        assessedBy: 'People Profiles primary sources, Learning Mode source excerpts, Event cards',\n      },\n    ],\n  },\n\n  standards: {\n    title: 'Standards Alignment',\n    framework: 'C3 Framework for Social Studies',\n    alignments: [\n      {\n        code: 'D2.His.1.6-8',\n        description: 'Analyze connections among events and developments in broader historical contexts.',\n        gameConnection: 'Event cards show cause-and-effect chains; \"What Came Next\" connects to later history',\n      },\n      {\n        code: 'D2.His.3.6-8',\n        description: 'Use questions generated about individuals and groups to analyze why they, and the developments they shaped, are seen as historically significant.',\n        gameConnection: 'People Profiles explore significance of leaders and ordinary people alike',\n      },\n      {\n        code: 'D2.His.4.6-8',\n        description: 'Analyze multiple factors that influenced the perspectives of people during different historical eras.',\n        gameConnection: 'Three playable factions offer different perspectives; diverse knowledge checks',\n      },\n      {\n        code: 'D2.His.5.6-8',\n        description: 'Explain how and why perspectives of people have changed over time.',\n        gameConnection: 'Historian\\'s Analysis compares student outcomes to historical reality',\n      },\n      {\n        code: 'D2.His.14.6-8',\n        description: 'Explain multiple causes and effects of events and developments in the past.',\n        gameConnection: 'Learning Mode cause/effect sections; event card consequences',\n      },\n      {\n        code: 'D2.Geo.4.6-8',\n        description: 'Explain how cultural patterns and economic decisions influence environments and the daily lives of people.',\n        gameConnection: 'Territory control, resource management, geographic strategy on the map',\n      },\n    ],\n  },\n\n  classroomSetup: {\n    title: 'Classroom Setup',\n    sections: [\n      {\n        heading: 'Technology Requirements',\n        items: [\n          'Any device with a modern web browser (Chrome, Firefox, Safari, Edge)',\n          'Internet connection for initial page load (game runs client-side after loading)',\n          'Internet connection for leaderboard features (optional  game works offline)',\n          'Works on Chromebooks, iPads, laptops, and desktop computers',\n          'No installation or account creation required',\n        ],\n      },\n      {\n        heading: 'Before Class',\n        items: [\n          'Test the game URL on your school\\'s network to ensure it loads',\n          'Decide whether to assign factions or let students choose',\n          'Consider having students complete the Learning Mode as homework before gameplay',\n          'Create your teacher account at #teacher (sign in with email)',\n          'Prepare discussion questions for post-game reflection',\n        ],\n      },\n      {\n        heading: 'Suggested Grouping Options',\n        items: [\n          'Individual play: Each student plays against the AI on their own device',\n          'Partner play: Pairs collaborate on strategy decisions together',\n          'Faction groups: Assign the same faction to a group, compare strategies afterward',\n          'Jigsaw: Each group plays a different faction, then presents their faction\\'s perspective',\n        ],\n      },\n    ],\n  },\n\n  howToPlay: {\n    title: 'How to Play',\n    phases: [\n      {\n        name: 'Event Phase',\n        description: 'A historical event card appears, describing a real event from the War of 1812. The event may affect troop counts, territory control, or available resources. Students read the event and consider its historical significance.',\n      },\n      {\n        name: 'Allocate Phase',\n        description: 'Students place reinforcement troops on their territories. Strategic decisions include whether to reinforce frontline territories or build reserves. The number of reinforcements depends on territories controlled and leader bonuses.',\n      },\n      {\n        name: 'Battle Phase',\n        description: 'Students can attack adjacent enemy territories. Combat uses a dice-based system modified by leader abilities, troop numbers, and terrain. Students must weigh risk vs. reward  attacking with too few troops is risky.',\n      },\n      {\n        name: 'Maneuver Phase',\n        description: 'Students can move troops between their own adjacent territories to reposition for defense or prepare future attacks.',\n      },\n      {\n        name: 'Score Phase',\n        description: 'Points are tallied based on territories controlled. The AI opponent then takes its turn. Knowledge check questions may appear, testing understanding of historical content.',\n      },\n    ],\n    victoryConditions: [\n      { type: 'Domination', description: 'Control 75% or more of all territories' },\n      { type: 'Elimination', description: 'Eliminate all enemy factions from the map' },\n      { type: 'Treaty', description: 'After 12 rounds, the Treaty of Ghent ends the war. Highest score wins.' },\n    ],\n  },\n\n  facilitation: {\n    title: 'Facilitation Tips',\n    tips: [\n      {\n        heading: 'Introduce the Learning Mode First',\n        content: 'Have students complete the Learning Mode before playing. This 5-10 minute overview covers the war\\'s causes, key events, and outcomes. Students who complete it perform significantly better on in-game knowledge checks.',\n      },\n      {\n        heading: 'Encourage the People Profiles',\n        content: 'The People of 1812 gallery (accessible from the main menu) introduces students to historical figures beyond the military leaders. Assign specific profiles as reading before or after gameplay.',\n      },\n      {\n        heading: 'Debrief Faction Perspectives',\n        content: 'After gameplay, ask students to compare experiences across factions. What was different about playing as the Native Coalition vs. the United States? This naturally leads to discussions about perspective and bias.',\n      },\n      {\n        heading: 'Use Knowledge Checks as Formative Assessment',\n        content: 'The Teacher Dashboard shows each student\\'s quiz performance. Use this data to identify content areas that need additional instruction. Required questions ensure all students encounter diverse perspectives.',\n      },\n      {\n        heading: 'Connect to the \"What Came Next\" Section',\n        content: 'The post-game \"What Came Next\" section links the war to the Era of Good Feelings, Indian Removal, Manifest Destiny, and other topics in your curriculum. Use this as a bridge to your next unit.',\n      },\n      {\n        heading: 'Address Historical Sensitivity',\n        content: 'The game deals with topics including slavery, Native displacement, and military violence. Preview the content and prepare students for sensitive material. The game treats these topics with historical accuracy and respect.',\n      },\n    ],\n  },\n\n  assessment: {\n    title: 'Assessment Ideas',\n    formative: [\n      'Monitor Knowledge Check scores on the Teacher Dashboard during gameplay',\n      'Circulate during gameplay to ask students about their strategic decisions and historical reasoning',\n      'Use exit tickets asking students to name one thing they learned about a group they hadn\\'t considered before',\n      'Have students identify one decision they made in the game that paralleled a real historical decision',\n    ],\n    summative: [\n      'Written reflection: \"Choose one faction and explain how the war looked different from their perspective\"',\n      'Primary source analysis using quotes from the People Profiles',\n      'Compare/contrast essay: \"How did the War of 1812 affect two different groups in American society?\"',\n      'Create a timeline connecting the war to three events that happened afterward (using \"What Came Next\" as a starting point)',\n      'Debate: \"Who really won the War of 1812?\"  students argue from their faction\\'s perspective using evidence from gameplay',\n    ],\n  },\n\n  discussionQuestions: {\n    title: 'Discussion Questions',\n    questions: [\n      {\n        question: 'The War of 1812 is sometimes called \"the war nobody won.\" Do you agree? What evidence supports or challenges this claim?',\n        category: 'Analysis',\n      },\n      {\n        question: 'How did the War of 1812 affect Native American nations differently than the United States or Britain?',\n        category: 'Perspective',\n      },\n      {\n        question: 'Why do you think the Treaty of Ghent\\'s promise to restore Native lands was never honored? What does this tell us about treaty-making?',\n        category: 'Critical Thinking',\n      },\n      {\n        question: 'How did women like Dolley Madison, Mary Pickersgill, and Laura Secord contribute to the war effort? Why are their stories often overlooked?',\n        category: 'Perspective',\n      },\n      {\n        question: 'About 4,000 enslaved people escaped to British lines during the war. What does this tell us about how enslaved people viewed the conflict?',\n        category: 'Critical Thinking',\n      },\n      {\n        question: 'Andrew Jackson became president because of his war fame, then signed the Indian Removal Act. How do you think his wartime experiences shaped his policies?',\n        category: 'Connection',\n      },\n      {\n        question: 'The burning of York (Toronto) led to the burning of Washington D.C. How does retaliation escalate conflicts? Can you think of modern examples?',\n        category: 'Connection',\n      },\n      {\n        question: 'How did geography influence the war\\'s outcome? Why were the Great Lakes, the Chesapeake Bay, and New Orleans so important?',\n        category: 'Analysis',\n      },\n    ],\n  },\n\n  faq: {\n    title: 'Frequently Asked Questions',\n    items: [\n      {\n        question: 'How long does a full game take?',\n        answer: 'A complete game (12 rounds) takes 30-45 minutes. Students can save their progress and continue later.',\n      },\n      {\n        question: 'Can students play against each other?',\n        answer: 'Currently, the game is single-player against an AI opponent. Students can compare strategies and scores on the leaderboard.',\n      },\n      {\n        question: 'Is the game historically accurate?',\n        answer: 'Yes. All events, leaders, and knowledge check questions are based on historical research. The game simplifies some aspects for gameplay purposes but maintains historical integrity.',\n      },\n      {\n        question: 'How do I access the Teacher Dashboard?',\n        answer: 'Add #teacher to the game URL and sign in with your email. Create classes and share codes with students. The dashboard shows class-wide analytics, quiz scores, and exportable CSV data.',\n      },\n      {\n        question: 'Does the game work offline?',\n        answer: 'The game itself works after initial load, but the leaderboard and Teacher Dashboard require an internet connection.',\n      },\n      {\n        question: 'Can I assign specific factions to students?',\n        answer: 'Yes. Consider assigning different factions to create diverse perspectives for class discussion. The Native Coalition faction is particularly valuable for teaching perspective-taking.',\n      },\n    ],\n  },\n};\n\nexport default teacherGuide;\n","import React, { useState } from 'react';\nimport { teacherGuide } from '../data/teacherGuide';\n\nfunction CollapsibleSection({ title, defaultOpen = false, children }) {\n  const [open, setOpen] = useState(defaultOpen);\n  return (\n    <div className=\"border border-parchment-dark/8 rounded-lg overflow-hidden\">\n      <button\n        onClick={() => setOpen(!open)}\n        className=\"w-full px-5 py-3.5 flex items-center justify-between cursor-pointer hover:bg-white/3 transition-colors\"\n        style={{ background: 'linear-gradient(135deg, rgba(184,115,51,0.08) 0%, rgba(20,30,48,0.4) 100%)' }}\n      >\n        <h2 className=\"text-war-gold/90 font-display text-base tracking-wide\">{title}</h2>\n        <span className=\"text-parchment-dark/40 text-sm\">{open ? '\\u25B2' : '\\u25BC'}</span>\n      </button>\n      {open && <div className=\"px-5 py-4 bg-black/5\">{children}</div>}\n    </div>\n  );\n}\n\nexport default function TeacherGuide() {\n  const guide = teacherGuide;\n\n  return (\n    <div className=\"min-h-screen text-parchment\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n      {/* Header */}\n      <header className=\"bg-war-navy/80 backdrop-blur-sm px-4 md:px-6 py-3 md:py-4 border-b border-war-gold/15 flex items-center justify-between gap-3 sticky top-0 z-10\">\n        <div>\n          <div className=\"flex items-center gap-2 mb-0.5\">\n            <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n            <p className=\"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold\">Educator Resource</p>\n            <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n          </div>\n          <h1 className=\"text-war-gold font-display text-lg md:text-xl tracking-wide\">Teacher Guide</h1>\n          <p className=\"text-parchment-dark/40 text-xs font-body\">War of 1812: Rise of the Nation</p>\n        </div>\n        <a\n          href={window.location.pathname}\n          className=\"px-3 md:px-4 py-2 border border-parchment-dark/15 text-parchment-dark/50 rounded\n                     hover:border-war-gold/40 hover:text-war-gold transition-colors text-xs font-body flex-shrink-0 cursor-pointer\"\n        >\n          Back to Game\n        </a>\n      </header>\n\n      <div className=\"p-3 md:p-6 max-w-4xl mx-auto space-y-4\">\n        {/* Overview */}\n        <CollapsibleSection title={guide.overview.title} defaultOpen={true}>\n          <p className=\"text-parchment/70 text-sm font-body leading-relaxed mb-4\">{guide.overview.content}</p>\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\n            <div className=\"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8 text-center\">\n              <p className=\"text-war-gold font-display text-sm font-bold\">{guide.overview.targetAudience}</p>\n              <p className=\"text-parchment-dark/40 text-xs font-body\">Audience</p>\n            </div>\n            <div className=\"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8 text-center\">\n              <p className=\"text-war-gold font-display text-sm font-bold\">{guide.overview.duration}</p>\n              <p className=\"text-parchment-dark/40 text-xs font-body\">Duration</p>\n            </div>\n            <div className=\"bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8 text-center\">\n              <p className=\"text-war-gold font-display text-sm font-bold\">{guide.overview.players}</p>\n              <p className=\"text-parchment-dark/40 text-xs font-body\">Mode</p>\n            </div>\n          </div>\n        </CollapsibleSection>\n\n        {/* Learning Objectives */}\n        <CollapsibleSection title={guide.learningObjectives.title}>\n          <div className=\"space-y-3\">\n            {guide.learningObjectives.objectives.map((obj) => (\n              <div key={obj.id} className=\"border-l-2 border-war-gold/20 pl-3\">\n                <p className=\"text-parchment/80 text-sm font-body\">{obj.text}</p>\n                <p className=\"text-parchment-dark/40 text-xs font-body italic mt-0.5\">Assessed by: {obj.assessedBy}</p>\n              </div>\n            ))}\n          </div>\n        </CollapsibleSection>\n\n        {/* Standards Alignment */}\n        <CollapsibleSection title={guide.standards.title}>\n          <p className=\"text-war-copper/70 text-xs uppercase tracking-widest font-body font-bold mb-3\">\n            {guide.standards.framework}\n          </p>\n          <div className=\"space-y-3\">\n            {guide.standards.alignments.map((std) => (\n              <div key={std.code} className=\"bg-war-navy/40 rounded-lg p-3 border border-parchment-dark/8\">\n                <p className=\"text-war-gold/80 text-xs font-bold font-body mb-1\">{std.code}</p>\n                <p className=\"text-parchment/70 text-sm font-body\">{std.description}</p>\n                <p className=\"text-parchment-dark/50 text-xs font-body italic mt-1\">In-game: {std.gameConnection}</p>\n              </div>\n            ))}\n          </div>\n        </CollapsibleSection>\n\n        {/* Classroom Setup */}\n        <CollapsibleSection title={guide.classroomSetup.title}>\n          <div className=\"space-y-4\">\n            {guide.classroomSetup.sections.map((section) => (\n              <div key={section.heading}>\n                <h3 className=\"text-war-copper/80 text-xs uppercase tracking-widest font-body font-bold mb-2\">{section.heading}</h3>\n                <ul className=\"space-y-1.5\">\n                  {section.items.map((item, i) => (\n                    <li key={i} className=\"text-parchment/70 text-sm font-body pl-4 relative before:content-[''] before:absolute before:left-0 before:text-war-gold/40\">\n                      {item}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            ))}\n          </div>\n        </CollapsibleSection>\n\n        {/* How to Play */}\n        <CollapsibleSection title={guide.howToPlay.title}>\n          <div className=\"space-y-3 mb-4\">\n            {guide.howToPlay.phases.map((phase, i) => (\n              <div key={phase.name} className=\"flex gap-3\">\n                <div className=\"w-7 h-7 rounded-full bg-war-gold/15 border border-war-gold/25 flex items-center justify-center flex-shrink-0 mt-0.5\">\n                  <span className=\"text-war-gold text-xs font-display font-bold\">{i + 1}</span>\n                </div>\n                <div>\n                  <p className=\"text-parchment/90 text-sm font-body font-bold\">{phase.name}</p>\n                  <p className=\"text-parchment/60 text-sm font-body\">{phase.description}</p>\n                </div>\n              </div>\n            ))}\n          </div>\n          <h3 className=\"text-war-copper/80 text-xs uppercase tracking-widest font-body font-bold mb-2\">Victory Conditions</h3>\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-2\">\n            {guide.howToPlay.victoryConditions.map((vc) => (\n              <div key={vc.type} className=\"bg-war-navy/40 rounded-lg p-3 border border-parchment-dark/8\">\n                <p className=\"text-war-gold/80 text-sm font-body font-bold\">{vc.type}</p>\n                <p className=\"text-parchment/60 text-xs font-body\">{vc.description}</p>\n              </div>\n            ))}\n          </div>\n        </CollapsibleSection>\n\n        {/* Facilitation Tips */}\n        <CollapsibleSection title={guide.facilitation.title}>\n          <div className=\"space-y-4\">\n            {guide.facilitation.tips.map((tip) => (\n              <div key={tip.heading} className=\"border-l-2 border-war-copper/20 pl-3\">\n                <p className=\"text-parchment/90 text-sm font-body font-bold\">{tip.heading}</p>\n                <p className=\"text-parchment/60 text-sm font-body mt-0.5\">{tip.content}</p>\n              </div>\n            ))}\n          </div>\n        </CollapsibleSection>\n\n        {/* Assessment Ideas */}\n        <CollapsibleSection title={guide.assessment.title}>\n          <h3 className=\"text-war-copper/80 text-xs uppercase tracking-widest font-body font-bold mb-2\">Formative Assessment</h3>\n          <ul className=\"space-y-1.5 mb-4\">\n            {guide.assessment.formative.map((item, i) => (\n              <li key={i} className=\"text-parchment/70 text-sm font-body pl-4 relative before:content-[''] before:absolute before:left-0 before:text-war-gold/40\">\n                {item}\n              </li>\n            ))}\n          </ul>\n          <h3 className=\"text-war-copper/80 text-xs uppercase tracking-widest font-body font-bold mb-2\">Summative Assessment</h3>\n          <ul className=\"space-y-1.5\">\n            {guide.assessment.summative.map((item, i) => (\n              <li key={i} className=\"text-parchment/70 text-sm font-body pl-4 relative before:content-[''] before:absolute before:left-0 before:text-war-gold/40\">\n                {item}\n              </li>\n            ))}\n          </ul>\n        </CollapsibleSection>\n\n        {/* Discussion Questions */}\n        <CollapsibleSection title={guide.discussionQuestions.title}>\n          <div className=\"space-y-3\">\n            {guide.discussionQuestions.questions.map((q, i) => (\n              <div key={i} className=\"bg-war-navy/40 rounded-lg p-3 border border-parchment-dark/8\">\n                <div className=\"flex items-start gap-2\">\n                  <span className=\"text-war-gold/60 text-xs font-body font-bold flex-shrink-0 mt-0.5\">{i + 1}.</span>\n                  <div>\n                    <p className=\"text-parchment/80 text-sm font-body\">{q.question}</p>\n                    <span className=\"inline-block mt-1 text-war-copper/60 text-[10px] uppercase tracking-widest font-body font-bold\">{q.category}</span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </CollapsibleSection>\n\n        {/* FAQ */}\n        <CollapsibleSection title={guide.faq.title}>\n          <div className=\"space-y-3\">\n            {guide.faq.items.map((item, i) => (\n              <div key={i} className=\"border-l-2 border-parchment-dark/10 pl-3\">\n                <p className=\"text-parchment/90 text-sm font-body font-bold\">{item.question}</p>\n                <p className=\"text-parchment/60 text-sm font-body mt-0.5\">{item.answer}</p>\n              </div>\n            ))}\n          </div>\n        </CollapsibleSection>\n      </div>\n    </div>\n  );\n}\n","/**\n * Learning Mode Content - War of 1812 Timeline\n *\n * This content teaches students about the War of 1812 BEFORE they play,\n * so they can answer knowledge check questions during the game.\n *\n * Aligned with knowledge checks in knowledgeChecks.js\n */\n\nexport const timelineEvents = [\n  {\n    id: 1,\n    year: '1807-1812',\n    title: 'Causes of the War',\n    keyIdea: 'The war started because Britain was taking American sailors, blocking trade, and helping Native resistance.',\n    imageUrl: '/images/learning/impressment.jpg', // Optional: Can add later\n    content: `The War of 1812 had three main causes that pushed the United States toward conflict with Britain.\n\n**British Impressment:** British naval ships stopped American vessels at sea and forced American sailors to serve in the Royal Navy. Britain was fighting Napoleon in Europe and desperately needed sailors, so they claimed the right to search American ships and take anyone they considered a British subject. Thousands of American sailors were kidnapped this way.\n\n**Trade Restrictions:** Britain and France were at war, and both sides tried to stop neutral countries like the United States from trading with the enemy. Britain's Orders in Council restricted American trade with Europe, devastating the American economy. President Jefferson tried an Embargo Act in 1807 to avoid war, but it backfiredAmerican merchants suffered more than the British.\n\n**Western Expansion & Native Resistance:** Americans wanted to expand westward into Native territories and blamed the British for supporting Native resistance. Tecumseh, a Shawnee leader, was building a confederacy to defend Native lands. Many Americans believed (correctly) that the British in Canada were supplying weapons to Native warriors.`,\n\n    simpleContent: `The War of 1812 started for three big reasons.\n\nFirst, the British kept taking American sailors. British ships would stop American ships at sea. They grabbed American sailors and forced them to work on British ships. This happened to thousands of Americans.\n\nSecond, Britain blocked American trade. Britain and France were fighting each other. Britain made rules called the \"Orders in Council\" that stopped America from trading with France. This hurt American businesses badly. President Jefferson tried to stop all trade with other countries. But that plan made things worse for Americans.\n\nThird, Americans wanted to move west. Native Americans already lived on that land. A Shawnee leader named Tecumseh was uniting Native tribes. He wanted to stop Americans from taking their land. The British in Canada gave weapons to Native warriors. Americans were angry about this.`,\n\n    keyTerms: [\n      { term: 'Impressment', definition: 'Forcing sailors to serve in the navy against their will', simpleDefinition: 'Taking American sailors and making them work on British ships against their will' },\n      { term: 'War Hawks', definition: 'Young congressmen from the West and South who pushed for war with Britain', simpleDefinition: 'Young leaders in Congress who really wanted to go to war with Britain' },\n      { term: 'Embargo Act', definition: 'Jefferson\\'s failed attempt to avoid war by banning all foreign trade', simpleDefinition: 'A law that stopped America from trading with other countries. It did not work.' },\n    ],\n\n    didYouKnow: 'The War Hawks included future leaders like Henry Clay and John C. Calhoun. They were young, aggressive, and eager to defend American honoreven if it meant war with the world\\'s most powerful empire.',\n\n    causeEffect: {\n      cause: 'Britain needed sailors for its war against Napoleon and restricted American trade',\n      effect: 'Americans felt their sovereignty was being violated, leading to demands for war',\n      thinkAbout: 'Why might a young nation be especially sensitive about its rights being ignored by a former colonial power?',\n    },\n\n    geographicContext: {\n      description: 'The Atlantic Ocean was the highway of global trade. British naval dominance meant they could stop American ships anywhere at sea. Meanwhile, the frontier between American settlements and Native territories stretched from the Great Lakes to the Gulf of Mexico.',\n      keyLocations: ['Atlantic Ocean', 'Great Lakes frontier', 'Gulf of Mexico'],\n    },\n\n    primarySourceExcerpt: {\n      quote: 'We shall drive the British from our Continent  they will no longer have an opportunity of intriguing with our Indian neighbors.',\n      attribution: 'Andrew Jackson, letter to William Henry Harrison, 1812',\n      analysisPrompt: 'What does this quote reveal about American motivations for the war? Who besides the British is Jackson concerned about?',\n    },\n\n    activity: {\n      type: 'sequencing',\n      instruction: 'Put these events in the correct order:',\n      items: [\n        'British begin impressing American sailors (1803)',\n        'Chesapeake-Leopard Affair shocks Americans (1807)',\n        'Jefferson signs the Embargo Act (1807)',\n        'Embargo Act repealed  replaced by weaker measures (1809)',\n        'War Hawks elected to Congress (1810)',\n        'U.S. declares war on Britain (1812)',\n      ],\n    },\n  },\n\n  {\n    id: 2,\n    year: 'June 18, 1812',\n    title: 'Declaration of War',\n    keyIdea: 'President Madison asked Congress to declare war, but the country was deeply divided about it.',\n    content: `On June 18, 1812, President James Madison asked Congress to declare war on Great Britain. The vote was close79-49 in the House and 19-13 in the Senate. This was the closest war vote in American history.\n\n**A Divided Nation:** The country was split. New England merchants opposed the war because they profited from trade with Britain. The South and West supported it, angry about impressment and eager to conquer Canada and Native lands.\n\n**Madison's Reluctant Decision:** Madison didn't want war. He was a scholarly, peaceful mantotally unlike a war president. But the War Hawks in Congress, British impressment, and pressure to defend American honor left him little choice. In his war message, he listed British violations of American rights: impressment, trade restrictions, and support for Native attacks on the frontier.\n\n**Poor Timing:** Ironically, Britain had actually repealed the Orders in Council (trade restrictions) two days before the U.S. declared war. But news traveled slowly across the Atlanticby the time Madison learned this, the war had already begun.`,\n\n    simpleContent: `On June 18, 1812, President James Madison asked Congress to go to war with Britain. The vote was very close. Many people said yes. Many people said no.\n\nThe country was split in two. Merchants in New England did not want war. They made money trading with Britain. People in the South and West wanted war. They were angry about the British taking sailors and helping Native warriors.\n\nMadison did not really want war either. He was a quiet, peaceful man. But he felt he had no choice. Britain kept taking American sailors. Britain kept blocking American trade. Britain kept helping Native attacks on the frontier.\n\nHere is something surprising. Britain actually ended its trade rules two days before America declared war. But news traveled slowly across the ocean. By the time Madison found out, the war had already started.`,\n\n    keyTerms: [\n      { term: 'James Madison', definition: '4th U.S. President, led the country during the War of 1812', simpleDefinition: 'The 4th President of the United States. He led America during the War of 1812.' },\n      { term: 'War Hawks', definition: 'Pro-war congressmen like Henry Clay who pushed for conflict with Britain', simpleDefinition: 'Members of Congress who pushed hard for war with Britain' },\n    ],\n\n    didYouKnow: 'Madison was the smallest president in U.S. historyonly 5\\'4\" and about 100 pounds. His wife Dolley was far more popular and charismatic, often serving as the face of his administration.',\n\n    causeEffect: {\n      cause: 'War Hawks pressured Madison, and British violations of American rights continued',\n      effect: 'The closest war vote in U.S. history split the nation along regional lines',\n      thinkAbout: 'What does a close vote tell us about how divided the country was? How might this division affect the war effort?',\n    },\n\n    geographicContext: {\n      description: 'The war vote revealed America\\'s regional divide: the South and West supported war (they wanted frontier expansion and freedom from British interference), while New England opposed it (they depended on trade with Britain).',\n      keyLocations: ['New England (opposed)', 'South and West (supported)', 'Washington D.C.'],\n    },\n\n    primarySourceExcerpt: {\n      quote: 'Our flag has been insulted, our commerce plundered, our citizens impressed... We must now oppose force to force.',\n      attribution: 'Paraphrased from Madison\\'s War Message to Congress, June 1, 1812',\n      analysisPrompt: 'Madison lists several grievances. Which one do you think was most important to ordinary Americans? Why?',\n    },\n\n    activity: null,\n  },\n\n  {\n    id: 3,\n    year: '1812',\n    title: 'Early Battles',\n    keyIdea: 'America lost on land in Canada but won a famous sea battle with the USS Constitution.',\n    content: `The first year of the war was a disaster for the United States.\n\n**Hull's Surrender at Detroit (August 1812):** General William Hull invaded Canada but quickly retreated. British General Isaac Brock and Tecumseh surrounded Detroit and convinced Hull that thousands of Native warriors would massacre the American garrison. Hull surrendered without firing a shotthe most humiliating American defeat of the war.\n\n**USS Constitution vs. HMS Guerriere (August 1812):** Not all news was bad. The American frigate USS Constitution defeated the British warship HMS Guerriere in a stunning naval victory. British cannonballs bounced off the Constitution's thick oak hull, earning it the nickname \"Old Ironsides.\" This victory shocked the world and proved American ships could fight.\n\n**Battle of Queenston Heights (October 1812):** Americans tried to invade Canada again, crossing the Niagara River. British General Isaac Brock was killed leading a charge to push them back. Brock became a Canadian hero, and the invasion failed miserably when New York militia refused to cross into Canada.`,\n\n    simpleContent: `The first year of the war went very badly for America.\n\nGeneral William Hull led American troops into Canada. But he got scared and turned back. British General Isaac Brock and the Shawnee leader Tecumseh surrounded Detroit. They tricked Hull into thinking a huge army was coming. Hull gave up Detroit without even fighting. It was a huge embarrassment.\n\nBut there was some good news at sea. The American ship USS Constitution fought the British ship HMS Guerriere. British cannonballs bounced right off the Constitution's thick wooden walls. The Americans won the battle. People started calling the ship \"Old Ironsides.\" This showed that American ships could beat British ships.\n\nAmericans tried to invade Canada again at the Niagara River. British General Brock was killed fighting back. He became a hero in Canada. The American invasion failed badly.`,\n\n    keyTerms: [\n      { term: 'Isaac Brock', definition: 'British general who defended Canada, killed at Queenston Heights', simpleDefinition: 'A British general who protected Canada. He died fighting at Queenston Heights.' },\n      { term: 'USS Constitution', definition: 'American warship nicknamed \"Old Ironsides\" for its thick hull', simpleDefinition: 'A famous American warship. Cannonballs bounced off it, so people called it \"Old Ironsides.\"' },\n      { term: 'William Hull', definition: 'American general who surrendered Detroit without a fight', simpleDefinition: 'An American general who gave up Detroit without fighting' },\n    ],\n\n    didYouKnow: 'The USS Constitution is still a commissioned U.S. Navy warship todaythe oldest floating naval vessel in the world. You can visit it in Boston Harbor!',\n\n    causeEffect: {\n      cause: 'The U.S. invaded Canada with poorly trained militia and incompetent leadership',\n      effect: 'Humiliating defeats at Detroit and Queenston Heights shattered American confidence',\n      thinkAbout: 'Why might overconfidence lead to military failure? How did the Americans underestimate both the British and their Native allies?',\n    },\n\n    geographicContext: {\n      description: 'The Great Lakes and St. Lawrence River formed the border between the U.S. and British Canada. Control of these waterways determined who could move troops and supplies. Detroit sat at the strategic junction of Lake Erie and the Michigan frontier.',\n      keyLocations: ['Detroit', 'Niagara River', 'Lake Erie', 'Upper Canada (Ontario)'],\n    },\n\n    primarySourceExcerpt: {\n      quote: 'The British force is composed of a body of regulars, militia, and Indians... I have deemed it a duty to avoid the risk of a general engagement.',\n      attribution: 'General William Hull, explaining his surrender of Detroit, August 1812',\n      analysisPrompt: 'Hull says he avoided battle to protect lives. Do you think this was wise leadership or cowardice? What information might have changed his decision?',\n    },\n\n    activity: null,\n  },\n\n  {\n    id: 4,\n    year: '1813',\n    title: 'Native American Involvement',\n    keyIdea: 'Tecumseh united Native tribes and allied with Britain to protect Native lands from American settlers.',\n    content: `Native Americans played a crucial role in the War of 1812, fighting to defend their lands from American expansion.\n\n**Tecumseh's Vision:** Tecumseh, a Shawnee chief, dreamed of uniting all Native tribes into a confederacy strong enough to stop American settlers from taking their lands. He traveled thousands of miles recruiting warriors from the Great Lakes to the Gulf of Mexico. His brother Tenskwatawa, the \"Prophet,\" provided spiritual leadership. Together they built Prophetstown in Indiana as the capital of their movement.\n\n**Alliance with Britain:** Tecumseh allied with the British because he knew they were Native Americans' only hope of stopping U.S. expansion. The British promised to create an independent Native state in the Northwest if they won. Tecumseh's warriors were crucial to early British victories, especially at Detroit.\n\n**Creek War in the South (1813-1814):** In Alabama, a civil war broke out among the Creek Nation. The Red Sticks (led by William Weatherford/Red Eagle) allied with the British and fought to resist American influence. The Creek War became part of the larger War of 1812, with Andrew Jackson leading American forces against the Red Sticks.`,\n\n    simpleContent: `Native Americans played a big part in the War of 1812. They fought to keep their lands safe from American settlers.\n\nTecumseh was a Shawnee leader with a big dream. He wanted to unite all the Native tribes into one group. Together they could stop Americans from taking their land. He traveled thousands of miles to ask other tribes to join him. His brother Tenskwatawa was a spiritual leader called \"the Prophet.\" They built a town called Prophetstown in Indiana.\n\nTecumseh joined forces with the British. He knew the British were the only ones who could help stop American settlers. The British promised to create a Native homeland if they won the war. Tecumseh's warriors helped the British win early battles, like the one at Detroit.\n\nIn Alabama, a group of Creek warriors called the Red Sticks also joined the British. They fought to keep Americans out of their lands. Andrew Jackson led American soldiers against them.`,\n\n    keyTerms: [\n      { term: 'Tecumseh', definition: 'Shawnee leader who built a confederacy to resist American expansion', simpleDefinition: 'A Shawnee leader who tried to unite Native tribes to protect their lands' },\n      { term: 'Red Sticks', definition: 'Creek warriors who fought alongside the British in the South', simpleDefinition: 'Creek warriors in Alabama who fought with the British against Americans' },\n      { term: 'Prophetstown', definition: 'Tecumseh\\'s capital for the Native confederacy in Indiana', simpleDefinition: 'The town Tecumseh built in Indiana as the center of his Native alliance' },\n    ],\n\n    didYouKnow: 'Tecumseh was one of the greatest Native American leaders in history. Even his enemies admired him. When he died in 1813, the Native confederacy collapsedhis leadership was irreplaceable.',\n\n    causeEffect: {\n      cause: 'American settlers pushed into Native lands while the British offered military alliance',\n      effect: 'Tecumseh built a confederacy and allied with Britain, creating a three-sided war',\n      thinkAbout: 'Why would Native nations choose to ally with Britain rather than remain neutral? What were they risking?',\n    },\n\n    geographicContext: {\n      description: 'Native territories covered the vast interior of the continent from the Great Lakes to the Gulf of Mexico. The frontier was not a line but a contested zone where American settlements pushed into Native homelands.',\n      keyLocations: ['Prophetstown (Indiana)', 'Creek Nation (Alabama)', 'Great Lakes region', 'Mississippi frontier'],\n    },\n\n    primarySourceExcerpt: {\n      quote: 'Sell a country! Why not sell the air, the clouds and the great sea, as well as the earth?',\n      attribution: 'Tecumseh, speaking to Governor Harrison at Vincennes, 1810',\n      analysisPrompt: 'Tecumseh compares selling land to selling air and clouds. What does this reveal about how Native peoples viewed their relationship to the land compared to Americans?',\n    },\n\n    activity: {\n      type: 'matching',\n      instruction: 'Match each leader to their role:',\n      items: [\n        'Tecumseh \\u2192 Built a pan-Native confederacy to resist American expansion',\n        'Tenskwatawa \\u2192 Spiritual leader known as \"The Prophet\" who inspired cultural renewal',\n        'William Weatherford \\u2192 Led the Red Stick Creek faction in the Southern frontier',\n        'William Henry Harrison \\u2192 American governor who fought Native resistance at Tippecanoe',\n      ],\n    },\n  },\n\n  {\n    id: 5,\n    year: '1813',\n    title: 'Turning Points',\n    keyIdea: 'America won control of Lake Erie and Tecumseh was killed, ending the Native alliance.',\n    content: `1813 brought major turning points that shifted the war's momentum.\n\n**Battle of Lake Erie (September 1813):** Commodore Oliver Hazard Perry built a fleet on Lake Erie and challenged the British for control of the Great Lakes. After a brutal battle, Perry sent his famous message: \"We have met the enemy and they are ours.\" American control of Lake Erie forced the British to abandon Detroit.\n\n**Battle of the Thames (October 1813):** General William Henry Harrison pursued the retreating British into Canada. At the Battle of the Thames, American forces defeated the British and killed Tecumseh. Tecumseh's death shattered the Native confederacywithout him, the alliance collapsed. This was the beginning of the end for Native resistance in the Northwest.\n\n**Burning of York (April 1813):** Americans captured and burned York (now Toronto), the capital of Upper Canada. They torched the parliament building and looted the town. The British were furiousand later retaliated by burning Washington, D.C.`,\n\n    simpleContent: `Big things happened in 1813 that changed the war.\n\nCommodore Oliver Hazard Perry built a fleet of ships on Lake Erie. He fought the British for control of the lake. After a tough battle, Perry won. He sent a famous message: \"We have met the enemy and they are ours.\" Now America controlled Lake Erie. The British had to leave Detroit.\n\nGeneral William Henry Harrison chased the British into Canada. At the Battle of the Thames, Americans beat the British army. Tecumseh was killed in this battle. Without Tecumseh, the Native alliance fell apart. No one else could hold the tribes together.\n\nEarlier that year, Americans attacked York. York is now called Toronto. Americans burned the government buildings there. The British were very angry about this. Later they got revenge by burning Washington, D.C.`,\n\n    keyTerms: [\n      { term: 'Oliver Hazard Perry', definition: 'U.S. naval commander who won the Battle of Lake Erie', simpleDefinition: 'The American ship commander who won the big battle on Lake Erie' },\n      { term: 'William Henry Harrison', definition: 'American general who defeated Tecumseh at the Thames', simpleDefinition: 'The American general who beat the British and Tecumseh at the Battle of the Thames' },\n      { term: 'Battle of the Thames', definition: 'Victory where Tecumseh was killed, ending Native confederacy', simpleDefinition: 'A battle in Canada where Americans won and Tecumseh was killed' },\n    ],\n\n    didYouKnow: 'Perry\\'s famous message \"We have met the enemy and they are ours\" became one of the most quoted lines in American military history. He sent it on the back of an old envelope during the battle!',\n\n    causeEffect: {\n      cause: 'Perry\\'s victory on Lake Erie cut British supply lines and forced them to abandon Detroit',\n      effect: 'Harrison pursued the retreating British, and Tecumseh was killed at the Thames \\u2014 ending the Native confederacy',\n      thinkAbout: 'How did control of the Great Lakes determine who controlled the frontier? Why was naval power so important on inland waters?',\n    },\n\n    geographicContext: {\n      description: 'Lake Erie was the key to the entire Great Lakes theater. Whoever controlled the lake controlled supply routes to Detroit and the Western frontier. Perry built his fleet at Presque Isle (Erie, Pennsylvania) using timber from local forests.',\n      keyLocations: ['Lake Erie', 'Presque Isle (Erie, PA)', 'Detroit', 'Thames River (Ontario)'],\n    },\n\n    primarySourceExcerpt: {\n      quote: 'We have met the enemy and they are ours: two ships, two brigs, one schooner and one sloop.',\n      attribution: 'Oliver Hazard Perry, message to William Henry Harrison, September 10, 1813',\n      analysisPrompt: 'Perry\\'s message is famously short and direct. Why do you think this brief message became one of the most famous quotes in American military history?',\n    },\n\n    activity: null,\n  },\n\n  {\n    id: 6,\n    year: '1814',\n    title: 'British Offensive',\n    keyIdea: 'Britain burned Washington D.C. but failed to take Baltimore, inspiring the national anthem.',\n    content: `In 1814, Britain defeated Napoleon in Europe and sent veteran troops to crush the United States.\n\n**Burning of Washington, D.C. (August 1814):** British forces invaded the Chesapeake Bay and marched on Washington. American militia fled in panic at the Battle of Bladensburg. The British entered the capital and burned the White House, the Capitol, and other government buildings. First Lady Dolley Madison barely escaped, saving a portrait of George Washington before the British torched her home. It was the only time in U.S. history that the capital has been captured.\n\n**Battle of Baltimore (September 1814):** After burning Washington, the British attacked Baltimore. Fort McHenry guarded the harbor. British ships bombarded the fort all night, but the Americans held. At dawn, the American flag still flew. Watching the battle, Francis Scott Key wrote \"The Star-Spangled Banner,\" which later became the national anthem.\n\n**Battle of Plattsburgh (September 1814):** British forces invaded New York from Canada with 11,000 troops. At Plattsburgh on Lake Champlain, American naval and land forces defeated them. This victory convinced Britain that conquering the United States would be too costly.`,\n\n    simpleContent: `In 1814, Britain beat Napoleon in Europe. Now Britain could send its best soldiers to fight America.\n\nBritish troops invaded the area around Washington, D.C. American soldiers ran away in panic. The British marched into the capital. They burned the White House, the Capitol building, and other buildings. First Lady Dolley Madison escaped just in time. She saved a famous painting of George Washington before the British set the White House on fire. This was the only time an enemy captured America's capital.\n\nNext, the British attacked Baltimore. Fort McHenry guarded the harbor. British ships fired bombs at the fort all night long. But the Americans held on. In the morning, the American flag was still flying. A man named Francis Scott Key watched the whole battle. He wrote a poem about it called \"The Star-Spangled Banner.\" It later became America's national anthem.\n\nThe British also tried to invade from Canada with 11,000 soldiers. Americans stopped them at Plattsburgh. Britain started to think the war was too hard to win.`,\n\n    keyTerms: [\n      { term: 'Dolley Madison', definition: 'First Lady who saved George Washington\\'s portrait from the burning White House', simpleDefinition: 'The President\\'s wife who saved a painting of George Washington when the British burned the White House' },\n      { term: 'Fort McHenry', definition: 'Fort that defended Baltimore, inspiring \"The Star-Spangled Banner\"', simpleDefinition: 'The fort that protected Baltimore. Its brave defense inspired \"The Star-Spangled Banner.\"' },\n      { term: 'Francis Scott Key', definition: 'Lawyer who wrote \"The Star-Spangled Banner\" after watching Fort McHenry\\'s defense', simpleDefinition: 'The man who wrote \"The Star-Spangled Banner\" after watching the battle at Fort McHenry' },\n    ],\n\n    didYouKnow: '\"The Star-Spangled Banner\" didn\\'t become the official national anthem until 1931more than 100 years after it was written!',\n\n    causeEffect: {\n      cause: 'Napoleon\\'s defeat freed thousands of experienced British troops for service in America',\n      effect: 'Britain launched major offensives \\u2014 burning Washington but failing to take Baltimore or invade from Canada',\n      thinkAbout: 'How were the Napoleonic Wars and the War of 1812 connected? How did events in Europe change the war in America?',\n    },\n\n    geographicContext: {\n      description: 'The Chesapeake Bay gave the British navy direct access to Washington D.C. and Baltimore. The bay\\'s many rivers and inlets made it impossible for the small American navy to defend everywhere. Fort McHenry sat at the narrow entrance to Baltimore Harbor.',\n      keyLocations: ['Chesapeake Bay', 'Washington D.C.', 'Baltimore Harbor', 'Fort McHenry', 'Plattsburgh (Lake Champlain)'],\n    },\n\n    primarySourceExcerpt: {\n      quote: 'Our country is the better for its trials. It has been taught a lesson which no experience could have anticipated.',\n      attribution: 'Niles\\' Weekly Register editorial after the burning of Washington, 1814',\n      analysisPrompt: 'The editorial says the country is \"better for its trials.\" How might defeat and destruction actually strengthen national unity? Can you think of other examples in history?',\n    },\n\n    activity: null,\n  },\n\n  {\n    id: 7,\n    year: 'January 8, 1815',\n    title: 'Battle of New Orleans',\n    keyIdea: 'Andrew Jackson won the Battle of New Orleans, not knowing the war was already over.',\n    content: `The Battle of New Orleans was the greatest American victory of the warfought after the peace treaty was signed.\n\n**Andrew Jackson's Preparation:** General Andrew Jackson gathered a diverse army in New Orleans: regular soldiers, Kentucky and Tennessee militia, free Black troops, Choctaw warriors, and even pirates led by Jean Lafitte. He built defensive earthworks and positioned his forces brilliantly.\n\n**The British Attack:** On January 8, 1815, British General Edward Pakenham led 8,000 veteran troops in a frontal assault. It was a slaughter. American riflemen and artillery mowed down the British in rows. Pakenham was killed, and the British suffered over 2,000 casualties. American losses: 13 killed, 39 wounded.\n\n**The Irony:** The Treaty of Ghent had been signed on December 24, 1814two weeks before the battle. But news traveled slowly. Neither side knew the war was over. The victory made Andrew Jackson a national hero and launched his political career. He later became the 7th president.`,\n\n    simpleContent: `The Battle of New Orleans was the biggest American win of the whole war.\n\nAndrew Jackson was a militia leader and politician from Tennessee. He had no formal military training but was tough and determined. He gathered all kinds of fighters in New Orleans. He had regular soldiers, militia from Kentucky and Tennessee, free Black troops, Choctaw warriors, and even pirates led by Jean Lafitte. Jackson built dirt walls and got his army ready.\n\nOn January 8, 1815, the British general sent 8,000 soldiers to attack head-on. It was a terrible mistake. American riflemen and cannons cut down the British soldiers. The British general was killed. Over 2,000 British soldiers were hurt or killed. Only 13 Americans died.\n\nHere is the surprising part. A peace treaty had been signed two weeks earlier on December 24, 1814. But nobody in New Orleans knew about it yet. News traveled very slowly back then. The battle made Andrew Jackson a hero. He later became the 7th President.`,\n\n    keyTerms: [\n      { term: 'Andrew Jackson', definition: 'General who won the Battle of New Orleans, later became president', simpleDefinition: 'The general who won the Battle of New Orleans. He later became the 7th President.' },\n      { term: 'Jean Lafitte', definition: 'Pirate who fought alongside Americans at New Orleans', simpleDefinition: 'A pirate who helped the Americans fight at the Battle of New Orleans' },\n    ],\n\n    didYouKnow: 'The Battle of New Orleans made Jackson so popular that he won the presidency in 1828. His nickname \"Old Hickory\" came from his toughnesssoldiers said he was as hard as hickory wood.',\n\n    causeEffect: {\n      cause: 'Jackson assembled a diverse army and built strong defensive positions at New Orleans',\n      effect: 'The British frontal assault was a catastrophe \\u2014 2,000+ casualties vs. 71 American \\u2014 making Jackson a national hero',\n      thinkAbout: 'The battle was fought after the peace treaty was signed. Does that make the sacrifice meaningless, or did the battle still matter? How did it change American politics?',\n    },\n\n    geographicContext: {\n      description: 'New Orleans controlled the mouth of the Mississippi River \\u2014 America\\'s economic lifeline. Whoever held New Orleans controlled trade for the entire interior of the continent. Jackson used the swampy terrain to funnel the British into a killing zone.',\n      keyLocations: ['New Orleans', 'Mississippi River', 'Gulf of Mexico', 'Chalmette Plantation'],\n    },\n\n    primarySourceExcerpt: {\n      quote: 'I heard the bullets whistling all around me, and saw my brave men falling on every side. The field was covered with dead and wounded.',\n      attribution: 'British officer\\'s account of the Battle of New Orleans, January 8, 1815',\n      analysisPrompt: 'This is written from the British perspective. How would this same battle be described by someone on the American side? How does perspective change how we tell the story?',\n    },\n\n    activity: {\n      type: 'sequencing',\n      instruction: 'Put these events in the correct order:',\n      items: [\n        'Jackson recruits free Black soldiers, Choctaw warriors, and pirates',\n        'Treaty of Ghent signed in Belgium (December 24, 1814)',\n        'British launch frontal assault on American defenses (January 8, 1815)',\n        'News of the peace treaty reaches New Orleans (February 1815)',\n        'Jackson is celebrated as a national hero',\n      ],\n    },\n  },\n\n  {\n    id: 8,\n    year: '1814-1815',\n    title: 'Treaty of Ghent & Legacy',\n    keyIdea: 'The treaty changed no borders, but the war changed how Americans felt about their country.',\n    content: `The War of 1812 ended with the Treaty of Ghent, signed on December 24, 1814, in Belgium.\n\n**Status Quo Ante Bellum:** The treaty restored everything to how it was before the war. No territory changed hands. Britain didn't mention impressment or trade restrictions (because Napoleon was defeated, these issues no longer mattered). Native Americans, who had fought alongside Britain, were abandonedthe treaty said nothing about protecting their lands.\n\n**Who Won?** Both sides claimed victory. Americans celebrated surviving against the British Empire. Canadians were proud they'd defended their country from invasion. The British were just glad to end a costly, unnecessary war. Native Americans were the real losersthey lost their British allies and faced unstoppable American expansion westward.\n\n**Long-term Effects:**\n- **American Nationalism:** The war created a surge of American pride and unity called the \"Era of Good Feelings.\" The Federalist Party (which opposed the war) collapsed.\n- **Manufacturing Boom:** The war forced America to build its own factories since British goods were cut off. This started American industrialization.\n- **Native Displacement:** Without British support, Native tribes couldn't resist American expansion. Westward settlement accelerated.\n- **Canadian Identity:** Canadians saw the war as their defining momentthe successful defense against American conquest helped create Canadian national identity.`,\n\n    simpleContent: `The War of 1812 ended with a peace deal called the Treaty of Ghent. Both sides signed it on December 24, 1814, in Belgium.\n\nThings went back to how they were before the war. No one gained any new land. Britain stopped talking about taking American sailors because it no longer needed them. Native Americans got nothing. The treaty did not protect their lands at all. Britain left them behind.\n\nSo who won? Both sides said they won. Americans were proud they stood up to the British Empire. Canadians were proud they stopped American invaders. The British were just glad the war was over. Native Americans lost the most. Without British help, they could not stop American settlers from taking their land.\n\nThe war changed America in big ways. Americans felt proud and united. This time was called the \"Era of Good Feelings.\" American factories grew because British goods were blocked during the war. Native tribes lost British support and lost more and more land. Canadians came together as a nation for the first time.`,\n\n    keyTerms: [\n      { term: 'Treaty of Ghent', definition: 'Peace treaty that ended the War of 1812, restoring pre-war borders', simpleDefinition: 'The peace deal that ended the War of 1812. Everything went back to how it was before.' },\n      { term: 'Status Quo Ante Bellum', definition: 'Latin phrase meaning \"the way things were before the war\"', simpleDefinition: 'A fancy Latin phrase that means \"things went back to how they were before the war\"' },\n      { term: 'Era of Good Feelings', definition: 'Period of American nationalism and unity after the war', simpleDefinition: 'A time after the war when Americans felt proud and united' },\n    ],\n\n    didYouKnow: 'The War of 1812 is sometimes called \"the war nobody won.\" Britain got nothing it wanted, America got nothing it wanted, and 20,000 people died for a treaty that changed nothing on paperbut changed everything about how Americans saw themselves.',\n\n    causeEffect: {\n      cause: 'Both sides were exhausted \\u2014 Britain from the Napoleonic Wars, America from economic devastation',\n      effect: 'The treaty changed nothing on paper but transformed American identity, destroyed the Federalist Party, and abandoned Native allies',\n      thinkAbout: 'Can a war with no territorial changes still have enormous consequences? What changed even though the borders didn\\'t?',\n    },\n\n    geographicContext: {\n      description: 'The Treaty of Ghent was negotiated in Ghent, Belgium \\u2014 thousands of miles from the battlefields. The distance meant that fighting continued for weeks after the treaty was signed. The treaty\\'s failure to address Native lands opened the entire frontier to American expansion.',\n      keyLocations: ['Ghent, Belgium', 'Northwest Territory', 'Creek Nation lands', 'New England (Hartford Convention)'],\n    },\n\n    primarySourceExcerpt: {\n      quote: 'The war has renewed and reinstated the national feelings which the Revolution had given and which were daily lessened.',\n      attribution: 'Albert Gallatin, former Treasury Secretary, 1816',\n      analysisPrompt: 'Gallatin says the war restored national feelings from the Revolution. Why might Americans have lost some national pride between 1783 and 1812? How did the war restore it?',\n    },\n\n    activity: null,\n  },\n\n  {\n    id: 9,\n    year: '1812-1815',\n    title: 'Diverse Experiences of the War',\n    keyIdea: 'African Americans, women, and Native Americans all experienced the war in very different ways.',\n    content: `The War of 1812 affected different groups in dramatically different ways. Understanding these diverse experiences gives us a fuller picture of the conflict.\n\n**African Americans in the War:** About 15-20% of American sailors were free Black men who served alongside white sailors with equal pay. On land, Andrew Jackson recruited free men of color into two battalions at New Orleans. Meanwhile, approximately 4,000 enslaved people escaped to British lines, where they were offered freedom. Some formed the Colonial Marines and fought against their former enslavers. Britain resettled most in Nova Scotia and Trinidad after the war.\n\n**Women's Roles:** Women managed farms, businesses, and plantations while men fought. Frontier women defended homesteads and survived as refugees. Dolley Madison saved national treasures from the burning White House. Mary Pickersgill sewed the enormous Fort McHenry flag. Laura Secord walked 20 miles through enemy territory to warn British forces. The British blockade created new factory jobs for women, accelerating American industrialization.\n\n**Native American Experiences:** Native nations were not monolithic  they made complex choices about alliances. Some fought with the British, some with the Americans, some tried to stay neutral. Women in matrilineal societies like the Creek held political influence and bore the heaviest burden of displacement. After the war, all Native nations suffered regardless of which side they chose.`,\n\n    simpleContent: `The War of 1812 affected different groups of people in very different ways.\n\nAfrican Americans played a big role in the war. About one out of every five American sailors was a free Black man. They got the same pay as white sailors. Andrew Jackson asked free Black men to fight at New Orleans. About 4,000 enslaved people escaped to the British side. The British promised them freedom. Some of these men joined a fighting group called the Colonial Marines. They fought against the people who had enslaved them. After the war, Britain helped most of them start new lives in Canada and the Caribbean.\n\nWomen kept things running at home while men went to war. They ran farms, shops, and plantations. Dolley Madison saved treasures from the burning White House. She was also important in politics  she hosted parties where leaders met, talked, and made deals to help her husband. Mary Pickersgill sewed the giant flag that flew over Fort McHenry. Laura Secord walked 20 miles to warn the British about an American attack. New factory jobs opened up for women during the war.\n\nNative American tribes made hard choices. Some fought with the British. Some fought with the Americans. Some tried to stay out of the war. In many tribes, women helped make decisions in councils. They spoke for peace or war and kept their communities going while men fought. After the war ended, all Native groups suffered. It did not matter which side they chose.\n\nThe government also let private ships called \"privateers\" attack British trading ships. Over 500 American privateers captured more than 1,500 British ships. This hurt British trade badly and helped push Britain toward making peace.`,\n\n    simpleContentSections: [\n      {\n        heading: 'African Americans',\n        content: 'African Americans played a big role in the war. About one out of every five American sailors was a free Black man. They got the same pay as white sailors. Andrew Jackson asked free Black men to fight at New Orleans. About 4,000 enslaved people escaped to the British side. The British promised them freedom. Some of these men joined a fighting group called the Colonial Marines. They fought against the people who had enslaved them. After the war, Britain helped most of them start new lives in Canada and the Caribbean.',\n      },\n      {\n        heading: 'Women',\n        content: 'Women kept things running at home while men went to war. They ran farms, shops, and plantations. Dolley Madison saved treasures from the burning White House. She was also important in politics  she hosted parties where leaders met, talked, and made deals to help her husband. Mary Pickersgill sewed the giant flag that flew over Fort McHenry. Laura Secord walked 20 miles to warn the British about an American attack. New factory jobs opened up for women during the war.',\n      },\n      {\n        heading: 'Native Americans',\n        content: 'Native American tribes made hard choices. Some fought with the British. Some fought with the Americans. Some tried to stay out of the war. In many tribes, women helped make decisions in councils. They spoke for peace or war and kept their communities going while men fought. After the war ended, all Native groups suffered. It did not matter which side they chose.',\n      },\n      {\n        heading: 'Privateers',\n        content: 'The government also let private ships called \"privateers\" attack British trading ships. Over 500 American privateers captured more than 1,500 British ships. This hurt British trade badly and helped push Britain toward making peace.',\n      },\n    ],\n\n    keyTerms: [\n      { term: 'Colonial Marines', definition: 'British military unit made up of formerly enslaved people who escaped from American plantations', simpleDefinition: 'A group of soldiers made up of people who escaped slavery and joined the British army' },\n      { term: 'Matrilineal', definition: 'A social system where family descent and inheritance pass through the mother\\'s line', simpleDefinition: 'A family system where your family name and belongings pass down through your mother' },\n      { term: 'Self-emancipation', definition: 'The act of enslaved people freeing themselves by escaping to freedom', simpleDefinition: 'When enslaved people freed themselves by running away to safety' },\n    ],\n\n    didYouKnow: 'After the war, American slaveholders demanded Britain return the people who had escaped to freedom. Britain refused, and the issue was sent to international arbitration. In 1826, Tsar Alexander I of Russia ruled that Britain owed compensation \\u2014 but for the \"property,\" not for freeing human beings. The case reveals how slavery was intertwined with international diplomacy.',\n\n    causeEffect: {\n      cause: 'The war disrupted social structures and created opportunities for marginalized groups to seek freedom and new roles',\n      effect: 'African Americans proved their valor in combat, women demonstrated economic capability, and Native nations faced catastrophic consequences regardless of their choices',\n      thinkAbout: 'Why do we often hear about generals and politicians but rarely about ordinary people\\'s wartime experiences? Whose stories are missing from most textbooks?',\n    },\n\n    geographicContext: {\n      description: 'Diverse experiences varied by region: the Chesapeake Bay was where most enslaved people escaped to British ships; New England was where women entered factories; the Great Lakes frontier was where Native communities were displaced.',\n      keyLocations: ['Chesapeake Bay', 'New England mills', 'Great Lakes frontier', 'Creek Nation'],\n    },\n\n    primarySourceExcerpt: {\n      quote: 'I had been a slave, and knew what slavery was. I determined to get my liberty or lose my life.',\n      attribution: 'Paraphrased from Charles Ball\\'s memoir, an African American veteran of the war',\n      analysisPrompt: 'What does Ball\\'s statement tell us about how enslaved people viewed the war differently from free Americans? How might their motivations for fighting differ?',\n    },\n\n    activity: null,\n  },\n\n  {\n    id: 10,\n    year: '1812-1815',\n    title: 'Geography of the War',\n    keyIdea: 'Geography shaped every major battle  controlling waterways was the key to winning.',\n    content: `Geography shaped every major decision and outcome of the War of 1812. Understanding WHERE things happened helps explain WHY they happened.\n\n**The Great Lakes Theater:** The chain of Great Lakes (Erie, Ontario, Huron, Superior) formed the border between the U.S. and Canada. Whoever controlled the lakes controlled supply routes, troop movements, and communication. This is why the naval battle on Lake Erie was so decisive \\u2014 Perry's victory cut off British supplies to Detroit and the entire western frontier.\n\n**The Chesapeake Bay:** This enormous bay gave the British navy access deep into the American heartland. Rivers flowing into the bay led directly to Washington D.C. and Baltimore. The British used this geographic advantage to burn the capital, but Fort McHenry's position at the narrow entrance to Baltimore Harbor denied them their next target.\n\n**The Mississippi & New Orleans:** New Orleans sat at the mouth of the Mississippi River \\u2014 the economic lifeline of the American interior. All trade from the Ohio Valley, Kentucky, Tennessee, and the frontier flowed down the Mississippi to New Orleans. Losing the city would have been catastrophic for the American economy, which is why its defense was so critical.\n\n**The Canadian Frontier:** Americans believed conquering Canada would be easy, but geography proved them wrong. Long supply lines, dense forests, and the defensive advantage of the British along the St. Lawrence River made invasion extremely difficult.`,\n\n    simpleContent: `Where battles happened mattered a lot in this war. The land and water shaped how the war was fought.\n\nThe Great Lakes sat between the United States and Canada. Whoever controlled the lakes could move soldiers and supplies. That is why the battle on Lake Erie was so important. When Perry won that battle, the British could not get supplies to Detroit anymore.\n\nThe Chesapeake Bay was a big body of water near Washington, D.C. British ships sailed right up the bay to attack the capital. They used rivers flowing into the bay to reach Washington. But Fort McHenry blocked the entrance to Baltimore Harbor. The British could not get past it.\n\nNew Orleans sat at the bottom of the Mississippi River. Farmers and traders in the middle of America shipped their goods down the river to New Orleans. Losing that city would have been terrible for the American economy.\n\nAmericans thought taking over Canada would be easy. They were wrong. Canada was far away and hard to reach. Thick forests and long distances made it very difficult to invade.`,\n\n    keyTerms: [\n      { term: 'Theater of war', definition: 'A geographic area where military operations take place', simpleDefinition: 'A large area where fighting happens during a war' },\n      { term: 'Supply lines', definition: 'Routes used to transport food, ammunition, and equipment to armies', simpleDefinition: 'The roads and paths used to bring food, weapons, and supplies to soldiers' },\n      { term: 'Strategic chokepoint', definition: 'A narrow passage that controls access to a larger area', simpleDefinition: 'A narrow spot that controls who can get in or out of a bigger area' },\n    ],\n\n    didYouKnow: 'The War of 1812 was fought across an area larger than all of Western Europe. Messages between Washington and frontier commanders could take weeks to arrive. This is why the Battle of New Orleans was fought after the peace treaty was signed \\u2014 news simply couldn\\'t travel fast enough.',\n\n    causeEffect: {\n      cause: 'The vast distances and geographic barriers of North America made coordinating military operations extremely difficult',\n      effect: 'Battles were often fought without commanders knowing the full strategic picture, and control of waterways became more important than winning any single land battle',\n      thinkAbout: 'How would the war have been different if the telephone or telegraph had existed? How does communication speed affect military strategy?',\n    },\n\n    geographicContext: {\n      description: 'The war was fought across four main theaters: the Great Lakes/Canadian border, the Atlantic coast, the Chesapeake Bay, and the Gulf Coast. Each theater had unique geographic challenges that shaped the fighting.',\n      keyLocations: ['Great Lakes', 'St. Lawrence River', 'Chesapeake Bay', 'Gulf of Mexico', 'New Orleans', 'Niagara frontier'],\n    },\n\n    primarySourceExcerpt: {\n      quote: 'The conquest of Canada is in your power. I trust I shall not be deemed presumptuous when I state that I verily believe that the militia of Kentucky are alone competent to place Montreal and Upper Canada at your feet.',\n      attribution: 'Henry Clay, War Hawk congressman, 1812',\n      analysisPrompt: 'Clay was completely wrong \\u2014 Canada was not easily conquered. What geographic factors did he fail to consider? Why might politicians underestimate military challenges?',\n    },\n\n    activity: null,\n  },\n];\n\nexport default timelineEvents;\n","import React from 'react';\n\n/**\n * Converts **text** markdown bold syntax to <strong> React elements.\n * Returns an array of strings and React elements.\n */\nexport default function renderBoldText(text) {\n  if (!text) return text;\n  const parts = text.split(/(\\*\\*[^*]+\\*\\*)/g);\n  return parts.map((part, i) => {\n    if (part.startsWith('**') && part.endsWith('**')) {\n      return <strong key={i} className=\"text-parchment/90 font-bold\">{part.slice(2, -2)}</strong>;\n    }\n    return part;\n  });\n}\n","import React, { useState, useRef, useEffect, useCallback } from 'react';\n\nexport default function VocabTerm({ term, definition, children }) {\n  const [open, setOpen] = useState(false);\n  const ref = useRef(null);\n  const tooltipRef = useRef(null);\n\n  const toggle = useCallback(() => setOpen(prev => !prev), []);\n\n  useEffect(() => {\n    if (!open) return;\n    function handleClickOutside(e) {\n      if (ref.current && !ref.current.contains(e.target)) {\n        setOpen(false);\n      }\n    }\n    document.addEventListener('mousedown', handleClickOutside);\n    document.addEventListener('touchstart', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, [open]);\n\n  // Reposition tooltip if it goes off-screen\n  useEffect(() => {\n    if (!open || !tooltipRef.current) return;\n    const el = tooltipRef.current;\n    const rect = el.getBoundingClientRect();\n    if (rect.left < 8) {\n      el.style.left = '0';\n      el.style.transform = 'none';\n    } else if (rect.right > window.innerWidth - 8) {\n      el.style.left = 'auto';\n      el.style.right = '0';\n      el.style.transform = 'none';\n    }\n  }, [open]);\n\n  return (\n    <span ref={ref} className=\"relative inline\">\n      <button\n        type=\"button\"\n        onClick={toggle}\n        className=\"inline underline decoration-dotted decoration-war-gold/60 underline-offset-2 font-bold text-parchment/90\n                   hover:decoration-war-gold cursor-pointer min-h-[44px] min-w-0 p-0 m-0 bg-transparent border-none\n                   font-inherit text-inherit leading-inherit\"\n        aria-expanded={open}\n        aria-label={`Definition of ${term}`}\n      >\n        {children}\n      </button>\n      {open && (\n        <span\n          ref={tooltipRef}\n          role=\"tooltip\"\n          className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 max-w-[90vw]\n                     bg-war-navy border border-war-gold/30 shadow-modal rounded-lg p-3\n                     animate-fadein z-50\"\n        >\n          <span className=\"block text-war-gold font-display text-sm font-bold mb-1\">{term}</span>\n          <span className=\"block text-parchment/70 text-sm font-body leading-relaxed\">{definition}</span>\n        </span>\n      )}\n    </span>\n  );\n}\n","import React from 'react';\nimport VocabTerm from '../components/VocabTerm';\nimport renderBoldText from './renderBoldText';\n\n/**\n * Takes paragraph text + keyTerms array and returns React elements\n * with the first occurrence of each term wrapped in a VocabTerm tooltip.\n * Terms are sorted by length descending so \"Fort McHenry\" matches before \"Fort\".\n * Non-term segments get renderBoldText applied.\n */\nexport default function injectVocabTerms(text, keyTerms, isExplorer) {\n  if (!keyTerms || keyTerms.length === 0) return renderBoldText(text);\n\n  // Sort terms by length descending to match longer terms first\n  const sorted = [...keyTerms].sort((a, b) => b.term.length - a.term.length);\n\n  // Build a regex that matches any term (case-insensitive, word boundaries)\n  const pattern = sorted.map(t => t.term.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')).join('|');\n  const regex = new RegExp(`(${pattern})`, 'i');\n\n  // Track which terms have already been wrapped\n  const matched = new Set();\n  const parts = text.split(regex);\n\n  return parts.map((part, i) => {\n    // Check if this part matches a term we haven't wrapped yet\n    const termObj = sorted.find(t => t.term.toLowerCase() === part.toLowerCase());\n    if (termObj && !matched.has(termObj.term.toLowerCase())) {\n      matched.add(termObj.term.toLowerCase());\n      const definition = isExplorer && termObj.simpleDefinition ? termObj.simpleDefinition : termObj.definition;\n      return (\n        <VocabTerm key={`vocab-${i}`} term={termObj.term} definition={definition}>\n          {part}\n        </VocabTerm>\n      );\n    }\n    // Non-term segment  apply bold rendering\n    return <React.Fragment key={i}>{renderBoldText(part)}</React.Fragment>;\n  });\n}\n","import React, { useState, useCallback } from 'react';\nimport timelineEvents from '../data/learningContent';\nimport quizGateQuestions from '../data/quizGateQuestions';\nimport renderBoldText from '../utils/renderBoldText';\nimport injectVocabTerms from '../utils/injectVocabTerms';\n\n// Build lookup: section id  question (sections 1,2,3,4,5,6,8,9 have questions; 7,10 do not)\nconst questionForSection = {};\nquizGateQuestions.forEach(q => { questionForSection[q.section] = q; });\n\nfunction renderParagraphs(text, isExplorer, keyTerms) {\n  const paragraphs = text.split('\\n\\n');\n  return paragraphs.map((para, i) => {\n    const trimmed = para.trim();\n    if (!trimmed) return null;\n    const content = isExplorer\n      ? injectVocabTerms(trimmed, keyTerms, true)\n      : renderBoldText(trimmed);\n    return (\n      <p key={i} className={isExplorer ? 'mb-5' : 'mb-4'}>\n        {content}\n      </p>\n    );\n  });\n}\n\nfunction ActivitySection({ activity }) {\n  const [order, setOrder] = useState(activity.items.map((_, i) => i));\n  const [selectedIdx, setSelectedIdx] = useState(null);\n\n  const handleClick = useCallback((clickedPosition) => {\n    if (activity.type === 'sequencing') {\n      if (selectedIdx === null) {\n        setSelectedIdx(clickedPosition);\n      } else {\n        // Swap the two items\n        setOrder(prev => {\n          const next = [...prev];\n          [next[selectedIdx], next[clickedPosition]] = [next[clickedPosition], next[selectedIdx]];\n          return next;\n        });\n        setSelectedIdx(null);\n      }\n    }\n  }, [selectedIdx, activity.type]);\n\n  if (activity.type === 'matching') {\n    return (\n      <div className=\"bg-black/20 rounded-lg p-4 mb-4 border border-parchment-dark/8\">\n        <h3 className=\"text-war-gold/80 font-display text-sm mb-2 border-b border-war-gold/15 pb-2 tracking-wide\">\n          Activity: Matching\n        </h3>\n        <p className=\"text-parchment/60 text-sm font-body mb-3\">{activity.instruction}</p>\n        <div className=\"space-y-2\">\n          {activity.items.map((item, i) => (\n            <div key={i} className=\"bg-war-navy/50 border border-parchment-dark/8 rounded px-3 py-2\">\n              <p className=\"text-parchment/70 text-sm font-body\">{item}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // Sequencing activity  click to select, click another to swap\n  return (\n    <div className=\"bg-black/20 rounded-lg p-4 mb-4 border border-parchment-dark/8\">\n      <h3 className=\"text-war-gold/80 font-display text-sm mb-2 border-b border-war-gold/15 pb-2 tracking-wide\">\n        Activity: Put in Order\n      </h3>\n      <p className=\"text-parchment/60 text-sm font-body mb-1\">{activity.instruction}</p>\n      <p className=\"text-parchment-dark/40 text-xs font-body mb-3 italic\">Click two items to swap their positions.</p>\n      <div className=\"space-y-1.5\">\n        {order.map((itemIdx, position) => (\n          <button\n            key={position}\n            onClick={() => handleClick(position)}\n            className={`w-full text-left px-3 py-2 rounded border transition-all cursor-pointer flex items-center gap-2 ${\n              selectedIdx === position\n                ? 'border-war-gold/50 bg-war-gold/10 text-parchment/90'\n                : 'border-parchment-dark/10 bg-war-navy/50 text-parchment/70 hover:border-parchment-dark/25'\n            }`}\n          >\n            <span className=\"text-war-gold/50 text-xs font-display font-bold w-5 flex-shrink-0\">{position + 1}.</span>\n            <span className=\"text-sm font-body\">{activity.items[itemIdx]}</span>\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default function LearningMode({ onComplete, gameMode, fontMode, toggleFont }) {\n  const [currentStep, setCurrentStep] = useState(0);\n  const [answeredSections, setAnsweredSections] = useState(new Set());\n  const [selectedAnswer, setSelectedAnswer] = useState(null);\n  const [showResult, setShowResult] = useState(false);\n  const [isCorrect, setIsCorrect] = useState(false);\n  const [retries, setRetries] = useState({});\n  const isExplorer = gameMode === 'explorer';\n  const totalSteps = timelineEvents.length;\n  const event = timelineEvents[currentStep];\n\n  // Current section's quiz question (if any)\n  const sectionQuestion = questionForSection[event.id];\n  const sectionNeedsAnswer = sectionQuestion && !answeredSections.has(event.id);\n\n  const resetQuizState = useCallback(() => {\n    setSelectedAnswer(null);\n    setShowResult(false);\n    setIsCorrect(false);\n  }, []);\n\n  const handleNext = () => {\n    if (currentStep < totalSteps - 1) {\n      setCurrentStep(currentStep + 1);\n      resetQuizState();\n    } else {\n      const completeRetries = {};\n      quizGateQuestions.forEach(q => {\n        completeRetries[q.id] = retries[q.id] || 0;\n      });\n      onComplete(completeRetries);\n    }\n  };\n\n  const handlePrev = () => {\n    if (currentStep > 0) {\n      setCurrentStep(currentStep - 1);\n      resetQuizState();\n    }\n  };\n\n  const handleQuizAnswer = useCallback((answerIndex) => {\n    if (showResult) return;\n    setSelectedAnswer(answerIndex);\n    const correct = answerIndex === sectionQuestion.correctIndex;\n    setIsCorrect(correct);\n    setShowResult(true);\n\n    if (correct) {\n      setTimeout(() => {\n        setAnsweredSections(prev => new Set(prev).add(event.id));\n        resetQuizState();\n        // Auto-advance to next section after correct answer\n        setCurrentStep(prev => prev < timelineEvents.length - 1 ? prev + 1 : prev);\n      }, 1500);\n    } else {\n      setRetries(prev => ({\n        ...prev,\n        [sectionQuestion.id]: (prev[sectionQuestion.id] || 0) + 1,\n      }));\n    }\n  }, [showResult, sectionQuestion, event.id, resetQuizState]);\n\n  const handleRetry = useCallback(() => {\n    resetQuizState();\n  }, [resetQuizState]);\n\n  const progress = ((currentStep + 1) / totalSteps) * 100;\n  const contentText = isExplorer && event.simpleContent ? event.simpleContent : event.content;\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n      <div className={isExplorer ? 'max-w-3xl w-full' : 'max-w-4xl w-full'}>\n        {/* Header */}\n        <div className=\"text-center mb-6\">\n          <div className=\"flex items-center justify-center gap-2 mb-2\">\n            <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n            <p className=\"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold\">Historical Timeline</p>\n            <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n          </div>\n          <h1 className=\"text-3xl md:text-4xl font-display text-war-gold tracking-wide mb-2\">\n            War of 1812\n          </h1>\n          <p className={`text-parchment-dark/50 font-body ${isExplorer ? 'text-base' : 'text-sm'}`}>\n            Learn the history before you play. This will help you answer quiz questions during the game!\n          </p>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"mb-6\">\n          <div className=\"flex justify-between text-xs text-parchment-dark/40 mb-1.5 font-body\">\n            <span>Section {currentStep + 1} of {totalSteps}</span>\n            <span>{Math.round(progress)}% Complete</span>\n          </div>\n          <div className=\"w-full bg-war-ink rounded-full h-2 border border-parchment-dark/10 overflow-hidden\">\n            <div\n              className=\"h-full rounded-full transition-all duration-300\"\n              style={{ width: `${progress}%`, background: 'linear-gradient(to right, #854d0e, #c9a227)' }}\n            />\n          </div>\n        </div>\n\n        {/* Main Content Card */}\n        <div className={`bg-war-navy border border-war-gold/20 rounded-lg shadow-modal animate-fadein ${isExplorer ? 'p-8 md:p-10' : 'p-6 md:p-8'}`}>\n          {/* Year Badge */}\n          <div className={`inline-block bg-war-gold/15 text-war-gold px-4 py-1 rounded-full font-bold font-body border border-war-gold/20 ${isExplorer ? 'text-sm mb-5' : 'text-xs mb-4'}`}>\n            {event.year}\n          </div>\n\n          {/* Title */}\n          <h2 className={`font-display text-parchment/90 tracking-wide ${isExplorer ? 'text-3xl md:text-4xl mb-8' : 'text-2xl md:text-3xl mb-6'}`}>\n            {event.title}\n          </h2>\n\n          {/* Key Idea (Explorer only) */}\n          {isExplorer && event.keyIdea && (\n            <div className=\"bg-war-gold/10 border border-war-gold/25 rounded-lg p-4 mb-6\">\n              <p className=\"text-xs text-war-gold/80 uppercase tracking-wider mb-1 font-body font-bold\">Key Idea</p>\n              <p className={`text-parchment/90 font-body font-bold leading-relaxed ${isExplorer ? 'text-lg' : 'text-base'}`}>\n                {event.keyIdea}\n              </p>\n            </div>\n          )}\n\n          {/* Content */}\n          <div className=\"mb-6\">\n            {isExplorer && event.simpleContentSections ? (\n              /* Section 9 sub-sections in Explorer mode */\n              <div className={`text-parchment/70 font-body ${isExplorer ? 'text-lg md:text-xl leading-loose max-w-2xl' : 'text-base leading-relaxed'}`}>\n                {/* Intro paragraph */}\n                <p className=\"mb-5\">{contentText.split('\\n\\n')[0]}</p>\n                {/* Sub-sections */}\n                {event.simpleContentSections.map((section, i) => (\n                  <div key={i} className=\"mb-6\">\n                    <p className=\"text-war-copper/80 uppercase tracking-wider text-xs font-body font-bold mb-2\">\n                      {section.heading}\n                    </p>\n                    <p className=\"mb-5\">{injectVocabTerms(section.content, event.keyTerms, true)}</p>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className={`text-parchment/70 font-body ${isExplorer ? 'text-lg md:text-xl leading-loose max-w-2xl' : 'text-base leading-relaxed'}`}>\n                {renderParagraphs(contentText, isExplorer, event.keyTerms)}\n              </div>\n            )}\n          </div>\n\n          {/* Did You Know  moved up in Explorer mode (after content, before Key Terms) */}\n          {isExplorer && event.didYouKnow && (\n            <div className=\"bg-war-red/10 border-l-2 border-war-red/30 rounded-r-lg p-4 mb-4\">\n              <p className=\"text-war-copper/80 text-xs uppercase tracking-wider mb-1 font-body font-bold\">Did You Know?</p>\n              <p className={`text-parchment/70 italic font-body ${isExplorer ? 'text-base' : 'text-sm'}`}>{event.didYouKnow}</p>\n            </div>\n          )}\n\n          {/* Key Terms */}\n          {event.keyTerms && event.keyTerms.length > 0 && (\n            <div className=\"bg-black/20 rounded-lg p-4 mb-4 border border-parchment-dark/8\">\n              <h3 className=\"text-war-gold/80 font-display text-sm mb-3 border-b border-war-gold/15 pb-2 tracking-wide\">\n                Key Terms\n              </h3>\n              <div className=\"space-y-2 font-body\">\n                {event.keyTerms.map((term, index) => (\n                  <div key={index}>\n                    <span className={`text-parchment/80 font-bold ${isExplorer ? 'text-base' : 'text-sm'}`}>{term.term}:</span>{' '}\n                    <span className={`text-parchment-dark/60 ${isExplorer ? 'text-base' : 'text-sm'}`}>{isExplorer && term.simpleDefinition ? term.simpleDefinition : term.definition}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Cause & Effect (hidden in explorer mode) */}\n          {event.causeEffect && !isExplorer && (\n            <div className=\"bg-black/20 rounded-lg p-4 mb-4 border border-parchment-dark/8\">\n              <h3 className=\"text-war-gold/80 font-display text-sm mb-3 border-b border-war-gold/15 pb-2 tracking-wide\">\n                Cause &amp; Effect\n              </h3>\n              <div className=\"flex flex-col sm:flex-row items-stretch gap-2 mb-3\">\n                <div className=\"flex-1 bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8\">\n                  <p className=\"text-war-copper/70 text-[10px] uppercase tracking-widest font-body font-bold mb-1\">Cause</p>\n                  <p className=\"text-parchment/70 text-sm font-body\">{event.causeEffect.cause}</p>\n                </div>\n                <div className=\"flex items-center justify-center text-war-gold/40 text-xl px-2 hidden sm:flex\">&rarr;</div>\n                <div className=\"flex items-center justify-center text-war-gold/40 text-xl sm:hidden\">&darr;</div>\n                <div className=\"flex-1 bg-war-navy/50 rounded-lg p-3 border border-parchment-dark/8\">\n                  <p className=\"text-war-copper/70 text-[10px] uppercase tracking-widest font-body font-bold mb-1\">Effect</p>\n                  <p className=\"text-parchment/70 text-sm font-body\">{event.causeEffect.effect}</p>\n                </div>\n              </div>\n              <div className=\"bg-war-gold/5 border border-war-gold/10 rounded-lg p-3\">\n                <p className=\"text-war-gold/70 text-xs font-body font-bold mb-0.5\">Think About It</p>\n                <p className=\"text-parchment/60 text-sm font-body italic\">{event.causeEffect.thinkAbout}</p>\n              </div>\n            </div>\n          )}\n\n          {/* Primary Source Excerpt (hidden in explorer mode) */}\n          {event.primarySourceExcerpt && !isExplorer && (\n            <div className=\"bg-war-red/5 border-l-2 border-war-red/20 rounded-r-lg p-4 mb-4\">\n              <p className=\"text-war-copper/80 text-xs uppercase tracking-wider mb-2 font-body font-bold\">Primary Source</p>\n              <blockquote className=\"text-parchment/80 text-sm font-body italic leading-relaxed mb-2 pl-2 border-l border-parchment-dark/15\">\n                &ldquo;{event.primarySourceExcerpt.quote}&rdquo;\n              </blockquote>\n              <p className=\"text-parchment-dark/50 text-xs font-body mb-2\">&mdash; {event.primarySourceExcerpt.attribution}</p>\n              <div className=\"bg-war-gold/5 border border-war-gold/10 rounded p-2.5\">\n                <p className=\"text-war-gold/70 text-xs font-body font-bold mb-0.5\">Analysis Question</p>\n                <p className=\"text-parchment/60 text-sm font-body italic\">{event.primarySourceExcerpt.analysisPrompt}</p>\n              </div>\n            </div>\n          )}\n\n          {/* Geographic Context (hidden in explorer mode) */}\n          {event.geographicContext && !isExplorer && (\n            <div className=\"bg-black/20 rounded-lg p-4 mb-4 border border-parchment-dark/8\">\n              <h3 className=\"text-war-gold/80 font-display text-sm mb-2 border-b border-war-gold/15 pb-2 tracking-wide\">\n                Geographic Context\n              </h3>\n              <p className=\"text-parchment/70 text-sm font-body leading-relaxed mb-2\">{event.geographicContext.description}</p>\n              <div className=\"flex flex-wrap gap-1.5\">\n                {event.geographicContext.keyLocations.map((loc, i) => (\n                  <span key={i} className=\"bg-war-navy/60 border border-parchment-dark/10 rounded px-2 py-0.5 text-parchment/60 text-xs font-body\">\n                    {loc}\n                  </span>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Activity (hidden in explorer mode) */}\n          {event.activity && !isExplorer && <ActivitySection activity={event.activity} />}\n\n          {/* Did You Know  Historian mode (at bottom, original position) */}\n          {!isExplorer && event.didYouKnow && (\n            <div className=\"bg-war-red/10 border-l-2 border-war-red/30 rounded-r-lg p-4\">\n              <p className=\"text-war-copper/80 text-xs uppercase tracking-wider mb-1 font-body font-bold\">Did You Know?</p>\n              <p className=\"text-parchment/70 text-sm italic font-body\">{event.didYouKnow}</p>\n            </div>\n          )}\n\n          {/* Inline Quiz  show if section has a question and not yet answered */}\n          {sectionNeedsAnswer && (\n            <div className=\"mt-6 bg-war-gold/5 border border-war-gold/25 rounded-lg p-5 md:p-6 animate-fadein\">\n              <div className=\"flex items-center gap-2 mb-4\">\n                <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n                <p className=\"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold\">Check Your Understanding</p>\n                <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n              </div>\n              <h3 className={`font-display text-parchment/90 tracking-wide mb-4 ${isExplorer ? 'text-xl md:text-2xl' : 'text-lg md:text-xl'}`}>\n                {isExplorer && sectionQuestion.simpleQuestion ? sectionQuestion.simpleQuestion : sectionQuestion.question}\n              </h3>\n              <div className=\"space-y-2.5 mb-4\">\n                {sectionQuestion.answers.map((answer, i) => {\n                  let classes = 'w-full text-left px-4 py-3 rounded-lg border transition-all cursor-pointer font-body';\n                  if (showResult && i === sectionQuestion.correctIndex) {\n                    classes += ' border-green-500/50 bg-green-900/20 text-parchment/90';\n                  } else if (showResult && i === selectedAnswer && !isCorrect) {\n                    classes += ' border-red-500/50 bg-red-900/20 text-parchment/70';\n                  } else if (!showResult) {\n                    classes += ' border-parchment-dark/15 bg-war-navy/50 text-parchment/70 hover:border-war-gold/40 hover:text-parchment/90';\n                  } else {\n                    classes += ' border-parchment-dark/10 bg-war-navy/30 text-parchment/50';\n                  }\n                  return (\n                    <button\n                      key={i}\n                      onClick={() => handleQuizAnswer(i)}\n                      disabled={showResult}\n                      className={classes}\n                      style={showResult ? { cursor: 'default' } : undefined}\n                    >\n                      <span className={`font-display font-bold mr-2 ${isExplorer ? 'text-base' : 'text-sm'}`}>\n                        {String.fromCharCode(65 + i)}.\n                      </span>\n                      <span className={isExplorer ? 'text-base leading-relaxed' : 'text-sm leading-relaxed'}>\n                        {answer}\n                      </span>\n                    </button>\n                  );\n                })}\n              </div>\n              {showResult && (\n                <div className={`rounded-lg p-4 animate-fadein ${isCorrect ? 'bg-green-900/20 border border-green-500/30' : 'bg-red-900/20 border border-red-500/30'}`}>\n                  <p className={`font-display font-bold mb-2 ${isCorrect ? 'text-green-400' : 'text-red-400'} ${isExplorer ? 'text-base' : 'text-sm'}`}>\n                    {isCorrect ? 'Correct!' : 'Not quite  try again!'}\n                  </p>\n                  {!isCorrect && (\n                    <>\n                      <p className={`text-parchment/70 font-body mb-3 ${isExplorer ? 'text-base leading-loose' : 'text-sm leading-relaxed'}`}>\n                        {isExplorer && sectionQuestion.simpleExplanation ? sectionQuestion.simpleExplanation : sectionQuestion.explanation}\n                      </p>\n                      <button\n                        onClick={handleRetry}\n                        className=\"px-5 py-2.5 bg-war-gold text-war-ink font-display text-sm rounded\n                                   hover:bg-war-brass transition-colors cursor-pointer font-bold tracking-wide shadow-copper\"\n                      >\n                        Try Again\n                      </button>\n                    </>\n                  )}\n                  {isCorrect && (\n                    <p className={`text-parchment/60 font-body ${isExplorer ? 'text-base' : 'text-sm'}`}>\n                      Moving on...\n                    </p>\n                  )}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Navigation Buttons */}\n        <div className=\"mt-6 flex justify-between items-center gap-4\">\n          <div className=\"flex gap-3 w-full justify-between\">\n            {/* Previous Button */}\n            {currentStep > 0 && (\n              <button\n                onClick={handlePrev}\n                className=\"px-6 py-3 font-display text-sm rounded border border-parchment-dark/20 text-parchment/70\n                           hover:border-war-gold/40 hover:text-parchment transition-colors cursor-pointer tracking-wide\"\n              >\n                Previous\n              </button>\n            )}\n\n            {/* Next/Start Button */}\n            <div className=\"ml-auto flex flex-col items-end gap-1\">\n              <button\n                onClick={handleNext}\n                disabled={sectionNeedsAnswer}\n                className={`px-6 py-3 font-display text-sm rounded font-bold tracking-wide shadow-copper transition-colors ${\n                  sectionNeedsAnswer\n                    ? 'bg-war-gold/30 text-war-ink/50 cursor-not-allowed'\n                    : 'bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer'\n                }`}\n              >\n                {currentStep === totalSteps - 1 ? 'Start Playing!' : 'Next'}\n              </button>\n              {sectionNeedsAnswer && (\n                <p className=\"text-parchment-dark/40 text-xs font-body italic\">Answer the question above to continue</p>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Progress dots */}\n        <div className=\"mt-6 flex justify-center gap-2\">\n          {timelineEvents.map((_, index) => (\n            <div\n              key={index}\n              className={`h-1.5 rounded-full transition-all ${\n                index === currentStep\n                  ? 'bg-war-gold w-6'\n                  : index < currentStep\n                  ? 'bg-war-gold/40 w-1.5'\n                  : 'bg-parchment-dark/15 w-1.5'\n              }`}\n            />\n          ))}\n        </div>\n\n        {/* Font Toggle */}\n        {toggleFont && (\n          <div className=\"mt-4 text-center\">\n            <button\n              onClick={toggleFont}\n              className=\"text-parchment-dark/40 text-xs font-body hover:text-parchment/60 transition-colors cursor-pointer\"\n            >\n              {fontMode === 'dyslexic' ? 'Switch to Standard Font' : 'Switch to OpenDyslexic Font'}\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport profiles from '../data/peopleProfiles';\n\nconst FACTION_FILTERS = [\n  { id: 'all', label: 'All' },\n  { id: 'us', label: 'United States' },\n  { id: 'british', label: 'British / Canada' },\n  { id: 'native', label: 'Native Coalition' },\n];\n\nconst CATEGORY_LABELS = {\n  military: 'Military',\n  political: 'Political',\n  civilian: 'Civilian',\n  native_leader: 'Native Leader',\n};\n\nexport default function PeopleGallery({ onClose }) {\n  const [filter, setFilter] = useState('all');\n  const [selectedProfile, setSelectedProfile] = useState(null);\n\n  const filtered = filter === 'all' ? profiles : profiles.filter(p => p.faction === filter);\n\n  if (selectedProfile) {\n    return (\n      <ProfileDetail\n        profile={selectedProfile}\n        onBack={() => setSelectedProfile(null)}\n        onClose={onClose}\n      />\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n      {/* Header */}\n      <header className=\"bg-war-navy/80 backdrop-blur-sm px-4 md:px-6 py-3 md:py-4 border-b border-war-gold/15 flex items-center justify-between gap-3 sticky top-0 z-10\">\n        <div>\n          <div className=\"flex items-center gap-2 mb-0.5\">\n            <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n            <p className=\"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold\">Historical Figures</p>\n            <div className=\"w-1.5 h-1.5 rounded-full bg-war-gold/60\" />\n          </div>\n          <h1 className=\"text-war-gold font-display text-lg md:text-xl tracking-wide\">People of 1812</h1>\n        </div>\n        <button\n          onClick={onClose}\n          className=\"px-3 md:px-4 py-2 border border-parchment-dark/15 text-parchment-dark/50 rounded\n                     hover:border-war-gold/40 hover:text-war-gold transition-colors text-xs font-body flex-shrink-0 cursor-pointer\"\n        >\n          Back to Menu\n        </button>\n      </header>\n\n      <div className=\"p-3 md:p-6 max-w-6xl mx-auto\">\n        {/* Filter pills */}\n        <div className=\"flex flex-wrap gap-2 mb-6\">\n          {FACTION_FILTERS.map((f) => (\n            <button\n              key={f.id}\n              onClick={() => setFilter(f.id)}\n              className={`px-4 py-1.5 rounded-full text-xs font-body transition-all cursor-pointer ${\n                filter === f.id\n                  ? 'bg-war-gold/20 border border-war-gold/40 text-war-gold font-bold'\n                  : 'border border-parchment-dark/15 text-parchment-dark/50 hover:border-war-gold/30 hover:text-parchment/70'\n              }`}\n            >\n              {f.label}\n            </button>\n          ))}\n        </div>\n\n        {/* Profile grid */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {filtered.map((profile) => (\n            <button\n              key={profile.id}\n              onClick={() => setSelectedProfile(profile)}\n              className=\"text-left bg-war-navy/50 rounded-lg p-4 border border-parchment-dark/8\n                         hover:border-war-gold/25 hover:bg-war-navy/70 transition-all cursor-pointer group\"\n            >\n              <div className=\"flex items-start justify-between mb-2\">\n                <div>\n                  <h3 className=\"text-parchment/90 font-display text-base tracking-wide group-hover:text-war-gold transition-colors\">\n                    {profile.name}\n                  </h3>\n                  <p className=\"text-parchment-dark/50 text-xs font-body\">{profile.title}</p>\n                </div>\n                {profile.isGameLeader && (\n                  <span className=\"text-war-gold/50 text-[10px] uppercase tracking-widest font-body font-bold border border-war-gold/20 rounded px-1.5 py-0.5 flex-shrink-0\">\n                    Leader\n                  </span>\n                )}\n              </div>\n              {profile.years && (\n                <p className=\"text-parchment-dark/40 text-xs font-body mb-2\">{profile.years}</p>\n              )}\n              <p className=\"text-parchment/60 text-xs font-body leading-relaxed line-clamp-3\">\n                {profile.biography[0]}\n              </p>\n              <div className=\"mt-2 flex items-center gap-2\">\n                <span className=\"text-war-copper/50 text-[10px] uppercase tracking-widest font-body\">\n                  {CATEGORY_LABELS[profile.category] || profile.category}\n                </span>\n              </div>\n            </button>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction ProfileDetail({ profile, onBack, onClose }) {\n  return (\n    <div className=\"min-h-screen\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n      {/* Header */}\n      <header className=\"bg-war-navy/80 backdrop-blur-sm px-4 md:px-6 py-3 md:py-4 border-b border-war-gold/15 flex items-center justify-between gap-3 sticky top-0 z-10\">\n        <div>\n          <p className=\"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold mb-0.5\">\n            {CATEGORY_LABELS[profile.category] || profile.category}\n          </p>\n          <h1 className=\"text-war-gold font-display text-lg md:text-xl tracking-wide\">{profile.name}</h1>\n          <p className=\"text-parchment-dark/40 text-xs font-body\">{profile.title}{profile.years ? ` \\u2022 ${profile.years}` : ''}</p>\n        </div>\n        <div className=\"flex gap-2 flex-shrink-0\">\n          <button\n            onClick={onBack}\n            className=\"px-3 py-2 border border-parchment-dark/15 text-parchment-dark/50 rounded\n                       hover:border-war-gold/40 hover:text-war-gold transition-colors text-xs font-body cursor-pointer\"\n          >\n            All People\n          </button>\n          <button\n            onClick={onClose}\n            className=\"px-3 py-2 border border-parchment-dark/15 text-parchment-dark/50 rounded\n                       hover:border-war-gold/40 hover:text-war-gold transition-colors text-xs font-body cursor-pointer\"\n          >\n            Back to Menu\n          </button>\n        </div>\n      </header>\n\n      <div className=\"p-3 md:p-6 max-w-3xl mx-auto space-y-5\">\n        {profile.isGameLeader && (\n          <div className=\"inline-block bg-war-gold/10 border border-war-gold/20 rounded-full px-3 py-1\">\n            <span className=\"text-war-gold text-xs font-body font-bold\">In-Game Leader</span>\n          </div>\n        )}\n\n        {/* Biography */}\n        <div className=\"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8 space-y-3\">\n          <h2 className=\"text-war-gold/80 font-display text-base tracking-wide border-b border-war-gold/15 pb-2\">Biography</h2>\n          {profile.biography.map((paragraph, i) => (\n            <p key={i} className=\"text-parchment/70 text-sm font-body leading-relaxed\">{paragraph}</p>\n          ))}\n        </div>\n\n        {/* Primary Sources */}\n        {profile.primarySources && profile.primarySources.length > 0 && (\n          <div className=\"bg-war-navy/50 rounded-lg p-5 border border-parchment-dark/8 space-y-3\">\n            <h2 className=\"text-war-gold/80 font-display text-base tracking-wide border-b border-war-gold/15 pb-2\">Primary Sources</h2>\n            {profile.primarySources.map((source, i) => (\n              <div key={i} className=\"bg-war-red/5 border-l-2 border-war-red/20 rounded-r-lg pl-4 py-3 pr-3\">\n                <p className=\"text-parchment/80 text-sm font-body italic leading-relaxed\">\n                  &ldquo;{source.quote}&rdquo;\n                </p>\n                <p className=\"text-parchment-dark/50 text-xs font-body mt-1.5\">\n                  &mdash; {source.attribution}\n                </p>\n                {source.context && (\n                  <p className=\"text-parchment/50 text-xs font-body mt-1.5 pt-1.5 border-t border-parchment-dark/10\">\n                    {source.context}\n                  </p>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Did You Know */}\n        {profile.didYouKnow && (\n          <div className=\"bg-war-red/10 border-l-2 border-war-red/30 rounded-r-lg p-4\">\n            <p className=\"text-war-copper/80 text-xs uppercase tracking-wider mb-1 font-body font-bold\">Did You Know?</p>\n            <p className=\"text-parchment/70 text-sm italic font-body leading-relaxed\">{profile.didYouKnow}</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport LeaderboardPreview from './LeaderboardPreview';\nimport { validateClassCode } from '../lib/supabase';\n\nexport default function NameEntry({\n  onNext,\n  classParam,\n  savedGame,\n  onContinue,\n  onDeleteSave,\n  onExportSave,\n  onImportSave,\n  fontMode,\n  toggleFont,\n}) {\n  const [playerName, setPlayerName] = useState('');\n  const [classPeriod, setClassPeriod] = useState('');\n  const [classCode, setClassCode] = useState(classParam || '');\n  const [classData, setClassData] = useState(null); // { id, name, code } when validated\n  const [classError, setClassError] = useState('');\n  const [validatingCode, setValidatingCode] = useState(false);\n  const [useClassCode, setUseClassCode] = useState(!!classParam);\n  const [confirmingDelete, setConfirmingDelete] = useState(false);\n  const [showLeaderboard, setShowLeaderboard] = useState(false);\n  const [toastMessage, setToastMessage] = useState('');\n\n  const handleValidateCode = async (code) => {\n    if (!code.trim()) {\n      setClassData(null);\n      setClassError('');\n      return;\n    }\n    setValidatingCode(true);\n    setClassError('');\n    const { data, error } = await validateClassCode(code);\n    setValidatingCode(false);\n    if (error) {\n      setClassError('Could not validate code. Try again.');\n    } else if (!data) {\n      setClassError('Code not found  check with your teacher');\n      setClassData(null);\n    } else {\n      setClassData(data);\n      setClassError('');\n    }\n  };\n\n  // Auto-validate classParam on mount\n  useEffect(() => {\n    if (classParam) {\n      handleValidateCode(classParam);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleContinue = () => {\n    if (!playerName.trim()) return;\n    if (useClassCode && classData) {\n      onNext({\n        playerName: playerName.trim(),\n        classPeriod: classData.name,\n        classId: classData.id,\n      });\n    } else {\n      onNext({\n        playerName: playerName.trim(),\n        classPeriod: classPeriod.trim() || 'Unassigned',\n        classId: null,\n      });\n    }\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && playerName.trim()) {\n      handleContinue();\n    }\n  };\n\n  const handleImport = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    try {\n      const text = await file.text();\n      onImportSave(text);\n      setToastMessage('Save imported!');\n      setTimeout(() => setToastMessage(''), 3000);\n    } catch {\n      setToastMessage('Invalid save file.');\n      setTimeout(() => setToastMessage(''), 3000);\n    }\n    e.target.value = '';\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n      <div className=\"max-w-2xl w-full\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-4xl md:text-5xl font-display text-war-gold tracking-wide mb-3\">\n            War of 1812\n          </h1>\n          <p className=\"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold\">\n            Rise of the Nation\n          </p>\n        </div>\n\n        {/* Main Card */}\n        <div className=\"bg-war-navy border border-war-gold/20 rounded-lg p-6 md:p-8 shadow-modal animate-fadein\">\n          <h2 className=\"text-xl font-display text-war-gold/80 mb-6 tracking-wide border-b border-war-gold/15 pb-3\">\n            Identify Yourself, Commander\n          </h2>\n\n          {/* Name Input */}\n          <div className=\"mb-4\">\n            <label className=\"block text-parchment/60 text-xs uppercase tracking-wider mb-1.5 font-body font-bold\">\n              Commander&apos;s Name <span className=\"text-war-red/60\">*</span>\n            </label>\n            <input\n              type=\"text\"\n              value={playerName}\n              onChange={(e) => setPlayerName(e.target.value.slice(0, 30))}\n              onKeyDown={handleKeyDown}\n              placeholder=\"Enter your name\"\n              className=\"w-full bg-war-ink/50 border border-parchment-dark/15 rounded px-4 py-3 text-parchment/90\n                         placeholder-parchment-dark/30 font-body focus:border-war-gold/40 focus:outline-none transition-colors\"\n              autoFocus\n            />\n          </div>\n\n          {/* Class Code / Period Input */}\n          <div className=\"mb-6\">\n            {useClassCode ? (\n              <>\n                <label className=\"block text-parchment/60 text-xs uppercase tracking-wider mb-1.5 font-body font-bold\">\n                  Class Code <span className=\"text-parchment-dark/30\">(from your teacher)</span>\n                </label>\n                <div className=\"flex gap-2\">\n                  <input\n                    type=\"text\"\n                    value={classCode}\n                    onChange={(e) => {\n                      const val = e.target.value.toUpperCase().slice(0, 6);\n                      setClassCode(val);\n                      if (val.length === 6) handleValidateCode(val);\n                      else { setClassData(null); setClassError(''); }\n                    }}\n                    onKeyDown={handleKeyDown}\n                    placeholder=\"e.g., ABC123\"\n                    maxLength={6}\n                    className=\"flex-1 bg-war-ink/50 border border-parchment-dark/15 rounded px-4 py-3 text-parchment/90\n                               placeholder-parchment-dark/30 font-body font-mono tracking-widest text-center uppercase\n                               focus:border-war-gold/40 focus:outline-none transition-colors\"\n                  />\n                </div>\n                {validatingCode && (\n                  <p className=\"text-parchment-dark/40 text-xs mt-1.5 font-body italic\">Checking code...</p>\n                )}\n                {classError && (\n                  <p className=\"text-red-400 text-xs mt-1.5 font-body\">{classError}</p>\n                )}\n                {classData && (\n                  <p className=\"text-green-400 text-xs mt-1.5 font-body\">\n                    Joined: {classData.name}\n                  </p>\n                )}\n                <button\n                  type=\"button\"\n                  onClick={() => { setUseClassCode(false); setClassData(null); setClassError(''); }}\n                  className=\"text-parchment-dark/40 text-xs font-body mt-2 hover:text-parchment/60 transition-colors cursor-pointer\"\n                >\n                  No class code? Enter period instead\n                </button>\n              </>\n            ) : (\n              <>\n                <label className=\"block text-parchment/60 text-xs uppercase tracking-wider mb-1.5 font-body font-bold\">\n                  Class Period <span className=\"text-parchment-dark/30\">(optional)</span>\n                </label>\n                <input\n                  type=\"text\"\n                  value={classPeriod}\n                  onChange={(e) => setClassPeriod(e.target.value.slice(0, 10))}\n                  onKeyDown={handleKeyDown}\n                  placeholder=\"e.g., Period 3\"\n                  className=\"w-full bg-war-ink/50 border border-parchment-dark/15 rounded px-4 py-3 text-parchment/90\n                             placeholder-parchment-dark/30 font-body focus:border-war-gold/40 focus:outline-none transition-colors\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setUseClassCode(true)}\n                  className=\"text-parchment-dark/40 text-xs font-body mt-2 hover:text-parchment/60 transition-colors cursor-pointer\"\n                >\n                  Have a class code? Enter it here\n                </button>\n              </>\n            )}\n          </div>\n\n          {/* Continue Button */}\n          <button\n            onClick={handleContinue}\n            disabled={!playerName.trim() || (useClassCode && classCode.trim() && !classData)}\n            className={`w-full py-4 font-display text-lg rounded-lg font-bold tracking-wider transition-colors\n                       shadow-copper ${playerName.trim() && !(useClassCode && classCode.trim() && !classData)\n                         ? 'bg-war-gold text-war-ink hover:bg-war-brass cursor-pointer'\n                         : 'bg-parchment-dark/20 text-parchment-dark/40 cursor-not-allowed'}`}\n          >\n            Continue\n          </button>\n        </div>\n\n        {/* Saved Game Card */}\n        {savedGame && (\n          <div className=\"mt-6 bg-war-navy border border-war-gold/20 rounded-lg p-5 shadow-modal animate-fadein\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"text-war-gold/80 font-display text-sm tracking-wide\">Saved Campaign</h3>\n              <span className=\"text-parchment-dark/40 text-xs font-body\">{savedGame.timestamp ? new Date(savedGame.timestamp).toLocaleDateString() : ''}</span>\n            </div>\n            <p className=\"text-parchment/70 text-sm font-body mb-3\">\n              {savedGame.playerName} &mdash; {savedGame.faction === 'us' ? 'United States' : savedGame.faction === 'british' ? 'British/Canada' : 'Native Coalition'} &mdash; Round {savedGame.round}, {savedGame.season}\n            </p>\n            <div className=\"flex flex-wrap gap-2\">\n              <button\n                onClick={onContinue}\n                className=\"px-4 py-2 bg-war-gold text-war-ink font-display text-xs rounded font-bold\n                           hover:bg-war-brass transition-colors cursor-pointer tracking-wide\"\n              >\n                Continue Campaign\n              </button>\n              {confirmingDelete ? (\n                <div className=\"flex gap-1\">\n                  <button onClick={() => { onDeleteSave(); setConfirmingDelete(false); }}\n                    className=\"px-3 py-2 bg-war-red/80 text-parchment font-display text-xs rounded font-bold\n                               hover:bg-war-red transition-colors cursor-pointer tracking-wide\">\n                    Confirm Delete\n                  </button>\n                  <button onClick={() => setConfirmingDelete(false)}\n                    className=\"px-3 py-2 border border-parchment-dark/20 text-parchment-dark/60 font-display text-xs rounded\n                               hover:border-war-gold/40 transition-colors cursor-pointer\">\n                    Cancel\n                  </button>\n                </div>\n              ) : (\n                <button onClick={() => setConfirmingDelete(true)}\n                  className=\"px-3 py-2 border border-parchment-dark/20 text-parchment-dark/60 font-display text-xs rounded\n                             hover:border-war-red/40 hover:text-war-red/80 transition-colors cursor-pointer tracking-wide\">\n                  Delete\n                </button>\n              )}\n              <button onClick={onExportSave}\n                className=\"px-3 py-2 border border-parchment-dark/20 text-parchment-dark/60 font-display text-xs rounded\n                           hover:border-war-gold/40 hover:text-parchment transition-colors cursor-pointer tracking-wide\">\n                Export\n              </button>\n              <label className=\"px-3 py-2 border border-parchment-dark/20 text-parchment-dark/60 font-display text-xs rounded\n                           hover:border-war-gold/40 hover:text-parchment transition-colors cursor-pointer tracking-wide\">\n                Import\n                <input type=\"file\" accept=\".json\" onChange={handleImport} className=\"hidden\" />\n              </label>\n            </div>\n          </div>\n        )}\n\n        {/* Toast */}\n        {toastMessage && (\n          <div className=\"mt-4 text-center text-parchment/70 text-sm font-body animate-fadein\">{toastMessage}</div>\n        )}\n\n        {/* Leaderboard Preview */}\n        <div className=\"mt-6\">\n          <LeaderboardPreview onViewFull={() => setShowLeaderboard(true)} />\n        </div>\n\n        {/* Font Toggle */}\n        <div className=\"mt-6 text-center\">\n          <button\n            onClick={toggleFont}\n            className=\"text-parchment-dark/40 text-xs font-body hover:text-parchment/60 transition-colors cursor-pointer\"\n          >\n            {fontMode === 'dyslexic' ? 'Switch to Standard Font' : 'Switch to OpenDyslexic Font'}\n          </button>\n        </div>\n\n        {showLeaderboard && (\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm\"\n               onClick={() => setShowLeaderboard(false)}>\n            <div className=\"bg-war-navy border border-war-gold/30 rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto shadow-modal\"\n                 onClick={(e) => e.stopPropagation()}>\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-war-gold font-display text-xl tracking-wide\">Leaderboard</h2>\n                <button onClick={() => setShowLeaderboard(false)}\n                  className=\"text-parchment-dark/40 hover:text-parchment/70 transition-colors cursor-pointer text-xl\">&times;</button>\n              </div>\n              <LeaderboardPreview fullMode />\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","/**\n * AI difficulty configuration overrides.\n * Medium values match current AI_CONFIG exactly (baseline).\n * Only parameters that differ from the base AI_CONFIG are listed per difficulty.\n */\n\nexport const DIFFICULTY_CONFIGS = {\n  easy: {\n    BASE_REINFORCEMENTS: 2,\n    MAX_ATTACKS_PER_TURN: 2,\n    MIN_ATTACK_PROBABILITY: 0.55,\n    CONCENTRATION_RATIO: 0.2,\n    TOP_N_ATTACK_CHOICES: 5,\n    ATTACK_PROBABILITY_WEIGHT: 8,\n    ATTACK_FORT_PENALTY: 5,\n    MAX_TROOPS_TO_MOVE: 1,\n    MAX_MANEUVERS: 1,\n  },\n  medium: {\n    // No overrides  uses base AI_CONFIG values as-is\n  },\n  hard: {\n    BASE_REINFORCEMENTS: 6,\n    MAX_ATTACKS_PER_TURN: 7,\n    MIN_ATTACK_PROBABILITY: 0.15,\n    CONCENTRATION_RATIO: 0.6,\n    TOP_N_ATTACK_CHOICES: 1,\n    ATTACK_PROBABILITY_WEIGHT: 2,\n    ATTACK_FORT_PENALTY: 1,\n    MAX_TROOPS_TO_MOVE: 5,\n    MAX_MANEUVERS: 5,\n  },\n};\n\nexport const DIFFICULTY_LABELS = {\n  easy: { name: 'Learning', description: 'The AI takes it easy. Good for learning the game.' },\n  medium: { name: 'Balanced', description: 'A fair challenge. The AI plays smart.' },\n  hard: { name: 'Commander', description: 'The AI is aggressive and relentless. For experienced players.' },\n};\n","import React, { useState } from 'react';\nimport { DIFFICULTY_LABELS } from '../data/difficultySettings';\n\nconst difficulties = ['easy', 'medium', 'hard'];\n\nconst difficultyColors = {\n  easy: { border: 'border-green-500/30', bg: 'bg-green-900/10', accent: 'text-green-400' },\n  medium: { border: 'border-war-gold/30', bg: 'bg-war-gold/10', accent: 'text-war-gold' },\n  hard: { border: 'border-red-500/30', bg: 'bg-red-900/10', accent: 'text-red-400' },\n};\n\nexport default function DifficultySelect({ onNext, playerName, fontMode, toggleFont }) {\n  const [difficulty, setDifficulty] = useState('medium');\n  const [gameMode, setGameMode] = useState('historian');\n\n  const handleContinue = () => {\n    onNext({ difficulty, gameMode });\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n      <div className=\"max-w-3xl w-full\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <p className=\"text-war-copper text-xs tracking-[0.2em] uppercase font-body font-bold mb-2\">\n            Welcome, {playerName}\n          </p>\n          <h1 className=\"text-3xl md:text-4xl font-display text-war-gold tracking-wide mb-2\">\n            Choose Your Challenge\n          </h1>\n          <p className=\"text-parchment-dark/50 text-sm font-body\">\n            Select how tough you want the AI opponent to be.\n          </p>\n        </div>\n\n        {/* Difficulty Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\n          {difficulties.map((d) => {\n            const label = DIFFICULTY_LABELS[d];\n            const colors = difficultyColors[d];\n            const selected = difficulty === d;\n            return (\n              <button\n                key={d}\n                onClick={() => setDifficulty(d)}\n                className={`p-6 rounded-lg border-2 transition-all cursor-pointer text-left\n                  ${selected\n                    ? `${colors.border} ${colors.bg} shadow-modal`\n                    : 'border-parchment-dark/10 bg-war-navy/50 hover:border-parchment-dark/25'\n                  }`}\n              >\n                <h3 className={`font-display text-xl mb-2 tracking-wide ${selected ? colors.accent : 'text-parchment/70'}`}>\n                  {label.name}\n                </h3>\n                <p className={`text-sm font-body leading-relaxed ${selected ? 'text-parchment/70' : 'text-parchment-dark/50'}`}>\n                  {label.description}\n                </p>\n                {d === 'medium' && (\n                  <span className=\"inline-block mt-3 text-xs font-body text-war-gold/50 uppercase tracking-wider\">\n                    Recommended\n                  </span>\n                )}\n              </button>\n            );\n          })}\n        </div>\n\n        {/* Explorer/Historian Toggle */}\n        <div className=\"bg-war-navy border border-war-gold/20 rounded-lg p-6 shadow-modal mb-8\">\n          <h2 className=\"text-war-gold/80 font-display text-sm mb-4 tracking-wide border-b border-war-gold/15 pb-2\">\n            Reading Level\n          </h2>\n          <div className=\"flex gap-3\">\n            <button\n              onClick={() => setGameMode('historian')}\n              className={`flex-1 py-3 px-4 rounded-lg font-display text-sm tracking-wide transition-all cursor-pointer border\n                ${gameMode === 'historian'\n                  ? 'bg-war-gold/15 border-war-gold/40 text-war-gold font-bold'\n                  : 'border-parchment-dark/15 text-parchment-dark/50 hover:border-parchment-dark/30'\n                }`}\n            >\n              <span className=\"block text-base mb-1\">Historian Mode</span>\n              <span className=\"block text-xs font-body font-normal opacity-70\">Full detail &mdash; 8th grade reading level</span>\n            </button>\n            <button\n              onClick={() => setGameMode('explorer')}\n              className={`flex-1 py-3 px-4 rounded-lg font-display text-sm tracking-wide transition-all cursor-pointer border\n                ${gameMode === 'explorer'\n                  ? 'bg-war-gold/15 border-war-gold/40 text-war-gold font-bold'\n                  : 'border-parchment-dark/15 text-parchment-dark/50 hover:border-parchment-dark/30'\n                }`}\n            >\n              <span className=\"block text-base mb-1\">Explorer Mode</span>\n              <span className=\"block text-xs font-body font-normal opacity-70\">Simplified text &mdash; 3rd grade reading level</span>\n            </button>\n          </div>\n        </div>\n\n        {/* Continue Button */}\n        <button\n          onClick={handleContinue}\n          className=\"w-full py-4 bg-war-gold text-war-ink font-display text-lg rounded-lg font-bold tracking-wider\n                     hover:bg-war-brass transition-colors cursor-pointer shadow-copper\"\n        >\n          Continue\n        </button>\n\n        {/* Font Toggle */}\n        {toggleFont && (\n          <div className=\"mt-6 text-center\">\n            <button\n              onClick={toggleFont}\n              className=\"text-parchment-dark/40 text-xs font-body hover:text-parchment/60 transition-colors cursor-pointer\"\n            >\n              {fontMode === 'dyslexic' ? 'Switch to Standard Font' : 'Switch to OpenDyslexic Font'}\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default class ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      errorCount: 0,\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n\n    this.setState({\n      error,\n      errorInfo,\n      errorCount: this.state.errorCount + 1,\n    });\n\n    try {\n      const errorLog = JSON.parse(localStorage.getItem('war1812_error_log') || '[]');\n      errorLog.push({\n        timestamp: Date.now(),\n        error: error.toString(),\n        componentStack: errorInfo.componentStack,\n        section: this.props.section || 'unknown',\n      });\n      if (errorLog.length > 10) errorLog.shift();\n      localStorage.setItem('war1812_error_log', JSON.stringify(errorLog));\n    } catch (e) {\n      console.error('Failed to log error to localStorage:', e);\n    }\n  }\n\n  handleRestoreLastSave = () => {\n    const { onRestoreSave } = this.props;\n    if (onRestoreSave) {\n      this.setState({\n        hasError: false,\n        error: null,\n        errorInfo: null,\n      });\n      onRestoreSave();\n    } else {\n      window.location.reload();\n    }\n  };\n\n  handleStartNewGame = () => {\n    const { onStartNewGame } = this.props;\n\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    });\n\n    if (onStartNewGame) {\n      onStartNewGame();\n    } else {\n      localStorage.removeItem('war1812_save');\n      window.location.reload();\n    }\n  };\n\n  handleExportSave = () => {\n    try {\n      const saveData = localStorage.getItem('war1812_save');\n      if (!saveData) {\n        this.setState({ toastMessage: 'No save file found to export.' });\n        return;\n      }\n\n      const blob = new Blob([saveData], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `war1812_save_${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n\n      this.setState({ toastMessage: 'Save file downloaded!' });\n    } catch (error) {\n      console.error('Failed to export save:', error);\n      this.setState({ toastMessage: 'Failed to export save file.' });\n    }\n  };\n\n  handleToggleDetails = () => {\n    this.setState(prev => ({ showDetails: !prev.showDetails }));\n  };\n\n  render() {\n    if (this.state.hasError) {\n      const { section = 'game', showExportButton = true } = this.props;\n      const hasSavedGame = !!localStorage.getItem('war1812_save');\n\n      return (\n        <div className=\"w-full h-full flex items-center justify-center p-4\" style={{ background: 'radial-gradient(ellipse at center, rgba(20,30,48,1) 0%, rgba(10,10,8,1) 100%)' }}>\n          <div className=\"w-full max-w-2xl bg-war-navy border border-war-red/30 shadow-modal rounded-lg overflow-hidden animate-fadein\">\n            {/* Header */}\n            <div className=\"px-6 py-4 border-b border-war-red/20\" style={{\n              background: 'linear-gradient(135deg, rgba(139,26,26,0.4) 0%, rgba(20,30,48,0.95) 100%)',\n            }}>\n              <div className=\"flex items-center gap-2 mb-1\">\n                <div className=\"w-1.5 h-1.5 rounded-full bg-red-500/80\" />\n                <p className=\"text-red-400/80 text-xs tracking-[0.2em] uppercase font-body font-bold\">Error</p>\n              </div>\n              <h2 className=\"text-parchment font-display text-xl tracking-wide\">\n                Something Went Wrong\n              </h2>\n              <p className=\"text-parchment-dark/50 text-xs mt-1 font-body\">\n                The {section} encountered an unexpected error\n              </p>\n            </div>\n\n            {/* Toast notification */}\n            {this.state.toastMessage && (\n              <div className=\"mx-6 mt-4 px-4 py-2.5 bg-war-gold/10 border border-war-gold/25 rounded text-parchment/80 text-sm font-body animate-fadein\" role=\"status\">\n                {this.state.toastMessage}\n              </div>\n            )}\n\n            {/* Body */}\n            <div className=\"px-6 py-6 space-y-4\">\n              <p className=\"text-parchment/70 text-sm leading-relaxed font-body\">\n                Don't worry! Your progress may have been auto-saved. You can try to restore your last save or start a fresh game.\n              </p>\n\n              {/* Error count warning */}\n              {this.state.errorCount > 1 && (\n                <div className=\"bg-war-red/10 border-l-2 border-war-red/40 px-4 py-3 rounded-r\">\n                  <p className=\"text-parchment/70 text-sm font-body\">\n                    <strong>Warning:</strong> This error has occurred {this.state.errorCount} times.\n                    If it persists, try starting a new game or refreshing your browser.\n                  </p>\n                </div>\n              )}\n\n              {/* Action buttons */}\n              <div className=\"flex flex-col gap-3 mt-6\">\n                {hasSavedGame && (\n                  <button\n                    onClick={this.handleRestoreLastSave}\n                    className=\"w-full px-6 py-3 bg-war-navy border border-war-gold/30 text-parchment/80 font-display text-sm\n                              rounded tracking-wide hover:border-war-gold/50 hover:text-parchment\n                              transition-all cursor-pointer\"\n                  >\n                    Restore Last Save\n                  </button>\n                )}\n\n                <button\n                  onClick={this.handleStartNewGame}\n                  className=\"w-full px-6 py-3 bg-war-gold text-war-ink font-display text-sm\n                            rounded font-bold tracking-wide hover:bg-war-brass\n                            transition-colors cursor-pointer shadow-copper\"\n                >\n                  Start New Game\n                </button>\n\n                {showExportButton && hasSavedGame && (\n                  <button\n                    onClick={this.handleExportSave}\n                    className=\"w-full px-6 py-3 border border-parchment-dark/15 text-parchment-dark/50 font-body text-sm\n                              rounded hover:border-parchment-dark/30 hover:text-parchment-dark/70\n                              transition-all cursor-pointer\"\n                  >\n                    Export Save File (Backup)\n                  </button>\n                )}\n              </div>\n\n              {/* Technical details (collapsible) */}\n              <div className=\"mt-6 pt-4 border-t border-parchment-dark/10\">\n                <button\n                  onClick={this.handleToggleDetails}\n                  className=\"text-parchment-dark/40 text-xs underline hover:text-parchment-dark/60 cursor-pointer font-body\"\n                >\n                  {this.state.showDetails ? 'Hide' : 'Show'} Technical Details\n                </button>\n\n                {this.state.showDetails && this.state.error && (\n                  <div className=\"mt-3 bg-war-ink/50 rounded p-4 overflow-auto max-h-64 border border-parchment-dark/8\">\n                    <p className=\"text-red-400/80 font-mono text-xs mb-2\">\n                      <strong>Error:</strong> {this.state.error.toString()}\n                    </p>\n                    {this.state.errorInfo && (\n                      <pre className=\"text-parchment-dark/40 font-mono text-xs whitespace-pre-wrap\">\n                        {this.state.errorInfo.componentStack}\n                      </pre>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              {/* Help text */}\n              <div className=\"mt-4 bg-black/15 rounded px-4 py-3 border-l-2 border-war-gold/20\">\n                <p className=\"text-parchment-dark/40 text-xs font-body\">\n                  <strong className=\"text-parchment-dark/60\">For Teachers:</strong> Error logs are saved locally and can be reviewed in the browser console.\n                  Students should report persistent errors with the date/time they occurred.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","/**\n * Historical Event Cards for War of 1812\n *\n * Each card has:\n * - id: unique key\n * - title: short event name\n * - year: when it happened historically\n * - description: 1-2 sentence historical context\n * - didYouKnow: educational \"Did You Know?\" blurb for deeper learning\n * - primarySource: { quote, attribution }  optional historical quote from the era\n * - effect: game mechanic description shown to player\n * - apply(gameState): function that returns state mutations\n * - round: which rounds this card can appear (null = any)\n */\n\nconst eventCards = [\n  //  1812 Events (Rounds 1-4) \n  {\n    id: 'chesapeake_affair',\n    title: 'The Chesapeake-Leopard Affair Remembered',\n    year: 1807,\n    description:\n      'The memory of HMS Leopard firing on USS Chesapeake still burns. Anti-British sentiment fuels recruitment.',\n    didYouKnow:\n      'In 1807, HMS Leopard fired on the unprepared USS Chesapeake just off the Virginia coast, killing 3 and wounding 18. The British boarded and seized 4 sailors they claimed were deserters. Americans were outraged, but President Jefferson chose economic pressure over war  a decision that only delayed the conflict.',\n    primarySource: {\n      quote: 'This affair has produced a great sensation... The feeling of independence is very strong and will, I think, be called into action.',\n      attribution: 'Senator Samuel Smith of Maryland, 1807',\n    },\n    effect: 'US gains +2 troops in Chesapeake territory. +5 Nationalism (US player).',\n    simpleDescription: 'A British warship attacked an American ship in 1807. Americans were very angry about it.',\n    simpleDidYouKnow: 'Three Americans were killed and 18 were hurt in the attack. The British boarded the ship and took 4 sailors they said were runaways.',\n    simpleEffect: 'The US gets 2 extra troops near Chesapeake and people feel more patriotic.',\n    roundRange: [1, 3],\n    apply: ({ territoryOwners, playerFaction }) => ({\n      troopBonus: { faction: 'us', count: 2, theater: 'Chesapeake' },\n      nationalismChange: playerFaction === 'us' ? 5 : 0,\n    }),\n    quiz: {\n      question: 'How many American sailors were killed when HMS Leopard fired on USS Chesapeake in 1807?',\n      choices: ['3 killed, 18 wounded', '15 killed, 50 wounded', '1 killed, 3 wounded', 'No casualties occurred'],\n      correctIndex: 0,\n      explanation: 'The attack killed 3 American sailors and wounded 18. The British then boarded and seized 4 sailors they claimed were deserters, fueling outrage that led toward the War of 1812.',\n      simpleQuestion: 'How many American sailors died when the British ship attacked the Chesapeake?',\n      simpleChoices: ['3 died, 18 hurt', '15 died, 50 hurt', '1 died, 3 hurt', 'Nobody was hurt'],\n      simpleExplanation: 'The British attack killed 3 American sailors and hurt 18 more. They also took 4 sailors off the ship. Americans were furious about this attack.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'war_hawks',\n    title: 'War Hawks Demand Action',\n    year: 1812,\n    description:\n      'Henry Clay, John C. Calhoun, and the War Hawks in Congress push for aggressive expansion into Canada.',\n    didYouKnow:\n      'Henry Clay of Kentucky became Speaker of the House at just 34 years old and used the position to stack committees with pro-war members. The War Hawks believed conquering Canada would be, as Thomas Jefferson predicted, \"a mere matter of marching.\" They were very wrong.',\n    primarySource: {\n      quote: 'The conquest of Canada is in your power. I trust I shall not be deemed presumptuous when I state that I verily believe that the militia of Kentucky are alone competent to place Montreal and Upper Canada at your feet.',\n      attribution: 'Henry Clay, speech in the U.S. Senate, February 1810',\n    },\n    effect: 'US gains +3 troops on Great Lakes border territories.',\n    simpleDescription: 'A group in Congress called the War Hawks wanted to invade Canada. They thought it would be easy.',\n    simpleDidYouKnow: 'Thomas Jefferson said taking Canada would be as easy as marching. Henry Clay became Speaker of the House at just 34 years old and pushed hard for war.',\n    simpleEffect: 'The US gets 3 extra troops near the Great Lakes border.',\n    roundRange: [1, 2],\n    apply: () => ({\n      troopBonus: { faction: 'us', count: 3, theater: 'Great Lakes' },\n    }),\n    quiz: {\n      question: 'What did Thomas Jefferson predict about conquering Canada?',\n      choices: [\n        'It would be \"a mere matter of marching\"',\n        'It would require a navy of 100 ships',\n        'It would take at least 10 years',\n        'It was impossible without French support',\n      ],\n      correctIndex: 0,\n      explanation: 'Jefferson famously predicted conquering Canada would be \"a mere matter of marching,\" reflecting the War Hawks\\' overconfidence. The actual invasions of Canada largely failed.',\n      simpleQuestion: 'What did Thomas Jefferson say about taking over Canada?',\n      simpleChoices: [\n        'He said it would be as easy as marching',\n        'He said they would need 100 ships',\n        'He said it would take 10 years',\n        'He said they needed help from France',\n      ],\n      simpleExplanation: 'Jefferson thought taking Canada would be very easy. He was wrong. The Americans tried to invade Canada many times and mostly failed.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'hulls_surrender',\n    title: \"Hull's Surrender at Detroit\",\n    year: 1812,\n    description:\n      'General William Hull surrenders Fort Detroit to the British without a fight, shocking the nation.',\n    didYouKnow:\n      'General Brock sent Hull a message warning that once fighting began, he could not control his Native allies. Terrified of a massacre, Hull surrendered 2,500 troops to a force of only 1,300. He was later court-martialed and sentenced to death, though President Madison pardoned him due to his Revolutionary War service.',\n    primarySource: {\n      quote: 'The force at my disposal does not exceed seven hundred... but the very circumstance of an enemy being in force upon your territory, I am persuaded, will be the signal for every man to quit his plow for the sword.',\n      attribution: 'Major General Isaac Brock, message to General Hull, August 1812',\n    },\n    effect: 'Detroit defenders lose 2 troops. Nationalism drops if US controls Detroit.',\n    simpleDescription: 'General Hull gave up Fort Detroit to the British without even fighting. The whole country was shocked.',\n    simpleDidYouKnow: 'Hull surrendered 2,500 soldiers to only 1,300 British troops because he was scared. He was put on trial, but President Madison let him go.',\n    simpleEffect: 'Detroit loses 2 troops. Americans feel less patriotic if they own Detroit.',\n    roundRange: [1, 3],\n    apply: ({ territoryOwners }) => ({\n      troopPenalty: { territory: 'detroit', count: 2 },\n      nationalismChange: territoryOwners.detroit === 'us' ? -5 : 0,\n    }),\n    quiz: {\n      question: 'What happened to General Hull after surrendering Detroit?',\n      choices: [\n        'He was court-martialed and sentenced to death, but pardoned by President Madison',\n        'He was promoted for saving his soldiers\\' lives',\n        'He defected to the British army',\n        'He was immediately executed for treason',\n      ],\n      correctIndex: 0,\n      explanation: 'Hull was court-martialed for cowardice and sentenced to death, but President Madison pardoned him due to his Revolutionary War service. He had surrendered 2,500 troops to a force of only 1,300.',\n      simpleQuestion: 'What happened to General Hull after he gave up Detroit?',\n      simpleChoices: [\n        'He was put on trial but the President let him go',\n        'He got a promotion for keeping soldiers safe',\n        'He joined the British army',\n        'He was punished right away',\n      ],\n      simpleExplanation: 'Hull was put on trial for giving up without a fight. He was supposed to be punished, but President Madison forgave him. Hull had fought in the Revolutionary War before.',\n      reward: { nationalism: 3 },\n      penalty: { troops: -1 },\n    },\n  },\n  {\n    id: 'tecumseh_alliance',\n    title: \"Tecumseh's Alliance with Britain\",\n    year: 1812,\n    description:\n      'Tecumseh forges a powerful alliance with British forces, uniting Native warriors across the frontier.',\n    didYouKnow:\n      'Tecumseh traveled thousands of miles  from the Great Lakes to the Gulf Coast  recruiting nations into his confederacy. He was one of the most gifted orators and military strategists of his era. British General Brock said of him: \"A more sagacious or a more gallant Warrior does not I believe exist.\"',\n    primarySource: {\n      quote: 'Where today are the Pequot? Where are the Narragansett, the Mohican, the Pocanet, and many other once powerful tribes of our people? They have vanished before the avarice and the oppression of the White Man, as snow before a summer sun.',\n      attribution: 'Tecumseh, speech to the Osage, 1811',\n    },\n    effect: 'Native Coalition gains +2 troops in their territories.',\n    simpleDescription: 'Tecumseh joined forces with the British. He brought together many Native nations to fight together.',\n    simpleDidYouKnow: 'Tecumseh traveled thousands of miles to ask different Native nations to work together. British General Brock said Tecumseh was the bravest warrior he ever saw.',\n    simpleEffect: 'The Native Coalition gets 2 extra troops in their lands.',\n    roundRange: [1, 4],\n    apply: ({ territoryOwners }) => {\n      // Only add troops to territories the Native faction actually owns\n      const nativeTerrs = ['indiana_territory', 'creek_nation'].filter(\n        (id) => territoryOwners[id] === 'native'\n      );\n      if (nativeTerrs.length === 0) return {};\n      return { troopBonus: { faction: 'native', count: 2, territories: nativeTerrs } };\n    },\n    quiz: {\n      question: 'What did British General Brock say about Tecumseh?',\n      choices: [\n        '\"A more sagacious or a more gallant Warrior does not I believe exist\"',\n        '\"He is a dangerous savage who cannot be trusted\"',\n        '\"His warriors fight bravely but lack discipline\"',\n        '\"He would make a fine British officer\"',\n      ],\n      correctIndex: 0,\n      explanation: 'Brock was deeply impressed by Tecumseh\\'s military genius and leadership. Tecumseh traveled thousands of miles recruiting nations into his confederacy, making him one of the most gifted leaders of his era.',\n      simpleQuestion: 'What did British General Brock think about Tecumseh?',\n      simpleChoices: [\n        'He said Tecumseh was the bravest warrior he ever saw',\n        'He called Tecumseh dangerous and untrustworthy',\n        'He said Tecumseh\\'s fighters lacked training',\n        'He wanted Tecumseh to become a British officer',\n      ],\n      simpleExplanation: 'General Brock thought Tecumseh was an amazing leader and warrior. Tecumseh traveled thousands of miles to bring Native nations together. He was one of the greatest leaders of his time.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'constitution_guerriere',\n    title: 'USS Constitution vs HMS Guerriere',\n    year: 1812,\n    description:\n      '\"Old Ironsides\" defeats HMS Guerriere in a stunning frigate action, proving American naval capability.',\n    didYouKnow:\n      'USS Constitution\\'s hull was made of dense Southern live oak, up to 21 inches thick. During the battle, British cannonballs literally bounced off her sides, leading a sailor to cry \"Huzza! Her sides are made of iron!\" The ship is still afloat today in Boston Harbor  the oldest commissioned warship still afloat in the world.',\n    primarySource: {\n      quote: 'Huzza! Her sides are made of iron!',\n      attribution: 'Unnamed sailor aboard USS Constitution, August 19, 1812',\n    },\n    effect: '+5 Nationalism. British loses 1 troop on Atlantic Sea Lanes.',\n    simpleDescription: 'The American ship \"Old Ironsides\" beat a British warship. Cannonballs bounced off its thick wooden sides!',\n    simpleDidYouKnow: 'The USS Constitution is still floating in Boston Harbor today. It is the oldest warship still in the water.',\n    simpleEffect: 'Americans feel more patriotic. The British lose 1 troop at sea.',\n    roundRange: [2, 4],\n    apply: ({ territoryOwners }) => ({\n      nationalismChange: 5,\n      troopPenalty: territoryOwners.atlantic_sea_lanes === 'british'\n        ? { territory: 'atlantic_sea_lanes', count: 1 }\n        : null,\n    }),\n    quiz: {\n      question: 'Why was USS Constitution nicknamed \"Old Ironsides\"?',\n      choices: [\n        'British cannonballs bounced off her thick live oak hull',\n        'She was plated with iron armor',\n        'Her crew wore iron helmets in battle',\n        'She was painted iron-gray for camouflage',\n      ],\n      correctIndex: 0,\n      explanation: 'Constitution\\'s hull was made of dense Southern live oak, up to 21 inches thick. During battle, cannonballs literally bounced off, leading a sailor to cry \"Her sides are made of iron!\" She is still afloat today in Boston Harbor.',\n      simpleQuestion: 'Why did people call the ship \"Old Ironsides\"?',\n      simpleChoices: [\n        'Cannonballs bounced off its very thick wooden walls',\n        'It was covered in iron plates',\n        'The crew wore iron helmets',\n        'It was painted to look like iron',\n      ],\n      simpleExplanation: 'The ship was made of very thick oak wood. Cannonballs bounced right off! A sailor yelled \"Her sides are made of iron!\" The ship is still in Boston Harbor today.',\n      reward: { nationalism: 3 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'fort_dearborn_massacre',\n    title: 'Fort Dearborn Massacre',\n    year: 1812,\n    description:\n      'Potawatomi warriors attack the evacuating garrison of Fort Dearborn, killing soldiers and civilians.',\n    didYouKnow:\n      'Fort Dearborn stood where downtown Chicago is today. When Hull surrendered Detroit, he ordered Fort Dearborn evacuated. As the garrison marched out, Potawatomi warriors attacked. About 52 soldiers and civilians were killed. The event became a rallying cry for American frontier settlers demanding military protection.',\n    effect: 'Fort Dearborn loses 2 troops. Native gains +1 troop in Indiana Territory.',\n    simpleDescription: 'Soldiers leaving Fort Dearborn were attacked. About 52 people were killed.',\n    simpleDidYouKnow: 'Fort Dearborn was in the same spot where downtown Chicago is today.',\n    simpleEffect: 'Fort Dearborn loses 2 troops. Native fighters gain 1 troop nearby.',\n    roundRange: [1, 3],\n    apply: ({ territoryOwners }) => {\n      const effects = { troopPenalty: { territory: 'fort_dearborn', count: 2 } };\n      if (territoryOwners.indiana_territory === 'native') {\n        effects.troopBonus = { faction: 'native', count: 1, territories: ['indiana_territory'] };\n      }\n      return effects;\n    },\n    quiz: {\n      question: 'Where was Fort Dearborn located (in modern terms)?',\n      choices: [\n        'Where downtown Chicago stands today',\n        'In present-day Detroit, Michigan',\n        'Near modern Buffalo, New York',\n        'On the coast of Virginia',\n      ],\n      correctIndex: 0,\n      explanation: 'Fort Dearborn stood where downtown Chicago is today. When Hull surrendered Detroit, he ordered the fort evacuated. About 52 soldiers and civilians were killed in the subsequent attack.',\n      simpleQuestion: 'Where was Fort Dearborn? What city is there now?',\n      simpleChoices: [\n        'Where Chicago is today',\n        'Where Detroit is today',\n        'Where Buffalo is today',\n        'On the coast of Virginia',\n      ],\n      simpleExplanation: 'Fort Dearborn stood right where downtown Chicago is today. When the soldiers tried to leave, they were attacked. About 52 people were killed.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'queenston_heights',\n    title: 'Battle of Queenston Heights',\n    year: 1812,\n    description:\n      'British and Canadian forces repel an American invasion across the Niagara River. General Brock is killed but becomes a national hero.',\n    didYouKnow:\n      'Brock was killed leading a counterattack uphill against American positions. Many New York militiamen refused to cross the river into Canada, citing their constitutional right to only defend American soil. This left the American regulars who had crossed outnumbered and doomed. Brock\\'s monument at Queenston Heights still stands today.',\n    effect: 'British gains +2 troops at Niagara. Brock is removed from play.',\n    simpleDescription: 'The British stopped an American attack near Niagara. General Brock was killed but became a hero.',\n    simpleDidYouKnow: 'Many American soldiers refused to cross the river into Canada. They said they only had to defend American land.',\n    simpleEffect: 'The British get 2 extra troops at Niagara. General Brock is gone from the game.',\n    roundRange: [2, 4],\n    apply: ({ territoryOwners }) => {\n      const effects = { removeLeader: 'brock' };\n      if (territoryOwners.niagara === 'british') {\n        effects.troopBonus = { faction: 'british', count: 2, territories: ['niagara'] };\n      }\n      return effects;\n    },\n    quiz: {\n      question: 'Why did many New York militiamen refuse to cross the Niagara River into Canada?',\n      choices: [\n        'They cited their constitutional right to only defend American soil',\n        'They were afraid of the Niagara Falls rapids',\n        'They had not been paid in months',\n        'Their commander ordered them to stay behind',\n      ],\n      correctIndex: 0,\n      explanation: 'Many NY militia refused to cross into Canada, leaving American regulars outnumbered and doomed. General Brock was killed leading a counterattack, but the British won the battle. His monument at Queenston Heights still stands today.',\n      simpleQuestion: 'Why did many New York soldiers refuse to cross into Canada?',\n      simpleChoices: [\n        'They said they only had to protect American land',\n        'They were afraid of the waterfalls',\n        'They had not been paid',\n        'Their leader told them to stay behind',\n      ],\n      simpleExplanation: 'Many soldiers said they only had to fight on American soil. They would not cross into Canada. This left the Americans who did cross with too few fighters.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n\n  //  1813 Events (Rounds 5-8) \n  {\n    id: 'perry_lake_erie',\n    title: \"Perry's Victory on Lake Erie\",\n    year: 1813,\n    description:\n      '\"We have met the enemy and they are ours.\" Oliver Hazard Perry wins control of Lake Erie.',\n    didYouKnow:\n      'Perry built his fleet from scratch at Presque Isle (Erie, PA) using local timber. During the battle, his flagship Lawrence was shot to pieces. He rowed through enemy fire to the Niagara and continued fighting. His victory gave the US control of Lake Erie and forced the British to abandon Detroit  one of the war\\'s turning points.',\n    primarySource: {\n      quote: 'We have met the enemy and they are ours: two ships, two brigs, one schooner and one sloop.',\n      attribution: 'Oliver Hazard Perry, dispatch to General William Henry Harrison, September 10, 1813',\n    },\n    effect: 'US takes control of Lake Erie. +5 Nationalism.',\n    simpleDescription: 'Oliver Perry won a big battle on Lake Erie. He said, \"We have met the enemy and they are ours.\"',\n    simpleDidYouKnow: 'Perry built his ships at Presque Isle in Pennsylvania from trees cut down nearby. When his first ship was destroyed, he rowed to another one and kept fighting.',\n    simpleEffect: 'The US takes control of Lake Erie. Americans feel more patriotic.',\n    roundRange: [5, 7],\n    apply: () => ({\n      territoryChange: { territory: 'lake_erie', newOwner: 'us' },\n      troopBonus: { faction: 'us', count: 3, territories: ['lake_erie'] },\n      nationalismChange: 5,\n    }),\n    quiz: {\n      question: 'Where did Perry build the fleet he used to win the Battle of Lake Erie?',\n      choices: [\n        'Presque Isle (Erie, Pennsylvania)',\n        'Fort Dearborn (Chicago)',\n        'Buffalo, New York',\n        'Montreal, Canada',\n      ],\n      correctIndex: 0,\n      explanation: 'Perry built his fleet from scratch at Presque Isle using local timber. During the battle his flagship was shot to pieces, so he rowed through enemy fire to another ship and continued fighting until victory.',\n      simpleQuestion: 'Where did Perry build his ships for the battle?',\n      simpleChoices: [\n        'Presque Isle in Pennsylvania',\n        'Fort Dearborn in Chicago',\n        'Buffalo, New York',\n        'Montreal, Canada',\n      ],\n      simpleExplanation: 'Perry built his ships from local trees at Presque Isle. During the fight, his first ship was destroyed. He rowed to another ship and kept fighting until he won.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -3 },\n    },\n  },\n  {\n    id: 'thames_tecumseh_death',\n    title: 'Battle of the Thames  Tecumseh Falls',\n    year: 1813,\n    description:\n      \"Tecumseh is killed at the Battle of the Thames. His death shatters the Native coalition's unity.\",\n    didYouKnow:\n      'The circumstances of Tecumseh\\'s death remain debated. Richard Mentor Johnson claimed credit and rode it to the Vice Presidency with the slogan \"Rumpsey Dumpsey, Johnson killed Tecumseh!\" The British commander, Henry Procter, had retreated against Tecumseh\\'s wishes, leaving the Native warriors exposed. Tecumseh\\'s death effectively ended the dream of a unified Native confederacy.',\n    effect: 'Native Coalition loses 3 troops across all territories. Tecumseh removed from play.',\n    simpleDescription: 'Tecumseh was killed in battle. Without him, the Native nations could not stay united.',\n    simpleDidYouKnow: 'A man named Richard Johnson said he killed Tecumseh. He later became Vice President because of it.',\n    simpleEffect: 'The Native Coalition loses 3 troops everywhere. Tecumseh is gone from the game.',\n    roundRange: [5, 8],\n    apply: () => ({\n      troopPenalty: { faction: 'native', count: 3 },\n      removeLeader: 'tecumseh',\n    }),\n    quiz: {\n      question: 'Who claimed credit for killing Tecumseh and used it to advance his political career?',\n      choices: [\n        'Richard Mentor Johnson, who became Vice President',\n        'Andrew Jackson, who became President',\n        'William Henry Harrison, who led the battle',\n        'Henry Clay, who started the war movement',\n      ],\n      correctIndex: 0,\n      explanation: 'Richard Mentor Johnson claimed credit and rode it to the Vice Presidency with the slogan \"Rumpsey Dumpsey, Johnson killed Tecumseh!\" The true circumstances of Tecumseh\\'s death remain debated.',\n      simpleQuestion: 'Who said he killed Tecumseh and used that to get a big job?',\n      simpleChoices: [\n        'Richard Johnson, who became Vice President',\n        'Andrew Jackson, who became President',\n        'William Harrison, who led the battle',\n        'Henry Clay, who started the war movement',\n      ],\n      simpleExplanation: 'Richard Johnson said he killed Tecumseh. He used that claim to become Vice President. No one knows for sure who really killed Tecumseh.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'york_burning',\n    title: 'Americans Burn York (Toronto)',\n    year: 1813,\n    description:\n      'American forces capture and burn the capital of Upper Canada, enraging the British.',\n    didYouKnow:\n      'The burning of York\\'s Parliament buildings was partly accidental and partly retaliatory. It set a dangerous precedent: when British forces later burned Washington D.C., they explicitly cited York as justification. The cycle of retaliation showed how quickly wars can escalate beyond anyone\\'s intentions.',\n    primarySource: {\n      quote: 'We were told to burn and destroy everything that could give shelter to the enemy... it was done most effectually.',\n      attribution: 'Lieutenant David Thomson, Pennsylvania Volunteers, April 1813',\n    },\n    effect: 'British loses 2 troops in Upper Canada. British gains +2 troops at Montreal.',\n    simpleDescription: 'American soldiers burned the capital of Upper Canada. This made the British very angry.',\n    simpleDidYouKnow: 'The British later burned Washington D.C. to get back at the Americans for burning York.',\n    simpleEffect: 'The British lose 2 troops in Upper Canada but get 2 more at Montreal.',\n    roundRange: [4, 6],\n    apply: () => ({\n      troopPenalty: { territory: 'upper_canada', count: 2 },\n      troopBonus: { faction: 'british', count: 2, territories: ['montreal'] },\n    }),\n    quiz: {\n      question: 'What did the British cite as justification for later burning Washington D.C.?',\n      choices: [\n        'The American burning of York\\'s Parliament buildings',\n        'The Boston Tea Party of 1773',\n        'American attacks on British merchant ships',\n        'The imprisonment of British diplomats',\n      ],\n      correctIndex: 0,\n      explanation: 'The burning of York\\'s Parliament was partly accidental and partly retaliatory. It set a dangerous precedent: the British explicitly cited York when they later burned Washington D.C., showing how quickly wars can escalate.',\n      simpleQuestion: 'Why did the British say they burned Washington D.C.?',\n      simpleChoices: [\n        'Because Americans burned buildings in York first',\n        'Because of the Boston Tea Party',\n        'Because Americans attacked British trade ships',\n        'Because Americans locked up British leaders',\n      ],\n      simpleExplanation: 'The Americans burned buildings in York, Canada. Later, the British burned Washington D.C. to get revenge. This shows how fighting can get worse and worse.',\n      reward: { nationalism: 3 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'creek_war_begins',\n    title: 'Creek War Erupts',\n    year: 1813,\n    description:\n      'The Red Stick faction of the Creek Nation launches attacks against American settlements in the South.',\n    didYouKnow:\n      'The Creek Nation was divided: \"Red Sticks\" (inspired by Tecumseh) fought against American expansion, while other Creek factions allied with the Americans. This civil war within the Creek Nation was as devastating as their conflict with the US. The division would have lasting consequences for all Creek people.',\n    effect: 'Native gains +3 troops in Creek Nation.',\n    simpleDescription: 'A group of Creek people called the Red Sticks started fighting American settlers in the South.',\n    simpleDidYouKnow: 'The Creek Nation was split. Some Creek people fought the Americans. Other Creek people helped the Americans.',\n    simpleEffect: 'The Native Coalition gets 3 extra troops in Creek lands.',\n    roundRange: [5, 7],\n    apply: ({ territoryOwners }) => {\n      if (territoryOwners.creek_nation === 'native') {\n        return { troopBonus: { faction: 'native', count: 3, territories: ['creek_nation'] } };\n      }\n      return {};\n    },\n    quiz: {\n      question: 'What divided the Creek Nation during this conflict?',\n      choices: [\n        '\"Red Sticks\" fought expansion while other Creek factions allied with the US',\n        'Northern Creeks sided with Britain while Southern Creeks sided with Spain',\n        'The Creek chief was assassinated, splitting the tribe',\n        'Half the Creek warriors were captured and forced to fight for the US',\n      ],\n      correctIndex: 0,\n      explanation: 'The Creek civil war was devastating  \"Red Sticks\" (inspired by Tecumseh) fought against American expansion, while other Creek factions allied with the Americans. This division had lasting consequences for all Creek people.',\n      simpleQuestion: 'What split the Creek Nation during this war?',\n      simpleChoices: [\n        'Some Creeks fought Americans while others helped Americans',\n        'Northern Creeks joined Britain while Southern Creeks joined Spain',\n        'Their chief was killed and the tribe split apart',\n        'Half the Creek fighters were forced to join the US army',\n      ],\n      simpleExplanation: 'The Creek Nation was divided. The \"Red Sticks\" fought against American settlers. Other Creek groups helped the Americans instead. This split hurt all Creek people.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'british_blockade',\n    title: 'British Naval Blockade Tightens',\n    year: 1813,\n    description:\n      'The Royal Navy extends its blockade along the American coast, strangling trade.',\n    didYouKnow:\n      'By 1814, the British blockade was so effective that American exports dropped from $61 million (1811) to just $7 million. Prices for imported goods skyrocketed. However, the blockade had an unintended consequence: it forced Americans to manufacture their own goods, inadvertently jumpstarting American industrialization.',\n    effect: 'British gains +2 troops on Atlantic Sea Lanes. US coastal territories lose 1 troop each.',\n    simpleDescription: 'British warships blocked American ports. American ships could not trade with other countries.',\n    simpleDidYouKnow: 'The blockade cut American trade from $61 million down to just $7 million. Americans had to start making their own goods in factories.',\n    simpleEffect: 'The British get 2 more troops at sea. American coastal areas each lose 1 troop.',\n    roundRange: [4, 8],\n    apply: ({ territoryOwners }) => {\n      const effects = {};\n      if (territoryOwners.atlantic_sea_lanes === 'british') {\n        effects.troopBonus = { faction: 'british', count: 2, territories: ['atlantic_sea_lanes'] };\n      }\n      // Only penalize US-owned coastal territories\n      const usPenaltyTerrs = ['chesapeake_bay', 'new_york', 'baltimore'].filter(\n        (id) => territoryOwners[id] === 'us'\n      );\n      if (usPenaltyTerrs.length > 0) {\n        effects.troopPenalty = { territories: usPenaltyTerrs, count: 1 };\n      }\n      return effects;\n    },\n    quiz: {\n      question: 'How much did American exports drop due to the British blockade?',\n      choices: [\n        'From $61 million to just $7 million',\n        'From $100 million to $50 million',\n        'From $30 million to $15 million',\n        'Exports were completely stopped',\n      ],\n      correctIndex: 0,\n      explanation: 'The blockade was devastating to American trade, but had an unintended consequence: it forced Americans to manufacture their own goods, inadvertently jumpstarting American industrialization.',\n      simpleQuestion: 'How much did American trade drop because of the British blockade?',\n      simpleChoices: [\n        'From $61 million to just $7 million',\n        'From $100 million to $50 million',\n        'From $30 million to $15 million',\n        'Trade stopped completely',\n      ],\n      simpleExplanation: 'American trade fell a huge amount because of the blockade. But something good came from it. Americans started building their own factories to make things they used to buy from Britain.',\n      reward: { nationalism: 3 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'napoleon_defeated',\n    title: \"Napoleon's Setbacks in Europe\",\n    year: 1813,\n    description:\n      \"Napoleon's losses free up British regulars to be sent to North America.\",\n    didYouKnow:\n      'The War of 1812 is sometimes called America\\'s \"forgotten war,\" but it was really a sideshow of the massive Napoleonic Wars. When Napoleon was exiled to Elba in April 1814, over 10,000 Peninsular War veterans  battle-hardened from fighting in Spain and Portugal  were shipped to North America. Their arrival transformed the war.',\n    effect: 'British gains +3 troops distributed across Halifax and Montreal.',\n    simpleDescription: 'Napoleon lost battles in Europe. Now Britain could send more soldiers to fight in North America.',\n    simpleDidYouKnow: 'Over 10,000 British soldiers who had been fighting in Spain and Portugal were sent to North America after Napoleon lost.',\n    simpleEffect: 'The British get 3 extra troops at Halifax and Montreal.',\n    roundRange: [5, 8],\n    apply: ({ territoryOwners }) => {\n      const britishTerrs = ['halifax', 'montreal'].filter(\n        (id) => territoryOwners[id] === 'british'\n      );\n      if (britishTerrs.length === 0) return {};\n      return { troopBonus: { faction: 'british', count: 3, territories: britishTerrs } };\n    },\n    quiz: {\n      question: 'What were the battle-hardened British troops sent to North America called?',\n      choices: [\n        'Peninsular War veterans from Spain and Portugal',\n        'Royal Guards from London',\n        'Scottish Highlanders from the north',\n        'Indian Army veterans from Bengal',\n      ],\n      correctIndex: 0,\n      explanation: 'When Napoleon was exiled to Elba in 1814, over 10,000 veterans from the Peninsular War in Spain and Portugal were shipped to North America, dramatically shifting the balance of the war.',\n      simpleQuestion: 'Where had these tough British soldiers been fighting before?',\n      simpleChoices: [\n        'In Spain and Portugal',\n        'In Russia',\n        'In Egypt',\n        'In India',\n      ],\n      simpleExplanation: 'These soldiers had been fighting in Spain and Portugal for years. They were very experienced. When Napoleon lost, over 10,000 of them came to North America.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'fort_mims_massacre',\n    title: 'Fort Mims Massacre',\n    year: 1813,\n    description:\n      'Red Stick Creeks attack Fort Mims, killing hundreds. It galvanizes American resolve in the South.',\n    didYouKnow:\n      'The attack on Fort Mims in Alabama killed approximately 250-500 people  soldiers, settlers, and their Creek allies. It was the deadliest single event of the Creek War. The massacre outraged Americans and gave Andrew Jackson the political support to raise a large militia army and march against the Red Sticks.',\n    effect: 'US gains +2 troops in Mobile. +3 Nationalism.',\n    simpleDescription: 'Red Stick Creek fighters attacked Fort Mims. Hundreds of people were killed. Americans wanted revenge.',\n    simpleDidYouKnow: 'This attack gave Andrew Jackson support to build a big army and fight back.',\n    simpleEffect: 'The US gets 2 extra troops at Mobile. Americans feel more patriotic.',\n    roundRange: [5, 7],\n    apply: ({ territoryOwners }) => {\n      const effects = { nationalismChange: 3 };\n      if (territoryOwners.mobile === 'us') {\n        effects.troopBonus = { faction: 'us', count: 2, territories: ['mobile'] };\n      }\n      return effects;\n    },\n    quiz: {\n      question: 'Approximately how many people were killed in the Fort Mims attack?',\n      choices: [\n        '250 to 500 people',\n        'About 50 soldiers',\n        'Over 2,000 settlers',\n        'Only 10 were killed',\n      ],\n      correctIndex: 0,\n      explanation: 'The attack killed approximately 250-500 people  soldiers, settlers, and their Creek allies. It was the deadliest single event of the Creek War and gave Andrew Jackson political support to raise a large militia army.',\n      simpleQuestion: 'About how many people died in the Fort Mims attack?',\n      simpleChoices: [\n        '250 to 500 people',\n        'About 50 soldiers',\n        'Over 2,000 settlers',\n        'Only 10 people',\n      ],\n      simpleExplanation: 'Between 250 and 500 people died at Fort Mims. It was the deadliest event of the Creek War. After this, Andrew Jackson raised a big army to fight back.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'american_privateers',\n    title: 'American Privateers Harass British Shipping',\n    year: 1813,\n    description:\n      'Hundreds of American privateers prey on British merchant ships, disrupting supply lines.',\n    didYouKnow:\n      'Over 500 American privateers were commissioned during the war, capturing an estimated 1,500+ British merchant ships. Insurance rates for British shipping skyrocketed by 13%. British merchants petitioned Parliament for peace, showing that economic warfare could be as effective as battlefield victories.',\n    effect: 'British loses 1 troop from Halifax. +2 Nationalism.',\n    simpleDescription: 'American ships attacked British trading ships. This hurt Britain and helped America.',\n    simpleDidYouKnow: 'Over 500 American ships captured more than 1,500 British trading ships during the war.',\n    simpleEffect: 'The British lose 1 troop from Halifax. Americans feel more patriotic.',\n    roundRange: [4, 8],\n    apply: () => ({\n      troopPenalty: { territory: 'halifax', count: 1 },\n      nationalismChange: 2,\n    }),\n    quiz: {\n      question: 'Approximately how many British merchant ships did American privateers capture during the war?',\n      choices: [\n        'Over 1,500 ships',\n        'About 100 ships',\n        'Exactly 50 ships',\n        'Nearly 5,000 ships',\n      ],\n      correctIndex: 0,\n      explanation: 'Over 500 American privateers captured an estimated 1,500+ British merchant ships. Insurance rates for British shipping skyrocketed by 13%, and British merchants petitioned Parliament for peace.',\n      simpleQuestion: 'How many British trading ships did American ships capture?',\n      simpleChoices: [\n        'Over 1,500 ships',\n        'About 100 ships',\n        'Exactly 50 ships',\n        'Nearly 5,000 ships',\n      ],\n      simpleExplanation: 'American ships captured more than 1,500 British trading ships. This cost Britain a lot of money. British traders begged their government to make peace.',\n      reward: { nationalism: 3 },\n      penalty: { nationalism: -2 },\n    },\n  },\n\n  //  1814 Events (Rounds 9-11) \n  {\n    id: 'washington_burned',\n    title: 'The British Burn Washington D.C.',\n    year: 1814,\n    description:\n      'British forces march into the capital and burn the White House and Capitol. A dark day for the republic.',\n    didYouKnow:\n      'British Admiral Cockburn reportedly sat in the Speaker\\'s chair in the House of Representatives and asked his men, \"Shall this harbor of Yankee democracy be burned?\" They shouted \"Aye!\" A thunderstorm and possible tornado the next day helped extinguish the fires. Washington D.C. is the only capital of a major nation to be captured and burned by a foreign power in the modern era.',\n    primarySource: {\n      quote: 'Shall this harbor of Yankee democracy be burned? All for it will say Aye!',\n      attribution: 'Rear Admiral George Cockburn, in the U.S. House of Representatives, August 24, 1814',\n    },\n    effect: 'Washington D.C. captured by British. -10 Nationalism.',\n    simpleDescription: 'British soldiers marched into Washington D.C. They burned the White House and the Capitol building.',\n    simpleDidYouKnow: 'A British admiral asked \"Shall this harbor of Yankee democracy be burned?\" before they set the Capitol on fire. Washington D.C. is the only major country\\'s capital ever captured and burned by an enemy.',\n    simpleEffect: 'The British take Washington D.C. Americans feel much less patriotic.',\n    roundRange: [9, 10],\n    apply: () => ({\n      territoryChange: { territory: 'washington_dc', newOwner: 'british' },\n      troopBonus: { faction: 'british', count: 4, territories: ['washington_dc'] },\n      nationalismChange: -10,\n    }),\n    quiz: {\n      question: 'What did Admiral Cockburn ask in the House of Representatives before burning it?',\n      choices: [\n        '\"Shall this harbor of Yankee democracy be burned?\"',\n        '\"Where is the President hiding?\"',\n        '\"Does anyone wish to surrender?\"',\n        '\"Is there any gold in the treasury?\"',\n      ],\n      correctIndex: 0,\n      explanation: 'Cockburn sat in the Speaker\\'s chair and asked \"Shall this harbor of Yankee democracy be burned?\" His men shouted \"Aye!\" A thunderstorm the next day helped extinguish the fires. Washington D.C. is the only major nation\\'s capital to be captured and burned by a foreign power in the modern era.',\n      simpleQuestion: 'What did the British admiral ask before burning the Capitol building?',\n      simpleChoices: [\n        '\"Should we burn this place?\"',\n        '\"Where is the President hiding?\"',\n        '\"Does anyone want to give up?\"',\n        '\"Is there gold in the building?\"',\n      ],\n      simpleExplanation: 'Admiral Cockburn sat in the Speaker\\'s chair. He asked if they should burn the building. His soldiers shouted \"Yes!\" A big storm the next day helped put out the fires.',\n      reward: { troops: 2 },\n      penalty: { nationalism: -3 },\n    },\n  },\n  {\n    id: 'fort_mchenry',\n    title: 'The Bombardment of Fort McHenry',\n    year: 1814,\n    description:\n      'The British bombard Fort McHenry through the night. At dawn, the flag still waves  inspiring Francis Scott Key.',\n    didYouKnow:\n      'The British fired over 1,500 cannonballs, rockets, and mortar shells during the 25-hour bombardment. Francis Scott Key, detained on a British ship 8 miles away, watched through the night. The flag he saw at dawn was enormous  42 by 30 feet, sewn by Mary Pickersgill and her daughter. It now hangs in the Smithsonian.',\n    primarySource: {\n      quote: 'It was a night of watchfulness and anxiety... but at early dawn our eyes were greeted with the proudly waving flag of our country.',\n      attribution: 'Francis Scott Key, letter describing the night of September 13\\u201314, 1814',\n    },\n    effect: 'Baltimore cannot be captured this round. +10 Nationalism.',\n    simpleDescription: 'The British fired cannons at Fort McHenry all night long. In the morning, the American flag was still flying.',\n    simpleDidYouKnow: 'The British fired cannons at the fort for 25 hours straight. The flag that flew over the fort was huge  42 feet long and 30 feet tall. You can see it at the Smithsonian today.',\n    simpleEffect: 'Baltimore is safe this round. Americans feel very patriotic.',\n    roundRange: [9, 11],\n    apply: () => ({\n      fortify: { territory: 'baltimore', invulnerable: true },\n      nationalismChange: 10,\n    }),\n    quiz: {\n      question: 'How long did the British bombardment of Fort McHenry last?',\n      choices: [\n        '25 hours',\n        '3 hours',\n        '48 hours',\n        '7 days',\n      ],\n      correctIndex: 0,\n      explanation: 'The British fired over 1,500 cannonballs, rockets, and mortar shells during the 25-hour bombardment. The enormous flag Key saw at dawn  42 by 30 feet, sewn by Mary Pickersgill  now hangs in the Smithsonian.',\n      simpleQuestion: 'How long did the British fire cannons at Fort McHenry?',\n      simpleChoices: [\n        '25 hours',\n        '3 hours',\n        '48 hours',\n        '7 days',\n      ],\n      simpleExplanation: 'The British fired over 1,500 cannonballs for 25 hours straight. The big American flag was still waving in the morning. That flag now hangs in the Smithsonian museum.',\n      reward: { nationalism: 5 },\n      penalty: { nationalism: -3 },\n    },\n  },\n  {\n    id: 'star_spangled_banner',\n    title: 'The Star-Spangled Banner',\n    year: 1814,\n    description:\n      'Francis Scott Key pens the words that will become the national anthem after witnessing Fort McHenry\\'s defense.',\n    didYouKnow:\n      'Key wrote the poem on the back of a letter while still on the British ship. It was set to the tune of a popular British drinking song, \"To Anacreon in Heaven.\" The song became widely popular but wasn\\'t made the official national anthem until 1931  117 years after Key wrote it.',\n    primarySource: {\n      quote: 'O say can you see, by the dawn\\'s early light, / What so proudly we hail\\'d at the twilight\\'s last gleaming?',\n      attribution: 'Francis Scott Key, \"Defence of Fort M\\'Henry,\" September 1814',\n    },\n    effect: '+8 Nationalism. US gains +1 troop in Chesapeake.',\n    simpleDescription: 'Francis Scott Key watched the battle at Fort McHenry. He wrote a poem that became America\\'s national anthem.',\n    simpleDidYouKnow: 'The poem was set to a popular British song. It did not become the official national anthem until 1931.',\n    simpleEffect: 'Americans feel very patriotic. The US gets 1 extra troop near Chesapeake.',\n    roundRange: [9, 11],\n    apply: () => ({\n      nationalismChange: 8,\n      troopBonus: { faction: 'us', count: 1, theater: 'Chesapeake' },\n    }),\n    quiz: {\n      question: 'What tune was \"The Star-Spangled Banner\" poem originally set to?',\n      choices: [\n        '\"To Anacreon in Heaven,\" a British drinking song',\n        '\"God Save the King,\" the British anthem',\n        '\"Yankee Doodle,\" an American folk song',\n        'It was originally written as an opera',\n      ],\n      correctIndex: 0,\n      explanation: 'Key wrote the poem on the back of a letter while still on a British ship. It was set to \"To Anacreon in Heaven,\" a popular British drinking song. It didn\\'t become the official national anthem until 1931  117 years later.',\n      simpleQuestion: 'What song was \"The Star-Spangled Banner\" set to?',\n      simpleChoices: [\n        'A popular British song',\n        'The British national anthem',\n        '\"Yankee Doodle\"',\n        'It was written as an opera',\n      ],\n      simpleExplanation: 'Key wrote the poem on the back of a letter. The words were set to a popular British song. It did not become America\\'s national anthem until 117 years later in 1931.',\n      reward: { nationalism: 3 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'horseshoe_bend',\n    title: 'Battle of Horseshoe Bend',\n    year: 1814,\n    description:\n      'Andrew Jackson crushes the Red Stick Creeks at Horseshoe Bend, ending the Creek War.',\n    didYouKnow:\n      'Jackson\\'s force included 2,600 American troops, 500 Cherokee, and 100 Lower Creek allies  showing that the conflict was not simply \"settlers vs. Natives.\" Over 800 Red Stick warriors were killed. The resulting Treaty of Fort Jackson forced the Creek to cede 23 million acres  roughly half of present-day Alabama and part of Georgia.',\n    primarySource: {\n      quote: 'The fiends of the Tallapoosa will no longer murder our women and children... They have disappeared from the face of the Earth.',\n      attribution: 'Andrew Jackson, letter to his wife Rachel, March 28, 1814',\n    },\n    effect: 'US takes Creek Nation. Native loses 3 troops across all territories.',\n    simpleDescription: 'Andrew Jackson beat the Red Stick Creeks at Horseshoe Bend. This ended the Creek War.',\n    simpleDidYouKnow: 'Jackson\\'s army included Cherokee and Creek fighters. Not all Native people were on the same side.',\n    simpleEffect: 'The US takes Creek lands. The Native Coalition loses 3 troops everywhere.',\n    roundRange: [8, 10],\n    apply: () => ({\n      territoryChange: { territory: 'creek_nation', newOwner: 'us' },\n      troopBonus: { faction: 'us', count: 2, territories: ['creek_nation'] },\n      troopPenalty: { faction: 'native', count: 3 },\n    }),\n    quiz: {\n      question: 'Who fought alongside Andrew Jackson\\'s US troops at Horseshoe Bend?',\n      choices: [\n        '500 Cherokee and 100 Lower Creek allies',\n        'French soldiers from Louisiana',\n        'Spanish troops from Florida',\n        'Only American regulars fought in the battle',\n      ],\n      correctIndex: 0,\n      explanation: 'Jackson\\'s force included Cherokee and Lower Creek allies, showing that the conflict was not simply \"settlers vs. Natives.\" Over 800 Red Stick warriors were killed, and the resulting treaty forced the Creek to cede 23 million acres.',\n      simpleQuestion: 'Who fought alongside Jackson\\'s US troops at Horseshoe Bend?',\n      simpleChoices: [\n        '500 Cherokee and 100 Creek allies',\n        'French soldiers from Louisiana',\n        'Spanish troops from Florida',\n        'Only American soldiers fought there',\n      ],\n      simpleExplanation: 'Cherokee and Creek people fought alongside Jackson. Not all Native people were on the same side. Over 800 Red Stick fighters were killed in this battle.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'plattsburgh',\n    title: 'Battle of Plattsburgh',\n    year: 1814,\n    description:\n      'An outnumbered American force defeats a major British invasion from Canada at Plattsburgh Bay.',\n    didYouKnow:\n      'The British invasion force of 10,000+ veterans vastly outnumbered the 3,400 American defenders. But American Commodore Macdonough won the naval battle on Lake Champlain, cutting British supply lines. British General Prevost retreated despite his numerical advantage. News of this defeat convinced British negotiators at Ghent to accept peace.',\n    effect: 'British loses 3 troops from Montreal. +3 Nationalism.',\n    simpleDescription: 'A small American force beat a much bigger British army at Plattsburgh. This helped end the war.',\n    simpleDidYouKnow: 'The British had over 10,000 soldiers. The Americans had only 3,400. But the Americans still won.',\n    simpleEffect: 'The British lose 3 troops from Montreal. Americans feel more patriotic.',\n    roundRange: [9, 11],\n    apply: () => ({\n      troopPenalty: { territory: 'montreal', count: 3 },\n      nationalismChange: 3,\n    }),\n    quiz: {\n      question: 'How did the British and American forces compare at the Battle of Plattsburgh?',\n      choices: [\n        '10,000+ British vs only 3,400 Americans',\n        'Equal forces of about 5,000 each',\n        '3,000 British vs 8,000 Americans',\n        '20,000 British vs 15,000 Americans',\n      ],\n      correctIndex: 0,\n      explanation: 'Despite vastly outnumbering the defenders, the British retreated after Commodore Macdonough won the naval battle on Lake Champlain, cutting British supply lines. This defeat helped convince British negotiators at Ghent to accept peace.',\n      simpleQuestion: 'How many soldiers did each side have at Plattsburgh?',\n      simpleChoices: [\n        'Over 10,000 British vs only 3,400 Americans',\n        'About 5,000 on each side',\n        '3,000 British vs 8,000 Americans',\n        '20,000 British vs 15,000 Americans',\n      ],\n      simpleExplanation: 'The British had more than 10,000 soldiers. The Americans only had 3,400. But the Americans won the battle on the lake. This cut off British supplies and made them retreat.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'british_veterans_arrive',\n    title: 'Peninsular War Veterans Arrive',\n    year: 1814,\n    description:\n      'With Napoleon exiled to Elba, battle-hardened British troops flood into North America.',\n    didYouKnow:\n      'These soldiers had spent years fighting Napoleon\\'s armies across Spain and Portugal under the Duke of Wellington. They were among the finest soldiers in the world. Their arrival in 1814 shifted the war dramatically  enabling the Washington campaign, the attack on Baltimore, and the assault on New Orleans.',\n    effect: 'British gains +4 troops across Halifax, Montreal, and Upper Canada.',\n    simpleDescription: 'Experienced British soldiers arrived from Europe. They had been fighting Napoleon for years.',\n    simpleDidYouKnow: 'These soldiers were some of the best in the world. They had fought for years in Spain and Portugal.',\n    simpleEffect: 'The British get 4 extra troops at Halifax, Montreal, and Upper Canada.',\n    roundRange: [9, 11],\n    apply: ({ territoryOwners }) => {\n      const britishTerrs = ['halifax', 'montreal', 'upper_canada'].filter(\n        (id) => territoryOwners[id] === 'british'\n      );\n      if (britishTerrs.length === 0) return {};\n      return { troopBonus: { faction: 'british', count: 4, territories: britishTerrs } };\n    },\n    quiz: {\n      question: 'Where had the Peninsular War veterans fought before being sent to North America?',\n      choices: [\n        'Spain and Portugal under the Duke of Wellington',\n        'Russia during Napoleon\\'s invasion',\n        'Egypt against the Ottoman Empire',\n        'India against local rulers',\n      ],\n      correctIndex: 0,\n      explanation: 'These soldiers had spent years fighting Napoleon\\'s armies across Spain and Portugal. They were among the finest soldiers in the world, and their arrival enabled the Washington campaign, the attack on Baltimore, and the assault on New Orleans.',\n      simpleQuestion: 'Where had these soldiers fought before coming to North America?',\n      simpleChoices: [\n        'Spain and Portugal',\n        'Russia',\n        'Egypt',\n        'India',\n      ],\n      simpleExplanation: 'These soldiers spent years fighting in Spain and Portugal. They were some of the best fighters in the world. They helped the British attack Washington, Baltimore, and New Orleans.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'lundy_lane',\n    title: \"Battle of Lundy's Lane\",\n    year: 1814,\n    description:\n      'One of the bloodiest battles of the war ends in a draw at Niagara. Both sides suffer heavy losses.',\n    didYouKnow:\n      'The battle raged for six hours, much of it in darkness, near Niagara Falls. Over 1,700 soldiers were killed or wounded. Winfield Scott, who had drilled American troops to professional standards, was badly wounded. Despite the tactical draw, the battle proved American regulars could match British veterans  a far cry from the humiliating defeats of 1812.',\n    effect: 'Niagara loses 4 troops total (penalty to current owner).',\n    simpleDescription: 'A very bloody battle happened near Niagara Falls. Both sides lost many soldiers. Nobody won.',\n    simpleDidYouKnow: 'The battle lasted six hours. Most of the fighting happened in the dark. Over 1,700 soldiers were killed or hurt.',\n    simpleEffect: 'Niagara loses 4 troops total. Both sides suffer.',\n    roundRange: [9, 11],\n    apply: () => ({\n      troopPenalty: { territory: 'niagara', count: 4 },\n    }),\n    quiz: {\n      question: 'How long did the Battle of Lundy\\'s Lane rage, and under what conditions?',\n      choices: [\n        'Six hours, much of it in darkness',\n        'Two days of continuous fighting',\n        'Three hours in a blizzard',\n        'Thirty minutes at dawn',\n      ],\n      correctIndex: 0,\n      explanation: 'The battle raged for six hours, much of it in darkness near Niagara Falls. Over 1,700 soldiers were killed or wounded. Despite the draw, the battle proved American regulars could match British veterans.',\n      simpleQuestion: 'How long did the Battle of Lundy\\'s Lane last?',\n      simpleChoices: [\n        'Six hours, mostly in the dark',\n        'Two whole days',\n        'Three hours in a snowstorm',\n        'Thirty minutes at sunrise',\n      ],\n      simpleExplanation: 'The battle went on for six hours. Most of the fighting was in the dark near Niagara Falls. Over 1,700 soldiers were killed or hurt on both sides.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n\n  //  1815 / Endgame Events (Round 12) \n  {\n    id: 'treaty_of_ghent',\n    title: 'Treaty of Ghent Signed',\n    year: 1814,\n    description:\n      'Diplomats in Ghent sign a peace treaty restoring pre-war borders. But news travels slowly...',\n    didYouKnow:\n      'The negotiations in the Belgian city of Ghent lasted five months. The British initially demanded a Native buffer state, control of the Great Lakes, and territorial concessions. American victories at Plattsburgh and Baltimore weakened Britain\\'s bargaining position. In the end, the treaty changed almost nothing  a \"status quo ante bellum\" that left the underlying issues unresolved.',\n    primarySource: {\n      quote: 'All the under-signed Plenipotentiaries have agreed... that there shall be a firm and universal Peace between His Britannic Majesty and the United States.',\n      attribution: 'Treaty of Ghent, Article the First, December 24, 1814',\n    },\n    effect: '+5 Nationalism. The war winds down.',\n    simpleDescription: 'Leaders signed a peace deal in Belgium. Things went back to how they were before the war.',\n    simpleDidYouKnow: 'At first, Britain wanted a Native homeland, control of the Great Lakes, and American land. But the talks lasted five months, and in the end the treaty changed almost nothing. Both sides kept what they had before.',\n    simpleEffect: 'Americans feel more patriotic. The war is ending.',\n    roundRange: [11, 12],\n    apply: () => ({\n      nationalismChange: 5,\n    }),\n    quiz: {\n      question: 'What was Britain\\'s initial demand during the Treaty of Ghent negotiations?',\n      choices: [\n        'A Native buffer state, control of the Great Lakes, and territorial concessions',\n        'Full American surrender and annexation',\n        'Payment of $10 million in reparations',\n        'Return of all British deserters',\n      ],\n      correctIndex: 0,\n      explanation: 'Negotiations lasted five months. American victories at Plattsburgh and Baltimore weakened Britain\\'s position. In the end, the treaty restored pre-war borders  \"status quo ante bellum\"  leaving the underlying issues unresolved.',\n      simpleQuestion: 'What did Britain first ask for during the peace talks?',\n      simpleChoices: [\n        'A Native homeland, the Great Lakes, and American land',\n        'America to give up completely',\n        '$10 million to pay for the war',\n        'All British sailors returned',\n      ],\n      simpleExplanation: 'The talks lasted five months. At first, Britain wanted a lot. But American wins at Plattsburgh and Baltimore made Britain accept peace. Everything went back to how it was before the war.',\n      reward: { nationalism: 3 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'battle_new_orleans',\n    title: 'Battle of New Orleans',\n    year: 1815,\n    description:\n      'Andrew Jackson wins a stunning victory at New Orleans  fought after the peace treaty was signed, but before news arrived.',\n    didYouKnow:\n      'Jackson assembled a remarkable force: US regulars, Kentucky and Tennessee militia, free Black soldiers, Choctaw warriors, French-speaking Creoles, and the pirate Jean Lafitte\\'s men. Behind cotton-bale barricades, they annihilated a British force of 8,000 in just 30 minutes. British losses: 2,042. American losses: 71. It was the most lopsided major battle in American history.',\n    primarySource: {\n      quote: 'I will smash them, so help me God!',\n      attribution: 'Major General Andrew Jackson, before the Battle of New Orleans, January 1815',\n    },\n    effect: 'US gains +4 troops at New Orleans. +15 Nationalism.',\n    simpleDescription: 'Andrew Jackson won a huge battle at New Orleans. It happened after peace was signed, but nobody knew yet.',\n    simpleDidYouKnow: 'The British lost over 2,000 soldiers. The Americans lost only 71. Jackson\\'s army had all kinds of people  soldiers, pirates, free Black fighters, and Native warriors all fighting together.',\n    simpleEffect: 'The US gets 4 extra troops at New Orleans. Americans feel very patriotic.',\n    roundRange: [11, 12],\n    apply: () => ({\n      troopBonus: { faction: 'us', count: 4, territories: ['new_orleans'] },\n      nationalismChange: 15,\n    }),\n    quiz: {\n      question: 'What were the casualty numbers at the Battle of New Orleans?',\n      choices: [\n        'British: 2,042  American: 71',\n        'British: 500  American: 300',\n        'British: 71  American: 2,042',\n        'Both sides lost about 1,000 each',\n      ],\n      correctIndex: 0,\n      explanation: 'It was the most lopsided major battle in American history. Behind cotton-bale barricades, Jackson\\'s diverse force annihilated 8,000 British troops in just 30 minutes. The battle was fought after the peace treaty was signed, but before news arrived.',\n      simpleQuestion: 'How many soldiers died on each side at New Orleans?',\n      simpleChoices: [\n        'British: 2,042 -- American: 71',\n        'British: 500 -- American: 300',\n        'British: 71 -- American: 2,042',\n        'About 1,000 on each side',\n      ],\n      simpleExplanation: 'The British lost 2,042 soldiers. The Americans only lost 71. Jackson\\'s fighters hid behind walls made of cotton bales. The battle only lasted about 30 minutes.',\n      reward: { troops: 2 },\n      penalty: { nationalism: -3 },\n    },\n  },\n  {\n    id: 'hartford_convention',\n    title: 'Hartford Convention',\n    year: 1814,\n    description:\n      'New England Federalists meet in Hartford to discuss secession, but the war\\'s end makes them look treasonous.',\n    didYouKnow:\n      'The Hartford Convention met in secret, which fueled rumors of treason. Their actual proposals were moderate  constitutional amendments to limit presidential power and war declarations. But when news of peace and Jackson\\'s victory arrived simultaneously, the delegates appeared to be sore losers at best, traitors at worst. The Federalist Party never recovered.',\n    effect: 'If US is winning: +5 Nationalism (Federalists humiliated). If losing: -5 Nationalism.',\n    simpleDescription: 'Some leaders from New England had a secret meeting. People thought they were talking about leaving the country, but their ideas were actually mild  they just wanted to change some rules.',\n    simpleDidYouKnow: 'The meeting was secret, so people feared the worst. But the real ideas were mild. When the war ended, these leaders looked like traitors anyway. Their political party never won again.',\n    simpleEffect: 'If the US is winning, people feel more patriotic. If losing, people feel less patriotic.',\n    roundRange: [10, 12],\n    apply: ({ scores }) => ({\n      nationalismChange: (scores.us || 0) >= (scores.british || 0) ? 5 : -5,\n    }),\n    quiz: {\n      question: 'Were the Hartford Convention\\'s actual proposals radical or moderate?',\n      choices: [\n        'Moderate  constitutional amendments to limit presidential power',\n        'Radical  they voted to secede from the Union',\n        'Radical  they declared war on the US government',\n        'Moderate  they only asked for lower taxes',\n      ],\n      correctIndex: 0,\n      explanation: 'The convention met in secret, fueling rumors of treason. Their actual proposals were moderate constitutional amendments. But when peace and Jackson\\'s victory arrived, the delegates appeared treasonous. The Federalist Party never recovered.',\n      simpleQuestion: 'Were the ideas from the Hartford Convention extreme or mild?',\n      simpleChoices: [\n        'Mild -- they just wanted to change some rules',\n        'Extreme -- they voted to leave the country',\n        'Extreme -- they declared war on the US',\n        'Mild -- they only asked for lower taxes',\n      ],\n      simpleExplanation: 'The meeting was secret, so people thought it was about treason. The ideas were actually mild. But when the war ended, these leaders looked like traitors. Their party fell apart.',\n      reward: { nationalism: 3 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'impressment_ends',\n    title: 'Impressment Effectively Ends',\n    year: 1815,\n    description:\n      'With the Napoleonic Wars over, Britain no longer needs to press American sailors into service.',\n    didYouKnow:\n      'The Treaty of Ghent never mentioned impressment  the very issue that caused the war. The practice simply stopped because Britain no longer needed extra sailors. This irony means the war\\'s primary cause was resolved not by fighting, but by events in Europe. The War of 1812 was, in many ways, a \"second front\" of the Napoleonic Wars.',\n    effect: '+3 Nationalism. A root cause of the war is resolved.',\n    simpleDescription: 'Britain stopped taking American sailors and making them work on British ships. The war in Europe was over, so they did not need extra sailors.',\n    simpleDidYouKnow: 'The peace treaty never talked about taking sailors. Britain just stopped doing it on their own.',\n    simpleEffect: 'Americans feel more patriotic. A big reason for the war is gone.',\n    roundRange: [11, 12],\n    apply: () => ({\n      nationalismChange: 3,\n    }),\n    quiz: {\n      question: 'Was impressment mentioned in the Treaty of Ghent?',\n      choices: [\n        'No  the practice simply stopped because Britain no longer needed extra sailors',\n        'Yes  Britain formally agreed to end the practice',\n        'Yes  both sides agreed to stop pressing sailors',\n        'No  but a separate treaty specifically addressed it',\n      ],\n      correctIndex: 0,\n      explanation: 'The Treaty of Ghent never mentioned impressment  the very issue that caused the war. The practice simply stopped because Britain no longer needed extra sailors after the Napoleonic Wars ended. The war\\'s primary cause was resolved by events in Europe, not fighting.',\n      simpleQuestion: 'Did the peace treaty say anything about taking American sailors?',\n      simpleChoices: [\n        'No -- Britain just stopped because they did not need more sailors',\n        'Yes -- Britain promised to stop',\n        'Yes -- both sides agreed to stop',\n        'No -- but a different agreement covered it',\n      ],\n      simpleExplanation: 'The peace treaty never talked about taking sailors. That was the main reason for the war! Britain just stopped doing it because the war in Europe ended. They did not need extra sailors anymore.',\n      reward: { nationalism: 3 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'american_manufacturing_boom',\n    title: 'American Manufacturing Boom',\n    year: 1814,\n    description:\n      'Cut off from British goods, American factories spring up across New England and the Mid-Atlantic.',\n    didYouKnow:\n      'Before the war, Americans imported most manufactured goods from Britain. The blockade forced them to build their own factories. Cotton mills, iron foundries, and other industries sprouted up. After the war, Congress passed the Tariff of 1816  the first protectionist tariff  to shield these new industries. The war inadvertently kickstarted the American Industrial Revolution.',\n    effect: 'US gains +1 troop in New York and Ohio Valley. +3 Nationalism.',\n    simpleDescription: 'Americans could not buy British goods anymore. So they built their own factories to make things.',\n    simpleDidYouKnow: 'After the war, Congress passed the Tariff of 1816 to protect these new American factories from cheaper British goods.',\n    simpleEffect: 'The US gets 1 extra troop in New York and Ohio Valley. Americans feel more patriotic.',\n    roundRange: [8, 12],\n    apply: ({ territoryOwners }) => {\n      const usTerrs = ['new_york', 'ohio_valley'].filter(\n        (id) => territoryOwners[id] === 'us'\n      );\n      if (usTerrs.length === 0) return { nationalismChange: 3 };\n      return {\n        troopBonus: { faction: 'us', count: 1, territories: usTerrs },\n        nationalismChange: 3,\n      };\n    },\n    quiz: {\n      question: 'What tariff was passed after the war to protect new American industries?',\n      choices: [\n        'The Tariff of 1816',\n        'The Tariff of 1812',\n        'The Embargo Act of 1807',\n        'The Navigation Act of 1815',\n      ],\n      correctIndex: 0,\n      explanation: 'The British blockade forced Americans to build their own factories. After the war, Congress passed the Tariff of 1816  the first protectionist tariff  to shield these new industries. The war inadvertently kickstarted the American Industrial Revolution.',\n      simpleQuestion: 'What law did Congress pass to help new American factories?',\n      simpleChoices: [\n        'The Tariff of 1816',\n        'The Tariff of 1812',\n        'The Embargo Act of 1807',\n        'The Navigation Act of 1815',\n      ],\n      simpleExplanation: 'The British blockade made Americans build their own factories. After the war, Congress passed the Tariff of 1816. This law made British goods cost more so people would buy American-made things.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'laura_secord',\n    title: \"Laura Secord's Warning\",\n    year: 1813,\n    description:\n      'Laura Secord walks 20 miles through enemy territory to warn British forces of an American attack at Beaver Dams.',\n    didYouKnow:\n      'Laura Secord walked through swamps, forests, and enemy-held territory to deliver her warning. The resulting Battle of Beaver Dams was a complete British-Native victory, capturing over 500 American troops. Secord received little recognition during her lifetime, but she is now one of Canada\\'s most celebrated national heroes  and yes, the famous chocolate company is named after her.',\n    effect: 'British gains +2 troops at Niagara.',\n    simpleDescription: 'Laura Secord walked 20 miles through dangerous land to warn the British about an American attack.',\n    simpleDidYouKnow: 'A famous Canadian chocolate company is named after Laura Secord. She is a hero in Canada.',\n    simpleEffect: 'The British get 2 extra troops at Niagara.',\n    roundRange: [5, 7],\n    apply: ({ territoryOwners }) => {\n      if (territoryOwners.niagara === 'british') {\n        return { troopBonus: { faction: 'british', count: 2, territories: ['niagara'] } };\n      }\n      return {};\n    },\n    quiz: {\n      question: 'What is Laura Secord famous for in modern Canadian culture?',\n      choices: [\n        'A famous chocolate company is named after her',\n        'Her face appears on the Canadian $20 bill',\n        'A major Canadian holiday celebrates her',\n        'The capital of Ontario was renamed in her honor',\n      ],\n      correctIndex: 0,\n      explanation: 'Laura Secord walked 20 miles through swamps and enemy territory to deliver her warning. She received little recognition during her lifetime but is now one of Canada\\'s most celebrated heroes  and yes, the famous chocolate company is named after her.',\n      simpleQuestion: 'What is Laura Secord famous for in Canada today?',\n      simpleChoices: [\n        'A chocolate company is named after her',\n        'Her face is on the Canadian $20 bill',\n        'A big holiday celebrates her',\n        'The capital of Ontario was renamed for her',\n      ],\n      simpleExplanation: 'Laura Secord walked 20 miles through swamps to deliver a warning. She is a hero in Canada now. A famous chocolate company is named after her.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'dolley_madison',\n    title: 'Dolley Madison Saves the Portrait',\n    year: 1814,\n    description:\n      'As the British approach Washington, First Lady Dolley Madison saves George Washington\\'s portrait from the burning White House.',\n    didYouKnow:\n      'With British troops just miles away, Dolley Madison refused to leave until the large portrait of George Washington was cut from its frame and loaded onto a wagon. She also saved copies of the Declaration of Independence and other state papers. Her courage under fire made her an American icon and showed that the spirit of the nation couldn\\'t be burned.',\n    primarySource: {\n      quote: 'Our kind friend, Mr. Carroll, has come to hasten my departure, and is in a very bad humor with me because I insist on waiting until the large picture of Gen. Washington is secured.',\n      attribution: 'Dolley Madison, letter to her sister Lucy, August 23, 1814',\n    },\n    effect: '+5 Nationalism.',\n    simpleDescription: 'Dolley Madison saved a big painting of George Washington from the White House before the British burned it.',\n    simpleDidYouKnow: 'She also saved important government papers. She would not leave until the painting was safe.',\n    simpleEffect: 'Americans feel more patriotic because of Dolley Madison\\'s bravery.',\n    roundRange: [9, 11],\n    apply: () => ({\n      nationalismChange: 5,\n    }),\n    quiz: {\n      question: 'What famous artwork did Dolley Madison save from the burning White House?',\n      choices: [\n        'A large portrait of George Washington by Gilbert Stuart',\n        'The original Declaration of Independence',\n        'A painting of the Battle of Bunker Hill',\n        'Benjamin Franklin\\'s portrait by Charles Willson Peale',\n      ],\n      correctIndex: 0,\n      explanation: 'Dolley Madison refused to leave until George Washington\\'s large portrait was cut from its frame and loaded onto a wagon. She also saved copies of state papers. Her courage under fire made her an American icon.',\n      simpleQuestion: 'What did Dolley Madison save from the White House?',\n      simpleChoices: [\n        'A big painting of George Washington',\n        'The Declaration of Independence',\n        'A painting of the Battle of Bunker Hill',\n        'A painting of Benjamin Franklin',\n      ],\n      simpleExplanation: 'Dolley Madison saved a large painting of George Washington. She would not leave until it was safe. She also saved important papers. Her bravery made her famous.',\n      reward: { nationalism: 3 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  //  Content Expansion v1.6.0 (12 new cards) \n  {\n    id: 'chateauguay',\n    title: 'Battle of Chateauguay',\n    year: 1813,\n    description:\n      'Lieutenant Colonel de Salaberry and 300 Canadian Voltigeurs repel an American force of 3,000+ marching toward Montreal.',\n    didYouKnow:\n      'Charles de Salaberry used buglers positioned throughout the forest to create the illusion of a massive army. The Americans, convinced they were surrounded, retreated despite outnumbering the defenders nearly ten to one. It was one of the most remarkable defensive victories of the war.',\n    primarySource: {\n      quote: 'I have won a victory mounted on a wooden horse.',\n      attribution: 'Charles de Salaberry, after the Battle of Chateauguay, 1813',\n    },\n    effect: 'British gains +2 troops in Great Lakes Theater. Canadian defenders hold firm.',\n    simpleDescription: 'A small group of Canadian soldiers tricked a much bigger American army into retreating near Montreal.',\n    simpleDidYouKnow: 'De Salaberry had buglers blow horns from different spots in the forest. The Americans thought they were surrounded and ran away.',\n    simpleEffect: 'The British get 2 extra troops near the Great Lakes.',\n    roundRange: [6, 8],\n    apply: () => ({\n      troopBonus: { faction: 'british', count: 2, theater: 'Great Lakes' },\n    }),\n    quiz: {\n      question: 'How did de Salaberry defeat a much larger American force at Chateauguay?',\n      choices: [\n        'He used buglers in the forest to make his force seem much larger',\n        'He received reinforcements from Britain at the last moment',\n        'He used cannon fire to destroy the American supply lines',\n        'He flooded the river to block the American advance',\n      ],\n      correctIndex: 0,\n      explanation: 'De Salaberry positioned buglers throughout the forest to create the illusion of a massive army. With only about 300 men, he convinced the American commander to withdraw over 3,000 troops.',\n      simpleQuestion: 'How did de Salaberry trick the Americans at Chateauguay?',\n      simpleChoices: [\n        'He used buglers to make his small army sound much bigger',\n        'He got extra soldiers from Britain just in time',\n        'He used big cannons to stop them',\n        'He flooded the river to block them',\n      ],\n      simpleExplanation: 'De Salaberry had buglers blow horns from many spots in the forest. The Americans thought a huge army was surrounding them. They ran away even though they had way more soldiers.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'chryslers_farm',\n    title: \"Battle of Crysler's Farm\",\n    year: 1813,\n    description:\n      'A small British force defeats a much larger American army at Crysler\\'s Farm on the St. Lawrence River, ending the American campaign against Montreal.',\n    didYouKnow:\n      'At Crysler\\'s Farm on November 11, 1813, about 800 British regulars under Lieutenant Colonel Joseph Morrison defeated over 2,500 Americans in a textbook defensive battle. Combined with de Salaberry\\'s victory at Chateauguay two weeks earlier, the twin defeats ended any realistic American hope of capturing Montreal  Canada\\'s most important city.',\n    primarySource: {\n      quote: 'The enemy\\'s loss must be very considerable... our troops behaved with the greatest gallantry.',\n      attribution: 'Lieutenant Colonel Joseph Morrison, report on the Battle of Crysler\\'s Farm, 1813',\n    },\n    effect: 'British gains +2 troops in Great Lakes. US loses -1 Nationalism.',\n    simpleDescription: 'The British won another battle near the St. Lawrence River. The Americans could not capture Montreal.',\n    simpleDidYouKnow: 'Only 800 British soldiers beat over 2,500 Americans at Crysler\\'s Farm. This plus the loss at Chateauguay meant the Americans could not take Montreal.',\n    simpleEffect: 'The British get 2 extra troops near the Great Lakes. Americans feel less patriotic.',\n    roundRange: [6, 8],\n    apply: ({ playerFaction }) => ({\n      troopBonus: { faction: 'british', count: 2, theater: 'Great Lakes' },\n      nationalismChange: playerFaction === 'us' ? -1 : 0,\n    }),\n    quiz: {\n      question: 'What was the combined effect of the battles of Chateauguay and Crysler\\'s Farm in 1813?',\n      choices: [\n        'They ended the American campaign to capture Montreal',\n        'They gave the Americans control of the St. Lawrence River',\n        'They forced the British to surrender Upper Canada',\n        'They led to an immediate peace treaty',\n      ],\n      correctIndex: 0,\n      explanation: 'The twin defeats at Chateauguay (October) and Crysler\\'s Farm (November) in 1813 ended the American campaign against Montreal. In both battles, smaller British and Canadian forces defeated much larger American armies.',\n      simpleQuestion: 'What happened after the Americans lost at both Chateauguay and Crysler\\'s Farm?',\n      simpleChoices: [\n        'They gave up trying to capture Montreal',\n        'They took control of the St. Lawrence River',\n        'The British surrendered Upper Canada',\n        'Both sides signed a peace treaty right away',\n      ],\n      simpleExplanation: 'After losing both battles, the Americans could not take Montreal. In both fights, small groups of British and Canadian soldiers beat much bigger American armies.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'frenchtown_massacre',\n    title: 'River Raisin Massacre',\n    year: 1813,\n    description:\n      '\"Remember the Raisin!\" After a British and Native victory at Frenchtown, wounded American prisoners are killed  sparking outrage across the frontier.',\n    didYouKnow:\n      'On January 22, 1813, a British-Native force defeated the Americans at the River Raisin near Frenchtown (modern-day Monroe, Michigan). The next day, Native warriors killed dozens of wounded American prisoners. The massacre became a powerful rallying cry  \"Remember the Raisin!\"  that fueled American recruitment in the West for the rest of the war. It remains the deadliest battle ever fought on Michigan soil.',\n    primarySource: {\n      quote: 'Remember the Raisin!',\n      attribution: 'American rallying cry after the Frenchtown massacre, 1813',\n    },\n    effect: 'Native gains +2 troops in Great Lakes. US gains +3 Nationalism (\"Remember the Raisin!\").',\n    simpleDescription: 'After a battle near the River Raisin, wounded American soldiers were killed. Americans were furious and shouted \"Remember the Raisin!\"',\n    simpleDidYouKnow: 'The battle happened where Monroe, Michigan is today. \"Remember the Raisin!\" became a war cry that made many Americans want to join the army.',\n    simpleEffect: 'Native fighters get 2 extra troops near the Great Lakes. Americans feel more patriotic.',\n    roundRange: [3, 5],\n    apply: ({ playerFaction }) => ({\n      troopBonus: { faction: 'native', count: 2, theater: 'Great Lakes' },\n      nationalismChange: playerFaction === 'us' ? 3 : 0,\n    }),\n    quiz: {\n      question: 'What happened at the River Raisin in January 1813 that became a famous rallying cry?',\n      choices: [\n        'Wounded American prisoners were killed after the battle, sparking the cry \"Remember the Raisin!\"',\n        'American forces burned a British supply depot, crying \"Remember the Raisin!\"',\n        'A massive flood destroyed an American fort on the river',\n        'A peace conference on the river broke down and fighting resumed',\n      ],\n      correctIndex: 0,\n      explanation: 'After the British-Native victory at Frenchtown, Native warriors killed dozens of wounded American prisoners. \"Remember the Raisin!\" became a powerful rallying cry that fueled American recruitment for the rest of the war.',\n      simpleQuestion: 'Why did Americans start shouting \"Remember the Raisin!\"?',\n      simpleChoices: [\n        'Because wounded American soldiers were killed after a battle near the River Raisin',\n        'Because Americans burned a British fort on the river',\n        'Because a big flood destroyed an American camp',\n        'Because a peace meeting on the river went wrong',\n      ],\n      simpleExplanation: 'After a battle near the River Raisin, hurt American soldiers who could not fight back were killed. Americans were so angry that \"Remember the Raisin!\" became their battle cry.',\n      reward: { nationalism: 3 },\n      penalty: { troops: -1 },\n    },\n  },\n  {\n    id: 'colonial_marines',\n    title: 'Colonial Marines Form',\n    year: 1814,\n    description:\n      'The British form the Corps of Colonial Marines from formerly enslaved people who escaped to British lines, promising them freedom in exchange for military service.',\n    didYouKnow:\n      'During the war, the British offered freedom to any enslaved person who reached their lines. Roughly 3,000-5,000 people escaped slavery and joined the British, and several hundred formed the Corps of Colonial Marines. These men fought with distinction at the Battle of Bladensburg and in raids along the Chesapeake Bay. After the war, most were resettled as free people in Trinidad, Nova Scotia, or New Brunswick  never returned to slavery.',\n    primarySource: {\n      quote: 'Be it known to all... that all those who may be disposed to emigrate from the United States will... be received on board His Majesty\\'s Ships or Vessels of War.',\n      attribution: 'Vice Admiral Alexander Cochrane, British proclamation, April 1814',\n    },\n    effect: 'British gains +1 troop in Chesapeake Theater. A story of freedom and courage.',\n    simpleDescription: 'Enslaved people escaped to the British side and became soldiers. The British promised them freedom.',\n    simpleDidYouKnow: 'About 3,000 to 5,000 enslaved people escaped to the British during the war. Some became soldiers called Colonial Marines. After the war, they lived as free people.',\n    simpleEffect: 'The British get 1 extra troop near the Chesapeake Bay.',\n    roundRange: [7, 9],\n    apply: () => ({\n      troopBonus: { faction: 'british', count: 1, theater: 'Chesapeake' },\n    }),\n    quiz: {\n      question: 'What did the British promise enslaved people who escaped to their lines during the War of 1812?',\n      choices: [\n        'Freedom and resettlement in British territories after the war',\n        'Payment in gold for each year of military service',\n        'Return to their owners after the war ended',\n        'Land in the American West',\n      ],\n      correctIndex: 0,\n      explanation: 'The British offered freedom to enslaved people who reached their lines. Roughly 3,000-5,000 people escaped slavery during the war. The Corps of Colonial Marines fought with distinction, and most were resettled as free people in Trinidad, Nova Scotia, or New Brunswick.',\n      simpleQuestion: 'What did the British promise enslaved people who came to their side?',\n      simpleChoices: [\n        'They would be free and could live in British lands after the war',\n        'They would be paid in gold for helping',\n        'They would be sent back to their owners when the war ended',\n        'They would get land in the American West',\n      ],\n      simpleExplanation: 'The British promised freedom to enslaved people who escaped to them. Thousands of people escaped slavery this way. After the war, most lived as free people in Canada or the Caribbean.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'nancy_hart',\n    title: \"Nancy Hart's Resistance\",\n    year: 1813,\n    description:\n      'Stories of frontier women like Nancy Hart defending their homes and families spread across the backcountry, symbolizing civilian resilience during wartime.',\n    didYouKnow:\n      'While most famous battles featured male soldiers, women on the frontier played critical roles in the war effort. They defended homesteads, organized supply networks, manufactured ammunition, and served as messengers. In many frontier communities, women were the primary defenders while their husbands were away fighting. Their contributions were rarely recorded in official histories but were essential to sustaining the war effort.',\n    effect: 'US gains +1 Nationalism from civilian determination on the frontier.',\n    simpleDescription: 'Women on the frontier defended their homes and helped the war effort in many ways.',\n    simpleDidYouKnow: 'While men were fighting, women protected homes, made bullets, carried messages, and organized supplies. Their help was very important even though history books often forgot about them.',\n    simpleEffect: 'Americans feel more patriotic because of brave people at home.',\n    roundRange: [5, 8],\n    apply: ({ playerFaction }) => ({\n      nationalismChange: playerFaction === 'us' ? 1 : 0,\n    }),\n    quiz: {\n      question: 'What role did frontier women play during the War of 1812?',\n      choices: [\n        'They defended homesteads, made ammunition, organized supplies, and served as messengers',\n        'They were not involved in the war effort at all',\n        'They only worked as nurses in military hospitals',\n        'They served as official officers in the regular army',\n      ],\n      correctIndex: 0,\n      explanation: 'Frontier women played critical roles during the war  defending homesteads, manufacturing ammunition, organizing supply networks, and serving as messengers. Their contributions were essential but rarely recorded in official histories.',\n      simpleQuestion: 'How did women on the frontier help during the war?',\n      simpleChoices: [\n        'They protected homes, made bullets, carried messages, and organized supplies',\n        'They did not help with the war at all',\n        'They only worked as nurses',\n        'They became officers in the army',\n      ],\n      simpleExplanation: 'Women on the frontier did many important things during the war. They protected their homes, made bullets, carried messages, and organized supplies. Most history books did not write about what they did.',\n      reward: { nationalism: 2 },\n      penalty: { nationalism: -1 },\n    },\n  },\n  {\n    id: 'economic_blockade_impact',\n    title: 'New England Smuggling',\n    year: 1813,\n    description:\n      'As the British blockade tightens, New England merchants defy their own government by smuggling goods to British Canada, deepening the nation\\'s divisions.',\n    didYouKnow:\n      'New England, which had voted heavily against the war, saw smuggling to British Canada as justified civil disobedience. Some New England towns openly traded with the enemy, and the British deliberately left New England ports unblockaded until 1814 to encourage this division. The smuggling was so extensive that much of the British army in Canada was fed by American suppliers. This internal division nearly split the nation apart at the Hartford Convention.',\n    effect: 'US loses -1 Nationalism (division). British gains +1 troop in Maritime.',\n    simpleDescription: 'People in New England did not like the war. Some sold food and supplies to the British enemy.',\n    simpleDidYouKnow: 'The British did not block New England ports at first because they wanted New England to keep trading with them. Some American merchants fed the British army!',\n    simpleEffect: 'Americans feel less united. The British get 1 extra troop near the coast.',\n    roundRange: [5, 8],\n    apply: ({ playerFaction }) => ({\n      nationalismChange: playerFaction === 'us' ? -1 : 0,\n      troopBonus: { faction: 'british', count: 1, theater: 'Maritime' },\n    }),\n    quiz: {\n      question: 'Why did the British deliberately leave New England ports unblockaded early in the war?',\n      choices: [\n        'To encourage New England merchants to keep smuggling goods to British Canada',\n        'Because the British navy was too weak to blockade all American ports',\n        'Because New England had already surrendered to Britain',\n        'To allow their own merchants to trade with New England',\n      ],\n      correctIndex: 0,\n      explanation: 'The British left New England ports open to encourage smuggling and deepen American divisions. New England had voted heavily against the war, and much of the British army in Canada was actually fed by American suppliers from New England.',\n      simpleQuestion: 'Why did the British not block New England ports at first?',\n      simpleChoices: [\n        'They wanted New England to keep selling them food and supplies',\n        'Their navy was not strong enough',\n        'New England had already given up',\n        'They wanted to trade with New England merchants',\n      ],\n      simpleExplanation: 'The British left New England ports open on purpose. They wanted New England merchants to keep selling them food and supplies. This made Americans argue with each other about the war.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'uss_wasp',\n    title: 'USS Wasp Victories',\n    year: 1812,\n    description:\n      'The sloop USS Wasp captures HMS Frolic in a fierce close-range action, proving American sailors can match the Royal Navy ship for ship.',\n    didYouKnow:\n      'The USS Wasp\\'s victory over HMS Frolic in October 1812 was one of several shocking American naval victories that stunned Britain. While the Royal Navy had over 600 warships to America\\'s 16, American frigates and sloops were often better built and better crewed. However, hours after capturing Frolic, both ships were seized by the massive British ship-of-the-line HMS Poictiers  a reminder of Britain\\'s overwhelming naval advantage.',\n    primarySource: {\n      quote: 'In the annals of naval warfare, seldom has there been a more spirited engagement.',\n      attribution: 'Contemporary newspaper account of the Wasp vs. Frolic action, 1812',\n    },\n    effect: 'US gains +2 troops in Maritime territories. Naval glory boosts morale.',\n    simpleDescription: 'The small American ship USS Wasp beat a British warship in a close battle at sea.',\n    simpleDidYouKnow: 'America only had 16 warships while Britain had over 600. But American ships were often built better and had better-trained crews.',\n    simpleEffect: 'The US gets 2 extra troops near the coast.',\n    roundRange: [3, 6],\n    apply: () => ({\n      troopBonus: { faction: 'us', count: 2, theater: 'Maritime' },\n    }),\n    quiz: {\n      question: 'What happened to the USS Wasp just hours after it captured HMS Frolic?',\n      choices: [\n        'Both ships were seized by the massive British ship-of-the-line HMS Poictiers',\n        'The Wasp sailed triumphantly back to Boston Harbor',\n        'A storm sank both ships off the coast of Virginia',\n        'The crew mutinied and surrendered to the British',\n      ],\n      correctIndex: 0,\n      explanation: 'Hours after the Wasp captured the Frolic, both ships were seized by HMS Poictiers  a huge British ship-of-the-line. It was a reminder that while American ships could win individual battles, Britain\\'s overwhelming naval numbers gave it control of the seas.',\n      simpleQuestion: 'What happened right after the USS Wasp beat the British ship?',\n      simpleChoices: [\n        'A much bigger British ship captured both of them',\n        'The Wasp sailed home to a big celebration',\n        'A storm sank both ships',\n        'The crew gave up and joined the British',\n      ],\n      simpleExplanation: 'Right after the Wasp won its battle, a much bigger British ship came along and captured both ships. Even though America could win small battles, Britain had way more ships overall.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'beaver_dams',\n    title: 'Battle of Beaver Dams',\n    year: 1813,\n    description:\n      'Laura Secord walks 20 miles through enemy territory to warn British forces. The resulting ambush at Beaver Dams captures over 500 American troops.',\n    didYouKnow:\n      'Laura Secord overheard American officers discussing their attack plans while they were quartered in her home. She walked 20 miles through swamps, forests, and enemy lines to reach the British outpost at Beaver Dams. Her warning allowed Mohawk warriors under Captain Dominique Ducharme and British troops to prepare a devastating ambush. Over 500 Americans were captured  one of the most complete victories of the entire war.',\n    primarySource: {\n      quote: 'I was determined to put the Americans off the guard, and I was determined to go to warn the British.',\n      attribution: 'Laura Secord, describing her motivation for the dangerous journey',\n    },\n    effect: 'British gains +2 troops in Great Lakes Theater. Laura Secord\\'s courage saves the day.',\n    simpleDescription: 'A brave woman named Laura Secord walked 20 miles to warn the British about an American attack. The British won a big victory.',\n    simpleDidYouKnow: 'Laura Secord heard American soldiers talking about their plans in her own house. She walked through swamps and forests to warn the British. Over 500 Americans were captured.',\n    simpleEffect: 'The British get 2 extra troops near the Great Lakes.',\n    roundRange: [5, 7],\n    apply: () => ({\n      troopBonus: { faction: 'british', count: 2, theater: 'Great Lakes' },\n    }),\n    quiz: {\n      question: 'How did Laura Secord learn about the American attack on Beaver Dams?',\n      choices: [\n        'She overheard American officers discussing plans while quartered in her home',\n        'She intercepted a secret letter from an American spy',\n        'A British scout brought her the information',\n        'She discovered the plans while working at an American hospital',\n      ],\n      correctIndex: 0,\n      explanation: 'American officers were quartered in Secord\\'s home and she overheard their attack plans. She then walked 20 miles through enemy territory to warn the British, enabling an ambush that captured over 500 American troops.',\n      simpleQuestion: 'How did Laura Secord find out about the American attack plan?',\n      simpleChoices: [\n        'She heard American soldiers talking about it in her house',\n        'She found a secret letter from an American spy',\n        'A British scout told her about it',\n        'She learned about it at an American hospital',\n      ],\n      simpleExplanation: 'American soldiers stayed at Laura Secord\\'s house and talked about their plans. She heard them and walked 20 miles through dangerous land to tell the British. Over 500 Americans were captured.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'fort_meigs',\n    title: 'Siege of Fort Meigs',\n    year: 1813,\n    description:\n      'William Henry Harrison holds Fort Meigs against a British-Native siege on the Maumee River, keeping the American foothold in the Northwest.',\n    didYouKnow:\n      'Fort Meigs, built by Harrison on the Maumee River in northwest Ohio, was besieged twice in 1813 by British and Native forces under Henry Procter and Tecumseh. Harrison\\'s troops survived the first siege by building massive earthwork walls that absorbed cannon fire. During a sortie to destroy British batteries, Kentucky reinforcements were ambushed and many were captured and killed  contributing to the \"Remember the Raisin!\" anger on the frontier.',\n    effect: 'US gains +1 troop in Great Lakes Theater. Harrison\\'s defense holds.',\n    simpleDescription: 'General Harrison defended Fort Meigs against a British and Native attack in Ohio.',\n    simpleDidYouKnow: 'Fort Meigs was attacked twice. Harrison built thick dirt walls that stopped cannonballs. The fort held both times.',\n    simpleEffect: 'The US gets 1 extra troop near the Great Lakes.',\n    roundRange: [4, 6],\n    apply: () => ({\n      troopBonus: { faction: 'us', count: 1, theater: 'Great Lakes' },\n    }),\n    quiz: {\n      question: 'How did Harrison\\'s troops at Fort Meigs survive British cannon bombardment?',\n      choices: [\n        'They built massive earthwork walls that absorbed the cannonballs',\n        'They dug underground tunnels to escape the shelling',\n        'They launched a surprise night attack on the British cannons',\n        'They received reinforcements from Lake Erie by boat',\n      ],\n      correctIndex: 0,\n      explanation: 'Harrison\\'s troops built massive earthwork walls that absorbed cannon fire. The fort survived two sieges in 1813, maintaining the American foothold in the Northwest until Perry\\'s victory on Lake Erie changed the balance of power.',\n      simpleQuestion: 'How did the soldiers at Fort Meigs protect themselves from cannonballs?',\n      simpleChoices: [\n        'They built very thick dirt walls that stopped the cannonballs',\n        'They dug tunnels underground to hide',\n        'They attacked the British cannons at night',\n        'They got help from boats on Lake Erie',\n      ],\n      simpleExplanation: 'The soldiers built really thick walls out of dirt. The cannonballs just got stuck in the dirt! The fort survived two attacks.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'detroit_recaptured',\n    title: 'Recapture of Detroit',\n    year: 1813,\n    description:\n      'After Perry\\'s victory on Lake Erie, American forces retake Detroit without a fight. The humiliation of Hull\\'s surrender is avenged.',\n    didYouKnow:\n      'After Perry\\'s victory gave the Americans control of Lake Erie in September 1813, the British position at Detroit became untenable. British commander Henry Procter abandoned Detroit and retreated east along the Thames River, pursued by Harrison\\'s army. The recapture of Detroit  lost in the war\\'s most embarrassing moment  was a major morale boost for the American public.',\n    effect: 'If US does not control Detroit, they reclaim it with 3 troops.',\n    simpleDescription: 'After winning on Lake Erie, the Americans took back Detroit. The British had to run away.',\n    simpleDidYouKnow: 'When the Americans won on Lake Erie, the British could no longer get supplies to Detroit. They left the city and tried to escape, but the Americans chased them.',\n    simpleEffect: 'If the US lost Detroit, they get it back with 3 troops.',\n    roundRange: [6, 8],\n    apply: ({ territoryOwners }) => {\n      if (territoryOwners.detroit !== 'us') {\n        return {\n          territoryChange: { territory: 'detroit', newOwner: 'us' },\n          troopBonus: { faction: 'us', count: 3, territories: ['detroit'] },\n          nationalismChange: 3,\n        };\n      }\n      return { nationalismChange: 1 };\n    },\n    quiz: {\n      question: 'Why did the British abandon Detroit in 1813?',\n      choices: [\n        'Perry\\'s victory on Lake Erie cut off their supply line',\n        'A massive American army attacked from three directions',\n        'Native allies refused to defend the city',\n        'A fire destroyed the British fortifications',\n      ],\n      correctIndex: 0,\n      explanation: 'After Perry won the Battle of Lake Erie, the British could no longer supply or reinforce Detroit by water. Commander Procter abandoned the city and retreated east, where Harrison\\'s army caught and defeated him at the Battle of the Thames.',\n      simpleQuestion: 'Why did the British leave Detroit?',\n      simpleChoices: [\n        'The Americans won on Lake Erie so the British could not get supplies',\n        'A huge American army attacked from all sides',\n        'Native fighters would not help defend the city',\n        'A fire burned down the British walls',\n      ],\n      simpleExplanation: 'When Perry won the battle on Lake Erie, the British could not get food or supplies to Detroit anymore. They had to leave the city and run away.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'native_displacement',\n    title: 'Native Removal Begins',\n    year: 1815,\n    description:\n      'With the war over and British support gone, American settlers flood into Native territories. Forced removal and treaty violations accelerate across the frontier.',\n    didYouKnow:\n      'The Treaty of Ghent (1814) included provisions for restoring Native lands to pre-war boundaries, but the United States largely ignored these terms. Without British military support, Native nations had no leverage to enforce treaty provisions. Within 15 years, the Indian Removal Act of 1830 would force tens of thousands of Native people from their ancestral homelands on the Trail of Tears  a direct consequence of the power shift caused by the War of 1812.',\n    effect: 'Native Coalition loses -2 troops across all territories. The post-war displacement begins.',\n    simpleDescription: 'After the war, Americans moved onto Native lands. The promises made in the peace treaty were broken.',\n    simpleDidYouKnow: 'The peace treaty said Native lands should be given back. But America did not follow the treaty. Within 15 years, thousands of Native people would be forced to leave their homes.',\n    simpleEffect: 'The Native Coalition loses 2 troops everywhere.',\n    roundRange: [10, 12],\n    apply: () => ({\n      troopPenalty: { faction: 'native', count: 2 },\n    }),\n    quiz: {\n      question: 'What happened to the Treaty of Ghent\\'s provisions about restoring Native lands?',\n      choices: [\n        'The United States largely ignored them and continued expanding into Native territory',\n        'They were fully honored, and all Native lands were restored',\n        'Britain enforced the terms with military force',\n        'Native nations voluntarily gave up their land claims',\n      ],\n      correctIndex: 0,\n      explanation: 'Although the Treaty of Ghent included provisions to restore Native lands, the U.S. largely ignored them. Without British military backing, Native nations had no way to enforce the treaty. This led to the Indian Removal Act and the Trail of Tears.',\n      simpleQuestion: 'Did America follow the peace treaty\\'s rules about giving back Native lands?',\n      simpleChoices: [\n        'No  America ignored the rules and kept taking Native land',\n        'Yes  all Native lands were given back',\n        'Britain made America follow the rules',\n        'Native nations decided they did not want their land back',\n      ],\n      simpleExplanation: 'America did not follow the rules about Native land. Without the British to help them, Native nations could not make America keep its promises. This led to even more Native people losing their homes.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n  {\n    id: 'war_financing',\n    title: 'War Debt Crisis',\n    year: 1814,\n    description:\n      'Both sides struggle to pay for the war. The American treasury is nearly bankrupt, and British taxpayers demand an end to expensive overseas campaigns.',\n    didYouKnow:\n      'By 1814, the U.S. government was nearly bankrupt. New England banks refused to lend money to fund a war they opposed, and the British blockade had destroyed customs revenue  the government\\'s main income source. Britain, meanwhile, had spent over 20 years fighting Napoleon and its people were exhausted. Both sides\\' financial desperation was a major factor in bringing them to the peace table at Ghent.',\n    effect: 'Both factions lose -1 troop from war exhaustion.',\n    simpleDescription: 'Both America and Britain were running out of money. The war was too expensive for everyone.',\n    simpleDidYouKnow: 'The American government was almost out of money. Banks in New England would not lend money for a war they did not like. Britain had been fighting wars for 20 years and was tired too.',\n    simpleEffect: 'Both sides lose 1 troop because everyone is running out of supplies.',\n    roundRange: [8, 10],\n    apply: () => ({\n      troopPenalty: { faction: 'us', count: 1 },\n      troopPenalty2: { faction: 'british', count: 1 },\n    }),\n    quiz: {\n      question: 'Why was the U.S. government nearly bankrupt by 1814?',\n      choices: [\n        'New England banks refused to lend money and the British blockade destroyed customs revenue',\n        'Congress had voted to stop funding the war',\n        'The army had spent all the money on building forts',\n        'France demanded repayment of Revolutionary War debts',\n      ],\n      correctIndex: 0,\n      explanation: 'By 1814, New England banks refused to fund a war they opposed, and the British blockade destroyed customs revenue  the government\\'s main income. This financial crisis was a major factor pushing both sides toward peace at Ghent.',\n      simpleQuestion: 'Why did the American government run out of money during the war?',\n      simpleChoices: [\n        'Banks would not lend money and the British blockade stopped trade income',\n        'Congress voted to stop paying for the war',\n        'The army spent everything on building forts',\n        'France wanted old debts paid back',\n      ],\n      simpleExplanation: 'Banks in New England would not lend money because they did not want the war. The British also blocked ships from coming in, so the government could not collect taxes on trade. Both sides were running out of money.',\n      reward: { troops: 1 },\n      penalty: { nationalism: -2 },\n    },\n  },\n];\n\n/**\n * Draw a random event card appropriate for the current round.\n * Returns a card object or null if no matching cards exist.\n */\nexport function drawEventCard(round, usedCardIds = []) {\n  const available = eventCards.filter(\n    (card) =>\n      !usedCardIds.includes(card.id) &&\n      (!card.roundRange || (round >= card.roundRange[0] && round <= card.roundRange[1]))\n  );\n\n  if (available.length === 0) return null;\n  return available[Math.floor(Math.random() * available.length)];\n}\n\nexport default eventCards;\n","/**\n * Knowledge Check Questions for War of 1812: Rise of the Nation\n *\n * Multiple-choice questions that appear each round to test students'\n * understanding of the historical content. Correct answers give a small\n * in-game bonus (extra troops or nationalism).\n *\n * Questions are tied to round ranges so they appear after the student has\n * seen the relevant event cards and context. Each question includes a\n * detailed explanation to reinforce learning.\n *\n * Categories:\n *   - Causes & Context (rounds 1-4)\n *   - Military Campaigns (rounds 3-8)\n *   - Key Figures (rounds 1-12)\n *   - Naval Warfare (rounds 3-9)\n *   - Home Front & Society (rounds 5-12)\n *   - Diplomacy & Legacy (rounds 9-12)\n */\n\nconst knowledgeChecks = [\n  // \n  // CAUSES & CONTEXT (Early War, Rounds 1-4)\n  // \n  {\n    id: 'kc_war_causes',\n    question: 'Which of the following was a major cause of the War of 1812?',\n    choices: [\n      'British impressment of American sailors',\n      'Dispute over the Louisiana Purchase',\n      'The assassination of a U.S. diplomat',\n      'A trade war with France',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Britain was forcibly recruiting (impressing) American sailors into the Royal Navy, which was a primary cause of the war. Between 1803 and 1812, the British impressed an estimated 6,000-10,000 American citizens.',\n    simpleQuestion: 'What was one big reason the United States went to war with Britain in 1812?',\n    simpleChoices: [\n      'Britain was taking American sailors and making them work on British ships',\n      'The two countries argued about the Louisiana Purchase',\n      'Someone killed a U.S. leader in another country',\n      'America and France were fighting over trade',\n    ],\n    simpleExplanation:\n      'Britain forced American sailors to work on British ships. This was called impressment. It made Americans very angry and helped start the war.',\n    roundRange: [2, 4],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_war_hawks',\n    question: 'Who were the \"War Hawks\" and what did they want?',\n    choices: [\n      'Congressmen who pushed for war with Britain and expansion into Canada',\n      'British generals planning the invasion of Washington D.C.',\n      'Native American leaders allied with Tecumseh',\n      'A group of New England merchants opposed to the war',\n    ],\n    correctIndex: 0,\n    explanation:\n      'War Hawks like Henry Clay (Kentucky) and John C. Calhoun (South Carolina) were young Congressional leaders who demanded war with Britain. They saw an opportunity to expand into British Canada and end British support for Native resistance on the frontier.',\n    simpleQuestion: 'Who were the \"War Hawks\" and what did they want?',\n    simpleChoices: [\n      'Members of Congress who wanted to go to war with Britain and take over Canada',\n      'British generals who planned to attack Washington D.C.',\n      'Native American leaders who worked with Tecumseh',\n      'Merchants from New England who did not want the war',\n    ],\n    simpleExplanation:\n      'The War Hawks were young leaders in Congress like Henry Clay. They wanted to fight Britain and take over Canada. They also wanted to stop Britain from helping Native Americans on the frontier.',\n    roundRange: [1, 3],\n    reward: { type: 'nationalism', count: 3, description: '+3 Nationalism' },\n  },\n  {\n    id: 'kc_war_declaration',\n    question: 'How close was the vote to declare war on Britain in 1812?',\n    choices: [\n      'It was the closest war vote in U.S. history  79-49 in the House, 19-13 in the Senate',\n      'It was unanimous  every member of Congress voted for war',\n      'Congress never voted  the President declared war unilaterally',\n      'It passed overwhelmingly with only 3 dissenting votes',\n    ],\n    correctIndex: 0,\n    explanation:\n      'The War of 1812 was declared by the narrowest margin of any war vote in American history. New England and the Federalist Party largely opposed the war, while Southern and Western states supported it. This regional divide would shape the entire conflict.',\n    simpleQuestion: 'How close was the vote in Congress to start the War of 1812?',\n    simpleChoices: [\n      'It was the closest war vote ever  many people in Congress voted no',\n      'Everyone in Congress voted yes for the war',\n      'Congress never voted  the President started the war on his own',\n      'Almost everyone voted yes with only 3 people saying no',\n    ],\n    simpleExplanation:\n      'The vote to start the war was very close. It was the closest war vote in American history. People in the North mostly said no, and people in the South and West mostly said yes.',\n    roundRange: [1, 3],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_orders_in_council',\n    question: 'What were the British \"Orders in Council\" that angered Americans?',\n    choices: [\n      'Decrees that restricted neutral nations from trading with France and its allies',\n      'Military orders to invade the American frontier',\n      'Laws banning American ships from British ports',\n      'Orders to arm Native Americans with British weapons',\n    ],\n    correctIndex: 0,\n    explanation:\n      'The Orders in Council (1807) were British trade restrictions during the Napoleonic Wars that prohibited neutral countries (including the U.S.) from trading with France. American merchants lost ships and cargoes, fueling anger toward Britain. Ironically, Britain repealed the Orders just days before the U.S. declared war  but news traveled too slowly to prevent the conflict.',\n    simpleQuestion: 'What were the British \"Orders in Council\" that made Americans angry?',\n    simpleChoices: [\n      'Rules that stopped America from trading with France and other countries',\n      'Orders for the British army to attack the American frontier',\n      'Laws that kept American ships out of British ports',\n      'Orders to give weapons to Native Americans',\n    ],\n    simpleExplanation:\n      'The Orders in Council were British rules that stopped Americans from trading with France. American merchants lost their ships and goods. This made Americans very angry at Britain.',\n    roundRange: [1, 4],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n    required: true,\n  },\n  {\n    id: 'kc_embargo_act',\n    question: 'What was the Embargo Act of 1807 and why did it fail?',\n    choices: [\n      'A U.S. trade ban on all foreign nations that hurt American merchants more than Britain',\n      'A British law blocking all American trade with Europe',\n      'A French blockade of the American coast',\n      'A treaty between the U.S. and Spain restricting trade',\n    ],\n    correctIndex: 0,\n    explanation:\n      'President Jefferson\\'s Embargo Act banned all U.S. foreign trade, hoping to pressure Britain and France. Instead, it devastated the American economy  especially in New England  while barely affecting Britain. It was repealed in 1809 and replaced with weaker measures, but the failure convinced many Americans that only war could protect their rights.',\n    simpleQuestion: 'What was the Embargo Act of 1807 and why did it not work?',\n    simpleChoices: [\n      'A U.S. law that stopped all trade with other countries but hurt Americans more than Britain',\n      'A British law that blocked American trade with Europe',\n      'A French plan to stop ships from reaching America',\n      'A deal between the U.S. and Spain to limit trade',\n    ],\n    simpleExplanation:\n      'President Jefferson banned all trade with other countries. He hoped this would hurt Britain. But it hurt American businesses much more, so it was ended in 1809.',\n    roundRange: [1, 3],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n\n  // \n  // KEY FIGURES (Spans the whole war)\n  // \n  {\n    id: 'kc_tecumseh',\n    question: \"What was Tecumseh's primary goal in the War of 1812?\",\n    choices: [\n      'To create a unified Native confederacy to resist American expansion',\n      'To become the governor of Indiana Territory',\n      'To help the British conquer all of North America',\n      'To negotiate a peace treaty with the United States',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Tecumseh, a Shawnee leader, sought to unite dozens of Native nations into a confederacy strong enough to stop American settlers from taking Native lands in the Northwest Territory. His vision was one of the most ambitious pan-Native political movements in history, and his alliance with Britain gave his confederacy military support.',\n    simpleQuestion: 'What was Tecumseh trying to do during the War of 1812?',\n    simpleChoices: [\n      'He wanted to bring Native nations together to stop Americans from taking their land',\n      'He wanted to become the governor of Indiana',\n      'He wanted to help Britain take over all of North America',\n      'He wanted to make a peace deal with the United States',\n    ],\n    simpleExplanation:\n      'Tecumseh was a Shawnee leader. He wanted to unite many Native nations into one group. Together, they could stop American settlers from taking Native lands.',\n    roundRange: [1, 4],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_hull_detroit',\n    question: \"Why was General Hull's surrender of Detroit significant?\",\n    choices: [\n      'It was a shocking defeat that embarrassed the American military early in the war',\n      'It ended the War of 1812 immediately',\n      'It gave the Americans control of Lake Erie',\n      'It led to the burning of Washington D.C.',\n    ],\n    correctIndex: 0,\n    explanation:\n      'General William Hull surrendered Fort Detroit to a smaller British and Native force under General Brock without a fight in August 1812. Brock bluffed Hull into believing he faced overwhelming numbers and that Native warriors would massacre civilians. The shocking surrender demoralized the nation and led to Hull\\'s court-martial.',\n    simpleQuestion: 'Why was General Hull giving up Detroit a big deal?',\n    simpleChoices: [\n      'It was a shocking loss that made Americans feel bad about the war early on',\n      'It ended the War of 1812 right away',\n      'It gave Americans control of Lake Erie',\n      'It caused the British to burn Washington D.C.',\n    ],\n    simpleExplanation:\n      'General Hull gave up Fort Detroit without a fight. The British tricked him into thinking they had more soldiers. This loss shocked the whole country early in the war.',\n    roundRange: [2, 4],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n  {\n    id: 'kc_brock',\n    question: 'Why is Sir Isaac Brock remembered as the \"Hero of Upper Canada\"?',\n    choices: [\n      'He captured Detroit and died defending Niagara at Queenston Heights',\n      'He signed the Treaty of Ghent ending the war',\n      'He led the burning of Washington D.C.',\n      'He defeated the American navy on Lake Erie',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Major General Isaac Brock captured Detroit through brilliant bluffing and aggressive action, then rushed to defend the Niagara frontier. He was killed leading a charge at the Battle of Queenston Heights in October 1812. His early victories saved Upper Canada from American invasion and made him a Canadian national hero.',\n    simpleQuestion: 'Why is Sir Isaac Brock called the \"Hero of Upper Canada\"?',\n    simpleChoices: [\n      'He captured Detroit and died fighting at the Battle of Queenston Heights',\n      'He signed the peace treaty that ended the war',\n      'He led the attack that burned Washington D.C.',\n      'He beat the American navy on Lake Erie',\n    ],\n    simpleExplanation:\n      'General Brock tricked the Americans and captured Detroit. Then he fought to protect Canada at Queenston Heights, where he died. Canadians see him as a great hero.',\n    roundRange: [2, 5],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_tenskwatawa',\n    question: 'Who was Tenskwatawa, and what role did he play in the Native resistance?',\n    choices: [\n      'Tecumseh\\'s brother, a spiritual leader known as \"The Prophet\" who inspired Native unity',\n      'A British general who commanded Native forces',\n      'An American diplomat who negotiated with Native nations',\n      'A French fur trader who supplied weapons to the Natives',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Tenskwatawa (\"The Prophet\") was Tecumseh\\'s brother who led a spiritual revitalization movement among Native peoples. He preached rejection of American customs and a return to traditional ways. He established Prophetstown on the Tippecanoe River, which became the center of the resistance movement until Harrison destroyed it in 1811.',\n    simpleQuestion: 'Who was Tenskwatawa and what did he do?',\n    simpleChoices: [\n      'Tecumseh\\'s brother, a spiritual leader called \"The Prophet\" who helped unite Native peoples',\n      'A British general who led Native fighters',\n      'An American leader who talked with Native nations',\n      'A French fur trader who gave weapons to Native peoples',\n    ],\n    simpleExplanation:\n      'Tenskwatawa was Tecumseh\\'s brother. People called him \"The Prophet.\" He told Native peoples to keep their traditions and not follow American ways. He built a town called Prophetstown.',\n    roundRange: [1, 5],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n  {\n    id: 'kc_jackson_background',\n    question: 'Before the War of 1812, Andrew Jackson was known primarily as:',\n    choices: [\n      'A Tennessee militia commander and frontier politician',\n      'A distinguished naval officer',\n      'The Governor of Louisiana Territory',\n      'A West Point military academy professor',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Jackson was a self-made frontier lawyer, congressman, and militia general from Tennessee. He had no formal military training but was known for his iron will and fierce temper. The War of 1812 transformed him from a regional figure into a national hero, ultimately leading to his presidency in 1828.',\n    simpleQuestion: 'What was Andrew Jackson known for before the War of 1812?',\n    simpleChoices: [\n      'He was a militia leader and politician from Tennessee',\n      'He was a famous Navy officer',\n      'He was the Governor of Louisiana',\n      'He was a teacher at a military school',\n    ],\n    simpleExplanation:\n      'Andrew Jackson was a lawyer and militia leader from Tennessee. He never went to military school. The War of 1812 made him famous across the whole country.',\n    roundRange: [5, 9],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_laura_secord',\n    question: 'How did Laura Secord contribute to the British war effort?',\n    choices: [\n      'She walked 20 miles through enemy territory to warn British forces of an American attack',\n      'She commanded a regiment of Canadian volunteers',\n      'She nursed wounded soldiers at Fort York',\n      'She carried supplies across Lake Ontario in a rowboat',\n    ],\n    correctIndex: 0,\n    explanation:\n      'In June 1813, Laura Secord overheard American officers planning a surprise attack on the British outpost at Beaver Dams. She walked 20 miles through swamps and forest to warn Lieutenant FitzGibbon. The resulting British-Native ambush captured over 500 American troops. Secord is one of Canada\\'s most celebrated heroes of the war.',\n    simpleQuestion: 'How did Laura Secord help the British during the war?',\n    simpleChoices: [\n      'She walked 20 miles through enemy land to warn British soldiers about an American attack',\n      'She led a group of Canadian fighters',\n      'She took care of hurt soldiers at Fort York',\n      'She rowed supplies across Lake Ontario',\n    ],\n    simpleExplanation:\n      'Laura Secord heard American officers planning a surprise attack. She walked 20 miles through swamps and forests to warn the British. The British set a trap and captured over 500 American soldiers.',\n    roundRange: [4, 7],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_mary_pickersgill',\n    question: 'Who made the enormous flag that flew over Fort McHenry during the British bombardment?',\n    choices: [\n      'Mary Pickersgill and her daughter Caroline, professional flagmakers in Baltimore',\n      'Betsy Ross in Philadelphia',\n      'Dolley Madison at the White House',\n      'British sailors who left it behind when they retreated',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Mary Pickersgill was a skilled flagmaker who ran a successful business in Baltimore. In 1813, she and her 13-year-old daughter Caroline sewed the massive 30-by-42-foot garrison flag for Fort McHenry. The flag contained 15 stars and 15 stripes and required over 400 yards of fabric. This is the flag Francis Scott Key saw \"still waving\" after the 25-hour bombardment, inspiring \"The Star-Spangled Banner.\" Pickersgill\\'s work became one of the most important symbols in American history.',\n    simpleQuestion: 'Who made the big flag that flew over Fort McHenry during the British attack?',\n    simpleChoices: [\n      'Mary Pickersgill and her daughter Caroline, who made flags in Baltimore',\n      'Betsy Ross in Philadelphia',\n      'Dolley Madison at the White House',\n      'British sailors who left it behind when they left',\n    ],\n    simpleExplanation:\n      'Mary Pickersgill and her daughter Caroline sewed a huge flag for Fort McHenry. It was 30 by 42 feet. This is the flag that inspired \"The Star-Spangled Banner.\"',\n    roundRange: [9, 12],\n    reward: { type: 'nationalism', count: 3, description: '+3 Nationalism' },\n  },\n  {\n    id: 'kc_women_home_front',\n    question: 'How did women on the home front contribute to the American war effort?',\n    choices: [\n      'They managed farms, businesses, and plantations while men were away fighting',\n      'They were forbidden from working outside the home during the war',\n      'They mostly stayed in cities and avoided any involvement in the war',\n      'They only contributed by writing letters to soldiers',\n    ],\n    correctIndex: 0,\n    explanation:\n      'When men left to fight, women took on critical economic roles that kept communities functioning. Farm women managed entire agricultural operations, making decisions about planting, harvesting, and selling crops. Business owners\\' wives ran shops, taverns, and trade operations. Plantation mistresses supervised labor forces and production. Many women also organized aid for soldiers, producing supplies like bandages and uniforms. Their work demonstrated women\\'s capability to manage complex economic enterprises and challenged traditional gender roles.',\n    simpleQuestion: 'How did women help during the war while men were away fighting?',\n    simpleChoices: [\n      'They ran farms, shops, and businesses while the men were gone',\n      'They were not allowed to work outside the home during the war',\n      'They stayed in cities and did not get involved in the war',\n      'They only helped by writing letters to soldiers',\n    ],\n    simpleExplanation:\n      'When men left to fight, women took over important jobs. They ran farms, shops, and businesses. They also made supplies like bandages and uniforms for soldiers.',\n    roundRange: [3, 10],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_native_women',\n    question: 'What roles did Native American women play during the War of 1812?',\n    choices: [\n      'They participated in tribal councils, advocated for peace or war, and maintained communities during conflict',\n      'They had no political voice and were excluded from all war decisions',\n      'They fought in battles alongside men as warriors',\n      'They all fled to Canada before the fighting began',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Native American women held important political and social roles during the war. In many nations, including the Iroquois Confederacy, women participated in council meetings and influenced decisions about alliances and warfare. Some advocated for neutrality to protect their communities, while others supported joining British or American forces. Women also maintained food production, preserved cultural practices, and cared for refugees displaced by fighting. When Tecumseh traveled to recruit allies, he often addressed both male and female leaders. Their experiences show the diversity of Native responses to the war and women\\'s significant political agency.',\n    simpleQuestion: 'What did Native American women do during the War of 1812?',\n    simpleChoices: [\n      'They helped make decisions in councils, spoke for peace or war, and kept their communities going',\n      'They had no voice and were kept out of all war decisions',\n      'They fought in battles as warriors alongside men',\n      'They all ran away to Canada before the fighting started',\n    ],\n    simpleExplanation:\n      'Native American women played important roles during the war. In many nations, women helped make decisions about war and peace. They also grew food and took care of people who lost their homes.',\n    roundRange: [2, 8],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n    required: true,\n  },\n  {\n    id: 'kc_women_manufacturing',\n    question: 'How did the British blockade affect American women workers?',\n    choices: [\n      'Thousands of women found jobs in new textile mills and factories producing war supplies',\n      'Women lost all employment opportunities during the war',\n      'Only wealthy women were allowed to work in factories',\n      'The blockade had no effect on women\\'s employment',\n    ],\n    correctIndex: 0,\n    explanation:\n      'The British naval blockade cut off imported British cloth and manufactured goods, forcing Americans to produce their own. This created a manufacturing boom, especially in New England textile mills. Young women from farming families became some of the first factory workers in America, operating spinning machines and looms. Women also produced military supplies like uniforms, tents, and cartridges. In some towns, women organized \"sewing circles\" to make clothing for soldiers. This wartime work accelerated American industrialization and gave women new economic opportunities, though factory conditions were often difficult and dangerous.',\n    simpleQuestion: 'How did the British blockade change work for American women?',\n    simpleChoices: [\n      'Many women got new jobs in factories making cloth and war supplies',\n      'Women lost all their jobs during the war',\n      'Only rich women were allowed to work in factories',\n      'The blockade did not change anything for women',\n    ],\n    simpleExplanation:\n      'The British blockade stopped cloth and goods from coming to America. Americans had to make their own. Many women started working in new factories making cloth, uniforms, and supplies.',\n    roundRange: [5, 12],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_frontier_women',\n    question: 'What challenges did frontier women face during the War of 1812?',\n    choices: [\n      'They defended homesteads from raids, evacuated families during attacks, and survived as refugees',\n      'They lived in peaceful areas unaffected by the fighting',\n      'They all moved to eastern cities for safety',\n      'The government provided them with military protection at all times',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Women on the frontier faced extreme danger as warfare swept through their communities. In areas like the Ohio Valley and the Canadian border, raids by various military forces destroyed homes and crops. Some women defended their cabins with rifles when attacks came. Many became refugees, fleeing with children to forts or safer territories, often walking for days with few supplies. Women like those at Fort Harrison (Indiana) helped defend the stockade during siege. After battles, women searched for missing family members and tried to rebuild destroyed farms. Their resilience was essential to frontier survival, though their stories are often overlooked.',\n    simpleQuestion: 'What problems did women on the frontier face during the War of 1812?',\n    simpleChoices: [\n      'They protected their homes from attacks, fled with their children, and lived as refugees',\n      'They lived in safe areas away from all the fighting',\n      'They all moved to big cities in the East for safety',\n      'The government sent soldiers to protect them at all times',\n    ],\n    simpleExplanation:\n      'Women on the frontier faced great danger during the war. Attacks destroyed their homes and farms. Many women had to protect their families and run to safer places with their children.',\n    roundRange: [2, 9],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n\n  // \n  // MILITARY CAMPAIGNS (Mid War, Rounds 3-8)\n  // \n  {\n    id: 'kc_perry',\n    question: 'What famous message did Oliver Hazard Perry send after his victory on Lake Erie?',\n    choices: [\n      '\"We have met the enemy and they are ours\"',\n      '\"Don\\'t give up the ship\"',\n      '\"I have not yet begun to fight\"',\n      '\"Damn the torpedoes, full speed ahead\"',\n    ],\n    correctIndex: 0,\n    explanation:\n      'After defeating the British fleet on Lake Erie on September 10, 1813, Perry sent this famous message to General Harrison. The victory gave the Americans control of Lake Erie, cut British supply lines, and forced the British to abandon Detroit  changing the war\\'s trajectory in the Great Lakes.',\n    simpleQuestion: 'What famous message did Oliver Hazard Perry send after winning on Lake Erie?',\n    simpleChoices: [\n      '\"We have met the enemy and they are ours\"',\n      '\"Don\\'t give up the ship\"',\n      '\"I have not yet begun to fight\"',\n      '\"Full speed ahead\"',\n    ],\n    simpleExplanation:\n      'Perry beat the British fleet on Lake Erie in 1813. He sent the famous message \"We have met the enemy and they are ours.\" This victory gave Americans control of Lake Erie.',\n    roundRange: [5, 7],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_napoleon',\n    question: 'How did the Napoleonic Wars in Europe affect the War of 1812?',\n    choices: [\n      \"When Napoleon was defeated, Britain sent experienced troops to fight in America\",\n      'Napoleon sent French troops to help the Americans',\n      'The wars had no effect on events in North America',\n      'Napoleon invaded Canada during the War of 1812',\n    ],\n    correctIndex: 0,\n    explanation:\n      \"Napoleon's defeat freed up thousands of battle-hardened British veterans who were then sent to North America in 1814. These Peninsular War veterans significantly strengthened British forces, enabling the burning of Washington and the major offensives at Baltimore, Plattsburgh, and New Orleans.\",\n    simpleQuestion: 'How did the wars in Europe affect the War of 1812?',\n    simpleChoices: [\n      'When Napoleon lost in Europe, Britain sent experienced soldiers to fight in America',\n      'Napoleon sent French soldiers to help America',\n      'The wars in Europe did not affect the war in America',\n      'Napoleon attacked Canada during the War of 1812',\n    ],\n    simpleExplanation:\n      'Britain was fighting Napoleon in Europe at the same time. When Napoleon lost, Britain sent thousands of experienced soldiers to America. This made the British army much stronger.',\n    roundRange: [5, 8],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n  {\n    id: 'kc_creek_war',\n    question: 'The Creek War (1813-1814) was connected to the War of 1812 because:',\n    choices: [\n      'Some Creek factions allied with the British against American expansion in the South',\n      'The Creek Nation declared war on Canada',\n      'American troops invaded Creek territory to reach the Pacific Ocean',\n      'The Creek supplied weapons to the British Navy',\n    ],\n    correctIndex: 0,\n    explanation:\n      'The Red Stick faction of the Creek Nation, inspired by Tecumseh and supported by British and Spanish agents, fought against American expansion in the Southern frontier. Andrew Jackson\\'s campaign against the Red Sticks culminated at the Battle of Horseshoe Bend (1814), which broke Creek resistance and opened vast lands for American settlement.',\n    simpleQuestion: 'How was the Creek War connected to the War of 1812?',\n    simpleChoices: [\n      'Some Creek people joined with the British to fight against American settlers in the South',\n      'The Creek Nation went to war against Canada',\n      'American soldiers went through Creek land to reach the Pacific Ocean',\n      'The Creek gave weapons to the British Navy',\n    ],\n    simpleExplanation:\n      'Some Creek people, called the Red Sticks, joined the British side. They fought against American settlers in the South. Andrew Jackson defeated them at the Battle of Horseshoe Bend in 1814.',\n    roundRange: [5, 8],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_york_burning',\n    question: 'What happened when Americans captured York (modern-day Toronto) in 1813?',\n    choices: [\n      'They burned government buildings, which later motivated the British burning of Washington',\n      'They established a permanent American military base in Canada',\n      'They freed hundreds of British prisoners of war',\n      'Nothing  the Americans left immediately after capturing the city',\n    ],\n    correctIndex: 0,\n    explanation:\n      'In April 1813, American forces captured and burned the Parliament buildings and other public structures in York, the capital of Upper Canada. This act of destruction enraged the British and Canadians. When British forces later burned Washington D.C. in 1814, they explicitly cited the burning of York as justification  showing how the war escalated through retaliation.',\n    simpleQuestion: 'What happened when Americans captured York (now called Toronto) in 1813?',\n    simpleChoices: [\n      'They burned government buildings, which later made the British burn Washington D.C.',\n      'They set up a permanent American army base in Canada',\n      'They freed hundreds of British prisoners',\n      'Nothing  the Americans left the city right away',\n    ],\n    simpleExplanation:\n      'American soldiers captured York and burned the government buildings there. This made the British very angry. Later, the British burned Washington D.C. to get back at the Americans.',\n    roundRange: [4, 7],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n  {\n    id: 'kc_thames',\n    question: 'What was the significance of the Battle of the Thames (1813)?',\n    choices: [\n      'Tecumseh was killed, shattering the Native confederacy and ending British influence in the Northwest',\n      'The British captured Detroit for the second time',\n      'The Americans lost control of Lake Ontario',\n      'It was the final battle of the war',\n    ],\n    correctIndex: 0,\n    explanation:\n      'The Battle of the Thames (October 5, 1813) was a decisive American victory in Ontario. Tecumseh was killed and the British retreated. Without Tecumseh\\'s leadership, the Native confederacy fractured. The battle effectively ended the Native military threat in the Northwest and restored American control over Detroit and the Michigan frontier.',\n    simpleQuestion: 'Why was the Battle of the Thames in 1813 so important?',\n    simpleChoices: [\n      'Tecumseh was killed, which broke apart the Native alliance and ended British power in the area',\n      'The British captured Detroit for the second time',\n      'The Americans lost control of Lake Ontario',\n      'It was the last battle of the whole war',\n    ],\n    simpleExplanation:\n      'Tecumseh was killed at this battle. Without him, the Native alliance fell apart. The British lost their power in the Northwest, and Americans took back control of Detroit.',\n    roundRange: [5, 8],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n\n  // \n  // AFRICAN AMERICAN PARTICIPATION (Rounds 3-10)\n  // \n  {\n    id: 'kc_african_american_navy',\n    question: 'What role did African Americans play in the U.S. Navy during the War of 1812?',\n    choices: [\n      'About 15-20% of American sailors were free Black men who served as equals alongside white sailors',\n      'African Americans were prohibited from all military service',\n      'They only served as cooks and servants, never as combat sailors',\n      'Only enslaved people were allowed to serve, not free Black men',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Free Black men made up an estimated 15-20% of the U.S. Navy during the War of 1812. Unlike the Army, the Navy offered relatively equal treatment  Black and white sailors received the same pay, shared the same quarters, and fought side-by-side. Many served on famous ships like USS Constitution and played crucial roles in naval victories. At the Battle of Lake Erie, Oliver Hazard Perry praised his Black sailors for their bravery.',\n    simpleQuestion: 'What role did African Americans play in the U.S. Navy during the war?',\n    simpleChoices: [\n      'About 1 out of every 5 American sailors were free Black men who worked as equals with white sailors',\n      'African Americans were not allowed to serve in the military',\n      'They only worked as cooks, never as fighters',\n      'Only enslaved people could serve, not free Black men',\n    ],\n    simpleExplanation:\n      'Free Black men made up about 15-20% of the U.S. Navy. They got the same pay as white sailors and fought side by side with them. They helped win important battles on the water.',\n    roundRange: [3, 8],\n    reward: { type: 'nationalism', count: 3, description: '+3 Nationalism' },\n    required: true,\n  },\n  {\n    id: 'kc_colonial_marines',\n    question: 'What were the British \"Colonial Marines\" during the War of 1812?',\n    choices: [\n      'A military unit of formerly enslaved people who escaped to British lines in exchange for freedom',\n      'British soldiers stationed in the American colonies before the war',\n      'American naval officers who defected to Britain',\n      'Native American scouts who worked for the British army',\n    ],\n    correctIndex: 0,\n    explanation:\n      'In 1814, the British offered freedom to enslaved people who escaped from American plantations and joined their forces. Over 4,000 people fled to British lines, with hundreds forming the Corps of Colonial Marines. They fought in several battles, including the burning of Washington D.C. After the war, Britain resettled most in Canada, Trinidad, and other colonies, honoring its promise of freedom  though the U.S. demanded their return.',\n    simpleQuestion: 'What were the British \"Colonial Marines\" during the War of 1812?',\n    simpleChoices: [\n      'Enslaved people who escaped to the British side and were given freedom to fight for Britain',\n      'British soldiers who lived in America before the war',\n      'American Navy officers who joined the British side',\n      'Native American scouts who worked for the British army',\n    ],\n    simpleExplanation:\n      'The British promised freedom to enslaved people who escaped and joined them. Hundreds of these people formed the Colonial Marines. They fought in battles and were given their freedom after the war.',\n    roundRange: [7, 10],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_enslaved_freedom',\n    question: 'During the War of 1812, approximately how many enslaved people escaped to British lines seeking freedom?',\n    choices: [\n      'About 4,000 people self-emancipated by fleeing to British ships and camps',\n      'Fewer than 100 people managed to escape during the war',\n      'Over 50,000 enslaved people were freed by the British army',\n      'No enslaved people attempted to escape during the conflict',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Approximately 4,000 enslaved people escaped to British lines during the War of 1812, particularly in the Chesapeake Bay region. The British offered freedom to anyone who joined them, and many risked their lives to reach British ships. Some joined the Colonial Marines and fought against their former enslavers. After the war, most were resettled in Nova Scotia, Trinidad, or other British colonies. American slaveholders demanded their return, but Britain refusedone of the few times a major power honored its promise of freedom to formerly enslaved people.',\n    simpleQuestion: 'About how many enslaved people escaped to the British side during the war?',\n    simpleChoices: [\n      'About 4,000 people escaped to British ships and camps to gain their freedom',\n      'Fewer than 100 people escaped during the war',\n      'Over 50,000 enslaved people were freed by the British army',\n      'No enslaved people tried to escape during the war',\n    ],\n    simpleExplanation:\n      'About 4,000 enslaved people escaped to the British side during the war. The British promised them freedom. After the war, Britain kept its promise and helped them start new lives in Canada and other places.',\n    roundRange: [6, 10],\n    reward: { type: 'nationalism', count: 3, description: '+3 Nationalism' },\n    required: true,\n  },\n  {\n    id: 'kc_black_soldiers_jackson',\n    question: 'How did Andrew Jackson use free Black soldiers at the Battle of New Orleans?',\n    choices: [\n      'He recruited free men of color into two battalions who fought bravely and were praised for their service',\n      'He refused to allow any African Americans to fight',\n      'He forced enslaved people to dig trenches but did not arm them',\n      'He promised freedom to enslaved people but broke his promise after the battle',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Facing a shortage of troops, Andrew Jackson recruited free Black men in Louisiana into two battalions of \"Free Men of Color.\" Despite initial skepticism from some white officers, these soldiers fought with distinction at the Battle of New Orleans on January 8, 1815. Jackson publicly praised their courage, saying they had \"not disappointed the hopes\" placed in them. However, after the war, Black veterans received little recognition and continued to face systemic discrimination.',\n    simpleQuestion: 'How did Andrew Jackson use free Black soldiers at the Battle of New Orleans?',\n    simpleChoices: [\n      'He put free Black men into two groups of soldiers who fought bravely and were praised',\n      'He did not let any African Americans fight',\n      'He made enslaved people dig ditches but did not give them weapons',\n      'He promised enslaved people freedom but broke his promise after the battle',\n    ],\n    simpleExplanation:\n      'Andrew Jackson needed more soldiers. He asked free Black men in Louisiana to fight. They fought bravely at the Battle of New Orleans, and Jackson praised them for their courage.',\n    roundRange: [10, 12],\n    reward: { type: 'nationalism', count: 3, description: '+3 Nationalism' },\n    required: true,\n  },\n\n  // \n  // NAVAL WARFARE (Rounds 3-9)\n  // \n  {\n    id: 'kc_blockade',\n    question: 'What was the purpose of the British naval blockade during the war?',\n    choices: [\n      'To strangle American trade and prevent supplies from reaching U.S. ports',\n      'To protect British fishing rights in the Atlantic',\n      'To stop French ships from reaching America',\n      'To prevent American settlers from crossing the Great Lakes',\n    ],\n    correctIndex: 0,\n    explanation:\n      \"The Royal Navy's blockade of the American coast was designed to cripple the U.S. economy and prevent military supplies from moving by sea. By 1814, the blockade covered nearly the entire coast. American exports plummeted from $61 million in 1811 to $7 million in 1814, devastating the economy.\",\n    simpleQuestion: 'Why did the British Navy block American ports during the war?',\n    simpleChoices: [\n      'To stop American trade and keep supplies from reaching U.S. ports',\n      'To protect British fishing areas in the Atlantic Ocean',\n      'To stop French ships from reaching America',\n      'To keep American settlers from crossing the Great Lakes',\n    ],\n    simpleExplanation:\n      'The British Navy blocked American ports to hurt the U.S. economy. They wanted to stop trade and supplies. American exports dropped from $61 million to just $7 million.',\n    roundRange: [4, 8],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n  {\n    id: 'kc_constitution',\n    question: 'Why was USS Constitution nicknamed \"Old Ironsides\"?',\n    choices: [\n      'British cannonballs appeared to bounce off her thick oak hull',\n      'She was plated with iron armor',\n      'Her captain, William Hull, had the nickname \"Iron Will\"',\n      'She survived a fire that destroyed the rest of the fleet',\n    ],\n    correctIndex: 0,\n    explanation:\n      'During her victory over HMS Guerriere in August 1812, sailors watched British cannonballs seemingly bounce off Constitution\\'s hull (which was made of dense live oak up to 21 inches thick). A sailor reportedly cried \"Huzza! Her sides are made of iron!\" The nickname stuck and her victories were a massive morale boost for Americans facing setbacks on land.',\n    simpleQuestion: 'Why was the ship USS Constitution called \"Old Ironsides\"?',\n    simpleChoices: [\n      'British cannonballs seemed to bounce off her thick wooden sides',\n      'She had iron armor on her sides',\n      'Her captain had the nickname \"Iron Will\"',\n      'She survived a fire that destroyed the other ships',\n    ],\n    simpleExplanation:\n      'The USS Constitution had very thick oak wood on her sides. British cannonballs seemed to bounce right off. A sailor yelled \"Her sides are made of iron!\" and the nickname stuck.',\n    roundRange: [2, 5],\n    reward: { type: 'nationalism', count: 3, description: '+3 Nationalism' },\n  },\n  {\n    id: 'kc_privateers',\n    question: 'What role did American privateers play in the War of 1812?',\n    choices: [\n      'They captured over 1,500 British merchant ships, disrupting trade worldwide',\n      'They blockaded British ports in Europe',\n      'They transported troops across the Great Lakes',\n      'They had no significant impact on the war',\n    ],\n    correctIndex: 0,\n    explanation:\n      'The U.S. government issued over 500 letters of marque, licensing private ships to attack British commerce. American privateers captured an estimated 1,500+ British merchant vessels, causing insurance rates to skyrocket and British merchants to pressure Parliament for peace. They were far more effective than the small U.S. Navy at disrupting British trade.',\n    simpleQuestion: 'What did American privateers do during the War of 1812?',\n    simpleChoices: [\n      'They captured over 1,500 British trading ships all around the world',\n      'They blocked British ports in Europe',\n      'They moved troops across the Great Lakes',\n      'They did not have any real effect on the war',\n    ],\n    simpleExplanation:\n      'Privateers were private ships allowed by the government to attack British trading ships. They captured over 1,500 British ships. This hurt British trade and helped push Britain toward peace.',\n    roundRange: [3, 8],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n\n  // \n  // LATE WAR & TURNING POINTS (Rounds 9-12)\n  // \n  {\n    id: 'kc_washington_burned',\n    question: 'What happened when the British captured Washington D.C. in 1814?',\n    choices: [\n      'They burned the White House and the Capitol building',\n      'They forced President Madison to surrender',\n      'They made Washington the new British capital',\n      'Nothing  the city was abandoned before they arrived',\n    ],\n    correctIndex: 0,\n    explanation:\n      'On August 24, 1814, British forces routed American defenders at Bladensburg and marched into Washington. They burned the White House, Capitol, Treasury, and other government buildings. President Madison and Congress had fled. A thunderstorm and tornado the next day helped extinguish the fires. It remains the only time a foreign power has captured and burned the American capital.',\n    simpleQuestion: 'What happened when the British captured Washington D.C. in 1814?',\n    simpleChoices: [\n      'They burned the White House and the Capitol building',\n      'They forced President Madison to give up',\n      'They made Washington the new British capital',\n      'Nothing  everyone left the city before they got there',\n    ],\n    simpleExplanation:\n      'The British marched into Washington D.C. in August 1814. They burned the White House, the Capitol, and other government buildings. This is the only time another country has burned the American capital.',\n    roundRange: [9, 11],\n    reward: { type: 'troops', count: 2, description: '+2 reinforcement troops' },\n  },\n  {\n    id: 'kc_fort_mchenry',\n    question: 'The Battle of Fort McHenry inspired which famous American symbol?',\n    choices: [\n      'The Star-Spangled Banner (national anthem)',\n      'The Pledge of Allegiance',\n      'The Liberty Bell tradition',\n      'The bald eagle as national symbol',\n    ],\n    correctIndex: 0,\n    explanation:\n      \"Francis Scott Key, detained on a British ship, watched the 25-hour bombardment of Fort McHenry in Baltimore Harbor through the night of September 13-14, 1814. When he saw the enormous 42x30 foot American flag still flying at dawn, he wrote the poem 'Defence of Fort M'Henry,' which was set to music and eventually became the national anthem in 1931.\",\n    simpleQuestion: 'The battle at Fort McHenry inspired which famous American song?',\n    simpleChoices: [\n      'The Star-Spangled Banner (the national anthem)',\n      'The Pledge of Allegiance',\n      'The Liberty Bell tradition',\n      'The bald eagle as a national symbol',\n    ],\n    simpleExplanation:\n      'Francis Scott Key watched the British attack Fort McHenry for 25 hours. When he saw the American flag still flying in the morning, he wrote a poem. That poem became \"The Star-Spangled Banner.\"',\n    roundRange: [9, 11],\n    reward: { type: 'nationalism', count: 5, description: '+5 Nationalism' },\n    required: true,\n  },\n  {\n    id: 'kc_dolley_madison',\n    question: 'What did Dolley Madison famously do as the British approached Washington?',\n    choices: [\n      'She saved a portrait of George Washington and important state documents from the White House',\n      'She led a militia defense of the Capitol',\n      'She negotiated a ceasefire with the British commander',\n      'She escaped to Canada disguised as a British officer',\n    ],\n    correctIndex: 0,\n    explanation:\n      'As British troops closed in on Washington, First Lady Dolley Madison refused to leave the White House until she secured Gilbert Stuart\\'s full-length portrait of George Washington and cabinet documents. Her bravery in saving these national treasures while under threat of capture became a powerful symbol of American resilience and devotion to the republic.',\n    simpleQuestion: 'What did Dolley Madison do when the British were coming to Washington?',\n    simpleChoices: [\n      'She saved a painting of George Washington and important papers from the White House',\n      'She led soldiers to protect the Capitol',\n      'She talked the British commander into stopping the attack',\n      'She escaped to Canada dressed as a British officer',\n    ],\n    simpleExplanation:\n      'Dolley Madison would not leave the White House until she saved a famous painting of George Washington. She also saved important government papers. Her bravery made her a hero.',\n    roundRange: [9, 11],\n    reward: { type: 'nationalism', count: 3, description: '+3 Nationalism' },\n    required: true,\n  },\n  {\n    id: 'kc_dolley_political_role',\n    question: 'Beyond saving Washington\\'s portrait, what was Dolley Madison\\'s broader role in American politics?',\n    choices: [\n      'She was a skilled political partner who hosted strategic social events and built political alliances for her husband',\n      'She had no involvement in politics beyond her famous rescue of the portrait',\n      'She served as an unofficial general, commanding troops during the British invasion',\n      'She opposed the war and publicly criticized her husband\\'s decision to fight',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Dolley Madison was far more than a portrait-rescuer. She was one of the most politically influential First Ladies in American history. She hosted \"Wednesday drawing rooms\"social gatherings where politicians from opposing parties mixed, negotiated, and built alliances. She helped her shy husband navigate Washington\\'s social politics and was widely credited with helping him win reelection in 1812. Her political skills were so respected that after James Madison\\'s death, Congress gave her an honorary seat on the House floorthe first woman to receive this honor.',\n    simpleQuestion: 'Besides saving the painting, what else was Dolley Madison known for in politics?',\n    simpleChoices: [\n      'She hosted parties where leaders met, talked, and made deals to help her husband',\n      'She had nothing to do with politics besides saving the painting',\n      'She was a general who led soldiers during the British attack',\n      'She spoke out against the war and argued with her husband about it',\n    ],\n    simpleExplanation:\n      'Dolley Madison was very important in politics. She hosted parties where leaders from different sides could meet and work together. She helped her husband win support and get reelected as President.',\n    roundRange: [7, 11],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n    required: true,\n  },\n  {\n    id: 'kc_plattsburgh',\n    question: 'Why was the American victory at Plattsburgh (1814) so important?',\n    choices: [\n      'It repelled a major British invasion from Canada and influenced peace negotiations',\n      'It was the first American naval victory of the war',\n      'It led directly to the burning of Washington D.C.',\n      'It gave the Americans permanent control of Montreal',\n    ],\n    correctIndex: 0,\n    explanation:\n      'In September 1814, an outnumbered American force defeated a British army of 10,000+ veterans at Plattsburgh on Lake Champlain. The American naval victory on the lake forced the British to retreat to Canada. News of this defeat reached British negotiators at Ghent and convinced them that conquering the U.S. would be too costly, accelerating the peace treaty.',\n    simpleQuestion: 'Why was the American victory at Plattsburgh in 1814 so important?',\n    simpleChoices: [\n      'It stopped a big British attack from Canada and helped bring about the peace treaty',\n      'It was the first American win on the water during the war',\n      'It led to the burning of Washington D.C.',\n      'It gave America permanent control of Montreal',\n    ],\n    simpleExplanation:\n      'A smaller American force beat a big British army at Plattsburgh. The Americans also won the battle on the lake. This loss helped convince Britain to agree to a peace treaty.',\n    roundRange: [9, 12],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_lundys_lane',\n    question: 'The Battle of Lundy\\'s Lane (1814) is remembered as:',\n    choices: [\n      'One of the bloodiest battles of the war, ending in a tactical draw near Niagara Falls',\n      'A decisive British victory that ended the war',\n      'A minor skirmish with few casualties',\n      'The first battle where the U.S. used artillery',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Fought on July 25, 1814, Lundy\\'s Lane was a brutal six-hour battle near Niagara Falls with over 1,700 combined casualties. Both sides claimed victory, but the Americans withdrew. The battle demonstrated that American regulars  trained by Winfield Scott  could now stand toe-to-toe with British professionals, a marked improvement from the war\\'s early disasters.',\n    simpleQuestion: 'What is the Battle of Lundy\\'s Lane remembered for?',\n    simpleChoices: [\n      'One of the bloodiest battles of the war, ending in a tie near Niagara Falls',\n      'A big British win that ended the war',\n      'A small fight with very few people hurt',\n      'The first battle where Americans used cannons',\n    ],\n    simpleExplanation:\n      'The Battle of Lundy\\'s Lane was a very bloody fight near Niagara Falls. It lasted 6 hours and over 1,700 soldiers were hurt or killed. Neither side truly won the battle.',\n    roundRange: [8, 11],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n\n  // \n  // DIPLOMACY, LEGACY & THE HOME FRONT (Rounds 9-12)\n  // \n  {\n    id: 'kc_treaty_ghent',\n    question: 'What did the Treaty of Ghent (1814) actually accomplish?',\n    choices: [\n      'It restored pre-war borders  neither side gained territory',\n      'It gave Canada to the United States',\n      'It created an independent Native state in the Northwest',\n      'It forced Britain to pay war reparations to America',\n    ],\n    correctIndex: 0,\n    explanation:\n      'The Treaty of Ghent (signed December 24, 1814) essentially restored the \"status quo ante bellum\"  things as they were before the war. Neither side gained or lost territory. It did not address impressment (which had already stopped) or trade rights. The biggest losers were the Native peoples, who lost their British ally and faced unchecked American expansion.',\n    simpleQuestion: 'What did the Treaty of Ghent actually do?',\n    simpleChoices: [\n      'Things went back to how they were before the war  no one gained land',\n      'It gave Canada to the United States',\n      'It created a new homeland for Native peoples in the Northwest',\n      'It made Britain pay money to America for the war',\n    ],\n    simpleExplanation:\n      'The Treaty of Ghent ended the war in December 1814. Things went back to how they were before the war. Neither side gained or lost any land. Native peoples lost the most because they lost British support.',\n    roundRange: [10, 12],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_treaty_broken_promises',\n    question: 'What happened to the Treaty of Ghent\\'s promise to restore Native American lands to their pre-war status?',\n    choices: [\n      'The promise was ignored  the U.S. never returned any lands and accelerated westward expansion',\n      'All Native lands were faithfully restored within two years',\n      'Britain enforced the promise by sending troops to protect Native territories',\n      'Native leaders voluntarily gave up their lands in exchange for payment',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Article IX of the Treaty of Ghent required the U.S. to restore Native nations to their pre-war status and territories. The U.S. government completely ignored this provision. Without British military support, Native nations had no power to enforce the treaty terms. Instead of restoring lands, the U.S. accelerated its policy of forced removal. Within 15 years, President Andrew Jacksonthe war\\'s greatest herosigned the Indian Removal Act of 1830, leading to the Trail of Tears and the displacement of tens of thousands of Native people from their ancestral homelands.',\n    simpleQuestion: 'What happened to the treaty promise to give Native peoples their land back?',\n    simpleChoices: [\n      'The U.S. broke the promise and never gave back any lands, then pushed Native peoples off even more land',\n      'All Native lands were given back within two years',\n      'Britain sent soldiers to protect Native lands',\n      'Native leaders chose to give up their lands in exchange for money',\n    ],\n    simpleExplanation:\n      'The peace treaty said the U.S. would give Native peoples their lands back. The U.S. broke this promise. Without British help, Native peoples could not make the U.S. keep its word. The U.S. took even more Native land after the war.',\n    roundRange: [10, 12],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_new_orleans',\n    question: 'Why is the Battle of New Orleans (1815) historically ironic?',\n    choices: [\n      'It was fought after the peace treaty was already signed, but before news arrived',\n      \"It was the only battle the British won during the entire war\",\n      'Andrew Jackson lost the battle but became president anyway',\n      'It took place in French territory, not American',\n    ],\n    correctIndex: 0,\n    explanation:\n      \"The Treaty of Ghent was signed on December 24, 1814, but news traveled by ship and didn't reach New Orleans in time. Jackson's stunning victory on January 8, 1815  where his forces killed over 2,000 British while suffering only 71 casualties  made him a national hero and helped Americans believe they had 'won' the war, despite the treaty changing nothing.\",\n    simpleQuestion: 'Why is the Battle of New Orleans in 1815 considered ironic?',\n    simpleChoices: [\n      'The peace treaty had already been signed, but the news had not arrived yet',\n      'It was the only battle the British won during the whole war',\n      'Andrew Jackson lost the battle but became president anyway',\n      'It took place in French land, not American land',\n    ],\n    simpleExplanation:\n      'The peace treaty was already signed before the battle happened. But news traveled slowly by ship, so nobody in New Orleans knew. Jackson won a huge victory that made him a national hero.',\n    roundRange: [11, 12],\n    reward: { type: 'nationalism', count: 3, description: '+3 Nationalism' },\n    required: true,\n  },\n  {\n    id: 'kc_hartford',\n    question: 'What was the Hartford Convention?',\n    choices: [\n      'A meeting of New England Federalists who considered secession over the war',\n      'A peace conference between the U.S. and Britain',\n      'A Native American council to discuss alliances',\n      'A military strategy meeting led by Andrew Jackson',\n    ],\n    correctIndex: 0,\n    explanation:\n      \"New England Federalists, opposed to the war and its devastating effect on their trade-based economy, met in Hartford, Connecticut (December 1814 - January 1815) to discuss grievances. Some delegates hinted at secession. But when news of the peace treaty and Jackson's victory arrived, the delegates looked unpatriotic. The Federalist Party never recovered and dissolved within a few years.\",\n    simpleQuestion: 'What was the Hartford Convention?',\n    simpleChoices: [\n      'A meeting of New England leaders who were so upset about the war they talked about leaving the country',\n      'A peace meeting between the U.S. and Britain',\n      'A Native American council to talk about alliances',\n      'A war planning meeting led by Andrew Jackson',\n    ],\n    simpleExplanation:\n      'Leaders from New England met in Hartford because they hated the war. Some even talked about leaving the United States. But then the war ended, and they looked unpatriotic. Their party fell apart soon after.',\n    roundRange: [10, 12],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n  {\n    id: 'kc_legacy',\n    question: 'What was a major legacy of the War of 1812 for the United States?',\n    choices: [\n      'A surge of American nationalism and the decline of the Federalist Party',\n      'The permanent conquest of Canada',\n      'The end of slavery in the United States',\n      'An alliance with France against Britain',\n    ],\n    correctIndex: 0,\n    explanation:\n      \"The War of 1812 sparked a powerful wave of American nationalism known as the 'Era of Good Feelings.' It destroyed the Federalist Party, boosted American manufacturing (since British trade was cut off), created national heroes like Jackson, and produced enduring symbols like the Star-Spangled Banner. The U.S. emerged with a stronger sense of national identity.\",\n    simpleQuestion: 'What was one big result of the War of 1812 for the United States?',\n    simpleChoices: [\n      'Americans felt much more proud of their country and the Federalist Party fell apart',\n      'America took over Canada for good',\n      'The war ended slavery in the United States',\n      'America and France joined together against Britain',\n    ],\n    simpleExplanation:\n      'After the war, Americans felt very proud of their country. The war created heroes like Andrew Jackson and gave America the Star-Spangled Banner. The Federalist Party, which was against the war, fell apart.',\n    roundRange: [11, 12],\n    reward: { type: 'nationalism', count: 3, description: '+3 Nationalism' },\n  },\n  {\n    id: 'kc_native_aftermath',\n    question: 'What happened to Native American nations after the War of 1812?',\n    choices: [\n      'They lost their British ally and faced rapid displacement by American settlers',\n      'They gained an independent homeland as promised in the Treaty of Ghent',\n      'They formed a lasting alliance with the United States',\n      'They migrated to British Canada where they received full citizenship',\n    ],\n    correctIndex: 0,\n    explanation:\n      'The War of 1812 was catastrophic for Native peoples. With Tecumseh dead and the British no longer willing to support Native interests, there was no check on American westward expansion. The Treaty of Ghent mentioned restoring Native lands to their 1811 status, but this was never enforced. Within two decades, most Eastern tribes would be forcibly removed via the Indian Removal Act of 1830.',\n    simpleQuestion: 'What happened to Native American nations after the War of 1812?',\n    simpleChoices: [\n      'They lost British help and American settlers quickly took their lands',\n      'They got their own homeland as the peace treaty promised',\n      'They made a lasting friendship with the United States',\n      'They moved to Canada where they became full citizens',\n    ],\n    simpleExplanation:\n      'The war was terrible for Native peoples. Tecumseh was dead and Britain stopped helping them. American settlers took more and more Native land. Within 20 years, the government forced most Eastern nations off their lands.',\n    roundRange: [10, 12],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_canadian_identity',\n    question: 'How did the War of 1812 affect Canadian national identity?',\n    choices: [\n      'It became a founding story  Canadians saw themselves as having defended their homeland from invasion',\n      'It had no lasting impact on Canada',\n      'It convinced Canadians to join the United States',\n      'It led to immediate Canadian independence from Britain',\n    ],\n    correctIndex: 0,\n    explanation:\n      'For English-speaking Canadians, the War of 1812 became a crucial founding myth. The defense of Upper Canada against repeated American invasions  with heroes like Brock, Secord, and the Canadian militia  helped forge a distinct Canadian identity separate from both Britain and the United States. It remains a significant part of Canadian heritage.',\n    simpleQuestion: 'How did the War of 1812 change how Canadians felt about their country?',\n    simpleChoices: [\n      'Canadians felt proud that they defended their homeland from American attacks',\n      'The war had no lasting effect on Canada',\n      'Canadians decided they wanted to join the United States',\n      'Canada became independent from Britain right after the war',\n    ],\n    simpleExplanation:\n      'Canadians were proud that they defended their country against American attacks. Heroes like Brock and Laura Secord became famous. The war helped Canadians feel like their own separate nation.',\n    roundRange: [10, 12],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n  {\n    id: 'kc_manufacturing',\n    question: 'How did the War of 1812 change the American economy?',\n    choices: [\n      'The British blockade forced Americans to build their own factories, jumpstarting industrialization',\n      'It destroyed the American economy permanently',\n      'It had no economic effects',\n      'It made the U.S. completely dependent on French trade',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Cut off from British manufactured goods by the blockade, Americans began producing their own textiles, iron, and other goods. Factories sprang up across New England and the Mid-Atlantic. After the war, Congress passed the Tariff of 1816 to protect these new industries. The war inadvertently jumpstarted the American Industrial Revolution.',\n    simpleQuestion: 'How did the War of 1812 change how Americans made things?',\n    simpleChoices: [\n      'The British blockade forced Americans to build their own factories and start making their own goods',\n      'The war destroyed the American economy for good',\n      'The war did not change the economy at all',\n      'America became completely dependent on French trade',\n    ],\n    simpleExplanation:\n      'The British blockade stopped goods from reaching America. Americans had to build their own factories to make cloth, iron, and other things. This was the start of American manufacturing.',\n    roundRange: [8, 12],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_impressment_end',\n    question: 'Why did British impressment of American sailors ultimately stop?',\n    choices: [\n      'The end of the Napoleonic Wars meant Britain no longer needed extra sailors',\n      'The Treaty of Ghent specifically banned impressment',\n      'The American Navy destroyed all British ships',\n      'Congress passed a law making impressment illegal under international law',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Impressment was one of the main causes of the war, yet the Treaty of Ghent never mentioned it. The practice simply stopped because Napoleon\\'s defeat in 1814 ended Britain\\'s desperate need for sailors. This irony highlights how the War of 1812 was deeply intertwined with European conflicts  a \"second front\" of the Napoleonic Wars.',\n    simpleQuestion: 'Why did Britain stop taking American sailors and making them work on British ships?',\n    simpleChoices: [\n      'The wars in Europe ended, so Britain did not need extra sailors anymore',\n      'The peace treaty said Britain had to stop',\n      'The American Navy destroyed all British ships',\n      'Congress passed a law that made it illegal',\n    ],\n    simpleExplanation:\n      'Taking American sailors was a main cause of the war. But Britain stopped doing it because the wars in Europe ended. Britain no longer needed extra sailors. The peace treaty never even mentioned it.',\n    roundRange: [10, 12],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n\n  // \n  // CONTENT EXPANSION v1.6.0 (25 new questions)\n  // \n  {\n    id: 'kc_de_salaberry',\n    question: 'How did Charles de Salaberry defeat a much larger American force at the Battle of Chateauguay?',\n    choices: [\n      'He used buglers in the forest to make his 300 troops seem like a much larger army',\n      'He received secret reinforcements from British ships on the St. Lawrence',\n      'He used artillery to destroy the American supply wagons',\n      'He negotiated a ceasefire while more British troops arrived',\n    ],\n    correctIndex: 0,\n    explanation:\n      'De Salaberry positioned buglers throughout the forest to create the illusion of a massive force. With roughly 300 Canadian Voltigeurs and Native warriors, he convinced over 3,000 American troops to retreat  saving Montreal from invasion.',\n    simpleQuestion: 'How did de Salaberry win a battle with only 300 soldiers against 3,000 Americans?',\n    simpleChoices: [\n      'He used buglers to make his army sound much bigger than it was',\n      'He got secret help from British ships',\n      'He used big cannons to stop the Americans',\n      'He asked for a truce while waiting for more soldiers',\n    ],\n    simpleExplanation:\n      'De Salaberry spread buglers all over the forest. They blew their horns from different spots so the Americans thought a huge army was around them. The Americans ran away even though they had way more soldiers.',\n    roundRange: [6, 9],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_black_hawk_war',\n    question: 'What role did Black Hawk play during the War of 1812?',\n    choices: [\n      'He was a Sauk war chief who fought alongside the British at Fort Meigs and the Thames',\n      'He led the American army at the Battle of New Orleans',\n      'He served as a translator between the British and French Canadians',\n      'He negotiated the Treaty of Ghent on behalf of Native nations',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Black Hawk was a Sauk war chief who fought alongside the British during the War of 1812, participating in the battles of Fort Meigs and the Thames. He never accepted treaties surrendering his people\\'s ancestral lands and later led the Black Hawk War of 1832.',\n    simpleQuestion: 'What did Black Hawk do during the War of 1812?',\n    simpleChoices: [\n      'He was a Sauk war chief who fought with the British in important battles',\n      'He led the American army at New Orleans',\n      'He worked as a translator for the British',\n      'He helped make the peace treaty',\n    ],\n    simpleExplanation:\n      'Black Hawk was a Sauk war chief. He fought alongside the British in big battles like Fort Meigs. He never agreed with treaties that gave away his people\\'s land.',\n    roundRange: [4, 8],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_frenchtown',\n    question: 'What event at the River Raisin became a powerful American rallying cry?',\n    choices: [\n      'Wounded American prisoners were killed after the battle, sparking \"Remember the Raisin!\"',\n      'American forces burned a British supply depot on the river',\n      'A major flood destroyed the American camp on the River Raisin',\n      'The British surrendered their largest fortress on the river',\n    ],\n    correctIndex: 0,\n    explanation:\n      'After the British-Native victory at Frenchtown (modern Monroe, Michigan) in January 1813, Native warriors killed dozens of wounded American prisoners. \"Remember the Raisin!\" became one of the war\\'s most powerful rallying cries, fueling recruitment across the American frontier.',\n    simpleQuestion: 'Why did Americans shout \"Remember the Raisin!\" during the war?',\n    simpleChoices: [\n      'Because wounded American soldiers were killed after a battle near the River Raisin',\n      'Because the Americans burned a British building on the river',\n      'Because a flood destroyed an American camp',\n      'Because the British gave up their biggest fort',\n    ],\n    simpleExplanation:\n      'After a battle near the River Raisin, hurt American soldiers who could not fight were killed. Americans were very angry. \"Remember the Raisin!\" became a battle cry that made many people want to join the army.',\n    roundRange: [3, 6],\n    reward: { type: 'nationalism', count: 3, description: '+3 Nationalism' },\n    required: true,\n  },\n  {\n    id: 'kc_colonial_marines_role',\n    question: 'Who were the Colonial Marines during the War of 1812?',\n    choices: [\n      'Formerly enslaved people who escaped to British lines and were formed into a military unit',\n      'French-Canadian militia who defended Montreal against American attack',\n      'American marines who fought at the Battle of New Orleans',\n      'British soldiers recruited from prisons to fight in North America',\n    ],\n    correctIndex: 0,\n    explanation:\n      'The Corps of Colonial Marines were formed from enslaved people who escaped to British lines after Vice Admiral Cochrane\\'s 1814 proclamation promising freedom. They fought with distinction at Bladensburg and in Chesapeake raids. After the war, most were resettled as free people in Trinidad, Nova Scotia, or New Brunswick.',\n    simpleQuestion: 'Who were the Colonial Marines?',\n    simpleChoices: [\n      'Enslaved people who escaped to the British and became soldiers in exchange for freedom',\n      'French-Canadian soldiers who defended Montreal',\n      'American marines who fought at New Orleans',\n      'British prisoners who were forced to fight',\n    ],\n    simpleExplanation:\n      'The Colonial Marines were people who escaped from slavery. They joined the British army in exchange for freedom. They fought bravely and after the war, they lived as free people in places like Canada and the Caribbean.',\n    roundRange: [7, 10],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_war_financing',\n    question: 'Why was the U.S. government nearly bankrupt by 1814?',\n    choices: [\n      'New England banks refused to lend money and the British blockade destroyed customs revenue',\n      'Congress voted to defund the military as a protest against the war',\n      'The army spent all its money building a new capital city',\n      'France demanded immediate repayment of Revolutionary War loans',\n    ],\n    correctIndex: 0,\n    explanation:\n      'By 1814, New England banks refused to fund a war they opposed, and the British blockade destroyed customs revenue  the government\\'s main income source. This financial crisis, combined with British war exhaustion after 20 years of fighting Napoleon, pushed both sides toward peace at Ghent.',\n    simpleQuestion: 'Why was America running out of money during the war?',\n    simpleChoices: [\n      'Banks would not lend money and the British blockade stopped trade income',\n      'Congress voted to stop paying for the military',\n      'The army spent all the money on a new capital',\n      'France wanted old debts paid back right away',\n    ],\n    simpleExplanation:\n      'Banks in New England did not want to lend money for a war they did not like. The British also blocked ships, so the government could not collect money from trade. Both sides were broke and wanted peace.',\n    roundRange: [6, 10],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n  {\n    id: 'kc_new_england_opposition',\n    question: 'How did New England express its opposition to the War of 1812?',\n    choices: [\n      'New England merchants smuggled goods to British Canada and some states considered secession at the Hartford Convention',\n      'New England sent its largest militia force to fight in Canada',\n      'New England immediately surrendered to the British navy',\n      'New England governors signed a separate peace treaty with Britain',\n    ],\n    correctIndex: 0,\n    explanation:\n      'New England strongly opposed the war  merchants smuggled goods to British Canada, banks refused to fund the war, and in 1814, delegates met at the Hartford Convention to discuss possible secession. The British deliberately left New England ports unblockaded to encourage this division. Much of the British army in Canada was actually fed by American suppliers from New England.',\n    simpleQuestion: 'How did people in New England show they did not like the war?',\n    simpleChoices: [\n      'They sold supplies to the enemy and some talked about leaving the United States',\n      'They sent a big army to fight in Canada',\n      'They gave up and let the British take over',\n      'Their governors made a peace deal with Britain by themselves',\n    ],\n    simpleExplanation:\n      'New England did not want the war. Merchants sold food and supplies to the British enemy. Banks would not lend money. Some leaders even talked about leaving the United States at a big meeting called the Hartford Convention.',\n    roundRange: [4, 8],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n    required: true,\n  },\n  {\n    id: 'kc_canadian_defense',\n    question: 'What role did the Canadian militia play in defending Canada during the War of 1812?',\n    choices: [\n      'Canadian-born soldiers fought in key battles like Chateauguay and Beaver Dams, helping save Canada from invasion',\n      'The Canadian militia did not participate  only British regulars defended Canada',\n      'Canadian militia only guarded supply depots far from the fighting',\n      'Canadian militia soldiers all deserted to the American side',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Canadian militia, including French-Canadian Voltigeurs under de Salaberry and English-Canadian units, fought alongside British regulars and Native warriors. Their participation at battles like Chateauguay, Beaver Dams, and Queenston Heights was essential to Canada\\'s defense and helped forge a sense of Canadian national identity.',\n    simpleQuestion: 'Did Canadian soldiers help defend Canada during the war?',\n    simpleChoices: [\n      'Yes  they fought in important battles and helped save Canada from being taken over',\n      'No  only British soldiers from England fought in Canada',\n      'They only guarded supply buildings away from the fighting',\n      'They all left and joined the American army',\n    ],\n    simpleExplanation:\n      'Canadian soldiers fought in many important battles. French-Canadian soldiers under de Salaberry won at Chateauguay. Canadian and Native fighters won at Beaver Dams. These battles helped save Canada from being taken over.',\n    roundRange: [3, 7],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_naval_strategy',\n    question: 'Why was the British naval blockade of the American coast so devastating?',\n    choices: [\n      'It cut off customs revenue (the government\\'s main income) and strangled American trade',\n      'It sank all American merchant ships within the first month of the war',\n      'It prevented Americans from fishing, causing widespread famine',\n      'It allowed the British to land armies at any point along the coast',\n    ],\n    correctIndex: 0,\n    explanation:\n      'The British blockade was devastating because it cut off customs duties  the federal government\\'s primary source of revenue. By 1814, American exports had fallen by over 90%, the treasury was nearly empty, and prices for imported goods soared. The blockade was arguably Britain\\'s most effective weapon in the entire war.',\n    simpleQuestion: 'Why did the British blocking American ports hurt so much?',\n    simpleChoices: [\n      'It stopped trade, which was how the government got most of its money',\n      'It sank all American ships in the first month',\n      'It stopped Americans from fishing and they ran out of food',\n      'It let the British land soldiers anywhere on the coast',\n    ],\n    simpleExplanation:\n      'The government got most of its money from taxes on trade. When the British blocked the ports, ships could not come in or go out. The government lost almost all its money, and everyday things became very expensive.',\n    roundRange: [4, 8],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_native_allies_british',\n    question: 'Why did most Native nations in the Great Lakes region ally with Britain rather than the United States?',\n    choices: [\n      'Britain promised to support a Native buffer state and had a history of trading partnerships with Native nations',\n      'Britain offered Native nations control of all Canadian territory',\n      'The United States refused to trade with any Native nations',\n      'Native nations were required by treaty to fight for Britain',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Native nations allied with Britain because the British had long-established trade relationships and supported the idea of a Native buffer state between the U.S. and Canada. American expansionism directly threatened Native lands, while British policy (at least officially) favored protecting them. For many nations, the British alliance was the last hope of resisting American settlement.',\n    simpleQuestion: 'Why did most Native nations near the Great Lakes fight on the British side?',\n    simpleChoices: [\n      'Britain promised to help protect Native lands and had traded with them for a long time',\n      'Britain offered to give them all of Canada',\n      'America refused to trade with any Native nations',\n      'Native nations were forced by an old treaty to fight for Britain',\n    ],\n    simpleExplanation:\n      'Britain had been trading partners with Native nations for many years. Britain also promised to help protect their land from American settlers. Native nations saw the British as their best hope to keep their homes.',\n    roundRange: [2, 5],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_fort_meigs',\n    question: 'How did William Henry Harrison defend Fort Meigs against British siege in 1813?',\n    choices: [\n      'His troops built massive earthwork walls that absorbed British cannon fire',\n      'He launched a surprise naval attack on the British supply ships',\n      'He negotiated a temporary truce while waiting for reinforcements',\n      'He surrendered the outer walls and retreated to a stone keep',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Harrison\\'s troops built massive earthwork walls at Fort Meigs on the Maumee River in Ohio. The earthen embankments absorbed British cannon fire, preventing the destruction the British expected. The fort survived two sieges in 1813, maintaining the American foothold in the Northwest.',\n    simpleQuestion: 'How did the soldiers at Fort Meigs stop the British cannonballs?',\n    simpleChoices: [\n      'They built very thick dirt walls that soaked up the cannonballs',\n      'They attacked British ships to stop the cannons',\n      'They asked for a truce until more soldiers came',\n      'They hid inside a stone building',\n    ],\n    simpleExplanation:\n      'The soldiers built really thick walls out of dirt and earth. The cannonballs just got stuck in the dirt instead of breaking through. The fort survived two attacks this way.',\n    roundRange: [4, 7],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_beaver_dams',\n    question: 'What was Laura Secord\\'s role in the British victory at Beaver Dams?',\n    choices: [\n      'She walked 20 miles through enemy territory to warn the British of an American attack',\n      'She commanded the British artillery during the battle',\n      'She decoded American military messages for the British',\n      'She organized Canadian civilians to block the American advance',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Laura Secord overheard American officers discussing their attack plans while they were quartered in her home. She walked 20 miles through swamps and enemy territory to warn the British outpost. Her warning enabled Mohawk warriors and British troops to prepare an ambush that captured over 500 American troops.',\n    simpleQuestion: 'What did Laura Secord do to help the British at Beaver Dams?',\n    simpleChoices: [\n      'She walked 20 miles through dangerous land to warn them about an American attack',\n      'She fired the cannons during the battle',\n      'She read secret American letters for the British',\n      'She got townspeople to block the American army',\n    ],\n    simpleExplanation:\n      'Laura Secord heard American soldiers talking about their plans in her house. She walked 20 miles through swamps and enemy land to warn the British. Because of her, the British and Mohawk fighters were ready and captured over 500 Americans.',\n    roundRange: [5, 8],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_uss_wasp',\n    question: 'What ironic fate befell the USS Wasp after its victory over HMS Frolic?',\n    choices: [\n      'Hours after capturing the Frolic, both ships were seized by the massive British ship HMS Poictiers',\n      'The Wasp ran aground on the Virginia coast and was abandoned',\n      'The Wasp\\'s crew mutinied and sailed to France',\n      'The British recaptured the Frolic during a prisoner exchange',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Just hours after the USS Wasp defeated HMS Frolic in October 1812, both ships were captured by the British ship-of-the-line HMS Poictiers. While American ships could win individual battles, Britain\\'s overwhelming numbers (600+ warships vs. America\\'s 16) gave it strategic control of the seas.',\n    simpleQuestion: 'What happened to the USS Wasp right after it won a battle?',\n    simpleChoices: [\n      'A much bigger British ship came and captured both ships',\n      'It got stuck on the beach and everyone had to leave',\n      'The crew took over the ship and sailed to France',\n      'The British got their ship back in a prisoner trade',\n    ],\n    simpleExplanation:\n      'Right after the Wasp won, a much bigger British ship showed up and took both ships. Even though American ships could win one-on-one, Britain had way more ships  over 600 compared to America\\'s 16.',\n    roundRange: [3, 6],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_war_hawks_expansion',\n    question: 'Beyond British impressment, what did the War Hawks hope to gain from war with Britain?',\n    choices: [\n      'Expansion into British Canada and an end to British support for Native resistance on the frontier',\n      'Control of Britain\\'s Caribbean sugar islands',\n      'A permanent alliance with Napoleon\\'s France',\n      'The abolition of slavery throughout North America',\n    ],\n    correctIndex: 0,\n    explanation:\n      'The War Hawks, led by Henry Clay and John C. Calhoun, saw war as an opportunity to expand into British Canada and eliminate British support for Native nations resisting American settlement on the frontier. Western and Southern states particularly wanted to stop British agents from supplying weapons and encouragement to Tecumseh\\'s confederacy.',\n    simpleQuestion: 'Besides stopping impressment, what else did the War Hawks want?',\n    simpleChoices: [\n      'To take over Canada and stop Britain from helping Native nations fight against American settlers',\n      'To take Britain\\'s islands in the Caribbean',\n      'To become best friends with France forever',\n      'To end slavery across North America',\n    ],\n    simpleExplanation:\n      'The War Hawks wanted to take over Canada. They also wanted Britain to stop helping Native nations who were fighting against American settlers moving west.',\n    roundRange: [1, 4],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n  {\n    id: 'kc_detroit_significance',\n    question: 'Why was Detroit strategically important during the War of 1812?',\n    choices: [\n      'It controlled access to the Great Lakes and the western frontier, connecting trade routes and military supply lines',\n      'It was the largest city in North America at the time',\n      'It contained the only bridge across the Great Lakes',\n      'It was the capital of the United States during the war',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Detroit sat at the junction of the Great Lakes waterway system and the western frontier. Controlling Detroit meant controlling access to the upper Great Lakes, trade routes with Native nations, and the military supply lines that fed armies on both sides. Its loss and recapture were major turning points in the war.',\n    simpleQuestion: 'Why was Detroit so important during the war?',\n    simpleChoices: [\n      'It controlled the Great Lakes waterways and the roads to the western frontier',\n      'It was the biggest city in North America',\n      'It had the only bridge over the Great Lakes',\n      'It was America\\'s capital during the war',\n    ],\n    simpleExplanation:\n      'Detroit was at an important crossroads. Whoever controlled Detroit controlled the Great Lakes waterways and the roads to the western frontier. That is why both sides fought so hard over it.',\n    roundRange: [2, 5],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_great_lakes_control',\n    question: 'Why was control of the Great Lakes so important to both sides during the war?',\n    choices: [\n      'The lakes were the primary transportation routes for moving troops, supplies, and trade goods in the Northwest',\n      'Gold had been discovered on the shores of Lake Superior',\n      'Both countries wanted to build permanent naval bases on every lake',\n      'The Great Lakes were the main source of drinking water for both armies',\n    ],\n    correctIndex: 0,\n    explanation:\n      'In an era before railroads, the Great Lakes were the highways of the Northwest. Armies, supplies, and trade goods all moved primarily by water. Controlling the lakes meant controlling the ability to supply, reinforce, and move armies  which is why Perry\\'s victory on Lake Erie was such a decisive turning point.',\n    simpleQuestion: 'Why did both sides want to control the Great Lakes?',\n    simpleChoices: [\n      'The lakes were the main way to move soldiers, supplies, and trade goods',\n      'There was gold near Lake Superior',\n      'Both countries wanted to build military bases on every lake',\n      'The lakes were the main source of water for drinking',\n    ],\n    simpleExplanation:\n      'Before there were trains or highways, the Great Lakes were like roads on water. Armies, food, and supplies all traveled by boat on the lakes. Whoever controlled the lakes could move their army faster and keep them fed.',\n    roundRange: [4, 8],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_nancy_hart',\n    question: 'What essential roles did frontier women play during the War of 1812?',\n    choices: [\n      'They defended homesteads, manufactured ammunition, organized supply networks, and served as messengers',\n      'They had no involvement in the war effort',\n      'They only served as nurses in official military hospitals',\n      'They were evacuated to coastal cities for their safety',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Frontier women played critical roles that rarely made it into history books  defending homesteads when men were away, manufacturing ammunition, organizing community supply networks, and serving as messengers. In many frontier communities, women were the primary defenders of their homes and families.',\n    simpleQuestion: 'What did women on the frontier do during the war?',\n    simpleChoices: [\n      'They protected their homes, made bullets, organized supplies, and carried messages',\n      'They did not help with the war at all',\n      'They only worked as nurses in army hospitals',\n      'They were all sent to big cities to be safe',\n    ],\n    simpleExplanation:\n      'Women on the frontier did many important jobs during the war. They protected their homes, made bullets, organized supplies, and carried messages. Most history books forgot to write about their work.',\n    roundRange: [5, 9],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n  {\n    id: 'kc_impressment_numbers',\n    question: 'Approximately how many American citizens were impressed into the Royal Navy between 1803 and 1812?',\n    choices: [\n      '6,000 to 10,000 Americans',\n      'About 100 Americans',\n      'Over 50,000 Americans',\n      'Exactly 12 Americans',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Between 1803 and 1812, the British impressed an estimated 6,000 to 10,000 American citizens into the Royal Navy. Britain was fighting Napoleon and desperately needed sailors. The Royal Navy would stop American ships at sea, line up the crew, and take anyone they claimed was a British subject  often ignoring American citizenship papers.',\n    simpleQuestion: 'About how many Americans did the British force to work on their ships before the war?',\n    simpleChoices: [\n      'Between 6,000 and 10,000 people',\n      'About 100 people',\n      'More than 50,000 people',\n      'Only 12 people',\n    ],\n    simpleExplanation:\n      'Britain took between 6,000 and 10,000 American sailors and forced them to work on British ships. Britain needed sailors for their war against Napoleon. They would stop American ships and take people off them.',\n    roundRange: [1, 4],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n  {\n    id: 'kc_native_confederacy_challenge',\n    question: 'What was the greatest challenge Tecumseh faced in building his pan-Native confederacy?',\n    choices: [\n      'Different Native nations had their own interests, languages, and traditions, making a unified political alliance extremely difficult',\n      'He lacked the ability to communicate with other Native nations',\n      'The British refused to support his confederacy',\n      'All Native nations had already signed peace treaties with the United States',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Tecumseh\\'s greatest challenge was that Native nations were diverse sovereign entities with different languages, traditions, priorities, and relationships with the U.S. Some nations, like the Cherokee, chose diplomacy. Others, like parts of the Creek Nation, were internally divided. Building a unified confederacy across such diversity required extraordinary diplomatic skill.',\n    simpleQuestion: 'What was the hardest part about Tecumseh bringing Native nations together?',\n    simpleChoices: [\n      'Each nation had its own language, traditions, and goals, so it was very hard to agree on things',\n      'He could not talk to other nations because he did not speak their languages',\n      'The British would not help him at all',\n      'Every Native nation had already made peace with the United States',\n    ],\n    simpleExplanation:\n      'Every Native nation was different. They spoke different languages, had different traditions, and wanted different things. Getting them all to work together was extremely hard. Tecumseh traveled thousands of miles trying to convince them.',\n    roundRange: [3, 7],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_british_veterans_impact',\n    question: 'How did the end of the Napoleonic Wars in 1814 change the War of 1812?',\n    choices: [\n      'Britain could send thousands of veteran troops from Europe to North America, dramatically shifting the balance of power',\n      'It had no effect on the War of 1812 since the conflicts were unrelated',\n      'It forced Britain to immediately surrender to the United States',\n      'It caused France to join the war on the American side',\n    ],\n    correctIndex: 0,\n    explanation:\n      'When Napoleon was defeated in 1814, Britain was free to send thousands of battle-hardened veterans to North America. These experienced troops led the burning of Washington and the attacks on Baltimore and New Orleans. The influx dramatically shifted the military balance, though it came too late to change the war\\'s outcome.',\n    simpleQuestion: 'What happened when the wars in Europe ended in 1814?',\n    simpleChoices: [\n      'Britain sent thousands of experienced soldiers from Europe to fight in America',\n      'Nothing  the wars in Europe had nothing to do with the War of 1812',\n      'Britain had to give up and surrender to America',\n      'France joined the war to help America',\n    ],\n    simpleExplanation:\n      'When the wars in Europe ended, Britain did not need soldiers there anymore. They sent thousands of experienced fighters to America. These soldiers burned Washington and attacked Baltimore and New Orleans.',\n    roundRange: [8, 11],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_american_manufacturing',\n    question: 'How did the British blockade unexpectedly benefit the American economy in the long term?',\n    choices: [\n      'It forced Americans to build their own factories, jumpstarting American manufacturing and industrialization',\n      'It made American merchants richer by allowing them to charge higher prices',\n      'It had no long-term economic effects on the United States',\n      'It caused Americans to return to farming and abandon all trade',\n    ],\n    correctIndex: 0,\n    explanation:\n      'When the British blockade cut off imported manufactured goods, Americans had to make their own. Factories sprang up across New England and the Mid-Atlantic states. By war\\'s end, American manufacturing had grown dramatically  laying the foundation for the Industrial Revolution in America. The war\\'s disruption of trade permanently shifted the American economy toward domestic production.',\n    simpleQuestion: 'What good thing happened because the British blocked American ports?',\n    simpleChoices: [\n      'Americans started building their own factories to make things they could no longer buy from other countries',\n      'Merchants got richer by charging more money',\n      'Nothing good happened  the blockade only caused problems',\n      'Americans gave up on trade and went back to just farming',\n    ],\n    simpleExplanation:\n      'When the British blocked the ports, Americans could not buy things from other countries. So they started building their own factories to make those things. This was the beginning of American manufacturing.',\n    roundRange: [9, 12],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n  {\n    id: 'kc_war_of_1812_memory',\n    question: 'How is the War of 1812 remembered differently by Americans, Canadians, and Native peoples?',\n    choices: [\n      'Americans see it as a \"second independence\"; Canadians as the defense of their homeland; Native peoples as a catastrophic loss of sovereignty',\n      'All three groups remember it exactly the same way',\n      'Only Americans remember the war  Canadians and Native peoples have forgotten it',\n      'Everyone agrees that the British won the war decisively',\n    ],\n    correctIndex: 0,\n    explanation:\n      'The War of 1812 is remembered very differently by each group. Americans celebrate it as a \"second war of independence\" that confirmed their sovereignty. Canadians see it as the war that saved their country from American invasion and forged national identity. For Native peoples, it was a catastrophic turning point  the end of British military support and the beginning of accelerated dispossession and removal.',\n    simpleQuestion: 'Do Americans, Canadians, and Native peoples remember the War of 1812 the same way?',\n    simpleChoices: [\n      'No  Americans see it as a win, Canadians as saving their country, and Native peoples as a terrible loss',\n      'Yes  everyone remembers it the same way',\n      'Only Americans remember the war at all',\n      'Everyone agrees that Britain won the war',\n    ],\n    simpleExplanation:\n      'Each group remembers the war differently. Americans see it as proving they were truly free. Canadians see it as saving their country. For Native peoples, it was a disaster  they lost British help and then lost more and more of their land.',\n    roundRange: [10, 12],\n    reward: { type: 'nationalism', count: 3, description: '+3 Nationalism' },\n    required: true,\n  },\n  {\n    id: 'kc_chryslers_farm',\n    question: 'What was the significance of the Battle of Crysler\\'s Farm in November 1813?',\n    choices: [\n      'Along with Chateauguay, it ended the American campaign to capture Montreal',\n      'It was the first time the American navy defeated the British on a river',\n      'It led to the immediate British surrender of Upper Canada',\n      'It was where Andrew Jackson first gained fame as a military leader',\n    ],\n    correctIndex: 0,\n    explanation:\n      'At Crysler\\'s Farm on November 11, 1813, about 800 British regulars defeated over 2,500 Americans. Combined with de Salaberry\\'s victory at Chateauguay two weeks earlier, the twin defeats ended the American campaign to capture Montreal  Canada\\'s most important city.',\n    simpleQuestion: 'Why was the Battle of Crysler\\'s Farm important?',\n    simpleChoices: [\n      'Together with another battle, it stopped the Americans from taking Montreal',\n      'It was the first time Americans won a battle on a river',\n      'It made the British surrender Upper Canada',\n      'It was where Andrew Jackson became famous',\n    ],\n    simpleExplanation:\n      'At Crysler\\'s Farm, a small British force beat a much bigger American army. This battle plus the Battle of Chateauguay two weeks before meant the Americans could not capture Montreal.',\n    roundRange: [6, 9],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_enslaved_escape_routes',\n    question: 'How did enslaved people reach British lines during the War of 1812?',\n    choices: [\n      'They fled at night through swamps and forests to British ships anchored in the Chesapeake Bay and coastal waterways',\n      'The British army invaded plantations and freed all enslaved people',\n      'The U.S. government organized a formal exchange program with Britain',\n      'Enslaved people were transported on American merchant ships',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Enslaved people risked their lives escaping to British ships, often fleeing at night through swamps, forests, and waterways. British ships anchored in the Chesapeake Bay and along the coast served as beacons of freedom. Roughly 3,000-5,000 people escaped slavery this way. The journey was extremely dangerous  those caught faced brutal punishment or sale to the Deep South.',\n    simpleQuestion: 'How did enslaved people get to the British during the war?',\n    simpleChoices: [\n      'They ran away at night through swamps and forests to reach British ships on the coast',\n      'The British army attacked farms and freed everyone',\n      'The U.S. government sent them to the British as part of a deal',\n      'They traveled on American trading ships',\n    ],\n    simpleExplanation:\n      'Enslaved people escaped at night, traveling through dangerous swamps and forests to reach British ships. Between 3,000 and 5,000 people escaped this way. It was very dangerous  if they were caught, they would be severely punished.',\n    roundRange: [6, 10],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n    required: true,\n  },\n  {\n    id: 'kc_frontier_warfare',\n    question: 'How did frontier warfare during the War of 1812 differ from European-style battles?',\n    choices: [\n      'It relied on ambushes, raids, and guerrilla tactics rather than formations and open-field battles',\n      'It was fought entirely on horseback using cavalry charges',\n      'Both sides always followed formal European rules of engagement',\n      'Frontier warfare used only naval combat on rivers and lakes',\n    ],\n    correctIndex: 0,\n    explanation:\n      'Frontier warfare looked nothing like European battles. Instead of neat formations on open fields, fighting in the forests and frontier involved ambushes, raids, and guerrilla tactics. Native warriors excelled at this style of warfare, using the terrain and surprise to offset their smaller numbers. This forced both the British and Americans to adapt their tactics.',\n    simpleQuestion: 'How was fighting on the frontier different from fighting in Europe?',\n    simpleChoices: [\n      'It used surprise attacks and hiding in forests instead of standing in lines on open fields',\n      'Everyone fought on horseback',\n      'Both sides always followed the same rules as in Europe',\n      'All the fighting was on rivers and lakes',\n    ],\n    simpleExplanation:\n      'Fighting on the frontier was very different from Europe. Instead of standing in neat lines on open fields, soldiers hid in forests and used surprise attacks. Native warriors were very good at this kind of fighting.',\n    roundRange: [3, 8],\n    reward: { type: 'troops', count: 1, description: '+1 reinforcement troop' },\n  },\n  {\n    id: 'kc_war_opposition_voices',\n    question: 'Which groups most strongly opposed the War of 1812, and why?',\n    choices: [\n      'Federalists, New England merchants, and Quakers  they feared economic ruin, opposed expansion, or held religious objections to war',\n      'Southern plantation owners who worried about losing enslaved workers',\n      'Western frontier settlers who feared Native attacks',\n      'The U.S. military officer corps who doubted they could win',\n    ],\n    correctIndex: 0,\n    explanation:\n      'The Federalist Party, New England merchants, and Quaker religious communities were the strongest opponents of the war. Federalists feared the war would ruin trade and strengthen their Republican political rivals. Merchants faced financial ruin from the British blockade. Quakers opposed all war on religious principles. This opposition led to the Hartford Convention, where some delegates discussed secession.',\n    simpleQuestion: 'Who most strongly opposed the War of 1812?',\n    simpleChoices: [\n      'The Federalist political party, business owners in New England, and Quakers who were against all wars',\n      'Southern farm owners who worried about losing workers',\n      'People on the frontier who feared being attacked',\n      'Army leaders who thought they could not win',\n    ],\n    simpleExplanation:\n      'The Federalist Party, New England merchants, and Quakers were most against the war. Federalists thought the war was bad for business. Merchants were losing money. Quakers believed all war was wrong.',\n    roundRange: [5, 10],\n    reward: { type: 'nationalism', count: 2, description: '+2 Nationalism' },\n  },\n];\n\n/**\n * Draw a knowledge check appropriate for the current round.\n * Prioritizes required questions until all have been seen, then shows optional questions.\n * Shuffles the answer choices so the correct answer isn't always in the same position.\n * Returns a question object or null.\n */\nexport function drawKnowledgeCheck(round, usedCheckIds = [], requiredChecksSeen = []) {\n  // First, check if there are any required questions we haven't shown yet\n  const unseenRequired = knowledgeChecks.filter(\n    (kc) =>\n      kc.required &&\n      !usedCheckIds.includes(kc.id) &&\n      !requiredChecksSeen.includes(kc.id) &&\n      (!kc.roundRange || (round >= kc.roundRange[0] && round <= kc.roundRange[1]))\n  );\n\n  let original;\n  if (unseenRequired.length > 0) {\n    // Prioritize showing a required question\n    original = unseenRequired[Math.floor(Math.random() * unseenRequired.length)];\n  } else {\n    // Fall back to any available question (required or optional)\n    const available = knowledgeChecks.filter(\n      (kc) =>\n        !usedCheckIds.includes(kc.id) &&\n        (!kc.roundRange || (round >= kc.roundRange[0] && round <= kc.roundRange[1]))\n    );\n\n    if (available.length === 0) return null;\n    original = available[Math.floor(Math.random() * available.length)];\n  }\n\n  // Shuffle choices with a Fisher-Yates shuffle, tracking the correct answer\n  const indices = original.choices.map((_, i) => i);\n  for (let i = indices.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [indices[i], indices[j]] = [indices[j], indices[i]];\n  }\n\n  return {\n    ...original,\n    choices: indices.map((i) => original.choices[i]),\n    correctIndex: indices.indexOf(original.correctIndex),\n    shuffleIndices: indices,\n  };\n}\n\nexport default knowledgeChecks;\n","/**\n * Objective Cards for War of 1812: Rise of the Nation\n *\n * Each faction receives 5 objectives at game start. Completing objectives\n * grants bonus points at the end of the game. Objectives encourage historically\n * themed play and give students goals beyond \"capture everything.\"\n *\n * - id: unique key\n * - faction: which faction this objective belongs to\n * - title: short objective name\n * - description: what the student needs to accomplish\n * - historicalContext: why this objective matters historically\n * - points: bonus points awarded at game end if completed\n * - progress(gameState): returns { current, total } for progress tracking\n * - check(gameState): function that returns true if objective is met\n */\n\nconst objectives = [\n  //  United States Objectives \n  {\n    id: 'us_defend_capital',\n    faction: 'us',\n    title: 'Defend the Republic',\n    description: 'Control Washington D.C. at the end of the war.',\n    historicalContext: 'The British captured and burned Washington D.C. in August 1814  the only time a foreign power has taken the American capital. Holding it would have been a powerful statement of American resilience.',\n    points: 10,\n    progress: ({ territoryOwners }) => ({ current: territoryOwners.washington_dc === 'us' ? 1 : 0, total: 1 }),\n    check: ({ territoryOwners }) => territoryOwners.washington_dc === 'us',\n  },\n  {\n    id: 'us_conquer_canada',\n    faction: 'us',\n    title: 'Manifest Destiny: North',\n    description: 'Control Upper Canada and Montreal at the end of the war.',\n    historicalContext: 'Many War Hawks believed conquering Canada would be \"a mere matter of marching.\" In reality, every American invasion of Canada failed. Achieving this objective would rewrite history.',\n    points: 15,\n    progress: ({ territoryOwners }) => ({\n      current: (territoryOwners.upper_canada === 'us' ? 1 : 0) + (territoryOwners.montreal === 'us' ? 1 : 0),\n      total: 2,\n    }),\n    check: ({ territoryOwners }) =>\n      territoryOwners.upper_canada === 'us' && territoryOwners.montreal === 'us',\n  },\n  {\n    id: 'us_nationalism_high',\n    faction: 'us',\n    title: 'Era of Good Feelings',\n    description: 'End the war with Nationalism at 70% or higher.',\n    historicalContext: 'After the war, American nationalism surged so powerfully that the period 1815-1825 was called the \"Era of Good Feelings.\" This sense of national unity helped define American identity for generations.',\n    points: 10,\n    progress: ({ nationalismMeter }) => ({ current: Math.min(nationalismMeter, 70), total: 70 }),\n    check: ({ nationalismMeter }) => nationalismMeter >= 70,\n  },\n  {\n    id: 'us_lake_control',\n    faction: 'us',\n    title: 'Master of the Lakes',\n    description: 'Control both Lake Erie and Lake Ontario at game end.',\n    historicalContext: 'Control of the Great Lakes determined who controlled the frontier. Perry\\'s victory on Lake Erie in 1813 was a turning point that cut British supply lines and forced them to abandon Detroit.',\n    points: 10,\n    progress: ({ territoryOwners }) => ({\n      current: (territoryOwners.lake_erie === 'us' ? 1 : 0) + (territoryOwners.lake_ontario === 'us' ? 1 : 0),\n      total: 2,\n    }),\n    check: ({ territoryOwners }) =>\n      territoryOwners.lake_erie === 'us' && territoryOwners.lake_ontario === 'us',\n  },\n  {\n    id: 'us_southern_secure',\n    faction: 'us',\n    title: 'Secure the South',\n    description: 'Control New Orleans, Mobile, and Creek Nation at game end.',\n    historicalContext: 'The Southern theater was crucial for controlling the Mississippi River  America\\'s economic lifeline. Jackson\\'s campaigns here made him a national hero and opened millions of acres to American settlement.',\n    points: 10,\n    progress: ({ territoryOwners }) => ({\n      current: (territoryOwners.new_orleans === 'us' ? 1 : 0) + (territoryOwners.mobile === 'us' ? 1 : 0) + (territoryOwners.creek_nation === 'us' ? 1 : 0),\n      total: 3,\n    }),\n    check: ({ territoryOwners }) =>\n      territoryOwners.new_orleans === 'us' &&\n      territoryOwners.mobile === 'us' &&\n      territoryOwners.creek_nation === 'us',\n  },\n\n  //  British / Canada Objectives \n  {\n    id: 'british_hold_canada',\n    faction: 'british',\n    title: 'Hold the Line',\n    description: 'Control Upper Canada and Montreal at the end of the war.',\n    historicalContext: 'Canada\\'s survival against repeated American invasions became a founding myth for Canadian national identity. Brock, Secord, and the Canadian militia became national heroes for defending their homeland.',\n    points: 10,\n    progress: ({ territoryOwners }) => ({\n      current: (territoryOwners.upper_canada === 'british' ? 1 : 0) + (territoryOwners.montreal === 'british' ? 1 : 0),\n      total: 2,\n    }),\n    check: ({ territoryOwners }) =>\n      territoryOwners.upper_canada === 'british' && territoryOwners.montreal === 'british',\n  },\n  {\n    id: 'british_burn_washington',\n    faction: 'british',\n    title: 'Burn the Capital',\n    description: 'Control Washington D.C. at the end of the war.',\n    historicalContext: 'The burning of Washington in 1814 was retaliation for the American burning of York (Toronto). British Admiral Cockburn sat in the Speaker\\'s chair and held a mock vote to burn the \"harbor of Yankee democracy.\"',\n    points: 15,\n    progress: ({ territoryOwners }) => ({ current: territoryOwners.washington_dc === 'british' ? 1 : 0, total: 1 }),\n    check: ({ territoryOwners }) => territoryOwners.washington_dc === 'british',\n  },\n  {\n    id: 'british_naval_dominance',\n    faction: 'british',\n    title: 'Rule Britannia',\n    description: 'Control Atlantic Sea Lanes, Chesapeake Bay, and Halifax at game end.',\n    historicalContext: 'The Royal Navy was the most powerful fleet in the world, with over 600 ships. British naval dominance allowed them to blockade the entire American coast, strangling trade and projecting power at will.',\n    points: 10,\n    progress: ({ territoryOwners }) => ({\n      current: (territoryOwners.atlantic_sea_lanes === 'british' ? 1 : 0) + (territoryOwners.chesapeake_bay === 'british' ? 1 : 0) + (territoryOwners.halifax === 'british' ? 1 : 0),\n      total: 3,\n    }),\n    check: ({ territoryOwners }) =>\n      territoryOwners.atlantic_sea_lanes === 'british' &&\n      territoryOwners.chesapeake_bay === 'british' &&\n      territoryOwners.halifax === 'british',\n  },\n  {\n    id: 'british_niagara_front',\n    faction: 'british',\n    title: 'Fortress Niagara',\n    description: 'Control Niagara and have 5+ troops there at game end.',\n    historicalContext: 'The Niagara frontier saw some of the war\\'s fiercest fighting  Queenston Heights, Lundy\\'s Lane, Fort Niagara. Control of this corridor between Lakes Erie and Ontario was essential for defending Upper Canada.',\n    points: 10,\n    progress: ({ territoryOwners, troops }) => ({\n      current: (territoryOwners.niagara === 'british' ? 1 : 0) + (territoryOwners.niagara === 'british' && (troops.niagara || 0) >= 5 ? 1 : 0),\n      total: 2,\n    }),\n    check: ({ territoryOwners, troops }) =>\n      territoryOwners.niagara === 'british' && (troops.niagara || 0) >= 5,\n  },\n  {\n    id: 'british_blockade',\n    faction: 'british',\n    title: 'The Blockade Holds',\n    description: 'Control at least 3 naval territories (lakes/seas) at game end.',\n    historicalContext: 'The British blockade reduced American exports from $61 million (1811) to just $7 million (1814). But it also forced Americans to build their own factories, inadvertently kickstarting American industrialization.',\n    points: 10,\n    progress: ({ territoryOwners }) => {\n      const navalTerritories = ['lake_erie', 'lake_ontario', 'chesapeake_bay', 'atlantic_sea_lanes', 'gulf_of_mexico'];\n      return { current: navalTerritories.filter((id) => territoryOwners[id] === 'british').length, total: 3 };\n    },\n    check: ({ territoryOwners }) => {\n      const navalTerritories = ['lake_erie', 'lake_ontario', 'chesapeake_bay', 'atlantic_sea_lanes', 'gulf_of_mexico'];\n      return navalTerritories.filter((id) => territoryOwners[id] === 'british').length >= 3;\n    },\n  },\n\n  //  Native Coalition Objectives \n  {\n    id: 'native_hold_homeland',\n    faction: 'native',\n    title: \"Tecumseh's Dream\",\n    description: 'Control Indiana Territory and Creek Nation at the end of the war.',\n    historicalContext: 'Tecumseh envisioned a sovereign Native confederacy stretching from the Great Lakes to the Gulf Coast. His dream of a unified resistance to American expansion was the most ambitious pan-Native political movement in history.',\n    points: 10,\n    progress: ({ territoryOwners }) => ({\n      current: (territoryOwners.indiana_territory === 'native' ? 1 : 0) + (territoryOwners.creek_nation === 'native' ? 1 : 0),\n      total: 2,\n    }),\n    check: ({ territoryOwners }) =>\n      territoryOwners.indiana_territory === 'native' && territoryOwners.creek_nation === 'native',\n  },\n  {\n    id: 'native_frontier_expansion',\n    faction: 'native',\n    title: 'Reclaim the Frontier',\n    description: 'Control at least 4 territories at game end.',\n    historicalContext: 'Before European colonization, Native peoples governed vast territories across North America. By 1812, decades of treaties (often coerced) had reduced their lands dramatically. Reclaiming territory would reverse this devastating trend.',\n    points: 15,\n    progress: ({ territoryOwners }) => ({\n      current: Object.values(territoryOwners).filter((o) => o === 'native').length,\n      total: 4,\n    }),\n    check: ({ territoryOwners }) =>\n      Object.values(territoryOwners).filter((o) => o === 'native').length >= 4,\n  },\n  {\n    id: 'native_fort_dearborn',\n    faction: 'native',\n    title: 'Fall of Fort Dearborn',\n    description: 'Capture Fort Dearborn from the Americans.',\n    historicalContext: 'Fort Dearborn (present-day Chicago) was a symbol of American military presence on the frontier. Its fall in August 1812 shocked settlers and demonstrated the power of Native resistance in the Great Lakes region.',\n    points: 10,\n    progress: ({ territoryOwners }) => ({ current: territoryOwners.fort_dearborn === 'native' ? 1 : 0, total: 1 }),\n    check: ({ territoryOwners }) => territoryOwners.fort_dearborn === 'native',\n  },\n  {\n    id: 'native_detroit',\n    faction: 'native',\n    title: 'Detroit Reclaimed',\n    description: 'Control Detroit at the end of the war.',\n    historicalContext: 'Detroit was the gateway to the Northwest Territory. When Brock and Tecumseh captured it in 1812, it was a stunning combined victory. Native control of Detroit would ensure access to the Great Lakes fur trade and vital hunting grounds.',\n    points: 10,\n    progress: ({ territoryOwners }) => ({ current: territoryOwners.detroit === 'native' ? 1 : 0, total: 1 }),\n    check: ({ territoryOwners }) => territoryOwners.detroit === 'native',\n  },\n  {\n    id: 'native_survive',\n    faction: 'native',\n    title: 'Endure',\n    description: 'Have at least 10 total troops across all territories at game end.',\n    historicalContext: 'In reality, the war\\'s end was catastrophic for Native peoples. With Tecumseh dead and Britain unwilling to support them, there was no check on American expansion. Within 20 years, the Indian Removal Act forced most Eastern nations west of the Mississippi.',\n    points: 10,\n    progress: ({ territoryOwners, troops }) => {\n      const nativeTerritories = Object.entries(territoryOwners)\n        .filter(([, o]) => o === 'native')\n        .map(([id]) => id);\n      return { current: Math.min(nativeTerritories.reduce((sum, id) => sum + (troops[id] || 0), 0), 10), total: 10 };\n    },\n    check: ({ territoryOwners, troops }) => {\n      const nativeTerritories = Object.entries(territoryOwners)\n        .filter(([, o]) => o === 'native')\n        .map(([id]) => id);\n      const totalTroops = nativeTerritories.reduce((sum, id) => sum + (troops[id] || 0), 0);\n      return totalTroops >= 10;\n    },\n  },\n];\n\n/**\n * Get objectives for a given faction.\n */\nexport function getFactionObjectives(faction) {\n  return objectives.filter((obj) => obj.faction === faction);\n}\n\n/**\n * Check all objectives for a faction and return results with progress.\n * Returns array of { ...objective, completed: boolean, progressInfo: { current, total } }\n */\nexport function checkObjectives(faction, gameState) {\n  return getFactionObjectives(faction).map((obj) => ({\n    ...obj,\n    completed: obj.check(gameState),\n    progressInfo: obj.progress ? obj.progress(gameState) : null,\n  }));\n}\n\n/**\n * Calculate total bonus points from completed objectives.\n */\nexport function getObjectiveBonus(faction, gameState) {\n  return checkObjectives(faction, gameState)\n    .filter((obj) => obj.completed)\n    .reduce((sum, obj) => sum + obj.points, 0);\n}\n\nexport default objectives;\n","import territories from '../data/territories';\nimport { getLeaderBonus, getLeaderRallyBonus, getFirstStrikeBonus } from '../data/leaders';\nimport { DIFFICULTY_CONFIGS } from '../data/difficultySettings';\n\n/**\n * AI opponent logic for non-player factions.\n *\n * The AI runs allocate + attack phases for each opponent faction\n * after the player's turn completes. It uses simple heuristic strategies:\n *\n * - British AI: defensive, focuses on holding Canada and naval zones,\n *   attacks opportunistically toward Chesapeake.\n * - Native AI: guerrilla style, concentrates on frontier territories,\n *   avoids overextension.\n * - US AI (when player is not US): aggressive expansion toward Canada.\n */\n\n//  Tuning constants \nconst AI_CONFIG = {\n  // Reinforcements\n  BASE_REINFORCEMENTS: 4,\n  TERRITORY_DIVISOR: 2,             // +1 per N owned territories\n  NATIVE_EARLY_BONUS: 2,            // extra troops for native in early rounds\n  NATIVE_EARLY_CUTOFF: 4,           // round after which native bonus ends\n  BRITISH_NAVAL_BONUS: 1,           // extra troops for british supply lines\n  CONCENTRATION_RATIO: 0.4,         // fraction of troops to top-priority territory\n\n  // Reinforcement priority weights\n  PRIORITY_POINTS_WEIGHT: 2,\n  PRIORITY_ENEMY_NEIGHBOR_WEIGHT: 3,\n  PRIORITY_LOW_TROOP_THRESHOLD: 2,\n  PRIORITY_LOW_TROOP_BONUS: 4,\n  PRIORITY_FORT_BONUS: 2,\n\n  // Win probability thresholds\n  BONUS_EFFECTIVENESS: 0.5,         // how much a +1 bonus counts in probability calc\n  MIN_ATTACK_PROBABILITY: 0.3,      // below this, AI won't attack\n\n  // Attack scoring weights\n  ATTACK_TROOP_DIFF_WEIGHT: 3,\n  ATTACK_POINTS_WEIGHT: 2,\n  ATTACK_FORT_PENALTY: 3,\n  ATTACK_LEADER_WEIGHT: 2,\n  ATTACK_PROBABILITY_WEIGHT: 5,\n  ATTACK_THEATER_BONUS: 2,\n  ATTACK_US_CANADA_BONUS: 3,\n\n  // Combat limits\n  MAX_BONUS: 2,                     // cap on total combat bonuses\n  MAX_ATTACKS_PER_TURN: 5,\n  TOP_N_ATTACK_CHOICES: 3,          // pick randomly from top N candidates\n  MAX_ATTACKER_DICE: 3,\n  MAX_DEFENDER_DICE: 2,\n  MAX_TROOPS_TO_MOVE: 3,            // troops moved after capture or maneuver\n  FIRST_STRIKE_DAMAGE: 1,\n\n  // Maneuver\n  MAX_MANEUVERS: 3,\n\n  // Safety\n  MAX_REINFORCE_ITERATIONS: 200,\n};\n\n// How many reinforcements an AI faction gets (slightly more than player to compensate for weaker strategy)\nfunction aiReinforcements(faction, territoryOwners, leaderStates, round, config) {\n  const owned = Object.entries(territoryOwners).filter(([, o]) => o === faction);\n  if (owned.length === 0) return 0;\n  const base = config.BASE_REINFORCEMENTS + Math.floor(owned.length / config.TERRITORY_DIVISOR);\n  const leaderBonus = getLeaderRallyBonus(faction, leaderStates);\n  // Native guerrilla bonus: Tecumseh's confederacy at peak strength early war\n  const nativeBonus = (faction === 'native' && round <= config.NATIVE_EARLY_CUTOFF) ? config.NATIVE_EARLY_BONUS : 0;\n  // British naval supply lines bonus\n  const navalBonus = (faction === 'british') ? config.BRITISH_NAVAL_BONUS : 0;\n  return base + leaderBonus + nativeBonus + navalBonus;\n}\n\n// Score a territory for reinforcement priority (higher = more important to defend)\nfunction reinforcePriority(id, faction, territoryOwners, troops, config) {\n  const terr = territories[id];\n  if (!terr) return 0;\n\n  let score = terr.points * config.PRIORITY_POINTS_WEIGHT;\n\n  // Bonus for territories adjacent to enemies\n  const enemyNeighbors = terr.adjacency.filter(\n    (adjId) => territoryOwners[adjId] && territoryOwners[adjId] !== faction && territoryOwners[adjId] !== 'neutral'\n  );\n  score += enemyNeighbors.length * config.PRIORITY_ENEMY_NEIGHBOR_WEIGHT;\n\n  // Bonus for low troop count (needs reinforcement)\n  if ((troops[id] || 0) <= config.PRIORITY_LOW_TROOP_THRESHOLD) score += config.PRIORITY_LOW_TROOP_BONUS;\n\n  // Bonus for forts (worth defending)\n  if (terr.hasFort) score += config.PRIORITY_FORT_BONUS;\n\n  return score;\n}\n\n// Estimate win probability for an attack (0-1 range)\nfunction estimateWinProbability(attackerTroops, defenderTroops, attackBonus = 0, defendBonus = 0, config) {\n  // Simplified probability model based on troop ratio and bonuses\n  const effectiveAttackers = attackerTroops + (attackBonus * config.BONUS_EFFECTIVENESS);\n  const effectiveDefenders = defenderTroops + (defendBonus * config.BONUS_EFFECTIVENESS);\n\n  if (effectiveDefenders <= 0) return 1.0;\n\n  const ratio = effectiveAttackers / effectiveDefenders;\n\n  // Sigmoid-like function to map ratio to probability\n  // ratio < 1: disadvantage, ratio > 1: advantage\n  if (ratio >= 2.5) return 0.85;\n  if (ratio >= 2.0) return 0.75;\n  if (ratio >= 1.5) return 0.65;\n  if (ratio >= 1.2) return 0.55;\n  if (ratio >= 1.0) return 0.45;\n  if (ratio >= 0.8) return 0.35;\n  return 0.25;\n}\n\n// Score an attack target (higher = more desirable to attack)\nfunction attackScore(fromId, toId, faction, territoryOwners, troops, leaderStates, config) {\n  const target = territories[toId];\n  if (!target) return -1;\n\n  const attackerTroops = (troops[fromId] || 0) - 1; // leave 1 behind\n  const defenderTroops = troops[toId] || 0;\n\n  // Don't attack if we don't have enough troops\n  if (attackerTroops < 1) return -1;\n\n  // Calculate bonuses for win probability estimation\n  let attackBonus = getLeaderBonus({\n    faction,\n    territory: territories[fromId],\n    isAttacking: true,\n    leaderStates,\n  });\n  if (faction === 'british' && target?.isNaval) attackBonus += 1;\n  attackBonus = Math.min(attackBonus, config.MAX_BONUS);\n\n  const defenderFaction = territoryOwners[toId];\n  let defendBonus = getLeaderBonus({\n    faction: defenderFaction,\n    territory: target,\n    isAttacking: false,\n    leaderStates,\n  });\n  if (defenderFaction === 'british' && target?.isNaval) defendBonus += 1;\n  if (target?.hasFort) defendBonus += 1;\n  defendBonus = Math.min(defendBonus, config.MAX_BONUS);\n\n  // Risk assessment: avoid attacks with low win probability\n  const winProbability = estimateWinProbability(attackerTroops, defenderTroops, attackBonus, defendBonus, config);\n  if (winProbability < config.MIN_ATTACK_PROBABILITY) return -1;\n\n  let score = 0;\n\n  // Prefer targets with fewer defenders\n  score += (attackerTroops - defenderTroops) * config.ATTACK_TROOP_DIFF_WEIGHT;\n\n  // Prefer high-value territories\n  score += target.points * config.ATTACK_POINTS_WEIGHT;\n\n  // Prefer targets without forts\n  if (target.hasFort) score -= config.ATTACK_FORT_PENALTY;\n\n  // Leader bonus consideration\n  score += attackBonus * config.ATTACK_LEADER_WEIGHT;\n\n  // Win probability bonus (higher probability = higher score)\n  score += winProbability * config.ATTACK_PROBABILITY_WEIGHT;\n\n  // British AI prefers Chesapeake/Maritime targets\n  if (faction === 'british' && (target.theater === 'Chesapeake' || target.theater === 'Maritime')) {\n    score += config.ATTACK_THEATER_BONUS;\n  }\n\n  // Native AI prefers Great Lakes frontier\n  if (faction === 'native' && target.theater === 'Great Lakes') {\n    score += config.ATTACK_THEATER_BONUS;\n  }\n\n  // US AI prefers Canadian targets\n  if (faction === 'us' && target.theater === 'Great Lakes') {\n    score += config.ATTACK_US_CANADA_BONUS;\n  }\n\n  return score;\n}\n\n/**\n * Run AI turn for a single faction. Returns new troops and territoryOwners.\n * Also returns a log of actions for display.\n */\nexport function runAITurn(faction, territoryOwners, troops, leaderStates, invulnerableTerritories = [], round = 1, difficulty = 'medium') {\n  const config = { ...AI_CONFIG, ...(DIFFICULTY_CONFIGS[difficulty] || {}) };\n  let newOwners = { ...territoryOwners };\n  let newTroops = { ...troops };\n  const log = [];\n  const actions = [];\n\n  //  Phase 1: Allocate reinforcements \n  const reinforcements = aiReinforcements(faction, newOwners, leaderStates, round, config);\n  const ownedTerritories = Object.entries(newOwners)\n    .filter(([, owner]) => owner === faction)\n    .map(([id]) => id);\n\n  if (ownedTerritories.length === 0) {\n    return { territoryOwners: newOwners, troops: newTroops, log, actions };\n  }\n\n  // Sort by priority and distribute reinforcements\n  const prioritized = ownedTerritories\n    .map((id) => ({ id, priority: reinforcePriority(id, faction, newOwners, newTroops, config) }))\n    .sort((a, b) => b.priority - a.priority);\n\n  // Track reinforcements per territory\n  const reinforcementsByTerritory = {};\n  let remaining = Number.isFinite(reinforcements) ? reinforcements : 0;\n\n  // Distribute reinforcements across frontline territories weighted by priority\n  if (prioritized.length > 0 && remaining > 0) {\n    // Focus on frontline territories (those adjacent to enemies)\n    const frontline = prioritized.filter(({ id }) => {\n      const terr = territories[id];\n      return terr && terr.adjacency.some(adjId =>\n        newOwners[adjId] && newOwners[adjId] !== faction && newOwners[adjId] !== 'neutral'\n      );\n    });\n    const targets = frontline.length > 0 ? frontline : prioritized;\n\n    // Give top 40% to highest priority, distribute rest across top targets\n    const topPriority = targets[0];\n    const concentratedAmount = Math.min(Math.ceil(reinforcements * config.CONCENTRATION_RATIO), remaining);\n    newTroops[topPriority.id] = (newTroops[topPriority.id] || 0) + concentratedAmount;\n    reinforcementsByTerritory[topPriority.id] = concentratedAmount;\n    remaining -= concentratedAmount;\n\n    // Distribute remaining across other frontline territories\n    let index = 1;\n    let iterations = 0;\n    while (remaining > 0 && targets.length > 0 && iterations < config.MAX_REINFORCE_ITERATIONS) {\n      const target = targets[index % targets.length];\n      newTroops[target.id] = (newTroops[target.id] || 0) + 1;\n      reinforcementsByTerritory[target.id] = (reinforcementsByTerritory[target.id] || 0) + 1;\n      remaining--;\n      index++;\n      iterations++;\n    }\n  }\n\n  // Create action objects for each reinforced territory\n  for (const [territoryId, count] of Object.entries(reinforcementsByTerritory)) {\n    actions.push({\n      type: 'reinforce',\n      territory: territories[territoryId]?.name || territoryId,\n      troops: count,\n    });\n  }\n\n  log.push(`${factionName(faction)} receives ${reinforcements} reinforcements.`);\n\n  //  Phase 2: Attack \n  let attacksRemaining = config.MAX_ATTACKS_PER_TURN;\n  while (attacksRemaining > 0) {\n    attacksRemaining--;\n    // Find all possible attacks\n    const possibleAttacks = findPossibleAttacks(faction, newOwners, newTroops, leaderStates, invulnerableTerritories, config);\n\n    if (possibleAttacks.length === 0) break;\n\n    // Pick the best attack (with slight randomization)\n    possibleAttacks.sort((a, b) => b.score - a.score);\n    const topN = possibleAttacks.slice(0, config.TOP_N_ATTACK_CHOICES);\n    const chosen = topN[Math.floor(Math.random() * topN.length)];\n\n    // Store troops before battle\n    const attackerTroopsBefore = newTroops[chosen.fromId] || 0;\n    const defenderTroopsBefore = newTroops[chosen.toId] || 0;\n\n    // Execute battle\n    const result = executeBattle(chosen.fromId, chosen.toId, faction, newOwners, newTroops, leaderStates, config);\n\n    // Calculate casualties\n    const attackerLosses = attackerTroopsBefore - (result.troops[chosen.fromId] || 0) - (result.conquered ? result.movedTroops || 0 : 0);\n    const defenderLosses = defenderTroopsBefore - (result.conquered ? 0 : (result.troops[chosen.toId] || 0));\n\n    newOwners = result.territoryOwners;\n    newTroops = result.troops;\n\n    const fromName = territories[chosen.fromId]?.name || chosen.fromId;\n    const toName = territories[chosen.toId]?.name || chosen.toId;\n\n    // Create attack action object\n    actions.push({\n      type: 'attack',\n      from: fromName,\n      to: toName,\n      result: result.conquered ? 'captured' : 'repelled',\n      casualties: {\n        attacker: attackerLosses,\n        defender: defenderLosses,\n      },\n    });\n\n    if (result.conquered) {\n      log.push(`${factionName(faction)} captures ${toName}!`);\n    } else {\n      log.push(`${factionName(faction)} attacks ${toName} but is repelled.`);\n    }\n  }\n\n  //  Phase 3: Maneuver  move troops from safe interior to frontline \n  const ownedAfterBattle = Object.entries(newOwners)\n    .filter(([, owner]) => owner === faction)\n    .map(([id]) => id);\n\n  // Find interior territories (no enemy neighbors) with excess troops\n  const interiorWithTroops = ownedAfterBattle.filter(id => {\n    const terr = territories[id];\n    if (!terr) return false;\n    const hasEnemyNeighbor = terr.adjacency.some(adjId =>\n      newOwners[adjId] && newOwners[adjId] !== faction && newOwners[adjId] !== 'neutral'\n    );\n    return !hasEnemyNeighbor && (newTroops[id] || 0) > 1;\n  });\n\n  // Move troops toward frontline\n  let maneuversLeft = config.MAX_MANEUVERS;\n  for (const fromId of interiorWithTroops) {\n    if (maneuversLeft <= 0) break;\n    const terr = territories[fromId];\n    if (!terr) continue;\n\n    // Find an adjacent friendly territory that IS on the frontline\n    const frontlineNeighbor = terr.adjacency.find(adjId => {\n      if (newOwners[adjId] !== faction) return false;\n      const adjTerr = territories[adjId];\n      if (!adjTerr) return false;\n      return adjTerr.adjacency.some(n => newOwners[n] && newOwners[n] !== faction && newOwners[n] !== 'neutral');\n    });\n\n    if (frontlineNeighbor) {\n      const movers = Math.min((newTroops[fromId] || 0) - 1, config.MAX_TROOPS_TO_MOVE);\n      if (movers > 0) {\n        newTroops[fromId] -= movers;\n        newTroops[frontlineNeighbor] = (newTroops[frontlineNeighbor] || 0) + movers;\n        actions.push({\n          type: 'maneuver',\n          from: territories[fromId]?.name || fromId,\n          to: territories[frontlineNeighbor]?.name || frontlineNeighbor,\n          troops: movers,\n        });\n        log.push(`${factionName(faction)} moves ${movers} troops to ${territories[frontlineNeighbor]?.name}.`);\n        maneuversLeft--;\n      }\n    }\n  }\n\n  return { territoryOwners: newOwners, troops: newTroops, log, actions };\n}\n\n/**\n * Find all possible attacks for a faction.\n */\nfunction findPossibleAttacks(faction, owners, currentTroops, leaderStates, invulnerableTerritories = [], config) {\n  const attacks = [];\n  for (const fromId of Object.keys(owners).filter((id) => owners[id] === faction)) {\n    if ((currentTroops[fromId] || 0) < 2) continue;\n    const terr = territories[fromId];\n    if (!terr) continue;\n    for (const toId of terr.adjacency) {\n      if (owners[toId] === faction || owners[toId] === undefined) continue;\n      // Skip invulnerable territories (Fort McHenry event)\n      if (invulnerableTerritories.includes(toId)) continue;\n      const score = attackScore(fromId, toId, faction, owners, currentTroops, leaderStates, config);\n      if (score > 0) {\n        attacks.push({ fromId, toId, score });\n      }\n    }\n  }\n  return attacks;\n}\n\n/**\n * Execute a battle between AI attacker and any defender.\n * Same dice mechanics as player battles.\n */\nfunction executeBattle(fromId, toId, attackerFaction, territoryOwners, troops, leaderStates, config) {\n  const newOwners = { ...territoryOwners };\n  const newTroops = { ...troops };\n\n  let currentDefenderTroops = newTroops[toId] || 0;\n\n  // Auto-capture undefended territories\n  if (currentDefenderTroops === 0) {\n    const movers = Math.min((newTroops[fromId] || 0) - 1, config.MAX_TROOPS_TO_MOVE);\n    newTroops[fromId] = Math.max(1, (newTroops[fromId] || 0) - movers);\n    newTroops[toId] = Math.max(1, movers);\n    newOwners[toId] = attackerFaction;\n    return { territoryOwners: newOwners, troops: newTroops, conquered: true, movedTroops: movers };\n  }\n\n  // First strike: attacker's faction leader inflicts damage before dice\n  const firstStrikeBonus = getFirstStrikeBonus(attackerFaction, territories[toId], leaderStates);\n  let firstStrikeDamage = 0;\n  if (firstStrikeBonus > 0) {\n    firstStrikeDamage = config.FIRST_STRIKE_DAMAGE;\n    currentDefenderTroops = Math.max(0, currentDefenderTroops - firstStrikeDamage);\n    if (currentDefenderTroops === 0) {\n      // First strike wiped them out\n      const movers = Math.min((newTroops[fromId] || 0) - 1, config.MAX_TROOPS_TO_MOVE);\n      newTroops[fromId] = Math.max(1, (newTroops[fromId] || 0) - movers);\n      newTroops[toId] = Math.max(1, movers);\n      newOwners[toId] = attackerFaction;\n      return { territoryOwners: newOwners, troops: newTroops, conquered: true, movedTroops: movers };\n    }\n  }\n\n  const attackerCount = Math.min((newTroops[fromId] || 0) - 1, config.MAX_ATTACKER_DICE);\n  const defenderCount = Math.min(currentDefenderTroops, config.MAX_DEFENDER_DICE);\n\n  if (attackerCount <= 0) return { territoryOwners: newOwners, troops: newTroops, conquered: false, movedTroops: 0 };\n\n  const attackRolls = Array.from({ length: attackerCount }, () => Math.floor(Math.random() * 6) + 1).sort((a, b) => b - a);\n  const defendRolls = Array.from({ length: defenderCount }, () => Math.floor(Math.random() * 6) + 1).sort((a, b) => b - a);\n\n  // Leader bonuses\n  let attackBonus = getLeaderBonus({\n    faction: attackerFaction,\n    territory: territories[fromId],\n    isAttacking: true,\n    leaderStates,\n  });\n\n  // British naval superiority: +1 on naval territories\n  if (attackerFaction === 'british' && territories[toId]?.isNaval) {\n    attackBonus += 1;\n  }\n\n  // Cap attack bonus\n  attackBonus = Math.min(attackBonus, config.MAX_BONUS);\n\n  if (attackBonus > 0 && attackRolls.length > 0) {\n    attackRolls[0] = Math.min(attackRolls[0] + attackBonus, 9);\n  }\n\n  const defenderFaction = territoryOwners[toId];\n  let defendBonus = getLeaderBonus({\n    faction: defenderFaction,\n    territory: territories[toId],\n    isAttacking: false,\n    leaderStates,\n  });\n\n  // British naval superiority on defense\n  if (defenderFaction === 'british' && territories[toId]?.isNaval) {\n    defendBonus += 1;\n  }\n\n  // Fort bonus (included in cap calculation)\n  if (territories[toId]?.hasFort) {\n    defendBonus += 1;\n  }\n\n  // Cap defense bonus\n  defendBonus = Math.min(defendBonus, config.MAX_BONUS);\n\n  if (defendBonus > 0 && defendRolls.length > 0) {\n    defendRolls[0] = Math.min(defendRolls[0] + defendBonus, 9);\n  }\n\n  let attackerLosses = 0;\n  let defenderLosses = firstStrikeDamage;\n  const comparisons = Math.min(attackRolls.length, defendRolls.length);\n  for (let i = 0; i < comparisons; i++) {\n    if (attackRolls[i] > defendRolls[i]) {\n      defenderLosses++;\n    } else {\n      attackerLosses++;\n    }\n  }\n\n  newTroops[fromId] = Math.max(1, (newTroops[fromId] || 0) - attackerLosses);\n  const totalDefenderTroops = troops[toId] || 0;\n  const newDefenderTroops = Math.max(0, totalDefenderTroops - defenderLosses);\n  const conquered = newDefenderTroops === 0;\n\n  if (conquered) {\n    const movers = Math.min(attackerCount - attackerLosses, newTroops[fromId] - 1);\n    newTroops[fromId] = Math.max(1, newTroops[fromId] - movers);\n    newTroops[toId] = Math.max(1, movers);\n    newOwners[toId] = attackerFaction;\n    return { territoryOwners: newOwners, troops: newTroops, conquered, movedTroops: movers };\n  } else {\n    newTroops[toId] = newDefenderTroops;\n  }\n\n  return { territoryOwners: newOwners, troops: newTroops, conquered, movedTroops: 0 };\n}\n\nfunction factionName(faction) {\n  const names = { us: 'United States', british: 'British/Canada', native: 'Native Coalition' };\n  return names[faction] || faction;\n}\n","/**\n * Action Types for War of 1812 Game State\n *\n * All state mutations go through these action types.\n * This ensures predictable state changes and easier debugging.\n */\n\n// \n// GAME REDUCER - Core game flow\n// \n\nexport const GAME_START = 'GAME_START';\nexport const GAME_OVER = 'GAME_OVER';\nexport const GAME_RESET = 'GAME_RESET';\nexport const SET_PLAYER_INFO = 'SET_PLAYER_INFO';\nexport const ADVANCE_PHASE = 'ADVANCE_PHASE';\nexport const ADVANCE_ROUND = 'ADVANCE_ROUND';\nexport const SET_MESSAGE = 'SET_MESSAGE';\nexport const HIDE_INTRO = 'HIDE_INTRO';\n\n// \n// MAP REDUCER - Territory ownership and troops\n// \n\nexport const CAPTURE_TERRITORY = 'CAPTURE_TERRITORY';\nexport const ADD_TROOPS = 'ADD_TROOPS';\nexport const REMOVE_TROOPS = 'REMOVE_TROOPS';\nexport const SET_TROOPS = 'SET_TROOPS';\nexport const SELECT_TERRITORY = 'SELECT_TERRITORY';\nexport const DESELECT_TERRITORY = 'DESELECT_TERRITORY';\n\n// \n// COMBAT REDUCER - Battles, reinforcements, maneuvers\n// \n\nexport const SET_REINFORCEMENTS = 'SET_REINFORCEMENTS';\nexport const USE_REINFORCEMENT = 'USE_REINFORCEMENT';\nexport const START_BATTLE = 'START_BATTLE';\nexport const RESOLVE_BATTLE = 'RESOLVE_BATTLE';\nexport const DISMISS_BATTLE = 'DISMISS_BATTLE';\nexport const UPDATE_BATTLE_STATS = 'UPDATE_BATTLE_STATS';\nexport const START_MANEUVER = 'START_MANEUVER';\nexport const EXECUTE_MANEUVER = 'EXECUTE_MANEUVER';\nexport const CANCEL_MANEUVER = 'CANCEL_MANEUVER';\nexport const USE_MANEUVER = 'USE_MANEUVER';\nexport const SET_MANEUVERS = 'SET_MANEUVERS';\n\n// \n// EVENT REDUCER - Event cards\n// \n\nexport const DRAW_EVENT = 'DRAW_EVENT';\nexport const SHOW_EVENT_CARD = 'SHOW_EVENT_CARD';\nexport const HIDE_EVENT_CARD = 'HIDE_EVENT_CARD';\nexport const MARK_EVENT_USED = 'MARK_EVENT_USED';\nexport const ADD_INVULNERABLE_TERRITORY = 'ADD_INVULNERABLE_TERRITORY';\nexport const CLEAR_INVULNERABLE_TERRITORIES = 'CLEAR_INVULNERABLE_TERRITORIES';\n\n// \n// KNOWLEDGE REDUCER - Quiz system\n// \n\nexport const DRAW_KNOWLEDGE_CHECK = 'DRAW_KNOWLEDGE_CHECK';\nexport const SHOW_KNOWLEDGE_CHECK = 'SHOW_KNOWLEDGE_CHECK';\nexport const HIDE_KNOWLEDGE_CHECK = 'HIDE_KNOWLEDGE_CHECK';\nexport const ANSWER_KNOWLEDGE_CHECK = 'ANSWER_KNOWLEDGE_CHECK';\nexport const MARK_CHECK_USED = 'MARK_CHECK_USED';\nexport const MARK_REQUIRED_CHECK_SEEN = 'MARK_REQUIRED_CHECK_SEEN';\n\n// \n// SCORE REDUCER - Scores and faction-specific meters\n// \n\nexport const UPDATE_SCORES = 'UPDATE_SCORES';\nexport const DELTA_NATIONALISM = 'DELTA_NATIONALISM';\nexport const SET_NATIONALISM = 'SET_NATIONALISM';\n\n// \n// AI REDUCER - AI opponent actions\n// \n\nexport const ADD_AI_LOG = 'ADD_AI_LOG';\nexport const CLEAR_AI_LOG = 'CLEAR_AI_LOG';\nexport const SET_AI_ACTIONS = 'SET_AI_ACTIONS';\nexport const SHOW_AI_REPLAY = 'SHOW_AI_REPLAY';\nexport const HIDE_AI_REPLAY = 'HIDE_AI_REPLAY';\n\n// \n// LEADER REDUCER - Leader alive/dead states\n// \n\nexport const KILL_LEADER = 'KILL_LEADER';\nexport const REVIVE_LEADER = 'REVIVE_LEADER'; // For undo functionality\n\n// \n// HISTORY REDUCER - Undo, journal, pending actions\n// \n\nexport const ADD_JOURNAL_ENTRY = 'ADD_JOURNAL_ENTRY';\nexport const SAVE_PHASE_SNAPSHOT = 'SAVE_PHASE_SNAPSHOT';\nexport const SET_PENDING_ADVANCE = 'SET_PENDING_ADVANCE';\nexport const CLEAR_PENDING_ADVANCE = 'CLEAR_PENDING_ADVANCE';\nexport const SET_PENDING_ACTION = 'SET_PENDING_ACTION';\nexport const CLEAR_PENDING_ACTION = 'CLEAR_PENDING_ACTION';\nexport const SAVE_ACTION_SNAPSHOT = 'SAVE_ACTION_SNAPSHOT';\nexport const REMOVE_LAST_ACTION = 'REMOVE_LAST_ACTION';\n\n// \n// LOAD STATE - Restore saved game state\n// \n\nexport const LOAD_GAME_STATE = 'LOAD_GAME_STATE';\nexport const LOAD_MAP_STATE = 'LOAD_MAP_STATE';\nexport const LOAD_COMBAT_STATE = 'LOAD_COMBAT_STATE';\nexport const LOAD_EVENT_STATE = 'LOAD_EVENT_STATE';\nexport const LOAD_KNOWLEDGE_STATE = 'LOAD_KNOWLEDGE_STATE';\nexport const LOAD_SCORE_STATE = 'LOAD_SCORE_STATE';\nexport const LOAD_AI_STATE = 'LOAD_AI_STATE';\nexport const LOAD_LEADER_STATE = 'LOAD_LEADER_STATE';\nexport const LOAD_HISTORY_STATE = 'LOAD_HISTORY_STATE';\n","/**\n * Game Reducer - Core game flow and metadata\n *\n * Handles: game status, player info, rounds, phases, UI messages\n */\n\nimport {\n  GAME_START,\n  GAME_OVER,\n  GAME_RESET,\n  SET_PLAYER_INFO,\n  ADVANCE_PHASE,\n  ADVANCE_ROUND,\n  SET_MESSAGE,\n  HIDE_INTRO,\n  LOAD_GAME_STATE,\n} from './types';\n\nconst PHASES = ['event', 'allocate', 'battle', 'maneuver', 'score'];\nconst TOTAL_ROUNDS = 12;\n\n/**\n * @typedef {Object} GameState\n * @property {'not_started' | 'in_progress' | 'game_over'} status\n * @property {string | null} playerFaction - 'us' | 'british' | 'native'\n * @property {string} playerName\n * @property {string} classPeriod\n * @property {number} round - 1-12\n * @property {string} phase - 'event' | 'allocate' | 'battle' | 'maneuver' | 'score'\n * @property {string} message - UI feedback message\n * @property {boolean} showIntro\n */\n\n/** @returns {GameState} */\nexport function getInitialGameState() {\n  return {\n    status: 'not_started',\n    playerFaction: null,\n    playerName: '',\n    classPeriod: '',\n    round: 1,\n    phaseIndex: 0, // 0 = 'event', 1 = 'allocate', 2 = 'battle', 3 = 'maneuver', 4 = 'score'\n    message: 'Welcome to the War of 1812',\n    showIntro: true,\n    gameOverReason: null,\n    gameOverWinner: null,\n    gameMode: 'historian',\n    difficulty: 'medium',\n  };\n}\n\n/**\n * Game Reducer\n * @param {GameState} state\n * @param {Object} action\n * @returns {GameState}\n */\nexport default function gameReducer(state = getInitialGameState(), action) {\n  switch (action.type) {\n    case GAME_START:\n      return {\n        ...state,\n        status: 'in_progress',\n        playerFaction: action.payload.faction,\n        playerName: action.payload.name,\n        classPeriod: action.payload.period,\n        gameMode: action.payload.gameMode || 'historian',\n        difficulty: action.payload.difficulty || 'medium',\n        sessionId: action.payload.sessionId || null,\n        classId: action.payload.classId || null,\n        round: 1,\n        phaseIndex: 0, // Start at 'event' phase\n        message: `${action.payload.name}, you command the ${getFactionName(action.payload.faction)}!`,\n      };\n\n    case GAME_OVER:\n      return {\n        ...state,\n        status: 'game_over',\n        message: typeof action.payload === 'string'\n          ? action.payload\n          : action.payload?.message || 'The War of 1812 has ended.',\n        gameOverReason: action.payload?.reason || 'treaty',\n        gameOverWinner: action.payload?.winner || null,\n      };\n\n    case GAME_RESET:\n      return getInitialGameState();\n\n    case SET_PLAYER_INFO:\n      return {\n        ...state,\n        playerName: action.payload.name ?? state.playerName,\n        classPeriod: action.payload.period ?? state.classPeriod,\n        playerFaction: action.payload.faction ?? state.playerFaction,\n      };\n\n    case ADVANCE_PHASE: {\n      // Support direct phase override for undo functionality\n      if (action.payload?.overridePhaseIndex !== undefined) {\n        const targetPhaseIndex = action.payload.overridePhaseIndex;\n        return {\n          ...state,\n          phaseIndex: targetPhaseIndex,\n          message: action.payload?.message || getPhaseMessage(PHASES[targetPhaseIndex]),\n        };\n      }\n\n      // Normal phase advancement logic\n      const nextPhaseIndex = (state.phaseIndex + 1) % PHASES.length;\n      const nextPhase = PHASES[nextPhaseIndex];\n\n      // If we wrapped around to 'event', advance the round\n      if (nextPhaseIndex === 0 && state.round < TOTAL_ROUNDS) {\n        return {\n          ...state,\n          phaseIndex: nextPhaseIndex,\n          round: state.round + 1,\n          message: action.payload?.message || `Round ${state.round + 1} begins`,\n        };\n      }\n\n      // Check for game over\n      if (nextPhaseIndex === 0 && state.round >= TOTAL_ROUNDS) {\n        return {\n          ...state,\n          status: 'game_over',\n          message: 'The Treaty of Ghent has been signed. The war is over!',\n        };\n      }\n\n      return {\n        ...state,\n        phaseIndex: nextPhaseIndex,\n        message: action.payload?.message || getPhaseMessage(nextPhase),\n      };\n    }\n\n    case ADVANCE_ROUND:\n      if (state.round >= TOTAL_ROUNDS) {\n        return {\n          ...state,\n          status: 'game_over',\n          message: 'The Treaty of Ghent has been signed. The war is over!',\n        };\n      }\n      return {\n        ...state,\n        round: state.round + 1,\n        phaseIndex: 0, // Reset to 'event' phase\n        message: action.payload?.message || `Round ${state.round + 1} begins`,\n      };\n\n    case SET_MESSAGE:\n      return {\n        ...state,\n        message: action.payload,\n      };\n\n    case HIDE_INTRO:\n      return {\n        ...state,\n        showIntro: false,\n      };\n\n    case LOAD_GAME_STATE:\n      return {\n        ...getInitialGameState(),\n        ...action.payload,\n        showIntro: false,\n        gameOverReason: action.payload?.gameOverReason || null,\n        gameOverWinner: action.payload?.gameOverWinner || null,\n        gameMode: action.payload?.gameMode || 'historian',\n        difficulty: action.payload?.difficulty || 'medium',\n        sessionId: action.payload?.sessionId || null,\n        classId: action.payload?.classId || null,\n      };\n\n    default:\n      return state;\n  }\n}\n\n// \n// Helper Functions\n// \n\nfunction getFactionName(faction) {\n  const names = {\n    us: 'United States of America',\n    british: 'British Empire and Canadian forces',\n    native: 'Native American Confederacy',\n  };\n  return names[faction] || faction;\n}\n\nfunction getPhaseMessage(phase) {\n  const messages = {\n    event: 'A new event unfolds...',\n    allocate: 'Place your reinforcements',\n    battle: 'Time for battle!',\n    maneuver: 'Reposition your forces',\n    score: 'Calculating scores...',\n  };\n  return messages[phase] || '';\n}\n","/**\n * Map Reducer - Territory ownership and troop placement\n *\n * Handles: territory ownership, troop counts, territory selection\n */\n\nimport territories from '../data/territories';\nimport {\n  CAPTURE_TERRITORY,\n  ADD_TROOPS,\n  REMOVE_TROOPS,\n  SET_TROOPS,\n  SELECT_TERRITORY,\n  DESELECT_TERRITORY,\n  GAME_RESET,\n  LOAD_MAP_STATE,\n} from './types';\n\n/**\n * @typedef {Object} MapState\n * @property {Record<string, string>} territoryOwners - Map of territoryId -> faction ('us' | 'british' | 'native' | 'neutral')\n * @property {Record<string, number>} troops - Map of territoryId -> troop count\n * @property {string | null} selectedTerritory - Currently selected territory ID\n */\n\n/** @returns {MapState} */\nexport function getInitialMapState() {\n  return {\n    territoryOwners: initTerritoryOwners(),\n    troops: initTroops(),\n    selectedTerritory: null,\n  };\n}\n\nfunction initTerritoryOwners() {\n  const owners = {};\n  for (const [id, terr] of Object.entries(territories)) {\n    owners[id] = terr.startingOwner;\n  }\n  return owners;\n}\n\nfunction initTroops() {\n  const troops = {};\n  for (const [id, terr] of Object.entries(territories)) {\n    if (terr.startingOwner === 'neutral') {\n      troops[id] = 0;\n    } else if (terr.startingTroops) {\n      troops[id] = terr.startingTroops;\n    } else if (terr.hasFort) {\n      troops[id] = 4;\n    } else {\n      troops[id] = 2;\n    }\n  }\n  return troops;\n}\n\n/**\n * Map Reducer\n * @param {MapState} state\n * @param {Object} action\n * @returns {MapState}\n */\nexport default function mapReducer(state = getInitialMapState(), action) {\n  switch (action.type) {\n    case CAPTURE_TERRITORY:\n      return {\n        ...state,\n        territoryOwners: {\n          ...state.territoryOwners,\n          [action.payload.territoryId]: action.payload.newOwner,\n        },\n      };\n\n    case ADD_TROOPS: {\n      const { territoryId, count } = action.payload;\n      if (!Number.isFinite(count) || count < 0) return state;\n      const currentTroops = state.troops[territoryId] || 0;\n      return {\n        ...state,\n        troops: {\n          ...state.troops,\n          [territoryId]: currentTroops + count,\n        },\n      };\n    }\n\n    case REMOVE_TROOPS: {\n      const { territoryId, count } = action.payload;\n      if (!Number.isFinite(count) || count < 0) return state;\n      const currentTroops = state.troops[territoryId] || 0;\n      const newCount = Math.max(0, currentTroops - count);\n      return {\n        ...state,\n        troops: {\n          ...state.troops,\n          [territoryId]: newCount,\n        },\n      };\n    }\n\n    case SET_TROOPS: {\n      const { territoryId, count } = action.payload;\n      if (!Number.isFinite(count) || count < 0) return state;\n      return {\n        ...state,\n        troops: {\n          ...state.troops,\n          [territoryId]: count,\n        },\n      };\n    }\n\n    case SELECT_TERRITORY:\n      return {\n        ...state,\n        selectedTerritory: action.payload,\n      };\n\n    case DESELECT_TERRITORY:\n      return {\n        ...state,\n        selectedTerritory: null,\n      };\n\n    case GAME_RESET:\n      return getInitialMapState();\n\n    case LOAD_MAP_STATE:\n      return {\n        ...getInitialMapState(),\n        ...action.payload,\n        selectedTerritory: null,\n      };\n\n    default:\n      return state;\n  }\n}\n","/**\n * Combat Reducer - Battles, reinforcements, and maneuvers\n *\n * Handles: battle results, reinforcements, maneuver state, battle stats\n */\n\nimport {\n  SET_REINFORCEMENTS,\n  USE_REINFORCEMENT,\n  START_BATTLE,\n  RESOLVE_BATTLE,\n  DISMISS_BATTLE,\n  UPDATE_BATTLE_STATS,\n  START_MANEUVER,\n  EXECUTE_MANEUVER,\n  CANCEL_MANEUVER,\n  USE_MANEUVER,\n  SET_MANEUVERS,\n  GAME_RESET,\n  LOAD_COMBAT_STATE,\n} from './types';\n\n/**\n * @typedef {Object} BattleResult\n * @property {string} attacker - Faction\n * @property {string} defender - Faction\n * @property {string} fromId - Territory ID\n * @property {string} toId - Territory ID\n * @property {number} attackerRoll - Dice roll\n * @property {number} defenderRoll - Dice roll\n * @property {number} attackerTroops - Initial troops\n * @property {number} defenderTroops - Initial troops\n * @property {number} attackerLosses - Troops lost\n * @property {number} defenderLosses - Troops lost\n * @property {boolean} victory - Did attacker win?\n * @property {string} message - Battle narrative\n */\n\n/**\n * @typedef {Object} CombatState\n * @property {number} reinforcementsRemaining\n * @property {BattleResult | null} battleResult\n * @property {boolean} showBattleModal\n * @property {Object} battleStats - { fought: number, won: number, lost: number }\n * @property {string | null} maneuverFrom - Source territory ID\n * @property {number} maneuversRemaining - 0-2\n */\n\n/** @returns {CombatState} */\nexport function getInitialCombatState() {\n  return {\n    reinforcementsRemaining: 0,\n    battleResult: null,\n    showBattleModal: false,\n    battleStats: { fought: 0, won: 0, lost: 0 },\n    maneuverFrom: null,\n    maneuversRemaining: 0,\n  };\n}\n\n/**\n * Combat Reducer\n * @param {CombatState} state\n * @param {Object} action\n * @returns {CombatState}\n */\nexport default function combatReducer(state = getInitialCombatState(), action) {\n  switch (action.type) {\n    case SET_REINFORCEMENTS: {\n      const count = action.payload;\n      if (!Number.isFinite(count) || count < 0) return state;\n      return {\n        ...state,\n        reinforcementsRemaining: count,\n      };\n    }\n\n    case USE_REINFORCEMENT:\n      if (state.reinforcementsRemaining <= 0) return state;\n      return {\n        ...state,\n        reinforcementsRemaining: state.reinforcementsRemaining - 1,\n      };\n\n    case START_BATTLE:\n      return {\n        ...state,\n        battleResult: action.payload,\n        showBattleModal: true,\n      };\n\n    case RESOLVE_BATTLE:\n      // Battle resolution is handled by action creators\n      // This just updates the result\n      return {\n        ...state,\n        battleResult: action.payload,\n      };\n\n    case DISMISS_BATTLE:\n      return {\n        ...state,\n        battleResult: null,\n        showBattleModal: false,\n      };\n\n    case UPDATE_BATTLE_STATS: {\n      const { fought, won, lost } = action.payload;\n      return {\n        ...state,\n        battleStats: {\n          fought: state.battleStats.fought + (fought || 0),\n          won: state.battleStats.won + (won || 0),\n          lost: state.battleStats.lost + (lost || 0),\n        },\n      };\n    }\n\n    case START_MANEUVER:\n      return {\n        ...state,\n        maneuverFrom: action.payload,\n      };\n\n    case EXECUTE_MANEUVER:\n      // Maneuver execution is handled by action creators (updates map state)\n      // This just clears the maneuver state and decrements count\n      return {\n        ...state,\n        maneuverFrom: null,\n        maneuversRemaining: Math.max(0, state.maneuversRemaining - 1),\n      };\n\n    case CANCEL_MANEUVER:\n      return {\n        ...state,\n        maneuverFrom: null,\n      };\n\n    case USE_MANEUVER:\n      return {\n        ...state,\n        maneuversRemaining: Math.max(0, state.maneuversRemaining - 1),\n      };\n\n    case SET_MANEUVERS: {\n      const count = action.payload;\n      if (!Number.isFinite(count) || count < 0) return state;\n      return {\n        ...state,\n        maneuversRemaining: count,\n      };\n    }\n\n    case GAME_RESET:\n      return getInitialCombatState();\n\n    case LOAD_COMBAT_STATE:\n      return {\n        ...getInitialCombatState(),\n        ...action.payload,\n        battleResult: null,\n        showBattleModal: false,\n        maneuverFrom: null,\n      };\n\n    default:\n      return state;\n  }\n}\n","/**\n * Event Reducer - Event card system\n *\n * Handles: event cards, event UI state, invulnerable territories (Fort McHenry mechanic)\n */\n\nimport {\n  DRAW_EVENT,\n  SHOW_EVENT_CARD,\n  HIDE_EVENT_CARD,\n  MARK_EVENT_USED,\n  ADD_INVULNERABLE_TERRITORY,\n  CLEAR_INVULNERABLE_TERRITORIES,\n  GAME_RESET,\n  LOAD_EVENT_STATE,\n} from './types';\n\n/**\n * @typedef {Object} EventState\n * @property {Object | null} currentEvent - Current event card data\n * @property {string[]} usedEventIds - IDs of events already drawn\n * @property {boolean} showEventCard - Whether to show event UI\n * @property {string[]} invulnerableTerritories - Territories immune to capture this round\n */\n\n/** @returns {EventState} */\nexport function getInitialEventState() {\n  return {\n    currentEvent: null,\n    usedEventIds: [],\n    showEventCard: false,\n    invulnerableTerritories: [],\n  };\n}\n\n/**\n * Event Reducer\n * @param {EventState} state\n * @param {Object} action\n * @returns {EventState}\n */\nexport default function eventReducer(state = getInitialEventState(), action) {\n  switch (action.type) {\n    case DRAW_EVENT:\n      return {\n        ...state,\n        currentEvent: action.payload,\n      };\n\n    case SHOW_EVENT_CARD:\n      return {\n        ...state,\n        showEventCard: true,\n      };\n\n    case HIDE_EVENT_CARD:\n      return {\n        ...state,\n        showEventCard: false,\n      };\n\n    case MARK_EVENT_USED:\n      return {\n        ...state,\n        usedEventIds: [...state.usedEventIds, action.payload],\n      };\n\n    case ADD_INVULNERABLE_TERRITORY:\n      if (state.invulnerableTerritories.includes(action.payload)) {\n        return state;\n      }\n      return {\n        ...state,\n        invulnerableTerritories: [\n          ...state.invulnerableTerritories,\n          action.payload,\n        ],\n      };\n\n    case CLEAR_INVULNERABLE_TERRITORIES:\n      return {\n        ...state,\n        invulnerableTerritories: [],\n      };\n\n    case GAME_RESET:\n      return getInitialEventState();\n\n    case LOAD_EVENT_STATE:\n      return {\n        ...getInitialEventState(),\n        ...action.payload,\n        currentEvent: null,\n        showEventCard: false,\n      };\n\n    default:\n      return state;\n  }\n}\n","/**\n * Knowledge Reducer - Quiz/knowledge check system\n *\n * Handles: knowledge checks, quiz results, check history\n */\n\nimport {\n  DRAW_KNOWLEDGE_CHECK,\n  SHOW_KNOWLEDGE_CHECK,\n  HIDE_KNOWLEDGE_CHECK,\n  ANSWER_KNOWLEDGE_CHECK,\n  MARK_CHECK_USED,\n  MARK_REQUIRED_CHECK_SEEN,\n  GAME_RESET,\n  LOAD_KNOWLEDGE_STATE,\n} from './types';\n\n/**\n * @typedef {Object} KnowledgeState\n * @property {Object | null} currentKnowledgeCheck - Current quiz question\n * @property {boolean} showKnowledgeCheck - Whether to show quiz UI\n * @property {string[]} usedCheckIds - IDs of checks already shown\n * @property {string[]} requiredChecksSeen - Required checks the player has seen\n * @property {Object} knowledgeCheckResults - { total: number, correct: number }\n * @property {Array} knowledgeCheckHistory - Array of past check results\n */\n\n/** @returns {KnowledgeState} */\nexport function getInitialKnowledgeState() {\n  return {\n    currentKnowledgeCheck: null,\n    showKnowledgeCheck: false,\n    usedCheckIds: [],\n    requiredChecksSeen: [],\n    knowledgeCheckResults: { total: 0, correct: 0 },\n    knowledgeCheckHistory: [],\n  };\n}\n\n/**\n * Knowledge Reducer\n * @param {KnowledgeState} state\n * @param {Object} action\n * @returns {KnowledgeState}\n */\nexport default function knowledgeReducer(state = getInitialKnowledgeState(), action) {\n  switch (action.type) {\n    case DRAW_KNOWLEDGE_CHECK:\n      return {\n        ...state,\n        currentKnowledgeCheck: action.payload,\n      };\n\n    case SHOW_KNOWLEDGE_CHECK:\n      return {\n        ...state,\n        showKnowledgeCheck: true,\n      };\n\n    case HIDE_KNOWLEDGE_CHECK:\n      return {\n        ...state,\n        showKnowledgeCheck: false,\n      };\n\n    case ANSWER_KNOWLEDGE_CHECK: {\n      const { correct, checkData } = action.payload;\n      return {\n        ...state,\n        knowledgeCheckResults: {\n          total: state.knowledgeCheckResults.total + 1,\n          correct: state.knowledgeCheckResults.correct + (correct ? 1 : 0),\n        },\n        knowledgeCheckHistory: [\n          ...state.knowledgeCheckHistory,\n          {\n            ...checkData,\n            correct,\n            timestamp: Date.now(),\n          },\n        ],\n      };\n    }\n\n    case MARK_CHECK_USED:\n      return {\n        ...state,\n        usedCheckIds: [...state.usedCheckIds, action.payload],\n      };\n\n    case MARK_REQUIRED_CHECK_SEEN:\n      return {\n        ...state,\n        requiredChecksSeen: [...state.requiredChecksSeen, action.payload],\n      };\n\n    case GAME_RESET:\n      return getInitialKnowledgeState();\n\n    case LOAD_KNOWLEDGE_STATE:\n      return {\n        ...getInitialKnowledgeState(),\n        ...action.payload,\n        currentKnowledgeCheck: null,\n        showKnowledgeCheck: false,\n      };\n\n    default:\n      return state;\n  }\n}\n","/**\n * Score Reducer - Scoring and faction-specific meters\n *\n * Handles: faction scores, nationalism meter (US-specific)\n */\n\nimport {\n  UPDATE_SCORES,\n  DELTA_NATIONALISM,\n  SET_NATIONALISM,\n  GAME_RESET,\n  LOAD_SCORE_STATE,\n} from './types';\n\n/**\n * @typedef {Object} ScoreState\n * @property {Object} scores - { us: number, british: number, native: number }\n * @property {number} nationalismMeter - 0-100, US faction mechanic\n */\n\n/** @returns {ScoreState} */\nexport function getInitialScoreState() {\n  return {\n    scores: { us: 0, british: 0, native: 0 },\n    nationalismMeter: 0,\n  };\n}\n\n/**\n * Score Reducer\n * @param {ScoreState} state\n * @param {Object} action\n * @returns {ScoreState}\n */\nexport default function scoreReducer(state = getInitialScoreState(), action) {\n  switch (action.type) {\n    case UPDATE_SCORES:\n      return {\n        ...state,\n        scores: {\n          ...state.scores,\n          ...action.payload,\n        },\n      };\n\n    case DELTA_NATIONALISM: {\n      const newValue = state.nationalismMeter + action.payload;\n      return {\n        ...state,\n        nationalismMeter: Math.max(0, Math.min(100, newValue)),\n      };\n    }\n\n    case SET_NATIONALISM:\n      return {\n        ...state,\n        nationalismMeter: Math.max(0, Math.min(100, action.payload)),\n      };\n\n    case GAME_RESET:\n      return getInitialScoreState();\n\n    case LOAD_SCORE_STATE:\n      return {\n        ...getInitialScoreState(),\n        ...action.payload,\n      };\n\n    default:\n      return state;\n  }\n}\n","/**\n * AI Reducer - AI opponent actions and logs\n *\n * Handles: AI action logs, AI replay UI state\n */\n\nimport {\n  ADD_AI_LOG,\n  CLEAR_AI_LOG,\n  SET_AI_ACTIONS,\n  SHOW_AI_REPLAY,\n  HIDE_AI_REPLAY,\n  GAME_RESET,\n  LOAD_AI_STATE,\n} from './types';\n\n/**\n * @typedef {Object} AIState\n * @property {string[]} aiLog - Log messages from AI turns\n * @property {Array} aiActions - Array of AI actions for replay\n * @property {boolean} showAIReplay - Whether to show AI replay UI\n */\n\n/** @returns {AIState} */\nexport function getInitialAIState() {\n  return {\n    aiLog: [],\n    aiActions: [],\n    showAIReplay: false,\n  };\n}\n\n/**\n * AI Reducer\n * @param {AIState} state\n * @param {Object} action\n * @returns {AIState}\n */\nexport default function aiReducer(state = getInitialAIState(), action) {\n  switch (action.type) {\n    case ADD_AI_LOG:\n      return {\n        ...state,\n        aiLog: [...state.aiLog, action.payload],\n      };\n\n    case CLEAR_AI_LOG:\n      return {\n        ...state,\n        aiLog: [],\n      };\n\n    case SET_AI_ACTIONS:\n      return {\n        ...state,\n        aiActions: action.payload,\n      };\n\n    case SHOW_AI_REPLAY:\n      return {\n        ...state,\n        showAIReplay: true,\n      };\n\n    case HIDE_AI_REPLAY:\n      return {\n        ...state,\n        showAIReplay: false,\n      };\n\n    case GAME_RESET:\n      return getInitialAIState();\n\n    case LOAD_AI_STATE:\n      return getInitialAIState();\n\n    default:\n      return state;\n  }\n}\n","/**\n * Leader Reducer - Leader alive/dead states\n *\n * Handles: leader states (Jackson, Tecumseh, Brock, etc.)\n */\n\nimport leadersData from '../data/leaders';\nimport {\n  KILL_LEADER,\n  REVIVE_LEADER,\n  GAME_RESET,\n  LOAD_LEADER_STATE,\n} from './types';\n\n/**\n * @typedef {Object} LeaderState\n * @property {Record<string, { alive: boolean }>} leaderStates - Map of leaderId -> { alive }\n */\n\nfunction initLeaderStates() {\n  const states = {};\n  for (const [id, leader] of Object.entries(leadersData)) {\n    states[id] = { alive: leader.alive };\n  }\n  return states;\n}\n\n/** @returns {LeaderState} */\nexport function getInitialLeaderState() {\n  return {\n    leaderStates: initLeaderStates(),\n  };\n}\n\n/**\n * Leader Reducer\n * @param {LeaderState} state\n * @param {Object} action\n * @returns {LeaderState}\n */\nexport default function leaderReducer(state = getInitialLeaderState(), action) {\n  switch (action.type) {\n    case KILL_LEADER:\n      return {\n        ...state,\n        leaderStates: {\n          ...state.leaderStates,\n          [action.payload]: { alive: false },\n        },\n      };\n\n    case REVIVE_LEADER:\n      return {\n        ...state,\n        leaderStates: {\n          ...state.leaderStates,\n          [action.payload]: { alive: true },\n        },\n      };\n\n    case GAME_RESET:\n      return getInitialLeaderState();\n\n    case LOAD_LEADER_STATE: {\n      const initial = getInitialLeaderState();\n      return {\n        ...initial,\n        leaderStates: {\n          ...initial.leaderStates,\n          ...action.payload.leaderStates,\n        },\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n","/**\n * History Reducer - Undo/redo, journal entries, pending actions\n *\n * Handles: game history, journal, phase snapshots, pending confirmations\n */\n\nimport {\n  ADD_JOURNAL_ENTRY,\n  SAVE_PHASE_SNAPSHOT,\n  SET_PENDING_ADVANCE,\n  CLEAR_PENDING_ADVANCE,\n  SET_PENDING_ACTION,\n  CLEAR_PENDING_ACTION,\n  SAVE_ACTION_SNAPSHOT,\n  REMOVE_LAST_ACTION,\n  GAME_RESET,\n  LOAD_HISTORY_STATE,\n} from './types';\n\n/**\n * @typedef {Object} HistoryState\n * @property {Array} journalEntries - Game timeline entries\n * @property {Array} phaseHistory - Snapshots for undo\n * @property {boolean} pendingAdvance - Whether phase advance is pending confirmation\n * @property {string} pendingAdvanceMessage - Message for pending advance\n * @property {Object | null} pendingAction - Pending action requiring confirmation\n * @property {Array} actionHistory - History of actions for replay/undo\n */\n\n/** @returns {HistoryState} */\nexport function getInitialHistoryState() {\n  return {\n    journalEntries: [],\n    phaseHistory: [],\n    pendingAdvance: false,\n    pendingAdvanceMessage: '',\n    pendingAction: null,\n    actionHistory: [],\n  };\n}\n\n/**\n * History Reducer\n * @param {HistoryState} state\n * @param {Object} action\n * @returns {HistoryState}\n */\nexport default function historyReducer(state = getInitialHistoryState(), action) {\n  switch (action.type) {\n    case ADD_JOURNAL_ENTRY:\n      return {\n        ...state,\n        journalEntries: [...state.journalEntries, action.payload],\n      };\n\n    case SAVE_PHASE_SNAPSHOT:\n      return {\n        ...state,\n        phaseHistory: [...state.phaseHistory, action.payload],\n      };\n\n    case SET_PENDING_ADVANCE:\n      return {\n        ...state,\n        pendingAdvance: true,\n        pendingAdvanceMessage: action.payload || '',\n      };\n\n    case CLEAR_PENDING_ADVANCE:\n      return {\n        ...state,\n        pendingAdvance: false,\n        pendingAdvanceMessage: '',\n      };\n\n    case SET_PENDING_ACTION:\n      return {\n        ...state,\n        pendingAction: action.payload,\n      };\n\n    case CLEAR_PENDING_ACTION:\n      return {\n        ...state,\n        pendingAction: null,\n      };\n\n    case SAVE_ACTION_SNAPSHOT:\n      return {\n        ...state,\n        actionHistory: [...state.actionHistory, action.payload],\n      };\n\n    case REMOVE_LAST_ACTION:\n      return {\n        ...state,\n        actionHistory: state.actionHistory.slice(0, -1),\n      };\n\n    case GAME_RESET:\n      return getInitialHistoryState();\n\n    case LOAD_HISTORY_STATE:\n      return {\n        ...getInitialHistoryState(),\n        journalEntries: action.payload.journalEntries || [],\n      };\n\n    default:\n      return state;\n  }\n}\n","/**\n * useGameState Hook - Version 2 (useReducer Architecture)\n *\n * This is a complete refactor using useReducer instead of useState.\n * Benefits:\n * - NO stale closure bugs\n * - NO refs needed\n * - Clean dependency arrays\n * - Testable reducers\n * - Industry-standard React patterns\n *\n * Migration strategy: Create this as V2, test thoroughly, then replace original\n */\n\nimport { useReducer, useCallback, useMemo, useRef } from 'react';\nimport territories, { areAdjacent } from '../data/territories';\nimport { drawEventCard } from '../data/eventCards';\nimport { drawKnowledgeCheck } from '../data/knowledgeChecks';\nimport { checkObjectives, getObjectiveBonus } from '../data/objectives';\nimport { getLeaderBonus, getLeaderRallyBonus, getFirstStrikeBonus } from '../data/leaders';\nimport { runAITurn } from './useAI';\n\n// Import all reducers and action types\nimport {\n  gameReducer,\n  mapReducer,\n  combatReducer,\n  eventReducer,\n  knowledgeReducer,\n  scoreReducer,\n  aiReducer,\n  leaderReducer,\n  historyReducer,\n  getInitialGameState,\n  getInitialMapState,\n  getInitialCombatState,\n  getInitialEventState,\n  getInitialKnowledgeState,\n  getInitialScoreState,\n  getInitialAIState,\n  getInitialLeaderState,\n  getInitialHistoryState,\n  // Action types\n  GAME_START,\n  GAME_OVER,\n  GAME_RESET,\n  HIDE_INTRO,\n  ADVANCE_PHASE,\n  ADVANCE_ROUND,\n  SET_MESSAGE,\n  SELECT_TERRITORY,\n  DESELECT_TERRITORY,\n  ADD_TROOPS,\n  REMOVE_TROOPS,\n  SET_TROOPS,\n  CAPTURE_TERRITORY,\n  SET_REINFORCEMENTS,\n  USE_REINFORCEMENT,\n  START_BATTLE,\n  DISMISS_BATTLE,\n  UPDATE_BATTLE_STATS,\n  START_MANEUVER,\n  EXECUTE_MANEUVER,\n  CANCEL_MANEUVER,\n  SET_MANEUVERS,\n  DRAW_EVENT,\n  SHOW_EVENT_CARD,\n  HIDE_EVENT_CARD,\n  MARK_EVENT_USED,\n  ADD_INVULNERABLE_TERRITORY,\n  CLEAR_INVULNERABLE_TERRITORIES,\n  DRAW_KNOWLEDGE_CHECK,\n  SHOW_KNOWLEDGE_CHECK,\n  HIDE_KNOWLEDGE_CHECK,\n  ANSWER_KNOWLEDGE_CHECK,\n  MARK_CHECK_USED,\n  MARK_REQUIRED_CHECK_SEEN,\n  UPDATE_SCORES,\n  DELTA_NATIONALISM,\n  SET_NATIONALISM,\n  ADD_JOURNAL_ENTRY,\n  ADD_AI_LOG,\n  CLEAR_AI_LOG,\n  SET_AI_ACTIONS,\n  SHOW_AI_REPLAY,\n  HIDE_AI_REPLAY,\n  KILL_LEADER,\n  SAVE_PHASE_SNAPSHOT,\n  SET_PENDING_ADVANCE,\n  CLEAR_PENDING_ADVANCE,\n  SET_PENDING_ACTION,\n  CLEAR_PENDING_ACTION,\n  SAVE_ACTION_SNAPSHOT,\n  REMOVE_LAST_ACTION,\n  LOAD_GAME_STATE,\n  LOAD_MAP_STATE,\n  LOAD_COMBAT_STATE,\n  LOAD_EVENT_STATE,\n  LOAD_KNOWLEDGE_STATE,\n  LOAD_SCORE_STATE,\n  LOAD_AI_STATE,\n  LOAD_LEADER_STATE,\n  LOAD_HISTORY_STATE,\n} from '../reducers';\n\nconst TOTAL_ROUNDS = 12;\nconst SEASONS = ['Spring', 'Summer', 'Autumn', 'Winter'];\nconst PHASES = ['event', 'allocate', 'battle', 'maneuver', 'score'];\nconst PHASE_LABELS = {\n  event: 'Draw Event Card',\n  allocate: 'Allocate Forces',\n  battle: 'Battle',\n  maneuver: 'Maneuver',\n  score: 'Score Update',\n};\nconst ALL_FACTIONS = ['us', 'british', 'native'];\n\nconst getSeasonYear = (round) => {\n  const year = 1812 + Math.floor((round - 1) / 4);\n  const season = SEASONS[(round - 1) % 4];\n  return `${season} ${year}`;\n};\n\nfunction calculateReinforcements(territoryOwners, faction, leaderStates, round) {\n  const owned = Object.entries(territoryOwners).filter(([, owner]) => owner === faction);\n  if (owned.length === 0) return 0;\n  const base = 3 + Math.floor(owned.length / 2);\n  const leaderBonus = getLeaderRallyBonus(faction, leaderStates);\n  const nativeBonus = (faction === 'native' && round <= 4) ? 1 : 0;\n  return base + leaderBonus + nativeBonus;\n}\n\nfunction checkDomination(territoryOwners) {\n  const ownedTerritories = Object.entries(territoryOwners)\n    .filter(([, owner]) => owner !== 'neutral');\n  if (ownedTerritories.length === 0) return null;\n  const firstOwner = ownedTerritories[0][1];\n  const allSame = ownedTerritories.every(([, owner]) => owner === firstOwner);\n  return allSame ? firstOwner : null;\n}\n\nexport default function useGameStateV2() {\n  // \n  // REDUCER INITIALIZATION\n  // \n\n  const [gameState, dispatchGame] = useReducer(gameReducer, null, getInitialGameState);\n  const [mapState, dispatchMap] = useReducer(mapReducer, null, getInitialMapState);\n  const [combatState, dispatchCombat] = useReducer(combatReducer, null, getInitialCombatState);\n  const [eventState, dispatchEvent] = useReducer(eventReducer, null, getInitialEventState);\n  const [knowledgeState, dispatchKnowledge] = useReducer(knowledgeReducer, null, getInitialKnowledgeState);\n  const [scoreState, dispatchScore] = useReducer(scoreReducer, null, getInitialScoreState);\n  const [aiState, dispatchAI] = useReducer(aiReducer, null, getInitialAIState);\n  const [leaderState, dispatchLeader] = useReducer(leaderReducer, null, getInitialLeaderState);\n  const [historyState, dispatchHistory] = useReducer(historyReducer, null, getInitialHistoryState);\n\n  // Track whether we need to show an event card after AI replay closes\n  const pendingEventAfterReplay = useRef(false);\n\n  // \n  // DERIVED STATE (using current state, no stale closures!)\n  // \n\n  const currentPhase = PHASES[gameState.phaseIndex];\n  const currentPhaseLabel = PHASE_LABELS[currentPhase] || '';\n  const seasonYear = useMemo(() => getSeasonYear(gameState.round), [gameState.round]);\n\n  const playerTerritoryCount = useMemo(\n    () => Object.values(mapState.territoryOwners).filter((o) => o === gameState.playerFaction).length,\n    [mapState.territoryOwners, gameState.playerFaction]\n  );\n\n  const playerObjectives = useMemo(\n    () =>\n      gameState.playerFaction\n        ? checkObjectives(gameState.playerFaction, {\n            territoryOwners: mapState.territoryOwners,\n            troops: mapState.troops,\n            nationalismMeter: scoreState.nationalismMeter,\n          })\n        : [],\n    [gameState.playerFaction, mapState.territoryOwners, mapState.troops, scoreState.nationalismMeter]\n  );\n\n  const objectiveBonus = useMemo(\n    () =>\n      gameState.playerFaction\n        ? getObjectiveBonus(gameState.playerFaction, {\n            territoryOwners: mapState.territoryOwners,\n            troops: mapState.troops,\n            nationalismMeter: scoreState.nationalismMeter,\n          })\n        : 0,\n    [gameState.playerFaction, mapState.territoryOwners, mapState.troops, scoreState.nationalismMeter]\n  );\n\n  const nativeResistance = useMemo(() => {\n    if (gameState.playerFaction !== 'native') return 0;\n    return Math.min(playerTerritoryCount, 6);\n  }, [gameState.playerFaction, playerTerritoryCount]);\n\n  const navalDominance = useMemo(() => {\n    if (gameState.playerFaction !== 'british') return 0;\n    return Object.entries(mapState.territoryOwners)\n      .filter(([id, owner]) => owner === 'british' && territories[id]?.isNaval)\n      .length;\n  }, [gameState.playerFaction, mapState.territoryOwners]);\n\n  const factionMultiplier = useMemo(() => {\n    if (gameState.playerFaction === 'us') return 1 + scoreState.nationalismMeter / 100;\n    if (gameState.playerFaction === 'native') return 1 + (Math.min(nativeResistance, 6) / 6) * 0.5;\n    if (gameState.playerFaction === 'british') return 1 + (Math.min(navalDominance, 4) / 4) * 0.3;\n    return 1;\n  }, [gameState.playerFaction, scoreState.nationalismMeter, nativeResistance, navalDominance]);\n\n  const finalScore = useMemo(() => {\n    if (!gameState.playerFaction) return 0;\n    const base = scoreState.scores[gameState.playerFaction] || 0;\n    return Math.round(base * factionMultiplier) + objectiveBonus;\n  }, [scoreState.scores, gameState.playerFaction, factionMultiplier, objectiveBonus]);\n\n  // \n  // EVENT CARD EFFECTS HELPER\n  // \n\n  const applyEventEffects = useCallback((event, currentOwners, currentTroops, currentNationalism, currentLeaders) => {\n    if (!event || !event.apply) return { owners: currentOwners, troops: currentTroops, nationalism: currentNationalism, leaders: currentLeaders };\n\n    const gameStateForEvent = {\n      territoryOwners: currentOwners,\n      troops: currentTroops,\n      scores: scoreState.scores,\n      playerFaction: gameState.playerFaction,\n    };\n    const effects = event.apply(gameStateForEvent);\n    let newOwners = { ...currentOwners };\n    let newTroops = { ...currentTroops };\n    let newNationalism = currentNationalism;\n    let newLeaders = { ...currentLeaders };\n\n    // Territory ownership change\n    if (effects.territoryChange) {\n      const { territory, newOwner } = effects.territoryChange;\n      if (territory && newOwner) {\n        newOwners[territory] = newOwner;\n      }\n    }\n\n    // Troop bonus\n    if (effects.troopBonus) {\n      const { faction, count, territories: targetTerrs, theater, territory } = effects.troopBonus;\n      const safeCount = Number.isFinite(count) ? Math.max(0, count) : 0;\n      if (targetTerrs && targetTerrs.length > 0) {\n        let remaining = safeCount;\n        let idx = 0;\n        while (remaining > 0 && idx < 200) {\n          const tid = targetTerrs[idx % targetTerrs.length];\n          newTroops[tid] = (newTroops[tid] || 0) + 1;\n          remaining--;\n          idx++;\n        }\n      } else if (theater) {\n        const candidates = Object.entries(newOwners)\n          .filter(([id, owner]) => owner === faction && territories[id]?.theater === theater);\n        if (candidates.length > 0) {\n          let remaining = safeCount;\n          let idx = 0;\n          while (remaining > 0 && idx < 200) {\n            const [tid] = candidates[idx % candidates.length];\n            newTroops[tid] = (newTroops[tid] || 0) + 1;\n            remaining--;\n            idx++;\n          }\n        }\n      } else if (territory) {\n        newTroops[territory] = (newTroops[territory] || 0) + safeCount;\n      }\n    }\n\n    // Troop penalty\n    if (effects.troopPenalty) {\n      const { territory, territories: penaltyTerrs, faction: penaltyFaction, count } = effects.troopPenalty;\n      if (territory) {\n        newTroops[territory] = Math.max(0, (newTroops[territory] || 0) - count);\n      } else if (penaltyTerrs) {\n        for (const tid of penaltyTerrs) {\n          newTroops[tid] = Math.max(0, (newTroops[tid] || 0) - count);\n        }\n      } else if (penaltyFaction) {\n        const factionTerrs = Object.entries(newOwners)\n          .filter(([, owner]) => owner === penaltyFaction)\n          .map(([id]) => id);\n        let remaining = count;\n        for (const tid of factionTerrs) {\n          if (remaining <= 0) break;\n          const loss = Math.min(remaining, Math.max(0, (newTroops[tid] || 0) - 1));\n          newTroops[tid] = (newTroops[tid] || 0) - loss;\n          remaining -= loss;\n        }\n      }\n    }\n\n    // Nationalism change\n    if (effects.nationalismChange && gameState.playerFaction === 'us') {\n      newNationalism = Math.max(0, Math.min(100, newNationalism + effects.nationalismChange));\n    }\n\n    // Leader removal\n    if (effects.removeLeader && newLeaders[effects.removeLeader]) {\n      newLeaders[effects.removeLeader] = { ...newLeaders[effects.removeLeader], alive: false };\n    }\n\n    // Fort McHenry / invulnerable territory\n    const invulnerable = [];\n    if (effects.fortify && effects.fortify.invulnerable && effects.fortify.territory) {\n      invulnerable.push(effects.fortify.territory);\n    }\n\n    return { owners: newOwners, troops: newTroops, nationalism: newNationalism, leaders: newLeaders, invulnerable };\n  }, [scoreState.scores, gameState.playerFaction]);\n\n  // \n  // JOURNAL HELPER\n  // \n\n  const addJournalEntry = useCallback((items) => {\n    dispatchHistory({\n      type: ADD_JOURNAL_ENTRY,\n      payload: {\n        round: gameState.round,\n        season: getSeasonYear(gameState.round),\n        items,\n      },\n    });\n  }, [gameState.round]);\n\n  // \n  // GAME ACTIONS\n  // \n\n  const startGame = useCallback(({ faction, playerName: name, classPeriod: period, gameMode, difficulty, sessionId, classId }) => {\n    // Reset all reducers\n    dispatchGame({ type: GAME_RESET });\n    dispatchMap({ type: GAME_RESET });\n    dispatchCombat({ type: GAME_RESET });\n    dispatchEvent({ type: GAME_RESET });\n    dispatchKnowledge({ type: GAME_RESET });\n    dispatchScore({ type: GAME_RESET });\n    dispatchAI({ type: GAME_RESET });\n    dispatchLeader({ type: GAME_RESET });\n    dispatchHistory({ type: GAME_RESET });\n\n    // Start the game\n    dispatchGame({ type: GAME_START, payload: { faction, name, period, gameMode, difficulty, sessionId, classId } });\n    dispatchGame({ type: HIDE_INTRO });\n    dispatchGame({\n      type: SET_MESSAGE,\n      payload: `The war begins! You command the ${faction === 'us' ? 'United States' : faction === 'british' ? 'British/Canadian' : 'Native Coalition'} forces.`\n    });\n\n    // Draw first event card\n    const event = drawEventCard(1, []);\n    if (event) {\n      dispatchEvent({ type: DRAW_EVENT, payload: event });\n      dispatchEvent({ type: SHOW_EVENT_CARD });\n      dispatchEvent({ type: MARK_EVENT_USED, payload: event.id });\n    }\n  }, []);\n\n  const resetGame = useCallback(() => {\n    dispatchGame({ type: GAME_RESET });\n    dispatchMap({ type: GAME_RESET });\n    dispatchCombat({ type: GAME_RESET });\n    dispatchEvent({ type: GAME_RESET });\n    dispatchKnowledge({ type: GAME_RESET });\n    dispatchScore({ type: GAME_RESET });\n    dispatchAI({ type: GAME_RESET });\n    dispatchLeader({ type: GAME_RESET });\n    dispatchHistory({ type: GAME_RESET });\n    pendingEventAfterReplay.current = false;\n  }, []);\n\n  const dismissIntro = useCallback(() => {\n    dispatchGame({ type: HIDE_INTRO });\n  }, []);\n\n  const selectTerritory = useCallback((id) => {\n    if (mapState.selectedTerritory === id) {\n      dispatchMap({ type: DESELECT_TERRITORY });\n    } else {\n      dispatchMap({ type: SELECT_TERRITORY, payload: id });\n    }\n  }, [mapState.selectedTerritory]);\n\n  const placeTroop = useCallback((territoryId) => {\n    if (currentPhase !== 'allocate') return;\n    if (mapState.territoryOwners[territoryId] !== gameState.playerFaction) return;\n    if (combatState.reinforcementsRemaining <= 0) return;\n\n    dispatchMap({ type: ADD_TROOPS, payload: { territoryId, count: 1 } });\n    dispatchCombat({ type: USE_REINFORCEMENT });\n    dispatchMap({ type: DESELECT_TERRITORY });\n    dispatchGame({\n      type: SET_MESSAGE,\n      payload: `Deployed 1 troop to ${territories[territoryId]?.name}. ${combatState.reinforcementsRemaining - 1} reinforcements remaining.`\n    });\n  }, [currentPhase, mapState.territoryOwners, gameState.playerFaction, combatState.reinforcementsRemaining]);\n\n  // \n  // BATTLE RESOLUTION\n  // \n\n  const attack = useCallback((fromId, toId) => {\n    if (currentPhase !== 'battle') return { success: false };\n    if (!areAdjacent(fromId, toId)) return { success: false, reason: 'Not adjacent' };\n    if (mapState.territoryOwners[fromId] !== gameState.playerFaction) return { success: false, reason: 'Not your territory' };\n    if (mapState.territoryOwners[toId] === gameState.playerFaction) return { success: false, reason: 'Already yours' };\n    if ((mapState.troops[fromId] || 0) < 2) return { success: false, reason: 'Need at least 2 troops to attack' };\n\n    // Fort McHenry invulnerability check\n    if (eventState.invulnerableTerritories.includes(toId)) {\n      dispatchGame({ type: SET_MESSAGE, payload: `${territories[toId]?.name} is invulnerable this round! The bombardment failed.` });\n      return { success: false, reason: 'Territory is invulnerable this round' };\n    }\n\n    let currentDefenderTroops = mapState.troops[toId] || 0;\n\n    // Auto-capture undefended territories\n    if (currentDefenderTroops === 0) {\n      const movers = Math.min(mapState.troops[fromId] - 1, 3);\n      dispatchMap({ type: SET_TROOPS, payload: { territoryId: fromId, count: Math.max(1, mapState.troops[fromId] - movers) } });\n      dispatchMap({ type: SET_TROOPS, payload: { territoryId: toId, count: Math.max(1, movers) } });\n      dispatchMap({ type: CAPTURE_TERRITORY, payload: { territoryId: toId, newOwner: gameState.playerFaction } });\n\n      if (gameState.playerFaction === 'us') {\n        dispatchScore({ type: DELTA_NATIONALISM, payload: 2 });\n      }\n\n      const result = {\n        success: true, conquered: true,\n        attackRolls: [], defendRolls: [],\n        attackerLosses: 0, defenderLosses: 0,\n        attackLeaderBonus: 0, defendLeaderBonus: 0,\n        fortBonus: false, firstStrike: false, fromId, toId,\n        undefended: true,\n      };\n      dispatchCombat({ type: START_BATTLE, payload: result });\n      dispatchCombat({ type: UPDATE_BATTLE_STATS, payload: { fought: 1, won: 1, lost: 0 } });\n      addJournalEntry([`Battle: Your forces occupied the undefended ${territories[toId]?.name}.`]);\n      dispatchGame({ type: SET_MESSAGE, payload: `Your forces march into the undefended ${territories[toId]?.name}!` });\n      return result;\n    }\n\n    // First strike check\n    const firstStrikeBonus = getFirstStrikeBonus(gameState.playerFaction, territories[toId], leaderState.leaderStates);\n    let firstStrikeDamage = 0;\n    if (firstStrikeBonus > 0) {\n      firstStrikeDamage = 1;\n      currentDefenderTroops = Math.max(0, currentDefenderTroops - firstStrikeDamage);\n      if (currentDefenderTroops === 0) {\n        const movers = Math.min(mapState.troops[fromId] - 1, 3);\n        dispatchMap({ type: SET_TROOPS, payload: { territoryId: fromId, count: Math.max(1, mapState.troops[fromId] - movers) } });\n        dispatchMap({ type: SET_TROOPS, payload: { territoryId: toId, count: Math.max(1, movers) } });\n        dispatchMap({ type: CAPTURE_TERRITORY, payload: { territoryId: toId, newOwner: gameState.playerFaction } });\n\n        if (gameState.playerFaction === 'us') {\n          dispatchScore({ type: DELTA_NATIONALISM, payload: 3 });\n        }\n\n        const result = {\n          success: true, conquered: true,\n          attackRolls: [], defendRolls: [],\n          attackerLosses: 0, defenderLosses: firstStrikeDamage,\n          attackLeaderBonus: 0, defendLeaderBonus: 0,\n          fortBonus: false, firstStrike: true, fromId, toId,\n        };\n        dispatchCombat({ type: START_BATTLE, payload: result });\n        dispatchCombat({ type: UPDATE_BATTLE_STATS, payload: { fought: 1, won: 1, lost: 0 } });\n        addJournalEntry([`Battle: Ambush! First strike wiped out defenders at ${territories[toId]?.name}!`]);\n        dispatchGame({ type: SET_MESSAGE, payload: `Ambush! First strike wipes out defenders at ${territories[toId]?.name}!` });\n        return result;\n      }\n    }\n\n    const attackerTroops = mapState.troops[fromId] - 1;\n    const attackDice = Math.min(attackerTroops, 3);\n    const defendDice = Math.min(currentDefenderTroops, 2);\n\n    const attackRolls = Array.from({ length: attackDice }, () => Math.floor(Math.random() * 6) + 1).sort((a, b) => b - a);\n    const defendRolls = Array.from({ length: defendDice }, () => Math.floor(Math.random() * 6) + 1).sort((a, b) => b - a);\n\n    // Leader bonuses\n    const MAX_BONUS = 2;\n    let attackLeaderBonus = getLeaderBonus({\n      faction: gameState.playerFaction,\n      territory: territories[fromId],\n      isAttacking: true,\n      leaderStates: leaderState.leaderStates,\n    });\n\n    if (gameState.playerFaction === 'british' && territories[toId]?.isNaval) {\n      attackLeaderBonus += 1;\n    }\n    attackLeaderBonus = Math.min(attackLeaderBonus, MAX_BONUS);\n\n    if (attackLeaderBonus > 0 && attackRolls.length > 0) {\n      attackRolls[0] = Math.min(attackRolls[0] + attackLeaderBonus, 9);\n    }\n\n    const defenderFaction = mapState.territoryOwners[toId];\n    let defendLeaderBonus = getLeaderBonus({\n      faction: defenderFaction,\n      territory: territories[toId],\n      isAttacking: false,\n      leaderStates: leaderState.leaderStates,\n    });\n\n    if (defenderFaction === 'british' && territories[toId]?.isNaval) {\n      defendLeaderBonus += 1;\n    }\n\n    const fortBonus = territories[toId]?.hasFort;\n    if (fortBonus) {\n      defendLeaderBonus += 1;\n    }\n    defendLeaderBonus = Math.min(defendLeaderBonus, MAX_BONUS);\n\n    if (defendLeaderBonus > 0 && defendRolls.length > 0) {\n      defendRolls[0] = Math.min(defendRolls[0] + defendLeaderBonus, 9);\n    }\n\n    let attackerLosses = 0;\n    let defenderLosses = firstStrikeDamage;\n    const comparisons = Math.min(attackRolls.length, defendRolls.length);\n    for (let i = 0; i < comparisons; i++) {\n      if (attackRolls[i] > defendRolls[i]) {\n        defenderLosses++;\n      } else {\n        attackerLosses++;\n      }\n    }\n\n    const totalDefenderTroops = mapState.troops[toId] || 0;\n    const newDefenderTroops = Math.max(0, totalDefenderTroops - defenderLosses);\n    const conquered = newDefenderTroops === 0;\n\n    if (conquered) {\n      const movers = Math.min(attackerTroops - attackerLosses, mapState.troops[fromId] - 1);\n      dispatchMap({ type: SET_TROOPS, payload: { territoryId: fromId, count: Math.max(1, mapState.troops[fromId] - movers) } });\n      dispatchMap({ type: SET_TROOPS, payload: { territoryId: toId, count: Math.max(1, movers) } });\n      dispatchMap({ type: CAPTURE_TERRITORY, payload: { territoryId: toId, newOwner: gameState.playerFaction } });\n\n      if (gameState.playerFaction === 'us') {\n        if (toId === 'baltimore' || toId === 'new_orleans') {\n          dispatchScore({ type: DELTA_NATIONALISM, payload: 10 });\n        } else {\n          dispatchScore({ type: DELTA_NATIONALISM, payload: 3 });\n        }\n      }\n    } else {\n      dispatchMap({ type: REMOVE_TROOPS, payload: { territoryId: fromId, count: attackerLosses } });\n      dispatchMap({ type: REMOVE_TROOPS, payload: { territoryId: toId, count: defenderLosses } });\n    }\n\n    const result = {\n      success: true,\n      conquered,\n      attackRolls,\n      defendRolls,\n      attackerLosses,\n      defenderLosses,\n      attackLeaderBonus,\n      defendLeaderBonus,\n      fortBonus: !!fortBonus,\n      firstStrike: firstStrikeDamage > 0,\n      fromId,\n      toId,\n    };\n\n    dispatchCombat({ type: START_BATTLE, payload: result });\n    dispatchCombat({\n      type: UPDATE_BATTLE_STATS,\n      payload: { fought: 1, won: conquered ? 1 : 0, lost: conquered ? 0 : 1 },\n    });\n    addJournalEntry([\n      conquered\n        ? `Battle: Your forces captured ${territories[toId]?.name}! (lost ${attackerLosses} troops)`\n        : `Battle: Attack on ${territories[toId]?.name} repelled (lost ${attackerLosses}, enemy lost ${defenderLosses})`,\n    ]);\n    dispatchGame({\n      type: SET_MESSAGE,\n      payload: conquered\n        ? `Victory! ${territories[toId]?.name} has been captured!`\n        : `Battle at ${territories[toId]?.name}: you lost ${attackerLosses}, defender lost ${defenderLosses}.`,\n    });\n\n    // Check for player domination after capture\n    if (conquered) {\n      const postAttackOwners = { ...mapState.territoryOwners, [toId]: gameState.playerFaction };\n      const dominator = checkDomination(postAttackOwners);\n      if (dominator === gameState.playerFaction) {\n        dispatchGame({ type: GAME_OVER, payload: {\n          reason: 'domination',\n          winner: gameState.playerFaction,\n          message: 'Total Victory! Your forces have achieved complete domination!',\n        }});\n      }\n    }\n\n    return result;\n  }, [currentPhase, mapState.territoryOwners, mapState.troops, gameState.playerFaction, eventState.invulnerableTerritories, leaderState.leaderStates, addJournalEntry]);\n\n  const dismissBattle = useCallback(() => {\n    dispatchCombat({ type: DISMISS_BATTLE });\n    dispatchMap({ type: DESELECT_TERRITORY });\n  }, []);\n\n  // \n  // EVENT CARD HANDLING\n  // \n\n  const dismissEvent = useCallback((quizResult) => {\n    if (eventState.currentEvent) {\n      const result = applyEventEffects(\n        eventState.currentEvent,\n        mapState.territoryOwners,\n        mapState.troops,\n        scoreState.nationalismMeter,\n        leaderState.leaderStates\n      );\n\n      let newNationalism = result.nationalism;\n\n      // Apply event effects\n      Object.keys(result.owners).forEach(tid => {\n        if (result.owners[tid] !== mapState.territoryOwners[tid]) {\n          dispatchMap({ type: CAPTURE_TERRITORY, payload: { territoryId: tid, newOwner: result.owners[tid] } });\n        }\n      });\n\n      Object.keys(result.troops).forEach(tid => {\n        const diff = result.troops[tid] - (mapState.troops[tid] || 0);\n        if (diff > 0) {\n          dispatchMap({ type: ADD_TROOPS, payload: { territoryId: tid, count: diff } });\n        } else if (diff < 0) {\n          dispatchMap({ type: REMOVE_TROOPS, payload: { territoryId: tid, count: Math.abs(diff) } });\n        }\n      });\n\n      Object.keys(result.leaders).forEach(lid => {\n        if (!result.leaders[lid].alive && leaderState.leaderStates[lid].alive) {\n          dispatchLeader({ type: KILL_LEADER, payload: lid });\n        }\n      });\n\n      if (result.invulnerable && result.invulnerable.length > 0) {\n        result.invulnerable.forEach(tid => {\n          dispatchEvent({ type: ADD_INVULNERABLE_TERRITORY, payload: tid });\n        });\n      }\n\n      // Apply quiz nationalism reward/penalty (troops are handled later with reinforcement calculation)\n      if (quizResult?.answered && eventState.currentEvent.quiz) {\n        if (quizResult.correct) {\n          const reward = eventState.currentEvent.quiz.reward;\n          if (reward?.nationalism && gameState.playerFaction === 'us') {\n            newNationalism = Math.max(0, Math.min(100, newNationalism + reward.nationalism));\n          }\n          addJournalEntry([\n            `Event: ${eventState.currentEvent.title}  ${eventState.currentEvent.effect}`,\n            `Quiz correct! ${reward?.troops ? `+${reward.troops} bonus troops` : ''}${reward?.nationalism ? `+${reward.nationalism} nationalism` : ''}`,\n          ]);\n        } else {\n          const penalty = eventState.currentEvent.quiz.penalty;\n          if (penalty?.nationalism && gameState.playerFaction === 'us') {\n            newNationalism = Math.max(0, Math.min(100, newNationalism + penalty.nationalism));\n          }\n          addJournalEntry([\n            `Event: ${eventState.currentEvent.title}  ${eventState.currentEvent.effect}`,\n            `Quiz missed. ${penalty?.nationalism ? `${penalty.nationalism} nationalism` : ''}`,\n          ]);\n        }\n      } else {\n        addJournalEntry([`Event: ${eventState.currentEvent.title}  ${eventState.currentEvent.effect}`]);\n      }\n\n      dispatchScore({ type: SET_NATIONALISM, payload: newNationalism });\n\n      // Recalculate scores after event effects may have changed territory ownership\n      const postEventOwners = result.owners;\n      const newScores = { us: 0, british: 0, native: 0 };\n      for (const [id, owner] of Object.entries(postEventOwners)) {\n        if (owner !== 'neutral') {\n          newScores[owner] = (newScores[owner] || 0) + (territories[id]?.points || 0);\n        }\n      }\n      dispatchScore({ type: UPDATE_SCORES, payload: newScores });\n    }\n\n    dispatchEvent({ type: HIDE_EVENT_CARD });\n\n    // Auto-advance from EVENT to ALLOCATE phase\n    if (!gameState.playerFaction) {\n      console.error('dismissEvent: playerFaction is null!');\n      return;\n    }\n\n    // Calculate base reinforcements\n    let reinforcements = calculateReinforcements(mapState.territoryOwners, gameState.playerFaction, leaderState.leaderStates, gameState.round);\n\n    // Apply quiz troop bonus/penalty if quiz was answered\n    if (quizResult?.answered && eventState.currentEvent?.quiz) {\n      if (quizResult.correct && eventState.currentEvent.quiz.reward?.troops) {\n        reinforcements += eventState.currentEvent.quiz.reward.troops;\n      } else if (!quizResult.correct && eventState.currentEvent.quiz.penalty?.troops) {\n        reinforcements = Math.max(0, reinforcements + eventState.currentEvent.quiz.penalty.troops);\n      }\n    }\n\n    // Dispatch all synchronously  React 18+ batches these into one render\n    dispatchCombat({ type: SET_REINFORCEMENTS, payload: reinforcements });\n    dispatchGame({ type: SET_MESSAGE, payload: `You receive ${reinforcements} reinforcements. Click your territories to place troops.` });\n    dispatchGame({ type: ADVANCE_PHASE });\n  }, [eventState.currentEvent, mapState.territoryOwners, mapState.troops, scoreState.nationalismMeter, leaderState.leaderStates, gameState.playerFaction, gameState.round, applyEventEffects, addJournalEntry]);\n\n  // \n  // KNOWLEDGE CHECK HANDLING\n  // \n\n  const answerKnowledgeCheck = useCallback((correct, selectedIndex) => {\n    dispatchKnowledge({ type: ANSWER_KNOWLEDGE_CHECK, payload: { correct, selectedIndex, round: gameState.round, check: knowledgeState.currentKnowledgeCheck } });\n\n    if (knowledgeState.currentKnowledgeCheck?.required) {\n      dispatchKnowledge({ type: MARK_REQUIRED_CHECK_SEEN, payload: knowledgeState.currentKnowledgeCheck.id });\n    }\n\n    if (correct && knowledgeState.currentKnowledgeCheck?.reward) {\n      const reward = knowledgeState.currentKnowledgeCheck.reward;\n      if (reward.type === 'troops') {\n        dispatchCombat({ type: SET_REINFORCEMENTS, payload: combatState.reinforcementsRemaining + reward.count });\n      } else if (reward.type === 'nationalism' && gameState.playerFaction === 'us') {\n        dispatchScore({ type: DELTA_NATIONALISM, payload: reward.count });\n      }\n    }\n\n    dispatchKnowledge({ type: HIDE_KNOWLEDGE_CHECK });\n  }, [knowledgeState.currentKnowledgeCheck, gameState.playerFaction, gameState.round, combatState.reinforcementsRemaining]);\n\n  const requestKnowledgeCheck = useCallback(() => {\n    if (knowledgeState.showKnowledgeCheck || eventState.showEventCard || combatState.showBattleModal) return;\n    const kc = drawKnowledgeCheck(gameState.round, knowledgeState.usedCheckIds, knowledgeState.requiredChecksSeen);\n    if (kc) {\n      dispatchKnowledge({ type: DRAW_KNOWLEDGE_CHECK, payload: kc });\n      dispatchKnowledge({ type: SHOW_KNOWLEDGE_CHECK });\n      dispatchKnowledge({ type: MARK_CHECK_USED, payload: kc.id });\n    }\n  }, [gameState.round, knowledgeState.usedCheckIds, knowledgeState.requiredChecksSeen, knowledgeState.showKnowledgeCheck, eventState.showEventCard, combatState.showBattleModal]);\n\n  // \n  // MANEUVER HANDLING\n  // \n\n  const requestManeuver = useCallback((fromId, toId) => {\n    if (currentPhase !== 'maneuver') return;\n    if (combatState.maneuversRemaining <= 0) return;\n    if (mapState.territoryOwners[fromId] !== gameState.playerFaction || mapState.territoryOwners[toId] !== gameState.playerFaction) return;\n    if (!areAdjacent(fromId, toId)) return;\n    if ((mapState.troops[fromId] || 0) < 2) return;\n\n    const movers = Math.min((mapState.troops[fromId] || 0) - 1, 3);\n\n    dispatchHistory({\n      type: SET_PENDING_ACTION,\n      payload: {\n        type: 'maneuver',\n        fromId,\n        toId,\n        fromTerritoryName: territories[fromId]?.name,\n        territoryName: territories[toId]?.name,\n        troopCount: movers,\n        fromCurrentTroops: mapState.troops[fromId] || 0,\n        fromNewTroops: (mapState.troops[fromId] || 0) - movers,\n        currentTroops: mapState.troops[toId] || 0,\n        newTroops: (mapState.troops[toId] || 0) + movers,\n      },\n    });\n  }, [currentPhase, combatState.maneuversRemaining, mapState.territoryOwners, mapState.troops, gameState.playerFaction]);\n\n  const confirmManeuver = useCallback(() => {\n    if (!historyState.pendingAction || historyState.pendingAction.type !== 'maneuver') return;\n    const { fromId, toId, troopCount } = historyState.pendingAction;\n\n    dispatchHistory({ type: SAVE_ACTION_SNAPSHOT, payload: { phase: currentPhase, type: 'maneuver', fromId, toId, movers: troopCount, previousFromTroops: mapState.troops[fromId] || 0, previousToTroops: mapState.troops[toId] || 0, previousManeuversRemaining: combatState.maneuversRemaining } });\n\n    dispatchMap({ type: REMOVE_TROOPS, payload: { territoryId: fromId, count: troopCount } });\n    dispatchMap({ type: ADD_TROOPS, payload: { territoryId: toId, count: troopCount } });\n    dispatchCombat({ type: EXECUTE_MANEUVER });\n    dispatchCombat({ type: CANCEL_MANEUVER });\n    dispatchMap({ type: DESELECT_TERRITORY });\n    dispatchHistory({ type: CLEAR_PENDING_ACTION });\n\n    addJournalEntry([`Maneuver: Moved ${troopCount} troops from ${territories[fromId]?.name} to ${territories[toId]?.name}.`]);\n\n    const remaining = combatState.maneuversRemaining - 1;\n    dispatchGame({\n      type: SET_MESSAGE,\n      payload: remaining > 0\n        ? `Moved ${troopCount} troops to ${territories[toId]?.name}. ${remaining} move(s) remaining.`\n        : `Moved ${troopCount} troops to ${territories[toId]?.name}. No moves remaining  advance when ready.`,\n    });\n  }, [historyState.pendingAction, currentPhase, mapState.troops, combatState.maneuversRemaining, addJournalEntry]);\n\n  const maneuverTroops = requestManeuver;\n\n  const cancelAction = useCallback(() => {\n    dispatchHistory({ type: CLEAR_PENDING_ACTION });\n    dispatchMap({ type: DESELECT_TERRITORY });\n  }, []);\n\n  const confirmPlaceTroop = useCallback(() => {\n    if (!historyState.pendingAction || historyState.pendingAction.type !== 'placement') return;\n    const { territoryId } = historyState.pendingAction;\n\n    dispatchHistory({ type: SAVE_ACTION_SNAPSHOT, payload: { phase: currentPhase, type: 'placement', territoryId, previousTroops: mapState.troops[territoryId] || 0, previousReinforcements: combatState.reinforcementsRemaining } });\n\n    dispatchMap({ type: ADD_TROOPS, payload: { territoryId, count: 1 } });\n    dispatchCombat({ type: USE_REINFORCEMENT });\n    dispatchHistory({ type: CLEAR_PENDING_ACTION });\n    dispatchMap({ type: DESELECT_TERRITORY });\n  }, [historyState.pendingAction, currentPhase, mapState.troops, combatState.reinforcementsRemaining]);\n\n  // \n  // PHASE ADVANCEMENT\n  // \n\n  const doAdvancePhase = useCallback((skipConfirmation) => {\n    if (eventState.showEventCard || combatState.showBattleModal || knowledgeState.showKnowledgeCheck) return;\n\n    // Check for unused resources\n    if (!skipConfirmation) {\n      if (currentPhase === 'allocate' && combatState.reinforcementsRemaining > 0) {\n        dispatchHistory({\n          type: SET_PENDING_ADVANCE,\n          payload: `You have ${combatState.reinforcementsRemaining} reinforcement${combatState.reinforcementsRemaining > 1 ? 's' : ''} remaining. They will be lost if you advance.`,\n        });\n        return;\n      }\n      if (currentPhase === 'maneuver' && combatState.maneuversRemaining > 0) {\n        dispatchHistory({\n          type: SET_PENDING_ADVANCE,\n          payload: `You have ${combatState.maneuversRemaining} move${combatState.maneuversRemaining > 1 ? 's' : ''} remaining.`,\n        });\n        return;\n      }\n    }\n    dispatchHistory({ type: CLEAR_PENDING_ADVANCE });\n\n    // Auto-save\n    try {\n      const saveData = {\n        version: 1,\n        timestamp: Date.now(),\n        playerFaction: gameState.playerFaction,\n        playerName: gameState.playerName,\n        classPeriod: gameState.classPeriod,\n        gameMode: gameState.gameMode,\n        round: gameState.round,\n        phase: gameState.phaseIndex,\n        territoryOwners: mapState.territoryOwners,\n        troops: mapState.troops,\n        scores: scoreState.scores,\n        nationalismMeter: scoreState.nationalismMeter,\n        reinforcementsRemaining: combatState.reinforcementsRemaining,\n        leaderStates: leaderState.leaderStates,\n        usedEventIds: eventState.usedEventIds,\n        usedCheckIds: knowledgeState.usedCheckIds,\n        requiredChecksSeen: knowledgeState.requiredChecksSeen,\n        knowledgeCheckResults: knowledgeState.knowledgeCheckResults,\n        knowledgeCheckHistory: knowledgeState.knowledgeCheckHistory,\n        journalEntries: historyState.journalEntries,\n        battleStats: combatState.battleStats,\n        invulnerableTerritories: eventState.invulnerableTerritories,\n      };\n      localStorage.setItem('war1812_save', JSON.stringify(saveData));\n    } catch (error) {\n      console.error('Auto-save failed:', error);\n    }\n\n    // Save snapshot for undo\n    dispatchHistory({\n      type: SAVE_PHASE_SNAPSHOT,\n      payload: {\n        phase: gameState.phaseIndex,\n        troops: mapState.troops,\n        territoryOwners: mapState.territoryOwners,\n        reinforcementsRemaining: combatState.reinforcementsRemaining,\n        maneuversRemaining: combatState.maneuversRemaining,\n      },\n    });\n\n    const nextPhaseIndex = gameState.phaseIndex + 1;\n\n    if (nextPhaseIndex >= PHASES.length) {\n      // End of player turn - run AI turns\n      const opponentFactions = ALL_FACTIONS.filter((f) => f !== gameState.playerFaction);\n      let aiOwners = { ...mapState.territoryOwners };\n      let aiTroops = { ...mapState.troops };\n      const allLogs = [];\n      const allActions = [];\n\n      for (const faction of opponentFactions) {\n        const hasTerritories = Object.values(aiOwners).some((o) => o === faction);\n        if (!hasTerritories) continue;\n\n        const result = runAITurn(faction, aiOwners, aiTroops, leaderState.leaderStates, eventState.invulnerableTerritories, gameState.round, gameState.difficulty);\n        aiOwners = result.territoryOwners;\n        aiTroops = result.troops;\n        allLogs.push(...result.log);\n        allActions.push(...result.actions);\n      }\n\n      // Apply AI changes\n      Object.keys(aiOwners).forEach(tid => {\n        if (aiOwners[tid] !== mapState.territoryOwners[tid]) {\n          dispatchMap({ type: CAPTURE_TERRITORY, payload: { territoryId: tid, newOwner: aiOwners[tid] } });\n        }\n      });\n\n      Object.keys(aiTroops).forEach(tid => {\n        dispatchMap({ type: SET_TROOPS, payload: { territoryId: tid, count: aiTroops[tid] } });\n      });\n\n      allLogs.forEach(log => dispatchAI({ type: ADD_AI_LOG, payload: log }));\n      dispatchAI({ type: SET_AI_ACTIONS, payload: allActions });\n\n      if (allActions.length > 0) {\n        dispatchAI({ type: SHOW_AI_REPLAY });\n      }\n\n      if (allLogs.length > 0) {\n        addJournalEntry(allLogs.map((l) => `Opponent: ${l}`));\n      }\n\n      // Update scores\n      const newScores = { us: 0, british: 0, native: 0 };\n      for (const [id, owner] of Object.entries(aiOwners)) {\n        if (owner !== 'neutral') {\n          newScores[owner] = (newScores[owner] || 0) + (territories[id]?.points || 0);\n        }\n      }\n      dispatchScore({ type: UPDATE_SCORES, payload: newScores });\n\n      // Check for domination (any faction controls all territories)\n      const dominator = checkDomination(aiOwners);\n      if (dominator) {\n        const factionNames = { us: 'United States', british: 'British/Canada', native: 'Native Coalition' };\n        if (dominator === gameState.playerFaction) {\n          dispatchGame({ type: GAME_OVER, payload: {\n            reason: 'domination',\n            winner: dominator,\n            message: 'Total Victory! Your forces have achieved complete domination!',\n          }});\n        } else {\n          dispatchGame({ type: GAME_OVER, payload: {\n            reason: 'domination',\n            winner: dominator,\n            message: `Defeated! ${factionNames[dominator] || dominator} has achieved total control of the theater.`,\n          }});\n        }\n        return;\n      }\n\n      // Check for US nationalism changes\n      if (gameState.playerFaction === 'us') {\n        const lostDC = mapState.territoryOwners.washington_dc === 'us' && aiOwners.washington_dc !== 'us';\n        const lostBaltimore = mapState.territoryOwners.baltimore === 'us' && aiOwners.baltimore !== 'us';\n        if (lostDC) dispatchScore({ type: DELTA_NATIONALISM, payload: -10 });\n        if (lostBaltimore) dispatchScore({ type: DELTA_NATIONALISM, payload: -8 });\n      }\n\n      // Check for elimination\n      const playerTerritories = Object.values(aiOwners).filter((o) => o === gameState.playerFaction).length;\n      if (playerTerritories === 0) {\n        dispatchGame({ type: GAME_OVER, payload: {\n          reason: 'elimination',\n          winner: null,\n          message: 'Your faction has been eliminated! The war is over.',\n        }});\n        return;\n      }\n\n      // Advance to next round\n      const nextRound = gameState.round + 1;\n      if (nextRound > TOTAL_ROUNDS) {\n        dispatchGame({ type: GAME_OVER, payload: {\n          reason: 'treaty',\n          winner: null,\n          message: 'The Treaty of Ghent has been signed. The war is over!',\n        }});\n        return;\n      }\n\n      dispatchGame({ type: ADVANCE_ROUND });\n      dispatchEvent({ type: CLEAR_INVULNERABLE_TERRITORIES });\n\n      // Draw next event  defer showing it if AI replay is active\n      const event = drawEventCard(nextRound, eventState.usedEventIds);\n      if (event) {\n        dispatchEvent({ type: DRAW_EVENT, payload: event });\n        dispatchEvent({ type: MARK_EVENT_USED, payload: event.id });\n        if (allActions.length > 0) {\n          // AI replay is showing  defer event card until replay closes\n          pendingEventAfterReplay.current = true;\n        } else {\n          dispatchEvent({ type: SHOW_EVENT_CARD });\n        }\n      }\n\n      const logSummary = allLogs.length > 0 ? ' | ' + allLogs.join(' ') : '';\n      dispatchGame({ type: SET_MESSAGE, payload: `Round ${nextRound}  ${getSeasonYear(nextRound)}${logSummary}` });\n      return;\n    }\n\n    // Advance within player turn\n    dispatchGame({ type: ADVANCE_PHASE });\n\n    const nextPhase = PHASES[nextPhaseIndex];\n    if (nextPhase === 'allocate') {\n      const reinforcements = calculateReinforcements(mapState.territoryOwners, gameState.playerFaction, leaderState.leaderStates, gameState.round);\n      dispatchCombat({ type: SET_REINFORCEMENTS, payload: reinforcements });\n      dispatchGame({ type: SET_MESSAGE, payload: `You receive ${reinforcements} reinforcements. Click your territories to place troops.` });\n    } else if (nextPhase === 'battle') {\n      dispatchGame({ type: SET_MESSAGE, payload: 'Select one of your territories, then click an adjacent enemy territory to attack. Advance phase when done.' });\n      dispatchMap({ type: DESELECT_TERRITORY });\n    } else if (nextPhase === 'maneuver') {\n      dispatchCombat({ type: SET_MANEUVERS, payload: 2 });\n      dispatchCombat({ type: CANCEL_MANEUVER });\n      dispatchMap({ type: DESELECT_TERRITORY });\n      dispatchGame({ type: SET_MESSAGE, payload: 'Maneuver phase: select your territory to move troops FROM, then click an adjacent territory you own. (2 moves available)' });\n    } else if (nextPhase === 'score') {\n      dispatchCombat({ type: CANCEL_MANEUVER });\n      dispatchAI({ type: CLEAR_AI_LOG });\n\n      const kc = drawKnowledgeCheck(gameState.round, knowledgeState.usedCheckIds, knowledgeState.requiredChecksSeen);\n      if (kc) {\n        dispatchKnowledge({ type: DRAW_KNOWLEDGE_CHECK, payload: kc });\n        dispatchKnowledge({ type: SHOW_KNOWLEDGE_CHECK });\n        dispatchKnowledge({ type: MARK_CHECK_USED, payload: kc.id });\n        dispatchGame({ type: SET_MESSAGE, payload: 'Review your turn and answer a knowledge check before ending.' });\n      } else {\n        dispatchGame({ type: SET_MESSAGE, payload: 'Review the board and scores. Advance to end your turn and let opponents move.' });\n      }\n    }\n  }, [currentPhase, eventState.showEventCard, eventState.usedEventIds, eventState.invulnerableTerritories, combatState.showBattleModal, combatState.reinforcementsRemaining, combatState.maneuversRemaining, knowledgeState.showKnowledgeCheck, knowledgeState.usedCheckIds, knowledgeState.requiredChecksSeen, gameState.playerFaction, gameState.round, gameState.phaseIndex, gameState.playerName, gameState.classPeriod, gameState.gameMode, gameState.difficulty, mapState.territoryOwners, mapState.troops, scoreState.scores, scoreState.nationalismMeter, leaderState.leaderStates, combatState.battleStats, knowledgeState.knowledgeCheckResults, knowledgeState.knowledgeCheckHistory, historyState.journalEntries, addJournalEntry]);\n\n  const advancePhase = useCallback(() => doAdvancePhase(false), [doAdvancePhase]);\n  const confirmAdvance = useCallback(() => doAdvancePhase(true), [doAdvancePhase]);\n  const cancelAdvance = useCallback(() => {\n    dispatchHistory({ type: CLEAR_PENDING_ADVANCE });\n  }, []);\n\n  // \n  // UNDO FUNCTIONALITY\n  // \n\n  const undoLastAction = useCallback(() => {\n    if (historyState.actionHistory.length === 0) return;\n    if (currentPhase === 'battle') return;\n\n    const lastAction = historyState.actionHistory[historyState.actionHistory.length - 1];\n    if (lastAction.phase !== currentPhase) {\n      dispatchGame({ type: SET_MESSAGE, payload: 'Can only undo actions from the current phase.' });\n      return;\n    }\n\n    if (lastAction.type === 'placement') {\n      dispatchMap({ type: SET_TROOPS, payload: { territoryId: lastAction.territoryId, count: lastAction.previousTroops } });\n      dispatchCombat({ type: SET_REINFORCEMENTS, payload: lastAction.previousReinforcements });\n      dispatchGame({ type: SET_MESSAGE, payload: `Undid deployment to ${territories[lastAction.territoryId]?.name}.` });\n    } else if (lastAction.type === 'maneuver') {\n      dispatchMap({ type: SET_TROOPS, payload: { territoryId: lastAction.fromId, count: lastAction.previousFromTroops } });\n      dispatchMap({ type: SET_TROOPS, payload: { territoryId: lastAction.toId, count: lastAction.previousToTroops } });\n      dispatchCombat({ type: SET_MANEUVERS, payload: lastAction.previousManeuversRemaining });\n      dispatchGame({ type: SET_MESSAGE, payload: `Undid maneuver from ${territories[lastAction.fromId]?.name} to ${territories[lastAction.toId]?.name}.` });\n    }\n\n    dispatchHistory({ type: REMOVE_LAST_ACTION });\n  }, [historyState.actionHistory, currentPhase]);\n\n  const goBackPhase = useCallback(() => {\n    if (historyState.phaseHistory.length === 0) return;\n    const snapshot = historyState.phaseHistory[historyState.phaseHistory.length - 1];\n\n    dispatchGame({ type: ADVANCE_PHASE, payload: { overridePhaseIndex: snapshot.phase } });\n    Object.keys(snapshot.troops).forEach(tid => {\n      dispatchMap({ type: SET_TROOPS, payload: { territoryId: tid, count: snapshot.troops[tid] } });\n    });\n    Object.keys(snapshot.territoryOwners).forEach(tid => {\n      if (snapshot.territoryOwners[tid] !== mapState.territoryOwners[tid]) {\n        dispatchMap({ type: CAPTURE_TERRITORY, payload: { territoryId: tid, newOwner: snapshot.territoryOwners[tid] } });\n      }\n    });\n    dispatchCombat({ type: SET_REINFORCEMENTS, payload: snapshot.reinforcementsRemaining });\n    dispatchCombat({ type: SET_MANEUVERS, payload: snapshot.maneuversRemaining });\n    dispatchMap({ type: DESELECT_TERRITORY });\n    dispatchCombat({ type: CANCEL_MANEUVER });\n    dispatchHistory({ type: CLEAR_PENDING_ADVANCE });\n\n    dispatchGame({ type: SET_MESSAGE, payload: `Returned to ${PHASE_LABELS[PHASES[snapshot.phase]]} phase.` });\n  }, [historyState.phaseHistory, mapState.territoryOwners]);\n\n  // \n  // TERRITORY CLICK HANDLER\n  // \n\n  const handleTerritoryClick = useCallback(\n    (id) => {\n      if (eventState.showEventCard || combatState.showBattleModal || knowledgeState.showKnowledgeCheck) {\n        return;\n      }\n\n      if (currentPhase === 'allocate') {\n        if (mapState.selectedTerritory === id) {\n          placeTroop(id);\n        } else {\n          selectTerritory(id);\n        }\n      } else if (currentPhase === 'battle') {\n        if (!mapState.selectedTerritory) {\n          if (mapState.territoryOwners[id] === gameState.playerFaction) {\n            if ((mapState.troops[id] || 0) < 2) {\n              dispatchGame({ type: SET_MESSAGE, payload: `${territories[id]?.name} needs at least 2 troops to attack from.` });\n              return;\n            }\n            selectTerritory(id);\n            dispatchGame({ type: SET_MESSAGE, payload: `Selected ${territories[id]?.name}. Click an adjacent enemy territory to attack, or click again to deselect.` });\n          }\n        } else if (mapState.selectedTerritory === id) {\n          dispatchMap({ type: DESELECT_TERRITORY });\n          dispatchGame({ type: SET_MESSAGE, payload: 'Attack cancelled. Select a territory to attack from.' });\n        } else {\n          if (mapState.territoryOwners[id] === gameState.playerFaction) {\n            if ((mapState.troops[id] || 0) >= 2) {\n              selectTerritory(id);\n              dispatchGame({ type: SET_MESSAGE, payload: `Switched to ${territories[id]?.name}. Click an adjacent enemy territory to attack.` });\n            }\n            return;\n          }\n          if (!areAdjacent(mapState.selectedTerritory, id)) {\n            dispatchGame({ type: SET_MESSAGE, payload: `${territories[id]?.name} is not adjacent to ${territories[mapState.selectedTerritory]?.name}.` });\n            return;\n          }\n          attack(mapState.selectedTerritory, id);\n          dispatchMap({ type: DESELECT_TERRITORY });\n        }\n      } else if (currentPhase === 'maneuver') {\n        if (combatState.maneuversRemaining <= 0) {\n          dispatchGame({ type: SET_MESSAGE, payload: 'No maneuvers remaining. Advance to end your turn.' });\n          return;\n        }\n        if (!combatState.maneuverFrom) {\n          if (mapState.territoryOwners[id] !== gameState.playerFaction) return;\n          if ((mapState.troops[id] || 0) < 2) {\n            dispatchGame({ type: SET_MESSAGE, payload: `${territories[id]?.name} needs at least 2 troops to move from.` });\n            return;\n          }\n          dispatchCombat({ type: START_MANEUVER, payload: id });\n          selectTerritory(id);\n          dispatchGame({ type: SET_MESSAGE, payload: `Selected ${territories[id]?.name} (${mapState.troops[id]} troops). Click an adjacent friendly territory to move troops, or click again to cancel.` });\n        } else if (combatState.maneuverFrom === id) {\n          dispatchCombat({ type: CANCEL_MANEUVER });\n          selectTerritory(null);\n          dispatchGame({ type: SET_MESSAGE, payload: 'Maneuver cancelled. Select a territory to move troops from.' });\n        } else {\n          if (mapState.territoryOwners[id] !== gameState.playerFaction) {\n            dispatchGame({ type: SET_MESSAGE, payload: 'You can only maneuver troops to territories you own.' });\n            return;\n          }\n          if (!areAdjacent(combatState.maneuverFrom, id)) {\n            dispatchGame({ type: SET_MESSAGE, payload: `${territories[id]?.name} is not adjacent to ${territories[combatState.maneuverFrom]?.name}.` });\n            return;\n          }\n          maneuverTroops(combatState.maneuverFrom, id);\n        }\n      } else {\n        selectTerritory(id);\n      }\n    },\n    [\n      currentPhase,\n      eventState.showEventCard,\n      combatState.showBattleModal,\n      combatState.maneuversRemaining,\n      combatState.maneuverFrom,\n      knowledgeState.showKnowledgeCheck,\n      mapState.selectedTerritory,\n      mapState.territoryOwners,\n      mapState.troops,\n      gameState.playerFaction,\n      placeTroop,\n      selectTerritory,\n      attack,\n      maneuverTroops,\n    ]\n  );\n\n  // \n  // SAVE/LOAD FUNCTIONALITY\n  // \n\n  const saveGame = useCallback(() => {\n    const saveData = {\n      version: 1,\n      timestamp: Date.now(),\n      playerFaction: gameState.playerFaction,\n      playerName: gameState.playerName,\n      classPeriod: gameState.classPeriod,\n      gameMode: gameState.gameMode,\n      round: gameState.round,\n      phase: gameState.phaseIndex,\n      territoryOwners: mapState.territoryOwners,\n      troops: mapState.troops,\n      scores: scoreState.scores,\n      nationalismMeter: scoreState.nationalismMeter,\n      reinforcementsRemaining: combatState.reinforcementsRemaining,\n      leaderStates: leaderState.leaderStates,\n      usedEventIds: eventState.usedEventIds,\n      usedCheckIds: knowledgeState.usedCheckIds,\n      requiredChecksSeen: knowledgeState.requiredChecksSeen,\n      knowledgeCheckResults: knowledgeState.knowledgeCheckResults,\n      knowledgeCheckHistory: knowledgeState.knowledgeCheckHistory,\n      journalEntries: historyState.journalEntries,\n      battleStats: combatState.battleStats,\n      invulnerableTerritories: eventState.invulnerableTerritories,\n    };\n    try {\n      localStorage.setItem('war1812_save', JSON.stringify(saveData));\n      return true;\n    } catch {\n      return false;\n    }\n  }, [gameState, mapState, combatState, eventState, knowledgeState, scoreState, leaderState, historyState]);\n\n  const loadGame = useCallback(() => {\n    try {\n      const raw = localStorage.getItem('war1812_save');\n      if (!raw) return false;\n      const data = JSON.parse(raw);\n      if (data.version !== 1) return false;\n\n      // Loading a save means the player already knows how to play\n      localStorage.setItem('war1812_tutorial_completed', 'true');\n\n      // Restore all 9 reducer states from save data\n      dispatchGame({ type: LOAD_GAME_STATE, payload: {\n        status: 'in_progress',\n        playerFaction: data.playerFaction,\n        playerName: data.playerName,\n        classPeriod: data.classPeriod,\n        gameMode: data.gameMode || 'historian',\n        round: data.round,\n        phaseIndex: data.phase,\n        message: `Game loaded  Round ${data.round}, ${getSeasonYear(data.round)}.`,\n      }});\n\n      dispatchMap({ type: LOAD_MAP_STATE, payload: {\n        territoryOwners: data.territoryOwners,\n        troops: data.troops,\n      }});\n\n      dispatchCombat({ type: LOAD_COMBAT_STATE, payload: {\n        reinforcementsRemaining: data.reinforcementsRemaining || 0,\n        battleStats: data.battleStats || { fought: 0, won: 0, lost: 0 },\n      }});\n\n      dispatchEvent({ type: LOAD_EVENT_STATE, payload: {\n        usedEventIds: data.usedEventIds || [],\n        invulnerableTerritories: data.invulnerableTerritories || [],\n      }});\n\n      dispatchKnowledge({ type: LOAD_KNOWLEDGE_STATE, payload: {\n        usedCheckIds: data.usedCheckIds || [],\n        requiredChecksSeen: data.requiredChecksSeen || [],\n        knowledgeCheckResults: data.knowledgeCheckResults || { total: 0, correct: 0 },\n        knowledgeCheckHistory: data.knowledgeCheckHistory || [],\n      }});\n\n      dispatchScore({ type: LOAD_SCORE_STATE, payload: {\n        scores: data.scores || { us: 0, british: 0, native: 0 },\n        nationalismMeter: data.nationalismMeter || 0,\n      }});\n\n      dispatchAI({ type: LOAD_AI_STATE });\n\n      dispatchLeader({ type: LOAD_LEADER_STATE, payload: {\n        leaderStates: data.leaderStates || {},\n      }});\n\n      dispatchHistory({ type: LOAD_HISTORY_STATE, payload: {\n        journalEntries: data.journalEntries || [],\n      }});\n\n      return true;\n    } catch {\n      return false;\n    }\n  }, []);\n\n  const hasSavedGame = useCallback(() => {\n    try {\n      const raw = localStorage.getItem('war1812_save');\n      if (!raw) return null;\n      const data = JSON.parse(raw);\n      return {\n        playerName: data.playerName,\n        faction: data.playerFaction,\n        round: data.round,\n        season: getSeasonYear(data.round),\n        timestamp: data.timestamp,\n      };\n    } catch {\n      return null;\n    }\n  }, []);\n\n  const deleteSave = useCallback(() => {\n    localStorage.removeItem('war1812_save');\n  }, []);\n\n  const exportSaveFile = useCallback(() => {\n    try {\n      const saveData = localStorage.getItem('war1812_save');\n      if (!saveData) {\n        return { success: false, error: 'No save file found' };\n      }\n\n      const blob = new Blob([saveData], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `war1812_save_${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n\n      return { success: true };\n    } catch (error) {\n      console.error('Failed to export save file:', error);\n      return { success: false, error: error.message };\n    }\n  }, []);\n\n  const importSaveFile = useCallback((fileContent) => {\n    try {\n      const data = JSON.parse(fileContent);\n      if (!data.version || !data.playerFaction) {\n        return { success: false, error: 'Invalid save file format' };\n      }\n      localStorage.setItem('war1812_save', fileContent);\n      const loaded = loadGame();\n      if (!loaded) {\n        return { success: false, error: 'Failed to load imported save' };\n      }\n      return { success: true };\n    } catch (error) {\n      console.error('Failed to import save file:', error);\n      return { success: false, error: 'Invalid JSON file' };\n    }\n  }, [loadGame]);\n\n  // \n  // RETURN PUBLIC API (matches original)\n  // \n\n  return {\n    // State\n    gameStarted: gameState.status === 'in_progress',\n    gameOver: gameState.status === 'game_over',\n    gameOverReason: gameState.gameOverReason,\n    gameOverWinner: gameState.gameOverWinner,\n    playerFaction: gameState.playerFaction,\n    playerName: gameState.playerName,\n    classPeriod: gameState.classPeriod,\n    gameMode: gameState.gameMode,\n    difficulty: gameState.difficulty,\n    sessionId: gameState.sessionId,\n    classId: gameState.classId,\n    round: gameState.round,\n    totalRounds: TOTAL_ROUNDS,\n    currentPhase,\n    currentPhaseLabel,\n    seasonYear,\n    territoryOwners: mapState.territoryOwners,\n    troops: mapState.troops,\n    selectedTerritory: mapState.selectedTerritory,\n    scores: scoreState.scores,\n    nationalismMeter: scoreState.nationalismMeter,\n    reinforcementsRemaining: combatState.reinforcementsRemaining,\n    showIntro: gameState.showIntro,\n    currentEvent: eventState.currentEvent,\n    showEventCard: eventState.showEventCard,\n    battleResult: combatState.battleResult,\n    showBattleModal: combatState.showBattleModal,\n    message: gameState.message,\n    playerTerritoryCount,\n    finalScore,\n    objectiveBonus,\n    leaderStates: leaderState.leaderStates,\n    aiLog: aiState.aiLog,\n    aiActions: aiState.aiActions,\n    showAIReplay: aiState.showAIReplay,\n    playerObjectives,\n    currentKnowledgeCheck: knowledgeState.currentKnowledgeCheck,\n    showKnowledgeCheck: knowledgeState.showKnowledgeCheck,\n    knowledgeCheckResults: knowledgeState.knowledgeCheckResults,\n    knowledgeCheckHistory: knowledgeState.knowledgeCheckHistory,\n    journalEntries: historyState.journalEntries,\n    battleStats: combatState.battleStats,\n    maneuverFrom: combatState.maneuverFrom,\n    maneuversRemaining: combatState.maneuversRemaining,\n    nativeResistance,\n    navalDominance,\n    factionMultiplier,\n    phaseHistory: historyState.phaseHistory,\n    pendingAdvance: historyState.pendingAdvance,\n    pendingAdvanceMessage: historyState.pendingAdvanceMessage,\n    pendingAction: historyState.pendingAction,\n    actionHistory: historyState.actionHistory,\n\n    // Actions\n    startGame,\n    resetGame,\n    advancePhase,\n    confirmAdvance,\n    cancelAdvance,\n    goBackPhase,\n    undoLastAction,\n    handleTerritoryClick,\n    placeTroop,\n    confirmPlaceTroop,\n    confirmManeuver,\n    cancelAction,\n    attack,\n    selectTerritory,\n    dismissEvent,\n    dismissBattle,\n    answerKnowledgeCheck,\n    requestKnowledgeCheck,\n    setMessage: (msg) => dispatchGame({ type: SET_MESSAGE, payload: msg }),\n    setBattleResult: (result) => dispatchCombat({ type: START_BATTLE, payload: result }),\n    saveGame,\n    loadGame,\n    hasSavedGame,\n    deleteSave,\n    exportSaveFile,\n    importSaveFile,\n    dismissIntro,\n    closeAIReplay: () => {\n      dispatchAI({ type: HIDE_AI_REPLAY });\n      if (pendingEventAfterReplay.current) {\n        pendingEventAfterReplay.current = false;\n        dispatchEvent({ type: SHOW_EVENT_CARD });\n      }\n    },\n  };\n}\n","import { useState, useCallback } from 'react';\n\nconst TUTORIAL_STEPS = [\n  {\n    title: 'Welcome, Commander!',\n    description:\n      'Welcome to War of 1812: Rise of the Nation! This brief tutorial will walk you through the game. You can revisit it anytime by clicking the \"?\" button in the header.',\n    simpleDescription:\n      'Welcome! This quick guide will show you how to play. You can come back to it anytime by clicking the \"?\" button at the top.',\n    target: null,\n  },\n  {\n    title: 'The War Board',\n    description:\n      'This is your war board. Each tile represents a territory from the War of 1812. The color of each tile shows which faction controls it: blue for the United States, red for the British, and brown for Native nations.',\n    simpleDescription:\n      'This is your game map. Each colored area is a territory. Blue means America controls it. Red means Britain controls it. Brown means Native nations control it.',\n    target: '[data-tutorial=\"map\"]',\n  },\n  {\n    title: 'Territory Tiles',\n    description:\n      'Click any territory to select it. Each tile shows the territory name, troop count (bottom-left badge), victory points (top-right star), and a fort icon if fortified. You can zoom in and out using the controls or your scroll wheel.',\n    simpleDescription:\n      'Click any territory to pick it. You can see the name, how many troops are there, and how many points it is worth. Use the zoom buttons or your scroll wheel to look closer.',\n    target: '[data-territory=\"detroit\"]',\n  },\n  {\n    title: 'Scoreboard',\n    description:\n      'Track scores for all three factions here. Your nationalism meter (US only) provides a score multiplier. The more territories you hold, the more points you earn each round.',\n    simpleDescription:\n      'This shows the score for all three sides. The more territories you hold, the more points you get each round.',\n    target: '[data-tutorial=\"scoreboard\"]',\n  },\n  {\n    title: 'Your Leaders',\n    description:\n      'Your faction leaders provide combat bonuses in specific theaters. Keep them alive -- if they fall in battle, you lose their benefits!',\n    simpleDescription:\n      'Your leaders help you fight better. Keep them alive! If they are defeated in battle, you lose their help.',\n    target: '[data-tutorial=\"leaders\"]',\n  },\n  {\n    title: 'Objectives',\n    description:\n      'Complete faction-specific objectives for bonus victory points at the end of the war. Check your progress here throughout the game.',\n    simpleDescription:\n      'These are your goals. Complete them to earn extra points at the end of the game. Check here to see how you are doing.',\n    target: '[data-tutorial=\"objectives\"]',\n  },\n  {\n    title: 'Game Phases',\n    description:\n      'Each round has 5 phases: Event (draw a historical event), Allocate (place reinforcements), Battle (attack enemies), Maneuver (reposition troops), and Score (end your turn). The gold dot shows your current phase.',\n    simpleDescription:\n      'Each round has 5 steps: Event (see what happens in history), Place Troops (add new troops), Battle (attack enemies), Move Troops (move your army around), and Score (finish your turn). The gold dot shows which step you are on.',\n    target: '[data-tutorial=\"phase-indicator\"]',\n  },\n  {\n    title: 'Battle Phase',\n    description:\n      'During battle, select one of your territories, then click an adjacent enemy territory to attack. Dice determine the outcome, with bonuses from forts and leaders. A knowledge check quiz may also appear!',\n    simpleDescription:\n      'To fight a battle, first click one of your territories. Then click an enemy territory next to it. Dice decide who wins. You might also get a quiz question!',\n    target: '[data-tutorial=\"advance-btn\"]',\n  },\n  {\n    title: 'History Quiz',\n    description:\n      'Test your knowledge of the War of 1812! Quiz questions appear during battle phases, and you can also take them voluntarily from the sidebar. Correct answers earn bonus troops or nationalism points.',\n    simpleDescription:\n      'Quiz questions about the War of 1812 will pop up during the game. Get them right to earn extra troops or bonus points!',\n    target: '[data-tutorial=\"knowledge-check\"]',\n  },\n  {\n    title: 'Ready for War!',\n    description:\n      'You are ready to lead your forces through 12 rounds of the War of 1812. Capture territories, complete objectives, and make history. Good luck, Commander!',\n    simpleDescription:\n      'You are ready to play! Lead your army through 12 rounds. Capture territories, finish your goals, and make history. Good luck!',\n    target: null,\n  },\n];\n\nconst STORAGE_KEY = 'war1812_tutorial_completed';\n\nexport default function useTutorial() {\n  const [tutorialActive, setTutorialActive] = useState(false);\n  const [currentStep, setCurrentStep] = useState(0);\n\n  const currentStepData = tutorialActive ? TUTORIAL_STEPS[currentStep] : null;\n  const totalSteps = TUTORIAL_STEPS.length;\n\n  const startTutorial = useCallback(() => {\n    setCurrentStep(0);\n    setTutorialActive(true);\n  }, []);\n\n  const nextStep = useCallback(() => {\n    if (currentStep < TUTORIAL_STEPS.length - 1) {\n      setCurrentStep((s) => s + 1);\n    } else {\n      setTutorialActive(false);\n      localStorage.setItem(STORAGE_KEY, 'true');\n    }\n  }, [currentStep]);\n\n  const prevStep = useCallback(() => {\n    if (currentStep > 0) {\n      setCurrentStep((s) => s - 1);\n    }\n  }, [currentStep]);\n\n  const skipTutorial = useCallback(() => {\n    setTutorialActive(false);\n    localStorage.setItem(STORAGE_KEY, 'true');\n  }, []);\n\n  const shouldAutoStart = useCallback(() => {\n    return !localStorage.getItem(STORAGE_KEY);\n  }, []);\n\n  return {\n    tutorialActive,\n    currentStep,\n    currentStepData,\n    totalSteps,\n    startTutorial,\n    nextStep,\n    prevStep,\n    skipTutorial,\n    shouldAutoStart,\n  };\n}\n","/**\n * War of 1812  Sound Engine\n *\n * All sounds synthesized via Web Audio API. No external audio files needed.\n * Produces period-appropriate fife & drum style music and battle sounds.\n */\n\nlet audioCtx = null;\nlet masterGain = null;\nlet musicGain = null;\nlet sfxGain = null;\nlet musicInterval = null;\nlet isMuted = false;\nlet musicPlaying = false;\n\nfunction getCtx() {\n  if (!audioCtx) {\n    audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n    masterGain = audioCtx.createGain();\n    masterGain.gain.value = 0.5;\n    masterGain.connect(audioCtx.destination);\n\n    musicGain = audioCtx.createGain();\n    musicGain.gain.value = 0.25;\n    musicGain.connect(masterGain);\n\n    sfxGain = audioCtx.createGain();\n    sfxGain.gain.value = 0.6;\n    sfxGain.connect(masterGain);\n  }\n  if (audioCtx.state === 'suspended') {\n    audioCtx.resume();\n  }\n  return audioCtx;\n}\n\n//  Utilities \n\nfunction playTone(freq, duration, type = 'square', gain = sfxGain, volume = 0.3) {\n  const ctx = getCtx();\n  if (isMuted) return;\n  const osc = ctx.createOscillator();\n  const g = ctx.createGain();\n  osc.type = type;\n  osc.frequency.value = freq;\n  g.gain.setValueAtTime(volume, ctx.currentTime);\n  g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + duration);\n  osc.connect(g);\n  g.connect(gain);\n  osc.start(ctx.currentTime);\n  osc.stop(ctx.currentTime + duration);\n}\n\nfunction playNoise(duration, volume = 0.3, gain = sfxGain) {\n  const ctx = getCtx();\n  if (isMuted) return;\n  const bufferSize = ctx.sampleRate * duration;\n  const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);\n  const data = buffer.getChannelData(0);\n  for (let i = 0; i < bufferSize; i++) {\n    data[i] = Math.random() * 2 - 1;\n  }\n  const source = ctx.createBufferSource();\n  source.buffer = buffer;\n  const g = ctx.createGain();\n  g.gain.setValueAtTime(volume, ctx.currentTime);\n  g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + duration);\n  const filter = ctx.createBiquadFilter();\n  filter.type = 'lowpass';\n  filter.frequency.value = 800;\n  source.connect(filter);\n  filter.connect(g);\n  g.connect(gain);\n  source.start(ctx.currentTime);\n}\n\n//  Sound Effects \n\nexport function playClick() {\n  playTone(800, 0.06, 'square', sfxGain, 0.15);\n}\n\nexport function playConfirm() {\n  getCtx();\n  if (isMuted) return;\n  playTone(523, 0.1, 'triangle', sfxGain, 0.2);\n  setTimeout(() => playTone(659, 0.1, 'triangle', sfxGain, 0.2), 80);\n  setTimeout(() => playTone(784, 0.15, 'triangle', sfxGain, 0.2), 160);\n}\n\nexport function playPhaseAdvance() {\n  playTone(392, 0.12, 'triangle', sfxGain, 0.2);\n  setTimeout(() => playTone(523, 0.15, 'triangle', sfxGain, 0.25), 100);\n}\n\nexport function playPlaceTroop() {\n  playTone(600, 0.08, 'square', sfxGain, 0.12);\n}\n\nexport function playCannon() {\n  playNoise(0.5, 0.4);\n  playTone(80, 0.4, 'sine', sfxGain, 0.3);\n}\n\nexport function playMusket() {\n  playNoise(0.15, 0.25);\n  playTone(200, 0.08, 'square', sfxGain, 0.1);\n}\n\nexport function playBattleStart() {\n  // Drum roll\n  getCtx();\n  if (isMuted) return;\n  for (let i = 0; i < 8; i++) {\n    setTimeout(() => playNoise(0.06, 0.15), i * 60);\n  }\n  setTimeout(() => playNoise(0.2, 0.25), 500);\n}\n\nexport function playVictory() {\n  // Rising fanfare\n  const notes = [523, 659, 784, 1047];\n  notes.forEach((freq, i) => {\n    setTimeout(() => playTone(freq, 0.25, 'triangle', sfxGain, 0.25), i * 150);\n  });\n}\n\nexport function playDefeat() {\n  // Descending sad tones\n  const notes = [392, 330, 262, 196];\n  notes.forEach((freq, i) => {\n    setTimeout(() => playTone(freq, 0.3, 'triangle', sfxGain, 0.2), i * 200);\n  });\n}\n\nexport function playEventCard() {\n  // Dramatic reveal\n  playTone(330, 0.15, 'triangle', sfxGain, 0.15);\n  setTimeout(() => playTone(440, 0.2, 'triangle', sfxGain, 0.2), 120);\n}\n\nexport function playQuizCorrect() {\n  playTone(523, 0.1, 'sine', sfxGain, 0.2);\n  setTimeout(() => playTone(784, 0.2, 'sine', sfxGain, 0.25), 100);\n}\n\nexport function playQuizWrong() {\n  playTone(200, 0.2, 'sawtooth', sfxGain, 0.1);\n  setTimeout(() => playTone(160, 0.3, 'sawtooth', sfxGain, 0.1), 150);\n}\n\n//  Background Music (Fife & Drum) \n\n// Simple melody: \"Yankee Doodle\"-inspired fife pattern in C major\nconst MELODY = [\n  523, 523, 587, 659, 523, 659, 587, 392,\n  523, 523, 587, 659, 523, 0, 494, 0,\n  523, 523, 587, 659, 698, 659, 587, 523,\n  494, 392, 440, 494, 523, 523, 0, 0,\n];\n\nconst DRUM_PATTERN = [\n  1, 0, 0, 1, 0, 1, 0, 0,\n  1, 0, 0, 1, 0, 0, 1, 0,\n  1, 0, 0, 1, 0, 1, 0, 0,\n  1, 0, 1, 0, 1, 0, 0, 0,\n];\n\nlet melodyIndex = 0;\n\nfunction playMusicNote() {\n  if (isMuted || !musicPlaying) return;\n  const ctx = getCtx();\n\n  // Fife note\n  const freq = MELODY[melodyIndex % MELODY.length];\n  if (freq > 0) {\n    const osc = ctx.createOscillator();\n    const g = ctx.createGain();\n    osc.type = 'square';\n    osc.frequency.value = freq;\n    g.gain.setValueAtTime(0.08, ctx.currentTime);\n    g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.18);\n    osc.connect(g);\n    g.connect(musicGain);\n    osc.start(ctx.currentTime);\n    osc.stop(ctx.currentTime + 0.2);\n  }\n\n  // Drum\n  const drumHit = DRUM_PATTERN[melodyIndex % DRUM_PATTERN.length];\n  if (drumHit) {\n    const bufferSize = ctx.sampleRate * 0.05;\n    const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);\n    const data = buffer.getChannelData(0);\n    for (let i = 0; i < bufferSize; i++) {\n      data[i] = Math.random() * 2 - 1;\n    }\n    const source = ctx.createBufferSource();\n    source.buffer = buffer;\n    const g = ctx.createGain();\n    g.gain.setValueAtTime(0.12, ctx.currentTime);\n    g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.08);\n    const filter = ctx.createBiquadFilter();\n    filter.type = 'lowpass';\n    filter.frequency.value = 300;\n    source.connect(filter);\n    filter.connect(g);\n    g.connect(musicGain);\n    source.start(ctx.currentTime);\n  }\n\n  melodyIndex++;\n}\n\nexport function startMusic() {\n  if (musicPlaying) return;\n  getCtx();\n  musicPlaying = true;\n  melodyIndex = 0;\n  musicInterval = setInterval(playMusicNote, 220); // ~136 BPM\n}\n\nexport function stopMusic() {\n  musicPlaying = false;\n  if (musicInterval) {\n    clearInterval(musicInterval);\n    musicInterval = null;\n  }\n}\n\nexport function toggleMusic() {\n  if (musicPlaying) {\n    stopMusic();\n  } else {\n    startMusic();\n  }\n  return musicPlaying;\n}\n\nexport function setMuted(muted) {\n  isMuted = muted;\n  if (muted) stopMusic();\n}\n\nexport function getMuted() {\n  return isMuted;\n}\n\nexport function isMusicPlaying() {\n  return musicPlaying;\n}\n\nexport function setMasterVolume(vol) {\n  if (masterGain) masterGain.gain.value = Math.max(0, Math.min(1, vol));\n}\n\n// Initialize audio context on first user interaction\nexport function initAudio() {\n  getCtx();\n}\n","import { useState, useCallback, useEffect } from 'react';\nimport {\n  initAudio,\n  playClick,\n  playConfirm,\n  playPhaseAdvance,\n  playPlaceTroop,\n  playCannon,\n  playBattleStart,\n  playVictory,\n  playDefeat,\n  playEventCard,\n  playQuizCorrect,\n  playQuizWrong,\n  startMusic,\n  stopMusic,\n  isMusicPlaying,\n  setMuted,\n  getMuted,\n} from '../lib/sounds';\n\nexport default function useSounds() {\n  const [muted, _setMuted] = useState(() => {\n    try { return localStorage.getItem('war1812_muted') === 'true'; } catch { return false; }\n  });\n  const [musicOn, setMusicOn] = useState(false);\n\n  // Apply mute state\n  useEffect(() => {\n    setMuted(muted);\n    try { localStorage.setItem('war1812_muted', String(muted)); } catch { /* */ }\n  }, [muted]);\n\n  const toggleMute = useCallback(() => {\n    _setMuted((prev) => {\n      const next = !prev;\n      if (next) stopMusic();\n      return next;\n    });\n    setMusicOn(false);\n  }, []);\n\n  const toggleMusic = useCallback(() => {\n    if (getMuted()) return;\n    if (isMusicPlaying()) {\n      stopMusic();\n      setMusicOn(false);\n    } else {\n      initAudio();\n      startMusic();\n      setMusicOn(true);\n    }\n  }, []);\n\n  // Sound trigger wrappers (no-op when muted)\n  const sfx = {\n    click: useCallback(() => { if (!getMuted()) { initAudio(); playClick(); } }, []),\n    confirm: useCallback(() => { if (!getMuted()) { initAudio(); playConfirm(); } }, []),\n    phaseAdvance: useCallback(() => { if (!getMuted()) { initAudio(); playPhaseAdvance(); } }, []),\n    placeTroop: useCallback(() => { if (!getMuted()) { initAudio(); playPlaceTroop(); } }, []),\n    cannon: useCallback(() => { if (!getMuted()) { initAudio(); playCannon(); } }, []),\n    battleStart: useCallback(() => { if (!getMuted()) { initAudio(); playBattleStart(); } }, []),\n    victory: useCallback(() => { if (!getMuted()) { initAudio(); playVictory(); } }, []),\n    defeat: useCallback(() => { if (!getMuted()) { initAudio(); playDefeat(); } }, []),\n    eventCard: useCallback(() => { if (!getMuted()) { initAudio(); playEventCard(); } }, []),\n    quizCorrect: useCallback(() => { if (!getMuted()) { initAudio(); playQuizCorrect(); } }, []),\n    quizWrong: useCallback(() => { if (!getMuted()) { initAudio(); playQuizWrong(); } }, []),\n  };\n\n  return {\n    muted,\n    musicOn,\n    toggleMute,\n    toggleMusic,\n    sfx,\n  };\n}\n","import { useState, useEffect, useCallback } from 'react';\n\nconst STORAGE_KEY = 'war1812_font_preference';\n\nexport default function useFontPreference() {\n  const [fontMode, setFontMode] = useState(() => {\n    try {\n      return localStorage.getItem(STORAGE_KEY) || 'default';\n    } catch {\n      return 'default';\n    }\n  });\n\n  useEffect(() => {\n    if (fontMode === 'dyslexic') {\n      document.documentElement.setAttribute('data-font', 'dyslexic');\n    } else {\n      document.documentElement.removeAttribute('data-font');\n    }\n    try {\n      localStorage.setItem(STORAGE_KEY, fontMode);\n    } catch {\n      // localStorage unavailable\n    }\n  }, [fontMode]);\n\n  const toggleFont = useCallback(() => {\n    setFontMode(prev => prev === 'dyslexic' ? 'default' : 'dyslexic');\n  }, []);\n\n  return { fontMode, toggleFont };\n}\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport FactionSelect from './components/FactionSelect';\nimport GameBoard from './components/GameBoard';\nimport TeacherDashboard from './components/TeacherDashboard';\nimport TeacherGuide from './components/TeacherGuide';\nimport LearningMode from './components/LearningMode';\nimport PeopleGallery from './components/PeopleGallery';\nimport NameEntry from './components/NameEntry';\nimport DifficultySelect from './components/DifficultySelect';\nimport ErrorBoundary from './components/ErrorBoundary';\nimport useGameState from './hooks/useGameStateV2'; // Migrated to reducer architecture!\nimport useTutorial from './hooks/useTutorial';\nimport useSounds from './hooks/useSounds';\nimport useFontPreference from './hooks/useFontPreference';\nimport { submitQuizGateResults } from './lib/supabase';\n\n// Fallback for non-HTTPS contexts where generateUUID() is unavailable\nfunction generateUUID() {\n  if (typeof crypto !== 'undefined' && crypto.randomUUID) return generateUUID();\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (Math.random() * 16) | 0;\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\nexport default function App() {\n  // If landing from a Supabase auth callback, treat as #teacher route immediately\n  const initialHash = window.location.hash;\n  const isAuthCallback = initialHash.startsWith('#access_token=');\n  const [route, setRoute] = useState(isAuthCallback ? '#teacher' : initialHash);\n  const [onboardingStep, setOnboardingStep] = useState('name');\n  const [onboardingData, setOnboardingData] = useState({\n    playerName: '',\n    classPeriod: '',\n    difficulty: 'medium',\n    gameMode: 'historian',\n    sessionId: generateUUID(),\n    classId: null,\n  });\n  const [showPeopleGallery, setShowPeopleGallery] = useState(false);\n  const game = useGameState();\n  const tutorial = useTutorial();\n  const sounds = useSounds();\n  const { fontMode, toggleFont } = useFontPreference();\n  const tutorialTriggered = useRef(false);\n\n  // Detect Supabase auth callback (magic link lands with #access_token=...)\n  // Clean up the URL hash after Supabase has parsed the token\n  useEffect(() => {\n    if (isAuthCallback) {\n      window.location.hash = '#teacher';\n    }\n  }, [isAuthCallback]);\n\n  // Hash-based routing\n  useEffect(() => {\n    const handleHash = () => setRoute(window.location.hash);\n    window.addEventListener('hashchange', handleHash);\n    return () => window.removeEventListener('hashchange', handleHash);\n  }, []);\n\n  // Auto-start tutorial after the first event card is dismissed\n  useEffect(() => {\n    if (\n      game.gameStarted &&\n      !tutorialTriggered.current &&\n      !game.showEventCard &&\n      !game.showBattleModal &&\n      !game.showKnowledgeCheck &&\n      tutorial.shouldAutoStart()\n    ) {\n      tutorialTriggered.current = true;\n      setTimeout(() => tutorial.startTutorial(), 300);\n    }\n  }, [game.gameStarted, game.showEventCard, game.showBattleModal, game.showKnowledgeCheck, tutorial]);\n\n  // Teacher-controlled skip via URL parameter\n  const skipLearning = new URLSearchParams(window.location.search).get('skip') === 'learning';\n  const classParam = new URLSearchParams(window.location.search).get('class') || '';\n\n  // Onboarding step handlers\n  const handleNameNext = useCallback(({ playerName, classPeriod, classId }) => {\n    setOnboardingData(prev => ({ ...prev, playerName, classPeriod, classId }));\n    setOnboardingStep('difficulty');\n  }, []);\n\n  const handleDifficultyNext = useCallback(({ difficulty, gameMode }) => {\n    setOnboardingData(prev => ({ ...prev, difficulty, gameMode }));\n    setOnboardingStep(skipLearning ? 'faction' : 'learning');\n  }, [skipLearning]);\n\n  const handleLearningComplete = useCallback((quizRetries) => {\n    setOnboardingData(prev => ({ ...prev, quizRetries }));\n    setOnboardingStep('faction');\n\n    if (quizRetries) {\n      const sessionId = onboardingData.sessionId;\n      const storageKey = `war1812_qg_submitted_${sessionId}`;\n      if (!localStorage.getItem(storageKey)) {\n        localStorage.setItem(storageKey, 'true');\n        submitQuizGateResults({\n          sessionId,\n          playerName: onboardingData.playerName,\n          classPeriod: onboardingData.classPeriod,\n          gameMode: onboardingData.gameMode,\n          retries: quizRetries,\n          classId: onboardingData.classId,\n        }).then(({ error }) => {\n          if (error) {\n            console.error('Quiz gate submit error:', error);\n            localStorage.removeItem(storageKey);\n          }\n        }).catch((err) => {\n          console.error('Quiz gate submit failed:', err);\n          localStorage.removeItem(storageKey);\n        });\n      }\n    }\n  }, [onboardingData]);\n\n  const handleFactionSelect = useCallback((faction) => {\n    game.startGame({\n      faction,\n      playerName: onboardingData.playerName,\n      classPeriod: onboardingData.classPeriod,\n      gameMode: onboardingData.gameMode,\n      difficulty: onboardingData.difficulty,\n      sessionId: onboardingData.sessionId,\n      classId: onboardingData.classId,\n    });\n  }, [game, onboardingData]);\n\n  const handlePlayAgain = useCallback(() => {\n    game.resetGame();\n    setOnboardingStep('name');\n    setOnboardingData({ playerName: '', classPeriod: '', difficulty: 'medium', gameMode: 'historian', sessionId: generateUUID(), classId: null });\n  }, [game]);\n\n  // Handler for error boundary recovery\n  const handleRestoreSave = () => {\n    game.loadGame();\n  };\n\n  const handleStartNewGame = () => {\n    game.deleteSave();\n    game.resetGame();\n    setOnboardingStep('name');\n    setOnboardingData({ playerName: '', classPeriod: '', difficulty: 'medium', gameMode: 'historian', sessionId: generateUUID(), classId: null });\n  };\n\n  if (route === '#teacher') {\n    return (\n      <ErrorBoundary\n        section=\"Teacher Dashboard\"\n        onRestoreSave={handleRestoreSave}\n        onStartNewGame={handleStartNewGame}\n      >\n        <TeacherDashboard />\n      </ErrorBoundary>\n    );\n  }\n\n  if (route === '#guide') {\n    return (\n      <ErrorBoundary\n        section=\"Teacher Guide\"\n        onRestoreSave={handleRestoreSave}\n        onStartNewGame={handleStartNewGame}\n      >\n        <TeacherGuide />\n      </ErrorBoundary>\n    );\n  }\n\n  // Show People Gallery\n  if (showPeopleGallery) {\n    return (\n      <ErrorBoundary\n        section=\"People Gallery\"\n        onRestoreSave={handleRestoreSave}\n        onStartNewGame={handleStartNewGame}\n      >\n        <PeopleGallery onClose={() => setShowPeopleGallery(false)} />\n      </ErrorBoundary>\n    );\n  }\n\n  // Onboarding flow (when game not started and not over)\n  if (!game.gameStarted && !game.gameOver) {\n    if (onboardingStep === 'name') {\n      return (\n        <ErrorBoundary section=\"Name Entry\" onRestoreSave={handleRestoreSave} onStartNewGame={handleStartNewGame}>\n          <NameEntry\n            onNext={handleNameNext}\n            classParam={classParam}\n            savedGame={game.hasSavedGame()}\n            onContinue={game.loadGame}\n            onDeleteSave={game.deleteSave}\n            onExportSave={game.exportSaveFile}\n            onImportSave={game.importSaveFile}\n            fontMode={fontMode}\n            toggleFont={toggleFont}\n          />\n        </ErrorBoundary>\n      );\n    }\n    if (onboardingStep === 'difficulty') {\n      return (\n        <ErrorBoundary section=\"Difficulty Select\" onRestoreSave={handleRestoreSave} onStartNewGame={handleStartNewGame}>\n          <DifficultySelect\n            onNext={handleDifficultyNext}\n            playerName={onboardingData.playerName}\n            fontMode={fontMode}\n            toggleFont={toggleFont}\n          />\n        </ErrorBoundary>\n      );\n    }\n    if (onboardingStep === 'learning') {\n      return (\n        <ErrorBoundary section=\"Learning Mode\" onRestoreSave={handleRestoreSave} onStartNewGame={handleStartNewGame}>\n          <LearningMode\n            onComplete={handleLearningComplete}\n            gameMode={onboardingData.gameMode}\n            playerName={onboardingData.playerName}\n            classPeriod={onboardingData.classPeriod}\n            sessionId={onboardingData.sessionId}\n            fontMode={fontMode}\n            toggleFont={toggleFont}\n          />\n        </ErrorBoundary>\n      );\n    }\n    if (onboardingStep === 'faction') {\n      return (\n        <ErrorBoundary section=\"Faction Select\" onRestoreSave={handleRestoreSave} onStartNewGame={handleStartNewGame}>\n          <FactionSelect\n            onSelect={handleFactionSelect}\n            onOpenPeopleGallery={() => setShowPeopleGallery(true)}\n            gameMode={onboardingData.gameMode}\n            fontMode={fontMode}\n            toggleFont={toggleFont}\n          />\n        </ErrorBoundary>\n      );\n    }\n  }\n\n  return (\n    <ErrorBoundary\n      section=\"Game Board\"\n      onRestoreSave={handleRestoreSave}\n      onStartNewGame={handleStartNewGame}\n    >\n      <GameBoard\n      sessionId={game.sessionId}\n      classId={game.classId}\n      gameMode={game.gameMode}\n      round={game.round}\n      totalRounds={game.totalRounds}\n      currentPhase={game.currentPhase}\n      currentPhaseLabel={game.currentPhaseLabel}\n      seasonYear={game.seasonYear}\n      territoryOwners={game.territoryOwners}\n      troops={game.troops}\n      selectedTerritory={game.selectedTerritory}\n      scores={game.scores}\n      nationalismMeter={game.nationalismMeter}\n      nativeResistance={game.nativeResistance}\n      navalDominance={game.navalDominance}\n      factionMultiplier={game.factionMultiplier}\n      reinforcementsRemaining={game.reinforcementsRemaining}\n      playerFaction={game.playerFaction}\n      playerName={game.playerName}\n      classPeriod={game.classPeriod}\n      playerTerritoryCount={game.playerTerritoryCount}\n      message={game.message}\n      battleResult={game.battleResult}\n      showBattleModal={game.showBattleModal}\n      showIntro={game.showIntro}\n      currentEvent={game.currentEvent}\n      showEventCard={game.showEventCard}\n      gameOver={game.gameOver}\n      gameOverReason={game.gameOverReason}\n      gameOverWinner={game.gameOverWinner}\n      finalScore={game.finalScore}\n      difficulty={game.difficulty}\n      objectiveBonus={game.objectiveBonus}\n      leaderStates={game.leaderStates}\n      aiLog={game.aiLog}\n      aiActions={game.aiActions}\n      showAIReplay={game.showAIReplay}\n      playerObjectives={game.playerObjectives}\n      currentKnowledgeCheck={game.currentKnowledgeCheck}\n      showKnowledgeCheck={game.showKnowledgeCheck}\n      knowledgeCheckResults={game.knowledgeCheckResults}\n      knowledgeCheckHistory={game.knowledgeCheckHistory}\n      journalEntries={game.journalEntries}\n      battleStats={game.battleStats}\n      maneuversRemaining={game.maneuversRemaining}\n      onTerritoryClick={game.handleTerritoryClick}\n      onAdvancePhase={game.advancePhase}\n      onDismissIntro={game.dismissIntro}\n      onDismissEvent={game.dismissEvent}\n      onDismissBattle={game.dismissBattle}\n      onAnswerKnowledgeCheck={game.answerKnowledgeCheck}\n      onRequestKnowledgeCheck={game.requestKnowledgeCheck}\n      onSaveGame={game.saveGame}\n      onDeleteSave={game.deleteSave}\n      pendingAdvance={game.pendingAdvance}\n      pendingAdvanceMessage={game.pendingAdvanceMessage}\n      onConfirmAdvance={game.confirmAdvance}\n      onCancelAdvance={game.cancelAdvance}\n      onGoBack={game.goBackPhase}\n      canGoBack={game.phaseHistory.length > 0 && game.currentPhase !== 'event'}\n      pendingAction={game.pendingAction}\n      actionHistory={game.actionHistory}\n      onConfirmPlaceTroop={game.confirmPlaceTroop}\n      onConfirmManeuver={game.confirmManeuver}\n      onCancelAction={game.cancelAction}\n      onUndoLastAction={game.undoLastAction}\n      tutorialActive={tutorial.tutorialActive}\n      tutorialStepData={tutorial.currentStepData}\n      tutorialCurrentStep={tutorial.currentStep}\n      tutorialTotalSteps={tutorial.totalSteps}\n      onTutorialNext={tutorial.nextStep}\n      onTutorialPrev={tutorial.prevStep}\n      onTutorialSkip={tutorial.skipTutorial}\n      onStartTutorial={tutorial.startTutorial}\n      onCloseAIReplay={game.closeAIReplay}\n      onPlayAgain={handlePlayAgain}\n      sounds={sounds}\n      fontMode={fontMode}\n      toggleFont={toggleFont}\n    />\n    </ErrorBoundary>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"names":["extend","dest","i","j","len","src","arguments","length","create$2","Object","create","F","proto","prototype","bind","fn","obj","slice","Array","apply","call","args","concat","lastId","stamp","_leaflet_id","throttle","time","context","lock","wrapperFn","later","setTimeout","wrapNum","x","range","includeMax","max","min","d","falseFn","formatNum","num","precision","pow","Math","undefined","round","trim","str","replace","splitWords","split","setOptions","options","hasOwnProperty","getParamString","existingUrl","uppercase","params","push","encodeURIComponent","toUpperCase","indexOf","join","templateRe","template","data","key","value","Error","isArray","toString","array","el","emptyImageUrl","getPrefixed","name","window","lastTime","timeoutDefer","Date","timeToCall","requestFn","requestAnimationFrame","cancelFn","cancelAnimationFrame","id","clearTimeout","requestAnimFrame","immediate","cancelAnimFrame","Class","checkDeprecatedMixinEvents","includes","L","Mixin","Events","console","warn","stack","props","NewClass","this","initialize","callInitHooks","parentProto","__super__","constructor","statics","_initHooks","_initHooksCalled","include","parentOptions","mergeOptions","addInitHook","init","on","types","type","_on","off","_off","removeAll","_events","_once","_listens","newListener","ctx","once","listeners","index","listener","_firingCount","splice","fire","propagate","listens","event","target","sourceTarget","l","_propagateEvent","_fn","_eventParents","addEventParent","removeEventParent","e","layer","propagatedFrom","addEventListener","removeEventListener","clearAllEventListeners","addOneTimeEventListener","fireEvent","hasEventListeners","Evented","Point","y","trunc","v","floor","ceil","toPoint","Bounds","a","b","points","toBounds","LatLngBounds","corner1","corner2","latlngs","toLatLngBounds","LatLng","lat","lng","alt","isNaN","toLatLng","c","lon","clone","add","point","_add","subtract","_subtract","divideBy","_divideBy","multiplyBy","_multiplyBy","scaleBy","unscaleBy","_round","_floor","_ceil","_trunc","distanceTo","sqrt","equals","contains","abs","min2","max2","getCenter","getBottomLeft","getTopRight","getTopLeft","getBottomRight","getSize","intersects","bounds","xIntersects","yIntersects","overlaps","xOverlaps","yOverlaps","isValid","pad","bufferRatio","heightBuffer","widthBuffer","sw2","ne2","sw","_southWest","ne","_northEast","getSouthWest","getNorthEast","getNorthWest","getNorth","getWest","getSouthEast","getSouth","getEast","latIntersects","lngIntersects","latOverlaps","lngOverlaps","toBBoxString","maxMargin","other","Earth","distance","wrap","wrapLatLng","sizeInMeters","latAccuracy","lngAccuracy","cos","PI","CRS","latLngToPoint","latlng","zoom","projectedPoint","projection","project","scale","transformation","_transform","pointToLatLng","untransformedPoint","untransform","unproject","log","LN2","getProjectedBounds","infinite","s","transform","wrapLng","wrapLat","wrapLatLngBounds","center","newCenter","latShift","lngShift","R","latlng1","latlng2","rad","lat1","lat2","sinDLat","sin","sinDLon","atan2","earthRadius","SphericalMercator","MAX_LATITUDE","atan","exp","Transformation","_a","_b","_c","_d","toTransformation","EPSG3857","code","EPSG900913","svgCreate","document","createElementNS","pointsToPath","rings","closed","len2","p","Browser","svg","style","documentElement","ie","ielt9","edge","navigator","webkit","userAgentContains","android","android23","webkitVer","parseInt","exec","userAgent","androidStock","opera","chrome","gecko","safari","phantom","opera12","win","platform","ie3d","webkit3d","WebKitCSSMatrix","gecko3d","any3d","L_DISABLE_3D","mobile","orientation","mobileWebkit","mobileWebkit3d","msPointer","PointerEvent","MSPointerEvent","pointer","touchNative","TouchEvent","touch","L_NO_TOUCH","mobileOpera","mobileGecko","retina","devicePixelRatio","screen","deviceXDPI","logicalXDPI","passiveEvents","supportsPassiveOption","opts","defineProperty","get","canvas$1","createElement","getContext","svg$1","createSVGRect","inlineSvg","div","innerHTML","firstChild","namespaceURI","vml","shape","behavior","adj","mac","linux","toLowerCase","canvas","POINTER_DOWN","POINTER_MOVE","POINTER_UP","POINTER_CANCEL","pEvent","touchstart","touchmove","touchend","touchcancel","handle","_onPointerStart","_handlePointer","_pointers","_pointerDocListener","addPointerListener","handler","_addPointerDocListener","removePointerListener","_globalPointerDown","pointerId","_globalPointerMove","_globalPointerUp","pointerType","MSPOINTER_TYPE_MOUSE","touches","changedTouches","MSPOINTER_TYPE_TOUCH","preventDefault","makeDblclick","prop","newEvent","detail","isTrusted","_simulated","delay","addDoubleTapListener","last","simDblclick","sourceCapabilities","firesTouchEvents","path","getPropagationPath","some","HTMLLabelElement","attributes","for","HTMLInputElement","HTMLSelectElement","now","dblclick","removeDoubleTapListener","handlers","disableTextSelection","enableTextSelection","_userSelect","_outlineElement","_outlineStyle","TRANSFORM","testProp","TRANSITION","TRANSITION_END","getElementById","getStyle","currentStyle","defaultView","css","getComputedStyle","create$1","tagName","className","container","appendChild","remove","parent","parentNode","removeChild","empty","toFront","lastChild","toBack","insertBefore","hasClass","classList","getClass","RegExp","test","addClass","classes","setClass","removeClass","baseVal","correspondingElement","setOpacity","opacity","_setOpacityIE","filter","filterName","filters","item","Enabled","Opacity","setTransform","offset","pos","setPosition","_leaflet_pos","left","top","getPosition","userSelectProperty","disableImageDrag","enableImageDrag","preventOutline","element","tabIndex","restoreOutline","outlineStyle","getSizedParentNode","offsetWidth","offsetHeight","body","getScale","rect","getBoundingClientRect","width","height","boundingClientRect","addOne","eventsKey","batchRemove","removeOne","filterFn","mouseSubst","mouseenter","mouseleave","wheel","originalHandler","passive","isExternalTarget","attachEvent","detachEvent","stopPropagation","originalEvent","_stopped","cancelBubble","disableScrollPropagation","disableClickPropagation","returnValue","stop","ev","composedPath","getMousePosition","clientX","clientY","clientLeft","clientTop","wheelPxFactor","getWheelDelta","wheelDeltaY","deltaY","deltaMode","deltaX","deltaZ","wheelDelta","related","relatedTarget","err","PosAnimation","run","newPos","duration","easeLinearity","_el","_inProgress","_duration","_easeOutPower","_startPos","_offset","_startTime","_animate","_step","_complete","_animId","elapsed","_runFrame","_easeOut","progress","t","Map","crs","minZoom","maxZoom","layers","maxBounds","renderer","zoomAnimation","zoomAnimationThreshold","fadeAnimation","markerZoomAnimation","transform3DLimit","zoomSnap","zoomDelta","trackResize","_handlers","_layers","_zoomBoundLayers","_sizeChanged","_initContainer","_initLayout","_onResize","_initEvents","setMaxBounds","_zoom","_limitZoom","setView","reset","_zoomAnimated","_createAnimProxy","_proxy","_catchTransitionEnd","_addLayers","_limitCenter","_stop","_loaded","animate","pan","_tryAnimatedZoom","_tryAnimatedPan","_sizeTimer","_resetView","noMoveStart","setZoom","zoomIn","delta","zoomOut","setZoomAround","getZoomScale","viewHalf","centerOffset","latLngToContainerPoint","containerPointToLatLng","_getBoundsCenterZoom","getBounds","paddingTL","paddingTopLeft","padding","paddingBR","paddingBottomRight","getBoundsZoom","Infinity","paddingOffset","swPoint","nePoint","fitBounds","fitWorld","panTo","panBy","getZoom","_panAnim","_onPanTransitionStep","_onPanTransitionEnd","_mapPane","_getMapPanePos","_rawPanBy","flyTo","targetCenter","targetZoom","from","to","size","startZoom","w0","w1","u1","rho","rho2","r","sq","sinh","n","cosh","tanh","r0","w","u","easeOut","start","S","frame","_flyToFrame","_move","getScaleZoom","_moveEnd","_moveStart","flyToBounds","_panInsideMaxBounds","setMinZoom","oldZoom","setMaxZoom","panInsideBounds","_enforcingBounds","panInside","pixelCenter","pixelPoint","pixelBounds","getPixelBounds","paddedBounds","paddedSize","invalidateSize","oldSize","_lastCenter","newSize","oldCenter","debounceMoveend","locate","_locateOptions","timeout","watch","_handleGeolocationError","message","onResponse","_handleGeolocationResponse","onError","_locationWatchId","geolocation","watchPosition","getCurrentPosition","stopLocate","clearWatch","error","_container","coords","latitude","longitude","accuracy","timestamp","addHandler","HandlerClass","enable","_containerId","_clearControlPos","_resizeRequest","_clearHandlers","_panes","_renderer","createPane","pane","_checkIfLoaded","_moved","layerPointToLatLng","_getCenterLayerPoint","getMinZoom","_layersMinZoom","getMaxZoom","_layersMaxZoom","inside","nw","se","boundsSize","snap","scalex","scaley","_size","clientWidth","clientHeight","topLeftPoint","_getTopLeftPoint","getPixelOrigin","_pixelOrigin","getPixelWorldBounds","getPane","getPanes","getContainer","toZoom","fromZoom","latLngToLayerPoint","containerPointToLayerPoint","layerPointToContainerPoint","layerPoint","mouseEventToContainerPoint","mouseEventToLayerPoint","mouseEventToLatLng","_onScroll","_fadeAnimated","position","_initPanes","_initControlPos","panes","_paneRenderers","markerPane","shadowPane","loading","zoomChanged","supressEvent","_getNewPixelOrigin","pinch","_getZoomSpan","_targets","onOff","_handleDOMEvent","_onMoveEnd","scrollTop","scrollLeft","_findEventTargets","targets","isHover","srcElement","dragging","_draggableMoved","_isClickDisabled","_fireDOMEvent","_mouseEvents","canvasTargets","synth","filtered","isMarker","getLatLng","_radius","containerPoint","bubblingMouseEvents","enabled","moved","boxZoom","disable","whenReady","callback","_latLngToNewLayerPoint","topLeft","_latLngBoundsToNewLayerBounds","latLngBounds","_getCenterOffset","centerPoint","viewBounds","_getBoundsOffset","_limitOffset","newBounds","pxBounds","projectedMaxBounds","minOffset","maxOffset","_rebound","right","proxy","mapPane","_animatingZoom","_onZoomTransitionEnd","_animMoveEnd","_destroyAnimProxy","z","propertyName","_nothingToAnimate","getElementsByClassName","_animateZoom","startAnim","noUpdate","_animateToCenter","_animateToZoom","_tempFireZoomEvent","createMap","Control","map","_map","removeControl","addControl","addTo","onAdd","corner","_controlCorners","onRemove","_refocusOnMap","screenX","screenY","focus","control","corners","_controlContainer","createCorner","vSide","hSide","Layers","collapsed","autoZIndex","hideSingleBase","sortLayers","sortFunction","layerA","layerB","nameA","nameB","baseLayers","overlays","_layerControlInputs","_lastZIndex","_handlingClick","_preventClick","_addLayer","_update","_checkDisabledLayers","_onLayerChange","_expandIfNotCollapsed","addBaseLayer","addOverlay","removeLayer","_getLayer","expand","_section","acceptableHeight","offsetTop","collapse","setAttribute","section","_expandSafely","link","_layersLink","href","title","keydown","keyCode","click","_baseLayersList","_separator","_overlaysList","overlay","sort","setZIndex","baseLayersPresent","overlaysPresent","baseLayersCount","_addItem","display","_createRadioElement","checked","radioHtml","radioFragment","input","label","hasLayer","defaultChecked","layerId","_onInputClick","holder","inputs","addedLayers","removedLayers","addLayer","disabled","that","Zoom","zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","zoomName","_zoomInButton","_createButton","_zoomIn","_zoomOutButton","_zoomOut","_updateDisabled","_disabled","shiftKey","html","zoomControl","Scale","maxWidth","metric","imperial","_addScales","updateWhenIdle","_mScale","_iScale","maxMeters","_updateScales","_updateMetric","_updateImperial","meters","_getRoundNum","_updateScale","maxMiles","miles","feet","maxFeet","text","ratio","pow10","ukrainianFlag","Attribution","prefix","_attributions","attributionControl","getAttribution","addAttribution","_addAttribution","removeAttribution","setPrefix","attribs","prefixAndAttribs","attribution","Handler","_enabled","addHooks","removeHooks","START","Draggable","clickTolerance","dragStartTarget","_element","_dragStartTarget","_preventOutline","_onDown","_dragging","finishDrag","which","button","_moving","first","sizedParent","_startPoint","_parentScale","mouseevent","_onMove","_onUp","_lastTarget","SVGElementInstance","correspondingUseElement","_newPos","_lastEvent","_updatePosition","noInertia","fireDragend","clipPolygon","clippedPoints","k","edges","_code","_getBitCode","_getEdgeIntersection","polygonCenter","p1","p2","f","area","isFlat","centroidLatLng","centroid","latlngCenter","latSum","lngSum","_lastCode","simplify","tolerance","sqTolerance","_simplifyDP","_reducePoints","pointToSegmentDistance","_sqClosestPointOnSegment","closestPointOnSegment","markers","Uint8Array","_simplifyDPStep","newPoints","sqDist","maxSqDist","reducedPoints","prev","_sqDist","clipSegment","useLastCode","codeOut","newCode","codeA","codeB","dx","dy","dot","_flat","polylineCenter","halfDist","segDist","dist","LonLat","Mercator","R_MINOR","tmp","con","ts","tan","phi","dphi","EPSG3395","EPSG4326","Simple","Layer","removeFrom","_mapToAdd","addInteractiveTarget","targetEl","removeInteractiveTarget","_layerAdd","getEvents","events","beforeAdd","eachLayer","method","_addZoomLimit","_updateZoomLevels","_removeZoomLimit","oldZoomSpan","LayerGroup","getLayerId","clearLayers","invoke","methodName","getLayer","getLayers","zIndex","layerGroup","FeatureGroup","setStyle","bringToFront","bringToBack","featureGroup","Icon","popupAnchor","tooltipAnchor","crossOrigin","createIcon","oldIcon","_createIcon","createShadow","_getIconUrl","img","_createImg","_setIconStyles","sizeOption","anchor","shadowAnchor","iconAnchor","marginLeft","marginTop","icon","IconDefault","iconUrl","iconRetinaUrl","shadowUrl","iconSize","shadowSize","imagePath","_detectIconPath","_stripUrl","strip","re","idx","match","querySelector","substring","MarkerDrag","marker","_marker","_icon","_draggable","dragstart","_onDragStart","predrag","_onPreDrag","drag","_onDrag","dragend","_onDragEnd","_adjustPan","speed","autoPanSpeed","autoPanPadding","iconPos","origin","panBounds","movement","_panRequest","_oldLatLng","closePopup","autoPan","shadow","_shadow","_latlng","oldLatLng","Marker","interactive","keyboard","zIndexOffset","riseOnHover","riseOffset","autoPanOnFocus","draggable","_initIcon","update","_removeIcon","_removeShadow","viewreset","setLatLng","setZIndexOffset","getIcon","setIcon","_popup","bindPopup","getElement","_setPos","classToAdd","addIcon","mouseover","_bringToFront","mouseout","_resetZIndex","_panOnFocus","newShadow","addShadow","_updateOpacity","_initInteraction","_zIndex","_updateZIndex","opt","iconOpts","_getPopupAnchor","_getTooltipAnchor","Path","stroke","color","weight","lineCap","lineJoin","dashArray","dashOffset","fill","fillColor","fillOpacity","fillRule","getRenderer","_initPath","_reset","_addPath","_removePath","redraw","_updatePath","_updateStyle","_updateBounds","_bringToBack","_path","_project","_clickTolerance","CircleMarker","radius","setRadius","getRadius","_point","r2","_radiusY","_pxBounds","_updateCircle","_empty","_bounds","_containsPoint","circleMarker","Circle","legacyOptions","_mRadius","half","latR","bottom","lngR","acos","circle","Polyline","smoothFactor","noClip","_setLatLngs","getLatLngs","_latlngs","setLatLngs","isEmpty","closestLayerPoint","minDistance","minPoint","closest","jLen","_parts","_defaultShape","addLatLng","_convertLatLngs","result","flat","_rings","_projectLatlngs","_rawPxBounds","projectedBounds","ring","_clipPoints","segment","parts","_simplifyPoints","_updatePoly","part","polyline","Polygon","pop","clipped","polygon","GeoJSON","geojson","addData","feature","features","geometries","geometry","coordinates","geometryToLayer","asFeature","defaultOptions","resetStyle","onEachFeature","_setLayerStyle","pointToLayer","_coordsToLatLng","coordsToLatLng","_pointToLayer","coordsToLatLngs","geoLayer","properties","featureLayer","pointToLayerFn","markersInheritOptions","levelsDeep","latLngToCoords","latLngsToCoords","getFeature","newGeometry","PointToGeoJSON","toGeoJSON","geoJSON","multi","holes","toMultiPoint","isGeometryCollection","jsons","json","geoJson","ImageOverlay","errorOverlayUrl","url","_url","_image","_initImage","styleOpts","setUrl","setBounds","zoomanim","wasElementSupplied","onselectstart","onmousemove","onload","onerror","_overlayOnError","image","errorUrl","imageOverlay","VideoOverlay","autoplay","loop","keepAspectRatio","muted","playsInline","vid","onloadeddata","sourceElements","getElementsByTagName","sources","source","videoOverlay","video","SVGOverlay","svgOverlay","DivOverlay","content","_source","_content","openOn","close","toggle","_prepareOpen","_removeTimeout","getContent","setContent","visibility","_updateContent","_updateLayout","isOpen","node","_contentNode","hasChildNodes","_getAnchor","_containerBottom","_containerLeft","_containerWidth","_initOverlay","OverlayClass","old","Popup","minWidth","maxHeight","autoPanPaddingTopLeft","autoPanPaddingBottomRight","keepInView","closeButton","autoClose","closeOnEscapeKey","popup","closeOnClick","closePopupOnClick","preclick","moveend","wrapper","_wrapper","_tipContainer","_tip","_closeButton","whiteSpace","scrolledClass","_autopanning","marginBottom","containerHeight","containerWidth","layerPos","containerPos","openPopup","_popupHandlersAdded","_openPopup","keypress","_onKeyPress","move","_movePopup","unbindPopup","togglePopup","isPopupOpen","setPopupContent","getPopup","Tooltip","direction","permanent","sticky","tooltip","_setPosition","subX","subY","tooltipPoint","tooltipWidth","tooltipHeight","openTooltip","closeTooltip","bindTooltip","_tooltip","isTooltipOpen","unbindTooltip","_initTooltipInteractions","_tooltipHandlersAdded","_moveTooltip","_openTooltip","_addFocusListeners","mousemove","_setAriaDescribedByOnLayer","toggleTooltip","setTooltipContent","getTooltip","_addFocusListenersOnLayer","moving","_openOnceFlag","DivIcon","bgPos","Element","backgroundPosition","divIcon","Default","GridLayer","tileSize","updateWhenZooming","updateInterval","maxNativeZoom","minNativeZoom","noWrap","keepBuffer","_levels","_tiles","_removeAllTiles","_tileZoom","_setAutoZIndex","isLoading","_loading","tileZoom","_clampZoom","_updateLevels","viewprereset","_invalidateAll","createTile","getTileSize","compare","children","edgeZIndex","isFinite","nextFrame","willPrune","tile","current","loaded","fade","active","_onOpaqueTile","_noPrune","_pruneTiles","_fadeFrame","Number","_onUpdateLevel","_removeTilesAtZoom","_onRemoveLevel","level","_setZoomTransform","_onCreateLevel","_level","retain","_retainParent","_retainChildren","_removeTile","x2","y2","z2","coords2","_tileCoordsToKey","animating","_setView","noPrune","tileZoomChanged","_abortLoading","_resetGrid","_setZoomTransforms","translate","_tileSize","_globalTileRange","_pxBoundsToTileRange","_wrapX","_wrapY","_getTiledPixelBounds","mapZoom","halfSize","tileRange","tileCenter","queue","margin","noPruneRange","_isValidTile","fragment","createDocumentFragment","_addTile","tileBounds","_tileCoordsToBounds","_keyToBounds","_keyToTileCoords","_tileCoordsToNwSe","nwPoint","sePoint","bp","_initTile","tilePos","_getTilePos","_wrapCoords","_tileReady","_noTilesToLoad","newCoords","gridLayer","TileLayer","subdomains","errorTileUrl","zoomOffset","tms","zoomReverse","detectRetina","referrerPolicy","_onTileRemove","noRedraw","done","_tileOnLoad","_tileOnError","getTileUrl","_getSubdomain","_getZoomForUrl","invertedY","getAttribute","tilePoint","complete","tileLayer","TileLayerWMS","defaultWmsParams","service","request","styles","format","transparent","version","wmsParams","realRetina","_crs","_wmsVersion","parseFloat","projectionKey","bbox","setParams","tileLayerWMS","WMS","wms","Renderer","_updatePaths","_destroyContainer","_onZoom","zoomend","_onZoomEnd","_onAnimZoom","_updateTransform","currentCenterPoint","_center","topLeftOffset","Canvas","_onViewPreReset","_postponeUpdatePaths","_draw","_onMouseMove","_onClick","_handleMouseOut","_ctx","_redrawRequest","_redrawBounds","_redraw","m","_updateDashArray","order","_order","_drawLast","next","_drawFirst","_requestRedraw","_extendRedrawBounds","dashValue","_dashArray","_clear","clearRect","save","restore","beginPath","clip","_drawing","closePath","_fillStroke","arc","globalAlpha","fillStyle","setLineDash","lineWidth","strokeStyle","clickedLayer","_fireEvent","_handleMouseHover","_hoveredLayer","_mouseHoverThrottled","candidateHoveredLayer","vmlCreate","namespaces","vmlMixin","coordsize","_stroke","_fill","stroked","filled","dashStyle","endcap","joinstyle","_setPath","SVG","_rootGroup","_svgSize","removeAttribute","_getPaneRenderer","_createRenderer","preferCanvas","Rectangle","_boundsToLatLngs","rectangle","BoxZoom","_pane","overlayPane","_resetStateTimeout","_destroy","_onMouseDown","_resetState","_clearDeferredResetState","contextmenu","mouseup","_onMouseUp","_onKeyDown","_box","_finish","boxZoomBounds","doubleClickZoom","DoubleClickZoom","_onDoubleClick","inertia","inertiaDeceleration","inertiaMaxSpeed","worldCopyJump","maxBoundsViscosity","Drag","_onPreDragLimit","_onPreDragWrap","_positions","_times","_offsetLimit","_viscosity","_lastTime","_lastPos","_absPos","_prunePositions","shift","pxCenter","pxWorldCenter","_initialWorldOffset","_worldWidth","_viscousLimit","threshold","limit","worldWidth","halfWidth","newX1","newX2","newX","ease","speedVector","limitedSpeed","limitedSpeedVector","decelerationDuration","keyboardPanDelta","Keyboard","keyCodes","down","up","_setPanDelta","_setZoomDelta","_onFocus","blur","_onBlur","mousedown","_addHooks","_removeHooks","_focused","docEl","scrollTo","panDelta","keys","_panKeys","codes","_zoomKeys","altKey","ctrlKey","metaKey","newLatLng","scrollWheelZoom","wheelDebounceTime","wheelPxPerZoomLevel","ScrollWheelZoom","_onWheelScroll","_delta","debounce","_lastMousePos","_timer","_performZoom","d2","d3","d4","tapHoldDelay","tapHold","tapTolerance","TapHold","_holdTimeout","_cancel","_isTapValid","_cancelClickPrevent","_simulateEvent","cancelClickPrevent","simulatedEvent","MouseEvent","bubbles","cancelable","view","dispatchEvent","touchZoom","bounceAtZoomLimits","TouchZoom","_onTouchStart","_zooming","_centerPoint","_startLatLng","_pinchStartLatLng","_startDist","_startZoom","_onTouchMove","_onTouchEnd","_animRequest","moveFn","Scheduler","require","React","ReactDOM","formatProdErrorMessage","isValidContainer","nodeType","getNearestMountedFiber","fiber","nearestMounted","alternate","return","flags","tag","getSuspenseInstanceFromFiber","suspenseState","memoizedState","dehydrated","getActivityInstanceFromFiber","activityState","assertIsMounted","findCurrentHostFiberImpl","child","sibling","assign","REACT_LEGACY_ELEMENT_TYPE","Symbol","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_CONSUMER_TYPE","REACT_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_ACTIVITY_TYPE","REACT_MEMO_CACHE_SENTINEL","MAYBE_ITERATOR_SYMBOL","iterator","getIteratorFn","maybeIterable","REACT_CLIENT_REFERENCE","getComponentNameFromType","$$typeof","displayName","_context","innerType","render","_payload","_init","isArrayImpl","ReactSharedInternals","__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE","ReactDOMSharedInternals","__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE","sharedNotPendingObject","pending","action","valueStack","createCursor","defaultValue","cursor","suffix","contextStackCursor","contextFiberStackCursor","rootInstanceStackCursor","hostTransitionProviderCursor","pushHostContainer","nextRootInstance","getOwnHostContext","getChildHostContextProd","popHostContainer","pushHostContext","JSCompiler_inline_result","popHostContext","HostTransitionContext","_currentValue","describeBuiltInComponentFrame","reentry","describeNativeComponentFrame","construct","previousPrepareStackTrace","prepareStackTrace","RunInRootFrame","DetermineComponentFrameRoot","Fake","set","Reflect","x$1","x$2","catch","sample","namePropDescriptor","getOwnPropertyDescriptor","configurable","_RunInRootFrame$Deter","sampleStack","controlStack","sampleLines","controlLines","describeFiber","childFiber","getStackByFiberInDevAndProd","workInProgress","info","previous","scheduleCallback$3","unstable_scheduleCallback","cancelCallback$1","unstable_cancelCallback","shouldYield","unstable_shouldYield","requestPaint","unstable_requestPaint","unstable_now","getCurrentPriorityLevel","unstable_getCurrentPriorityLevel","ImmediatePriority","unstable_ImmediatePriority","UserBlockingPriority","unstable_UserBlockingPriority","NormalPriority$1","unstable_NormalPriority","LowPriority","unstable_LowPriority","IdlePriority","unstable_IdlePriority","log$1","unstable_setDisableYieldValue","rendererID","injectedHook","setIsStrictModeForDevtools","newIsStrictMode","setStrictMode","clz32","nextTransitionUpdateLane","nextTransitionDeferredLane","nextRetryLane","getHighestPriorityLanes","lanes","pendingSyncLanes","getNextLanes","root","wipLanes","rootHasPendingCommit","pendingLanes","nextLanes","suspendedLanes","pingedLanes","warmLanes","nonIdlePendingLanes","checkIfRootIsPrerendering","renderLanes","computeExpirationTime","lane","currentTime","claimNextRetryLane","createLaneMap","initial","laneMap","markRootUpdated$1","updateLane","markSpawnedDeferredLane","spawnedLane","entangledLanes","spawnedLaneIndex","entanglements","markRootEntangled","rootEntangledLanes","index$8","getBumpedLaneForHydration","renderLane","getBumpedLaneForHydrationByLane","lanesToEventPriority","resolveUpdatePriority","updatePriority","getEventPriority","runWithPriority","priority","previousPriority","randomKey","random","internalInstanceKey","internalPropsKey","internalContainerInstanceKey","internalEventHandlersKey","internalEventHandlerListenersKey","internalEventHandlesSetKey","internalRootNodeResourcesKey","internalHoistableMarker","detachDeletedInstance","getClosestInstanceFromNode","targetNode","targetInst","getParentHydrationBoundary","getInstanceFromNode","getNodeFromInstance","inst","stateNode","getResourcesFromRoot","resources","hoistableStyles","hoistableScripts","markNodeAsHoistable","allNativeEvents","Set","registrationNameDependencies","registerTwoPhaseEvent","registrationName","dependencies","registerDirectEvent","VALID_ATTRIBUTE_NAME_REGEX","illegalAttributeNameCache","validatedAttributeNameCache","setValueForAttribute","attributeName","prefix$10","setValueForKnownAttribute","setValueForNamespacedAttribute","namespace","setAttributeNS","getToStringValue","isCheckable","elem","nodeName","track","_valueTracker","valueField","currentValue","descriptor","enumerable","getValue","setValue","stopTracking","trackValueOnNode","updateValueIfChanged","tracker","lastValue","getActiveElement","doc","activeElement","escapeSelectorAttributeValueInsideDoubleQuotesRegex","escapeSelectorAttributeValueInsideDoubleQuotes","ch","charCodeAt","updateInput","lastDefaultValue","setDefaultValue","initInput","isHydrating","ownerDocument","updateOptions","multiple","propValue","setDefaultSelected","selected","defaultSelected","updateTextarea","initTextarea","textContent","setTextContent","nodeValue","unitlessNumbers","setValueForStyle","styleName","isCustomProperty","setProperty","cssFloat","has","setValueForStyles","prevStyles","styleName$16","styleName$17","isCustomElement","aliases","isJavaScriptProtocol","sanitizeURL","noop$1","currentReplayingEvent","getEventTarget","nativeEvent","restoreTarget","restoreQueue","restoreStateOfTarget","internalInstance","querySelectorAll","otherNode","form","otherProps","isInsideEventHandler","batchedUpdates$1","flushSyncWork$1","getListener","canUseDOM","passiveBrowserEventsSupported","startText","fallbackText","getData","end","startValue","startLength","endValue","endLength","minEnd","getEventCharCode","charCode","functionThatReturnsTrue","functionThatReturnsFalse","createSyntheticEvent","Interface","SyntheticBaseEvent","reactName","reactEventType","nativeEventTarget","propName","_reactName","_targetInst","currentTarget","isDefaultPrevented","defaultPrevented","isPropagationStopped","persist","isPersistent","lastMovementX","lastMovementY","lastMouseEvent","EventInterface","eventPhase","timeStamp","SyntheticEvent","UIEventInterface","SyntheticUIEvent","MouseEventInterface","pageX","pageY","getModifierState","getEventModifierState","buttons","fromElement","toElement","movementX","movementY","SyntheticMouseEvent","SyntheticDragEvent","dataTransfer","SyntheticFocusEvent","SyntheticAnimationEvent","animationName","elapsedTime","pseudoElement","SyntheticClipboardEvent","clipboardData","SyntheticCompositionEvent","normalizeKey","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","translateToKey","modifierKeyToProp","Alt","Meta","Shift","modifierStateGetter","keyArg","SyntheticKeyboardEvent","String","fromCharCode","location","repeat","locale","SyntheticPointerEvent","pressure","tangentialPressure","tiltX","tiltY","twist","isPrimary","SyntheticTouchEvent","targetTouches","SyntheticTransitionEvent","SyntheticWheelEvent","wheelDeltaX","SyntheticToggleEvent","newState","oldState","END_KEYCODES","canUseCompositionEvent","documentMode","canUseTextInputEvent","useFallbackCompositionData","SPACEBAR_CHAR","hasSpaceKeypress","isFallbackCompositionEnd","domEventName","getDataFromCustomEvent","isComposing","supportedInputTypes","date","datetime","email","month","number","password","search","tel","week","isTextInputElement","createAndAccumulateChangeEvent","dispatchQueue","accumulateTwoPhaseListeners","activeElement$1","activeElementInst$1","runEventInBatch","processDispatchQueue","getInstIfValueChanged","getTargetInstForChangeEvent","isInputEventSupported","JSCompiler_inline_result$jscomp$286","isSupported$jscomp$inline_427","element$jscomp$inline_428","oninput","stopWatchingForValueChange","handlePropertyChange","handleEventsForInputEventPolyfill","getTargetInstForInputEventPolyfill","getTargetInstForClickEvent","getTargetInstForInputOrChangeEvent","objectIs","is","shallowEqual","objA","objB","keysA","keysB","currentKey","getLeafNode","getNodeForCharacterOffset","nodeEnd","nextSibling","containsNode","outerNode","innerNode","compareDocumentPosition","getActiveElementDeep","containerInfo","HTMLIFrameElement","contentWindow","hasSelectionCapabilities","contentEditable","skipSelectionChangeEvent","activeElementInst","lastSelection","mouseDown","constructSelectEvent","selectionStart","selectionEnd","anchorNode","getSelection","anchorOffset","focusNode","focusOffset","makePrefixMap","styleProp","eventName","prefixes","vendorPrefixes","animationend","animationiteration","animationstart","transitionrun","transitionstart","transitioncancel","transitionend","prefixedEventNames","getVendorPrefixedEventName","prefixMap","animation","transition","ANIMATION_END","ANIMATION_ITERATION","ANIMATION_START","TRANSITION_RUN","TRANSITION_START","TRANSITION_CANCEL","topLevelEventsToReactNames","simpleEventPluginEvents","registerSimpleEvent","reportGlobalError","reportError","ErrorEvent","process","emit","concurrentQueues","concurrentQueuesIndex","concurrentlyUpdatedLanes","finishQueueingConcurrentUpdates","endIndex","markUpdateLaneFromFiberToRoot","enqueueUpdate$1","enqueueConcurrentHookUpdate","getRootForUpdatedFiber","enqueueConcurrentRenderForLane","sourceFiber","isHidden","childLanes","_visibility","hiddenUpdates","nestedUpdateCount","rootWithNestedUpdates","emptyContextObject","FiberNode","pendingProps","mode","elementType","refCleanup","ref","updateQueue","memoizedProps","subtreeFlags","deletions","createFiberImplClass","shouldConstruct","Component","isReactComponent","createWorkInProgress","firstContext","resetWorkInProgress","createFiberFromTypeAndProps","owner","fiberTag","hostContext","itemProp","precedence","rel","onLoad","async","isHostHoistableType","createFiberFromFragment","elements","createFiberFromText","createFiberFromDehydratedFragment","dehydratedNode","createFiberFromPortal","portal","pendingChildren","implementation","CapturedStacks","WeakMap","createCapturedValueAtFiber","existing","forkStack","forkStackIndex","treeForkProvider","treeForkCount","idStack","idStackIndex","treeContextProvider","treeContextId","treeContextOverflow","pushTreeFork","totalChildren","pushTreeId","baseIdWithLeadingBit","baseLength","numberOfOverflowBits","pushMaterializedTreeId","popTreeContext","restoreSuspendedTreeContext","suspendedContext","overflow","hydrationParentFiber","nextHydratableInstance","hydrationErrors","rootOrSingletonContext","HydrationMismatchException","throwOnHydrationMismatch","queueHydrationError","prepareToHydrateHostInstance","instance","listenToNonDelegatedEvent","mediaEventTypes","suppressHydrationWarning","checkForUnmatchedText","popover","onScroll","onScrollEnd","onClick","onclick","popToNextHostParent","popHydrationState","JSCompiler_temp","shouldSetTextContent","getNextHydratableInstanceAfterHydrationBoundary","isSingletonScope","previousHydratableOnEnteringScopedSingleton","getNextHydratable","resetHydrationState","upgradeHydrationErrorsToRecoverable","queuedErrors","workInProgressRootRecoverableErrors","valueCursor","currentlyRenderingFiber$1","lastContextDependency","pushProvider","providerFiber","nextValue","popProvider","scheduleContextWorkOnParentPath","propagationRoot","propagateContextChanges","contexts","forcePropagateEntireTree","list","nextFiber","dependency","propagateParentContextChanges","isInsidePropagationBailout","currentParent","checkIfContextChanged","currentDependencies","memoizedValue","prepareToReadContext","readContext","readContextForConsumer","readContextDuringReconciliation","consumer","AbortControllerLocal","AbortController","signal","aborted","abort","forEach","scheduleCallback$2","NormalPriority","CacheContext","Consumer","Provider","_currentValue2","_threadCount","createCache","controller","refCount","releaseCache","cache","currentEntangledListeners","currentEntangledPendingCount","currentEntangledLane","currentEntangledActionThenable","pingEngtangledActionScope","status","prevOnStartTransitionFinish","globalMostRecentTransitionTime","then","thenable","entangledListeners","requestTransitionLane","resolve","entangleAsyncAction","resumedCache","peekCacheFromPool","cacheResumedFromPreviousRender","workInProgressRoot","pooledCache","pushTransition","offscreenWorkInProgress","prevCachePool","pool","getSuspendedCache","cacheFromPool","SuspenseException","SuspenseyCommitException","SuspenseActionException","noopSuspenseyCommitThenable","isThenableResolved","trackUsedThenable","thenableState","checkIfUseWrappedInAsyncCatch","reason","shellSuspendCounter","fulfilledValue","fulfilledThenable","rejectedThenable","suspendedThenable","resolveLazy","lazyType","getSuspendedThenable","rejectedReason","thenableState$1","thenableIndexCounter$1","unwrapThenable","coerceRef","throwOnInvalidObjectTypeImpl","returnFiber","newChild","createChildReconciler","shouldTrackSideEffects","deleteChild","childToDelete","deleteRemainingChildren","currentFirstChild","mapRemainingChildren","existingChildren","useFiber","placeChild","newFiber","lastPlacedIndex","newIndex","placeSingleChild","updateTextNode","updateElement","updateFragment","updatePortal","createChild","updateSlot","oldFiber","updateFromMap","newIdx","reconcileChildFibersImpl","newChildren","resultingFirstChild","previousNewFiber","nextOldFiber","delete","reconcileChildrenArray","step","reconcileChildrenIterator","firstChildFiber","reconcileChildFibers","mountChildFibers","hasForceUpdate","initializeUpdateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","hiddenCallbacks","callbacks","cloneUpdateQueue","createUpdate","payload","enqueueUpdate","executionContext","entangleTransitions","queueLanes","enqueueCapturedUpdate","capturedUpdate","newFirst","newLast","didReadFromEntangledAsyncAction","suspendIfUpdateReadFromEntangledAsyncAction","processUpdateQueue","workInProgress$jscomp$0","instance$jscomp$0","pendingQueue","lastPendingUpdate","firstPendingUpdate","isHiddenUpdate","workInProgressRootRenderLanes","workInProgressRootSkippedLanes","callCallback","commitCallbacks","currentTreeHiddenStackCursor","prevEntangledRenderLanesCursor","pushHiddenContext","entangledRenderLanes","baseLanes","reuseHiddenContextOnStack","popHiddenContext","suspenseHandlerStackCursor","shellBoundary","pushPrimaryTreeSuspenseHandler","suspenseStackCursor","pushDehydratedActivitySuspenseHandler","pushOffscreenSuspenseHandler","reuseSuspenseHandlerOnStack","popSuspenseHandler","findFirstSuspended","row","state","isSuspenseInstancePending","isSuspenseInstanceFallback","revealOrder","currentlyRenderingFiber","currentHook","workInProgressHook","didScheduleRenderPhaseUpdate","didScheduleRenderPhaseUpdateDuringThisPass","shouldDoubleInvokeUserFnsInHooksDEV","localIdCounter","thenableIndexCounter","globalClientIdCounter","throwInvalidHookError","areHookInputsEqual","nextDeps","prevDeps","renderWithHooks","secondArg","nextRenderLanes","H","HooksDispatcherOnMount","HooksDispatcherOnUpdate","renderWithHooksAgain","finishRenderingHooks","ContextOnlyDispatcher","didRenderTooFewHooks","didReceiveUpdate","numberOfReRenders","lastEffect","stores","memoCache","HooksDispatcherOnRerender","TransitionAwareHostComponent","dispatcher","maybeThenable","useState","useThenable","checkDidRenderIdHook","didRenderIdHook","bailoutHooks","resetHooksOnUnwind","mountWorkInProgressHook","hook","baseQueue","updateWorkInProgressHook","nextCurrentHook","nextWorkInProgressHook","use","usable","useMemoCache","basicStateReducer","updateReducer","reducer","updateReducerImpl","lastRenderedReducer","baseFirst","newBaseQueueFirst","newBaseQueueLast","didReadFromEntangledAsyncAction$60","revertLane","gesture","hasEagerState","eagerState","lastRenderedState","dispatch","rerenderReducer","lastRenderPhaseUpdate","updateSyncExternalStore","subscribe","getSnapshot","getServerSnapshot","isHydrating$jscomp$0","snapshotChanged","updateEffect","subscribeToStore","pushSimpleEffect","destroy","updateStoreInstance","pushStoreConsistencyCheck","renderedSnapshot","nextSnapshot","checkIfSnapshotChanged","forceStoreRerender","latestGetSnapshot","scheduleUpdateOnFiber","mountStateImpl","initialState","initialStateInitializer","updateOptimisticImpl","passthrough","dispatchActionState","actionQueue","setPendingState","setState","isRenderPhaseUpdate","actionNode","isTransition","T","runActionStateAction","prevState","prevTransition","currentTransition","onStartTransitionFinish","handleActionReturnValue","onActionError","error$66","nextState","onActionSuccess","notifyActionListeners","actionStateReducer","mountActionState","initialStateProp","ssrFormState","formState","JSCompiler_inline_result$jscomp$0","inRootOrSingleton","dispatchSetState","dispatchOptimisticSetState","updateActionState","updateActionStateImpl","stateHook","currentStateHook","actionStateActionEffect","rerenderActionState","deps","updateRef","mountEffectImpl","fiberFlags","hookFlags","updateEffectImpl","mountEffect","updateEvent","componentUpdateQueue","useEffectEventImpl","nextImpl","impl","updateInsertionEffect","updateLayoutEffect","imperativeHandleEffect","updateImperativeHandle","mountDebugValue","updateCallback","updateMemo","nextCreate","mountDeferredValueImpl","initialValue","requestDeferredLane","updateDeferredValueImpl","prevValue","startTransition","pendingState","finishedState","dispatchSetStateInternal","thenableWithOverride","chainThenableValue","requestUpdateLane","noop","startHostTransition","formFiber","formData","ensureFormComponentIsStateful","requestFormReset$1","existingStateHook","initialResetState","useHostTransitionStatus","updateId","updateRefresh","refreshCache","provider","root$69","dispatchReducerAction","enqueueRenderPhaseUpdate","entangleTransitionUpdate","currentState","throwIfDuringRender","useCallback","useContext","useEffect","useImperativeHandle","useLayoutEffect","useInsertionEffect","useMemo","useReducer","useRef","useDebugValue","useDeferredValue","useTransition","useSyncExternalStore","useId","useFormState","useActionState","useOptimistic","useCacheRefresh","useEffectEvent","initialArg","identifierPrefix","booleanOrThenable","applyDerivedStateFromProps","ctor","getDerivedStateFromProps","nextProps","classComponentUpdater","enqueueSetState","_reactInternals","enqueueReplaceState","enqueueForceUpdate","checkShouldComponentUpdate","oldProps","newProps","nextContext","shouldComponentUpdate","isPureReactComponent","callComponentWillReceiveProps","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","resolveClassComponentProps","baseProps","defaultProps","propName$73","defaultOnUncaughtError","defaultOnCaughtError","defaultOnRecoverableError","logUncaughtError","errorInfo","onUncaughtError","componentStack","e$74","logCaughtError","boundary","onCaughtError","errorBoundary","e$75","createRootErrorUpdate","createClassErrorUpdate","initializeClassErrorUpdate","getDerivedStateFromError","componentDidCatch","legacyErrorBoundariesThatAlreadyFailed","SelectiveHydrationException","reconcileChildren","nextChildren","updateForwardRef","propsWithoutRef","bailoutOnAlreadyFinishedWork","updateMemoComponent","updateSimpleMemoComponent","checkScheduledUpdateOrContext","prevProps","updateFunctionComponent","updateOffscreenComponent","_pendingMarkers","_retryCache","_transitions","deferHiddenOffscreenComponent","cachePool","bailoutOffscreenComponent","nextBaseLanes","remainingChildLanes","mountActivityChildren","mountWorkInProgressOffscreenFiber","retryActivityComponentWithoutHydrating","markRef","replayFunctionComponent","updateClassComponent","contextType","updater","refs","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","unresolvedOldProps","oldContext","contextType$jscomp$0","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","mountHostRootWithoutHydrating","SUSPENDED_MARKER","treeContext","retryLane","mountSuspenseOffscreenState","getRemainingWorkInPrimaryTree","primaryTreeDidDefer","workInProgressDeferredLane","updateSuspenseComponent","showFallback","didSuspend","canHydrateHydrationBoundary","nextPrimaryChildren","fallback","mountSuspensePrimaryChildren","retrySuspenseComponentWithoutHydrating","dataset","digest","dgst","renderDidSuspendDelayIfPossible","primaryChildren","offscreenProps","scheduleSuspenseWorkOnFiber","initSuspenseListRenderState","isBackwards","tail","lastContentRow","tailMode","renderState","rendering","renderingStartTime","updateSuspenseListComponent","suspenseContext","shouldForceFallback","beginWork","state$102","didSuspendBefore","attemptEarlyBailoutIfNoScheduledUpdate","isDehydrated","getResource","getOwnerDocumentFromRootContainer","setInitialProperties","resolveSingletonInstance","anyProps","hasAttribute","canHydrateInstance","canHydrateTextInstance","updateActivityComponent","pooledCacheLanes","markUpdate","preloadInstanceAndSuspendIfNeeded","shouldRemainOnPreviousScreen","preloadResourceAndSuspendIfNeeded","resource","preloadResource","scheduleRetryEffect","retryQueue","workInProgressSuspendedRetryLanes","cutOffTailIfNeeded","hasRenderedATailFallback","lastTailNode","lastTailNode$106","bubbleProperties","completedWork","didBailout","newChildLanes","child$107","completeWork","pendingContext","nextResource","autoFocus","createTextNode","listenToAllSupportedEvents","workInProgressRootExitStatus","workInProgressRootRenderTargetTime","unwindWork","unwindInterruptedWork","interruptedWork","commitHookEffectListMount","finishedWork","firstEffect","captureCommitPhaseError","commitHookEffectListUnmount","nearestMountedAncestor$jscomp$0","nearestMountedAncestor","destroy_","commitClassCallbacks","safelyCallComponentWillUnmount","componentWillUnmount","safelyAttachRef","instanceToUse","safelyDetachRef","error$140","commitHostMount","srcSet","srcset","commitHostUpdate","domElement","lastProps","propKey","lastProp","setProp","propKey$201","propKey$217","propKey$222","propKey$227","setPropOnCustomElement","propKey$232","updateProperties","isHostParent","getHostSibling","insertOrAppendPlacementNodeIntoContainer","before","_reactRootContainer","insertOrAppendPlacementNode","commitHostSingletonAcquisition","singleton","removeAttributeNode","offscreenSubtreeIsHidden","offscreenSubtreeWasHidden","needsFormReset","PossiblyWeakSet","WeakSet","nextEffect","commitLayoutEffectOnFiber","finishedRoot","recursivelyTraverseLayoutEffects","__reactInternalSnapshotBeforeUpdate","error$139","commitActivityHydrationCallbacks","commitSuspenseHydrationCallbacks","_reactRetry","readyState","registerSuspenseInstanceRetry","retryDehydratedSuspenseBoundary","prevOffscreenSubtreeWasHidden","recursivelyTraverseReappearLayoutEffects","detachFiberAfterEffects","hostParent","hostParentIsContainer","recursivelyTraverseDeletionEffects","commitDeletionEffectsOnFiber","deletedFiber","onCommitFiberUnmount","count","prevHostParent","prevHostParentIsContainer","releaseSingletonInstance","clearHydrationBoundary","retryIfBlockedOn","attachSuspenseRetryListeners","wakeables","retryCache","getRetryCache","wakeable","retry","resolveRetryWakeable","recursivelyTraverseMutationEffects","root$jscomp$0","parentFiber","commitMutationEffectsOnFiber","currentHoistableRoot","commitReconciliationEffects","hoistableRoot","currentResource","head","maybeNodes","getHydratableHoistableCache","property","httpEquiv","charSet","mountHoistable","acquireResource","tagCaches","getHoistableRoot","recursivelyResetForms","globalMostRecentFallbackTime","wasHidden","prevOffscreenSubtreeIsHidden","recursivelyTraverseDisappearLayoutEffects","hideOrUnhideDehydratedBoundary","hostParentFiber","parent$141","parent$143","finishedRoot$jscomp$0","includeWorkInProgressEffects","commitOffscreenPassiveMountEffects","previousCache","commitCachePassiveMountEffect","recursivelyTraversePassiveMountEffects","committedLanes","committedTransitions","commitPassiveMountOnFiber","_finishedWork$memoize2","onPostCommit","passiveEffectDuration","recursivelyTraverseAtomicPassiveEffects","recursivelyTraverseReconnectPassiveEffects","committedLanes$jscomp$0","committedTransitions$jscomp$0","suspenseyCommitFlag","recursivelyAccumulateSuspenseyCommit","suspendedState","accumulateSuspenseyCommitOnFiber","media","matchMedia","matches","getStyleKey","getStylesheetSelectorFromKey","_p","onUnsuspend","stylesheetPropsFromRawProps","preloadPropsMap","adoptPreloadPropsForStylesheet","linkInstance","Promise","reject","stylesheets","preload","suspendResource","previousHoistableRoot","detachAlternateSiblings","previousFiber","recursivelyTraversePassiveUnmountEffects","commitPassiveUnmountEffectsInsideOfDeletedTree_begin","commitPassiveUnmountOnFiber","recursivelyTraverseDisconnectPassiveEffects","deletedSubtreeRoot","DefaultAsyncDispatcher","getCacheForType","resourceType","cacheForType","cacheSignal","PossiblyWeakMap","workInProgressSuspendedReason","workInProgressThrownValue","workInProgressRootDidSkipSuspendedSiblings","workInProgressRootIsPrerendering","workInProgressRootDidAttachPingListener","workInProgressRootInterleavedUpdatedLanes","workInProgressRootPingedLanes","workInProgressRootConcurrentErrors","workInProgressRootDidIncludeRecursiveRenderUpdate","workInProgressTransitions","pendingEffectsStatus","pendingEffectsRoot","pendingFinishedWork","pendingEffectsLanes","pendingEffectsRemainingLanes","pendingPassiveTransitions","pendingRecoverableErrors","cancelPendingCommit","prepareFreshStack","markRootSuspended","ensureRootIsScheduled","performWorkOnRoot","forceSync","shouldTimeSlice","expiredLanes","exitStatus","prevExecutionContext","prevDispatcher","pushDispatcher","prevAsyncDispatcher","pushAsyncDispatcher","thrownValue","throwAndUnwindWorkLoop","replaySuspendedUnitOfWork","hostFiber","completeUnitOfWork","resetWorkInProgressStack","workLoopConcurrentByScheduler","thrownValue$167","handleThrow","A","renderRootConcurrent","renderRootSync","renderWasConcurrent","isRenderConsistentWithExternalStores","errorRecoveryDisabledLanes","wasRootDehydrated","timeoutHandle","scheduleTimeout","commitRootWhenReady","recoverableErrors","transitions","didIncludeRenderPhaseUpdate","updatedLanes","suspendedRetryLanes","didSkipSuspendedSiblings","suspendedCommitReason","completedRenderStartTime","completedRenderEndTime","imgCount","imgBytes","suspenseyImages","waitingForImages","waitingForViewTransition","unsuspend","timeoutOffset","insertSuspendedStylesheets","commit","stylesheetTimer","estimatedBytesWithinLimit","performance","getEntriesByType","bits","resourceEntries","entry","transferSize","initiatorType","isLikelyStaticResource","responseEnd","overlapEntry","overlapStartTime","startTime","overlapTransferSize","overlapInitiatorType","connection","downlink","estimateBandwidth","imgTimer","waitForCommitToBeReady","commitRoot","check","didAttemptEntireTree","expirationTimes","index$6","flushSyncWorkAcrossRoots_impl","cancelTimeout","allEntangledLanes","index$4","shouldYieldForPrerendering","unitOfWork","workLoopSync","thrownValue$165","performUnitOfWork","suspendedReason","rootRenderLanes","attachPingListener","markerInstances","cause","wrapperError","throwException","unwindUnitOfWork","skipSiblings","flushPendingEffects","finishedLanes","remainingLanes","previouslyPendingLanes","index$7","hiddenUpdatesForLane","markRootFinished","callbackNode","callbackPriority","flushPassiveEffects","eventsEnabled","selection","rangeCount","e$20","indexWithinAnchor","indexWithinFocus","selectionInformation","focusedElem","selectionRange","resolvedPrevProps","clearContainerSparingly","commitBeforeMutationEffects","flushMutationEffects","flushLayoutEffects","flushSpawnedWork","rootMutationHasEffect","priorSelectionInformation","curFocusedElem","priorFocusedElem","priorSelectionRange","start$jscomp$0","end$jscomp$0","startMarker","endMarker","createRange","setStart","removeAllRanges","addRange","setEnd","rootHasLayoutEffect","releaseRootPooledCache","onCommitFiberRoot","onRecoverableError","recoverableError","renderPriority","onPostCommitFiberRoot","captureCommitPhaseErrorOnRoot","rootFiber","pingCache","threadIDs","pingSuspendedRoot","retryTimedOutBoundary","boundaryFiber","firstScheduledRoot","lastScheduledRoot","didScheduleMicrotask","mightHavePendingSyncWork","isFlushingWork","currentEventTransitionLane","scheduleMicrotask","processRootScheduleInImmediateTask","processRootScheduleInMicrotask","syncTransitionLanes","onlyLegacy","didPerformSomeWork","root$170","performSyncWorkOnRoot","currentPopstateTransitionEvent","shouldAttemptEagerTransition","scheduleTaskForRootDuringMicrotask","index$5","expirationTime","performWorkOnRootViaSchedulerTask","didTimeout","originalCallbackNode","workInProgressRootRenderLanes$jscomp$0","actionScopeLane","coerceFormActionProp","actionProp","createFormDataWithSubmitter","submitter","temp","FormData","i$jscomp$inline_1577","eventName$jscomp$inline_1578","nonDelegatedEvents","eventSystemFlags","_dispatchQueue$i","previousInstance","i$jscomp$0","_dispatchListeners$i","targetElement","listenerSetKey","addTrappedEventListener","listenToNativeEvent","isCapturePhaseListener","listeningMarker","rootContainerElement","targetContainer","listenerWrapper","dispatchDiscreteEvent","dispatchContinuousEvent","capture","dispatchEventForPluginEventSystem","targetInst$jscomp$0","ancestorInst","nodeTag","grandTag","SyntheticEventCtor","inCapturePhase","accumulateTargetOnly","reactEventName","lastHostComponent","_instance","createDispatchListener","parentWindow","getParent","tempB","accumulateEnterLeaveListenersForEvent","getTargetInstFunc","handleEventFunc","fallbackData","eventType","getNativeBeforeInputChars","char","getFallbackBeforeInputChars","maybeTargetInst","formAction","extractEvents$1","targetFiber","captureName","_instance2","unshift","common","_instance3","NORMALIZE_NEWLINES_REGEX","NORMALIZE_NULL_AND_REPLACEMENT_REGEX","normalizeMarkupForTextOrAttribute","markup","serverText","clientText","formEncType","formMethod","formTarget","encType","__html","endsWith","hasSrc","hasSrcSet","propValue$184","parentNamespace","dangerouslySetInnerHTML","localPromise","queueMicrotask","handleErrorInNextTick","parentInstance","hydrationInstance","depth","nextNode","node$jscomp$0","nextNode$jscomp$0","suspenseInstance","_stashedDisplay","_stashedText","targetInstance","previousSibling","rootContainerInstance","preconnectsSet","getRootNode","previousDispatcher","previousWasRendering","wasRendering","formInst","D","preconnectAs","C","as","globalDocument","preloadSelector","imageSrcSet","imageSizes","getScriptKey","getScriptSelectorFromKey","X","scripts","adoptPreloadPropsForScript","insertStylesheet","M","limitedEscapedHref","currentProps","preloadProps","styles$243","resource$244","integrity","hrefLang","rawProps","styleProps","instance$249","nodes","prior","stylesheetProps","scriptProps","keyAttribute","caches","nodeKey","precedencesByRoot","insertStylesheetIntoRoot","precedences","FiberRootNode","hydrate","onDefaultTransitionIndicator","incompleteTransitions","createFiberRoot","initialChildren","hydrationCallbacks","isStrictMode","getContextForSubtree","parentComponent","updateContainerImpl","markRetryLaneImpl","markRetryLaneIfNotHydrated","attemptContinuousHydration","attemptHydrationAtCurrentPriority","blockedOn","findInstanceBlockingEvent","return_targetInst","clearIfContinuousEvent","queuedFocus","accumulateOrCreateContinuousQueuedReplayableEvent","queuedDrag","queuedMouse","queuedPointers","queuedPointerCaptures","queueIfContinuousEvent","discreteReplayableEvents","findInstanceBlockingTarget","hasScheduledReplayAttempt","queuedExplicitHydrationTargets","existingQueuedEvent","targetContainers","attemptExplicitHydrationTarget","queuedTarget","attemptReplayContinuousQueuedEvent","queuedEvent","nextBlockedOn","nativeEventClone","attemptReplayContinuousQueuedEventInMap","replayUnblockedEvents","scheduleCallbackIfUnblocked","unblocked","lastScheduledReplayQueue","scheduleReplayQueueIfNeeded","formReplayingQueue","submitterOrAction","unblock","$$reactFormReplay","formProps","defaultOnDefaultTransitionIndicator","handleNavigate","canIntercept","intercept","pendingResolve","focusReset","scroll","handleNavigateComplete","isCancelled","startFakeNavigation","navigation","currentEntry","navigate","getState","history","ReactDOMRoot","internalRoot","_internalRoot","ReactDOMHydrationRoot","unmount","unstable_scheduleHydration","isomorphicReactPackageVersion$jscomp$inline_1840","findDOMNode","componentOrElement","parentA","parentB","didFindChild","child$0","findCurrentFiberUsingSlowPath","internals$jscomp$inline_2347","bundleType","rendererPackageName","currentDispatcherRef","reconcilerVersion","__REACT_DEVTOOLS_GLOBAL_HOOK__","hook$jscomp$inline_2348","isDisabled","supportsFiber","inject","exports","createRoot","unstable_strictMode","hydrateRoot","Internals","getCrossOriginStringAs","createPortal","createPortal$1","flushSync","previousTransition","previousUpdatePriority","preconnect","prefetchDNS","preinit","fetchPriority","nonce","preinitModule","preloadModule","requestFormReset","unstable_batchedUpdates","permalink","useFormStatus","checkDCE","module","jsxProd","config","maybeKey","Fragment","jsx","jsxs","ReactNoopUpdateQueue","isMounted","emptyObject","ComponentDummy","PureComponent","partialState","forceUpdate","pureComponentPrototype","ReactElement","refProp","isValidElement","object","userProvidedKeyEscapeRegex","getElementKey","escaperLookup","escape","mapIntoArray","escapedPrefix","nameSoFar","oldElement","newKey","invokeCallback","nextNamePrefix","resolveThenable","mapChildren","func","lazyInitializer","_status","_result","moduleObject","default","Children","forEachFunc","forEachContext","toArray","only","Activity","Profiler","StrictMode","Suspense","__COMPILER_RUNTIME","__proto__","cloneElement","childArray","createContext","childrenLength","createRef","forwardRef","lazy","memo","scope","unstable_useCacheRefresh","Context","heap","parentIndex","peek","halfLength","leftIndex","rightIndex","diff","sortIndex","localPerformance","localDate","initialTime","taskQueue","timerQueue","taskIdCounter","currentTask","currentPriorityLevel","isPerformingWork","isHostCallbackScheduled","isHostTimeoutScheduled","needsPaint","localSetTimeout","localClearTimeout","localSetImmediate","setImmediate","advanceTimers","timer","handleTimeout","isMessageLoopRunning","schedulePerformWorkUntilDeadline","firstTimer","requestHostTimeout","taskTimeoutID","frameInterval","shouldYieldToHost","performWorkUntilDeadline","hasMoreWork","previousPriorityLevel","priorityLevel","continuationCallback","MessageChannel","channel","port","port2","port1","onmessage","postMessage","ms","unstable_Profiling","task","unstable_forceFrameRate","fps","unstable_next","eventHandler","unstable_runWithPriority","unstable_wrapCallback","parentPriorityLevel","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","o","g","globalThis","Function","_typeof","toPropertyKey","toPrimitive","TypeError","_defineProperty","writable","ownKeys","getOwnPropertySymbols","_objectSpread2","getOwnPropertyDescriptors","defineProperties","changelog","changes","factions","gradient","accent","border","description","simpleDescription","leaders","bonus","FactionSelect","_ref","onSelect","onOpenPeopleGallery","gameMode","fontMode","toggleFont","hoveredFaction","setHoveredFaction","selectedFaction","setSelectedFaction","showChangelog","setShowChangelog","isExplorer","_jsxs","_jsx","backgroundImage","textShadow","animationDelay","faction","isSelected","isHovered","onMouseEnter","onMouseLeave","background","viewBox","strokeWidth","strokeLinecap","strokeLinejoin","handleStart","change","LeafletContext","useLeafletContext","useMap","_objectWithoutProperties","propertyIsEnumerable","MapContainerComponent","forwardedRef","boundsOptions","placeholder","_excluded","setContext","mapInstanceRef","_context$map","mapRef","LeafletMap","freeze","__version","createLeafletContext","contents","_objectSpread","MapContainer","createElementObject","createElementHook","elementRef","propsRef","useEventHandlers","eventHandlers","eventHandlersRef","withPane","_props$pane","useLayerLifecycle","_context$layerContain","layerContainer","_context$layerContain2","createLayerHook","useElement","attributionRef","useAttribution","createPathHook","optionsRef","pathOptions","_props$pathOptions","usePathOptions","LeafComponent","createLeafComponent","LeafletTileLayer","updateGridLayer","ContainerComponent","createContainerComponent","createPathComponent","LeafletGeoJSON","extra","overlayContainer","territories","detroit","theater","startingOwner","hasFort","adjacency","hexCells","col","primaryCell","labelPosition","troopPosition","pointsPosition","fort_dearborn","niagara","lake_erie","isNaval","lake_ontario","upper_canada","washington_dc","baltimore","bladensburg","chesapeake_bay","virginia","new_orleans","creek_nation","startingTroops","mississippi_territory","gulf_of_mexico","atlantic_sea_lanes","halifax","new_york","montreal","ohio_valley","indiana_territory","carolina","areAdjacent","id1","id2","_territories$id1$adja","_territories$id","theaterLabels","labelPos","ownerColors","us","british","native","neutral","colors","TheaterLabels","_ref3","SelectionOverlay","_ref4","selectedTerritory","territoryGeo","_ref5","NeighborHighlight","_ref6","polygons","neighborId","_ref7","Boolean","HighlightOverlay","_ref8","highlightedTerritories","_ref9","TroopMarkers","_ref0","territoryOwners","troops","handleZoom","showNames","baseFontSize","nameFontSize","countFontSize","ptsFontSize","entries","_ref1","geo","terr","troopCount","pts","fort","_ref10","onTerritoryClick","geoJsonRef","onTerritoryClickRef","geoData","_ref2","buildGeoJSON","geoKey","JSON","stringify","minHeight","_onTerritoryClickRef$","factionLabels","factionColors","Scoreboard","scores","playerFaction","nationalismMeter","playerTerritoryCount","nativeResistance","navalDominance","factionMultiplier","score","toFixed","ownerLabels","TerritoryInfo","territoryId","IntroScreen","onContinue","factionIntros","subtitle","simpleContext","yourRole","simpleYourRole","objectives","simpleObjectives","historicalNote","simpleHistoricalNote","howToPlay","simpleHowToPlay","intro","howToPlayItems","role","objective","EventCard","onDismiss","countdown","setCountdown","phase","setPhase","selectedAnswer","setSelectedAnswer","shuffledQuiz","quiz","choices","correctIndex","indices","_","shuffleChoices","setInterval","clearInterval","isCorrect","year","primarySource","quote","didYouKnow","simpleDidYouKnow","simpleEffect","effect","simpleQuestion","question","choice","origIdx","displayChoice","simpleChoices","simpleExplanation","explanation","reward","nationalism","penalty","handleDismiss","quizResult","answered","correct","DieFace","dotPositions","dots","rx","cx","cy","BattleModal","battle","onClose","setAnimating","showResult","setShowResult","handleKey","undefended","fromTerr","fromId","toTerr","toId","attackRolls","val","defendRolls","attackerLosses","defenderLosses","attackLeaderBonus","defendLeaderBonus","fortBonus","firstStrike","conquered","KnowledgeCheck","onAnswer","questionNumber","selectedIndex","setSelectedIndex","setAnswered","shuffleIndices","handleSelect","handleContinue","KnowledgeCheckPanel","totalAnswered","totalCorrect","onTakeCheck","percent","ObjectivesPanel","expandedId","setExpandedId","completed","isExpanded","progressInfo","progressPercent","total","historicalContext","TurnJournal","expanded","setExpanded","visible","season","items","__rest","__awaiter","thisArg","_arguments","P","generator","fulfilled","rejected","SuppressedError","FunctionsError","super","FunctionsFetchError","FunctionsRelayError","FunctionsHttpError","FunctionRegion","FunctionsClient","headers","customFetch","region","Any","fetch","resolveFetch","setAuth","token","Authorization","functionName_1","functionName","_this","timeoutId","timeoutController","functionArgs","_headers","URL","searchParams","Blob","ArrayBuffer","effectiveSignal","response","fetchError","isRelayError","ok","responseType","blob","PostgrestError","details","hint","PostgrestBuilder","builder","shouldThrowOnError","Headers","schema","_builder$shouldThrowO","isMaybeSingle","_builder$isMaybeSingl","urlLengthLimit","_builder$urlLengthLim","throwOnError","setHeader","onfulfilled","onrejected","res","_fetch","res$1","statusText","_this$headers$get","parse","countHeader","_this$headers$get2","contentRange","_res$headers$get","_error$details","errorDetails","causeMessage","_cause$message","causeCode","_cause$code","_fetchError$name","_cause$name","_fetchError$stack","urlLength","_fetchError$name2","returns","overrideTypes","PostgrestTransformBuilder","select","columns","quoted","cleanedColumns","append","column","ascending","nullsFirst","foreignTable","referencedTable","existingOrder","keyOffset","keyLimit","abortSignal","single","maybeSingle","csv","explain","analyze","verbose","settings","buffers","wal","forMediatype","rollback","maxAffected","PostgrestReservedCharsRegexp","PostgrestFilterBuilder","eq","neq","gt","gte","lt","lte","like","pattern","likeAllOf","patterns","likeAnyOf","ilike","ilikeAllOf","ilikeAnyOf","regexMatch","regexIMatch","isDistinct","in","values","cleanedValues","notIn","containedBy","rangeGt","rangeGte","rangeLt","rangeLte","rangeAdjacent","textSearch","query","typePart","configPart","not","operator","or","PostgrestQueryBuilder","fetch$1","cloneRequestState","insert","defaultToNull","reduce","acc","uniqueColumns","_this$fetch","upsert","onConflict","ignoreDuplicates","_this$fetch2","_this$fetch3","_this$fetch4","PostgrestClient","schemaName","originalFetch","existingSignal","abortHandler","finally","relation","rpc","_isObject","_hasObjectArg","detectEnvironment","WebSocket","global","WebSocketPair","workaround","EdgeRuntime","_process","processVersions","versionString","nodeVersion","getWebSocketConstructor","env","errorMessage","createWebSocket","protocols","isWebSocketSupported","DEFAULT_VERSION","VSN_2_0_0","DEFAULT_VSN","DEFAULT_TIMEOUT","SOCKET_STATES","CHANNEL_STATES","CHANNEL_EVENTS","TRANSPORTS","CONNECTION_STATE","PostgresTypes","Serializer","allowedMetadataKeys","HEADER_LENGTH","USER_BROADCAST_PUSH_META_LENGTH","KINDS","userBroadcastPush","userBroadcast","BINARY_ENCODING","JSON_ENCODING","BROADCAST_EVENT","encode","msg","_binaryEncodeUserBroadcastPush","join_ref","topic","_isArrayBuffer","_encodeBinaryUserBroadcastPush","_encodeJsonUserBroadcastPush","userPayload","_encodeUserBroadcastPush","encodedUserPayload","TextEncoder","buffer","encodingType","encodedPayload","joinRef","userEvent","rest","_pick","metadata","metaLength","header","DataView","setUint8","combined","byteLength","decode","rawPayload","_binaryDecode","jsonPayload","kind","getUint8","decoder","TextDecoder","_decodeUserBroadcast","topicSize","userEventSize","metadataSize","payloadEncoding","parsedPayload","fromEntries","Timer","timerCalc","tries","convertChangeData","record","skipTypes","rec_key","convertColumn","columnName","find","colType","convertCell","charAt","dataType","bool","toBoolean","float4","float8","int2","int4","int8","numeric","oid","toNumber","jsonb","toJson","toTimestampString","abstime","daterange","int4range","int8range","money","reltime","timestamptz","timetz","tsrange","tstzrange","parsedValue","lastIdx","closeBrace","arr","valTrim","httpEndpointURL","socketUrl","wsUrl","protocol","pathname","Push","sent","timeoutTimer","receivedResp","recHooks","refEvent","resend","_cancelRefEvent","send","_hasReceived","startTimeout","socket","_joinRef","updatePayload","receive","_makeRef","_replyEventName","_cancelTimeout","_matchReceive","trigger","_trigger","h","REALTIME_PRESENCE_LISTEN_EVENTS","REALTIME_POSTGRES_CHANGES_LISTEN_EVENT","REALTIME_LISTEN_TYPES","REALTIME_SUBSCRIBE_STATES","RealtimePresence","pendingDiffs","caller","onJoin","onLeave","onSync","syncState","syncDiff","inPendingSyncState","currentPresences","newPresences","leftPresences","cloneDeep","transformedState","transformState","joins","leaves","presences","newPresenceRefs","presence_ref","curPresenceRefs","joinedPresences","joinedPresenceRefs","curPresences","presenceRefsToRemove","getOwnPropertyNames","metas","presence","RealtimeChannel","bindings","joinedOnce","pushBuffer","subTopic","broadcast","ack","self","private","joinPush","rejoinTimer","_rejoinUntilConnected","reconnectAfterMs","joined","pushEvent","_onClose","_remove","_onError","_isLeaving","_isClosed","errored","_isJoining","reply","broadcastEndpointURL","endPoint","replay","isConnected","connect","isPrivate","postgres_changes","presence_enabled","PRESENCE","accessTokenPayload","accessTokenValue","access_token","CHANNEL_ERROR","CLOSED","updateJoinPayload","_rejoin","_isManualToken","clientPostgresBindings","bindingsLen","newPostgresBindings","clientPostgresBinding","table","serverPostgresFilter","isFilterValueEqual","unsubscribe","SUBSCRIBED","TIMED_OUT","presenceState","untrack","httpSend","apikey","apiKey","messages","_fetchWithTimeout","success","errorBody","_canPush","_push","endpoint_payload","cancel","leaving","leavePush","leave","teardown","_addToPushBuffer","removedPush","_onMessage","_event","_isMember","typeLower","toLocaleLowerCase","handledPayload","bindId","bindEvent","ids","_e","_f","postgresChanges","commit_timestamp","errors","enrichedPayload","new","_getPayloadRecords","_isJoined","joining","binding","isEqual","obj1","obj2","serverValue","clientValue","_leaveOpenTopic","records","Transformers","old_record","CONNECTION_TIMEOUTS","RECONNECT_INTERVALS","RealtimeClient","_manuallySetToken","channels","httpEndpoint","transport","heartbeatIntervalMs","heartbeatTimer","pendingHeartbeatRef","heartbeatCallback","reconnectTimer","vsn","logger","conn","sendBuffer","serializer","stateChangeCallbacks","open","accessToken","_connectionState","_wasManualDisconnect","_authPromise","_heartbeatSentAt","_resolveFetch","websocket","_initializeOptions","_setupReconnectionTimer","isConnecting","isDisconnecting","_setConnectionState","_setAuthSafely","endpointURL","WebSocketFactory","_setupConnectionHandlers","_appendParams","disconnect","fallbackTimer","onclose","_teardownConnection","getChannels","removeChannel","removeAllChannels","values_1","all","connectionState","connecting","Connecting","Open","closing","Closing","Closed","realtimeTopic","exists","chan","_performAuth","sendHeartbeat","onHeartbeat","flushSendBuffer","newRef","dupChannel","_onConnMessage","rawMessage","latency","refString","_triggerStateCallbacks","_clearTimer","_clearAllTimers","binaryType","onopen","_onConnOpen","_onConnError","_onConnClose","_terminateWorker","worker","workerRef","_startWorkerHeartbeat","_startHeartbeat","workerUrl","objectUrl","_workerObjectUrl","Worker","interval","terminate","_triggerChanError","URLSearchParams","result_url","createObjectURL","manual","tokenToSend","isManualToken","_waitForAuthIfNeeded","_g","logLevel","log_level","_h","_j","_k","_l","_m","IcebergError","_opts$icebergType","icebergType","icebergCode","isCommitStateUnknown","isNotFound","isConflict","isAuthenticationTimeout","createFetchClient","_options$fetchImpl","fetchFn","fetchImpl","baseUrl","buildUrl","authHeaders","auth","getHeaders","buildAuthHeaders","isJson","_errorDetail$message","errBody","errorDetail","namespaceToPath","NamespaceOperations","client","listNamespaces","ns","createNamespace","dropNamespace","loadNamespaceMetadata","namespaceExists","createNamespaceIfNotExists","namespaceToPath2","TableOperations","accessDelegation","listTables","identifiers","createTable","updateTable","dropTable","_options$purge","purgeRequested","purge","loadTable","tableExists","createTableIfNotExists","IcebergRestCatalog","_options$accessDelega","catalogName","namespaceOps","tableOps","StorageError","statusCode","__isStorageError","isStorageError","StorageApiError","toJSON","StorageUnknownError","originalError","recursiveToCamel","_getErrorMessage","error_description","_err$error","_getRequestParams","parameters","getPrototypeOf","toStringTag","isPlainObject","duplex","_handleRequest","fetcher","noResolveJson","contentType","responseError","handleError","createFetchApi","post","put","defaultApi","vectorsApi","BaseApiClient","handleOperation","operation","StreamDownloadBuilder","downloadFn","execute","BlobDownloadBuilder","promise","asStream","getPromise","onfinally","DEFAULT_SEARCH_OPTIONS","sortBy","DEFAULT_FILE_OPTIONS","cacheControl","StorageFileApi","bucketId","uploadOrUpdate","fileBody","fileOptions","encodeMetadata","toBase64","ReadableStream","pipe","cleanPath","_removeEmptyFolders","_getFinalPath","Id","fullPath","Key","upload","uploadToSignedUrl","_this3","createSignedUploadUrl","_this4","signedUrl","fromPath","toPath","_this6","sourceKey","destinationKey","destinationBucket","copy","_this7","createSignedUrl","expiresIn","_this8","downloadQueryParam","download","encodeURI","signedURL","createSignedUrls","paths","_this9","datum","renderPath","transformationQuery","transformOptsToQueryString","queryString","_this10","_this11","getPublicUrl","_queryString","publicUrl","_this12","_this13","listV2","_this14","Buffer","btoa","resize","quality","DEFAULT_HEADERS","StorageBucketApi","useNewHostname","hostname","listBuckets","listBucketOptionsToQueryString","getBucket","_this2","createBucket","public","file_size_limit","fileSizeLimit","allowed_mime_types","allowedMimeTypes","updateBucket","emptyBucket","_this5","deleteBucket","sortColumn","sortOrder","StorageAnalyticsClient","queryParams","bucketName","isValidBucketName","catalog","Proxy","_len","_key","VectorIndexApi","createIndex","getIndex","vectorBucketName","indexName","listIndexes","deleteIndex","VectorDataApi","putVectors","vectors","getVectors","listVectors","segmentCount","segmentIndex","queryVectors","deleteVectors","VectorBucketApi","StorageVectorsClient","VectorBucketScope","_superprop_getCreateBucket","_superprop_getGetBucket","_superprop_getListBuckets","_superprop_getDeleteBucket","_superprop_getCreateIndex","_superprop_getListIndexes","_superprop_getGetIndex","_superprop_getDeleteIndex","VectorIndexScope","_superprop_getPutVectors","_superprop_getGetVectors","_superprop_getListVectors","_superprop_getQueryVectors","_superprop_getDeleteVectors","StorageClient","analytics","AUTO_REFRESH_TICK_DURATION_MS","EXPIRY_MARGIN_MS","AUTO_REFRESH_TICK_THRESHOLD","API_VERSION_HEADER_NAME","API_VERSIONS","BASE64URL_REGEX","AuthError","__isAuthError","isAuthError","AuthApiError","AuthUnknownError","CustomAuthError","AuthSessionMissingError","isAuthSessionMissingError","AuthInvalidTokenResponseError","AuthInvalidCredentialsError","AuthImplicitGrantRedirectError","AuthPKCEGrantCodeExchangeError","AuthPKCECodeVerifierMissingError","AuthRetryableFetchError","isAuthRetryableFetchError","AuthWeakPasswordError","reasons","AuthInvalidJwtError","TO_BASE64URL","IGNORE_BASE64URL","FROM_BASE64URL","charMap","byteToBase64URL","byte","queuedBits","byteFromBase64URL","stringFromBase64URL","conv","utf8Emit","codepoint","fromCodePoint","utf8State","utf8seq","b64State","byteEmit","leadingBit","stringFromUTF8","codepointToUTF8","stringToUTF8","highSurrogate","base64UrlToUint8Array","onByte","bytesToBase64URL","bytes","onChar","isBrowser","localStorageWriteTests","tested","supportsLocalStorage","localStorage","setItem","removeItem","setItemAsync","storage","getItemAsync","getItem","removeItemAsync","Deferred","promiseConstructor","rej","decodeJWT","signature","raw","dec2hex","dec","substr","generatePKCEChallenge","verifier","crypto","subtle","hashed","randomString","encodedData","hash","sha256","getCodeChallengeAndMethod","storageKey","isPasswordRecovery","codeVerifier","Uint32Array","charSetLen","getRandomValues","generatePKCEVerifier","storedCodeVerifier","codeChallenge","API_VERSION_REGEX","UUID_REGEX","validateUUID","userNotAvailableProxy","sProp","_target","deleteProperty","deepClone","NETWORK_ERROR_CODES","maybeResponse","errorCode","responseAPIVersion","apiVersion","parseResponseAPIVersion","getTime","error_code","weak_password","_request","jwt","qs","redirectTo","requestParams","xform","_sessionResponse","session","refresh_token","expires_in","hasSession","expires_at","user","_sessionResponsePassword","_userResponse","_ssoResponse","_generateLinkResponse","action_link","email_otp","hashed_token","redirect_to","verification_type","_noResolveJsonResponse","SIGN_OUT_SCOPES","GoTrueAdminApi","mfa","listFactors","_listFactors","deleteFactor","_deleteFactor","oauth","listClients","_listOAuthClients","createClient","_createOAuthClient","getClient","_getOAuthClient","updateClient","_updateOAuthClient","deleteClient","_deleteOAuthClient","regenerateClientSecret","_regenerateOAuthClientSecret","signOut","inviteUserByEmail","generateLink","new_email","newEmail","createUser","listUsers","pagination","nextPage","lastPage","page","per_page","perPage","users","links","getUserById","uid","updateUserById","deleteUser","shouldSoftDelete","should_soft_delete","userId","factors","clients","clientId","memoryLocalStorageAdapter","store","internals","LockAcquireTimeoutError","isAcquireTimeout","NavigatorLockAcquireTimeoutError","navigatorLock","acquireTimeout","abortController","locks","ifAvailable","getAddress","address","toHex","padStart","WebAuthnError","__isWebAuthnError","WebAuthnUnknownError","identifyRegistrationError","publicKey","AbortSignal","authenticatorSelection","requireResidentKey","mediation","userVerification","pubKeyCredParams","param","effectiveDomain","isValidDomain","rp","identifyAuthenticationError","rpId","webAuthnAbortService","createNewAbortSignal","abortError","newController","cancelCeremony","deserializeCredentialCreationOptions","PublicKeyCredential","parseCreationOptionsFromJSON","challenge","challengeStr","userOpts","excludeCredentials","restOptions","cred","transports","deserializeCredentialRequestOptions","parseRequestOptionsFromJSON","allowCredentials","serializeCredentialCreationResponse","credential","credentialWithAttachment","rawId","attestationObject","clientDataJSON","clientExtensionResults","getClientExtensionResults","authenticatorAttachment","serializeCredentialRequestResponse","assertionResponse","authenticatorData","userHandle","browserSupportsWebAuthn","credentials","DEFAULT_CREATION_OPTIONS","hints","residentKey","attestation","DEFAULT_REQUEST_OPTIONS","deepMerge","isObject","isArrayBufferLike","isView","WebAuthnApi","enroll","_enroll","_challenge","verify","_verify","authenticate","_authenticate","register","_register","factorType","overrides","factorId","webauthn","friendlyName","challengeResponse","challengeError","credential_options","nameToUse","userData","getUser","fallbackName","user_metadata","baseOptions","mergeCredentialCreationOptions","createCredential","challengeId","credential_response","mergeCredentialRequestOptions","getCredential","rpOrigins","factor","enrollError","factor_type","friendly_name","unenroll","__magic__","polyfillGlobalThis","DEFAULT_OPTIONS","autoRefreshToken","persistSession","detectSessionInUrl","flowType","debug","hasCustomAuthorizationHeader","lockAcquireTimeout","skipAutoInitialize","lockNoOp","GLOBAL_JWKS","GoTrueClient","jwks","jwks_cached_at","cachedAt","MIN_SAFE_INTEGER","userStorage","memoryStorage","stateChangeEmitters","autoRefreshTicker","autoRefreshTickTimeout","visibilityChangedCallback","refreshingDeferred","initializePromise","suppressGetSessionWarning","lockAcquired","pendingInLock","broadcastChannel","instanceID","nextInstanceID","logDebugMessages","_logPrefix","trace","admin","_unenroll","challengeAndVerify","_challengeAndVerify","getAuthenticatorAssuranceLevel","_getAuthenticatorAssuranceLevel","getAuthorizationDetails","_getAuthorizationDetails","approveAuthorization","_approveAuthorization","denyAuthorization","_denyAuthorization","listGrants","_listOAuthGrants","revokeGrant","_revokeOAuthGrant","BroadcastChannel","_debug","_notifyAllSubscribers","isThrowOnErrorEnabled","_returnResult","toISOString","_acquireLock","_initialize","callbackUrlType","parseParametersFromURL","_isImplicitGrantCallback","_isPKCECallback","_getSessionFromURL","isAuthImplicitGrantRedirectError","redirectType","_saveSession","_recoverAndRefresh","_handleVisibilityChange","signInAnonymously","gotrue_meta_security","captcha_token","captchaToken","signUp","codeChallengeMethod","emailRedirectTo","code_challenge","code_challenge_method","phone","signInWithPassword","invalidTokenError","weakPassword","signInWithOAuth","_handleProviderSignIn","scopes","skipBrowserRedirect","exchangeCodeForSession","authCode","_exchangeCodeForSession","signInWithWeb3","chain","signInWithEthereum","signInWithSolana","wallet","statement","resolvedWallet","windowAny","ethereum","accounts","accs","chainId","chainIdHex","domain","issuedAt","notBefore","requestId","scheme","uri","isInteger","createSiweMessage","host","solana","signIn","signMessage","output","outputToProcess","signedMessage","toBase58","maybeSignature","storageItem","auth_code","code_verifier","signInWithIdToken","id_token","signInWithOtp","create_user","shouldCreateUser","messageId","message_id","verifyOtp","signInWithSSO","provider_id","providerId","skip_http_redirect","reauthenticate","_reauthenticate","_useSession","sessionError","endpoint","getSession","waitOn","__loadSession","currentSession","maybeSession","_isValidSession","_removeSession","hasExpired","maybeUser","isServer","__isUserNotAvailableProxy","suppressWarningRef","receiver","insecureUserWarningProxy","_callRefreshToken","_getUser","updateUser","_updateUser","sessionData","userError","setSession","_setSession","timeNow","expiresAt","refreshedSession","token_type","refreshSession","_refreshSession","replaceState","provider_token","provider_refresh_token","actuallyExpiresIn","currentStorageContent","_signOut","isAuthApiError","onAuthStateChange","subscription","_emitInitialSession","resetPasswordForEmail","getUserIdentities","identities","linkIdentity","linkIdentityIdToken","linkIdentityOAuth","_getUrlForProvider","link_identity","unlinkIdentity","identity","identity_id","_refreshAccessToken","refreshToken","debugName","startedAt","attempt","accept","sleep","isRetryable","nextBackOffInterval","separateUser","expiresWithMargin","getUserError","promises","sessionToProcess","userIsProxy","mainSessionData","clonedMainSessionData","clonedSession","_removeVisibilityChangedCallback","_startAutoRefresh","_stopAutoRefresh","ticker","_autoRefreshTokenTick","unref","Deno","unrefTimer","startAutoRefresh","stopAutoRefresh","expiresInTicks","_onVisibilityChanged","calledFromInitialize","visibilityState","urlParams","flowParams","issuer","totp","qr_code","challenge_id","challengeData","currentLevel","aal","nextLevel","currentAuthenticationMethods","amr","authorizationId","redirect_url","client_id","fetchJwk","kid","jwk","getClaims","rawHeader","allowExpired","validateExp","signingKey","alg","startsWith","claims","algorithm","namedCurve","getAlgorithm","importKey","stringToUint8Array","JS_ENV","product","DEFAULT_GLOBAL_OPTIONS","DEFAULT_DB_OPTIONS","DEFAULT_AUTH_OPTIONS","DEFAULT_REALTIME_OPTIONS","fetchWithAuth","supabaseKey","getAccessToken","HeadersConstructor","_await$getAccessToken","SupabaseAuthClient","AuthClient","SupabaseClient","supabaseUrl","trimmedUrl","validateSupabaseUrl","realtimeUrl","authUrl","storageUrl","functionsUrl","defaultStorageKey","defaults","db","dbOptions","authOptions","realtime","realtimeOptions","globalOptions","DEFAULT_DB_OPTIONS$1","DEFAULT_AUTH_OPTIONS$1","DEFAULT_REALTIME_OPTIONS$1","DEFAULT_GLOBAL_OPTIONS$1","_DEFAULT_GLOBAL_OPTIO","_globalOptions$header","applySettingDefaults","_settings$auth$storag","_settings$global$head","_initSupabaseAuthClient","_settings$auth","_getAccessToken","_initRealtimeClient","_listenForAuthEvents","functions","_data$session$access_","_data$session","_handleTokenChanged","changedAccessToken","processVersion","versionMatch","shouldShowDeprecationWarning","supabaseAnonKey","supabase","fetchQuizGateStats","classIds","fetchLeaderboard","classPeriod","getTeacherProfile","generateClassCode","chars","validateClassCode","fetchTeacherStats","byClass","byFaction","classId","class_id","classStats","avgScore","final_score","avgQuizPercent","knowledge_total","knowledge_correct","topScore","factionStats","totalGames","allScores","ScoreSubmission","playerName","finalScore","objectiveBonus","knowledgeCheckResults","battleStats","roundsPlayed","gameOverReason","difficulty","sessionId","onSubmitted","fingerprint","won","fought","getGameFingerprint","alreadySubmitted","_unused","wasAlreadySubmitted","setStatus","errorMsg","setErrorMsg","lateClassCode","setLateClassCode","lateClassData","setLateClassData","lateClassError","setLateClassError","lateValidating","setLateValidating","onChange","handleLateValidate","maxLength","effectiveClassId","baseScore","knowledgeCorrect","knowledgeTotal","battlesWon","battlesFought","territoriesHeld","player_name","class_period","base_score","objective_bonus","faction_multiplier","nationalism_meter","native_resistance","naval_dominance","battles_won","battles_fought","territories_held","rounds_played","game_over_reason","session_id","submitScore","submitted","_unused2","markAsSubmitted","linkSessionToClass","factionIcons","rankMedals","VictoryBadge","victoryType","cfg","domination","treaty","elimination","LeaderboardPreview","onViewFull","setScores","setLoading","setError","cancelled","load","Leaderboard","currentClassPeriod","filterPeriod","setFilterPeriod","filterFaction","setFilterFaction","periods","setPeriods","loadScores","unique","htmlFor","HISTORICAL_OUTCOME","TERRITORY_HISTORY","FACTION_LABELS","REAL_WAR_CHARACTER","HISTORICAL_LESSON","TERRITORY_COMPARISONS","territory","owns","WHAT_CAME_NEXT","factionVerdicts","high","mid","low","getVerdict","verdicts","HistorianAnalysis","paragraphs","factionLabel","outcome","paragraph1","eliminationNote","comparisons","matched","comp","paragraph2","winRate","winPct","tacticalOpener","generateHistoricalComparison","WhatCameNext","sections","getWhatCameNext","GameReport","playerObjectives","journalEntries","gameOverWinner","onPlayAgain","showLeaderboard","setShowLeaderboard","SEASONS","getSeasonYear","headerTitle","headerSubtitle","totalChecks","correctChecks","checkPercent","lost","QuizReviewPanel","expandedIndex","setExpandedIndex","wasCorrect","TutorialOverlay","stepData","currentStep","totalSteps","onNext","onPrev","onSkip","spotlightRect","setSpotlightRect","innerWidth","innerHeight","tooltipPos","computeTooltipPosition","_Fragment","fontSize","lineHeight","alignItems","justifyContent","gap","AITurnReplay","aiActions","onHighlightTerritory","setCurrentStep","autoPlay","setAutoPlay","currentAction","getActionIcon","getResultColor","casualties","attacker","defender","getActionLine","handlePrevious","handleNext","VictoryProgress","currentScore","multiplier","previousScoreRef","previousRoundRef","scoreChange","showChange","isClose","isHalfway","ConfirmActionModal","actionType","actionData","onConfirm","onCancel","handleKeyPress","isPlacement","isManeuver","territoryName","fromTerritoryName","currentTroops","newTroops","fromCurrentTroops","fromNewTroops","vocabulary","impressment","term","grade","useInSentence","militia","garrison","reinforcements","blockade","privateers","fortification","sovereignty","embargo","confederacy","resistance","frontier","frigate","flagship","victoryPoints","maneuver","napoleonic","republicanism","CATEGORY_LABELS","military","political","nativeAmerican","geographic","naval","gameplay","GlossaryPanel","openTerm","setOpenTerm","categories","catKey","terms","profiles","years","category","isGameLeader","biography","primarySources","PeoplePanel","openProfile","setOpenProfile","factionProfiles","others","profile","ProfileEntry","onToggle","jackson","ability","abilityType","modifier","alive","perry","harrison","winfield_scott","brock","drummond","ross","prevost","de_salaberry","tecumseh","tenskwatawa","red_eagle","black_hawk","getAliveLeaders","leaderStates","_leaderStates$l$id$al","_leaderStates$l$id","getLeaderBonus","isAttacking","leader","theaterMatch","navalMatch","getFirstStrikeBonus","getLeaderRallyBonus","sum","territoryNameToId","PHASES","PHASE_ICONS","allocate","phaseInstructions","GameBoard","totalRounds","currentPhase","currentPhaseLabel","seasonYear","reinforcementsRemaining","battleResult","showBattleModal","showIntro","currentEvent","showEventCard","gameOver","aiLog","showAIReplay","currentKnowledgeCheck","showKnowledgeCheck","knowledgeCheckHistory","maneuversRemaining","onAdvancePhase","onDismissIntro","onDismissEvent","onDismissBattle","onAnswerKnowledgeCheck","onRequestKnowledgeCheck","onSaveGame","onDeleteSave","pendingAdvance","pendingAdvanceMessage","onConfirmAdvance","onCancelAdvance","onGoBack","canGoBack","pendingAction","actionHistory","onConfirmPlaceTroop","onConfirmManeuver","onCancelAction","onUndoLastAction","tutorialActive","tutorialStepData","tutorialCurrentStep","tutorialTotalSteps","onTutorialNext","onTutorialPrev","onTutorialSkip","onStartTutorial","onCloseAIReplay","sounds","aliveLeaders","sidebarOpen","setSidebarOpen","highlightedTerritoryIds","setHighlightedTerritoryIds","handleHighlightTerritories","names","handleCloseAIReplay","prevPhase","prevShowEvent","prevShowBattle","sfx","phaseAdvance","eventCard","victory","cannon","defeat","phaseIndex","isPast","isCurrent","toggleMusic","musicOn","toggleMute","answers","questionLabels","AuthGate","onAuthenticated","setEmail","setPassword","setMode","authTab","setAuthTab","magicSent","setMagicSent","onSubmit","signInWithMagicLink","signUpTeacher","SetupProfile","onComplete","setDisplayName","display_name","createTeacherProfile","ClassManager","teacherId","onClassCreated","creating","setCreating","newClassName","setNewClassName","createLoading","setCreateLoading","createError","setCreateError","copiedCode","setCopiedCode","_error$message","teacher_id","createClass","cls","clipboard","writeText","copyLink","Dashboard","onSignOut","stats","setStats","setClasses","selectedClass","setSelectedClass","quizGateData","setQuizGateData","expandedQuestion","setExpandedQuestion","loadData","statsResult","qgResult","fetchTeacherClasses","classNameMap","filteredScores","filteredQGData","qgSessions","qgQuestionStats","quizGateQuestions","q","rows","question_id","totalStudents","totalRetries","retries","firstTryCount","avgRetries","firstTryPercent","newClass","cs","exportQuizGateCSV","game_mode","created_at","toLocaleDateString","cell","revokeObjectURL","colSpan","exportCSV","TeacherDashboard","setProfile","authLoading","setAuthLoading","prof","newSession","teacherGuide","overview","targetAudience","players","learningObjectives","assessedBy","standards","framework","alignments","gameConnection","classroomSetup","heading","phases","victoryConditions","facilitation","tips","assessment","formative","summative","discussionQuestions","questions","faq","answer","CollapsibleSection","defaultOpen","setOpen","TeacherGuide","guide","std","vc","tip","keyIdea","imageUrl","simpleContent","keyTerms","simpleDefinition","causeEffect","thinkAbout","geographicContext","keyLocations","primarySourceExcerpt","analysisPrompt","activity","instruction","simpleContentSections","renderBoldText","VocabTerm","tooltipRef","handleClickOutside","injectVocabTerms","sorted","regex","termObj","questionForSection","renderParagraphs","para","trimmed","ActivitySection","setOrder","selectedIdx","setSelectedIdx","handleClick","clickedPosition","itemIdx","LearningMode","answeredSections","setAnsweredSections","setIsCorrect","setRetries","timelineEvents","sectionQuestion","sectionNeedsAnswer","resetQuizState","handleQuizAnswer","answerIndex","handleRetry","contentText","loc","handlePrev","completeRetries","FACTION_FILTERS","civilian","native_leader","PeopleGallery","setFilter","selectedProfile","setSelectedProfile","ProfileDetail","onBack","paragraph","NameEntry","classParam","savedGame","onExportSave","onImportSave","setPlayerName","setClassPeriod","classCode","setClassCode","classData","setClassData","classError","setClassError","validatingCode","setValidatingCode","useClassCode","setUseClassCode","confirmingDelete","setConfirmingDelete","toastMessage","setToastMessage","handleValidateCode","handleKeyDown","onKeyDown","file","files","fullMode","DIFFICULTY_CONFIGS","easy","BASE_REINFORCEMENTS","MAX_ATTACKS_PER_TURN","MIN_ATTACK_PROBABILITY","CONCENTRATION_RATIO","TOP_N_ATTACK_CHOICES","ATTACK_PROBABILITY_WEIGHT","ATTACK_FORT_PENALTY","MAX_TROOPS_TO_MOVE","MAX_MANEUVERS","medium","hard","DIFFICULTY_LABELS","difficulties","difficultyColors","bg","DifficultySelect","setDifficulty","setGameMode","ErrorBoundary","handleRestoreLastSave","onRestoreSave","hasError","reload","handleStartNewGame","onStartNewGame","handleExportSave","saveData","handleToggleDetails","showDetails","errorCount","errorLog","showExportButton","hasSavedGame","eventCards","roundRange","troopBonus","nationalismChange","troopPenalty","nativeTerrs","effects","removeLeader","territoryChange","newOwner","usPenaltyTerrs","britishTerrs","fortify","invulnerable","_ref11","usTerrs","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","troopPenalty2","drawEventCard","usedCardIds","available","card","knowledgeChecks","required","drawKnowledgeCheck","usedCheckIds","requiredChecksSeen","unseenRequired","kc","original","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_ref25","_ref26","_ref27","nativeTerritories","_ref28","_ref29","_ref30","_ref31","_ref32","checkObjectives","gameState","getFactionObjectives","AI_CONFIG","TERRITORY_DIVISOR","NATIVE_EARLY_BONUS","NATIVE_EARLY_CUTOFF","BRITISH_NAVAL_BONUS","PRIORITY_POINTS_WEIGHT","PRIORITY_ENEMY_NEIGHBOR_WEIGHT","PRIORITY_LOW_TROOP_THRESHOLD","PRIORITY_LOW_TROOP_BONUS","PRIORITY_FORT_BONUS","BONUS_EFFECTIVENESS","ATTACK_TROOP_DIFF_WEIGHT","ATTACK_POINTS_WEIGHT","ATTACK_LEADER_WEIGHT","ATTACK_THEATER_BONUS","ATTACK_US_CANADA_BONUS","MAX_BONUS","MAX_ATTACKER_DICE","MAX_DEFENDER_DICE","FIRST_STRIKE_DAMAGE","MAX_REINFORCE_ITERATIONS","reinforcePriority","adjId","attackScore","attackerTroops","defenderTroops","attackBonus","defenderFaction","defendBonus","winProbability","effectiveAttackers","effectiveDefenders","estimateWinProbability","runAITurn","invulnerableTerritories","newOwners","actions","owned","aiReinforcements","ownedTerritories","prioritized","reinforcementsByTerritory","remaining","frontline","topPriority","concentratedAmount","iterations","_territories$territor","factionName","attacksRemaining","_territories$chosen$f","_territories$chosen$t","possibleAttacks","findPossibleAttacks","topN","chosen","attackerTroopsBefore","defenderTroopsBefore","executeBattle","movedTroops","fromName","toName","interiorWithTroops","maneuversLeft","frontlineNeighbor","adjTerr","movers","_territories$fromId","_territories$frontlin","_territories$frontlin2","owners","attacks","attackerFaction","_territories$toId","_territories$toId2","_territories$toId3","currentDefenderTroops","firstStrikeDamage","attackerCount","defenderCount","totalDefenderTroops","newDefenderTroops","GAME_START","GAME_OVER","GAME_RESET","ADVANCE_PHASE","ADVANCE_ROUND","SET_MESSAGE","HIDE_INTRO","CAPTURE_TERRITORY","ADD_TROOPS","REMOVE_TROOPS","SET_TROOPS","SELECT_TERRITORY","DESELECT_TERRITORY","SET_REINFORCEMENTS","USE_REINFORCEMENT","START_BATTLE","DISMISS_BATTLE","UPDATE_BATTLE_STATS","START_MANEUVER","EXECUTE_MANEUVER","CANCEL_MANEUVER","SET_MANEUVERS","DRAW_EVENT","SHOW_EVENT_CARD","HIDE_EVENT_CARD","MARK_EVENT_USED","ADD_INVULNERABLE_TERRITORY","CLEAR_INVULNERABLE_TERRITORIES","DRAW_KNOWLEDGE_CHECK","SHOW_KNOWLEDGE_CHECK","HIDE_KNOWLEDGE_CHECK","ANSWER_KNOWLEDGE_CHECK","MARK_CHECK_USED","MARK_REQUIRED_CHECK_SEEN","UPDATE_SCORES","DELTA_NATIONALISM","SET_NATIONALISM","ADD_AI_LOG","CLEAR_AI_LOG","SET_AI_ACTIONS","SHOW_AI_REPLAY","HIDE_AI_REPLAY","KILL_LEADER","ADD_JOURNAL_ENTRY","SAVE_PHASE_SNAPSHOT","SET_PENDING_ADVANCE","CLEAR_PENDING_ADVANCE","SET_PENDING_ACTION","CLEAR_PENDING_ACTION","SAVE_ACTION_SNAPSHOT","REMOVE_LAST_ACTION","LOAD_GAME_STATE","LOAD_MAP_STATE","LOAD_COMBAT_STATE","LOAD_EVENT_STATE","LOAD_KNOWLEDGE_STATE","LOAD_SCORE_STATE","LOAD_AI_STATE","LOAD_LEADER_STATE","LOAD_HISTORY_STATE","getInitialGameState","gameReducer","_action$payload","_action$payload2","_action$payload3","_action$payload$name","_action$payload$perio","_action$payload$facti","_action$payload8","_action$payload9","_action$payload0","_action$payload1","_action$payload10","_action$payload11","_action$payload12","period","getFactionName","winner","_action$payload4","_action$payload7","overridePhaseIndex","_action$payload5","targetPhaseIndex","getPhaseMessage","nextPhaseIndex","nextPhase","_action$payload6","getInitialMapState","initTerritoryOwners","initTroops","mapReducer","newCount","getInitialCombatState","maneuverFrom","combatReducer","getInitialEventState","usedEventIds","eventReducer","getInitialKnowledgeState","knowledgeReducer","checkData","getInitialScoreState","scoreReducer","newValue","getInitialAIState","aiReducer","initLeaderStates","states","leadersData","getInitialLeaderState","leaderReducer","getInitialHistoryState","phaseHistory","historyReducer","PHASE_LABELS","ALL_FACTIONS","calculateReinforcements","checkDomination","firstOwner","every","useGameStateV2","dispatchGame","mapState","dispatchMap","combatState","dispatchCombat","eventState","knowledgeState","dispatchKnowledge","scoreState","dispatchScore","aiState","dispatchAI","leaderState","dispatchLeader","historyState","dispatchHistory","pendingEventAfterReplay","getObjectiveBonus","base","applyEventEffects","currentOwners","currentNationalism","currentLeaders","gameStateForEvent","newNationalism","newLeaders","targetTerrs","safeCount","tid","candidates","_territories$id2","penaltyTerrs","penaltyFaction","factionTerrs","loss","addJournalEntry","startGame","resetGame","dismissIntro","selectTerritory","placeTroop","attack","_territories$toId6","_territories$toId7","_territories$toId8","_territories$toId9","_territories$toId0","_territories$toId1","_territories$toId10","_territories$toId4","_territories$toId5","attackDice","defendDice","dismissBattle","dismissEvent","_eventState$currentEv","lid","postEventOwners","newScores","_territories$id3","_eventState$currentEv2","_eventState$currentEv3","answerKnowledgeCheck","_knowledgeState$curre","_knowledgeState$curre2","requestKnowledgeCheck","requestManeuver","_territories$toId11","confirmManeuver","_territories$fromId2","_territories$toId12","_territories$toId13","_territories$toId14","previousFromTroops","previousToTroops","previousManeuversRemaining","maneuverTroops","cancelAction","confirmPlaceTroop","previousTroops","previousReinforcements","doAdvancePhase","skipConfirmation","opponentFactions","aiOwners","aiTroops","allLogs","allActions","_territories$id4","dominator","factionNames","lostDC","lostBaltimore","nextRound","logSummary","advancePhase","confirmAdvance","cancelAdvance","undoLastAction","lastAction","_territories$lastActi","_territories$lastActi2","_territories$lastActi3","goBackPhase","snapshot","handleTerritoryClick","_territories$id7","_territories$id8","_territories$mapState","_territories$id6","_territories$id5","_territories$id1","_territories$combatSt","_territories$id0","_territories$id9","saveGame","loadGame","_unused3","deleteSave","exportSaveFile","importSaveFile","fileContent","gameStarted","setMessage","setBattleResult","closeAIReplay","TUTORIAL_STEPS","STORAGE_KEY","audioCtx","masterGain","musicGain","sfxGain","musicInterval","isMuted","musicPlaying","getCtx","AudioContext","webkitAudioContext","createGain","gain","destination","resume","playTone","freq","volume","osc","createOscillator","frequency","setValueAtTime","exponentialRampToValueAtTime","playNoise","bufferSize","sampleRate","createBuffer","getChannelData","createBufferSource","createBiquadFilter","MELODY","DRUM_PATTERN","melodyIndex","playMusicNote","startMusic","stopMusic","getMuted","initAudio","useSounds","_setMuted","setMusicOn","setMuted","confirm","battleStart","playBattleStart","quizCorrect","quizWrong","generateUUID","randomUUID","App","initialHash","isAuthCallback","route","setRoute","onboardingStep","setOnboardingStep","onboardingData","setOnboardingData","showPeopleGallery","setShowPeopleGallery","game","useGameState","tutorial","setTutorialActive","currentStepData","startTutorial","nextStep","prevStep","skipTutorial","shouldAutoStart","useTutorial","setFontMode","useFontPreference","tutorialTriggered","handleHash","skipLearning","handleNameNext","handleDifficultyNext","handleLearningComplete","quizRetries","questionId","retryCount","submitQuizGateResults","handleFactionSelect","handlePlayAgain","handleRestoreSave"],"sourceRoot":""}